; Listing generated by Microsoft (R) Optimizing Compiler Version 19.16.27045.0 

	TITLE	C:\Users\nhv90\Projects\eech\aphavoc\source\entity\mobile\vehicle\ship\sh_msgs.c
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB MSVCRTD
INCLUDELIB OLDNAMES

PUBLIC	?overload_ship_vehicle_message_responses@@YGXXZ	; overload_ship_vehicle_message_responses
PUBLIC	?__LINE__Var@?0??response_to_collision@@YGHW4ENTITY_MESSAGES@@PAUENTITY@@1PAD@Z@4JA ; `response_to_collision'::`1'::__LINE__Var
PUBLIC	??_C@_0FB@PAKPCKOB@c?3?2users?2nhv90?2projects?2eech?2ap@ ; `string'
PUBLIC	?__LINE__Var@?0??response_to_articulate_loading_doors@@YGHW4ENTITY_MESSAGES@@PAUENTITY@@1PAD@Z@4JA ; `response_to_articulate_loading_doors'::`1'::__LINE__Var
PUBLIC	__real@3f00002000400080
PUBLIC	__real@3f800000
PUBLIC	__real@3fe999999999999a
PUBLIC	__real@3ff0000000000000
EXTRN	?process_assert@@YGXPBD0H@Z:PROC		; process_assert
EXTRN	?multiply_matrix3x3_vec3d@@YGXPAUVEC3D@@QAY02$$CBMPBU1@@Z:PROC ; multiply_matrix3x3_vec3d
EXTRN	?get_inverse_matrix@@YGXQAY02MQAY02$$CBM@Z:PROC	; get_inverse_matrix
EXTRN	?notify_local_entity@@YAHW4ENTITY_MESSAGES@@PAUENTITY@@1ZZ:PROC ; notify_local_entity
EXTRN	?object_contains_sub_object_type@@YGHPAUOBJECT_3D_INSTANCE@@HHPAUOBJECT_3D_SUB_OBJECT_SEARCH_DATA@@@Z:PROC ; object_contains_sub_object_type
EXTRN	?damage_client_server_entity@@YGHPAUENTITY@@0M@Z:PROC ; damage_client_server_entity
EXTRN	?overload_vehicle_message_responses@@YGXW4ENTITY_TYPES@@@Z:PROC ; overload_vehicle_message_responses
EXTRN	?play_vehicle_shot_at_speech@@YGXPAUENTITY@@0@Z:PROC ; play_vehicle_shot_at_speech
EXTRN	?play_vehicle_destroyed_speech@@YGXPAUENTITY@@0@Z:PROC ; play_vehicle_destroyed_speech
EXTRN	?credit_client_server_mobile_kill@@YGXPAUENTITY@@0@Z:PROC ; credit_client_server_mobile_kill
EXTRN	?create_client_server_meta_smoke_list_specified_offset@@YGHW4META_SMOKE_LIST_TYPES@@PAUENTITY@@PAUVEC3D@@@Z:PROC ; create_client_server_meta_smoke_list_specified_offset
EXTRN	?create_client_server_sound_effect_entity@@YGPAUENTITY@@PAU1@W4ENTITY_SIDES@@HW4SOUND_CHANNEL_TYPES@@W4SOUND_LOCALITY_TYPES@@PAUVEC3D@@MMHHHPAH@Z:PROC ; create_client_server_sound_effect_entity
EXTRN	?get_local_force_entity@@YGPAUENTITY@@W4ENTITY_SIDES@@@Z:PROC ; get_local_force_entity
EXTRN	?null_entity_pointer_message@@3PBDB:DWORD	; null_entity_pointer_message
EXTRN	?system_comms_model@@3W4COMMS_MODEL_TYPES@@A:DWORD ; system_comms_model
EXTRN	?message_responses@@3PAY0GB@P6GHW4ENTITY_MESSAGES@@PAUENTITY@@1PAD@ZA:BYTE ; message_responses
EXTRN	?overload_invalid_list_type_message@@3PBDB:DWORD ; overload_invalid_list_type_message
EXTRN	?fn_get_local_entity_parent@@3PAY0CN@P6GPAUENTITY@@PAU1@W4LIST_TYPES@@@ZA:BYTE ; fn_get_local_entity_parent
EXTRN	?fn_get_local_entity_attitude_matrix@@3PAP6GXPAUENTITY@@QAY02M@ZA:BYTE ; fn_get_local_entity_attitude_matrix
EXTRN	?fn_kill_client_server_entity@@3PAY01P6GXPAUENTITY@@@ZA:BYTE ; fn_kill_client_server_entity
EXTRN	?overload_invalid_int_type_message@@3PBDB:DWORD	; overload_invalid_int_type_message
EXTRN	?fn_get_local_entity_int_value@@3PAY0BBH@P6GHPAUENTITY@@W4INT_TYPES@@@ZA:BYTE ; fn_get_local_entity_int_value
EXTRN	?overload_invalid_ptr_type_message@@3PBDB:DWORD	; overload_invalid_ptr_type_message
EXTRN	?fn_get_local_entity_ptr_value@@3PAY0BE@P6GPAXPAUENTITY@@W4PTR_TYPES@@@ZA:BYTE ; fn_get_local_entity_ptr_value
EXTRN	?overload_invalid_vec3d_type_message@@3PBDB:DWORD ; overload_invalid_vec3d_type_message
EXTRN	?fn_get_local_entity_vec3d_ptr@@3PAY0BI@P6GPAUVEC3D@@PAUENTITY@@W4VEC3D_TYPES@@@ZA:BYTE ; fn_get_local_entity_vec3d_ptr
EXTRN	?entities@@3PAUENTITY@@A:DWORD			; entities
EXTRN	__fltused:DWORD
;	COMDAT __real@3ff0000000000000
CONST	SEGMENT
__real@3ff0000000000000 DQ 03ff0000000000000r	; 1
CONST	ENDS
;	COMDAT __real@3fe999999999999a
CONST	SEGMENT
__real@3fe999999999999a DQ 03fe999999999999ar	; 0.8
CONST	ENDS
;	COMDAT __real@3f800000
CONST	SEGMENT
__real@3f800000 DD 03f800000r			; 1
CONST	ENDS
;	COMDAT __real@3f00002000400080
CONST	SEGMENT
__real@3f00002000400080 DQ 03f00002000400080r	; 3.05185e-05
CONST	ENDS
;	COMDAT ?__LINE__Var@?0??response_to_articulate_loading_doors@@YGHW4ENTITY_MESSAGES@@PAUENTITY@@1PAD@Z@4JA
_DATA	SEGMENT
?__LINE__Var@?0??response_to_articulate_loading_doors@@YGHW4ENTITY_MESSAGES@@PAUENTITY@@1PAD@Z@4JA DD 0e1H ; `response_to_articulate_loading_doors'::`1'::__LINE__Var
_DATA	ENDS
;	COMDAT ??_C@_0FB@PAKPCKOB@c?3?2users?2nhv90?2projects?2eech?2ap@
CONST	SEGMENT
??_C@_0FB@PAKPCKOB@c?3?2users?2nhv90?2projects?2eech?2ap@ DB 'c:\users\nh'
	DB	'v90\projects\eech\aphavoc\source\entity\mobile\vehicle\ship\s'
	DB	'h_msgs.c', 00H				; `string'
CONST	ENDS
;	COMDAT ?__LINE__Var@?0??response_to_collision@@YGHW4ENTITY_MESSAGES@@PAUENTITY@@1PAD@Z@4JA
_DATA	SEGMENT
?__LINE__Var@?0??response_to_collision@@YGHW4ENTITY_MESSAGES@@PAUENTITY@@1PAD@Z@4JA DD 050H ; `response_to_collision'::`1'::__LINE__Var
_DATA	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\entity\mobile\vehicle\ship\sh_msgs.c
;	COMDAT ?response_to_articulate_loading_doors@@YGHW4ENTITY_MESSAGES@@PAUENTITY@@1PAD@Z
_TEXT	SEGMENT
tv78 = -80						; size = 4
tv70 = -76						; size = 4
_sound_sample_index$ = -8				; size = 4
_inst3d$ = -4						; size = 4
_message$ = 8						; size = 4
_receiver$ = 12						; size = 4
_sender$ = 16						; size = 4
_pargs$ = 20						; size = 4
?response_to_articulate_loading_doors@@YGHW4ENTITY_MESSAGES@@PAUENTITY@@1PAD@Z PROC ; response_to_articulate_loading_doors, COMDAT

; 225  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 50	 sub	 esp, 80			; 00000050H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 226  : 	object_3d_instance
; 227  : 		*inst3d;
; 228  : 
; 229  : 	sound_sample_indices
; 230  : 		sound_sample_index;
; 231  : 
; 232  : 	#if DEBUG_MODULE
; 233  : 
; 234  : 	debug_log_entity_message (message, receiver, sender, pargs);
; 235  : 
; 236  : 	#endif
; 237  : 
; 238  : 	inst3d = (object_3d_instance *) get_local_entity_ptr_value (receiver, PTR_TYPE_INSTANCE_3D_OBJECT);

  00009	83 7d 0c 00	 cmp	 DWORD PTR _receiver$[ebp], 0
  0000d	74 0a		 je	 SHORT $LN5@response_t
  0000f	8b 45 0c	 mov	 eax, DWORD PTR _receiver$[ebp]
  00012	8b 08		 mov	 ecx, DWORD PTR [eax]
  00014	89 4d b4	 mov	 DWORD PTR tv70[ebp], ecx
  00017	eb 21		 jmp	 SHORT $LN6@response_t
$LN5@response_t:
  00019	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??response_to_articulate_loading_doors@@YGHW4ENTITY_MESSAGES@@PAUENTITY@@1PAD@Z@4JA
  0001f	83 c2 0d	 add	 edx, 13			; 0000000dH
  00022	52		 push	 edx
  00023	68 00 00 00 00	 push	 OFFSET ??_C@_0FB@PAKPCKOB@c?3?2users?2nhv90?2projects?2eech?2ap@
  00028	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  0002d	50		 push	 eax
  0002e	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00033	c7 45 b4 00 00
	00 00		 mov	 DWORD PTR tv70[ebp], 0
$LN6@response_t:
  0003a	b9 01 00 00 00	 mov	 ecx, 1
  0003f	85 c9		 test	 ecx, ecx
  00041	74 09		 je	 SHORT $LN7@response_t
  00043	c7 45 b0 02 00
	00 00		 mov	 DWORD PTR tv78[ebp], 2
  0004a	eb 21		 jmp	 SHORT $LN8@response_t
$LN7@response_t:
  0004c	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??response_to_articulate_loading_doors@@YGHW4ENTITY_MESSAGES@@PAUENTITY@@1PAD@Z@4JA
  00052	83 c2 0d	 add	 edx, 13			; 0000000dH
  00055	52		 push	 edx
  00056	68 00 00 00 00	 push	 OFFSET ??_C@_0FB@PAKPCKOB@c?3?2users?2nhv90?2projects?2eech?2ap@
  0005b	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_ptr_type_message@@3PBDB ; overload_invalid_ptr_type_message
  00060	50		 push	 eax
  00061	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00066	c7 45 b0 00 00
	00 00		 mov	 DWORD PTR tv78[ebp], 0
$LN8@response_t:
  0006d	6a 02		 push	 2
  0006f	8b 4d 0c	 mov	 ecx, DWORD PTR _receiver$[ebp]
  00072	51		 push	 ecx
  00073	6b 55 b4 50	 imul	 edx, DWORD PTR tv70[ebp], 80
  00077	8b 45 b0	 mov	 eax, DWORD PTR tv78[ebp]
  0007a	8b 8c 82 00 00
	00 00		 mov	 ecx, DWORD PTR ?fn_get_local_entity_ptr_value@@3PAY0BE@P6GPAXPAUENTITY@@W4PTR_TYPES@@@ZA[edx+eax*4]
  00081	ff d1		 call	 ecx
  00083	89 45 fc	 mov	 DWORD PTR _inst3d$[ebp], eax

; 239  : 
; 240  : 	if (inst3d)

  00086	83 7d fc 00	 cmp	 DWORD PTR _inst3d$[ebp], 0
  0008a	74 53		 je	 SHORT $LN3@response_t

; 241  : 	{
; 242  : 		if (object_contains_sub_object_type (inst3d, OBJECT_3D_SUB_OBJECT_LOADING_DOOR, 0, NULL))

  0008c	6a 00		 push	 0
  0008e	6a 00		 push	 0
  00090	6a 31		 push	 49			; 00000031H
  00092	8b 45 fc	 mov	 eax, DWORD PTR _inst3d$[ebp]
  00095	50		 push	 eax
  00096	e8 00 00 00 00	 call	 ?object_contains_sub_object_type@@YGHPAUOBJECT_3D_INSTANCE@@HHPAUOBJECT_3D_SUB_OBJECT_SEARCH_DATA@@@Z ; object_contains_sub_object_type
  0009b	85 c0		 test	 eax, eax
  0009d	74 40		 je	 SHORT $LN3@response_t

; 243  : 		{
; 244  : 			sound_sample_index = SOUND_SAMPLE_INDEX_SHIP_DOORS;

  0009f	c7 45 f8 42 00
	00 00		 mov	 DWORD PTR _sound_sample_index$[ebp], 66 ; 00000042H

; 245  : 
; 246  : 			create_client_server_sound_effect_entity

  000a6	8d 45 f8	 lea	 eax, DWORD PTR _sound_sample_index$[ebp]
  000a9	50		 push	 eax
  000aa	6a 01		 push	 1
  000ac	6a 00		 push	 0
  000ae	6a 01		 push	 1
  000b0	51		 push	 ecx
  000b1	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3f800000
  000b9	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  000be	51		 push	 ecx
  000bf	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3f800000
  000c7	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  000cc	6a 00		 push	 0
  000ce	6a 00		 push	 0
  000d0	6a 00		 push	 0
  000d2	6a 1a		 push	 26			; 0000001aH
  000d4	6a 00		 push	 0
  000d6	8b 4d 0c	 mov	 ecx, DWORD PTR _receiver$[ebp]
  000d9	51		 push	 ecx
  000da	e8 00 00 00 00	 call	 ?create_client_server_sound_effect_entity@@YGPAUENTITY@@PAU1@W4ENTITY_SIDES@@HW4SOUND_CHANNEL_TYPES@@W4SOUND_LOCALITY_TYPES@@PAUVEC3D@@MMHHHPAH@Z ; create_client_server_sound_effect_entity
$LN3@response_t:

; 247  : 			(
; 248  : 				receiver,
; 249  : 				ENTITY_SIDE_NEUTRAL,
; 250  : 				ENTITY_SUB_TYPE_EFFECT_SOUND_MISC,
; 251  : 				SOUND_CHANNEL_SOUND_EFFECT,
; 252  : 				SOUND_LOCALITY_ALL,
; 253  : 				NULL,												// position
; 254  : 				1.0,												// amplification
; 255  : 				1.0,												// Werewolf pitch
; 256  : 				TRUE,												// valid sound effect
; 257  : 				FALSE,											// looping
; 258  : 				1,													// sample count
; 259  : 				&sound_sample_index							// sample index list
; 260  : 			);
; 261  : 		}
; 262  : 	}
; 263  : 
; 264  : 	return (TRUE);

  000df	b8 01 00 00 00	 mov	 eax, 1

; 265  : }

  000e4	5f		 pop	 edi
  000e5	5e		 pop	 esi
  000e6	5b		 pop	 ebx
  000e7	8b e5		 mov	 esp, ebp
  000e9	5d		 pop	 ebp
  000ea	c2 10 00	 ret	 16			; 00000010H
?response_to_articulate_loading_doors@@YGHW4ENTITY_MESSAGES@@PAUENTITY@@1PAD@Z ENDP ; response_to_articulate_loading_doors
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\entity\mobile\vehicle\ship\sh_msgs.c
;	COMDAT ?response_to_collision@@YGHW4ENTITY_MESSAGES@@PAUENTITY@@1PAD@Z
_TEXT	SEGMENT
tv297 = -212						; size = 4
tv290 = -208						; size = 4
tv268 = -208						; size = 4
tv219 = -208						; size = 4
tv199 = -208						; size = 4
tv177 = -208						; size = 4
tv145 = -208						; size = 4
tv85 = -208						; size = 4
tv319 = -204						; size = 4
tv282 = -204						; size = 4
tv260 = -204						; size = 4
tv240 = -204						; size = 4
tv211 = -204						; size = 4
tv191 = -204						; size = 4
tv169 = -204						; size = 4
tv137 = -204						; size = 4
tv129 = -204						; size = 4
tv77 = -204						; size = 4
_inv$1 = -136						; size = 36
_m$2 = -100						; size = 36
_weapon_pos$3 = -64					; size = 4
_en_pos$4 = -60						; size = 4
_rel_vec$5 = -56					; size = 12
_rel_pos$6 = -44					; size = 12
_warhead_type$7 = -32					; size = 4
_random_seed$8 = -28					; size = 4
_damage_modifier$ = -24					; size = 4
_total_damage_level$ = -20				; size = 4
_damage_caused$ = -16					; size = 4
_aggressor$ = -12					; size = 4
_enemy_force$ = -8					; size = 4
_force$ = -4						; size = 4
_message$ = 8						; size = 4
_receiver$ = 12						; size = 4
_sender$ = 16						; size = 4
_pargs$ = 20						; size = 4
?response_to_collision@@YGHW4ENTITY_MESSAGES@@PAUENTITY@@1PAD@Z PROC ; response_to_collision, COMDAT

; 80   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec d4 00 00
	00		 sub	 esp, 212		; 000000d4H
  00009	53		 push	 ebx
  0000a	56		 push	 esi
  0000b	57		 push	 edi

; 81   : 
; 82   : 	entity
; 83   : 		*force,
; 84   : 		*enemy_force,
; 85   : 		*aggressor;
; 86   : 
; 87   : 	int
; 88   : 		damage_caused,
; 89   : 		total_damage_level;
; 90   : 
; 91   : 	float
; 92   : 		damage_modifier;
; 93   : 
; 94   : 	#if DEBUG_MODULE
; 95   : 
; 96   : 	debug_log_entity_message (message, receiver, sender, pargs);
; 97   : 
; 98   : 	#endif
; 99   : 
; 100  : 	damage_modifier = va_arg (pargs, double);

  0000c	8b 45 14	 mov	 eax, DWORD PTR _pargs$[ebp]
  0000f	83 c0 08	 add	 eax, 8
  00012	89 45 14	 mov	 DWORD PTR _pargs$[ebp], eax
  00015	8b 4d 14	 mov	 ecx, DWORD PTR _pargs$[ebp]
  00018	f2 0f 5a 41 f8	 cvtsd2ss xmm0, QWORD PTR [ecx-8]
  0001d	f3 0f 11 45 e8	 movss	 DWORD PTR _damage_modifier$[ebp], xmm0

; 101  : 
; 102  : 	damage_caused = damage_client_server_entity (receiver, sender, damage_modifier);

  00022	51		 push	 ecx
  00023	f3 0f 10 45 e8	 movss	 xmm0, DWORD PTR _damage_modifier$[ebp]
  00028	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  0002d	8b 45 10	 mov	 eax, DWORD PTR _sender$[ebp]
  00030	50		 push	 eax
  00031	8b 4d 0c	 mov	 ecx, DWORD PTR _receiver$[ebp]
  00034	51		 push	 ecx
  00035	e8 00 00 00 00	 call	 ?damage_client_server_entity@@YGHPAUENTITY@@0M@Z ; damage_client_server_entity
  0003a	89 45 f0	 mov	 DWORD PTR _damage_caused$[ebp], eax

; 103  : 
; 104  : 	total_damage_level = get_local_entity_int_value (receiver, INT_TYPE_DAMAGE_LEVEL);

  0003d	83 7d 0c 00	 cmp	 DWORD PTR _receiver$[ebp], 0
  00041	74 0d		 je	 SHORT $LN15@response_t
  00043	8b 45 0c	 mov	 eax, DWORD PTR _receiver$[ebp]
  00046	8b 08		 mov	 ecx, DWORD PTR [eax]
  00048	89 8d 34 ff ff
	ff		 mov	 DWORD PTR tv77[ebp], ecx
  0004e	eb 24		 jmp	 SHORT $LN16@response_t
$LN15@response_t:
  00050	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??response_to_collision@@YGHW4ENTITY_MESSAGES@@PAUENTITY@@1PAD@Z@4JA
  00056	83 c2 18	 add	 edx, 24			; 00000018H
  00059	52		 push	 edx
  0005a	68 00 00 00 00	 push	 OFFSET ??_C@_0FB@PAKPCKOB@c?3?2users?2nhv90?2projects?2eech?2ap@
  0005f	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  00064	50		 push	 eax
  00065	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  0006a	c7 85 34 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv77[ebp], 0
$LN16@response_t:
  00074	b9 01 00 00 00	 mov	 ecx, 1
  00079	85 c9		 test	 ecx, ecx
  0007b	74 0c		 je	 SHORT $LN17@response_t
  0007d	c7 85 30 ff ff
	ff 25 00 00 00	 mov	 DWORD PTR tv85[ebp], 37	; 00000025H
  00087	eb 24		 jmp	 SHORT $LN18@response_t
$LN17@response_t:
  00089	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??response_to_collision@@YGHW4ENTITY_MESSAGES@@PAUENTITY@@1PAD@Z@4JA
  0008f	83 c2 18	 add	 edx, 24			; 00000018H
  00092	52		 push	 edx
  00093	68 00 00 00 00	 push	 OFFSET ??_C@_0FB@PAKPCKOB@c?3?2users?2nhv90?2projects?2eech?2ap@
  00098	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_int_type_message@@3PBDB ; overload_invalid_int_type_message
  0009d	50		 push	 eax
  0009e	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  000a3	c7 85 30 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv85[ebp], 0
$LN18@response_t:
  000ad	6a 25		 push	 37			; 00000025H
  000af	8b 4d 0c	 mov	 ecx, DWORD PTR _receiver$[ebp]
  000b2	51		 push	 ecx
  000b3	69 95 34 ff ff
	ff 5c 04 00 00	 imul	 edx, DWORD PTR tv77[ebp], 1116
  000bd	8b 85 30 ff ff
	ff		 mov	 eax, DWORD PTR tv85[ebp]
  000c3	8b 8c 82 00 00
	00 00		 mov	 ecx, DWORD PTR ?fn_get_local_entity_int_value@@3PAY0BBH@P6GHPAUENTITY@@W4INT_TYPES@@@ZA[edx+eax*4]
  000ca	ff d1		 call	 ecx
  000cc	89 45 ec	 mov	 DWORD PTR _total_damage_level$[ebp], eax

; 105  : 
; 106  : 	if (sender)

  000cf	83 7d 10 00	 cmp	 DWORD PTR _sender$[ebp], 0
  000d3	0f 84 bf 03 00
	00		 je	 $LN2@response_t

; 107  : 	{
; 108  : 		if (get_local_entity_type (sender) == ENTITY_TYPE_WEAPON)

  000d9	83 7d 10 00	 cmp	 DWORD PTR _sender$[ebp], 0
  000dd	74 0d		 je	 SHORT $LN19@response_t
  000df	8b 45 10	 mov	 eax, DWORD PTR _sender$[ebp]
  000e2	8b 08		 mov	 ecx, DWORD PTR [eax]
  000e4	89 8d 34 ff ff
	ff		 mov	 DWORD PTR tv129[ebp], ecx
  000ea	eb 1d		 jmp	 SHORT $LN20@response_t
$LN19@response_t:
  000ec	6a 6c		 push	 108			; 0000006cH
  000ee	68 00 00 00 00	 push	 OFFSET ??_C@_0FB@PAKPCKOB@c?3?2users?2nhv90?2projects?2eech?2ap@
  000f3	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  000f9	52		 push	 edx
  000fa	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  000ff	c7 85 34 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv129[ebp], 0
$LN20@response_t:
  00109	83 bd 34 ff ff
	ff 25		 cmp	 DWORD PTR tv129[ebp], 37 ; 00000025H
  00110	0f 85 7a 03 00
	00		 jne	 $LN4@response_t

; 109  : 		{
; 110  : 			aggressor = get_local_entity_parent (sender, LIST_TYPE_LAUNCHED_WEAPON);

  00116	83 7d 10 00	 cmp	 DWORD PTR _sender$[ebp], 0
  0011a	74 0d		 je	 SHORT $LN21@response_t
  0011c	8b 45 10	 mov	 eax, DWORD PTR _sender$[ebp]
  0011f	8b 08		 mov	 ecx, DWORD PTR [eax]
  00121	89 8d 34 ff ff
	ff		 mov	 DWORD PTR tv137[ebp], ecx
  00127	eb 24		 jmp	 SHORT $LN22@response_t
$LN21@response_t:
  00129	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??response_to_collision@@YGHW4ENTITY_MESSAGES@@PAUENTITY@@1PAD@Z@4JA
  0012f	83 c2 1e	 add	 edx, 30			; 0000001eH
  00132	52		 push	 edx
  00133	68 00 00 00 00	 push	 OFFSET ??_C@_0FB@PAKPCKOB@c?3?2users?2nhv90?2projects?2eech?2ap@
  00138	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  0013d	50		 push	 eax
  0013e	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00143	c7 85 34 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv137[ebp], 0
$LN22@response_t:
  0014d	b9 01 00 00 00	 mov	 ecx, 1
  00152	85 c9		 test	 ecx, ecx
  00154	74 0c		 je	 SHORT $LN23@response_t
  00156	c7 85 30 ff ff
	ff 18 00 00 00	 mov	 DWORD PTR tv145[ebp], 24 ; 00000018H
  00160	eb 24		 jmp	 SHORT $LN24@response_t
$LN23@response_t:
  00162	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??response_to_collision@@YGHW4ENTITY_MESSAGES@@PAUENTITY@@1PAD@Z@4JA
  00168	83 c2 1e	 add	 edx, 30			; 0000001eH
  0016b	52		 push	 edx
  0016c	68 00 00 00 00	 push	 OFFSET ??_C@_0FB@PAKPCKOB@c?3?2users?2nhv90?2projects?2eech?2ap@
  00171	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_list_type_message@@3PBDB ; overload_invalid_list_type_message
  00176	50		 push	 eax
  00177	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  0017c	c7 85 30 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv145[ebp], 0
$LN24@response_t:
  00186	6a 18		 push	 24			; 00000018H
  00188	8b 4d 10	 mov	 ecx, DWORD PTR _sender$[ebp]
  0018b	51		 push	 ecx
  0018c	69 95 34 ff ff
	ff b4 00 00 00	 imul	 edx, DWORD PTR tv137[ebp], 180
  00196	8b 85 30 ff ff
	ff		 mov	 eax, DWORD PTR tv145[ebp]
  0019c	8b 8c 82 00 00
	00 00		 mov	 ecx, DWORD PTR ?fn_get_local_entity_parent@@3PAY0CN@P6GPAUENTITY@@PAU1@W4LIST_TYPES@@@ZA[edx+eax*4]
  001a3	ff d1		 call	 ecx
  001a5	89 45 f4	 mov	 DWORD PTR _aggressor$[ebp], eax

; 111  : 
; 112  : 			//
; 113  : 			// a direct hit from a H.E. weapon causes smoke from impact point
; 114  : 			//
; 115  : 
; 116  : 			if ((damage_modifier == 1.0) && (damage_caused > 100))

  001a8	f3 0f 5a 45 e8	 cvtss2sd xmm0, DWORD PTR _damage_modifier$[ebp]
  001ad	66 0f 2e 05 00
	00 00 00	 ucomisd xmm0, QWORD PTR __real@3ff0000000000000
  001b5	9f		 lahf
  001b6	f6 c4 44	 test	 ah, 68			; 00000044H
  001b9	0f 8a cf 02 00
	00		 jp	 $LN8@response_t
  001bf	83 7d f0 64	 cmp	 DWORD PTR _damage_caused$[ebp], 100 ; 00000064H
  001c3	0f 8e c5 02 00
	00		 jle	 $LN8@response_t

; 117  : 			{
; 118  : 				int
; 119  : 					random_seed;
; 120  : 
; 121  : 				weapon_warhead_types
; 122  : 					warhead_type;
; 123  : 
; 124  : 				random_seed = get_client_server_entity_random_number_seed (sender);

  001c9	8b 45 10	 mov	 eax, DWORD PTR _sender$[ebp]
  001cc	2b 05 00 00 00
	00		 sub	 eax, DWORD PTR ?entities@@3PAUENTITY@@A ; entities
  001d2	c1 f8 04	 sar	 eax, 4
  001d5	89 45 e4	 mov	 DWORD PTR _random_seed$8[ebp], eax

; 125  : 
; 126  : 				if (frand1x (&random_seed) > 0.8)

  001d8	69 45 e4 6d 4e
	c6 41		 imul	 eax, DWORD PTR _random_seed$8[ebp], 1103515245
  001df	05 39 30 00 00	 add	 eax, 12345		; 00003039H
  001e4	89 45 e4	 mov	 DWORD PTR _random_seed$8[ebp], eax
  001e7	8b 4d e4	 mov	 ecx, DWORD PTR _random_seed$8[ebp]
  001ea	c1 f9 10	 sar	 ecx, 16			; 00000010H
  001ed	81 e1 ff 7f 00
	00		 and	 ecx, 32767		; 00007fffH
  001f3	f2 0f 2a c1	 cvtsi2sd xmm0, ecx
  001f7	f2 0f 59 05 00
	00 00 00	 mulsd	 xmm0, QWORD PTR __real@3f00002000400080
  001ff	66 0f 2f 05 00
	00 00 00	 comisd	 xmm0, QWORD PTR __real@3fe999999999999a
  00207	0f 86 81 02 00
	00		 jbe	 $LN8@response_t

; 127  : 				{
; 128  : 	
; 129  : 					warhead_type = (weapon_warhead_types) get_local_entity_int_value (sender, INT_TYPE_WEAPON_WARHEAD_TYPE);

  0020d	83 7d 10 00	 cmp	 DWORD PTR _sender$[ebp], 0
  00211	74 0d		 je	 SHORT $LN25@response_t
  00213	8b 45 10	 mov	 eax, DWORD PTR _sender$[ebp]
  00216	8b 08		 mov	 ecx, DWORD PTR [eax]
  00218	89 8d 34 ff ff
	ff		 mov	 DWORD PTR tv169[ebp], ecx
  0021e	eb 24		 jmp	 SHORT $LN26@response_t
$LN25@response_t:
  00220	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??response_to_collision@@YGHW4ENTITY_MESSAGES@@PAUENTITY@@1PAD@Z@4JA
  00226	83 c2 31	 add	 edx, 49			; 00000031H
  00229	52		 push	 edx
  0022a	68 00 00 00 00	 push	 OFFSET ??_C@_0FB@PAKPCKOB@c?3?2users?2nhv90?2projects?2eech?2ap@
  0022f	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  00234	50		 push	 eax
  00235	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  0023a	c7 85 34 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv169[ebp], 0
$LN26@response_t:
  00244	b9 01 00 00 00	 mov	 ecx, 1
  00249	85 c9		 test	 ecx, ecx
  0024b	74 0c		 je	 SHORT $LN27@response_t
  0024d	c7 85 30 ff ff
	ff 10 01 00 00	 mov	 DWORD PTR tv177[ebp], 272 ; 00000110H
  00257	eb 24		 jmp	 SHORT $LN28@response_t
$LN27@response_t:
  00259	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??response_to_collision@@YGHW4ENTITY_MESSAGES@@PAUENTITY@@1PAD@Z@4JA
  0025f	83 c2 31	 add	 edx, 49			; 00000031H
  00262	52		 push	 edx
  00263	68 00 00 00 00	 push	 OFFSET ??_C@_0FB@PAKPCKOB@c?3?2users?2nhv90?2projects?2eech?2ap@
  00268	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_int_type_message@@3PBDB ; overload_invalid_int_type_message
  0026d	50		 push	 eax
  0026e	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00273	c7 85 30 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv177[ebp], 0
$LN28@response_t:
  0027d	68 10 01 00 00	 push	 272			; 00000110H
  00282	8b 4d 10	 mov	 ecx, DWORD PTR _sender$[ebp]
  00285	51		 push	 ecx
  00286	69 95 34 ff ff
	ff 5c 04 00 00	 imul	 edx, DWORD PTR tv169[ebp], 1116
  00290	8b 85 30 ff ff
	ff		 mov	 eax, DWORD PTR tv177[ebp]
  00296	8b 8c 82 00 00
	00 00		 mov	 ecx, DWORD PTR ?fn_get_local_entity_int_value@@3PAY0BBH@P6GHPAUENTITY@@W4INT_TYPES@@@ZA[edx+eax*4]
  0029d	ff d1		 call	 ecx
  0029f	89 45 e0	 mov	 DWORD PTR _warhead_type$7[ebp], eax

; 130  : 	
; 131  : 					if ((warhead_type == WEAPON_WARHEAD_TYPE_HIGH_EXPLOSIVE) ||

  002a2	83 7d e0 02	 cmp	 DWORD PTR _warhead_type$7[ebp], 2
  002a6	74 0a		 je	 SHORT $LN9@response_t
  002a8	83 7d e0 04	 cmp	 DWORD PTR _warhead_type$7[ebp], 4
  002ac	0f 85 dc 01 00
	00		 jne	 $LN8@response_t
$LN9@response_t:

; 132  : 							(warhead_type == WEAPON_WARHEAD_TYPE_HIGH_EXPLOSIVE_ANTI_TANK))
; 133  : 					{
; 134  : 						vec3d
; 135  : 							rel_pos,
; 136  : 							rel_vec,
; 137  : 							*en_pos,
; 138  : 							*weapon_pos;
; 139  : 	
; 140  : 						matrix3x3
; 141  : 							m,
; 142  : 							inv;
; 143  : 	
; 144  : 						en_pos = get_local_entity_vec3d_ptr (receiver, VEC3D_TYPE_POSITION);

  002b2	83 7d 0c 00	 cmp	 DWORD PTR _receiver$[ebp], 0
  002b6	74 0d		 je	 SHORT $LN29@response_t
  002b8	8b 45 0c	 mov	 eax, DWORD PTR _receiver$[ebp]
  002bb	8b 08		 mov	 ecx, DWORD PTR [eax]
  002bd	89 8d 34 ff ff
	ff		 mov	 DWORD PTR tv191[ebp], ecx
  002c3	eb 24		 jmp	 SHORT $LN30@response_t
$LN29@response_t:
  002c5	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??response_to_collision@@YGHW4ENTITY_MESSAGES@@PAUENTITY@@1PAD@Z@4JA
  002cb	83 c2 40	 add	 edx, 64			; 00000040H
  002ce	52		 push	 edx
  002cf	68 00 00 00 00	 push	 OFFSET ??_C@_0FB@PAKPCKOB@c?3?2users?2nhv90?2projects?2eech?2ap@
  002d4	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  002d9	50		 push	 eax
  002da	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  002df	c7 85 34 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv191[ebp], 0
$LN30@response_t:
  002e9	b9 01 00 00 00	 mov	 ecx, 1
  002ee	85 c9		 test	 ecx, ecx
  002f0	74 0c		 je	 SHORT $LN31@response_t
  002f2	c7 85 30 ff ff
	ff 08 00 00 00	 mov	 DWORD PTR tv199[ebp], 8
  002fc	eb 24		 jmp	 SHORT $LN32@response_t
$LN31@response_t:
  002fe	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??response_to_collision@@YGHW4ENTITY_MESSAGES@@PAUENTITY@@1PAD@Z@4JA
  00304	83 c2 40	 add	 edx, 64			; 00000040H
  00307	52		 push	 edx
  00308	68 00 00 00 00	 push	 OFFSET ??_C@_0FB@PAKPCKOB@c?3?2users?2nhv90?2projects?2eech?2ap@
  0030d	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_vec3d_type_message@@3PBDB ; overload_invalid_vec3d_type_message
  00312	50		 push	 eax
  00313	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00318	c7 85 30 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv199[ebp], 0
$LN32@response_t:
  00322	6a 08		 push	 8
  00324	8b 4d 0c	 mov	 ecx, DWORD PTR _receiver$[ebp]
  00327	51		 push	 ecx
  00328	6b 95 34 ff ff
	ff 60		 imul	 edx, DWORD PTR tv191[ebp], 96
  0032f	8b 85 30 ff ff
	ff		 mov	 eax, DWORD PTR tv199[ebp]
  00335	8b 8c 82 00 00
	00 00		 mov	 ecx, DWORD PTR ?fn_get_local_entity_vec3d_ptr@@3PAY0BI@P6GPAUVEC3D@@PAUENTITY@@W4VEC3D_TYPES@@@ZA[edx+eax*4]
  0033c	ff d1		 call	 ecx
  0033e	89 45 c4	 mov	 DWORD PTR _en_pos$4[ebp], eax

; 145  : 						weapon_pos = get_local_entity_vec3d_ptr (sender, VEC3D_TYPE_POSITION);

  00341	83 7d 10 00	 cmp	 DWORD PTR _sender$[ebp], 0
  00345	74 0d		 je	 SHORT $LN33@response_t
  00347	8b 45 10	 mov	 eax, DWORD PTR _sender$[ebp]
  0034a	8b 08		 mov	 ecx, DWORD PTR [eax]
  0034c	89 8d 34 ff ff
	ff		 mov	 DWORD PTR tv211[ebp], ecx
  00352	eb 24		 jmp	 SHORT $LN34@response_t
$LN33@response_t:
  00354	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??response_to_collision@@YGHW4ENTITY_MESSAGES@@PAUENTITY@@1PAD@Z@4JA
  0035a	83 c2 41	 add	 edx, 65			; 00000041H
  0035d	52		 push	 edx
  0035e	68 00 00 00 00	 push	 OFFSET ??_C@_0FB@PAKPCKOB@c?3?2users?2nhv90?2projects?2eech?2ap@
  00363	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  00368	50		 push	 eax
  00369	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  0036e	c7 85 34 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv211[ebp], 0
$LN34@response_t:
  00378	b9 01 00 00 00	 mov	 ecx, 1
  0037d	85 c9		 test	 ecx, ecx
  0037f	74 0c		 je	 SHORT $LN35@response_t
  00381	c7 85 30 ff ff
	ff 08 00 00 00	 mov	 DWORD PTR tv219[ebp], 8
  0038b	eb 24		 jmp	 SHORT $LN36@response_t
$LN35@response_t:
  0038d	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??response_to_collision@@YGHW4ENTITY_MESSAGES@@PAUENTITY@@1PAD@Z@4JA
  00393	83 c2 41	 add	 edx, 65			; 00000041H
  00396	52		 push	 edx
  00397	68 00 00 00 00	 push	 OFFSET ??_C@_0FB@PAKPCKOB@c?3?2users?2nhv90?2projects?2eech?2ap@
  0039c	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_vec3d_type_message@@3PBDB ; overload_invalid_vec3d_type_message
  003a1	50		 push	 eax
  003a2	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  003a7	c7 85 30 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv219[ebp], 0
$LN36@response_t:
  003b1	6a 08		 push	 8
  003b3	8b 4d 10	 mov	 ecx, DWORD PTR _sender$[ebp]
  003b6	51		 push	 ecx
  003b7	6b 95 34 ff ff
	ff 60		 imul	 edx, DWORD PTR tv211[ebp], 96
  003be	8b 85 30 ff ff
	ff		 mov	 eax, DWORD PTR tv219[ebp]
  003c4	8b 8c 82 00 00
	00 00		 mov	 ecx, DWORD PTR ?fn_get_local_entity_vec3d_ptr@@3PAY0BI@P6GPAUVEC3D@@PAUENTITY@@W4VEC3D_TYPES@@@ZA[edx+eax*4]
  003cb	ff d1		 call	 ecx
  003cd	89 45 c0	 mov	 DWORD PTR _weapon_pos$3[ebp], eax

; 146  : 
; 147  : 						rel_vec.x = weapon_pos->x - en_pos->x;

  003d0	8b 45 c0	 mov	 eax, DWORD PTR _weapon_pos$3[ebp]
  003d3	8b 4d c4	 mov	 ecx, DWORD PTR _en_pos$4[ebp]
  003d6	f3 0f 10 00	 movss	 xmm0, DWORD PTR [eax]
  003da	f3 0f 5c 01	 subss	 xmm0, DWORD PTR [ecx]
  003de	f3 0f 11 45 c8	 movss	 DWORD PTR _rel_vec$5[ebp], xmm0

; 148  : 						rel_vec.y = weapon_pos->y - en_pos->y;

  003e3	8b 45 c0	 mov	 eax, DWORD PTR _weapon_pos$3[ebp]
  003e6	8b 4d c4	 mov	 ecx, DWORD PTR _en_pos$4[ebp]
  003e9	f3 0f 10 40 04	 movss	 xmm0, DWORD PTR [eax+4]
  003ee	f3 0f 5c 41 04	 subss	 xmm0, DWORD PTR [ecx+4]
  003f3	f3 0f 11 45 cc	 movss	 DWORD PTR _rel_vec$5[ebp+4], xmm0

; 149  : 						rel_vec.z = weapon_pos->z - en_pos->z;

  003f8	8b 45 c0	 mov	 eax, DWORD PTR _weapon_pos$3[ebp]
  003fb	8b 4d c4	 mov	 ecx, DWORD PTR _en_pos$4[ebp]
  003fe	f3 0f 10 40 08	 movss	 xmm0, DWORD PTR [eax+8]
  00403	f3 0f 5c 41 08	 subss	 xmm0, DWORD PTR [ecx+8]
  00408	f3 0f 11 45 d0	 movss	 DWORD PTR _rel_vec$5[ebp+8], xmm0

; 150  : 	
; 151  : 						get_local_entity_attitude_matrix (receiver, m);

  0040d	83 7d 0c 00	 cmp	 DWORD PTR _receiver$[ebp], 0
  00411	74 0d		 je	 SHORT $LN37@response_t
  00413	8b 45 0c	 mov	 eax, DWORD PTR _receiver$[ebp]
  00416	8b 08		 mov	 ecx, DWORD PTR [eax]
  00418	89 8d 34 ff ff
	ff		 mov	 DWORD PTR tv240[ebp], ecx
  0041e	eb 24		 jmp	 SHORT $LN38@response_t
$LN37@response_t:
  00420	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??response_to_collision@@YGHW4ENTITY_MESSAGES@@PAUENTITY@@1PAD@Z@4JA
  00426	83 c2 47	 add	 edx, 71			; 00000047H
  00429	52		 push	 edx
  0042a	68 00 00 00 00	 push	 OFFSET ??_C@_0FB@PAKPCKOB@c?3?2users?2nhv90?2projects?2eech?2ap@
  0042f	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  00434	50		 push	 eax
  00435	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  0043a	c7 85 34 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv240[ebp], 0
$LN38@response_t:
  00444	8d 4d 9c	 lea	 ecx, DWORD PTR _m$2[ebp]
  00447	51		 push	 ecx
  00448	8b 55 0c	 mov	 edx, DWORD PTR _receiver$[ebp]
  0044b	52		 push	 edx
  0044c	8b 85 34 ff ff
	ff		 mov	 eax, DWORD PTR tv240[ebp]
  00452	8b 0c 85 00 00
	00 00		 mov	 ecx, DWORD PTR ?fn_get_local_entity_attitude_matrix@@3PAP6GXPAUENTITY@@QAY02M@ZA[eax*4]
  00459	ff d1		 call	 ecx

; 152  : 
; 153  : 						get_inverse_matrix (inv, m);

  0045b	8d 45 9c	 lea	 eax, DWORD PTR _m$2[ebp]
  0045e	50		 push	 eax
  0045f	8d 8d 78 ff ff
	ff		 lea	 ecx, DWORD PTR _inv$1[ebp]
  00465	51		 push	 ecx
  00466	e8 00 00 00 00	 call	 ?get_inverse_matrix@@YGXQAY02MQAY02$$CBM@Z ; get_inverse_matrix

; 154  : 
; 155  : 						multiply_matrix3x3_vec3d (&rel_pos, inv, &rel_vec);

  0046b	8d 45 c8	 lea	 eax, DWORD PTR _rel_vec$5[ebp]
  0046e	50		 push	 eax
  0046f	8d 8d 78 ff ff
	ff		 lea	 ecx, DWORD PTR _inv$1[ebp]
  00475	51		 push	 ecx
  00476	8d 55 d4	 lea	 edx, DWORD PTR _rel_pos$6[ebp]
  00479	52		 push	 edx
  0047a	e8 00 00 00 00	 call	 ?multiply_matrix3x3_vec3d@@YGXPAUVEC3D@@QAY02$$CBMPBU1@@Z ; multiply_matrix3x3_vec3d

; 156  : 
; 157  : 						create_client_server_meta_smoke_list_specified_offset (META_SMOKE_LIST_TYPE_FIRE_SHORT_DURATION, receiver, &rel_pos);

  0047f	8d 45 d4	 lea	 eax, DWORD PTR _rel_pos$6[ebp]
  00482	50		 push	 eax
  00483	8b 4d 0c	 mov	 ecx, DWORD PTR _receiver$[ebp]
  00486	51		 push	 ecx
  00487	6a 05		 push	 5
  00489	e8 00 00 00 00	 call	 ?create_client_server_meta_smoke_list_specified_offset@@YGHW4META_SMOKE_LIST_TYPES@@PAUENTITY@@PAUVEC3D@@@Z ; create_client_server_meta_smoke_list_specified_offset
$LN8@response_t:

; 158  : 					}
; 159  : 				}
; 160  : 			}
; 161  : 		}
; 162  : 		else

  0048e	eb 06		 jmp	 SHORT $LN5@response_t
$LN4@response_t:

; 163  : 		{
; 164  : 			aggressor = sender;

  00490	8b 45 10	 mov	 eax, DWORD PTR _sender$[ebp]
  00493	89 45 f4	 mov	 DWORD PTR _aggressor$[ebp], eax
$LN5@response_t:

; 165  : 		}
; 166  : 	}
; 167  : 	else

  00496	eb 07		 jmp	 SHORT $LN3@response_t
$LN2@response_t:

; 168  : 	{
; 169  : 		aggressor = NULL;

  00498	c7 45 f4 00 00
	00 00		 mov	 DWORD PTR _aggressor$[ebp], 0
$LN3@response_t:

; 170  : 	}
; 171  : 
; 172  : 	force = get_local_force_entity ((entity_sides) get_local_entity_int_value (receiver, INT_TYPE_SIDE));

  0049f	83 7d 0c 00	 cmp	 DWORD PTR _receiver$[ebp], 0
  004a3	74 0d		 je	 SHORT $LN39@response_t
  004a5	8b 45 0c	 mov	 eax, DWORD PTR _receiver$[ebp]
  004a8	8b 08		 mov	 ecx, DWORD PTR [eax]
  004aa	89 8d 34 ff ff
	ff		 mov	 DWORD PTR tv260[ebp], ecx
  004b0	eb 24		 jmp	 SHORT $LN40@response_t
$LN39@response_t:
  004b2	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??response_to_collision@@YGHW4ENTITY_MESSAGES@@PAUENTITY@@1PAD@Z@4JA
  004b8	83 c2 5c	 add	 edx, 92			; 0000005cH
  004bb	52		 push	 edx
  004bc	68 00 00 00 00	 push	 OFFSET ??_C@_0FB@PAKPCKOB@c?3?2users?2nhv90?2projects?2eech?2ap@
  004c1	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  004c6	50		 push	 eax
  004c7	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  004cc	c7 85 34 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv260[ebp], 0
$LN40@response_t:
  004d6	b9 01 00 00 00	 mov	 ecx, 1
  004db	85 c9		 test	 ecx, ecx
  004dd	74 0c		 je	 SHORT $LN41@response_t
  004df	c7 85 30 ff ff
	ff bb 00 00 00	 mov	 DWORD PTR tv268[ebp], 187 ; 000000bbH
  004e9	eb 24		 jmp	 SHORT $LN42@response_t
$LN41@response_t:
  004eb	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??response_to_collision@@YGHW4ENTITY_MESSAGES@@PAUENTITY@@1PAD@Z@4JA
  004f1	83 c2 5c	 add	 edx, 92			; 0000005cH
  004f4	52		 push	 edx
  004f5	68 00 00 00 00	 push	 OFFSET ??_C@_0FB@PAKPCKOB@c?3?2users?2nhv90?2projects?2eech?2ap@
  004fa	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_int_type_message@@3PBDB ; overload_invalid_int_type_message
  004ff	50		 push	 eax
  00500	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00505	c7 85 30 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv268[ebp], 0
$LN42@response_t:
  0050f	68 bb 00 00 00	 push	 187			; 000000bbH
  00514	8b 4d 0c	 mov	 ecx, DWORD PTR _receiver$[ebp]
  00517	51		 push	 ecx
  00518	69 95 34 ff ff
	ff 5c 04 00 00	 imul	 edx, DWORD PTR tv260[ebp], 1116
  00522	8b 85 30 ff ff
	ff		 mov	 eax, DWORD PTR tv268[ebp]
  00528	8b 8c 82 00 00
	00 00		 mov	 ecx, DWORD PTR ?fn_get_local_entity_int_value@@3PAY0BBH@P6GHPAUENTITY@@W4INT_TYPES@@@ZA[edx+eax*4]
  0052f	ff d1		 call	 ecx
  00531	50		 push	 eax
  00532	e8 00 00 00 00	 call	 ?get_local_force_entity@@YGPAUENTITY@@W4ENTITY_SIDES@@@Z ; get_local_force_entity
  00537	89 45 fc	 mov	 DWORD PTR _force$[ebp], eax

; 173  : 
; 174  : 	enemy_force = get_local_force_entity (get_enemy_side (get_local_entity_int_value (receiver, INT_TYPE_SIDE)));

  0053a	83 7d 0c 00	 cmp	 DWORD PTR _receiver$[ebp], 0
  0053e	74 0d		 je	 SHORT $LN43@response_t
  00540	8b 45 0c	 mov	 eax, DWORD PTR _receiver$[ebp]
  00543	8b 08		 mov	 ecx, DWORD PTR [eax]
  00545	89 8d 34 ff ff
	ff		 mov	 DWORD PTR tv282[ebp], ecx
  0054b	eb 24		 jmp	 SHORT $LN44@response_t
$LN43@response_t:
  0054d	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??response_to_collision@@YGHW4ENTITY_MESSAGES@@PAUENTITY@@1PAD@Z@4JA
  00553	83 c2 5e	 add	 edx, 94			; 0000005eH
  00556	52		 push	 edx
  00557	68 00 00 00 00	 push	 OFFSET ??_C@_0FB@PAKPCKOB@c?3?2users?2nhv90?2projects?2eech?2ap@
  0055c	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  00561	50		 push	 eax
  00562	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00567	c7 85 34 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv282[ebp], 0
$LN44@response_t:
  00571	b9 01 00 00 00	 mov	 ecx, 1
  00576	85 c9		 test	 ecx, ecx
  00578	74 0c		 je	 SHORT $LN45@response_t
  0057a	c7 85 30 ff ff
	ff bb 00 00 00	 mov	 DWORD PTR tv290[ebp], 187 ; 000000bbH
  00584	eb 24		 jmp	 SHORT $LN46@response_t
$LN45@response_t:
  00586	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??response_to_collision@@YGHW4ENTITY_MESSAGES@@PAUENTITY@@1PAD@Z@4JA
  0058c	83 c2 5e	 add	 edx, 94			; 0000005eH
  0058f	52		 push	 edx
  00590	68 00 00 00 00	 push	 OFFSET ??_C@_0FB@PAKPCKOB@c?3?2users?2nhv90?2projects?2eech?2ap@
  00595	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_int_type_message@@3PBDB ; overload_invalid_int_type_message
  0059a	50		 push	 eax
  0059b	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  005a0	c7 85 30 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv290[ebp], 0
$LN46@response_t:
  005aa	68 bb 00 00 00	 push	 187			; 000000bbH
  005af	8b 4d 0c	 mov	 ecx, DWORD PTR _receiver$[ebp]
  005b2	51		 push	 ecx
  005b3	69 95 34 ff ff
	ff 5c 04 00 00	 imul	 edx, DWORD PTR tv282[ebp], 1116
  005bd	8b 85 30 ff ff
	ff		 mov	 eax, DWORD PTR tv290[ebp]
  005c3	8b 8c 82 00 00
	00 00		 mov	 ecx, DWORD PTR ?fn_get_local_entity_int_value@@3PAY0BBH@P6GHPAUENTITY@@W4INT_TYPES@@@ZA[edx+eax*4]
  005ca	ff d1		 call	 ecx
  005cc	83 f8 01	 cmp	 eax, 1
  005cf	75 0c		 jne	 SHORT $LN47@response_t
  005d1	c7 85 2c ff ff
	ff 02 00 00 00	 mov	 DWORD PTR tv297[ebp], 2
  005db	eb 0a		 jmp	 SHORT $LN48@response_t
$LN47@response_t:
  005dd	c7 85 2c ff ff
	ff 01 00 00 00	 mov	 DWORD PTR tv297[ebp], 1
$LN48@response_t:
  005e7	8b 95 2c ff ff
	ff		 mov	 edx, DWORD PTR tv297[ebp]
  005ed	52		 push	 edx
  005ee	e8 00 00 00 00	 call	 ?get_local_force_entity@@YGPAUENTITY@@W4ENTITY_SIDES@@@Z ; get_local_force_entity
  005f3	89 45 f8	 mov	 DWORD PTR _enemy_force$[ebp], eax

; 175  : 
; 176  : 	//
; 177  : 	// assess damage
; 178  : 	//
; 179  : 
; 180  : 	if (total_damage_level <= 0)

  005f6	83 7d ec 00	 cmp	 DWORD PTR _total_damage_level$[ebp], 0
  005fa	0f 8f a1 00 00
	00		 jg	 $LN10@response_t

; 181  : 	{
; 182  : 		if (aggressor)

  00600	83 7d f4 00	 cmp	 DWORD PTR _aggressor$[ebp], 0
  00604	74 1a		 je	 SHORT $LN12@response_t

; 183  : 		{
; 184  : 			play_vehicle_destroyed_speech (receiver, aggressor);

  00606	8b 45 f4	 mov	 eax, DWORD PTR _aggressor$[ebp]
  00609	50		 push	 eax
  0060a	8b 4d 0c	 mov	 ecx, DWORD PTR _receiver$[ebp]
  0060d	51		 push	 ecx
  0060e	e8 00 00 00 00	 call	 ?play_vehicle_destroyed_speech@@YGXPAUENTITY@@0@Z ; play_vehicle_destroyed_speech

; 185  : 
; 186  : 			credit_client_server_mobile_kill (receiver, aggressor);

  00613	8b 45 f4	 mov	 eax, DWORD PTR _aggressor$[ebp]
  00616	50		 push	 eax
  00617	8b 4d 0c	 mov	 ecx, DWORD PTR _receiver$[ebp]
  0061a	51		 push	 ecx
  0061b	e8 00 00 00 00	 call	 ?credit_client_server_mobile_kill@@YGXPAUENTITY@@0@Z ; credit_client_server_mobile_kill
$LN12@response_t:

; 187  : 		}
; 188  : 
; 189  : 		notify_local_entity (ENTITY_MESSAGE_FORCE_DESTROYED, force, receiver, aggressor);

  00620	8b 45 f4	 mov	 eax, DWORD PTR _aggressor$[ebp]
  00623	50		 push	 eax
  00624	8b 4d 0c	 mov	 ecx, DWORD PTR _receiver$[ebp]
  00627	51		 push	 ecx
  00628	8b 55 fc	 mov	 edx, DWORD PTR _force$[ebp]
  0062b	52		 push	 edx
  0062c	6a 15		 push	 21			; 00000015H
  0062e	e8 00 00 00 00	 call	 ?notify_local_entity@@YAHW4ENTITY_MESSAGES@@PAUENTITY@@1ZZ ; notify_local_entity
  00633	83 c4 10	 add	 esp, 16			; 00000010H

; 190  : 
; 191  : 		notify_local_entity (ENTITY_MESSAGE_FORCE_DESTROYED, enemy_force, receiver, aggressor);

  00636	8b 45 f4	 mov	 eax, DWORD PTR _aggressor$[ebp]
  00639	50		 push	 eax
  0063a	8b 4d 0c	 mov	 ecx, DWORD PTR _receiver$[ebp]
  0063d	51		 push	 ecx
  0063e	8b 55 f8	 mov	 edx, DWORD PTR _enemy_force$[ebp]
  00641	52		 push	 edx
  00642	6a 15		 push	 21			; 00000015H
  00644	e8 00 00 00 00	 call	 ?notify_local_entity@@YAHW4ENTITY_MESSAGES@@PAUENTITY@@1ZZ ; notify_local_entity
  00649	83 c4 10	 add	 esp, 16			; 00000010H

; 192  : 
; 193  : 		kill_client_server_entity (receiver);

  0064c	83 7d 0c 00	 cmp	 DWORD PTR _receiver$[ebp], 0
  00650	74 0d		 je	 SHORT $LN49@response_t
  00652	8b 45 0c	 mov	 eax, DWORD PTR _receiver$[ebp]
  00655	8b 08		 mov	 ecx, DWORD PTR [eax]
  00657	89 8d 34 ff ff
	ff		 mov	 DWORD PTR tv319[ebp], ecx
  0065d	eb 24		 jmp	 SHORT $LN50@response_t
$LN49@response_t:
  0065f	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??response_to_collision@@YGHW4ENTITY_MESSAGES@@PAUENTITY@@1PAD@Z@4JA
  00665	83 c2 71	 add	 edx, 113		; 00000071H
  00668	52		 push	 edx
  00669	68 00 00 00 00	 push	 OFFSET ??_C@_0FB@PAKPCKOB@c?3?2users?2nhv90?2projects?2eech?2ap@
  0066e	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  00673	50		 push	 eax
  00674	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00679	c7 85 34 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv319[ebp], 0
$LN50@response_t:
  00683	8b 4d 0c	 mov	 ecx, DWORD PTR _receiver$[ebp]
  00686	51		 push	 ecx
  00687	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?system_comms_model@@3W4COMMS_MODEL_TYPES@@A ; system_comms_model
  0068d	c1 e2 02	 shl	 edx, 2
  00690	8b 85 34 ff ff
	ff		 mov	 eax, DWORD PTR tv319[ebp]
  00696	8b 8c c2 00 00
	00 00		 mov	 ecx, DWORD PTR ?fn_kill_client_server_entity@@3PAY01P6GXPAUENTITY@@@ZA[edx+eax*8]
  0069d	ff d1		 call	 ecx

; 194  : 	}
; 195  : 	else

  0069f	eb 13		 jmp	 SHORT $LN13@response_t
$LN10@response_t:

; 196  : 	{
; 197  : 
; 198  : 		/////////////////////////////////////////////////////////////////
; 199  : 		//
; 200  : 		// SPECIAL_EFFECT_HOOK FOR GETTING_SHOT
; 201  : 		//
; 202  : 		/////////////////////////////////////////////////////////////////
; 203  : 
; 204  : 		if (aggressor)

  006a1	83 7d f4 00	 cmp	 DWORD PTR _aggressor$[ebp], 0
  006a5	74 0d		 je	 SHORT $LN13@response_t

; 205  : 		{
; 206  : 			play_vehicle_shot_at_speech (receiver, aggressor);

  006a7	8b 45 f4	 mov	 eax, DWORD PTR _aggressor$[ebp]
  006aa	50		 push	 eax
  006ab	8b 4d 0c	 mov	 ecx, DWORD PTR _receiver$[ebp]
  006ae	51		 push	 ecx
  006af	e8 00 00 00 00	 call	 ?play_vehicle_shot_at_speech@@YGXPAUENTITY@@0@Z ; play_vehicle_shot_at_speech
$LN13@response_t:

; 207  : 		}
; 208  : 
; 209  : 		/////////////////////////////////////////////////////////////////
; 210  : 		//
; 211  : 		//
; 212  : 		/////////////////////////////////////////////////////////////////
; 213  : 
; 214  : 		//notify hit. ?
; 215  : 	}
; 216  : 
; 217  : 	return (TRUE);

  006b4	b8 01 00 00 00	 mov	 eax, 1

; 218  : }

  006b9	5f		 pop	 edi
  006ba	5e		 pop	 esi
  006bb	5b		 pop	 ebx
  006bc	8b e5		 mov	 esp, ebp
  006be	5d		 pop	 ebp
  006bf	c2 10 00	 ret	 16			; 00000010H
?response_to_collision@@YGHW4ENTITY_MESSAGES@@PAUENTITY@@1PAD@Z ENDP ; response_to_collision
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\entity\mobile\vehicle\ship\sh_msgs.c
;	COMDAT ?overload_ship_vehicle_message_responses@@YGXXZ
_TEXT	SEGMENT
?overload_ship_vehicle_message_responses@@YGXXZ PROC	; overload_ship_vehicle_message_responses, COMDAT

; 336  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 337  : 	overload_vehicle_message_responses (ENTITY_TYPE_SHIP_VEHICLE);

  00009	6a 1c		 push	 28			; 0000001cH
  0000b	e8 00 00 00 00	 call	 ?overload_vehicle_message_responses@@YGXW4ENTITY_TYPES@@@Z ; overload_vehicle_message_responses

; 338  : 
; 339  : 	message_responses[ENTITY_TYPE_SHIP_VEHICLE][ENTITY_MESSAGE_COLLISION] 						= response_to_collision;

  00010	b8 84 01 00 00	 mov	 eax, 388		; 00000184H
  00015	6b c8 1c	 imul	 ecx, eax, 28
  00018	ba 04 00 00 00	 mov	 edx, 4
  0001d	6b c2 07	 imul	 eax, edx, 7
  00020	c7 84 01 00 00
	00 00 00 00 00
	00		 mov	 DWORD PTR ?message_responses@@3PAY0GB@P6GHW4ENTITY_MESSAGES@@PAUENTITY@@1PAD@ZA[ecx+eax], OFFSET ?response_to_collision@@YGHW4ENTITY_MESSAGES@@PAUENTITY@@1PAD@Z ; response_to_collision

; 340  : 
; 341  : 	message_responses[ENTITY_TYPE_SHIP_VEHICLE][ENTITY_MESSAGE_ARTICULATE_LOADING_DOORS] 	= response_to_articulate_loading_doors;

  0002b	b8 84 01 00 00	 mov	 eax, 388		; 00000184H
  00030	6b c8 1c	 imul	 ecx, eax, 28
  00033	ba 04 00 00 00	 mov	 edx, 4
  00038	c1 e2 00	 shl	 edx, 0
  0003b	c7 84 11 00 00
	00 00 00 00 00
	00		 mov	 DWORD PTR ?message_responses@@3PAY0GB@P6GHW4ENTITY_MESSAGES@@PAUENTITY@@1PAD@ZA[ecx+edx], OFFSET ?response_to_articulate_loading_doors@@YGHW4ENTITY_MESSAGES@@PAUENTITY@@1PAD@Z ; response_to_articulate_loading_doors

; 342  : 
; 343  : 	#if DEBUG_MODULE
; 344  : 
; 345  : 	message_responses[ENTITY_TYPE_SHIP_VEHICLE][ENTITY_MESSAGE_LINK_CHILD]		= response_to_link_child;
; 346  : 
; 347  : 	message_responses[ENTITY_TYPE_SHIP_VEHICLE][ENTITY_MESSAGE_UNLINK_CHILD]	= response_to_unlink_child;
; 348  : 
; 349  : 	message_responses[ENTITY_TYPE_SHIP_VEHICLE][ENTITY_MESSAGE_LINK_PARENT]		= response_to_link_parent;
; 350  : 
; 351  : 	message_responses[ENTITY_TYPE_SHIP_VEHICLE][ENTITY_MESSAGE_UNLINK_PARENT]	= response_to_unlink_parent;
; 352  : 
; 353  : 	#endif
; 354  : }

  00046	5f		 pop	 edi
  00047	5e		 pop	 esi
  00048	5b		 pop	 ebx
  00049	8b e5		 mov	 esp, ebp
  0004b	5d		 pop	 ebp
  0004c	c3		 ret	 0
?overload_ship_vehicle_message_responses@@YGXXZ ENDP	; overload_ship_vehicle_message_responses
_TEXT	ENDS
END
