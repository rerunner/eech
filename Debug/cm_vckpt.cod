; Listing generated by Microsoft (R) Optimizing Compiler Version 19.16.27045.0 

	TITLE	C:\Users\nhv90\Projects\eech\aphavoc\source\gunships\cockpits\comanche\cm_vckpt.c
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB MSVCRTD
INCLUDELIB OLDNAMES

PUBLIC	?initialise_comanche_virtual_cockpit@@YGXXZ	; initialise_comanche_virtual_cockpit
PUBLIC	?deinitialise_comanche_virtual_cockpit@@YGXXZ	; deinitialise_comanche_virtual_cockpit
PUBLIC	?update_comanche_virtual_cockpit@@YGXXZ		; update_comanche_virtual_cockpit
PUBLIC	?pre_render_comanche_virtual_cockpit_displays@@YGXXZ ; pre_render_comanche_virtual_cockpit_displays
PUBLIC	?draw_comanche_virtual_cockpit@@YGXXZ		; draw_comanche_virtual_cockpit
PUBLIC	?get_comanche_crew_viewpoint@@YGXXZ		; get_comanche_crew_viewpoint
PUBLIC	?get_comanche_display_viewpoint@@YGXW4VIEW_MODES@@@Z ; get_comanche_display_viewpoint
PUBLIC	?damage_comanche_virtual_cockpit_main_rotors@@YGXH@Z ; damage_comanche_virtual_cockpit_main_rotors
PUBLIC	?restore_comanche_virtual_cockpit_main_rotors@@YGXXZ ; restore_comanche_virtual_cockpit_main_rotors
PUBLIC	?__LINE__Var@?0??draw_comanche_virtual_cockpit@@YGXXZ@4JA ; `draw_comanche_virtual_cockpit'::`1'::__LINE__Var
PUBLIC	??_C@_0FC@DCAAIOAH@c?3?2users?2nhv90?2projects?2eech?2ap@ ; `string'
PUBLIC	?__LINE__Var@?0??get_comanche_crew_viewpoint@@YGXXZ@4JA ; `get_comanche_crew_viewpoint'::`1'::__LINE__Var
PUBLIC	??_C@_0DA@EHJMLOA@Failed?5to?5locate?5crew?8s?5head?5in@ ; `string'
PUBLIC	??_C@_0DF@PBABBPHF@Failed?5to?5locate?5crew?8s?5viewpoi@ ; `string'
PUBLIC	?__LINE__Var@?0??get_comanche_display_viewpoint@@YGXW4VIEW_MODES@@@Z@4JA ; `get_comanche_display_viewpoint'::`1'::__LINE__Var
PUBLIC	??_C@_0BG@EANNPEON@get_gunship_entity?5?$CI?$CJ@ ; `string'
PUBLIC	??_C@_0BH@OJOOJLIP@virtual_cockpit_inst3d@	; `string'
PUBLIC	??_C@_0BH@KFJLEDAI@Invalid?5view?5mode?5?$DN?5?$CFd@ ; `string'
PUBLIC	??_C@_0DG@OCDOFANO@Failed?5to?5locate?5display?5viewpo@ ; `string'
PUBLIC	?__LINE__Var@?0??damage_comanche_virtual_cockpit_main_rotors@@YGXH@Z@4JA ; `damage_comanche_virtual_cockpit_main_rotors'::`1'::__LINE__Var
PUBLIC	??_C@_0DA@PICDOBAJ@virtual_cockpit_inst3d_detail_l@ ; `string'
PUBLIC	??_C@_0DC@KMIHMCBF@virtual_cockpit_inst3d_detail_l@ ; `string'
PUBLIC	??_C@_0CP@MGKBEFMA@virtual_cockpit_inst3d_detail_l@ ; `string'
PUBLIC	??_C@_0DB@HAAFKHLI@virtual_cockpit_inst3d_detail_l@ ; `string'
PUBLIC	??_C@_06DDNABPCD@inst3d@			; `string'
PUBLIC	?__LINE__Var@?0??restore_comanche_virtual_cockpit_main_rotors@@YGXXZ@4JA ; `restore_comanche_virtual_cockpit_main_rotors'::`1'::__LINE__Var
PUBLIC	__real@3c8efa35
PUBLIC	__real@3d20902e
PUBLIC	__real@3d4ccccd
PUBLIC	__real@3d8068dc
PUBLIC	__real@3d886595
PUBLIC	__real@3dcccccd
PUBLIC	__real@3dd0c43d
PUBLIC	__real@3de0ded3
PUBLIC	__real@3e50cb29
PUBLIC	__real@3ef4f8b588e368f1
PUBLIC	__real@3f000000
PUBLIC	__real@3f00002000400080
PUBLIC	__real@3f24a234
PUBLIC	__real@3f800000
PUBLIC	__real@3f9999999999999a
PUBLIC	__real@3ff0000000000000
PUBLIC	__real@4000000000000000
PUBLIC	__real@4008000000000000
PUBLIC	__real@400921fb60000000
PUBLIC	__real@4014000000000000
PUBLIC	__real@4016cbe4
PUBLIC	__real@40cfff8000000000
PUBLIC	__real@41200000
PUBLIC	__real@461c4000
PUBLIC	__real@bff8000000000000
PUBLIC	__real@c008000000000000
PUBLIC	__xmm@80000000800000008000000080000000
EXTRN	_memcpy:PROC
EXTRN	?process_assert@@YGXPBD0H@Z:PROC		; process_assert
EXTRN	?debug_fatal@@YAXPBDZZ:PROC			; debug_fatal
EXTRN	?query_TIR_active@@YAHXZ:PROC			; query_TIR_active
EXTRN	?TIR_GetRoll@@YGMXZ:PROC			; TIR_GetRoll
EXTRN	?get_3d_transformation_matrix@@YGXQAY02MMMM@Z:PROC ; get_3d_transformation_matrix
EXTRN	?multiply_transpose_matrix3x3_vec3d@@YGXPAUVEC3D@@QAY02$$CBMPBU1@@Z:PROC ; multiply_transpose_matrix3x3_vec3d
EXTRN	?multiply_matrix3x3_matrix3x3@@YGXQAY02MQAY02$$CBM1@Z:PROC ; multiply_matrix3x3_matrix3x3
EXTRN	?get_inverse_matrix@@YGXQAY02MQAY02$$CBM@Z:PROC	; get_inverse_matrix
EXTRN	?clear_zbuffer_screen@@YGXXZ:PROC		; clear_zbuffer_screen
EXTRN	?recalculate_3d_environment_settings@@YGXPAUENV_3D@@@Z:PROC ; recalculate_3d_environment_settings
EXTRN	?set_3d_view_distances@@YGXPAUENV_3D@@MMMM@Z:PROC ; set_3d_view_distances
EXTRN	?realise_3d_clip_extents@@YGXPAUENV_3D@@@Z:PROC	; realise_3d_clip_extents
EXTRN	?construct_3d_object@@YGPAUOBJECT_3D_INSTANCE@@H@Z:PROC ; construct_3d_object
EXTRN	?destruct_3d_object@@YGXPAUOBJECT_3D_INSTANCE@@@Z:PROC ; destruct_3d_object
EXTRN	?get_3d_sub_object_world_viewpoint@@YGXPAUOBJECT_3D_SUB_INSTANCE@@PAUVIEWPOINT@@@Z:PROC ; get_3d_sub_object_world_viewpoint
EXTRN	?insert_zbiased_relative_object_into_3d_scene@@YGXW4OBJECT_3D_DRAWING_TYPES@@PAUVEC3D@@PAXM@Z:PROC ; insert_zbiased_relative_object_into_3d_scene
EXTRN	?draw_3d_scene@@YGXXZ:PROC			; draw_3d_scene
EXTRN	?begin_3d_scene@@YGHXZ:PROC			; begin_3d_scene
EXTRN	?end_3d_scene@@YGXXZ:PROC			; end_3d_scene
EXTRN	?create_light_3d_source@@YGPAULIGHT_3D_SOURCE@@W4LIGHT_3D_TYPE@@HPAUVEC3D@@MMMM@Z:PROC ; create_light_3d_source
EXTRN	?destroy_light_3d_source@@YGXPAULIGHT_3D_SOURCE@@@Z:PROC ; destroy_light_3d_source
EXTRN	?insert_light_3d_source_into_3d_scene@@YGXPAULIGHT_3D_SOURCE@@@Z:PROC ; insert_light_3d_source_into_3d_scene
EXTRN	?remove_light_3d_source_from_3d_scene@@YGXPAULIGHT_3D_SOURCE@@@Z:PROC ; remove_light_3d_source_from_3d_scene
EXTRN	?find_object_3d_sub_object@@YG?AW4SUB_OBJECT_SEARCH_RESULT_TYPES@@PAUOBJECT_3D_SUB_OBJECT_SEARCH_DATA@@@Z:PROC ; find_object_3d_sub_object
EXTRN	?animate_helicopter_main_rotors@@YGXPAUENTITY@@HH@Z:PROC ; animate_helicopter_main_rotors
EXTRN	?animate_damaged_helicopter_main_rotors@@YGXPAUENTITY@@H@Z:PROC ; animate_damaged_helicopter_main_rotors
EXTRN	?animate_helicopter_virtual_cockpit_main_rotors@@YGXPAUENTITY@@PAUOBJECT_3D_INSTANCE@@@Z:PROC ; animate_helicopter_virtual_cockpit_main_rotors
EXTRN	?damage_helicopter_main_rotor_inst3d@@YGHPAUOBJECT_3D_INSTANCE@@H@Z:PROC ; damage_helicopter_main_rotor_inst3d
EXTRN	?restore_helicopter_main_rotor_inst3d@@YGHPAUOBJECT_3D_INSTANCE@@@Z:PROC ; restore_helicopter_main_rotor_inst3d
EXTRN	?get_helicopter_main_rotors_blurred@@YGHPAUENTITY@@@Z:PROC ; get_helicopter_main_rotors_blurred
EXTRN	?set_rotation_angle_of_helicopter_main_rotors@@YGXPAUOBJECT_3D_INSTANCE@@M@Z:PROC ; set_rotation_angle_of_helicopter_main_rotors
EXTRN	?get_rotation_angle_of_helicopter_main_rotors@@YGMPAUOBJECT_3D_INSTANCE@@@Z:PROC ; get_rotation_angle_of_helicopter_main_rotors
EXTRN	?draw_comanche_hud_on_lens_texture@@YGXXZ:PROC	; draw_comanche_hud_on_lens_texture
EXTRN	?draw_comanche_mfd@@YGXXZ:PROC			; draw_comanche_mfd
EXTRN	?get_crew_role@@YG?AW4CREW_ROLES@@XZ:PROC	; get_crew_role
EXTRN	?initialise_common_virtual_cockpit_cameras@@YGXXZ:PROC ; initialise_common_virtual_cockpit_cameras
EXTRN	?deinitialise_common_virtual_cockpit_cameras@@YGXXZ:PROC ; deinitialise_common_virtual_cockpit_cameras
EXTRN	?print_edit_wide_cockpit@@YGXXZ:PROC		; print_edit_wide_cockpit
EXTRN	?move_edit_wide_cockpit@@YGXXZ:PROC		; move_edit_wide_cockpit
EXTRN	?get_comanche_co_pilot_head_pitch_datum@@YGMXZ:PROC ; get_comanche_co_pilot_head_pitch_datum
EXTRN	?initialise_comanche_crew_animation@@YGXXZ:PROC	; initialise_comanche_crew_animation
EXTRN	?deinitialise_comanche_crew_animation@@YGXXZ:PROC ; deinitialise_comanche_crew_animation
EXTRN	?update_comanche_crew_animation@@YGXXZ:PROC	; update_comanche_crew_animation
EXTRN	?set_comanche_crew_head_positions@@YGXXZ:PROC	; set_comanche_crew_head_positions
EXTRN	?initialise_comanche_virtual_cockpit_canopy_doors@@YGXXZ:PROC ; initialise_comanche_virtual_cockpit_canopy_doors
EXTRN	?animate_comanche_virtual_cockpit_canopy_doors@@YGXXZ:PROC ; animate_comanche_virtual_cockpit_canopy_doors
EXTRN	?draw_comanche_virtual_cockpit_lamps@@YGXXZ:PROC ; draw_comanche_virtual_cockpit_lamps
EXTRN	?get_comanche_pilot_head_pitch_datum@@YGMXZ:PROC ; get_comanche_pilot_head_pitch_datum
EXTRN	?initialise_comanche_virtual_cockpit_wiper_and_rain_effect@@YGXXZ:PROC ; initialise_comanche_virtual_cockpit_wiper_and_rain_effect
EXTRN	?deinitialise_comanche_virtual_cockpit_wiper_and_rain_effect@@YGXXZ:PROC ; deinitialise_comanche_virtual_cockpit_wiper_and_rain_effect
EXTRN	?get_time_acceleration@@YGHXZ:PROC		; get_time_acceleration
EXTRN	?move_by_rate@@YGMMMM@Z:PROC			; move_by_rate
EXTRN	?random_number_seed@@3HA:DWORD			; random_number_seed
EXTRN	?command_line_TIR_6DOF@@3HA:DWORD		; command_line_TIR_6DOF
EXTRN	?command_line_g_force_head_movment_modifier@@3MA:DWORD ; command_line_g_force_head_movment_modifier
EXTRN	?null_entity_pointer_message@@3PBDB:DWORD	; null_entity_pointer_message
EXTRN	?global_options@@3UGLOBAL_OPTIONS_DATA@@A:BYTE	; global_options
EXTRN	?fn_get_local_entity_attitude_matrix@@3PAP6GXPAUENTITY@@QAY02M@ZA:BYTE ; fn_get_local_entity_attitude_matrix
EXTRN	?overload_invalid_int_type_message@@3PBDB:DWORD	; overload_invalid_int_type_message
EXTRN	?fn_get_local_entity_int_value@@3PAY0BBH@P6GHPAUENTITY@@W4INT_TYPES@@@ZA:BYTE ; fn_get_local_entity_int_value
EXTRN	?overload_invalid_ptr_type_message@@3PBDB:DWORD	; overload_invalid_ptr_type_message
EXTRN	?fn_get_local_entity_ptr_value@@3PAY0BE@P6GPAXPAUENTITY@@W4PTR_TYPES@@@ZA:BYTE ; fn_get_local_entity_ptr_value
EXTRN	?overload_invalid_vec3d_type_message@@3PBDB:DWORD ; overload_invalid_vec3d_type_message
EXTRN	?fn_get_local_entity_vec3d@@3PAY0BI@P6GXPAUENTITY@@W4VEC3D_TYPES@@PAUVEC3D@@@ZA:BYTE ; fn_get_local_entity_vec3d
EXTRN	?gunship_entity@@3PAUENTITY@@A:DWORD		; gunship_entity
EXTRN	?pilot_entity@@3PAUENTITY@@A:DWORD		; pilot_entity
EXTRN	?session_entity@@3PAUENTITY@@A:DWORD		; session_entity
EXTRN	?main_3d_env@@3PAUENV_3D@@A:DWORD		; main_3d_env
EXTRN	?main_vp@@3UVIEWPOINT@@A:BYTE			; main_vp
EXTRN	?view_mode@@3W4VIEW_MODES@@A:DWORD		; view_mode
EXTRN	?pilot_head_heading@@3MA:DWORD			; pilot_head_heading
EXTRN	?pilot_head_pitch@@3MA:DWORD			; pilot_head_pitch
EXTRN	?pilot_head_vp@@3UVIEWPOINT@@A:BYTE		; pilot_head_vp
EXTRN	?wide_cockpit@@3HA:DWORD			; wide_cockpit
EXTRN	?wide_cockpit_position@@3PAUCOCKPIT_POSITION@@A:BYTE ; wide_cockpit_position
EXTRN	?wide_cockpit_nr@@3HA:DWORD			; wide_cockpit_nr
EXTRN	?current_custom_cockpit_viewpoint@@3UCOCKPIT_VIEW@@A:BYTE ; current_custom_cockpit_viewpoint
EXTRN	?night_vision_system_active@@3HA:DWORD		; night_vision_system_active
EXTRN	?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A:DWORD ; virtual_cockpit_inst3d
EXTRN	?pilot_head_pitch_datum@@3MA:DWORD		; pilot_head_pitch_datum
EXTRN	?co_pilot_head_pitch_datum@@3MA:DWORD		; co_pilot_head_pitch_datum
EXTRN	?current_flight_dynamics@@3PAUDYNAMICS_TYPE@@A:DWORD ; current_flight_dynamics
EXTRN	__fltused:DWORD
_BSS	SEGMENT
?virtual_cockpit_inst3d_detail_level_high_inst3d@@3PAUOBJECT_3D_INSTANCE@@A DD 01H DUP (?) ; virtual_cockpit_inst3d_detail_level_high_inst3d
?virtual_cockpit_inst3d_detail_level_medium_inst3d@@3PAUOBJECT_3D_INSTANCE@@A DD 01H DUP (?) ; virtual_cockpit_inst3d_detail_level_medium_inst3d
?virtual_cockpit_inst3d_detail_level_low_inst3d@@3PAUOBJECT_3D_INSTANCE@@A DD 01H DUP (?) ; virtual_cockpit_inst3d_detail_level_low_inst3d
?virtual_cockpit_inst3d_detail_level_glass_inst3d@@3PAUOBJECT_3D_INSTANCE@@A DD 01H DUP (?) ; virtual_cockpit_inst3d_detail_level_glass_inst3d
?x_head_g_movement@@3MA DD 01H DUP (?)			; x_head_g_movement
?y_head_g_movement@@3MA DD 01H DUP (?)			; y_head_g_movement
?random_vibration_x@@3MA DD 01H DUP (?)			; random_vibration_x
?random_vibration_y@@3MA DD 01H DUP (?)			; random_vibration_y
_BSS	ENDS
;	COMDAT __xmm@80000000800000008000000080000000
CONST	SEGMENT
__xmm@80000000800000008000000080000000 DB 00H, 00H, 00H, 080H, 00H, 00H, 00H
	DB	080H, 00H, 00H, 00H, 080H, 00H, 00H, 00H, 080H
CONST	ENDS
;	COMDAT __real@c008000000000000
CONST	SEGMENT
__real@c008000000000000 DQ 0c008000000000000r	; -3
CONST	ENDS
;	COMDAT __real@bff8000000000000
CONST	SEGMENT
__real@bff8000000000000 DQ 0bff8000000000000r	; -1.5
CONST	ENDS
;	COMDAT __real@461c4000
CONST	SEGMENT
__real@461c4000 DD 0461c4000r			; 10000
CONST	ENDS
;	COMDAT __real@41200000
CONST	SEGMENT
__real@41200000 DD 041200000r			; 10
CONST	ENDS
;	COMDAT __real@40cfff8000000000
CONST	SEGMENT
__real@40cfff8000000000 DQ 040cfff8000000000r	; 16383
CONST	ENDS
;	COMDAT __real@4016cbe4
CONST	SEGMENT
__real@4016cbe4 DD 04016cbe4r			; 2.35619
CONST	ENDS
;	COMDAT __real@4014000000000000
CONST	SEGMENT
__real@4014000000000000 DQ 04014000000000000r	; 5
CONST	ENDS
;	COMDAT __real@400921fb60000000
CONST	SEGMENT
__real@400921fb60000000 DQ 0400921fb60000000r	; 3.14159
CONST	ENDS
;	COMDAT __real@4008000000000000
CONST	SEGMENT
__real@4008000000000000 DQ 04008000000000000r	; 3
CONST	ENDS
;	COMDAT __real@4000000000000000
CONST	SEGMENT
__real@4000000000000000 DQ 04000000000000000r	; 2
CONST	ENDS
;	COMDAT __real@3ff0000000000000
CONST	SEGMENT
__real@3ff0000000000000 DQ 03ff0000000000000r	; 1
CONST	ENDS
;	COMDAT __real@3f9999999999999a
CONST	SEGMENT
__real@3f9999999999999a DQ 03f9999999999999ar	; 0.025
CONST	ENDS
;	COMDAT __real@3f800000
CONST	SEGMENT
__real@3f800000 DD 03f800000r			; 1
CONST	ENDS
;	COMDAT __real@3f24a234
CONST	SEGMENT
__real@3f24a234 DD 03f24a234r			; 0.6431
CONST	ENDS
;	COMDAT __real@3f00002000400080
CONST	SEGMENT
__real@3f00002000400080 DQ 03f00002000400080r	; 3.05185e-05
CONST	ENDS
;	COMDAT __real@3f000000
CONST	SEGMENT
__real@3f000000 DD 03f000000r			; 0.5
CONST	ENDS
;	COMDAT __real@3ef4f8b588e368f1
CONST	SEGMENT
__real@3ef4f8b588e368f1 DQ 03ef4f8b588e368f1r	; 2e-05
CONST	ENDS
;	COMDAT __real@3e50cb29
CONST	SEGMENT
__real@3e50cb29 DD 03e50cb29r			; 0.2039
CONST	ENDS
;	COMDAT __real@3de0ded3
CONST	SEGMENT
__real@3de0ded3 DD 03de0ded3r			; 0.1098
CONST	ENDS
;	COMDAT __real@3dd0c43d
CONST	SEGMENT
__real@3dd0c43d DD 03dd0c43dr			; 0.101937
CONST	ENDS
;	COMDAT __real@3dcccccd
CONST	SEGMENT
__real@3dcccccd DD 03dcccccdr			; 0.1
CONST	ENDS
;	COMDAT __real@3d886595
CONST	SEGMENT
__real@3d886595 DD 03d886595r			; 0.0666
CONST	ENDS
;	COMDAT __real@3d8068dc
CONST	SEGMENT
__real@3d8068dc DD 03d8068dcr			; 0.0627
CONST	ENDS
;	COMDAT __real@3d4ccccd
CONST	SEGMENT
__real@3d4ccccd DD 03d4ccccdr			; 0.05
CONST	ENDS
;	COMDAT __real@3d20902e
CONST	SEGMENT
__real@3d20902e DD 03d20902er			; 0.0392
CONST	ENDS
;	COMDAT __real@3c8efa35
CONST	SEGMENT
__real@3c8efa35 DD 03c8efa35r			; 0.0174533
CONST	ENDS
;	COMDAT ?__LINE__Var@?0??restore_comanche_virtual_cockpit_main_rotors@@YGXXZ@4JA
_DATA	SEGMENT
?__LINE__Var@?0??restore_comanche_virtual_cockpit_main_rotors@@YGXXZ@4JA DD 0481H ; `restore_comanche_virtual_cockpit_main_rotors'::`1'::__LINE__Var
_DATA	ENDS
;	COMDAT ??_C@_06DDNABPCD@inst3d@
CONST	SEGMENT
??_C@_06DDNABPCD@inst3d@ DB 'inst3d', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_0DB@HAAFKHLI@virtual_cockpit_inst3d_detail_l@
CONST	SEGMENT
??_C@_0DB@HAAFKHLI@virtual_cockpit_inst3d_detail_l@ DB 'virtual_cockpit_i'
	DB	'nst3d_detail_level_glass_inst3d', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_0CP@MGKBEFMA@virtual_cockpit_inst3d_detail_l@
CONST	SEGMENT
??_C@_0CP@MGKBEFMA@virtual_cockpit_inst3d_detail_l@ DB 'virtual_cockpit_i'
	DB	'nst3d_detail_level_low_inst3d', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_0DC@KMIHMCBF@virtual_cockpit_inst3d_detail_l@
CONST	SEGMENT
??_C@_0DC@KMIHMCBF@virtual_cockpit_inst3d_detail_l@ DB 'virtual_cockpit_i'
	DB	'nst3d_detail_level_medium_inst3d', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_0DA@PICDOBAJ@virtual_cockpit_inst3d_detail_l@
CONST	SEGMENT
??_C@_0DA@PICDOBAJ@virtual_cockpit_inst3d_detail_l@ DB 'virtual_cockpit_i'
	DB	'nst3d_detail_level_high_inst3d', 00H	; `string'
CONST	ENDS
;	COMDAT ?__LINE__Var@?0??damage_comanche_virtual_cockpit_main_rotors@@YGXH@Z@4JA
_DATA	SEGMENT
?__LINE__Var@?0??damage_comanche_virtual_cockpit_main_rotors@@YGXH@Z@4JA DD 0458H ; `damage_comanche_virtual_cockpit_main_rotors'::`1'::__LINE__Var
_DATA	ENDS
;	COMDAT ??_C@_0DG@OCDOFANO@Failed?5to?5locate?5display?5viewpo@
CONST	SEGMENT
??_C@_0DG@OCDOFANO@Failed?5to?5locate?5display?5viewpo@ DB 'Failed to loc'
	DB	'ate display viewpoint in virtual cockpit', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0BH@KFJLEDAI@Invalid?5view?5mode?5?$DN?5?$CFd@
CONST	SEGMENT
??_C@_0BH@KFJLEDAI@Invalid?5view?5mode?5?$DN?5?$CFd@ DB 'Invalid view mod'
	DB	'e = %d', 00H				; `string'
CONST	ENDS
;	COMDAT ??_C@_0BH@OJOOJLIP@virtual_cockpit_inst3d@
CONST	SEGMENT
??_C@_0BH@OJOOJLIP@virtual_cockpit_inst3d@ DB 'virtual_cockpit_inst3d', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0BG@EANNPEON@get_gunship_entity?5?$CI?$CJ@
CONST	SEGMENT
??_C@_0BG@EANNPEON@get_gunship_entity?5?$CI?$CJ@ DB 'get_gunship_entity ('
	DB	')', 00H					; `string'
CONST	ENDS
;	COMDAT ?__LINE__Var@?0??get_comanche_display_viewpoint@@YGXW4VIEW_MODES@@@Z@4JA
_DATA	SEGMENT
?__LINE__Var@?0??get_comanche_display_viewpoint@@YGXW4VIEW_MODES@@@Z@4JA DD 03c5H ; `get_comanche_display_viewpoint'::`1'::__LINE__Var
_DATA	ENDS
;	COMDAT ??_C@_0DF@PBABBPHF@Failed?5to?5locate?5crew?8s?5viewpoi@
CONST	SEGMENT
??_C@_0DF@PBABBPHF@Failed?5to?5locate?5crew?8s?5viewpoi@ DB 'Failed to lo'
	DB	'cate crew''s viewpoint in virtual cockpit', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0DA@EHJMLOA@Failed?5to?5locate?5crew?8s?5head?5in@
CONST	SEGMENT
??_C@_0DA@EHJMLOA@Failed?5to?5locate?5crew?8s?5head?5in@ DB 'Failed to lo'
	DB	'cate crew''s head in virtual cockpit', 00H	; `string'
CONST	ENDS
;	COMDAT ?__LINE__Var@?0??get_comanche_crew_viewpoint@@YGXXZ@4JA
_DATA	SEGMENT
?__LINE__Var@?0??get_comanche_crew_viewpoint@@YGXXZ@4JA DD 0345H ; `get_comanche_crew_viewpoint'::`1'::__LINE__Var
_DATA	ENDS
;	COMDAT ??_C@_0FC@DCAAIOAH@c?3?2users?2nhv90?2projects?2eech?2ap@
CONST	SEGMENT
??_C@_0FC@DCAAIOAH@c?3?2users?2nhv90?2projects?2eech?2ap@ DB 'c:\users\nh'
	DB	'v90\projects\eech\aphavoc\source\gunships\cockpits\comanche\c'
	DB	'm_vckpt.c', 00H				; `string'
CONST	ENDS
;	COMDAT ?__LINE__Var@?0??draw_comanche_virtual_cockpit@@YGXXZ@4JA
_DATA	SEGMENT
?__LINE__Var@?0??draw_comanche_virtual_cockpit@@YGXXZ@4JA DD 0215H ; `draw_comanche_virtual_cockpit'::`1'::__LINE__Var
_DATA	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\gunships\cockpits\comanche\cm_vckpt.c
;	COMDAT ?restore_comanche_virtual_cockpit_main_rotors@@YGXXZ
_TEXT	SEGMENT
tv135 = -80						; size = 4
tv95 = -76						; size = 4
_inst3d$ = -8						; size = 4
_theta$ = -4						; size = 4
?restore_comanche_virtual_cockpit_main_rotors@@YGXXZ PROC ; restore_comanche_virtual_cockpit_main_rotors, COMDAT

; 1153 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 50	 sub	 esp, 80			; 00000050H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 1154 : 	float
; 1155 : 		theta;
; 1156 : 
; 1157 : 	object_3d_instance
; 1158 : 		*inst3d;
; 1159 : 
; 1160 : 	ASSERT (get_gunship_entity ());

  00009	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?gunship_entity@@3PAUENTITY@@A, 0 ; gunship_entity
  00010	75 18		 jne	 SHORT $LN2@restore_co
  00012	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??restore_comanche_virtual_cockpit_main_rotors@@YGXXZ@4JA
  00017	83 c0 07	 add	 eax, 7
  0001a	50		 push	 eax
  0001b	68 00 00 00 00	 push	 OFFSET ??_C@_0FC@DCAAIOAH@c?3?2users?2nhv90?2projects?2eech?2ap@
  00020	68 00 00 00 00	 push	 OFFSET ??_C@_0BG@EANNPEON@get_gunship_entity?5?$CI?$CJ@
  00025	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN2@restore_co:

; 1161 : 
; 1162 : 	ASSERT (virtual_cockpit_inst3d_detail_level_high_inst3d);

  0002a	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?virtual_cockpit_inst3d_detail_level_high_inst3d@@3PAUOBJECT_3D_INSTANCE@@A, 0
  00031	75 18		 jne	 SHORT $LN3@restore_co
  00033	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??restore_comanche_virtual_cockpit_main_rotors@@YGXXZ@4JA
  00038	83 c0 09	 add	 eax, 9
  0003b	50		 push	 eax
  0003c	68 00 00 00 00	 push	 OFFSET ??_C@_0FC@DCAAIOAH@c?3?2users?2nhv90?2projects?2eech?2ap@
  00041	68 00 00 00 00	 push	 OFFSET ??_C@_0DA@PICDOBAJ@virtual_cockpit_inst3d_detail_l@
  00046	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN3@restore_co:

; 1163 : 	ASSERT (virtual_cockpit_inst3d_detail_level_medium_inst3d);

  0004b	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?virtual_cockpit_inst3d_detail_level_medium_inst3d@@3PAUOBJECT_3D_INSTANCE@@A, 0
  00052	75 18		 jne	 SHORT $LN4@restore_co
  00054	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??restore_comanche_virtual_cockpit_main_rotors@@YGXXZ@4JA
  00059	83 c0 0a	 add	 eax, 10			; 0000000aH
  0005c	50		 push	 eax
  0005d	68 00 00 00 00	 push	 OFFSET ??_C@_0FC@DCAAIOAH@c?3?2users?2nhv90?2projects?2eech?2ap@
  00062	68 00 00 00 00	 push	 OFFSET ??_C@_0DC@KMIHMCBF@virtual_cockpit_inst3d_detail_l@
  00067	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN4@restore_co:

; 1164 : 	ASSERT (virtual_cockpit_inst3d_detail_level_low_inst3d);

  0006c	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?virtual_cockpit_inst3d_detail_level_low_inst3d@@3PAUOBJECT_3D_INSTANCE@@A, 0
  00073	75 18		 jne	 SHORT $LN5@restore_co
  00075	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??restore_comanche_virtual_cockpit_main_rotors@@YGXXZ@4JA
  0007a	83 c0 0b	 add	 eax, 11			; 0000000bH
  0007d	50		 push	 eax
  0007e	68 00 00 00 00	 push	 OFFSET ??_C@_0FC@DCAAIOAH@c?3?2users?2nhv90?2projects?2eech?2ap@
  00083	68 00 00 00 00	 push	 OFFSET ??_C@_0CP@MGKBEFMA@virtual_cockpit_inst3d_detail_l@
  00088	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN5@restore_co:

; 1165 : 	ASSERT (virtual_cockpit_inst3d_detail_level_glass_inst3d);

  0008d	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?virtual_cockpit_inst3d_detail_level_glass_inst3d@@3PAUOBJECT_3D_INSTANCE@@A, 0
  00094	75 18		 jne	 SHORT $LN6@restore_co
  00096	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??restore_comanche_virtual_cockpit_main_rotors@@YGXXZ@4JA
  0009b	83 c0 0c	 add	 eax, 12			; 0000000cH
  0009e	50		 push	 eax
  0009f	68 00 00 00 00	 push	 OFFSET ??_C@_0FC@DCAAIOAH@c?3?2users?2nhv90?2projects?2eech?2ap@
  000a4	68 00 00 00 00	 push	 OFFSET ??_C@_0DB@HAAFKHLI@virtual_cockpit_inst3d_detail_l@
  000a9	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN6@restore_co:

; 1166 : 
; 1167 : 	inst3d = (object_3d_instance *) get_local_entity_ptr_value (get_gunship_entity (), PTR_TYPE_INSTANCE_3D_OBJECT);

  000ae	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?gunship_entity@@3PAUENTITY@@A, 0 ; gunship_entity
  000b5	74 0c		 je	 SHORT $LN9@restore_co
  000b7	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gunship_entity@@3PAUENTITY@@A ; gunship_entity
  000bc	8b 08		 mov	 ecx, DWORD PTR [eax]
  000be	89 4d b4	 mov	 DWORD PTR tv95[ebp], ecx
  000c1	eb 21		 jmp	 SHORT $LN10@restore_co
$LN9@restore_co:
  000c3	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??restore_comanche_virtual_cockpit_main_rotors@@YGXXZ@4JA
  000c9	83 c2 0e	 add	 edx, 14			; 0000000eH
  000cc	52		 push	 edx
  000cd	68 00 00 00 00	 push	 OFFSET ??_C@_0FC@DCAAIOAH@c?3?2users?2nhv90?2projects?2eech?2ap@
  000d2	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  000d7	50		 push	 eax
  000d8	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  000dd	c7 45 b4 00 00
	00 00		 mov	 DWORD PTR tv95[ebp], 0
$LN10@restore_co:
  000e4	b9 01 00 00 00	 mov	 ecx, 1
  000e9	85 c9		 test	 ecx, ecx
  000eb	74 09		 je	 SHORT $LN11@restore_co
  000ed	c7 45 b0 02 00
	00 00		 mov	 DWORD PTR tv135[ebp], 2
  000f4	eb 21		 jmp	 SHORT $LN12@restore_co
$LN11@restore_co:
  000f6	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??restore_comanche_virtual_cockpit_main_rotors@@YGXXZ@4JA
  000fc	83 c2 0e	 add	 edx, 14			; 0000000eH
  000ff	52		 push	 edx
  00100	68 00 00 00 00	 push	 OFFSET ??_C@_0FC@DCAAIOAH@c?3?2users?2nhv90?2projects?2eech?2ap@
  00105	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_ptr_type_message@@3PBDB ; overload_invalid_ptr_type_message
  0010a	50		 push	 eax
  0010b	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00110	c7 45 b0 00 00
	00 00		 mov	 DWORD PTR tv135[ebp], 0
$LN12@restore_co:
  00117	6a 02		 push	 2
  00119	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gunship_entity@@3PAUENTITY@@A ; gunship_entity
  0011f	51		 push	 ecx
  00120	6b 55 b4 50	 imul	 edx, DWORD PTR tv95[ebp], 80
  00124	8b 45 b0	 mov	 eax, DWORD PTR tv135[ebp]
  00127	8b 8c 82 00 00
	00 00		 mov	 ecx, DWORD PTR ?fn_get_local_entity_ptr_value@@3PAY0BE@P6GPAXPAUENTITY@@W4PTR_TYPES@@@ZA[edx+eax*4]
  0012e	ff d1		 call	 ecx
  00130	89 45 f8	 mov	 DWORD PTR _inst3d$[ebp], eax

; 1168 : 
; 1169 : 	ASSERT (inst3d);

  00133	83 7d f8 00	 cmp	 DWORD PTR _inst3d$[ebp], 0
  00137	75 18		 jne	 SHORT $LN7@restore_co
  00139	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??restore_comanche_virtual_cockpit_main_rotors@@YGXXZ@4JA
  0013e	83 c0 10	 add	 eax, 16			; 00000010H
  00141	50		 push	 eax
  00142	68 00 00 00 00	 push	 OFFSET ??_C@_0FC@DCAAIOAH@c?3?2users?2nhv90?2projects?2eech?2ap@
  00147	68 00 00 00 00	 push	 OFFSET ??_C@_06DDNABPCD@inst3d@
  0014c	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN7@restore_co:

; 1170 : 
; 1171 : 	theta = get_rotation_angle_of_helicopter_main_rotors (inst3d);

  00151	8b 45 f8	 mov	 eax, DWORD PTR _inst3d$[ebp]
  00154	50		 push	 eax
  00155	e8 00 00 00 00	 call	 ?get_rotation_angle_of_helicopter_main_rotors@@YGMPAUOBJECT_3D_INSTANCE@@@Z ; get_rotation_angle_of_helicopter_main_rotors
  0015a	d9 5d fc	 fstp	 DWORD PTR _theta$[ebp]

; 1172 : 
; 1173 : 	set_rotation_angle_of_helicopter_main_rotors (virtual_cockpit_inst3d_detail_level_high_inst3d, theta);

  0015d	51		 push	 ecx
  0015e	f3 0f 10 45 fc	 movss	 xmm0, DWORD PTR _theta$[ebp]
  00163	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00168	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d_detail_level_high_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  0016d	50		 push	 eax
  0016e	e8 00 00 00 00	 call	 ?set_rotation_angle_of_helicopter_main_rotors@@YGXPAUOBJECT_3D_INSTANCE@@M@Z ; set_rotation_angle_of_helicopter_main_rotors

; 1174 : 	set_rotation_angle_of_helicopter_main_rotors (virtual_cockpit_inst3d_detail_level_medium_inst3d, theta);

  00173	51		 push	 ecx
  00174	f3 0f 10 45 fc	 movss	 xmm0, DWORD PTR _theta$[ebp]
  00179	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  0017e	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d_detail_level_medium_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  00183	50		 push	 eax
  00184	e8 00 00 00 00	 call	 ?set_rotation_angle_of_helicopter_main_rotors@@YGXPAUOBJECT_3D_INSTANCE@@M@Z ; set_rotation_angle_of_helicopter_main_rotors

; 1175 : 	set_rotation_angle_of_helicopter_main_rotors (virtual_cockpit_inst3d_detail_level_low_inst3d, theta);

  00189	51		 push	 ecx
  0018a	f3 0f 10 45 fc	 movss	 xmm0, DWORD PTR _theta$[ebp]
  0018f	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00194	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d_detail_level_low_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  00199	50		 push	 eax
  0019a	e8 00 00 00 00	 call	 ?set_rotation_angle_of_helicopter_main_rotors@@YGXPAUOBJECT_3D_INSTANCE@@M@Z ; set_rotation_angle_of_helicopter_main_rotors

; 1176 : 	set_rotation_angle_of_helicopter_main_rotors (virtual_cockpit_inst3d_detail_level_glass_inst3d, theta);

  0019f	51		 push	 ecx
  001a0	f3 0f 10 45 fc	 movss	 xmm0, DWORD PTR _theta$[ebp]
  001a5	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  001aa	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d_detail_level_glass_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  001af	50		 push	 eax
  001b0	e8 00 00 00 00	 call	 ?set_rotation_angle_of_helicopter_main_rotors@@YGXPAUOBJECT_3D_INSTANCE@@M@Z ; set_rotation_angle_of_helicopter_main_rotors

; 1177 : 
; 1178 : 	animate_helicopter_virtual_cockpit_main_rotors (get_gunship_entity (), virtual_cockpit_inst3d_detail_level_high_inst3d);

  001b5	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d_detail_level_high_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  001ba	50		 push	 eax
  001bb	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gunship_entity@@3PAUENTITY@@A ; gunship_entity
  001c1	51		 push	 ecx
  001c2	e8 00 00 00 00	 call	 ?animate_helicopter_virtual_cockpit_main_rotors@@YGXPAUENTITY@@PAUOBJECT_3D_INSTANCE@@@Z ; animate_helicopter_virtual_cockpit_main_rotors

; 1179 : 	animate_helicopter_virtual_cockpit_main_rotors (get_gunship_entity (), virtual_cockpit_inst3d_detail_level_medium_inst3d);

  001c7	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d_detail_level_medium_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  001cc	50		 push	 eax
  001cd	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gunship_entity@@3PAUENTITY@@A ; gunship_entity
  001d3	51		 push	 ecx
  001d4	e8 00 00 00 00	 call	 ?animate_helicopter_virtual_cockpit_main_rotors@@YGXPAUENTITY@@PAUOBJECT_3D_INSTANCE@@@Z ; animate_helicopter_virtual_cockpit_main_rotors

; 1180 : 	animate_helicopter_virtual_cockpit_main_rotors (get_gunship_entity (), virtual_cockpit_inst3d_detail_level_low_inst3d);

  001d9	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d_detail_level_low_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  001de	50		 push	 eax
  001df	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gunship_entity@@3PAUENTITY@@A ; gunship_entity
  001e5	51		 push	 ecx
  001e6	e8 00 00 00 00	 call	 ?animate_helicopter_virtual_cockpit_main_rotors@@YGXPAUENTITY@@PAUOBJECT_3D_INSTANCE@@@Z ; animate_helicopter_virtual_cockpit_main_rotors

; 1181 : 	animate_helicopter_virtual_cockpit_main_rotors (get_gunship_entity (), virtual_cockpit_inst3d_detail_level_glass_inst3d);

  001eb	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d_detail_level_glass_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  001f0	50		 push	 eax
  001f1	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gunship_entity@@3PAUENTITY@@A ; gunship_entity
  001f7	51		 push	 ecx
  001f8	e8 00 00 00 00	 call	 ?animate_helicopter_virtual_cockpit_main_rotors@@YGXPAUENTITY@@PAUOBJECT_3D_INSTANCE@@@Z ; animate_helicopter_virtual_cockpit_main_rotors

; 1182 : 
; 1183 : 	restore_helicopter_main_rotor_inst3d (virtual_cockpit_inst3d_detail_level_high_inst3d);

  001fd	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d_detail_level_high_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  00202	50		 push	 eax
  00203	e8 00 00 00 00	 call	 ?restore_helicopter_main_rotor_inst3d@@YGHPAUOBJECT_3D_INSTANCE@@@Z ; restore_helicopter_main_rotor_inst3d

; 1184 : 	restore_helicopter_main_rotor_inst3d (virtual_cockpit_inst3d_detail_level_medium_inst3d);

  00208	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d_detail_level_medium_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  0020d	50		 push	 eax
  0020e	e8 00 00 00 00	 call	 ?restore_helicopter_main_rotor_inst3d@@YGHPAUOBJECT_3D_INSTANCE@@@Z ; restore_helicopter_main_rotor_inst3d

; 1185 : 	restore_helicopter_main_rotor_inst3d (virtual_cockpit_inst3d_detail_level_low_inst3d);

  00213	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d_detail_level_low_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  00218	50		 push	 eax
  00219	e8 00 00 00 00	 call	 ?restore_helicopter_main_rotor_inst3d@@YGHPAUOBJECT_3D_INSTANCE@@@Z ; restore_helicopter_main_rotor_inst3d

; 1186 : 	restore_helicopter_main_rotor_inst3d (virtual_cockpit_inst3d_detail_level_glass_inst3d);

  0021e	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d_detail_level_glass_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  00223	50		 push	 eax
  00224	e8 00 00 00 00	 call	 ?restore_helicopter_main_rotor_inst3d@@YGHPAUOBJECT_3D_INSTANCE@@@Z ; restore_helicopter_main_rotor_inst3d

; 1187 : }

  00229	5f		 pop	 edi
  0022a	5e		 pop	 esi
  0022b	5b		 pop	 ebx
  0022c	8b e5		 mov	 esp, ebp
  0022e	5d		 pop	 ebp
  0022f	c3		 ret	 0
?restore_comanche_virtual_cockpit_main_rotors@@YGXXZ ENDP ; restore_comanche_virtual_cockpit_main_rotors
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\gunships\cockpits\comanche\cm_vckpt.c
;	COMDAT ?damage_comanche_virtual_cockpit_main_rotors@@YGXH@Z
_TEXT	SEGMENT
tv135 = -80						; size = 4
tv95 = -76						; size = 4
_inst3d$ = -8						; size = 4
_theta$ = -4						; size = 4
_seed$ = 8						; size = 4
?damage_comanche_virtual_cockpit_main_rotors@@YGXH@Z PROC ; damage_comanche_virtual_cockpit_main_rotors, COMDAT

; 1112 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 50	 sub	 esp, 80			; 00000050H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 1113 : 	float
; 1114 : 		theta;
; 1115 : 
; 1116 : 	object_3d_instance
; 1117 : 		*inst3d;
; 1118 : 
; 1119 : 	ASSERT (get_gunship_entity ());

  00009	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?gunship_entity@@3PAUENTITY@@A, 0 ; gunship_entity
  00010	75 18		 jne	 SHORT $LN2@damage_com
  00012	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??damage_comanche_virtual_cockpit_main_rotors@@YGXH@Z@4JA
  00017	83 c0 07	 add	 eax, 7
  0001a	50		 push	 eax
  0001b	68 00 00 00 00	 push	 OFFSET ??_C@_0FC@DCAAIOAH@c?3?2users?2nhv90?2projects?2eech?2ap@
  00020	68 00 00 00 00	 push	 OFFSET ??_C@_0BG@EANNPEON@get_gunship_entity?5?$CI?$CJ@
  00025	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN2@damage_com:

; 1120 : 
; 1121 : 	ASSERT (virtual_cockpit_inst3d_detail_level_high_inst3d);

  0002a	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?virtual_cockpit_inst3d_detail_level_high_inst3d@@3PAUOBJECT_3D_INSTANCE@@A, 0
  00031	75 18		 jne	 SHORT $LN3@damage_com
  00033	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??damage_comanche_virtual_cockpit_main_rotors@@YGXH@Z@4JA
  00038	83 c0 09	 add	 eax, 9
  0003b	50		 push	 eax
  0003c	68 00 00 00 00	 push	 OFFSET ??_C@_0FC@DCAAIOAH@c?3?2users?2nhv90?2projects?2eech?2ap@
  00041	68 00 00 00 00	 push	 OFFSET ??_C@_0DA@PICDOBAJ@virtual_cockpit_inst3d_detail_l@
  00046	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN3@damage_com:

; 1122 : 	ASSERT (virtual_cockpit_inst3d_detail_level_medium_inst3d);

  0004b	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?virtual_cockpit_inst3d_detail_level_medium_inst3d@@3PAUOBJECT_3D_INSTANCE@@A, 0
  00052	75 18		 jne	 SHORT $LN4@damage_com
  00054	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??damage_comanche_virtual_cockpit_main_rotors@@YGXH@Z@4JA
  00059	83 c0 0a	 add	 eax, 10			; 0000000aH
  0005c	50		 push	 eax
  0005d	68 00 00 00 00	 push	 OFFSET ??_C@_0FC@DCAAIOAH@c?3?2users?2nhv90?2projects?2eech?2ap@
  00062	68 00 00 00 00	 push	 OFFSET ??_C@_0DC@KMIHMCBF@virtual_cockpit_inst3d_detail_l@
  00067	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN4@damage_com:

; 1123 : 	ASSERT (virtual_cockpit_inst3d_detail_level_low_inst3d);

  0006c	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?virtual_cockpit_inst3d_detail_level_low_inst3d@@3PAUOBJECT_3D_INSTANCE@@A, 0
  00073	75 18		 jne	 SHORT $LN5@damage_com
  00075	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??damage_comanche_virtual_cockpit_main_rotors@@YGXH@Z@4JA
  0007a	83 c0 0b	 add	 eax, 11			; 0000000bH
  0007d	50		 push	 eax
  0007e	68 00 00 00 00	 push	 OFFSET ??_C@_0FC@DCAAIOAH@c?3?2users?2nhv90?2projects?2eech?2ap@
  00083	68 00 00 00 00	 push	 OFFSET ??_C@_0CP@MGKBEFMA@virtual_cockpit_inst3d_detail_l@
  00088	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN5@damage_com:

; 1124 : 	ASSERT (virtual_cockpit_inst3d_detail_level_glass_inst3d);

  0008d	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?virtual_cockpit_inst3d_detail_level_glass_inst3d@@3PAUOBJECT_3D_INSTANCE@@A, 0
  00094	75 18		 jne	 SHORT $LN6@damage_com
  00096	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??damage_comanche_virtual_cockpit_main_rotors@@YGXH@Z@4JA
  0009b	83 c0 0c	 add	 eax, 12			; 0000000cH
  0009e	50		 push	 eax
  0009f	68 00 00 00 00	 push	 OFFSET ??_C@_0FC@DCAAIOAH@c?3?2users?2nhv90?2projects?2eech?2ap@
  000a4	68 00 00 00 00	 push	 OFFSET ??_C@_0DB@HAAFKHLI@virtual_cockpit_inst3d_detail_l@
  000a9	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN6@damage_com:

; 1125 : 
; 1126 : 	inst3d = (object_3d_instance *) get_local_entity_ptr_value (get_gunship_entity (), PTR_TYPE_INSTANCE_3D_OBJECT);

  000ae	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?gunship_entity@@3PAUENTITY@@A, 0 ; gunship_entity
  000b5	74 0c		 je	 SHORT $LN9@damage_com
  000b7	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gunship_entity@@3PAUENTITY@@A ; gunship_entity
  000bc	8b 08		 mov	 ecx, DWORD PTR [eax]
  000be	89 4d b4	 mov	 DWORD PTR tv95[ebp], ecx
  000c1	eb 21		 jmp	 SHORT $LN10@damage_com
$LN9@damage_com:
  000c3	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??damage_comanche_virtual_cockpit_main_rotors@@YGXH@Z@4JA
  000c9	83 c2 0e	 add	 edx, 14			; 0000000eH
  000cc	52		 push	 edx
  000cd	68 00 00 00 00	 push	 OFFSET ??_C@_0FC@DCAAIOAH@c?3?2users?2nhv90?2projects?2eech?2ap@
  000d2	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  000d7	50		 push	 eax
  000d8	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  000dd	c7 45 b4 00 00
	00 00		 mov	 DWORD PTR tv95[ebp], 0
$LN10@damage_com:
  000e4	b9 01 00 00 00	 mov	 ecx, 1
  000e9	85 c9		 test	 ecx, ecx
  000eb	74 09		 je	 SHORT $LN11@damage_com
  000ed	c7 45 b0 02 00
	00 00		 mov	 DWORD PTR tv135[ebp], 2
  000f4	eb 21		 jmp	 SHORT $LN12@damage_com
$LN11@damage_com:
  000f6	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??damage_comanche_virtual_cockpit_main_rotors@@YGXH@Z@4JA
  000fc	83 c2 0e	 add	 edx, 14			; 0000000eH
  000ff	52		 push	 edx
  00100	68 00 00 00 00	 push	 OFFSET ??_C@_0FC@DCAAIOAH@c?3?2users?2nhv90?2projects?2eech?2ap@
  00105	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_ptr_type_message@@3PBDB ; overload_invalid_ptr_type_message
  0010a	50		 push	 eax
  0010b	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00110	c7 45 b0 00 00
	00 00		 mov	 DWORD PTR tv135[ebp], 0
$LN12@damage_com:
  00117	6a 02		 push	 2
  00119	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gunship_entity@@3PAUENTITY@@A ; gunship_entity
  0011f	51		 push	 ecx
  00120	6b 55 b4 50	 imul	 edx, DWORD PTR tv95[ebp], 80
  00124	8b 45 b0	 mov	 eax, DWORD PTR tv135[ebp]
  00127	8b 8c 82 00 00
	00 00		 mov	 ecx, DWORD PTR ?fn_get_local_entity_ptr_value@@3PAY0BE@P6GPAXPAUENTITY@@W4PTR_TYPES@@@ZA[edx+eax*4]
  0012e	ff d1		 call	 ecx
  00130	89 45 f8	 mov	 DWORD PTR _inst3d$[ebp], eax

; 1127 : 
; 1128 : 	ASSERT (inst3d);

  00133	83 7d f8 00	 cmp	 DWORD PTR _inst3d$[ebp], 0
  00137	75 18		 jne	 SHORT $LN7@damage_com
  00139	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??damage_comanche_virtual_cockpit_main_rotors@@YGXH@Z@4JA
  0013e	83 c0 10	 add	 eax, 16			; 00000010H
  00141	50		 push	 eax
  00142	68 00 00 00 00	 push	 OFFSET ??_C@_0FC@DCAAIOAH@c?3?2users?2nhv90?2projects?2eech?2ap@
  00147	68 00 00 00 00	 push	 OFFSET ??_C@_06DDNABPCD@inst3d@
  0014c	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN7@damage_com:

; 1129 : 
; 1130 : 	theta = get_rotation_angle_of_helicopter_main_rotors (inst3d);

  00151	8b 45 f8	 mov	 eax, DWORD PTR _inst3d$[ebp]
  00154	50		 push	 eax
  00155	e8 00 00 00 00	 call	 ?get_rotation_angle_of_helicopter_main_rotors@@YGMPAUOBJECT_3D_INSTANCE@@@Z ; get_rotation_angle_of_helicopter_main_rotors
  0015a	d9 5d fc	 fstp	 DWORD PTR _theta$[ebp]

; 1131 : 
; 1132 : 	set_rotation_angle_of_helicopter_main_rotors (virtual_cockpit_inst3d_detail_level_high_inst3d, theta);

  0015d	51		 push	 ecx
  0015e	f3 0f 10 45 fc	 movss	 xmm0, DWORD PTR _theta$[ebp]
  00163	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00168	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d_detail_level_high_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  0016d	50		 push	 eax
  0016e	e8 00 00 00 00	 call	 ?set_rotation_angle_of_helicopter_main_rotors@@YGXPAUOBJECT_3D_INSTANCE@@M@Z ; set_rotation_angle_of_helicopter_main_rotors

; 1133 : 	set_rotation_angle_of_helicopter_main_rotors (virtual_cockpit_inst3d_detail_level_medium_inst3d, theta);

  00173	51		 push	 ecx
  00174	f3 0f 10 45 fc	 movss	 xmm0, DWORD PTR _theta$[ebp]
  00179	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  0017e	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d_detail_level_medium_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  00183	50		 push	 eax
  00184	e8 00 00 00 00	 call	 ?set_rotation_angle_of_helicopter_main_rotors@@YGXPAUOBJECT_3D_INSTANCE@@M@Z ; set_rotation_angle_of_helicopter_main_rotors

; 1134 : 	set_rotation_angle_of_helicopter_main_rotors (virtual_cockpit_inst3d_detail_level_low_inst3d, theta);

  00189	51		 push	 ecx
  0018a	f3 0f 10 45 fc	 movss	 xmm0, DWORD PTR _theta$[ebp]
  0018f	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00194	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d_detail_level_low_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  00199	50		 push	 eax
  0019a	e8 00 00 00 00	 call	 ?set_rotation_angle_of_helicopter_main_rotors@@YGXPAUOBJECT_3D_INSTANCE@@M@Z ; set_rotation_angle_of_helicopter_main_rotors

; 1135 : 	set_rotation_angle_of_helicopter_main_rotors (virtual_cockpit_inst3d_detail_level_glass_inst3d, theta);

  0019f	51		 push	 ecx
  001a0	f3 0f 10 45 fc	 movss	 xmm0, DWORD PTR _theta$[ebp]
  001a5	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  001aa	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d_detail_level_glass_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  001af	50		 push	 eax
  001b0	e8 00 00 00 00	 call	 ?set_rotation_angle_of_helicopter_main_rotors@@YGXPAUOBJECT_3D_INSTANCE@@M@Z ; set_rotation_angle_of_helicopter_main_rotors

; 1136 : 
; 1137 : 	animate_helicopter_virtual_cockpit_main_rotors (get_gunship_entity (), virtual_cockpit_inst3d_detail_level_high_inst3d);

  001b5	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d_detail_level_high_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  001ba	50		 push	 eax
  001bb	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gunship_entity@@3PAUENTITY@@A ; gunship_entity
  001c1	51		 push	 ecx
  001c2	e8 00 00 00 00	 call	 ?animate_helicopter_virtual_cockpit_main_rotors@@YGXPAUENTITY@@PAUOBJECT_3D_INSTANCE@@@Z ; animate_helicopter_virtual_cockpit_main_rotors

; 1138 : 	animate_helicopter_virtual_cockpit_main_rotors (get_gunship_entity (), virtual_cockpit_inst3d_detail_level_medium_inst3d);

  001c7	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d_detail_level_medium_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  001cc	50		 push	 eax
  001cd	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gunship_entity@@3PAUENTITY@@A ; gunship_entity
  001d3	51		 push	 ecx
  001d4	e8 00 00 00 00	 call	 ?animate_helicopter_virtual_cockpit_main_rotors@@YGXPAUENTITY@@PAUOBJECT_3D_INSTANCE@@@Z ; animate_helicopter_virtual_cockpit_main_rotors

; 1139 : 	animate_helicopter_virtual_cockpit_main_rotors (get_gunship_entity (), virtual_cockpit_inst3d_detail_level_low_inst3d);

  001d9	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d_detail_level_low_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  001de	50		 push	 eax
  001df	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gunship_entity@@3PAUENTITY@@A ; gunship_entity
  001e5	51		 push	 ecx
  001e6	e8 00 00 00 00	 call	 ?animate_helicopter_virtual_cockpit_main_rotors@@YGXPAUENTITY@@PAUOBJECT_3D_INSTANCE@@@Z ; animate_helicopter_virtual_cockpit_main_rotors

; 1140 : 	animate_helicopter_virtual_cockpit_main_rotors (get_gunship_entity (), virtual_cockpit_inst3d_detail_level_glass_inst3d);

  001eb	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d_detail_level_glass_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  001f0	50		 push	 eax
  001f1	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gunship_entity@@3PAUENTITY@@A ; gunship_entity
  001f7	51		 push	 ecx
  001f8	e8 00 00 00 00	 call	 ?animate_helicopter_virtual_cockpit_main_rotors@@YGXPAUENTITY@@PAUOBJECT_3D_INSTANCE@@@Z ; animate_helicopter_virtual_cockpit_main_rotors

; 1141 : 
; 1142 : 	damage_helicopter_main_rotor_inst3d (virtual_cockpit_inst3d_detail_level_high_inst3d, seed);

  001fd	8b 45 08	 mov	 eax, DWORD PTR _seed$[ebp]
  00200	50		 push	 eax
  00201	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?virtual_cockpit_inst3d_detail_level_high_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  00207	51		 push	 ecx
  00208	e8 00 00 00 00	 call	 ?damage_helicopter_main_rotor_inst3d@@YGHPAUOBJECT_3D_INSTANCE@@H@Z ; damage_helicopter_main_rotor_inst3d

; 1143 : 	damage_helicopter_main_rotor_inst3d (virtual_cockpit_inst3d_detail_level_medium_inst3d, seed);

  0020d	8b 45 08	 mov	 eax, DWORD PTR _seed$[ebp]
  00210	50		 push	 eax
  00211	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?virtual_cockpit_inst3d_detail_level_medium_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  00217	51		 push	 ecx
  00218	e8 00 00 00 00	 call	 ?damage_helicopter_main_rotor_inst3d@@YGHPAUOBJECT_3D_INSTANCE@@H@Z ; damage_helicopter_main_rotor_inst3d

; 1144 : 	damage_helicopter_main_rotor_inst3d (virtual_cockpit_inst3d_detail_level_low_inst3d, seed);

  0021d	8b 45 08	 mov	 eax, DWORD PTR _seed$[ebp]
  00220	50		 push	 eax
  00221	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?virtual_cockpit_inst3d_detail_level_low_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  00227	51		 push	 ecx
  00228	e8 00 00 00 00	 call	 ?damage_helicopter_main_rotor_inst3d@@YGHPAUOBJECT_3D_INSTANCE@@H@Z ; damage_helicopter_main_rotor_inst3d

; 1145 : 	damage_helicopter_main_rotor_inst3d (virtual_cockpit_inst3d_detail_level_glass_inst3d, seed);

  0022d	8b 45 08	 mov	 eax, DWORD PTR _seed$[ebp]
  00230	50		 push	 eax
  00231	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?virtual_cockpit_inst3d_detail_level_glass_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  00237	51		 push	 ecx
  00238	e8 00 00 00 00	 call	 ?damage_helicopter_main_rotor_inst3d@@YGHPAUOBJECT_3D_INSTANCE@@H@Z ; damage_helicopter_main_rotor_inst3d

; 1146 : }

  0023d	5f		 pop	 edi
  0023e	5e		 pop	 esi
  0023f	5b		 pop	 ebx
  00240	8b e5		 mov	 esp, ebp
  00242	5d		 pop	 ebp
  00243	c2 04 00	 ret	 4
?damage_comanche_virtual_cockpit_main_rotors@@YGXH@Z ENDP ; damage_comanche_virtual_cockpit_main_rotors
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\gunships\cockpits\comanche\cm_vckpt.c
;	COMDAT ?get_comanche_display_viewpoint@@YGXW4VIEW_MODES@@@Z
_TEXT	SEGMENT
tv158 = -144						; size = 4
tv150 = -140						; size = 4
tv91 = -140						; size = 4
tv74 = -140						; size = 4
_position$ = -72					; size = 12
_search$ = -60						; size = 56
_index$ = -4						; size = 4
_mode$ = 8						; size = 4
?get_comanche_display_viewpoint@@YGXW4VIEW_MODES@@@Z PROC ; get_comanche_display_viewpoint, COMDAT

; 965  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec 90 00 00
	00		 sub	 esp, 144		; 00000090H
  00009	53		 push	 ebx
  0000a	56		 push	 esi
  0000b	57		 push	 edi

; 966  : 	object_3d_sub_object_index_numbers
; 967  : 		index;
; 968  : 
; 969  : 	object_3d_sub_object_search_data
; 970  : 		search;
; 971  : 
; 972  : 	vec3d
; 973  : 		position;
; 974  : 
; 975  : 	ASSERT (get_gunship_entity ());

  0000c	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?gunship_entity@@3PAUENTITY@@A, 0 ; gunship_entity
  00013	75 18		 jne	 SHORT $LN4@get_comanc
  00015	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??get_comanche_display_viewpoint@@YGXW4VIEW_MODES@@@Z@4JA
  0001a	83 c0 0a	 add	 eax, 10			; 0000000aH
  0001d	50		 push	 eax
  0001e	68 00 00 00 00	 push	 OFFSET ??_C@_0FC@DCAAIOAH@c?3?2users?2nhv90?2projects?2eech?2ap@
  00023	68 00 00 00 00	 push	 OFFSET ??_C@_0BG@EANNPEON@get_gunship_entity?5?$CI?$CJ@
  00028	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN4@get_comanc:

; 976  : 
; 977  : 	ASSERT (virtual_cockpit_inst3d);

  0002d	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A, 0 ; virtual_cockpit_inst3d
  00034	75 18		 jne	 SHORT $LN5@get_comanc
  00036	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??get_comanche_display_viewpoint@@YGXW4VIEW_MODES@@@Z@4JA
  0003b	83 c0 0c	 add	 eax, 12			; 0000000cH
  0003e	50		 push	 eax
  0003f	68 00 00 00 00	 push	 OFFSET ??_C@_0FC@DCAAIOAH@c?3?2users?2nhv90?2projects?2eech?2ap@
  00044	68 00 00 00 00	 push	 OFFSET ??_C@_0BH@OJOOJLIP@virtual_cockpit_inst3d@
  00049	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN5@get_comanc:

; 978  : 
; 979  : 	switch (mode)

  0004e	8b 45 08	 mov	 eax, DWORD PTR _mode$[ebp]
  00051	89 85 74 ff ff
	ff		 mov	 DWORD PTR tv74[ebp], eax
  00057	8b 8d 74 ff ff
	ff		 mov	 ecx, DWORD PTR tv74[ebp]
  0005d	83 e9 26	 sub	 ecx, 38			; 00000026H
  00060	89 8d 74 ff ff
	ff		 mov	 DWORD PTR tv74[ebp], ecx
  00066	83 bd 74 ff ff
	ff 03		 cmp	 DWORD PTR tv74[ebp], 3
  0006d	77 31		 ja	 SHORT $LN10@get_comanc
  0006f	8b 95 74 ff ff
	ff		 mov	 edx, DWORD PTR tv74[ebp]
  00075	ff 24 95 00 00
	00 00		 jmp	 DWORD PTR $LN20@get_comanc[edx*4]
$LN6@get_comanc:

; 980  : 	{
; 981  : 		////////////////////////////////////////
; 982  : 		case VIEW_MODE_VIRTUAL_COCKPIT_PILOT_LHS_DISPLAY:
; 983  : 		////////////////////////////////////////
; 984  : 		{
; 985  : 			index = OBJECT_3D_SUB_OBJECT_COCKPIT_VIEW_MFD_FL;

  0007c	c7 45 fc 93 00
	00 00		 mov	 DWORD PTR _index$[ebp], 147 ; 00000093H

; 986  : 
; 987  : 			break;

  00083	eb 2c		 jmp	 SHORT $LN2@get_comanc
$LN7@get_comanc:

; 988  : 		}
; 989  : 		////////////////////////////////////////
; 990  : 		case VIEW_MODE_VIRTUAL_COCKPIT_PILOT_RHS_DISPLAY:
; 991  : 		////////////////////////////////////////
; 992  : 		{
; 993  : 			index = OBJECT_3D_SUB_OBJECT_COCKPIT_VIEW_MFD_FR;

  00085	c7 45 fc 94 00
	00 00		 mov	 DWORD PTR _index$[ebp], 148 ; 00000094H

; 994  : 
; 995  : 			break;

  0008c	eb 23		 jmp	 SHORT $LN2@get_comanc
$LN8@get_comanc:

; 996  : 		}
; 997  : 		////////////////////////////////////////
; 998  : 		case VIEW_MODE_VIRTUAL_COCKPIT_CO_PILOT_LHS_DISPLAY:
; 999  : 		////////////////////////////////////////
; 1000 : 		{
; 1001 : 			index = OBJECT_3D_SUB_OBJECT_COCKPIT_VIEW_MFD_RL;

  0008e	c7 45 fc 95 00
	00 00		 mov	 DWORD PTR _index$[ebp], 149 ; 00000095H

; 1002 : 
; 1003 : 			break;

  00095	eb 1a		 jmp	 SHORT $LN2@get_comanc
$LN9@get_comanc:

; 1004 : 		}
; 1005 : 		////////////////////////////////////////
; 1006 : 		case VIEW_MODE_VIRTUAL_COCKPIT_CO_PILOT_RHS_DISPLAY:
; 1007 : 		////////////////////////////////////////
; 1008 : 		{
; 1009 : 			index = OBJECT_3D_SUB_OBJECT_COCKPIT_VIEW_MFD_RR;

  00097	c7 45 fc 96 00
	00 00		 mov	 DWORD PTR _index$[ebp], 150 ; 00000096H

; 1010 : 
; 1011 : 			break;

  0009e	eb 11		 jmp	 SHORT $LN2@get_comanc
$LN10@get_comanc:

; 1012 : 		}
; 1013 : 		////////////////////////////////////////
; 1014 : 		default:
; 1015 : 		////////////////////////////////////////
; 1016 : 		{
; 1017 : 			debug_fatal ("Invalid view mode = %d", mode);

  000a0	8b 45 08	 mov	 eax, DWORD PTR _mode$[ebp]
  000a3	50		 push	 eax
  000a4	68 00 00 00 00	 push	 OFFSET ??_C@_0BH@KFJLEDAI@Invalid?5view?5mode?5?$DN?5?$CFd@
  000a9	e8 00 00 00 00	 call	 ?debug_fatal@@YAXPBDZZ	; debug_fatal
  000ae	83 c4 08	 add	 esp, 8
$LN2@get_comanc:

; 1018 : 
; 1019 : 			break;
; 1020 : 		}
; 1021 : 	}
; 1022 : 
; 1023 : 	virtual_cockpit_inst3d->vp.x = 0.0;

  000b1	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  000b6	0f 57 c0	 xorps	 xmm0, xmm0
  000b9	f3 0f 11 40 08	 movss	 DWORD PTR [eax+8], xmm0

; 1024 : 	virtual_cockpit_inst3d->vp.y = 0.0;

  000be	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  000c3	0f 57 c0	 xorps	 xmm0, xmm0
  000c6	f3 0f 11 40 0c	 movss	 DWORD PTR [eax+12], xmm0

; 1025 : 	virtual_cockpit_inst3d->vp.z = 0.0;

  000cb	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  000d0	0f 57 c0	 xorps	 xmm0, xmm0
  000d3	f3 0f 11 40 10	 movss	 DWORD PTR [eax+16], xmm0

; 1026 : 
; 1027 : 	////////////////////////////////////////
; 1028 : 	//
; 1029 : 
; 1030 : 	#if DEBUG_MODULE_FINE_DISPLAY_CAMERA_POSITION_ADJUSTMENT
; 1031 : 
; 1032 : 	get_identity_matrix3x3 (virtual_cockpit_inst3d->vp.attitude);
; 1033 : 
; 1034 : 	#else
; 1035 : 
; 1036 : 	get_local_entity_attitude_matrix (get_gunship_entity (), virtual_cockpit_inst3d->vp.attitude);

  000d8	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?gunship_entity@@3PAUENTITY@@A, 0 ; gunship_entity
  000df	74 0f		 je	 SHORT $LN14@get_comanc
  000e1	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gunship_entity@@3PAUENTITY@@A ; gunship_entity
  000e6	8b 08		 mov	 ecx, DWORD PTR [eax]
  000e8	89 8d 74 ff ff
	ff		 mov	 DWORD PTR tv91[ebp], ecx
  000ee	eb 24		 jmp	 SHORT $LN15@get_comanc
$LN14@get_comanc:
  000f0	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??get_comanche_display_viewpoint@@YGXW4VIEW_MODES@@@Z@4JA
  000f6	83 c2 47	 add	 edx, 71			; 00000047H
  000f9	52		 push	 edx
  000fa	68 00 00 00 00	 push	 OFFSET ??_C@_0FC@DCAAIOAH@c?3?2users?2nhv90?2projects?2eech?2ap@
  000ff	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  00104	50		 push	 eax
  00105	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  0010a	c7 85 74 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv91[ebp], 0
$LN15@get_comanc:
  00114	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  0011a	83 c1 14	 add	 ecx, 20			; 00000014H
  0011d	51		 push	 ecx
  0011e	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gunship_entity@@3PAUENTITY@@A ; gunship_entity
  00124	52		 push	 edx
  00125	8b 85 74 ff ff
	ff		 mov	 eax, DWORD PTR tv91[ebp]
  0012b	8b 0c 85 00 00
	00 00		 mov	 ecx, DWORD PTR ?fn_get_local_entity_attitude_matrix@@3PAP6GXPAUENTITY@@QAY02M@ZA[eax*4]
  00132	ff d1		 call	 ecx

; 1037 : 
; 1038 : 	#endif
; 1039 : 
; 1040 : 	//
; 1041 : 	////////////////////////////////////////
; 1042 : 
; 1043 : 	search.search_depth = 0;

  00134	c7 45 cc 00 00
	00 00		 mov	 DWORD PTR _search$[ebp+8], 0

; 1044 : 	search.search_object = virtual_cockpit_inst3d;

  0013b	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  00140	89 45 c4	 mov	 DWORD PTR _search$[ebp], eax

; 1045 : 	search.sub_object_index = index;

  00143	8b 45 fc	 mov	 eax, DWORD PTR _index$[ebp]
  00146	89 45 d0	 mov	 DWORD PTR _search$[ebp+12], eax

; 1046 : 
; 1047 : 	if (find_object_3d_sub_object (&search) == SUB_OBJECT_SEARCH_RESULT_OBJECT_FOUND)

  00149	8d 45 c4	 lea	 eax, DWORD PTR _search$[ebp]
  0014c	50		 push	 eax
  0014d	e8 00 00 00 00	 call	 ?find_object_3d_sub_object@@YG?AW4SUB_OBJECT_SEARCH_RESULT_TYPES@@PAUOBJECT_3D_SUB_OBJECT_SEARCH_DATA@@@Z ; find_object_3d_sub_object
  00152	83 f8 01	 cmp	 eax, 1
  00155	75 10		 jne	 SHORT $LN11@get_comanc

; 1048 : 	{
; 1049 : 		get_3d_sub_object_world_viewpoint (search.result_sub_object, &main_vp);

  00157	68 00 00 00 00	 push	 OFFSET ?main_vp@@3UVIEWPOINT@@A ; main_vp
  0015c	8b 45 c8	 mov	 eax, DWORD PTR _search$[ebp+4]
  0015f	50		 push	 eax
  00160	e8 00 00 00 00	 call	 ?get_3d_sub_object_world_viewpoint@@YGXPAUOBJECT_3D_SUB_INSTANCE@@PAUVIEWPOINT@@@Z ; get_3d_sub_object_world_viewpoint

; 1050 : 	}
; 1051 : 	else

  00165	eb 0d		 jmp	 SHORT $LN12@get_comanc
$LN11@get_comanc:

; 1052 : 	{
; 1053 : 		debug_fatal ("Failed to locate display viewpoint in virtual cockpit");

  00167	68 00 00 00 00	 push	 OFFSET ??_C@_0DG@OCDOFANO@Failed?5to?5locate?5display?5viewpo@
  0016c	e8 00 00 00 00	 call	 ?debug_fatal@@YAXPBDZZ	; debug_fatal
  00171	83 c4 04	 add	 esp, 4
$LN12@get_comanc:

; 1054 : 	}
; 1055 : 
; 1056 : 	position.x = -main_vp.x;

  00174	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR ?main_vp@@3UVIEWPOINT@@A
  0017c	0f 57 05 00 00
	00 00		 xorps	 xmm0, DWORD PTR __xmm@80000000800000008000000080000000
  00183	f3 0f 11 45 b8	 movss	 DWORD PTR _position$[ebp], xmm0

; 1057 : 	position.y = -main_vp.y;

  00188	f3 0f 10 05 04
	00 00 00	 movss	 xmm0, DWORD PTR ?main_vp@@3UVIEWPOINT@@A+4
  00190	0f 57 05 00 00
	00 00		 xorps	 xmm0, DWORD PTR __xmm@80000000800000008000000080000000
  00197	f3 0f 11 45 bc	 movss	 DWORD PTR _position$[ebp+4], xmm0

; 1058 : 	position.z = -main_vp.z;

  0019c	f3 0f 10 05 08
	00 00 00	 movss	 xmm0, DWORD PTR ?main_vp@@3UVIEWPOINT@@A+8
  001a4	0f 57 05 00 00
	00 00		 xorps	 xmm0, DWORD PTR __xmm@80000000800000008000000080000000
  001ab	f3 0f 11 45 c0	 movss	 DWORD PTR _position$[ebp+8], xmm0

; 1059 : 
; 1060 : 	////////////////////////////////////////
; 1061 : 	//
; 1062 : 
; 1063 : 	#if DEBUG_MODULE_FINE_DISPLAY_CAMERA_POSITION_ADJUSTMENT
; 1064 : 	{
; 1065 : 		static float
; 1066 : 			z_offset = 0.0;
; 1067 : 
; 1068 : 		float
; 1069 : 			dx,
; 1070 : 			dy,
; 1071 : 			dz;
; 1072 : 
; 1073 : 		if (check_key (DIK_Q))
; 1074 : 		{
; 1075 : 			z_offset -= 0.0001;
; 1076 : 		}
; 1077 : 
; 1078 : 		if (check_key (DIK_A))
; 1079 : 		{
; 1080 : 			z_offset += 0.0001;
; 1081 : 		}
; 1082 : 
; 1083 : 		dx = main_vp.zv.x * z_offset;
; 1084 : 		dy = main_vp.zv.y * z_offset;
; 1085 : 		dz = main_vp.zv.z * z_offset;
; 1086 : 
; 1087 : 		position.x += dx;
; 1088 : 		position.y += dy;
; 1089 : 		position.z += dz;
; 1090 : 
; 1091 : 		debug_filtered_log ("offset=%.6f x=%.6f y=%.6f z=%.6f", z_offset, position.x, position.y, position.z);
; 1092 : 	}
; 1093 : 	#endif
; 1094 : 
; 1095 : 	//
; 1096 : 	////////////////////////////////////////
; 1097 : 
; 1098 : 	multiply_transpose_matrix3x3_vec3d (&virtual_cockpit_inst3d->vp.position, main_vp.attitude, &position);

  001b0	8d 45 b8	 lea	 eax, DWORD PTR _position$[ebp]
  001b3	50		 push	 eax
  001b4	68 0c 00 00 00	 push	 OFFSET ?main_vp@@3UVIEWPOINT@@A+12
  001b9	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  001bf	83 c1 08	 add	 ecx, 8
  001c2	51		 push	 ecx
  001c3	e8 00 00 00 00	 call	 ?multiply_transpose_matrix3x3_vec3d@@YGXPAUVEC3D@@QAY02$$CBMPBU1@@Z ; multiply_transpose_matrix3x3_vec3d

; 1099 : 
; 1100 : 	get_local_entity_vec3d (get_gunship_entity (), VEC3D_TYPE_POSITION, &position);

  001c8	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?gunship_entity@@3PAUENTITY@@A, 0 ; gunship_entity
  001cf	74 0f		 je	 SHORT $LN16@get_comanc
  001d1	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gunship_entity@@3PAUENTITY@@A ; gunship_entity
  001d6	8b 08		 mov	 ecx, DWORD PTR [eax]
  001d8	89 8d 74 ff ff
	ff		 mov	 DWORD PTR tv150[ebp], ecx
  001de	eb 27		 jmp	 SHORT $LN17@get_comanc
$LN16@get_comanc:
  001e0	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??get_comanche_display_viewpoint@@YGXW4VIEW_MODES@@@Z@4JA
  001e6	81 c2 87 00 00
	00		 add	 edx, 135		; 00000087H
  001ec	52		 push	 edx
  001ed	68 00 00 00 00	 push	 OFFSET ??_C@_0FC@DCAAIOAH@c?3?2users?2nhv90?2projects?2eech?2ap@
  001f2	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  001f7	50		 push	 eax
  001f8	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  001fd	c7 85 74 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv150[ebp], 0
$LN17@get_comanc:
  00207	b9 01 00 00 00	 mov	 ecx, 1
  0020c	85 c9		 test	 ecx, ecx
  0020e	74 0c		 je	 SHORT $LN18@get_comanc
  00210	c7 85 70 ff ff
	ff 08 00 00 00	 mov	 DWORD PTR tv158[ebp], 8
  0021a	eb 27		 jmp	 SHORT $LN19@get_comanc
$LN18@get_comanc:
  0021c	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??get_comanche_display_viewpoint@@YGXW4VIEW_MODES@@@Z@4JA
  00222	81 c2 87 00 00
	00		 add	 edx, 135		; 00000087H
  00228	52		 push	 edx
  00229	68 00 00 00 00	 push	 OFFSET ??_C@_0FC@DCAAIOAH@c?3?2users?2nhv90?2projects?2eech?2ap@
  0022e	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_vec3d_type_message@@3PBDB ; overload_invalid_vec3d_type_message
  00233	50		 push	 eax
  00234	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00239	c7 85 70 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv158[ebp], 0
$LN19@get_comanc:
  00243	8d 4d b8	 lea	 ecx, DWORD PTR _position$[ebp]
  00246	51		 push	 ecx
  00247	6a 08		 push	 8
  00249	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gunship_entity@@3PAUENTITY@@A ; gunship_entity
  0024f	52		 push	 edx
  00250	6b 85 74 ff ff
	ff 60		 imul	 eax, DWORD PTR tv150[ebp], 96
  00257	8b 8d 70 ff ff
	ff		 mov	 ecx, DWORD PTR tv158[ebp]
  0025d	8b 94 88 00 00
	00 00		 mov	 edx, DWORD PTR ?fn_get_local_entity_vec3d@@3PAY0BI@P6GXPAUENTITY@@W4VEC3D_TYPES@@PAUVEC3D@@@ZA[eax+ecx*4]
  00264	ff d2		 call	 edx

; 1101 : 
; 1102 : 	main_vp.x += position.x;

  00266	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR ?main_vp@@3UVIEWPOINT@@A
  0026e	f3 0f 58 45 b8	 addss	 xmm0, DWORD PTR _position$[ebp]
  00273	f3 0f 11 05 00
	00 00 00	 movss	 DWORD PTR ?main_vp@@3UVIEWPOINT@@A, xmm0

; 1103 : 	main_vp.y += position.y;

  0027b	f3 0f 10 05 04
	00 00 00	 movss	 xmm0, DWORD PTR ?main_vp@@3UVIEWPOINT@@A+4
  00283	f3 0f 58 45 bc	 addss	 xmm0, DWORD PTR _position$[ebp+4]
  00288	f3 0f 11 05 04
	00 00 00	 movss	 DWORD PTR ?main_vp@@3UVIEWPOINT@@A+4, xmm0

; 1104 : 	main_vp.z += position.z;

  00290	f3 0f 10 05 08
	00 00 00	 movss	 xmm0, DWORD PTR ?main_vp@@3UVIEWPOINT@@A+8
  00298	f3 0f 58 45 c0	 addss	 xmm0, DWORD PTR _position$[ebp+8]
  0029d	f3 0f 11 05 08
	00 00 00	 movss	 DWORD PTR ?main_vp@@3UVIEWPOINT@@A+8, xmm0

; 1105 : }

  002a5	5f		 pop	 edi
  002a6	5e		 pop	 esi
  002a7	5b		 pop	 ebx
  002a8	8b e5		 mov	 esp, ebp
  002aa	5d		 pop	 ebp
  002ab	c2 04 00	 ret	 4
  002ae	66 90		 npad	 2
$LN20@get_comanc:
  002b0	00 00 00 00	 DD	 $LN6@get_comanc
  002b4	00 00 00 00	 DD	 $LN7@get_comanc
  002b8	00 00 00 00	 DD	 $LN8@get_comanc
  002bc	00 00 00 00	 DD	 $LN9@get_comanc
?get_comanche_display_viewpoint@@YGXW4VIEW_MODES@@@Z ENDP ; get_comanche_display_viewpoint
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\gunships\cockpits\comanche\cm_vckpt.c
;	COMDAT ?get_comanche_crew_viewpoint@@YGXXZ
_TEXT	SEGMENT
tv309 = -296						; size = 8
tv172 = -296						; size = 4
tv76 = -296						; size = 4
tv164 = -292						; size = 4
tv149 = -292						; size = 4
tv69 = -292						; size = 4
_shiftWorld$1 = -224					; size = 12
_shiftVP$2 = -212					; size = 12
_invAttitude$3 = -200					; size = 36
_head_pitch_datum$ = -164				; size = 4
_vp$ = -160						; size = 48
_search_viewpoint$ = -112				; size = 56
_search_head$ = -56					; size = 56
?get_comanche_crew_viewpoint@@YGXXZ PROC		; get_comanche_crew_viewpoint, COMDAT

; 837  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec 28 01 00
	00		 sub	 esp, 296		; 00000128H
  00009	53		 push	 ebx
  0000a	56		 push	 esi
  0000b	57		 push	 edi

; 838  : 	object_3d_sub_object_search_data
; 839  : 		search_head,
; 840  : 		search_viewpoint;
; 841  : 
; 842  : 	viewpoint
; 843  : 		vp;
; 844  : 
; 845  : 	float
; 846  : 		head_pitch_datum;
; 847  : 
; 848  : 	//
; 849  : 	// select head
; 850  : 	//
; 851  : 
; 852  : 	if (get_local_entity_int_value (get_pilot_entity (), INT_TYPE_CREW_ROLE) == CREW_ROLE_PILOT)

  0000c	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?pilot_entity@@3PAUENTITY@@A, 0 ; pilot_entity
  00013	74 0f		 je	 SHORT $LN13@get_comanc
  00015	a1 00 00 00 00	 mov	 eax, DWORD PTR ?pilot_entity@@3PAUENTITY@@A ; pilot_entity
  0001a	8b 08		 mov	 ecx, DWORD PTR [eax]
  0001c	89 8d dc fe ff
	ff		 mov	 DWORD PTR tv69[ebp], ecx
  00022	eb 20		 jmp	 SHORT $LN14@get_comanc
$LN13@get_comanc:
  00024	68 54 03 00 00	 push	 852			; 00000354H
  00029	68 00 00 00 00	 push	 OFFSET ??_C@_0FC@DCAAIOAH@c?3?2users?2nhv90?2projects?2eech?2ap@
  0002e	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  00034	52		 push	 edx
  00035	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  0003a	c7 85 dc fe ff
	ff 00 00 00 00	 mov	 DWORD PTR tv69[ebp], 0
$LN14@get_comanc:
  00044	b8 01 00 00 00	 mov	 eax, 1
  00049	85 c0		 test	 eax, eax
  0004b	74 0c		 je	 SHORT $LN15@get_comanc
  0004d	c7 85 d8 fe ff
	ff 23 00 00 00	 mov	 DWORD PTR tv76[ebp], 35	; 00000023H
  00057	eb 20		 jmp	 SHORT $LN16@get_comanc
$LN15@get_comanc:
  00059	68 54 03 00 00	 push	 852			; 00000354H
  0005e	68 00 00 00 00	 push	 OFFSET ??_C@_0FC@DCAAIOAH@c?3?2users?2nhv90?2projects?2eech?2ap@
  00063	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?overload_invalid_int_type_message@@3PBDB ; overload_invalid_int_type_message
  00069	51		 push	 ecx
  0006a	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  0006f	c7 85 d8 fe ff
	ff 00 00 00 00	 mov	 DWORD PTR tv76[ebp], 0
$LN16@get_comanc:
  00079	6a 23		 push	 35			; 00000023H
  0007b	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?pilot_entity@@3PAUENTITY@@A ; pilot_entity
  00081	52		 push	 edx
  00082	69 85 dc fe ff
	ff 5c 04 00 00	 imul	 eax, DWORD PTR tv69[ebp], 1116
  0008c	8b 8d d8 fe ff
	ff		 mov	 ecx, DWORD PTR tv76[ebp]
  00092	8b 94 88 00 00
	00 00		 mov	 edx, DWORD PTR ?fn_get_local_entity_int_value@@3PAY0BBH@P6GHPAUENTITY@@W4INT_TYPES@@@ZA[eax+ecx*4]
  00099	ff d2		 call	 edx
  0009b	85 c0		 test	 eax, eax
  0009d	75 20		 jne	 SHORT $LN2@get_comanc

; 853  : 	{
; 854  : 		search_head.sub_object_index = OBJECT_3D_SUB_OBJECT_PILOT_HEAD;

  0009f	c7 45 d4 bf 00
	00 00		 mov	 DWORD PTR _search_head$[ebp+12], 191 ; 000000bfH

; 855  : 
; 856  : 		search_viewpoint.sub_object_index = OBJECT_3D_SUB_OBJECT_PILOT_VIEWPOINT;

  000a6	c7 45 9c c0 00
	00 00		 mov	 DWORD PTR _search_viewpoint$[ebp+12], 192 ; 000000c0H

; 857  : 
; 858  : 		head_pitch_datum = pilot_head_pitch_datum;

  000ad	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR ?pilot_head_pitch_datum@@3MA
  000b5	f3 0f 11 85 5c
	ff ff ff	 movss	 DWORD PTR _head_pitch_datum$[ebp], xmm0

; 859  : 	}
; 860  : 	else

  000bd	eb 1e		 jmp	 SHORT $LN3@get_comanc
$LN2@get_comanc:

; 861  : 	{
; 862  : 		search_head.sub_object_index = OBJECT_3D_SUB_OBJECT_WSO_HEAD;

  000bf	c7 45 d4 ad 00
	00 00		 mov	 DWORD PTR _search_head$[ebp+12], 173 ; 000000adH

; 863  : 
; 864  : 		search_viewpoint.sub_object_index = OBJECT_3D_SUB_OBJECT_WSO_VIEWPOINT;

  000c6	c7 45 9c af 00
	00 00		 mov	 DWORD PTR _search_viewpoint$[ebp+12], 175 ; 000000afH

; 865  : 
; 866  : 		head_pitch_datum = co_pilot_head_pitch_datum;

  000cd	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR ?co_pilot_head_pitch_datum@@3MA
  000d5	f3 0f 11 85 5c
	ff ff ff	 movss	 DWORD PTR _head_pitch_datum$[ebp], xmm0
$LN3@get_comanc:

; 867  : 	}
; 868  : 
; 869  : 	//
; 870  : 	// rotate head
; 871  : 	//
; 872  : 
; 873  : 	search_head.search_depth = 0;

  000dd	c7 45 d0 00 00
	00 00		 mov	 DWORD PTR _search_head$[ebp+8], 0

; 874  : 	search_head.search_object = virtual_cockpit_inst3d;

  000e4	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  000e9	89 45 c8	 mov	 DWORD PTR _search_head$[ebp], eax

; 875  : 
; 876  : 	if (find_object_3d_sub_object (&search_head) == SUB_OBJECT_SEARCH_RESULT_OBJECT_FOUND)

  000ec	8d 45 c8	 lea	 eax, DWORD PTR _search_head$[ebp]
  000ef	50		 push	 eax
  000f0	e8 00 00 00 00	 call	 ?find_object_3d_sub_object@@YG?AW4SUB_OBJECT_SEARCH_RESULT_TYPES@@PAUOBJECT_3D_SUB_OBJECT_SEARCH_DATA@@@Z ; find_object_3d_sub_object
  000f5	83 f8 01	 cmp	 eax, 1
  000f8	0f 85 88 00 00
	00		 jne	 $LN4@get_comanc

; 877  : 	{
; 878  : 		search_head.result_sub_object->relative_heading = -pilot_head_heading;

  000fe	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR ?pilot_head_heading@@3MA
  00106	0f 57 05 00 00
	00 00		 xorps	 xmm0, DWORD PTR __xmm@80000000800000008000000080000000
  0010d	8b 45 cc	 mov	 eax, DWORD PTR _search_head$[ebp+4]
  00110	f3 0f 11 40 18	 movss	 DWORD PTR [eax+24], xmm0

; 879  : 		search_head.result_sub_object->relative_pitch = head_pitch_datum - pilot_head_pitch;

  00115	f3 0f 10 85 5c
	ff ff ff	 movss	 xmm0, DWORD PTR _head_pitch_datum$[ebp]
  0011d	f3 0f 5c 05 00
	00 00 00	 subss	 xmm0, DWORD PTR ?pilot_head_pitch@@3MA
  00125	8b 45 cc	 mov	 eax, DWORD PTR _search_head$[ebp+4]
  00128	f3 0f 11 40 1c	 movss	 DWORD PTR [eax+28], xmm0

; 880  : 
; 881  : 		if ((command_line_TIR_6DOF == TRUE)&&(query_TIR_active() == TRUE))	// Retro 6Feb2005

  0012d	83 3d 00 00 00
	00 01		 cmp	 DWORD PTR ?command_line_TIR_6DOF@@3HA, 1 ; command_line_TIR_6DOF
  00134	75 43		 jne	 SHORT $LN6@get_comanc
  00136	e8 00 00 00 00	 call	 ?query_TIR_active@@YAHXZ ; query_TIR_active
  0013b	83 f8 01	 cmp	 eax, 1
  0013e	75 39		 jne	 SHORT $LN6@get_comanc

; 882  : 			search_head.result_sub_object->relative_roll = TIR_GetRoll() / 16383. * PI / 2.;	// Retro 6Feb2005

  00140	e8 00 00 00 00	 call	 ?TIR_GetRoll@@YGMXZ	; TIR_GetRoll
  00145	dd 9d d8 fe ff
	ff		 fstp	 QWORD PTR tv309[ebp]
  0014b	f2 0f 10 85 d8
	fe ff ff	 movsd	 xmm0, QWORD PTR tv309[ebp]
  00153	f2 0f 5e 05 00
	00 00 00	 divsd	 xmm0, QWORD PTR __real@40cfff8000000000
  0015b	f2 0f 59 05 00
	00 00 00	 mulsd	 xmm0, QWORD PTR __real@400921fb60000000
  00163	f2 0f 5e 05 00
	00 00 00	 divsd	 xmm0, QWORD PTR __real@4000000000000000
  0016b	f2 0f 5a c0	 cvtsd2ss xmm0, xmm0
  0016f	8b 45 cc	 mov	 eax, DWORD PTR _search_head$[ebp+4]
  00172	f3 0f 11 40 20	 movss	 DWORD PTR [eax+32], xmm0

; 883  : 		else

  00177	eb 0b		 jmp	 SHORT $LN7@get_comanc
$LN6@get_comanc:

; 884  : 			search_head.result_sub_object->relative_roll = 0.0;

  00179	8b 45 cc	 mov	 eax, DWORD PTR _search_head$[ebp+4]
  0017c	0f 57 c0	 xorps	 xmm0, xmm0
  0017f	f3 0f 11 40 20	 movss	 DWORD PTR [eax+32], xmm0
$LN7@get_comanc:

; 885  : 	}
; 886  : 	else

  00184	eb 0d		 jmp	 SHORT $LN5@get_comanc
$LN4@get_comanc:

; 887  : 	{
; 888  : 		debug_fatal ("Failed to locate crew's head in virtual cockpit");

  00186	68 00 00 00 00	 push	 OFFSET ??_C@_0DA@EHJMLOA@Failed?5to?5locate?5crew?8s?5head?5in@
  0018b	e8 00 00 00 00	 call	 ?debug_fatal@@YAXPBDZZ	; debug_fatal
  00190	83 c4 04	 add	 esp, 4
$LN5@get_comanc:

; 889  : 	}
; 890  : 
; 891  : 	//
; 892  : 	// get viewpoint (avoid jitter)
; 893  : 	//
; 894  : 
; 895  : 	search_viewpoint.search_object = virtual_cockpit_inst3d;

  00193	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  00198	89 45 90	 mov	 DWORD PTR _search_viewpoint$[ebp], eax

; 896  : 	search_viewpoint.search_depth = 0;

  0019b	c7 45 98 00 00
	00 00		 mov	 DWORD PTR _search_viewpoint$[ebp+8], 0

; 897  : 
; 898  : 	if (find_object_3d_sub_object (&search_viewpoint) == SUB_OBJECT_SEARCH_RESULT_OBJECT_FOUND)

  001a2	8d 45 90	 lea	 eax, DWORD PTR _search_viewpoint$[ebp]
  001a5	50		 push	 eax
  001a6	e8 00 00 00 00	 call	 ?find_object_3d_sub_object@@YG?AW4SUB_OBJECT_SEARCH_RESULT_TYPES@@PAUOBJECT_3D_SUB_OBJECT_SEARCH_DATA@@@Z ; find_object_3d_sub_object
  001ab	83 f8 01	 cmp	 eax, 1
  001ae	0f 85 16 03 00
	00		 jne	 $LN8@get_comanc

; 899  : 	{
; 900  : 		virtual_cockpit_inst3d->vp.x = 0.0;

  001b4	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  001b9	0f 57 c0	 xorps	 xmm0, xmm0
  001bc	f3 0f 11 40 08	 movss	 DWORD PTR [eax+8], xmm0

; 901  : 		virtual_cockpit_inst3d->vp.y = 0.0;

  001c1	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  001c6	0f 57 c0	 xorps	 xmm0, xmm0
  001c9	f3 0f 11 40 0c	 movss	 DWORD PTR [eax+12], xmm0

; 902  : 		virtual_cockpit_inst3d->vp.z = 0.0;

  001ce	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  001d3	0f 57 c0	 xorps	 xmm0, xmm0
  001d6	f3 0f 11 40 10	 movss	 DWORD PTR [eax+16], xmm0

; 903  : 
; 904  : 		get_local_entity_attitude_matrix (get_gunship_entity (), virtual_cockpit_inst3d->vp.attitude);

  001db	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?gunship_entity@@3PAUENTITY@@A, 0 ; gunship_entity
  001e2	74 0f		 je	 SHORT $LN17@get_comanc
  001e4	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gunship_entity@@3PAUENTITY@@A ; gunship_entity
  001e9	8b 08		 mov	 ecx, DWORD PTR [eax]
  001eb	89 8d dc fe ff
	ff		 mov	 DWORD PTR tv149[ebp], ecx
  001f1	eb 24		 jmp	 SHORT $LN18@get_comanc
$LN17@get_comanc:
  001f3	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??get_comanche_crew_viewpoint@@YGXXZ@4JA
  001f9	83 c2 43	 add	 edx, 67			; 00000043H
  001fc	52		 push	 edx
  001fd	68 00 00 00 00	 push	 OFFSET ??_C@_0FC@DCAAIOAH@c?3?2users?2nhv90?2projects?2eech?2ap@
  00202	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  00207	50		 push	 eax
  00208	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  0020d	c7 85 dc fe ff
	ff 00 00 00 00	 mov	 DWORD PTR tv149[ebp], 0
$LN18@get_comanc:
  00217	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  0021d	83 c1 14	 add	 ecx, 20			; 00000014H
  00220	51		 push	 ecx
  00221	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gunship_entity@@3PAUENTITY@@A ; gunship_entity
  00227	52		 push	 edx
  00228	8b 85 dc fe ff
	ff		 mov	 eax, DWORD PTR tv149[ebp]
  0022e	8b 0c 85 00 00
	00 00		 mov	 ecx, DWORD PTR ?fn_get_local_entity_attitude_matrix@@3PAP6GXPAUENTITY@@QAY02M@ZA[eax*4]
  00235	ff d1		 call	 ecx

; 905  : 
; 906  : 		get_3d_sub_object_world_viewpoint (search_viewpoint.result_sub_object, &vp);

  00237	8d 85 60 ff ff
	ff		 lea	 eax, DWORD PTR _vp$[ebp]
  0023d	50		 push	 eax
  0023e	8b 4d 94	 mov	 ecx, DWORD PTR _search_viewpoint$[ebp+4]
  00241	51		 push	 ecx
  00242	e8 00 00 00 00	 call	 ?get_3d_sub_object_world_viewpoint@@YGXPAUOBJECT_3D_SUB_INSTANCE@@PAUVIEWPOINT@@@Z ; get_3d_sub_object_world_viewpoint

; 907  : 
; 908  : 		get_local_entity_vec3d (get_gunship_entity (), VEC3D_TYPE_POSITION, &pilot_head_vp.position);

  00247	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?gunship_entity@@3PAUENTITY@@A, 0 ; gunship_entity
  0024e	74 0f		 je	 SHORT $LN19@get_comanc
  00250	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gunship_entity@@3PAUENTITY@@A ; gunship_entity
  00255	8b 08		 mov	 ecx, DWORD PTR [eax]
  00257	89 8d dc fe ff
	ff		 mov	 DWORD PTR tv164[ebp], ecx
  0025d	eb 24		 jmp	 SHORT $LN20@get_comanc
$LN19@get_comanc:
  0025f	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??get_comanche_crew_viewpoint@@YGXXZ@4JA
  00265	83 c2 47	 add	 edx, 71			; 00000047H
  00268	52		 push	 edx
  00269	68 00 00 00 00	 push	 OFFSET ??_C@_0FC@DCAAIOAH@c?3?2users?2nhv90?2projects?2eech?2ap@
  0026e	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  00273	50		 push	 eax
  00274	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00279	c7 85 dc fe ff
	ff 00 00 00 00	 mov	 DWORD PTR tv164[ebp], 0
$LN20@get_comanc:
  00283	b9 01 00 00 00	 mov	 ecx, 1
  00288	85 c9		 test	 ecx, ecx
  0028a	74 0c		 je	 SHORT $LN21@get_comanc
  0028c	c7 85 d8 fe ff
	ff 08 00 00 00	 mov	 DWORD PTR tv172[ebp], 8
  00296	eb 24		 jmp	 SHORT $LN22@get_comanc
$LN21@get_comanc:
  00298	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??get_comanche_crew_viewpoint@@YGXXZ@4JA
  0029e	83 c2 47	 add	 edx, 71			; 00000047H
  002a1	52		 push	 edx
  002a2	68 00 00 00 00	 push	 OFFSET ??_C@_0FC@DCAAIOAH@c?3?2users?2nhv90?2projects?2eech?2ap@
  002a7	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_vec3d_type_message@@3PBDB ; overload_invalid_vec3d_type_message
  002ac	50		 push	 eax
  002ad	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  002b2	c7 85 d8 fe ff
	ff 00 00 00 00	 mov	 DWORD PTR tv172[ebp], 0
$LN22@get_comanc:
  002bc	68 00 00 00 00	 push	 OFFSET ?pilot_head_vp@@3UVIEWPOINT@@A ; pilot_head_vp
  002c1	6a 08		 push	 8
  002c3	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gunship_entity@@3PAUENTITY@@A ; gunship_entity
  002c9	51		 push	 ecx
  002ca	6b 95 dc fe ff
	ff 60		 imul	 edx, DWORD PTR tv164[ebp], 96
  002d1	8b 85 d8 fe ff
	ff		 mov	 eax, DWORD PTR tv172[ebp]
  002d7	8b 8c 82 00 00
	00 00		 mov	 ecx, DWORD PTR ?fn_get_local_entity_vec3d@@3PAY0BI@P6GXPAUENTITY@@W4VEC3D_TYPES@@PAUVEC3D@@@ZA[edx+eax*4]
  002de	ff d1		 call	 ecx

; 909  : 
; 910  : 		pilot_head_vp.x += vp.x;

  002e0	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR ?pilot_head_vp@@3UVIEWPOINT@@A
  002e8	f3 0f 58 85 60
	ff ff ff	 addss	 xmm0, DWORD PTR _vp$[ebp]
  002f0	f3 0f 11 05 00
	00 00 00	 movss	 DWORD PTR ?pilot_head_vp@@3UVIEWPOINT@@A, xmm0

; 911  : 		pilot_head_vp.y += vp.y;

  002f8	f3 0f 10 05 04
	00 00 00	 movss	 xmm0, DWORD PTR ?pilot_head_vp@@3UVIEWPOINT@@A+4
  00300	f3 0f 58 85 64
	ff ff ff	 addss	 xmm0, DWORD PTR _vp$[ebp+4]
  00308	f3 0f 11 05 04
	00 00 00	 movss	 DWORD PTR ?pilot_head_vp@@3UVIEWPOINT@@A+4, xmm0

; 912  : 		pilot_head_vp.z += vp.z;

  00310	f3 0f 10 05 08
	00 00 00	 movss	 xmm0, DWORD PTR ?pilot_head_vp@@3UVIEWPOINT@@A+8
  00318	f3 0f 58 85 68
	ff ff ff	 addss	 xmm0, DWORD PTR _vp$[ebp+8]
  00320	f3 0f 11 05 08
	00 00 00	 movss	 DWORD PTR ?pilot_head_vp@@3UVIEWPOINT@@A+8, xmm0

; 913  : 
; 914  : 		if ((command_line_TIR_6DOF == TRUE)&&(query_TIR_active() == TRUE))	// Retro 6Feb2005 (whole block)

  00328	83 3d 00 00 00
	00 01		 cmp	 DWORD PTR ?command_line_TIR_6DOF@@3HA, 1 ; command_line_TIR_6DOF
  0032f	0f 85 b3 00 00
	00		 jne	 $LN10@get_comanc
  00335	e8 00 00 00 00	 call	 ?query_TIR_active@@YAHXZ ; query_TIR_active
  0033a	83 f8 01	 cmp	 eax, 1
  0033d	0f 85 a5 00 00
	00		 jne	 $LN10@get_comanc

; 915  : 		{
; 916  : 			matrix3x3 invAttitude;
; 917  : 			vec3d
; 918  : 				shiftVP, shiftWorld;
; 919  : 
; 920  : 			// First lets find out the displacement the user wants.. this is in the user's viewsystem coords !!
; 921  : 			// Now store this info in a temp vect3d..
; 922  : 			shiftVP.x = current_custom_cockpit_viewpoint.x;

  00343	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR ?current_custom_cockpit_viewpoint@@3UCOCKPIT_VIEW@@A
  0034b	f3 0f 11 85 2c
	ff ff ff	 movss	 DWORD PTR _shiftVP$2[ebp], xmm0

; 923  : 			shiftVP.y = current_custom_cockpit_viewpoint.y;

  00353	f3 0f 10 05 04
	00 00 00	 movss	 xmm0, DWORD PTR ?current_custom_cockpit_viewpoint@@3UCOCKPIT_VIEW@@A+4
  0035b	f3 0f 11 85 30
	ff ff ff	 movss	 DWORD PTR _shiftVP$2[ebp+4], xmm0

; 924  : 			shiftVP.z = current_custom_cockpit_viewpoint.z;

  00363	f3 0f 10 05 08
	00 00 00	 movss	 xmm0, DWORD PTR ?current_custom_cockpit_viewpoint@@3UCOCKPIT_VIEW@@A+8
  0036b	f3 0f 11 85 34
	ff ff ff	 movss	 DWORD PTR _shiftVP$2[ebp+8], xmm0

; 925  : 
; 926  : 			// Now we need to convert our vec3d into world coords.. for this we need the inverse of the viewpoint attitude matrix..
; 927  : 			get_inverse_matrix (invAttitude, vp.attitude);

  00373	8d 85 6c ff ff
	ff		 lea	 eax, DWORD PTR _vp$[ebp+12]
  00379	50		 push	 eax
  0037a	8d 8d 38 ff ff
	ff		 lea	 ecx, DWORD PTR _invAttitude$3[ebp]
  00380	51		 push	 ecx
  00381	e8 00 00 00 00	 call	 ?get_inverse_matrix@@YGXQAY02MQAY02$$CBM@Z ; get_inverse_matrix

; 928  : 			// And rotate ! Voila, the result vec3d is now in world coords..
; 929  : 			multiply_transpose_matrix3x3_vec3d (&shiftWorld, invAttitude, &shiftVP);

  00386	8d 85 2c ff ff
	ff		 lea	 eax, DWORD PTR _shiftVP$2[ebp]
  0038c	50		 push	 eax
  0038d	8d 8d 38 ff ff
	ff		 lea	 ecx, DWORD PTR _invAttitude$3[ebp]
  00393	51		 push	 ecx
  00394	8d 95 20 ff ff
	ff		 lea	 edx, DWORD PTR _shiftWorld$1[ebp]
  0039a	52		 push	 edx
  0039b	e8 00 00 00 00	 call	 ?multiply_transpose_matrix3x3_vec3d@@YGXPAUVEC3D@@QAY02$$CBMPBU1@@Z ; multiply_transpose_matrix3x3_vec3d

; 930  : 			// Now apply that displacement.. BUT ONLY TO THE HEAD !!
; 931  : 			pilot_head_vp.x -= shiftWorld.x;

  003a0	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR ?pilot_head_vp@@3UVIEWPOINT@@A
  003a8	f3 0f 5c 85 20
	ff ff ff	 subss	 xmm0, DWORD PTR _shiftWorld$1[ebp]
  003b0	f3 0f 11 05 00
	00 00 00	 movss	 DWORD PTR ?pilot_head_vp@@3UVIEWPOINT@@A, xmm0

; 932  : 			pilot_head_vp.y -= shiftWorld.y;

  003b8	f3 0f 10 05 04
	00 00 00	 movss	 xmm0, DWORD PTR ?pilot_head_vp@@3UVIEWPOINT@@A+4
  003c0	f3 0f 5c 85 24
	ff ff ff	 subss	 xmm0, DWORD PTR _shiftWorld$1[ebp+4]
  003c8	f3 0f 11 05 04
	00 00 00	 movss	 DWORD PTR ?pilot_head_vp@@3UVIEWPOINT@@A+4, xmm0

; 933  : 			pilot_head_vp.z -= shiftWorld.z;

  003d0	f3 0f 10 05 08
	00 00 00	 movss	 xmm0, DWORD PTR ?pilot_head_vp@@3UVIEWPOINT@@A+8
  003d8	f3 0f 5c 85 28
	ff ff ff	 subss	 xmm0, DWORD PTR _shiftWorld$1[ebp+8]
  003e0	f3 0f 11 05 08
	00 00 00	 movss	 DWORD PTR ?pilot_head_vp@@3UVIEWPOINT@@A+8, xmm0
$LN10@get_comanc:

; 934  : 		}
; 935  : 
; 936  : 		memcpy (pilot_head_vp.attitude, vp.attitude, sizeof (matrix3x3));

  003e8	6a 24		 push	 36			; 00000024H
  003ea	8d 85 6c ff ff
	ff		 lea	 eax, DWORD PTR _vp$[ebp+12]
  003f0	50		 push	 eax
  003f1	68 0c 00 00 00	 push	 OFFSET ?pilot_head_vp@@3UVIEWPOINT@@A+12
  003f6	e8 00 00 00 00	 call	 _memcpy
  003fb	83 c4 0c	 add	 esp, 12			; 0000000cH

; 937  : 
; 938  : 		vp.x = -vp.x;

  003fe	f3 0f 10 85 60
	ff ff ff	 movss	 xmm0, DWORD PTR _vp$[ebp]
  00406	0f 57 05 00 00
	00 00		 xorps	 xmm0, DWORD PTR __xmm@80000000800000008000000080000000
  0040d	f3 0f 11 85 60
	ff ff ff	 movss	 DWORD PTR _vp$[ebp], xmm0

; 939  : 		vp.y = -vp.y;

  00415	f3 0f 10 85 64
	ff ff ff	 movss	 xmm0, DWORD PTR _vp$[ebp+4]
  0041d	0f 57 05 00 00
	00 00		 xorps	 xmm0, DWORD PTR __xmm@80000000800000008000000080000000
  00424	f3 0f 11 85 64
	ff ff ff	 movss	 DWORD PTR _vp$[ebp+4], xmm0

; 940  : 		vp.z = -vp.z;

  0042c	f3 0f 10 85 68
	ff ff ff	 movss	 xmm0, DWORD PTR _vp$[ebp+8]
  00434	0f 57 05 00 00
	00 00		 xorps	 xmm0, DWORD PTR __xmm@80000000800000008000000080000000
  0043b	f3 0f 11 85 68
	ff ff ff	 movss	 DWORD PTR _vp$[ebp+8], xmm0

; 941  : 
; 942  : 		multiply_transpose_matrix3x3_vec3d (&virtual_cockpit_inst3d->vp.position, pilot_head_vp.attitude, &vp.position);

  00443	8d 85 60 ff ff
	ff		 lea	 eax, DWORD PTR _vp$[ebp]
  00449	50		 push	 eax
  0044a	68 0c 00 00 00	 push	 OFFSET ?pilot_head_vp@@3UVIEWPOINT@@A+12
  0044f	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  00455	83 c1 08	 add	 ecx, 8
  00458	51		 push	 ecx
  00459	e8 00 00 00 00	 call	 ?multiply_transpose_matrix3x3_vec3d@@YGXPAUVEC3D@@QAY02$$CBMPBU1@@Z ; multiply_transpose_matrix3x3_vec3d

; 943  : 
; 944  : 		if ((command_line_TIR_6DOF == TRUE)&&(query_TIR_active() == TRUE))	// Retro 6Feb2005 (whole block)

  0045e	83 3d 00 00 00
	00 01		 cmp	 DWORD PTR ?command_line_TIR_6DOF@@3HA, 1 ; command_line_TIR_6DOF
  00465	75 61		 jne	 SHORT $LN11@get_comanc
  00467	e8 00 00 00 00	 call	 ?query_TIR_active@@YAHXZ ; query_TIR_active
  0046c	83 f8 01	 cmp	 eax, 1
  0046f	75 57		 jne	 SHORT $LN11@get_comanc

; 945  : 		{
; 946  : 			// Now shift the viewpoint (AND the model) by the positive displacement.. puts the cockpit back were it belongs..
; 947  : 			// but the viewpoint (the head) is in another place.. fini
; 948  : 			virtual_cockpit_inst3d->vp.x += current_custom_cockpit_viewpoint.x;

  00471	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  00476	f3 0f 10 40 08	 movss	 xmm0, DWORD PTR [eax+8]
  0047b	f3 0f 58 05 00
	00 00 00	 addss	 xmm0, DWORD PTR ?current_custom_cockpit_viewpoint@@3UCOCKPIT_VIEW@@A
  00483	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  00489	f3 0f 11 41 08	 movss	 DWORD PTR [ecx+8], xmm0

; 949  : 			virtual_cockpit_inst3d->vp.y += current_custom_cockpit_viewpoint.y;

  0048e	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  00493	f3 0f 10 40 0c	 movss	 xmm0, DWORD PTR [eax+12]
  00498	f3 0f 58 05 04
	00 00 00	 addss	 xmm0, DWORD PTR ?current_custom_cockpit_viewpoint@@3UCOCKPIT_VIEW@@A+4
  004a0	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  004a6	f3 0f 11 41 0c	 movss	 DWORD PTR [ecx+12], xmm0

; 950  : 			virtual_cockpit_inst3d->vp.z += current_custom_cockpit_viewpoint.z;

  004ab	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  004b0	f3 0f 10 40 10	 movss	 xmm0, DWORD PTR [eax+16]
  004b5	f3 0f 58 05 08
	00 00 00	 addss	 xmm0, DWORD PTR ?current_custom_cockpit_viewpoint@@3UCOCKPIT_VIEW@@A+8
  004bd	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  004c3	f3 0f 11 41 10	 movss	 DWORD PTR [ecx+16], xmm0
$LN11@get_comanc:

; 951  : 		}
; 952  : 
; 953  : 	}
; 954  : 	else

  004c8	eb 0d		 jmp	 SHORT $LN9@get_comanc
$LN8@get_comanc:

; 955  : 	{
; 956  : 		debug_fatal ("Failed to locate crew's viewpoint in virtual cockpit");

  004ca	68 00 00 00 00	 push	 OFFSET ??_C@_0DF@PBABBPHF@Failed?5to?5locate?5crew?8s?5viewpoi@
  004cf	e8 00 00 00 00	 call	 ?debug_fatal@@YAXPBDZZ	; debug_fatal
  004d4	83 c4 04	 add	 esp, 4
$LN9@get_comanc:

; 957  : 	}
; 958  : }

  004d7	5f		 pop	 edi
  004d8	5e		 pop	 esi
  004d9	5b		 pop	 ebx
  004da	8b e5		 mov	 esp, ebp
  004dc	5d		 pop	 ebp
  004dd	c3		 ret	 0
?get_comanche_crew_viewpoint@@YGXXZ ENDP		; get_comanche_crew_viewpoint
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\gunships\cockpits\comanche\cm_vckpt.c
;	COMDAT ?draw_comanche_virtual_cockpit@@YGXXZ
_TEXT	SEGMENT
tv300 = -240						; size = 8
tv274 = -240						; size = 8
tv331 = -232						; size = 4
tv301 = -232						; size = 8
tv275 = -232						; size = 8
tv139 = -232						; size = 4
tv81 = -232						; size = 4
tv324 = -228						; size = 4
tv131 = -228						; size = 4
tv74 = -228						; size = 4
tv64 = -228						; size = 4
_m2$1 = -160						; size = 36
_m1$2 = -124						; size = 36
_direction$3 = -88					; size = 12
_cockpit_light$4 = -76					; size = 4
_display_backlight$5 = -72				; size = 4
_search$ = -68						; size = 56
_inst3d$ = -12						; size = 4
_theta$ = -8						; size = 4
_draw_main_rotors$ = -4					; size = 4
?draw_comanche_virtual_cockpit@@YGXXZ PROC		; draw_comanche_virtual_cockpit, COMDAT

; 533  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec f0 00 00
	00		 sub	 esp, 240		; 000000f0H
  00009	53		 push	 ebx
  0000a	56		 push	 esi
  0000b	57		 push	 edi

; 534  : 	int
; 535  : 		draw_main_rotors;
; 536  : 
; 537  : 	float
; 538  : 		theta;
; 539  : 
; 540  : 	object_3d_instance
; 541  : 		*inst3d;
; 542  : 
; 543  : 	object_3d_sub_object_search_data
; 544  : 		search;
; 545  : 
; 546  : 	switch (get_view_mode ())

  0000c	a1 00 00 00 00	 mov	 eax, DWORD PTR ?view_mode@@3W4VIEW_MODES@@A ; view_mode
  00011	89 85 1c ff ff
	ff		 mov	 DWORD PTR tv64[ebp], eax
  00017	83 bd 1c ff ff
	ff 23		 cmp	 DWORD PTR tv64[ebp], 35	; 00000023H
  0001e	74 14		 je	 SHORT $LN4@draw_coman
  00020	83 bd 1c ff ff
	ff 25		 cmp	 DWORD PTR tv64[ebp], 37	; 00000025H
  00027	7e 0d		 jle	 SHORT $LN5@draw_coman
  00029	83 bd 1c ff ff
	ff 29		 cmp	 DWORD PTR tv64[ebp], 41	; 00000029H
  00030	7e 02		 jle	 SHORT $LN4@draw_coman
  00032	eb 02		 jmp	 SHORT $LN5@draw_coman
$LN4@draw_coman:

; 547  : 	{
; 548  : 		case VIEW_MODE_VIRTUAL_COCKPIT_CREW:
; 549  : 		case VIEW_MODE_VIRTUAL_COCKPIT_PILOT_LHS_DISPLAY:
; 550  : 		case VIEW_MODE_VIRTUAL_COCKPIT_PILOT_RHS_DISPLAY:
; 551  : 		case VIEW_MODE_VIRTUAL_COCKPIT_CO_PILOT_LHS_DISPLAY:
; 552  : 		case VIEW_MODE_VIRTUAL_COCKPIT_CO_PILOT_RHS_DISPLAY:
; 553  : 		{
; 554  : 			break;

  00034	eb 0e		 jmp	 SHORT $LN2@draw_coman
$LN5@draw_coman:

; 555  : 		}
; 556  : 		default:
; 557  : 		{
; 558  : 			if (!get_global_draw_cockpit_graphics ())

  00036	83 3d b8 01 00
	00 00		 cmp	 DWORD PTR ?global_options@@3UGLOBAL_OPTIONS_DATA@@A+440, 0
  0003d	75 05		 jne	 SHORT $LN6@draw_coman

; 559  : 			{
; 560  : 				return;

  0003f	e9 63 0b 00 00	 jmp	 $LN1@draw_coman
$LN6@draw_coman:
$LN2@draw_coman:

; 561  : 			}
; 562  : 
; 563  : 			break;
; 564  : 		}
; 565  : 	}
; 566  : 
; 567  : 	//
; 568  : 	// lamps
; 569  : 	//
; 570  : 
; 571  : 	draw_comanche_virtual_cockpit_lamps ();

  00044	e8 00 00 00 00	 call	 ?draw_comanche_virtual_cockpit_lamps@@YGXXZ ; draw_comanche_virtual_cockpit_lamps

; 572  : 
; 573  : 	//
; 574  : 	// crew animation
; 575  : 	//
; 576  : 
; 577  : 	set_comanche_crew_head_positions ();

  00049	e8 00 00 00 00	 call	 ?set_comanche_crew_head_positions@@YGXXZ ; set_comanche_crew_head_positions

; 578  : 
; 579  : 	//
; 580  : 	// animate main rotors
; 581  : 	//
; 582  : 
; 583  : 	if (get_local_entity_int_value (get_gunship_entity (), INT_TYPE_MAIN_ROTOR_DAMAGED))

  0004e	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?gunship_entity@@3PAUENTITY@@A, 0 ; gunship_entity
  00055	74 0f		 je	 SHORT $LN28@draw_coman
  00057	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gunship_entity@@3PAUENTITY@@A ; gunship_entity
  0005c	8b 08		 mov	 ecx, DWORD PTR [eax]
  0005e	89 8d 1c ff ff
	ff		 mov	 DWORD PTR tv74[ebp], ecx
  00064	eb 20		 jmp	 SHORT $LN29@draw_coman
$LN28@draw_coman:
  00066	68 47 02 00 00	 push	 583			; 00000247H
  0006b	68 00 00 00 00	 push	 OFFSET ??_C@_0FC@DCAAIOAH@c?3?2users?2nhv90?2projects?2eech?2ap@
  00070	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  00076	52		 push	 edx
  00077	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  0007c	c7 85 1c ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv74[ebp], 0
$LN29@draw_coman:
  00086	b8 01 00 00 00	 mov	 eax, 1
  0008b	85 c0		 test	 eax, eax
  0008d	74 0c		 je	 SHORT $LN30@draw_coman
  0008f	c7 85 18 ff ff
	ff 81 00 00 00	 mov	 DWORD PTR tv81[ebp], 129 ; 00000081H
  00099	eb 20		 jmp	 SHORT $LN31@draw_coman
$LN30@draw_coman:
  0009b	68 47 02 00 00	 push	 583			; 00000247H
  000a0	68 00 00 00 00	 push	 OFFSET ??_C@_0FC@DCAAIOAH@c?3?2users?2nhv90?2projects?2eech?2ap@
  000a5	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?overload_invalid_int_type_message@@3PBDB ; overload_invalid_int_type_message
  000ab	51		 push	 ecx
  000ac	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  000b1	c7 85 18 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv81[ebp], 0
$LN31@draw_coman:
  000bb	68 81 00 00 00	 push	 129			; 00000081H
  000c0	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gunship_entity@@3PAUENTITY@@A ; gunship_entity
  000c6	52		 push	 edx
  000c7	69 85 1c ff ff
	ff 5c 04 00 00	 imul	 eax, DWORD PTR tv74[ebp], 1116
  000d1	8b 8d 18 ff ff
	ff		 mov	 ecx, DWORD PTR tv81[ebp]
  000d7	8b 94 88 00 00
	00 00		 mov	 edx, DWORD PTR ?fn_get_local_entity_int_value@@3PAY0BBH@P6GHPAUENTITY@@W4INT_TYPES@@@ZA[eax+ecx*4]
  000de	ff d2		 call	 edx
  000e0	85 c0		 test	 eax, eax
  000e2	74 0f		 je	 SHORT $LN7@draw_coman

; 584  : 	{
; 585  : 		animate_damaged_helicopter_main_rotors (get_gunship_entity (), TRUE);

  000e4	6a 01		 push	 1
  000e6	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gunship_entity@@3PAUENTITY@@A ; gunship_entity
  000eb	50		 push	 eax
  000ec	e8 00 00 00 00	 call	 ?animate_damaged_helicopter_main_rotors@@YGXPAUENTITY@@H@Z ; animate_damaged_helicopter_main_rotors

; 586  : 	}
; 587  : 	else

  000f1	eb 0f		 jmp	 SHORT $LN8@draw_coman
$LN7@draw_coman:

; 588  : 	{
; 589  : 		animate_helicopter_main_rotors (get_gunship_entity (), TRUE, FALSE);

  000f3	6a 00		 push	 0
  000f5	6a 01		 push	 1
  000f7	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gunship_entity@@3PAUENTITY@@A ; gunship_entity
  000fc	50		 push	 eax
  000fd	e8 00 00 00 00	 call	 ?animate_helicopter_main_rotors@@YGXPAUENTITY@@HH@Z ; animate_helicopter_main_rotors
$LN8@draw_coman:

; 590  : 	}
; 591  : 
; 592  : 	inst3d = (object_3d_instance *) get_local_entity_ptr_value (get_gunship_entity (), PTR_TYPE_INSTANCE_3D_OBJECT);

  00102	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?gunship_entity@@3PAUENTITY@@A, 0 ; gunship_entity
  00109	74 0f		 je	 SHORT $LN32@draw_coman
  0010b	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gunship_entity@@3PAUENTITY@@A ; gunship_entity
  00110	8b 08		 mov	 ecx, DWORD PTR [eax]
  00112	89 8d 1c ff ff
	ff		 mov	 DWORD PTR tv131[ebp], ecx
  00118	eb 24		 jmp	 SHORT $LN33@draw_coman
$LN32@draw_coman:
  0011a	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??draw_comanche_virtual_cockpit@@YGXXZ@4JA
  00120	83 c2 3b	 add	 edx, 59			; 0000003bH
  00123	52		 push	 edx
  00124	68 00 00 00 00	 push	 OFFSET ??_C@_0FC@DCAAIOAH@c?3?2users?2nhv90?2projects?2eech?2ap@
  00129	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  0012e	50		 push	 eax
  0012f	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00134	c7 85 1c ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv131[ebp], 0
$LN33@draw_coman:
  0013e	b9 01 00 00 00	 mov	 ecx, 1
  00143	85 c9		 test	 ecx, ecx
  00145	74 0c		 je	 SHORT $LN34@draw_coman
  00147	c7 85 18 ff ff
	ff 02 00 00 00	 mov	 DWORD PTR tv139[ebp], 2
  00151	eb 24		 jmp	 SHORT $LN35@draw_coman
$LN34@draw_coman:
  00153	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??draw_comanche_virtual_cockpit@@YGXXZ@4JA
  00159	83 c2 3b	 add	 edx, 59			; 0000003bH
  0015c	52		 push	 edx
  0015d	68 00 00 00 00	 push	 OFFSET ??_C@_0FC@DCAAIOAH@c?3?2users?2nhv90?2projects?2eech?2ap@
  00162	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_ptr_type_message@@3PBDB ; overload_invalid_ptr_type_message
  00167	50		 push	 eax
  00168	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  0016d	c7 85 18 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv139[ebp], 0
$LN35@draw_coman:
  00177	6a 02		 push	 2
  00179	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gunship_entity@@3PAUENTITY@@A ; gunship_entity
  0017f	51		 push	 ecx
  00180	6b 95 1c ff ff
	ff 50		 imul	 edx, DWORD PTR tv131[ebp], 80
  00187	8b 85 18 ff ff
	ff		 mov	 eax, DWORD PTR tv139[ebp]
  0018d	8b 8c 82 00 00
	00 00		 mov	 ecx, DWORD PTR ?fn_get_local_entity_ptr_value@@3PAY0BE@P6GPAXPAUENTITY@@W4PTR_TYPES@@@ZA[edx+eax*4]
  00194	ff d1		 call	 ecx
  00196	89 45 f4	 mov	 DWORD PTR _inst3d$[ebp], eax

; 593  : 
; 594  : 	theta = get_rotation_angle_of_helicopter_main_rotors (inst3d);

  00199	8b 45 f4	 mov	 eax, DWORD PTR _inst3d$[ebp]
  0019c	50		 push	 eax
  0019d	e8 00 00 00 00	 call	 ?get_rotation_angle_of_helicopter_main_rotors@@YGMPAUOBJECT_3D_INSTANCE@@@Z ; get_rotation_angle_of_helicopter_main_rotors
  001a2	d9 5d f8	 fstp	 DWORD PTR _theta$[ebp]

; 595  : 
; 596  : 	set_rotation_angle_of_helicopter_main_rotors (virtual_cockpit_inst3d, theta);

  001a5	51		 push	 ecx
  001a6	f3 0f 10 45 f8	 movss	 xmm0, DWORD PTR _theta$[ebp]
  001ab	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  001b0	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  001b5	50		 push	 eax
  001b6	e8 00 00 00 00	 call	 ?set_rotation_angle_of_helicopter_main_rotors@@YGXPAUOBJECT_3D_INSTANCE@@M@Z ; set_rotation_angle_of_helicopter_main_rotors

; 597  : 
; 598  : 	animate_helicopter_virtual_cockpit_main_rotors (get_gunship_entity (), virtual_cockpit_inst3d);

  001bb	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  001c0	50		 push	 eax
  001c1	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gunship_entity@@3PAUENTITY@@A ; gunship_entity
  001c7	51		 push	 ecx
  001c8	e8 00 00 00 00	 call	 ?animate_helicopter_virtual_cockpit_main_rotors@@YGXPAUENTITY@@PAUOBJECT_3D_INSTANCE@@@Z ; animate_helicopter_virtual_cockpit_main_rotors

; 599  : 
; 600  : 	draw_main_rotors = TRUE;

  001cd	c7 45 fc 01 00
	00 00		 mov	 DWORD PTR _draw_main_rotors$[ebp], 1

; 601  : 
; 602  : 	if (get_global_glass_cockpit ())

  001d4	83 3d 68 03 00
	00 00		 cmp	 DWORD PTR ?global_options@@3UGLOBAL_OPTIONS_DATA@@A+872, 0
  001db	74 09		 je	 SHORT $LN9@draw_coman

; 603  : 	{
; 604  : 		draw_main_rotors = FALSE;

  001dd	c7 45 fc 00 00
	00 00		 mov	 DWORD PTR _draw_main_rotors$[ebp], 0

; 605  : 	}
; 606  : 	else

  001e4	eb 28		 jmp	 SHORT $LN13@draw_coman
$LN9@draw_coman:

; 607  : 	{
; 608  : 		if (get_view_mode () != VIEW_MODE_VIRTUAL_COCKPIT_CREW)

  001e6	83 3d 00 00 00
	00 23		 cmp	 DWORD PTR ?view_mode@@3W4VIEW_MODES@@A, 35 ; view_mode, 00000023H
  001ed	74 1f		 je	 SHORT $LN13@draw_coman

; 609  : 		{
; 610  : 			if (get_helicopter_main_rotors_blurred (get_gunship_entity ()))

  001ef	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gunship_entity@@3PAUENTITY@@A ; gunship_entity
  001f4	50		 push	 eax
  001f5	e8 00 00 00 00	 call	 ?get_helicopter_main_rotors_blurred@@YGHPAUENTITY@@@Z ; get_helicopter_main_rotors_blurred
  001fa	85 c0		 test	 eax, eax
  001fc	74 10		 je	 SHORT $LN13@draw_coman

; 611  : 			{
; 612  : 				if (!get_global_blurred_main_rotors_visible_from_cockpit ())

  001fe	83 3d 1c 00 00
	00 00		 cmp	 DWORD PTR ?global_options@@3UGLOBAL_OPTIONS_DATA@@A+28, 0
  00205	75 07		 jne	 SHORT $LN13@draw_coman

; 613  : 				{
; 614  : 					draw_main_rotors = FALSE;

  00207	c7 45 fc 00 00
	00 00		 mov	 DWORD PTR _draw_main_rotors$[ebp], 0
$LN13@draw_coman:

; 615  : 				}
; 616  : 			}
; 617  : 		}
; 618  : 	}
; 619  : 
; 620  : 	search.search_depth = 0;

  0020e	c7 45 c4 00 00
	00 00		 mov	 DWORD PTR _search$[ebp+8], 0

; 621  : 	search.search_object = virtual_cockpit_inst3d;

  00215	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  0021a	89 45 bc	 mov	 DWORD PTR _search$[ebp], eax

; 622  : 	search.sub_object_index = OBJECT_3D_SUB_OBJECT_MAIN_ROTOR_SHAFT;

  0021d	c7 45 c8 02 00
	00 00		 mov	 DWORD PTR _search$[ebp+12], 2

; 623  : 
; 624  : 	if (find_object_3d_sub_object (&search) == SUB_OBJECT_SEARCH_RESULT_OBJECT_FOUND)

  00224	8d 45 bc	 lea	 eax, DWORD PTR _search$[ebp]
  00227	50		 push	 eax
  00228	e8 00 00 00 00	 call	 ?find_object_3d_sub_object@@YG?AW4SUB_OBJECT_SEARCH_RESULT_TYPES@@PAUOBJECT_3D_SUB_OBJECT_SEARCH_DATA@@@Z ; find_object_3d_sub_object
  0022d	83 f8 01	 cmp	 eax, 1
  00230	75 17		 jne	 SHORT $LN14@draw_coman

; 625  : 	{
; 626  : 		search.result_sub_object->visible_object = draw_main_rotors;

  00232	8b 45 fc	 mov	 eax, DWORD PTR _draw_main_rotors$[ebp]
  00235	83 e0 01	 and	 eax, 1
  00238	8b 4d c0	 mov	 ecx, DWORD PTR _search$[ebp+4]
  0023b	8b 51 08	 mov	 edx, DWORD PTR [ecx+8]
  0023e	83 e2 fe	 and	 edx, -2			; fffffffeH
  00241	0b d0		 or	 edx, eax
  00243	8b 45 c0	 mov	 eax, DWORD PTR _search$[ebp+4]
  00246	89 50 08	 mov	 DWORD PTR [eax+8], edx
$LN14@draw_coman:

; 627  : 	}
; 628  : 
; 629  : 	//
; 630  : 	// draw 3D scene
; 631  : 	//
; 632  : 
; 633  : 	set_3d_view_distances (main_3d_env, 10.0, 0.1, 1.0, 0.0);

  00249	51		 push	 ecx
  0024a	0f 57 c0	 xorps	 xmm0, xmm0
  0024d	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00252	51		 push	 ecx
  00253	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3f800000
  0025b	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00260	51		 push	 ecx
  00261	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3dcccccd
  00269	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  0026e	51		 push	 ecx
  0026f	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@41200000
  00277	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  0027c	a1 00 00 00 00	 mov	 eax, DWORD PTR ?main_3d_env@@3PAUENV_3D@@A ; main_3d_env
  00281	50		 push	 eax
  00282	e8 00 00 00 00	 call	 ?set_3d_view_distances@@YGXPAUENV_3D@@MMMM@Z ; set_3d_view_distances

; 634  : 
; 635  : 	realise_3d_clip_extents (main_3d_env);

  00287	a1 00 00 00 00	 mov	 eax, DWORD PTR ?main_3d_env@@3PAUENV_3D@@A ; main_3d_env
  0028c	50		 push	 eax
  0028d	e8 00 00 00 00	 call	 ?realise_3d_clip_extents@@YGXPAUENV_3D@@@Z ; realise_3d_clip_extents

; 636  : 
; 637  : 	recalculate_3d_environment_settings (main_3d_env);

  00292	a1 00 00 00 00	 mov	 eax, DWORD PTR ?main_3d_env@@3PAUENV_3D@@A ; main_3d_env
  00297	50		 push	 eax
  00298	e8 00 00 00 00	 call	 ?recalculate_3d_environment_settings@@YGXPAUENV_3D@@@Z ; recalculate_3d_environment_settings

; 638  : 
; 639  : 	clear_zbuffer_screen ();

  0029d	e8 00 00 00 00	 call	 ?clear_zbuffer_screen@@YGXXZ ; clear_zbuffer_screen

; 640  : 
; 641  : 	if (begin_3d_scene ())

  002a2	e8 00 00 00 00	 call	 ?begin_3d_scene@@YGHXZ	; begin_3d_scene
  002a7	85 c0		 test	 eax, eax
  002a9	0f 84 aa 08 00
	00		 je	 $LN22@draw_coman

; 642  : 	{
; 643  : 		//
; 644  : 		// light direction is in world coordinates
; 645  : 		//
; 646  : 
; 647  : 		light_3d_source
; 648  : 			*display_backlight,
; 649  : 			*cockpit_light;
; 650  : 
; 651  : 		vec3d
; 652  : 			direction;
; 653  : 
; 654  : 		matrix3x3
; 655  : 			m1,
; 656  : 			m2;
; 657  : 
; 658  : //VJ 050131 update on wideview mod, much better movement
; 659  : 		if (get_global_wide_cockpit () &&

  002af	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?wide_cockpit@@3HA, 0 ; wide_cockpit
  002b6	0f 84 36 01 00
	00		 je	 $LN16@draw_coman
  002bc	83 3d 00 00 00
	00 26		 cmp	 DWORD PTR ?view_mode@@3W4VIEW_MODES@@A, 38 ; view_mode, 00000026H
  002c3	0f 84 29 01 00
	00		 je	 $LN16@draw_coman
  002c9	83 3d 00 00 00
	00 27		 cmp	 DWORD PTR ?view_mode@@3W4VIEW_MODES@@A, 39 ; view_mode, 00000027H
  002d0	0f 84 1c 01 00
	00		 je	 $LN16@draw_coman
  002d6	83 3d 00 00 00
	00 28		 cmp	 DWORD PTR ?view_mode@@3W4VIEW_MODES@@A, 40 ; view_mode, 00000028H
  002dd	0f 84 0f 01 00
	00		 je	 $LN16@draw_coman
  002e3	83 3d 00 00 00
	00 29		 cmp	 DWORD PTR ?view_mode@@3W4VIEW_MODES@@A, 41 ; view_mode, 00000029H
  002ea	0f 84 02 01 00
	00		 je	 $LN16@draw_coman

; 660  : 			( get_view_mode () != VIEW_MODE_VIRTUAL_COCKPIT_PILOT_LHS_DISPLAY &&
; 661  : 				get_view_mode () != VIEW_MODE_VIRTUAL_COCKPIT_PILOT_RHS_DISPLAY &&
; 662  : 				get_view_mode () != VIEW_MODE_VIRTUAL_COCKPIT_CO_PILOT_LHS_DISPLAY &&
; 663  : 				get_view_mode () != VIEW_MODE_VIRTUAL_COCKPIT_CO_PILOT_RHS_DISPLAY )
; 664  : 			)
; 665  : 		{
; 666  : 				get_comanche_crew_viewpoint ();

  002f0	e8 00 00 00 00	 call	 ?get_comanche_crew_viewpoint@@YGXXZ ; get_comanche_crew_viewpoint

; 667  : 
; 668  : 				virtual_cockpit_inst3d->vp.x += wide_cockpit_position[wide_cockpit_nr].c.x;

  002f5	6b 05 00 00 00
	00 24		 imul	 eax, DWORD PTR ?wide_cockpit_nr@@3HA, 36 ; wide_cockpit_nr
  002fc	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  00302	f3 0f 10 41 08	 movss	 xmm0, DWORD PTR [ecx+8]
  00307	f3 0f 58 80 14
	00 00 00	 addss	 xmm0, DWORD PTR ?wide_cockpit_position@@3PAUCOCKPIT_POSITION@@A[eax+20]
  0030f	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  00315	f3 0f 11 42 08	 movss	 DWORD PTR [edx+8], xmm0

; 669  : 				virtual_cockpit_inst3d->vp.y += wide_cockpit_position[wide_cockpit_nr].c.y;

  0031a	6b 05 00 00 00
	00 24		 imul	 eax, DWORD PTR ?wide_cockpit_nr@@3HA, 36 ; wide_cockpit_nr
  00321	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  00327	f3 0f 10 41 0c	 movss	 xmm0, DWORD PTR [ecx+12]
  0032c	f3 0f 58 80 18
	00 00 00	 addss	 xmm0, DWORD PTR ?wide_cockpit_position@@3PAUCOCKPIT_POSITION@@A[eax+24]
  00334	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  0033a	f3 0f 11 42 0c	 movss	 DWORD PTR [edx+12], xmm0

; 670  : 				virtual_cockpit_inst3d->vp.z += wide_cockpit_position[wide_cockpit_nr].c.z;

  0033f	6b 05 00 00 00
	00 24		 imul	 eax, DWORD PTR ?wide_cockpit_nr@@3HA, 36 ; wide_cockpit_nr
  00346	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  0034c	f3 0f 10 41 10	 movss	 xmm0, DWORD PTR [ecx+16]
  00351	f3 0f 58 80 1c
	00 00 00	 addss	 xmm0, DWORD PTR ?wide_cockpit_position@@3PAUCOCKPIT_POSITION@@A[eax+28]
  00359	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  0035f	f3 0f 11 42 10	 movss	 DWORD PTR [edx+16], xmm0

; 671  : 
; 672  : 				//ataribaby 27/12/2008
; 673  : 				//virtual_cockpit_inst3d->vp.x += bound(current_flight_dynamics->model_acceleration_vector.x * ONE_OVER_G, -3.0, 3.0) * 0.025 * command_line_g_force_head_movment_modifier;
; 674  : 				//virtual_cockpit_inst3d->vp.y += bound(current_flight_dynamics->g_force.value - 1.0, -1.5, 5.0) * 0.025 * command_line_g_force_head_movment_modifier;
; 675  : 
; 676  : 				if (wide_cockpit_nr == WIDEVIEW_COMANCHE_PILOT)

  00364	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?wide_cockpit_nr@@3HA, 0 ; wide_cockpit_nr
  0036b	75 1f		 jne	 SHORT $LN17@draw_coman

; 677  : 					pilot_head_pitch_datum = rad ( wide_cockpit_position[wide_cockpit_nr].c.p );

  0036d	6b 05 00 00 00
	00 24		 imul	 eax, DWORD PTR ?wide_cockpit_nr@@3HA, 36 ; wide_cockpit_nr
  00374	f3 0f 10 80 20
	00 00 00	 movss	 xmm0, DWORD PTR ?wide_cockpit_position@@3PAUCOCKPIT_POSITION@@A[eax+32]
  0037c	f3 0f 59 05 00
	00 00 00	 mulss	 xmm0, DWORD PTR __real@3c8efa35
  00384	f3 0f 11 05 00
	00 00 00	 movss	 DWORD PTR ?pilot_head_pitch_datum@@3MA, xmm0
$LN17@draw_coman:

; 678  : 				if (wide_cockpit_nr == WIDEVIEW_COMANCHE_COPILOT)

  0038c	83 3d 00 00 00
	00 01		 cmp	 DWORD PTR ?wide_cockpit_nr@@3HA, 1 ; wide_cockpit_nr
  00393	75 1f		 jne	 SHORT $LN18@draw_coman

; 679  : 					co_pilot_head_pitch_datum = rad ( wide_cockpit_position[wide_cockpit_nr].c.p );

  00395	6b 05 00 00 00
	00 24		 imul	 eax, DWORD PTR ?wide_cockpit_nr@@3HA, 36 ; wide_cockpit_nr
  0039c	f3 0f 10 80 20
	00 00 00	 movss	 xmm0, DWORD PTR ?wide_cockpit_position@@3PAUCOCKPIT_POSITION@@A[eax+32]
  003a4	f3 0f 59 05 00
	00 00 00	 mulss	 xmm0, DWORD PTR __real@3c8efa35
  003ac	f3 0f 11 05 00
	00 00 00	 movss	 DWORD PTR ?co_pilot_head_pitch_datum@@3MA, xmm0
$LN18@draw_coman:

; 680  : 
; 681  : 				set_3d_view_distances (main_3d_env, 10.0, 0.1, 1.0, 0.0);

  003b4	51		 push	 ecx
  003b5	0f 57 c0	 xorps	 xmm0, xmm0
  003b8	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  003bd	51		 push	 ecx
  003be	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3f800000
  003c6	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  003cb	51		 push	 ecx
  003cc	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3dcccccd
  003d4	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  003d9	51		 push	 ecx
  003da	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@41200000
  003e2	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  003e7	a1 00 00 00 00	 mov	 eax, DWORD PTR ?main_3d_env@@3PAUENV_3D@@A ; main_3d_env
  003ec	50		 push	 eax
  003ed	e8 00 00 00 00	 call	 ?set_3d_view_distances@@YGXPAUENV_3D@@MMMM@Z ; set_3d_view_distances
$LN16@draw_coman:

; 682  : 
; 683  : 		}
; 684  : 
; 685  : 		//ataribaby 27/12/2008 new head g-force movement and vibration from main rotor
; 686  : 		if (get_view_mode () != VIEW_MODE_VIRTUAL_COCKPIT_PILOT_LHS_DISPLAY &&
; 687  : 				get_view_mode () != VIEW_MODE_VIRTUAL_COCKPIT_PILOT_RHS_DISPLAY &&
; 688  : 				get_view_mode () != VIEW_MODE_VIRTUAL_COCKPIT_CO_PILOT_LHS_DISPLAY &&

  003f2	83 3d 00 00 00
	00 26		 cmp	 DWORD PTR ?view_mode@@3W4VIEW_MODES@@A, 38 ; view_mode, 00000026H
  003f9	0f 84 18 03 00
	00		 je	 $LN19@draw_coman
  003ff	83 3d 00 00 00
	00 27		 cmp	 DWORD PTR ?view_mode@@3W4VIEW_MODES@@A, 39 ; view_mode, 00000027H
  00406	0f 84 0b 03 00
	00		 je	 $LN19@draw_coman
  0040c	83 3d 00 00 00
	00 28		 cmp	 DWORD PTR ?view_mode@@3W4VIEW_MODES@@A, 40 ; view_mode, 00000028H
  00413	0f 84 fe 02 00
	00		 je	 $LN19@draw_coman
  00419	83 3d 00 00 00
	00 29		 cmp	 DWORD PTR ?view_mode@@3W4VIEW_MODES@@A, 41 ; view_mode, 00000029H
  00420	0f 84 f1 02 00
	00		 je	 $LN19@draw_coman

; 689  : 				get_view_mode () != VIEW_MODE_VIRTUAL_COCKPIT_CO_PILOT_RHS_DISPLAY)
; 690  : 		{
; 691  : 			if (get_time_acceleration() != TIME_ACCELERATION_PAUSE)

  00426	e8 00 00 00 00	 call	 ?get_time_acceleration@@YGHXZ ; get_time_acceleration
  0042b	85 c0		 test	 eax, eax
  0042d	0f 84 c2 00 00
	00		 je	 $LN20@draw_coman

; 692  : 			{
; 693  : 				random_vibration_x = (frand1() * (current_flight_dynamics->main_rotor_rpm.value * 0.00002)) * command_line_g_force_head_movment_modifier;

  00433	69 05 00 00 00
	00 6d 4e c6 41	 imul	 eax, DWORD PTR ?random_number_seed@@3HA, 1103515245 ; random_number_seed
  0043d	05 39 30 00 00	 add	 eax, 12345		; 00003039H
  00442	a3 00 00 00 00	 mov	 DWORD PTR ?random_number_seed@@3HA, eax ; random_number_seed
  00447	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?random_number_seed@@3HA ; random_number_seed
  0044d	c1 f9 10	 sar	 ecx, 16			; 00000010H
  00450	81 e1 ff 7f 00
	00		 and	 ecx, 32767		; 00007fffH
  00456	f2 0f 2a c1	 cvtsi2sd xmm0, ecx
  0045a	f2 0f 59 05 00
	00 00 00	 mulsd	 xmm0, QWORD PTR __real@3f00002000400080
  00462	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?current_flight_dynamics@@3PAUDYNAMICS_TYPE@@A ; current_flight_dynamics
  00468	f3 0f 5a 8a 14
	1e 00 00	 cvtss2sd xmm1, DWORD PTR [edx+7700]
  00470	f2 0f 59 0d 00
	00 00 00	 mulsd	 xmm1, QWORD PTR __real@3ef4f8b588e368f1
  00478	f2 0f 59 c1	 mulsd	 xmm0, xmm1
  0047c	f3 0f 5a 0d 00
	00 00 00	 cvtss2sd xmm1, DWORD PTR ?command_line_g_force_head_movment_modifier@@3MA
  00484	f2 0f 59 c1	 mulsd	 xmm0, xmm1
  00488	f2 0f 5a c0	 cvtsd2ss xmm0, xmm0
  0048c	f3 0f 11 05 00
	00 00 00	 movss	 DWORD PTR ?random_vibration_x@@3MA, xmm0

; 694  : 				random_vibration_y = (frand1() * (current_flight_dynamics->main_rotor_rpm.value * 0.00002)) * command_line_g_force_head_movment_modifier;

  00494	69 05 00 00 00
	00 6d 4e c6 41	 imul	 eax, DWORD PTR ?random_number_seed@@3HA, 1103515245 ; random_number_seed
  0049e	05 39 30 00 00	 add	 eax, 12345		; 00003039H
  004a3	a3 00 00 00 00	 mov	 DWORD PTR ?random_number_seed@@3HA, eax ; random_number_seed
  004a8	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?random_number_seed@@3HA ; random_number_seed
  004ae	c1 f9 10	 sar	 ecx, 16			; 00000010H
  004b1	81 e1 ff 7f 00
	00		 and	 ecx, 32767		; 00007fffH
  004b7	f2 0f 2a c1	 cvtsi2sd xmm0, ecx
  004bb	f2 0f 59 05 00
	00 00 00	 mulsd	 xmm0, QWORD PTR __real@3f00002000400080
  004c3	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?current_flight_dynamics@@3PAUDYNAMICS_TYPE@@A ; current_flight_dynamics
  004c9	f3 0f 5a 8a 14
	1e 00 00	 cvtss2sd xmm1, DWORD PTR [edx+7700]
  004d1	f2 0f 59 0d 00
	00 00 00	 mulsd	 xmm1, QWORD PTR __real@3ef4f8b588e368f1
  004d9	f2 0f 59 c1	 mulsd	 xmm0, xmm1
  004dd	f3 0f 5a 0d 00
	00 00 00	 cvtss2sd xmm1, DWORD PTR ?command_line_g_force_head_movment_modifier@@3MA
  004e5	f2 0f 59 c1	 mulsd	 xmm0, xmm1
  004e9	f2 0f 5a c0	 cvtsd2ss xmm0, xmm0
  004ed	f3 0f 11 05 00
	00 00 00	 movss	 DWORD PTR ?random_vibration_y@@3MA, xmm0
$LN20@draw_coman:

; 695  : 			}
; 696  : 			x_head_g_movement = move_by_rate(x_head_g_movement, random_vibration_x + (bound(current_flight_dynamics->model_acceleration_vector.x * ONE_OVER_G, -3.0, 3.0) * 0.025 * command_line_g_force_head_movment_modifier), 0.05);

  004f5	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_flight_dynamics@@3PAUDYNAMICS_TYPE@@A ; current_flight_dynamics
  004fa	f3 0f 10 80 48
	1c 00 00	 movss	 xmm0, DWORD PTR [eax+7240]
  00502	f3 0f 59 05 00
	00 00 00	 mulss	 xmm0, DWORD PTR __real@3dd0c43d
  0050a	f3 0f 5a c0	 cvtss2sd xmm0, xmm0
  0050e	f2 0f 10 0d 00
	00 00 00	 movsd	 xmm1, QWORD PTR __real@c008000000000000
  00516	66 0f 2f c8	 comisd	 xmm1, xmm0
  0051a	76 12		 jbe	 SHORT $LN38@draw_coman
  0051c	f2 0f 10 05 00
	00 00 00	 movsd	 xmm0, QWORD PTR __real@c008000000000000
  00524	f2 0f 11 85 18
	ff ff ff	 movsd	 QWORD PTR tv275[ebp], xmm0
  0052c	eb 68		 jmp	 SHORT $LN39@draw_coman
$LN38@draw_coman:
  0052e	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_flight_dynamics@@3PAUDYNAMICS_TYPE@@A ; current_flight_dynamics
  00534	f3 0f 10 81 48
	1c 00 00	 movss	 xmm0, DWORD PTR [ecx+7240]
  0053c	f3 0f 59 05 00
	00 00 00	 mulss	 xmm0, DWORD PTR __real@3dd0c43d
  00544	f3 0f 5a c0	 cvtss2sd xmm0, xmm0
  00548	66 0f 2f 05 00
	00 00 00	 comisd	 xmm0, QWORD PTR __real@4008000000000000
  00550	76 12		 jbe	 SHORT $LN36@draw_coman
  00552	f2 0f 10 05 00
	00 00 00	 movsd	 xmm0, QWORD PTR __real@4008000000000000
  0055a	f2 0f 11 85 10
	ff ff ff	 movsd	 QWORD PTR tv274[ebp], xmm0
  00562	eb 22		 jmp	 SHORT $LN37@draw_coman
$LN36@draw_coman:
  00564	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?current_flight_dynamics@@3PAUDYNAMICS_TYPE@@A ; current_flight_dynamics
  0056a	f3 0f 10 82 48
	1c 00 00	 movss	 xmm0, DWORD PTR [edx+7240]
  00572	f3 0f 59 05 00
	00 00 00	 mulss	 xmm0, DWORD PTR __real@3dd0c43d
  0057a	f3 0f 5a c0	 cvtss2sd xmm0, xmm0
  0057e	f2 0f 11 85 10
	ff ff ff	 movsd	 QWORD PTR tv274[ebp], xmm0
$LN37@draw_coman:
  00586	f2 0f 10 85 10
	ff ff ff	 movsd	 xmm0, QWORD PTR tv274[ebp]
  0058e	f2 0f 11 85 18
	ff ff ff	 movsd	 QWORD PTR tv275[ebp], xmm0
$LN39@draw_coman:
  00596	51		 push	 ecx
  00597	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3d4ccccd
  0059f	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  005a4	f3 0f 5a 05 00
	00 00 00	 cvtss2sd xmm0, DWORD PTR ?random_vibration_x@@3MA
  005ac	f2 0f 10 8d 18
	ff ff ff	 movsd	 xmm1, QWORD PTR tv275[ebp]
  005b4	f2 0f 59 0d 00
	00 00 00	 mulsd	 xmm1, QWORD PTR __real@3f9999999999999a
  005bc	f3 0f 5a 15 00
	00 00 00	 cvtss2sd xmm2, DWORD PTR ?command_line_g_force_head_movment_modifier@@3MA
  005c4	f2 0f 59 ca	 mulsd	 xmm1, xmm2
  005c8	f2 0f 58 c1	 addsd	 xmm0, xmm1
  005cc	f2 0f 5a c0	 cvtsd2ss xmm0, xmm0
  005d0	51		 push	 ecx
  005d1	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  005d6	51		 push	 ecx
  005d7	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR ?x_head_g_movement@@3MA
  005df	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  005e4	e8 00 00 00 00	 call	 ?move_by_rate@@YGMMMM@Z	; move_by_rate
  005e9	d9 1d 00 00 00
	00		 fstp	 DWORD PTR ?x_head_g_movement@@3MA

; 697  : 			y_head_g_movement = move_by_rate(y_head_g_movement, random_vibration_y + (bound(current_flight_dynamics->g_force.value - 1.0, -1.5, 5.0) * 0.025 * command_line_g_force_head_movment_modifier), 0.05);

  005ef	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_flight_dynamics@@3PAUDYNAMICS_TYPE@@A ; current_flight_dynamics
  005f4	f3 0f 5a 80 5c
	24 00 00	 cvtss2sd xmm0, DWORD PTR [eax+9308]
  005fc	f2 0f 5c 05 00
	00 00 00	 subsd	 xmm0, QWORD PTR __real@3ff0000000000000
  00604	f2 0f 10 0d 00
	00 00 00	 movsd	 xmm1, QWORD PTR __real@bff8000000000000
  0060c	66 0f 2f c8	 comisd	 xmm1, xmm0
  00610	76 12		 jbe	 SHORT $LN42@draw_coman
  00612	f2 0f 10 05 00
	00 00 00	 movsd	 xmm0, QWORD PTR __real@bff8000000000000
  0061a	f2 0f 11 85 18
	ff ff ff	 movsd	 QWORD PTR tv301[ebp], xmm0
  00622	eb 60		 jmp	 SHORT $LN43@draw_coman
$LN42@draw_coman:
  00624	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_flight_dynamics@@3PAUDYNAMICS_TYPE@@A ; current_flight_dynamics
  0062a	f3 0f 5a 81 5c
	24 00 00	 cvtss2sd xmm0, DWORD PTR [ecx+9308]
  00632	f2 0f 5c 05 00
	00 00 00	 subsd	 xmm0, QWORD PTR __real@3ff0000000000000
  0063a	66 0f 2f 05 00
	00 00 00	 comisd	 xmm0, QWORD PTR __real@4014000000000000
  00642	76 12		 jbe	 SHORT $LN40@draw_coman
  00644	f2 0f 10 05 00
	00 00 00	 movsd	 xmm0, QWORD PTR __real@4014000000000000
  0064c	f2 0f 11 85 10
	ff ff ff	 movsd	 QWORD PTR tv300[ebp], xmm0
  00654	eb 1e		 jmp	 SHORT $LN41@draw_coman
$LN40@draw_coman:
  00656	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?current_flight_dynamics@@3PAUDYNAMICS_TYPE@@A ; current_flight_dynamics
  0065c	f3 0f 5a 82 5c
	24 00 00	 cvtss2sd xmm0, DWORD PTR [edx+9308]
  00664	f2 0f 5c 05 00
	00 00 00	 subsd	 xmm0, QWORD PTR __real@3ff0000000000000
  0066c	f2 0f 11 85 10
	ff ff ff	 movsd	 QWORD PTR tv300[ebp], xmm0
$LN41@draw_coman:
  00674	f2 0f 10 85 10
	ff ff ff	 movsd	 xmm0, QWORD PTR tv300[ebp]
  0067c	f2 0f 11 85 18
	ff ff ff	 movsd	 QWORD PTR tv301[ebp], xmm0
$LN43@draw_coman:
  00684	51		 push	 ecx
  00685	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3d4ccccd
  0068d	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00692	f3 0f 5a 05 00
	00 00 00	 cvtss2sd xmm0, DWORD PTR ?random_vibration_y@@3MA
  0069a	f2 0f 10 8d 18
	ff ff ff	 movsd	 xmm1, QWORD PTR tv301[ebp]
  006a2	f2 0f 59 0d 00
	00 00 00	 mulsd	 xmm1, QWORD PTR __real@3f9999999999999a
  006aa	f3 0f 5a 15 00
	00 00 00	 cvtss2sd xmm2, DWORD PTR ?command_line_g_force_head_movment_modifier@@3MA
  006b2	f2 0f 59 ca	 mulsd	 xmm1, xmm2
  006b6	f2 0f 58 c1	 addsd	 xmm0, xmm1
  006ba	f2 0f 5a c0	 cvtsd2ss xmm0, xmm0
  006be	51		 push	 ecx
  006bf	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  006c4	51		 push	 ecx
  006c5	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR ?y_head_g_movement@@3MA
  006cd	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  006d2	e8 00 00 00 00	 call	 ?move_by_rate@@YGMMMM@Z	; move_by_rate
  006d7	d9 1d 00 00 00
	00		 fstp	 DWORD PTR ?y_head_g_movement@@3MA

; 698  : 
; 699  : 			virtual_cockpit_inst3d->vp.x -= x_head_g_movement;

  006dd	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  006e2	f3 0f 10 40 08	 movss	 xmm0, DWORD PTR [eax+8]
  006e7	f3 0f 5c 05 00
	00 00 00	 subss	 xmm0, DWORD PTR ?x_head_g_movement@@3MA
  006ef	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  006f5	f3 0f 11 41 08	 movss	 DWORD PTR [ecx+8], xmm0

; 700  : 			//if (!current_flight_dynamics->auto_hover)   // arneh - auto hover has some weird dynamics which cause lots of g-forces, so disable head movement when auto hover is enabled
; 701  : 			virtual_cockpit_inst3d->vp.y -= y_head_g_movement;

  006fa	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  006ff	f3 0f 10 40 0c	 movss	 xmm0, DWORD PTR [eax+12]
  00704	f3 0f 5c 05 00
	00 00 00	 subss	 xmm0, DWORD PTR ?y_head_g_movement@@3MA
  0070c	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  00712	f3 0f 11 41 0c	 movss	 DWORD PTR [ecx+12], xmm0
$LN19@draw_coman:

; 702  : 		}
; 703  : 
; 704  : 		if (get_local_entity_int_value (get_session_entity (), INT_TYPE_DAY_SEGMENT_TYPE) == DAY_SEGMENT_TYPE_DAY)

  00717	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?session_entity@@3PAUENTITY@@A, 0 ; session_entity
  0071e	74 0f		 je	 SHORT $LN44@draw_coman
  00720	a1 00 00 00 00	 mov	 eax, DWORD PTR ?session_entity@@3PAUENTITY@@A ; session_entity
  00725	8b 08		 mov	 ecx, DWORD PTR [eax]
  00727	89 8d 1c ff ff
	ff		 mov	 DWORD PTR tv324[ebp], ecx
  0072d	eb 20		 jmp	 SHORT $LN45@draw_coman
$LN44@draw_coman:
  0072f	68 c0 02 00 00	 push	 704			; 000002c0H
  00734	68 00 00 00 00	 push	 OFFSET ??_C@_0FC@DCAAIOAH@c?3?2users?2nhv90?2projects?2eech?2ap@
  00739	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  0073f	52		 push	 edx
  00740	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00745	c7 85 1c ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv324[ebp], 0
$LN45@draw_coman:
  0074f	b8 01 00 00 00	 mov	 eax, 1
  00754	85 c0		 test	 eax, eax
  00756	74 0c		 je	 SHORT $LN46@draw_coman
  00758	c7 85 18 ff ff
	ff 27 00 00 00	 mov	 DWORD PTR tv331[ebp], 39 ; 00000027H
  00762	eb 20		 jmp	 SHORT $LN47@draw_coman
$LN46@draw_coman:
  00764	68 c0 02 00 00	 push	 704			; 000002c0H
  00769	68 00 00 00 00	 push	 OFFSET ??_C@_0FC@DCAAIOAH@c?3?2users?2nhv90?2projects?2eech?2ap@
  0076e	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?overload_invalid_int_type_message@@3PBDB ; overload_invalid_int_type_message
  00774	51		 push	 ecx
  00775	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  0077a	c7 85 18 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv331[ebp], 0
$LN47@draw_coman:
  00784	6a 27		 push	 39			; 00000027H
  00786	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?session_entity@@3PAUENTITY@@A ; session_entity
  0078c	52		 push	 edx
  0078d	69 85 1c ff ff
	ff 5c 04 00 00	 imul	 eax, DWORD PTR tv324[ebp], 1116
  00797	8b 8d 18 ff ff
	ff		 mov	 ecx, DWORD PTR tv331[ebp]
  0079d	8b 94 88 00 00
	00 00		 mov	 edx, DWORD PTR ?fn_get_local_entity_int_value@@3PAY0BBH@P6GHPAUENTITY@@W4INT_TYPES@@@ZA[eax+ecx*4]
  007a4	ff d2		 call	 edx
  007a6	83 f8 01	 cmp	 eax, 1
  007a9	0f 85 6f 01 00
	00		 jne	 $LN21@draw_coman

; 705  : 		{
; 706  : 			////////////////////////////////////////
; 707  : 			//
; 708  : 			// DAY LIGHTING
; 709  : 			//
; 710  : 			////////////////////////////////////////
; 711  : 
; 712  : 			if (night_vision_system_active && (get_view_mode () != VIEW_MODE_VIRTUAL_COCKPIT_CREW))

  007af	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?night_vision_system_active@@3HA, 0 ; night_vision_system_active
  007b6	0f 84 2e 01 00
	00		 je	 $LN23@draw_coman
  007bc	83 3d 00 00 00
	00 23		 cmp	 DWORD PTR ?view_mode@@3W4VIEW_MODES@@A, 35 ; view_mode, 00000023H
  007c3	0f 84 21 01 00
	00		 je	 $LN23@draw_coman

; 713  : 			{
; 714  : 				//
; 715  : 				// active night vision system
; 716  : 				//
; 717  : 
; 718  : 				get_3d_transformation_matrix (m1, rad (0.0), rad (135.0), rad (0.0));

  007c9	51		 push	 ecx
  007ca	0f 57 c0	 xorps	 xmm0, xmm0
  007cd	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  007d2	51		 push	 ecx
  007d3	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@4016cbe4
  007db	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  007e0	51		 push	 ecx
  007e1	0f 57 c0	 xorps	 xmm0, xmm0
  007e4	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  007e9	8d 45 84	 lea	 eax, DWORD PTR _m1$2[ebp]
  007ec	50		 push	 eax
  007ed	e8 00 00 00 00	 call	 ?get_3d_transformation_matrix@@YGXQAY02MMMM@Z ; get_3d_transformation_matrix

; 719  : 
; 720  : 				multiply_matrix3x3_matrix3x3 (m2, m1, virtual_cockpit_inst3d->vp.attitude);

  007f2	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  007f7	83 c0 14	 add	 eax, 20			; 00000014H
  007fa	50		 push	 eax
  007fb	8d 4d 84	 lea	 ecx, DWORD PTR _m1$2[ebp]
  007fe	51		 push	 ecx
  007ff	8d 95 60 ff ff
	ff		 lea	 edx, DWORD PTR _m2$1[ebp]
  00805	52		 push	 edx
  00806	e8 00 00 00 00	 call	 ?multiply_matrix3x3_matrix3x3@@YGXQAY02MQAY02$$CBM1@Z ; multiply_matrix3x3_matrix3x3

; 721  : 
; 722  : 				direction.x = m2[2][0];

  0080b	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  00810	d1 e0		 shl	 eax, 1
  00812	8d 8c 05 60 ff
	ff ff		 lea	 ecx, DWORD PTR _m2$1[ebp+eax]
  00819	ba 04 00 00 00	 mov	 edx, 4
  0081e	6b c2 00	 imul	 eax, edx, 0
  00821	f3 0f 10 04 01	 movss	 xmm0, DWORD PTR [ecx+eax]
  00826	f3 0f 11 45 a8	 movss	 DWORD PTR _direction$3[ebp], xmm0

; 723  : 				direction.y = m2[2][1];

  0082b	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  00830	d1 e0		 shl	 eax, 1
  00832	8d 8c 05 60 ff
	ff ff		 lea	 ecx, DWORD PTR _m2$1[ebp+eax]
  00839	ba 04 00 00 00	 mov	 edx, 4
  0083e	c1 e2 00	 shl	 edx, 0
  00841	f3 0f 10 04 11	 movss	 xmm0, DWORD PTR [ecx+edx]
  00846	f3 0f 11 45 ac	 movss	 DWORD PTR _direction$3[ebp+4], xmm0

; 724  : 				direction.z = m2[2][2];

  0084b	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  00850	d1 e0		 shl	 eax, 1
  00852	8d 8c 05 60 ff
	ff ff		 lea	 ecx, DWORD PTR _m2$1[ebp+eax]
  00859	ba 04 00 00 00	 mov	 edx, 4
  0085e	d1 e2		 shl	 edx, 1
  00860	f3 0f 10 04 11	 movss	 xmm0, DWORD PTR [ecx+edx]
  00865	f3 0f 11 45 b0	 movss	 DWORD PTR _direction$3[ebp+8], xmm0

; 725  : 
; 726  : 				cockpit_light = create_light_3d_source (LIGHT_3D_TYPE_DIRECTIONAL, FALSE, &direction, 0, 0.0000, 0.5000, 0.0000);

  0086a	51		 push	 ecx
  0086b	0f 57 c0	 xorps	 xmm0, xmm0
  0086e	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00873	51		 push	 ecx
  00874	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3f000000
  0087c	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00881	51		 push	 ecx
  00882	0f 57 c0	 xorps	 xmm0, xmm0
  00885	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  0088a	51		 push	 ecx
  0088b	0f 57 c0	 xorps	 xmm0, xmm0
  0088e	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00893	8d 45 a8	 lea	 eax, DWORD PTR _direction$3[ebp]
  00896	50		 push	 eax
  00897	6a 00		 push	 0
  00899	6a 01		 push	 1
  0089b	e8 00 00 00 00	 call	 ?create_light_3d_source@@YGPAULIGHT_3D_SOURCE@@W4LIGHT_3D_TYPE@@HPAUVEC3D@@MMMM@Z ; create_light_3d_source
  008a0	89 45 b4	 mov	 DWORD PTR _cockpit_light$4[ebp], eax

; 727  : 
; 728  : 				insert_light_3d_source_into_3d_scene (cockpit_light);

  008a3	8b 45 b4	 mov	 eax, DWORD PTR _cockpit_light$4[ebp]
  008a6	50		 push	 eax
  008a7	e8 00 00 00 00	 call	 ?insert_light_3d_source_into_3d_scene@@YGXPAULIGHT_3D_SOURCE@@@Z ; insert_light_3d_source_into_3d_scene

; 729  : 
; 730  : 				insert_relative_object_into_3d_scene (OBJECT_3D_DRAW_TYPE_ZBUFFERED_OBJECT, &virtual_cockpit_inst3d->vp.position, virtual_cockpit_inst3d);

  008ac	51		 push	 ecx
  008ad	0f 57 c0	 xorps	 xmm0, xmm0
  008b0	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  008b5	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  008ba	50		 push	 eax
  008bb	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  008c1	83 c1 08	 add	 ecx, 8
  008c4	51		 push	 ecx
  008c5	6a 02		 push	 2
  008c7	e8 00 00 00 00	 call	 ?insert_zbiased_relative_object_into_3d_scene@@YGXW4OBJECT_3D_DRAWING_TYPES@@PAUVEC3D@@PAXM@Z ; insert_zbiased_relative_object_into_3d_scene

; 731  : 
; 732  : 				draw_3d_scene ();

  008cc	e8 00 00 00 00	 call	 ?draw_3d_scene@@YGXXZ	; draw_3d_scene

; 733  : 
; 734  : 				end_3d_scene ();

  008d1	e8 00 00 00 00	 call	 ?end_3d_scene@@YGXXZ	; end_3d_scene

; 735  : 
; 736  : 				remove_light_3d_source_from_3d_scene (cockpit_light);

  008d6	8b 45 b4	 mov	 eax, DWORD PTR _cockpit_light$4[ebp]
  008d9	50		 push	 eax
  008da	e8 00 00 00 00	 call	 ?remove_light_3d_source_from_3d_scene@@YGXPAULIGHT_3D_SOURCE@@@Z ; remove_light_3d_source_from_3d_scene

; 737  : 
; 738  : 				destroy_light_3d_source (cockpit_light);

  008df	8b 45 b4	 mov	 eax, DWORD PTR _cockpit_light$4[ebp]
  008e2	50		 push	 eax
  008e3	e8 00 00 00 00	 call	 ?destroy_light_3d_source@@YGXPAULIGHT_3D_SOURCE@@@Z ; destroy_light_3d_source

; 739  : 			}
; 740  : 			else

  008e8	eb 2f		 jmp	 SHORT $LN24@draw_coman
$LN23@draw_coman:

; 741  : 			{
; 742  : 				//
; 743  : 				// inactive night vision system
; 744  : 				//
; 745  : 
; 746  : 				insert_relative_object_into_3d_scene (OBJECT_3D_DRAW_TYPE_ZBUFFERED_OBJECT, &virtual_cockpit_inst3d->vp.position, virtual_cockpit_inst3d);

  008ea	51		 push	 ecx
  008eb	0f 57 c0	 xorps	 xmm0, xmm0
  008ee	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  008f3	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  008f8	50		 push	 eax
  008f9	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  008ff	83 c1 08	 add	 ecx, 8
  00902	51		 push	 ecx
  00903	6a 02		 push	 2
  00905	e8 00 00 00 00	 call	 ?insert_zbiased_relative_object_into_3d_scene@@YGXW4OBJECT_3D_DRAWING_TYPES@@PAUVEC3D@@PAXM@Z ; insert_zbiased_relative_object_into_3d_scene

; 747  : 
; 748  : 				draw_3d_scene ();

  0090a	e8 00 00 00 00	 call	 ?draw_3d_scene@@YGXXZ	; draw_3d_scene

; 749  : 
; 750  : 				print_edit_wide_cockpit ();

  0090f	e8 00 00 00 00	 call	 ?print_edit_wide_cockpit@@YGXXZ ; print_edit_wide_cockpit

; 751  : 
; 752  : 				end_3d_scene ();

  00914	e8 00 00 00 00	 call	 ?end_3d_scene@@YGXXZ	; end_3d_scene
$LN24@draw_coman:

; 753  : 			}
; 754  : 		}
; 755  : 		else

  00919	e9 3b 02 00 00	 jmp	 $LN22@draw_coman
$LN21@draw_coman:

; 756  : 		{
; 757  : 			////////////////////////////////////////
; 758  : 			//
; 759  : 			// NIGHT LIGHTING
; 760  : 			//
; 761  : 			////////////////////////////////////////
; 762  : 
; 763  : 			direction.x = virtual_cockpit_inst3d->vp.zv.x;

  0091e	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  00923	f3 0f 10 40 2c	 movss	 xmm0, DWORD PTR [eax+44]
  00928	f3 0f 11 45 a8	 movss	 DWORD PTR _direction$3[ebp], xmm0

; 764  : 			direction.y = virtual_cockpit_inst3d->vp.zv.y;

  0092d	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  00932	f3 0f 10 40 30	 movss	 xmm0, DWORD PTR [eax+48]
  00937	f3 0f 11 45 ac	 movss	 DWORD PTR _direction$3[ebp+4], xmm0

; 765  : 			direction.z = virtual_cockpit_inst3d->vp.zv.z;

  0093c	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  00941	f3 0f 10 40 34	 movss	 xmm0, DWORD PTR [eax+52]
  00946	f3 0f 11 45 b0	 movss	 DWORD PTR _direction$3[ebp+8], xmm0

; 766  : 
; 767  : 			display_backlight = create_light_3d_source (LIGHT_3D_TYPE_DIRECTIONAL, FALSE, &direction, 0, 0.0627, 0.2039, 0.0392);

  0094b	51		 push	 ecx
  0094c	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3d20902e
  00954	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00959	51		 push	 ecx
  0095a	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3e50cb29
  00962	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00967	51		 push	 ecx
  00968	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3d8068dc
  00970	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00975	51		 push	 ecx
  00976	0f 57 c0	 xorps	 xmm0, xmm0
  00979	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  0097e	8d 45 a8	 lea	 eax, DWORD PTR _direction$3[ebp]
  00981	50		 push	 eax
  00982	6a 00		 push	 0
  00984	6a 01		 push	 1
  00986	e8 00 00 00 00	 call	 ?create_light_3d_source@@YGPAULIGHT_3D_SOURCE@@W4LIGHT_3D_TYPE@@HPAUVEC3D@@MMMM@Z ; create_light_3d_source
  0098b	89 45 b8	 mov	 DWORD PTR _display_backlight$5[ebp], eax

; 768  : 
; 769  : 			if (night_vision_system_active && (get_view_mode () != VIEW_MODE_VIRTUAL_COCKPIT_CREW))

  0098e	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?night_vision_system_active@@3HA, 0 ; night_vision_system_active
  00995	0f 84 e9 00 00
	00		 je	 $LN25@draw_coman
  0099b	83 3d 00 00 00
	00 23		 cmp	 DWORD PTR ?view_mode@@3W4VIEW_MODES@@A, 35 ; view_mode, 00000023H
  009a2	0f 84 dc 00 00
	00		 je	 $LN25@draw_coman

; 770  : 			{
; 771  : 				//
; 772  : 				// active night vision system
; 773  : 				//
; 774  : 
; 775  : 				get_3d_transformation_matrix (m1, rad (0.0), rad (135.0), rad (0.0));

  009a8	51		 push	 ecx
  009a9	0f 57 c0	 xorps	 xmm0, xmm0
  009ac	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  009b1	51		 push	 ecx
  009b2	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@4016cbe4
  009ba	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  009bf	51		 push	 ecx
  009c0	0f 57 c0	 xorps	 xmm0, xmm0
  009c3	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  009c8	8d 45 84	 lea	 eax, DWORD PTR _m1$2[ebp]
  009cb	50		 push	 eax
  009cc	e8 00 00 00 00	 call	 ?get_3d_transformation_matrix@@YGXQAY02MMMM@Z ; get_3d_transformation_matrix

; 776  : 
; 777  : 				multiply_matrix3x3_matrix3x3 (m2, m1, virtual_cockpit_inst3d->vp.attitude);

  009d1	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  009d6	83 c0 14	 add	 eax, 20			; 00000014H
  009d9	50		 push	 eax
  009da	8d 4d 84	 lea	 ecx, DWORD PTR _m1$2[ebp]
  009dd	51		 push	 ecx
  009de	8d 95 60 ff ff
	ff		 lea	 edx, DWORD PTR _m2$1[ebp]
  009e4	52		 push	 edx
  009e5	e8 00 00 00 00	 call	 ?multiply_matrix3x3_matrix3x3@@YGXQAY02MQAY02$$CBM1@Z ; multiply_matrix3x3_matrix3x3

; 778  : 
; 779  : 				direction.x = m2[2][0];

  009ea	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  009ef	d1 e0		 shl	 eax, 1
  009f1	8d 8c 05 60 ff
	ff ff		 lea	 ecx, DWORD PTR _m2$1[ebp+eax]
  009f8	ba 04 00 00 00	 mov	 edx, 4
  009fd	6b c2 00	 imul	 eax, edx, 0
  00a00	f3 0f 10 04 01	 movss	 xmm0, DWORD PTR [ecx+eax]
  00a05	f3 0f 11 45 a8	 movss	 DWORD PTR _direction$3[ebp], xmm0

; 780  : 				direction.y = m2[2][1];

  00a0a	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  00a0f	d1 e0		 shl	 eax, 1
  00a11	8d 8c 05 60 ff
	ff ff		 lea	 ecx, DWORD PTR _m2$1[ebp+eax]
  00a18	ba 04 00 00 00	 mov	 edx, 4
  00a1d	c1 e2 00	 shl	 edx, 0
  00a20	f3 0f 10 04 11	 movss	 xmm0, DWORD PTR [ecx+edx]
  00a25	f3 0f 11 45 ac	 movss	 DWORD PTR _direction$3[ebp+4], xmm0

; 781  : 				direction.z = m2[2][2];

  00a2a	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  00a2f	d1 e0		 shl	 eax, 1
  00a31	8d 8c 05 60 ff
	ff ff		 lea	 ecx, DWORD PTR _m2$1[ebp+eax]
  00a38	ba 04 00 00 00	 mov	 edx, 4
  00a3d	d1 e2		 shl	 edx, 1
  00a3f	f3 0f 10 04 11	 movss	 xmm0, DWORD PTR [ecx+edx]
  00a44	f3 0f 11 45 b0	 movss	 DWORD PTR _direction$3[ebp+8], xmm0

; 782  : 
; 783  : 				cockpit_light = create_light_3d_source (LIGHT_3D_TYPE_DIRECTIONAL, FALSE, &direction, 0, 0.0000, 0.5000, 0.0000);

  00a49	51		 push	 ecx
  00a4a	0f 57 c0	 xorps	 xmm0, xmm0
  00a4d	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00a52	51		 push	 ecx
  00a53	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3f000000
  00a5b	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00a60	51		 push	 ecx
  00a61	0f 57 c0	 xorps	 xmm0, xmm0
  00a64	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00a69	51		 push	 ecx
  00a6a	0f 57 c0	 xorps	 xmm0, xmm0
  00a6d	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00a72	8d 45 a8	 lea	 eax, DWORD PTR _direction$3[ebp]
  00a75	50		 push	 eax
  00a76	6a 00		 push	 0
  00a78	6a 01		 push	 1
  00a7a	e8 00 00 00 00	 call	 ?create_light_3d_source@@YGPAULIGHT_3D_SOURCE@@W4LIGHT_3D_TYPE@@HPAUVEC3D@@MMMM@Z ; create_light_3d_source
  00a7f	89 45 b4	 mov	 DWORD PTR _cockpit_light$4[ebp], eax

; 784  : 			}
; 785  : 			else

  00a82	eb 70		 jmp	 SHORT $LN26@draw_coman
$LN25@draw_coman:

; 786  : 			{
; 787  : 				//
; 788  : 				// inactive night vision system
; 789  : 				//
; 790  : 
; 791  : 				direction.x = virtual_cockpit_inst3d->vp.yv.x;

  00a84	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  00a89	f3 0f 10 40 20	 movss	 xmm0, DWORD PTR [eax+32]
  00a8e	f3 0f 11 45 a8	 movss	 DWORD PTR _direction$3[ebp], xmm0

; 792  : 				direction.y = virtual_cockpit_inst3d->vp.yv.y;

  00a93	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  00a98	f3 0f 10 40 24	 movss	 xmm0, DWORD PTR [eax+36]
  00a9d	f3 0f 11 45 ac	 movss	 DWORD PTR _direction$3[ebp+4], xmm0

; 793  : 				direction.z = virtual_cockpit_inst3d->vp.yv.z;

  00aa2	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  00aa7	f3 0f 10 40 28	 movss	 xmm0, DWORD PTR [eax+40]
  00aac	f3 0f 11 45 b0	 movss	 DWORD PTR _direction$3[ebp+8], xmm0

; 794  : 
; 795  : 				cockpit_light = create_light_3d_source (LIGHT_3D_TYPE_DIRECTIONAL, FALSE, &direction, 0, 0.0666, 0.1098, 0.6431);

  00ab1	51		 push	 ecx
  00ab2	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3f24a234
  00aba	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00abf	51		 push	 ecx
  00ac0	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3de0ded3
  00ac8	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00acd	51		 push	 ecx
  00ace	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3d886595
  00ad6	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00adb	51		 push	 ecx
  00adc	0f 57 c0	 xorps	 xmm0, xmm0
  00adf	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00ae4	8d 45 a8	 lea	 eax, DWORD PTR _direction$3[ebp]
  00ae7	50		 push	 eax
  00ae8	6a 00		 push	 0
  00aea	6a 01		 push	 1
  00aec	e8 00 00 00 00	 call	 ?create_light_3d_source@@YGPAULIGHT_3D_SOURCE@@W4LIGHT_3D_TYPE@@HPAUVEC3D@@MMMM@Z ; create_light_3d_source
  00af1	89 45 b4	 mov	 DWORD PTR _cockpit_light$4[ebp], eax
$LN26@draw_coman:

; 796  : 			}
; 797  : 
; 798  : 			insert_light_3d_source_into_3d_scene (display_backlight);

  00af4	8b 45 b8	 mov	 eax, DWORD PTR _display_backlight$5[ebp]
  00af7	50		 push	 eax
  00af8	e8 00 00 00 00	 call	 ?insert_light_3d_source_into_3d_scene@@YGXPAULIGHT_3D_SOURCE@@@Z ; insert_light_3d_source_into_3d_scene

; 799  : 
; 800  : 			insert_light_3d_source_into_3d_scene (cockpit_light);

  00afd	8b 45 b4	 mov	 eax, DWORD PTR _cockpit_light$4[ebp]
  00b00	50		 push	 eax
  00b01	e8 00 00 00 00	 call	 ?insert_light_3d_source_into_3d_scene@@YGXPAULIGHT_3D_SOURCE@@@Z ; insert_light_3d_source_into_3d_scene

; 801  : 
; 802  : 			insert_relative_object_into_3d_scene (OBJECT_3D_DRAW_TYPE_ZBUFFERED_OBJECT, &virtual_cockpit_inst3d->vp.position, virtual_cockpit_inst3d);

  00b06	51		 push	 ecx
  00b07	0f 57 c0	 xorps	 xmm0, xmm0
  00b0a	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00b0f	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  00b14	50		 push	 eax
  00b15	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  00b1b	83 c1 08	 add	 ecx, 8
  00b1e	51		 push	 ecx
  00b1f	6a 02		 push	 2
  00b21	e8 00 00 00 00	 call	 ?insert_zbiased_relative_object_into_3d_scene@@YGXW4OBJECT_3D_DRAWING_TYPES@@PAUVEC3D@@PAXM@Z ; insert_zbiased_relative_object_into_3d_scene

; 803  : 
; 804  : 			draw_3d_scene ();

  00b26	e8 00 00 00 00	 call	 ?draw_3d_scene@@YGXXZ	; draw_3d_scene

; 805  : 
; 806  : 			print_edit_wide_cockpit ();

  00b2b	e8 00 00 00 00	 call	 ?print_edit_wide_cockpit@@YGXXZ ; print_edit_wide_cockpit

; 807  : 
; 808  : 			end_3d_scene ();

  00b30	e8 00 00 00 00	 call	 ?end_3d_scene@@YGXXZ	; end_3d_scene

; 809  : 
; 810  : 			remove_light_3d_source_from_3d_scene (display_backlight);

  00b35	8b 45 b8	 mov	 eax, DWORD PTR _display_backlight$5[ebp]
  00b38	50		 push	 eax
  00b39	e8 00 00 00 00	 call	 ?remove_light_3d_source_from_3d_scene@@YGXPAULIGHT_3D_SOURCE@@@Z ; remove_light_3d_source_from_3d_scene

; 811  : 
; 812  : 			remove_light_3d_source_from_3d_scene (cockpit_light);

  00b3e	8b 45 b4	 mov	 eax, DWORD PTR _cockpit_light$4[ebp]
  00b41	50		 push	 eax
  00b42	e8 00 00 00 00	 call	 ?remove_light_3d_source_from_3d_scene@@YGXPAULIGHT_3D_SOURCE@@@Z ; remove_light_3d_source_from_3d_scene

; 813  : 
; 814  : 			destroy_light_3d_source (display_backlight);

  00b47	8b 45 b8	 mov	 eax, DWORD PTR _display_backlight$5[ebp]
  00b4a	50		 push	 eax
  00b4b	e8 00 00 00 00	 call	 ?destroy_light_3d_source@@YGXPAULIGHT_3D_SOURCE@@@Z ; destroy_light_3d_source

; 815  : 
; 816  : 			destroy_light_3d_source (cockpit_light);

  00b50	8b 45 b4	 mov	 eax, DWORD PTR _cockpit_light$4[ebp]
  00b53	50		 push	 eax
  00b54	e8 00 00 00 00	 call	 ?destroy_light_3d_source@@YGXPAULIGHT_3D_SOURCE@@@Z ; destroy_light_3d_source
$LN22@draw_coman:

; 817  : 		}
; 818  : 	}
; 819  : 
; 820  : 	move_edit_wide_cockpit ();

  00b59	e8 00 00 00 00	 call	 ?move_edit_wide_cockpit@@YGXXZ ; move_edit_wide_cockpit

; 821  : 
; 822  : 
; 823  : #if RECOGNITION_GUIDE
; 824  : 	set_3d_view_distances (main_3d_env, 10000.0, 100.0, 1.0, 0.0);
; 825  : #else
; 826  : 	set_3d_view_distances (main_3d_env, 10000.0, 1.0, 1.0, 0.0);

  00b5e	51		 push	 ecx
  00b5f	0f 57 c0	 xorps	 xmm0, xmm0
  00b62	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00b67	51		 push	 ecx
  00b68	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3f800000
  00b70	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00b75	51		 push	 ecx
  00b76	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3f800000
  00b7e	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00b83	51		 push	 ecx
  00b84	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@461c4000
  00b8c	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00b91	a1 00 00 00 00	 mov	 eax, DWORD PTR ?main_3d_env@@3PAUENV_3D@@A ; main_3d_env
  00b96	50		 push	 eax
  00b97	e8 00 00 00 00	 call	 ?set_3d_view_distances@@YGXPAUENV_3D@@MMMM@Z ; set_3d_view_distances

; 827  : #endif
; 828  : 
; 829  : 	realise_3d_clip_extents (main_3d_env);

  00b9c	a1 00 00 00 00	 mov	 eax, DWORD PTR ?main_3d_env@@3PAUENV_3D@@A ; main_3d_env
  00ba1	50		 push	 eax
  00ba2	e8 00 00 00 00	 call	 ?realise_3d_clip_extents@@YGXPAUENV_3D@@@Z ; realise_3d_clip_extents
$LN1@draw_coman:

; 830  : }

  00ba7	5f		 pop	 edi
  00ba8	5e		 pop	 esi
  00ba9	5b		 pop	 ebx
  00baa	8b e5		 mov	 esp, ebp
  00bac	5d		 pop	 ebp
  00bad	c3		 ret	 0
?draw_comanche_virtual_cockpit@@YGXXZ ENDP		; draw_comanche_virtual_cockpit
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\gunships\cockpits\comanche\cm_vckpt.c
;	COMDAT ?pre_render_comanche_virtual_cockpit_displays@@YGXXZ
_TEXT	SEGMENT
tv64 = -68						; size = 4
?pre_render_comanche_virtual_cockpit_displays@@YGXXZ PROC ; pre_render_comanche_virtual_cockpit_displays, COMDAT

; 498  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 44	 sub	 esp, 68			; 00000044H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 499  : 	switch (get_view_mode ())

  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ?view_mode@@3W4VIEW_MODES@@A ; view_mode
  0000e	89 45 bc	 mov	 DWORD PTR tv64[ebp], eax
  00011	83 7d bc 23	 cmp	 DWORD PTR tv64[ebp], 35	; 00000023H
  00015	74 0e		 je	 SHORT $LN4@pre_render
  00017	83 7d bc 25	 cmp	 DWORD PTR tv64[ebp], 37	; 00000025H
  0001b	7e 0a		 jle	 SHORT $LN5@pre_render
  0001d	83 7d bc 29	 cmp	 DWORD PTR tv64[ebp], 41	; 00000029H
  00021	7e 02		 jle	 SHORT $LN4@pre_render
  00023	eb 02		 jmp	 SHORT $LN5@pre_render
$LN4@pre_render:

; 500  : 	{
; 501  : 		case VIEW_MODE_VIRTUAL_COCKPIT_CREW:
; 502  : 		case VIEW_MODE_VIRTUAL_COCKPIT_PILOT_LHS_DISPLAY:
; 503  : 		case VIEW_MODE_VIRTUAL_COCKPIT_PILOT_RHS_DISPLAY:
; 504  : 		case VIEW_MODE_VIRTUAL_COCKPIT_CO_PILOT_LHS_DISPLAY:
; 505  : 		case VIEW_MODE_VIRTUAL_COCKPIT_CO_PILOT_RHS_DISPLAY:
; 506  : 		{
; 507  : 			break;

  00025	eb 0b		 jmp	 SHORT $LN2@pre_render
$LN5@pre_render:

; 508  : 		}
; 509  : 		default:
; 510  : 		{
; 511  : 			if (!get_global_draw_cockpit_graphics ())

  00027	83 3d b8 01 00
	00 00		 cmp	 DWORD PTR ?global_options@@3UGLOBAL_OPTIONS_DATA@@A+440, 0
  0002e	75 02		 jne	 SHORT $LN2@pre_render

; 512  : 			{
; 513  : 				return;

  00030	eb 13		 jmp	 SHORT $LN1@pre_render
$LN2@pre_render:

; 514  : 			}
; 515  : 
; 516  : 			break;
; 517  : 		}
; 518  : 	}
; 519  : 
; 520  : 	draw_comanche_mfd ();

  00032	e8 00 00 00 00	 call	 ?draw_comanche_mfd@@YGXXZ ; draw_comanche_mfd

; 521  : 
; 522  : 	if (get_view_mode () == VIEW_MODE_VIRTUAL_COCKPIT_CREW)

  00037	83 3d 00 00 00
	00 23		 cmp	 DWORD PTR ?view_mode@@3W4VIEW_MODES@@A, 35 ; view_mode, 00000023H
  0003e	75 05		 jne	 SHORT $LN1@pre_render

; 523  : 	{
; 524  : 		draw_comanche_hud_on_lens_texture ();

  00040	e8 00 00 00 00	 call	 ?draw_comanche_hud_on_lens_texture@@YGXXZ ; draw_comanche_hud_on_lens_texture
$LN1@pre_render:

; 525  : 	}
; 526  : }

  00045	5f		 pop	 edi
  00046	5e		 pop	 esi
  00047	5b		 pop	 ebx
  00048	8b e5		 mov	 esp, ebp
  0004a	5d		 pop	 ebp
  0004b	c3		 ret	 0
?pre_render_comanche_virtual_cockpit_displays@@YGXXZ ENDP ; pre_render_comanche_virtual_cockpit_displays
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\gunships\cockpits\comanche\cm_vckpt.c
;	COMDAT ?update_comanche_virtual_cockpit@@YGXXZ
_TEXT	SEGMENT
tv159 = -152						; size = 4
tv148 = -152						; size = 4
tv78 = -152						; size = 4
tv69 = -152						; size = 4
tv64 = -152						; size = 4
_search$ = -84						; size = 56
_cockpit_detail_level$ = -28				; size = 4
_draw_co_pilot_cockpit$ = -24				; size = 4
_draw_pilot_cockpit$ = -20				; size = 4
_draw_crew$ = -16					; size = 4
_draw_controls$ = -12					; size = 4
_draw_glass_cockpit$ = -8				; size = 4
_depth$ = -4						; size = 4
?update_comanche_virtual_cockpit@@YGXXZ PROC		; update_comanche_virtual_cockpit, COMDAT

; 199  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec 98 00 00
	00		 sub	 esp, 152		; 00000098H
  00009	53		 push	 ebx
  0000a	56		 push	 esi
  0000b	57		 push	 edi

; 200  : 	int
; 201  : 		depth,
; 202  : 		draw_glass_cockpit,
; 203  : 		draw_controls,
; 204  : 		draw_crew,
; 205  : 		draw_pilot_cockpit,
; 206  : 		draw_co_pilot_cockpit;
; 207  : 
; 208  : 	cockpit_detail_levels
; 209  : 		cockpit_detail_level;
; 210  : 
; 211  : 	object_3d_sub_object_search_data
; 212  : 		search;
; 213  : 
; 214  : 	////////////////////////////////////////
; 215  : 	//
; 216  : 	// sort out what to draw
; 217  : 	//
; 218  : 	////////////////////////////////////////
; 219  : 
; 220  : 	switch (get_view_mode ())

  0000c	a1 00 00 00 00	 mov	 eax, DWORD PTR ?view_mode@@3W4VIEW_MODES@@A ; view_mode
  00011	89 85 68 ff ff
	ff		 mov	 DWORD PTR tv64[ebp], eax
  00017	83 bd 68 ff ff
	ff 23		 cmp	 DWORD PTR tv64[ebp], 35	; 00000023H
  0001e	74 14		 je	 SHORT $LN10@update_com
  00020	83 bd 68 ff ff
	ff 25		 cmp	 DWORD PTR tv64[ebp], 37	; 00000025H
  00027	7e 1b		 jle	 SHORT $LN11@update_com
  00029	83 bd 68 ff ff
	ff 29		 cmp	 DWORD PTR tv64[ebp], 41	; 00000029H
  00030	7e 02		 jle	 SHORT $LN10@update_com
  00032	eb 10		 jmp	 SHORT $LN11@update_com
$LN10@update_com:

; 221  : 	{
; 222  : 		case VIEW_MODE_VIRTUAL_COCKPIT_CREW:
; 223  : 		case VIEW_MODE_VIRTUAL_COCKPIT_PILOT_LHS_DISPLAY:
; 224  : 		case VIEW_MODE_VIRTUAL_COCKPIT_PILOT_RHS_DISPLAY:
; 225  : 		case VIEW_MODE_VIRTUAL_COCKPIT_CO_PILOT_LHS_DISPLAY:
; 226  : 		case VIEW_MODE_VIRTUAL_COCKPIT_CO_PILOT_RHS_DISPLAY:
; 227  : 		{
; 228  : 			cockpit_detail_level = COCKPIT_DETAIL_LEVEL_HIGH;

  00034	c7 45 e4 02 00
	00 00		 mov	 DWORD PTR _cockpit_detail_level$[ebp], 2

; 229  : 
; 230  : 			draw_glass_cockpit = FALSE;

  0003b	c7 45 f8 00 00
	00 00		 mov	 DWORD PTR _draw_glass_cockpit$[ebp], 0

; 231  : 
; 232  : 			break;

  00042	eb 10		 jmp	 SHORT $LN2@update_com
$LN11@update_com:

; 233  : 		}
; 234  : 		default:
; 235  : 		{
; 236  : 			cockpit_detail_level = get_global_cockpit_detail_level ();

  00044	a1 78 03 00 00	 mov	 eax, DWORD PTR ?global_options@@3UGLOBAL_OPTIONS_DATA@@A+888
  00049	89 45 e4	 mov	 DWORD PTR _cockpit_detail_level$[ebp], eax

; 237  : 
; 238  : 			draw_glass_cockpit = get_global_glass_cockpit ();

  0004c	a1 68 03 00 00	 mov	 eax, DWORD PTR ?global_options@@3UGLOBAL_OPTIONS_DATA@@A+872
  00051	89 45 f8	 mov	 DWORD PTR _draw_glass_cockpit$[ebp], eax
$LN2@update_com:

; 239  : 
; 240  : 			break;
; 241  : 		}
; 242  : 	}
; 243  : 
; 244  : 	draw_controls = !draw_glass_cockpit;

  00054	83 7d f8 00	 cmp	 DWORD PTR _draw_glass_cockpit$[ebp], 0
  00058	75 0c		 jne	 SHORT $LN39@update_com
  0005a	c7 85 68 ff ff
	ff 01 00 00 00	 mov	 DWORD PTR tv69[ebp], 1
  00064	eb 0a		 jmp	 SHORT $LN40@update_com
$LN39@update_com:
  00066	c7 85 68 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv69[ebp], 0
$LN40@update_com:
  00070	8b 85 68 ff ff
	ff		 mov	 eax, DWORD PTR tv69[ebp]
  00076	89 45 f4	 mov	 DWORD PTR _draw_controls$[ebp], eax

; 245  : 
; 246  : 	if (get_view_mode () == VIEW_MODE_VIRTUAL_COCKPIT_CREW)

  00079	83 3d 00 00 00
	00 23		 cmp	 DWORD PTR ?view_mode@@3W4VIEW_MODES@@A, 35 ; view_mode, 00000023H
  00080	75 10		 jne	 SHORT $LN12@update_com

; 247  : 	{
; 248  : 		draw_pilot_cockpit = TRUE;

  00082	c7 45 ec 01 00
	00 00		 mov	 DWORD PTR _draw_pilot_cockpit$[ebp], 1

; 249  : 
; 250  : 		draw_co_pilot_cockpit = TRUE;

  00089	c7 45 e8 01 00
	00 00		 mov	 DWORD PTR _draw_co_pilot_cockpit$[ebp], 1

; 251  : 	}
; 252  : 	else

  00090	eb 27		 jmp	 SHORT $LN13@update_com
$LN12@update_com:

; 253  : 	{
; 254  : 		if (get_crew_role () == CREW_ROLE_PILOT)

  00092	e8 00 00 00 00	 call	 ?get_crew_role@@YG?AW4CREW_ROLES@@XZ ; get_crew_role
  00097	85 c0		 test	 eax, eax
  00099	75 10		 jne	 SHORT $LN14@update_com

; 255  : 		{
; 256  : 			draw_pilot_cockpit = TRUE;

  0009b	c7 45 ec 01 00
	00 00		 mov	 DWORD PTR _draw_pilot_cockpit$[ebp], 1

; 257  : 
; 258  : 			draw_co_pilot_cockpit = FALSE;

  000a2	c7 45 e8 00 00
	00 00		 mov	 DWORD PTR _draw_co_pilot_cockpit$[ebp], 0

; 259  : 		}
; 260  : 		else

  000a9	eb 0e		 jmp	 SHORT $LN13@update_com
$LN14@update_com:

; 261  : 		{
; 262  : 			draw_pilot_cockpit = FALSE;

  000ab	c7 45 ec 00 00
	00 00		 mov	 DWORD PTR _draw_pilot_cockpit$[ebp], 0

; 263  : 
; 264  : 			draw_co_pilot_cockpit = TRUE;

  000b2	c7 45 e8 01 00
	00 00		 mov	 DWORD PTR _draw_co_pilot_cockpit$[ebp], 1
$LN13@update_com:

; 265  : 		}
; 266  : 	}
; 267  : 
; 268  : 	//
; 269  : 	// select 3D instance
; 270  : 	//
; 271  : 
; 272  : 	if (draw_glass_cockpit)

  000b9	83 7d f8 00	 cmp	 DWORD PTR _draw_glass_cockpit$[ebp], 0
  000bd	74 3c		 je	 SHORT $LN16@update_com

; 273  : 	{
; 274  : 		if (virtual_cockpit_inst3d != virtual_cockpit_inst3d_detail_level_glass_inst3d)

  000bf	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  000c4	3b 05 00 00 00
	00		 cmp	 eax, DWORD PTR ?virtual_cockpit_inst3d_detail_level_glass_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  000ca	74 23		 je	 SHORT $LN18@update_com

; 275  : 		{
; 276  : 			virtual_cockpit_inst3d_detail_level_glass_inst3d->vp = virtual_cockpit_inst3d->vp;

  000cc	8b 35 00 00 00
	00		 mov	 esi, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  000d2	83 c6 08	 add	 esi, 8
  000d5	8b 3d 00 00 00
	00		 mov	 edi, DWORD PTR ?virtual_cockpit_inst3d_detail_level_glass_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  000db	83 c7 08	 add	 edi, 8
  000de	b9 0c 00 00 00	 mov	 ecx, 12			; 0000000cH
  000e3	f3 a5		 rep movsd

; 277  : 
; 278  : 			virtual_cockpit_inst3d = virtual_cockpit_inst3d_detail_level_glass_inst3d;

  000e5	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d_detail_level_glass_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  000ea	a3 00 00 00 00	 mov	 DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A, eax ; virtual_cockpit_inst3d
$LN18@update_com:

; 279  : 		}
; 280  : 
; 281  : 		draw_crew = FALSE;

  000ef	c7 45 f0 00 00
	00 00		 mov	 DWORD PTR _draw_crew$[ebp], 0

; 282  : 	}
; 283  : 	else

  000f6	e9 d2 00 00 00	 jmp	 $LN17@update_com
$LN16@update_com:

; 284  : 	{
; 285  : 		switch (cockpit_detail_level)

  000fb	8b 45 e4	 mov	 eax, DWORD PTR _cockpit_detail_level$[ebp]
  000fe	89 85 68 ff ff
	ff		 mov	 DWORD PTR tv78[ebp], eax
  00104	83 bd 68 ff ff
	ff 00		 cmp	 DWORD PTR tv78[ebp], 0
  0010b	74 17		 je	 SHORT $LN19@update_com
  0010d	83 bd 68 ff ff
	ff 01		 cmp	 DWORD PTR tv78[ebp], 1
  00114	74 47		 je	 SHORT $LN21@update_com
  00116	83 bd 68 ff ff
	ff 02		 cmp	 DWORD PTR tv78[ebp], 2
  0011d	74 77		 je	 SHORT $LN23@update_com
  0011f	e9 a9 00 00 00	 jmp	 $LN17@update_com
$LN19@update_com:

; 286  : 		{
; 287  : 			////////////////////////////////////////
; 288  : 			case COCKPIT_DETAIL_LEVEL_LOW:
; 289  : 			////////////////////////////////////////
; 290  : 			{
; 291  : 				if (virtual_cockpit_inst3d != virtual_cockpit_inst3d_detail_level_low_inst3d)

  00124	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  00129	3b 05 00 00 00
	00		 cmp	 eax, DWORD PTR ?virtual_cockpit_inst3d_detail_level_low_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  0012f	74 23		 je	 SHORT $LN20@update_com

; 292  : 				{
; 293  : 					virtual_cockpit_inst3d_detail_level_low_inst3d->vp = virtual_cockpit_inst3d->vp;

  00131	8b 35 00 00 00
	00		 mov	 esi, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  00137	83 c6 08	 add	 esi, 8
  0013a	8b 3d 00 00 00
	00		 mov	 edi, DWORD PTR ?virtual_cockpit_inst3d_detail_level_low_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  00140	83 c7 08	 add	 edi, 8
  00143	b9 0c 00 00 00	 mov	 ecx, 12			; 0000000cH
  00148	f3 a5		 rep movsd

; 294  : 
; 295  : 					virtual_cockpit_inst3d = virtual_cockpit_inst3d_detail_level_low_inst3d;

  0014a	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d_detail_level_low_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  0014f	a3 00 00 00 00	 mov	 DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A, eax ; virtual_cockpit_inst3d
$LN20@update_com:

; 296  : 				}
; 297  : 
; 298  : 				draw_crew = FALSE;

  00154	c7 45 f0 00 00
	00 00		 mov	 DWORD PTR _draw_crew$[ebp], 0

; 299  : 
; 300  : 				break;

  0015b	eb 70		 jmp	 SHORT $LN17@update_com
$LN21@update_com:

; 301  : 			}
; 302  : 			////////////////////////////////////////
; 303  : 			case COCKPIT_DETAIL_LEVEL_MEDIUM:
; 304  : 			////////////////////////////////////////
; 305  : 			{
; 306  : 				if (virtual_cockpit_inst3d != virtual_cockpit_inst3d_detail_level_medium_inst3d)

  0015d	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  00162	3b 05 00 00 00
	00		 cmp	 eax, DWORD PTR ?virtual_cockpit_inst3d_detail_level_medium_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  00168	74 23		 je	 SHORT $LN22@update_com

; 307  : 				{
; 308  : 					virtual_cockpit_inst3d_detail_level_medium_inst3d->vp = virtual_cockpit_inst3d->vp;

  0016a	8b 35 00 00 00
	00		 mov	 esi, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  00170	83 c6 08	 add	 esi, 8
  00173	8b 3d 00 00 00
	00		 mov	 edi, DWORD PTR ?virtual_cockpit_inst3d_detail_level_medium_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  00179	83 c7 08	 add	 edi, 8
  0017c	b9 0c 00 00 00	 mov	 ecx, 12			; 0000000cH
  00181	f3 a5		 rep movsd

; 309  : 
; 310  : 					virtual_cockpit_inst3d = virtual_cockpit_inst3d_detail_level_medium_inst3d;

  00183	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d_detail_level_medium_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  00188	a3 00 00 00 00	 mov	 DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A, eax ; virtual_cockpit_inst3d
$LN22@update_com:

; 311  : 				}
; 312  : 
; 313  : 				draw_crew = TRUE;

  0018d	c7 45 f0 01 00
	00 00		 mov	 DWORD PTR _draw_crew$[ebp], 1

; 314  : 
; 315  : 				break;

  00194	eb 37		 jmp	 SHORT $LN17@update_com
$LN23@update_com:

; 316  : 			}
; 317  : 			////////////////////////////////////////
; 318  : 			case COCKPIT_DETAIL_LEVEL_HIGH:
; 319  : 			////////////////////////////////////////
; 320  : 			{
; 321  : 				if (virtual_cockpit_inst3d != virtual_cockpit_inst3d_detail_level_high_inst3d)

  00196	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  0019b	3b 05 00 00 00
	00		 cmp	 eax, DWORD PTR ?virtual_cockpit_inst3d_detail_level_high_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  001a1	74 23		 je	 SHORT $LN24@update_com

; 322  : 				{
; 323  : 					virtual_cockpit_inst3d_detail_level_high_inst3d->vp = virtual_cockpit_inst3d->vp;

  001a3	8b 35 00 00 00
	00		 mov	 esi, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  001a9	83 c6 08	 add	 esi, 8
  001ac	8b 3d 00 00 00
	00		 mov	 edi, DWORD PTR ?virtual_cockpit_inst3d_detail_level_high_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  001b2	83 c7 08	 add	 edi, 8
  001b5	b9 0c 00 00 00	 mov	 ecx, 12			; 0000000cH
  001ba	f3 a5		 rep movsd

; 324  : 
; 325  : 					virtual_cockpit_inst3d = virtual_cockpit_inst3d_detail_level_high_inst3d;

  001bc	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d_detail_level_high_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  001c1	a3 00 00 00 00	 mov	 DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A, eax ; virtual_cockpit_inst3d
$LN24@update_com:

; 326  : 				}
; 327  : 
; 328  : 				draw_crew = TRUE;

  001c6	c7 45 f0 01 00
	00 00		 mov	 DWORD PTR _draw_crew$[ebp], 1
$LN17@update_com:

; 329  : 
; 330  : 				break;
; 331  : 			}
; 332  : 		}
; 333  : 	}
; 334  : 
; 335  : 	//
; 336  : 	// draw cockpits
; 337  : 	//
; 338  : 
; 339  : 	depth = 0;

  001cd	c7 45 fc 00 00
	00 00		 mov	 DWORD PTR _depth$[ebp], 0
$LN6@update_com:

; 340  : 
; 341  : 	while (TRUE)

  001d4	b8 01 00 00 00	 mov	 eax, 1
  001d9	85 c0		 test	 eax, eax
  001db	74 49		 je	 SHORT $LN7@update_com

; 342  : 	{
; 343  : 		search.search_depth = depth;

  001dd	8b 45 fc	 mov	 eax, DWORD PTR _depth$[ebp]
  001e0	89 45 b4	 mov	 DWORD PTR _search$[ebp+8], eax

; 344  : 		search.search_object = virtual_cockpit_inst3d;

  001e3	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  001e8	89 45 ac	 mov	 DWORD PTR _search$[ebp], eax

; 345  : 		search.sub_object_index = OBJECT_3D_SUB_OBJECT_VISIBLE_TO_PILOT;

  001eb	c7 45 b8 9f 00
	00 00		 mov	 DWORD PTR _search$[ebp+12], 159 ; 0000009fH

; 346  : 
; 347  : 		if (find_object_3d_sub_object (&search) == SUB_OBJECT_SEARCH_RESULT_OBJECT_FOUND)

  001f2	8d 45 ac	 lea	 eax, DWORD PTR _search$[ebp]
  001f5	50		 push	 eax
  001f6	e8 00 00 00 00	 call	 ?find_object_3d_sub_object@@YG?AW4SUB_OBJECT_SEARCH_RESULT_TYPES@@PAUOBJECT_3D_SUB_OBJECT_SEARCH_DATA@@@Z ; find_object_3d_sub_object
  001fb	83 f8 01	 cmp	 eax, 1
  001fe	75 19		 jne	 SHORT $LN25@update_com

; 348  : 		{
; 349  : 			search.result_sub_object->visible_object = draw_pilot_cockpit;

  00200	8b 45 ec	 mov	 eax, DWORD PTR _draw_pilot_cockpit$[ebp]
  00203	83 e0 01	 and	 eax, 1
  00206	8b 4d b0	 mov	 ecx, DWORD PTR _search$[ebp+4]
  00209	8b 51 08	 mov	 edx, DWORD PTR [ecx+8]
  0020c	83 e2 fe	 and	 edx, -2			; fffffffeH
  0020f	0b d0		 or	 edx, eax
  00211	8b 45 b0	 mov	 eax, DWORD PTR _search$[ebp+4]
  00214	89 50 08	 mov	 DWORD PTR [eax+8], edx

; 350  : 		}
; 351  : 		else

  00217	eb 02		 jmp	 SHORT $LN26@update_com
$LN25@update_com:

; 352  : 		{
; 353  : 			break;

  00219	eb 0b		 jmp	 SHORT $LN7@update_com
$LN26@update_com:

; 354  : 		}
; 355  : 
; 356  : 		depth++;

  0021b	8b 45 fc	 mov	 eax, DWORD PTR _depth$[ebp]
  0021e	83 c0 01	 add	 eax, 1
  00221	89 45 fc	 mov	 DWORD PTR _depth$[ebp], eax

; 357  : 	}

  00224	eb ae		 jmp	 SHORT $LN6@update_com
$LN7@update_com:

; 358  : 
; 359  : 	depth = 0;

  00226	c7 45 fc 00 00
	00 00		 mov	 DWORD PTR _depth$[ebp], 0
$LN8@update_com:

; 360  : 
; 361  : 	while (TRUE)

  0022d	b8 01 00 00 00	 mov	 eax, 1
  00232	85 c0		 test	 eax, eax
  00234	74 49		 je	 SHORT $LN9@update_com

; 362  : 	{
; 363  : 		search.search_depth = depth;

  00236	8b 45 fc	 mov	 eax, DWORD PTR _depth$[ebp]
  00239	89 45 b4	 mov	 DWORD PTR _search$[ebp+8], eax

; 364  : 		search.search_object = virtual_cockpit_inst3d;

  0023c	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  00241	89 45 ac	 mov	 DWORD PTR _search$[ebp], eax

; 365  : 		search.sub_object_index = OBJECT_3D_SUB_OBJECT_VISIBLE_TO_WSO;

  00244	c7 45 b8 a0 00
	00 00		 mov	 DWORD PTR _search$[ebp+12], 160 ; 000000a0H

; 366  : 
; 367  : 		if (find_object_3d_sub_object (&search) == SUB_OBJECT_SEARCH_RESULT_OBJECT_FOUND)

  0024b	8d 45 ac	 lea	 eax, DWORD PTR _search$[ebp]
  0024e	50		 push	 eax
  0024f	e8 00 00 00 00	 call	 ?find_object_3d_sub_object@@YG?AW4SUB_OBJECT_SEARCH_RESULT_TYPES@@PAUOBJECT_3D_SUB_OBJECT_SEARCH_DATA@@@Z ; find_object_3d_sub_object
  00254	83 f8 01	 cmp	 eax, 1
  00257	75 19		 jne	 SHORT $LN27@update_com

; 368  : 		{
; 369  : 			search.result_sub_object->visible_object = draw_co_pilot_cockpit;

  00259	8b 45 e8	 mov	 eax, DWORD PTR _draw_co_pilot_cockpit$[ebp]
  0025c	83 e0 01	 and	 eax, 1
  0025f	8b 4d b0	 mov	 ecx, DWORD PTR _search$[ebp+4]
  00262	8b 51 08	 mov	 edx, DWORD PTR [ecx+8]
  00265	83 e2 fe	 and	 edx, -2			; fffffffeH
  00268	0b d0		 or	 edx, eax
  0026a	8b 45 b0	 mov	 eax, DWORD PTR _search$[ebp+4]
  0026d	89 50 08	 mov	 DWORD PTR [eax+8], edx

; 370  : 		}
; 371  : 		else

  00270	eb 02		 jmp	 SHORT $LN28@update_com
$LN27@update_com:

; 372  : 		{
; 373  : 			break;

  00272	eb 0b		 jmp	 SHORT $LN9@update_com
$LN28@update_com:

; 374  : 		}
; 375  : 
; 376  : 		depth++;

  00274	8b 45 fc	 mov	 eax, DWORD PTR _depth$[ebp]
  00277	83 c0 01	 add	 eax, 1
  0027a	89 45 fc	 mov	 DWORD PTR _depth$[ebp], eax

; 377  : 	}

  0027d	eb ae		 jmp	 SHORT $LN8@update_com
$LN9@update_com:

; 378  : 
; 379  : 	//
; 380  : 	// draw crew
; 381  : 	//
; 382  : 
; 383  : //VJ 050206: wideview improvement show other pilot when in wideview
; 384  : 	draw_crew = !(get_global_wide_cockpit () && wide_cockpit_nr == WIDEVIEW_COMANCHE_PILOT);

  0027f	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?wide_cockpit@@3HA, 0 ; wide_cockpit
  00286	74 15		 je	 SHORT $LN41@update_com
  00288	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?wide_cockpit_nr@@3HA, 0 ; wide_cockpit_nr
  0028f	75 0c		 jne	 SHORT $LN41@update_com
  00291	c7 85 68 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv148[ebp], 0
  0029b	eb 0a		 jmp	 SHORT $LN42@update_com
$LN41@update_com:
  0029d	c7 85 68 ff ff
	ff 01 00 00 00	 mov	 DWORD PTR tv148[ebp], 1
$LN42@update_com:
  002a7	8b 85 68 ff ff
	ff		 mov	 eax, DWORD PTR tv148[ebp]
  002ad	89 45 f0	 mov	 DWORD PTR _draw_crew$[ebp], eax

; 385  : 
; 386  : 	search.search_depth = 0;

  002b0	c7 45 b4 00 00
	00 00		 mov	 DWORD PTR _search$[ebp+8], 0

; 387  : 	search.search_object = virtual_cockpit_inst3d;

  002b7	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  002bc	89 45 ac	 mov	 DWORD PTR _search$[ebp], eax

; 388  : 	search.sub_object_index = OBJECT_3D_SUB_OBJECT_COMANCHE_PILOT_VISIBLE;

  002bf	c7 45 b8 9d 00
	00 00		 mov	 DWORD PTR _search$[ebp+12], 157 ; 0000009dH

; 389  : 
; 390  : 	if (find_object_3d_sub_object (&search) == SUB_OBJECT_SEARCH_RESULT_OBJECT_FOUND)

  002c6	8d 45 ac	 lea	 eax, DWORD PTR _search$[ebp]
  002c9	50		 push	 eax
  002ca	e8 00 00 00 00	 call	 ?find_object_3d_sub_object@@YG?AW4SUB_OBJECT_SEARCH_RESULT_TYPES@@PAUOBJECT_3D_SUB_OBJECT_SEARCH_DATA@@@Z ; find_object_3d_sub_object
  002cf	83 f8 01	 cmp	 eax, 1
  002d2	75 17		 jne	 SHORT $LN29@update_com

; 391  : 	{
; 392  : 		search.result_sub_object->visible_object = draw_crew;

  002d4	8b 45 f0	 mov	 eax, DWORD PTR _draw_crew$[ebp]
  002d7	83 e0 01	 and	 eax, 1
  002da	8b 4d b0	 mov	 ecx, DWORD PTR _search$[ebp+4]
  002dd	8b 51 08	 mov	 edx, DWORD PTR [ecx+8]
  002e0	83 e2 fe	 and	 edx, -2			; fffffffeH
  002e3	0b d0		 or	 edx, eax
  002e5	8b 45 b0	 mov	 eax, DWORD PTR _search$[ebp+4]
  002e8	89 50 08	 mov	 DWORD PTR [eax+8], edx
$LN29@update_com:

; 393  : 	}
; 394  : 
; 395  : //VJ 050206: wideview improvement show other pilot when in wideview
; 396  : 	draw_crew = !(get_global_wide_cockpit () && wide_cockpit_nr == WIDEVIEW_COMANCHE_COPILOT);

  002eb	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?wide_cockpit@@3HA, 0 ; wide_cockpit
  002f2	74 15		 je	 SHORT $LN43@update_com
  002f4	83 3d 00 00 00
	00 01		 cmp	 DWORD PTR ?wide_cockpit_nr@@3HA, 1 ; wide_cockpit_nr
  002fb	75 0c		 jne	 SHORT $LN43@update_com
  002fd	c7 85 68 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv159[ebp], 0
  00307	eb 0a		 jmp	 SHORT $LN44@update_com
$LN43@update_com:
  00309	c7 85 68 ff ff
	ff 01 00 00 00	 mov	 DWORD PTR tv159[ebp], 1
$LN44@update_com:
  00313	8b 85 68 ff ff
	ff		 mov	 eax, DWORD PTR tv159[ebp]
  00319	89 45 f0	 mov	 DWORD PTR _draw_crew$[ebp], eax

; 397  : 
; 398  : 	search.search_depth = 0;

  0031c	c7 45 b4 00 00
	00 00		 mov	 DWORD PTR _search$[ebp+8], 0

; 399  : 	search.search_object = virtual_cockpit_inst3d;

  00323	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  00328	89 45 ac	 mov	 DWORD PTR _search$[ebp], eax

; 400  : 	search.sub_object_index = OBJECT_3D_SUB_OBJECT_COMANCHE_WSO_VISIBLE;

  0032b	c7 45 b8 9c 00
	00 00		 mov	 DWORD PTR _search$[ebp+12], 156 ; 0000009cH

; 401  : 
; 402  : 	if (find_object_3d_sub_object (&search) == SUB_OBJECT_SEARCH_RESULT_OBJECT_FOUND)

  00332	8d 45 ac	 lea	 eax, DWORD PTR _search$[ebp]
  00335	50		 push	 eax
  00336	e8 00 00 00 00	 call	 ?find_object_3d_sub_object@@YG?AW4SUB_OBJECT_SEARCH_RESULT_TYPES@@PAUOBJECT_3D_SUB_OBJECT_SEARCH_DATA@@@Z ; find_object_3d_sub_object
  0033b	83 f8 01	 cmp	 eax, 1
  0033e	75 17		 jne	 SHORT $LN30@update_com

; 403  : 	{
; 404  : 		search.result_sub_object->visible_object = draw_crew;

  00340	8b 45 f0	 mov	 eax, DWORD PTR _draw_crew$[ebp]
  00343	83 e0 01	 and	 eax, 1
  00346	8b 4d b0	 mov	 ecx, DWORD PTR _search$[ebp+4]
  00349	8b 51 08	 mov	 edx, DWORD PTR [ecx+8]
  0034c	83 e2 fe	 and	 edx, -2			; fffffffeH
  0034f	0b d0		 or	 edx, eax
  00351	8b 45 b0	 mov	 eax, DWORD PTR _search$[ebp+4]
  00354	89 50 08	 mov	 DWORD PTR [eax+8], edx
$LN30@update_com:

; 405  : 	}
; 406  : 
; 407  : 	//
; 408  : 	// draw controls
; 409  : 	//
; 410  : 
; 411  : 	search.search_depth = 0;

  00357	c7 45 b4 00 00
	00 00		 mov	 DWORD PTR _search$[ebp+8], 0

; 412  : 	search.search_object = virtual_cockpit_inst3d;

  0035e	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  00363	89 45 ac	 mov	 DWORD PTR _search$[ebp], eax

; 413  : 	search.sub_object_index = OBJECT_3D_SUB_OBJECT_COCKPIT_PILOT_JOYSTICK;

  00366	c7 45 b8 97 00
	00 00		 mov	 DWORD PTR _search$[ebp+12], 151 ; 00000097H

; 414  : 
; 415  : 	if (find_object_3d_sub_object (&search) == SUB_OBJECT_SEARCH_RESULT_OBJECT_FOUND)

  0036d	8d 45 ac	 lea	 eax, DWORD PTR _search$[ebp]
  00370	50		 push	 eax
  00371	e8 00 00 00 00	 call	 ?find_object_3d_sub_object@@YG?AW4SUB_OBJECT_SEARCH_RESULT_TYPES@@PAUOBJECT_3D_SUB_OBJECT_SEARCH_DATA@@@Z ; find_object_3d_sub_object
  00376	83 f8 01	 cmp	 eax, 1
  00379	75 17		 jne	 SHORT $LN31@update_com

; 416  : 	{
; 417  : 		search.result_sub_object->visible_object = draw_controls;

  0037b	8b 45 f4	 mov	 eax, DWORD PTR _draw_controls$[ebp]
  0037e	83 e0 01	 and	 eax, 1
  00381	8b 4d b0	 mov	 ecx, DWORD PTR _search$[ebp+4]
  00384	8b 51 08	 mov	 edx, DWORD PTR [ecx+8]
  00387	83 e2 fe	 and	 edx, -2			; fffffffeH
  0038a	0b d0		 or	 edx, eax
  0038c	8b 45 b0	 mov	 eax, DWORD PTR _search$[ebp+4]
  0038f	89 50 08	 mov	 DWORD PTR [eax+8], edx
$LN31@update_com:

; 418  : 	}
; 419  : 
; 420  : 	search.search_depth = 0;

  00392	c7 45 b4 00 00
	00 00		 mov	 DWORD PTR _search$[ebp+8], 0

; 421  : 	search.search_object = virtual_cockpit_inst3d;

  00399	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  0039e	89 45 ac	 mov	 DWORD PTR _search$[ebp], eax

; 422  : 	search.sub_object_index = OBJECT_3D_SUB_OBJECT_COCKPIT_PILOT_COLLECTIVE;

  003a1	c7 45 b8 99 00
	00 00		 mov	 DWORD PTR _search$[ebp+12], 153 ; 00000099H

; 423  : 
; 424  : 	if (find_object_3d_sub_object (&search) == SUB_OBJECT_SEARCH_RESULT_OBJECT_FOUND)

  003a8	8d 45 ac	 lea	 eax, DWORD PTR _search$[ebp]
  003ab	50		 push	 eax
  003ac	e8 00 00 00 00	 call	 ?find_object_3d_sub_object@@YG?AW4SUB_OBJECT_SEARCH_RESULT_TYPES@@PAUOBJECT_3D_SUB_OBJECT_SEARCH_DATA@@@Z ; find_object_3d_sub_object
  003b1	83 f8 01	 cmp	 eax, 1
  003b4	75 17		 jne	 SHORT $LN32@update_com

; 425  : 	{
; 426  : 		search.result_sub_object->visible_object = draw_controls;

  003b6	8b 45 f4	 mov	 eax, DWORD PTR _draw_controls$[ebp]
  003b9	83 e0 01	 and	 eax, 1
  003bc	8b 4d b0	 mov	 ecx, DWORD PTR _search$[ebp+4]
  003bf	8b 51 08	 mov	 edx, DWORD PTR [ecx+8]
  003c2	83 e2 fe	 and	 edx, -2			; fffffffeH
  003c5	0b d0		 or	 edx, eax
  003c7	8b 45 b0	 mov	 eax, DWORD PTR _search$[ebp+4]
  003ca	89 50 08	 mov	 DWORD PTR [eax+8], edx
$LN32@update_com:

; 427  : 	}
; 428  : 
; 429  : 	search.search_depth = 0;

  003cd	c7 45 b4 00 00
	00 00		 mov	 DWORD PTR _search$[ebp+8], 0

; 430  : 	search.search_object = virtual_cockpit_inst3d;

  003d4	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  003d9	89 45 ac	 mov	 DWORD PTR _search$[ebp], eax

; 431  : 	search.sub_object_index = OBJECT_3D_SUB_OBJECT_COCKPIT_WSO_JOYSTICK;

  003dc	c7 45 b8 98 00
	00 00		 mov	 DWORD PTR _search$[ebp+12], 152 ; 00000098H

; 432  : 
; 433  : 	if (find_object_3d_sub_object (&search) == SUB_OBJECT_SEARCH_RESULT_OBJECT_FOUND)

  003e3	8d 45 ac	 lea	 eax, DWORD PTR _search$[ebp]
  003e6	50		 push	 eax
  003e7	e8 00 00 00 00	 call	 ?find_object_3d_sub_object@@YG?AW4SUB_OBJECT_SEARCH_RESULT_TYPES@@PAUOBJECT_3D_SUB_OBJECT_SEARCH_DATA@@@Z ; find_object_3d_sub_object
  003ec	83 f8 01	 cmp	 eax, 1
  003ef	75 17		 jne	 SHORT $LN33@update_com

; 434  : 	{
; 435  : 		search.result_sub_object->visible_object = draw_controls;

  003f1	8b 45 f4	 mov	 eax, DWORD PTR _draw_controls$[ebp]
  003f4	83 e0 01	 and	 eax, 1
  003f7	8b 4d b0	 mov	 ecx, DWORD PTR _search$[ebp+4]
  003fa	8b 51 08	 mov	 edx, DWORD PTR [ecx+8]
  003fd	83 e2 fe	 and	 edx, -2			; fffffffeH
  00400	0b d0		 or	 edx, eax
  00402	8b 45 b0	 mov	 eax, DWORD PTR _search$[ebp+4]
  00405	89 50 08	 mov	 DWORD PTR [eax+8], edx
$LN33@update_com:

; 436  : 	}
; 437  : 
; 438  : 	search.search_depth = 0;

  00408	c7 45 b4 00 00
	00 00		 mov	 DWORD PTR _search$[ebp+8], 0

; 439  : 	search.search_object = virtual_cockpit_inst3d;

  0040f	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  00414	89 45 ac	 mov	 DWORD PTR _search$[ebp], eax

; 440  : 	search.sub_object_index = OBJECT_3D_SUB_OBJECT_COCKPIT_WSO_COLLECTIVE;

  00417	c7 45 b8 9a 00
	00 00		 mov	 DWORD PTR _search$[ebp+12], 154 ; 0000009aH

; 441  : 
; 442  : 	if (find_object_3d_sub_object (&search) == SUB_OBJECT_SEARCH_RESULT_OBJECT_FOUND)

  0041e	8d 45 ac	 lea	 eax, DWORD PTR _search$[ebp]
  00421	50		 push	 eax
  00422	e8 00 00 00 00	 call	 ?find_object_3d_sub_object@@YG?AW4SUB_OBJECT_SEARCH_RESULT_TYPES@@PAUOBJECT_3D_SUB_OBJECT_SEARCH_DATA@@@Z ; find_object_3d_sub_object
  00427	83 f8 01	 cmp	 eax, 1
  0042a	75 17		 jne	 SHORT $LN34@update_com

; 443  : 	{
; 444  : 		search.result_sub_object->visible_object = draw_controls;

  0042c	8b 45 f4	 mov	 eax, DWORD PTR _draw_controls$[ebp]
  0042f	83 e0 01	 and	 eax, 1
  00432	8b 4d b0	 mov	 ecx, DWORD PTR _search$[ebp+4]
  00435	8b 51 08	 mov	 edx, DWORD PTR [ecx+8]
  00438	83 e2 fe	 and	 edx, -2			; fffffffeH
  0043b	0b d0		 or	 edx, eax
  0043d	8b 45 b0	 mov	 eax, DWORD PTR _search$[ebp+4]
  00440	89 50 08	 mov	 DWORD PTR [eax+8], edx
$LN34@update_com:

; 445  : 	}
; 446  : 
; 447  : 	////////////////////////////////////////
; 448  : 	//
; 449  : 	// update animations
; 450  : 	//
; 451  : 	////////////////////////////////////////
; 452  : 
; 453  : 	//
; 454  : 	// crew animation
; 455  : 	//
; 456  : 
; 457  : 	update_comanche_crew_animation ();

  00443	e8 00 00 00 00	 call	 ?update_comanche_crew_animation@@YGXXZ ; update_comanche_crew_animation

; 458  : 
; 459  : 	//
; 460  : 	// canopy doors
; 461  : 	//
; 462  : 
; 463  : 	animate_comanche_virtual_cockpit_canopy_doors ();

  00448	e8 00 00 00 00	 call	 ?animate_comanche_virtual_cockpit_canopy_doors@@YGXXZ ; animate_comanche_virtual_cockpit_canopy_doors

; 464  : 
; 465  : 	////////////////////////////////////////
; 466  : 	//
; 467  : 	// sort static hands
; 468  : 	//
; 469  : 	////////////////////////////////////////
; 470  : 
; 471  : 	if (!draw_crew)

  0044d	83 7d f0 00	 cmp	 DWORD PTR _draw_crew$[ebp], 0
  00451	75 66		 jne	 SHORT $LN1@update_com

; 472  : 	{
; 473  : 		search.search_depth = 0;

  00453	c7 45 b4 00 00
	00 00		 mov	 DWORD PTR _search$[ebp+8], 0

; 474  : 		search.search_object = virtual_cockpit_inst3d;

  0045a	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  0045f	89 45 ac	 mov	 DWORD PTR _search$[ebp], eax

; 475  : 		search.sub_object_index = OBJECT_3D_SUB_OBJECT_COCKPIT_PILOT_HAND_STATIC;

  00462	c7 45 b8 9e 00
	00 00		 mov	 DWORD PTR _search$[ebp+12], 158 ; 0000009eH

; 476  : 
; 477  : 		if (find_object_3d_sub_object (&search) == SUB_OBJECT_SEARCH_RESULT_OBJECT_FOUND)

  00469	8d 45 ac	 lea	 eax, DWORD PTR _search$[ebp]
  0046c	50		 push	 eax
  0046d	e8 00 00 00 00	 call	 ?find_object_3d_sub_object@@YG?AW4SUB_OBJECT_SEARCH_RESULT_TYPES@@PAUOBJECT_3D_SUB_OBJECT_SEARCH_DATA@@@Z ; find_object_3d_sub_object
  00472	83 f8 01	 cmp	 eax, 1
  00475	75 0f		 jne	 SHORT $LN36@update_com

; 478  : 		{
; 479  : 			search.result_sub_object->visible_object = FALSE;

  00477	8b 45 b0	 mov	 eax, DWORD PTR _search$[ebp+4]
  0047a	8b 48 08	 mov	 ecx, DWORD PTR [eax+8]
  0047d	83 e1 fe	 and	 ecx, -2			; fffffffeH
  00480	8b 55 b0	 mov	 edx, DWORD PTR _search$[ebp+4]
  00483	89 4a 08	 mov	 DWORD PTR [edx+8], ecx
$LN36@update_com:

; 480  : 		}
; 481  : 
; 482  : 		search.search_depth = 0;

  00486	c7 45 b4 00 00
	00 00		 mov	 DWORD PTR _search$[ebp+8], 0

; 483  : 		search.search_object = virtual_cockpit_inst3d;

  0048d	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  00492	89 45 ac	 mov	 DWORD PTR _search$[ebp], eax

; 484  : 		search.sub_object_index = OBJECT_3D_SUB_OBJECT_COCKPIT_WSO_HAND_STATIC;

  00495	c7 45 b8 d0 00
	00 00		 mov	 DWORD PTR _search$[ebp+12], 208 ; 000000d0H

; 485  : 
; 486  : 		if (find_object_3d_sub_object (&search) == SUB_OBJECT_SEARCH_RESULT_OBJECT_FOUND)

  0049c	8d 45 ac	 lea	 eax, DWORD PTR _search$[ebp]
  0049f	50		 push	 eax
  004a0	e8 00 00 00 00	 call	 ?find_object_3d_sub_object@@YG?AW4SUB_OBJECT_SEARCH_RESULT_TYPES@@PAUOBJECT_3D_SUB_OBJECT_SEARCH_DATA@@@Z ; find_object_3d_sub_object
  004a5	83 f8 01	 cmp	 eax, 1
  004a8	75 0f		 jne	 SHORT $LN1@update_com

; 487  : 		{
; 488  : 			search.result_sub_object->visible_object = FALSE;

  004aa	8b 45 b0	 mov	 eax, DWORD PTR _search$[ebp+4]
  004ad	8b 48 08	 mov	 ecx, DWORD PTR [eax+8]
  004b0	83 e1 fe	 and	 ecx, -2			; fffffffeH
  004b3	8b 55 b0	 mov	 edx, DWORD PTR _search$[ebp+4]
  004b6	89 4a 08	 mov	 DWORD PTR [edx+8], ecx
$LN1@update_com:

; 489  : 		}
; 490  : 	}
; 491  : }

  004b9	5f		 pop	 edi
  004ba	5e		 pop	 esi
  004bb	5b		 pop	 ebx
  004bc	8b e5		 mov	 esp, ebp
  004be	5d		 pop	 ebp
  004bf	c3		 ret	 0
?update_comanche_virtual_cockpit@@YGXXZ ENDP		; update_comanche_virtual_cockpit
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\gunships\cockpits\comanche\cm_vckpt.c
;	COMDAT ?deinitialise_comanche_virtual_cockpit@@YGXXZ
_TEXT	SEGMENT
?deinitialise_comanche_virtual_cockpit@@YGXXZ PROC	; deinitialise_comanche_virtual_cockpit, COMDAT

; 158  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 159  : 	//
; 160  : 	// 3D instances
; 161  : 	//
; 162  : 
; 163  : 	destruct_3d_object (virtual_cockpit_inst3d_detail_level_high_inst3d);

  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d_detail_level_high_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  0000e	50		 push	 eax
  0000f	e8 00 00 00 00	 call	 ?destruct_3d_object@@YGXPAUOBJECT_3D_INSTANCE@@@Z ; destruct_3d_object

; 164  : 
; 165  : 	destruct_3d_object (virtual_cockpit_inst3d_detail_level_medium_inst3d);

  00014	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d_detail_level_medium_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  00019	50		 push	 eax
  0001a	e8 00 00 00 00	 call	 ?destruct_3d_object@@YGXPAUOBJECT_3D_INSTANCE@@@Z ; destruct_3d_object

; 166  : 
; 167  : 	destruct_3d_object (virtual_cockpit_inst3d_detail_level_low_inst3d);

  0001f	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d_detail_level_low_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  00024	50		 push	 eax
  00025	e8 00 00 00 00	 call	 ?destruct_3d_object@@YGXPAUOBJECT_3D_INSTANCE@@@Z ; destruct_3d_object

; 168  : 
; 169  : 	destruct_3d_object (virtual_cockpit_inst3d_detail_level_glass_inst3d);

  0002a	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d_detail_level_glass_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  0002f	50		 push	 eax
  00030	e8 00 00 00 00	 call	 ?destruct_3d_object@@YGXPAUOBJECT_3D_INSTANCE@@@Z ; destruct_3d_object

; 170  : 
; 171  : 	virtual_cockpit_inst3d = NULL;

  00035	c7 05 00 00 00
	00 00 00 00 00	 mov	 DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A, 0 ; virtual_cockpit_inst3d

; 172  : 
; 173  : 	//
; 174  : 	// wipers and rain
; 175  : 	//
; 176  : 
; 177  : 	deinitialise_comanche_virtual_cockpit_wiper_and_rain_effect ();

  0003f	e8 00 00 00 00	 call	 ?deinitialise_comanche_virtual_cockpit_wiper_and_rain_effect@@YGXXZ ; deinitialise_comanche_virtual_cockpit_wiper_and_rain_effect

; 178  : 
; 179  : 	//
; 180  : 	// crew animation
; 181  : 	//
; 182  : 
; 183  : 	deinitialise_comanche_crew_animation ();

  00044	e8 00 00 00 00	 call	 ?deinitialise_comanche_crew_animation@@YGXXZ ; deinitialise_comanche_crew_animation

; 184  : 
; 185  : 	//
; 186  : 	// virtual cockpit cameras
; 187  : 	//
; 188  : 
; 189  : 	deinitialise_common_virtual_cockpit_cameras ();

  00049	e8 00 00 00 00	 call	 ?deinitialise_common_virtual_cockpit_cameras@@YGXXZ ; deinitialise_common_virtual_cockpit_cameras

; 190  : 
; 191  : 
; 192  : }

  0004e	5f		 pop	 edi
  0004f	5e		 pop	 esi
  00050	5b		 pop	 ebx
  00051	8b e5		 mov	 esp, ebp
  00053	5d		 pop	 ebp
  00054	c3		 ret	 0
?deinitialise_comanche_virtual_cockpit@@YGXXZ ENDP	; deinitialise_comanche_virtual_cockpit
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\gunships\cockpits\comanche\cm_vckpt.c
;	COMDAT ?initialise_comanche_virtual_cockpit@@YGXXZ
_TEXT	SEGMENT
?initialise_comanche_virtual_cockpit@@YGXXZ PROC	; initialise_comanche_virtual_cockpit, COMDAT

; 103  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 104  : 	//
; 105  : 	// 3D instances
; 106  : 	//
; 107  : 
; 108  : 	virtual_cockpit_inst3d_detail_level_high_inst3d = construct_3d_object (OBJECT_3D_COMANCHE_COCKPIT_LEVEL_1);

  00009	68 dd 09 00 00	 push	 2525			; 000009ddH
  0000e	e8 00 00 00 00	 call	 ?construct_3d_object@@YGPAUOBJECT_3D_INSTANCE@@H@Z ; construct_3d_object
  00013	a3 00 00 00 00	 mov	 DWORD PTR ?virtual_cockpit_inst3d_detail_level_high_inst3d@@3PAUOBJECT_3D_INSTANCE@@A, eax

; 109  : 
; 110  : 	virtual_cockpit_inst3d_detail_level_medium_inst3d = construct_3d_object (OBJECT_3D_COMANCHE_COCKPIT_LEVEL_2);

  00018	68 de 09 00 00	 push	 2526			; 000009deH
  0001d	e8 00 00 00 00	 call	 ?construct_3d_object@@YGPAUOBJECT_3D_INSTANCE@@H@Z ; construct_3d_object
  00022	a3 00 00 00 00	 mov	 DWORD PTR ?virtual_cockpit_inst3d_detail_level_medium_inst3d@@3PAUOBJECT_3D_INSTANCE@@A, eax

; 111  : 
; 112  : 	virtual_cockpit_inst3d_detail_level_low_inst3d = construct_3d_object (OBJECT_3D_COMANCHE_COCKPIT_LEVEL_3);

  00027	68 df 09 00 00	 push	 2527			; 000009dfH
  0002c	e8 00 00 00 00	 call	 ?construct_3d_object@@YGPAUOBJECT_3D_INSTANCE@@H@Z ; construct_3d_object
  00031	a3 00 00 00 00	 mov	 DWORD PTR ?virtual_cockpit_inst3d_detail_level_low_inst3d@@3PAUOBJECT_3D_INSTANCE@@A, eax

; 113  : 
; 114  : 	virtual_cockpit_inst3d_detail_level_glass_inst3d = construct_3d_object (OBJECT_3D_COMANCHE_COCKPIT_JELLY);

  00036	68 dc 09 00 00	 push	 2524			; 000009dcH
  0003b	e8 00 00 00 00	 call	 ?construct_3d_object@@YGPAUOBJECT_3D_INSTANCE@@H@Z ; construct_3d_object
  00040	a3 00 00 00 00	 mov	 DWORD PTR ?virtual_cockpit_inst3d_detail_level_glass_inst3d@@3PAUOBJECT_3D_INSTANCE@@A, eax

; 115  : 
; 116  : 	virtual_cockpit_inst3d = virtual_cockpit_inst3d_detail_level_high_inst3d;

  00045	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d_detail_level_high_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  0004a	a3 00 00 00 00	 mov	 DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A, eax ; virtual_cockpit_inst3d

; 117  : 
; 118  : 	pilot_head_pitch_datum = get_comanche_pilot_head_pitch_datum ();

  0004f	e8 00 00 00 00	 call	 ?get_comanche_pilot_head_pitch_datum@@YGMXZ ; get_comanche_pilot_head_pitch_datum
  00054	d9 1d 00 00 00
	00		 fstp	 DWORD PTR ?pilot_head_pitch_datum@@3MA ; pilot_head_pitch_datum

; 119  : 
; 120  : 	co_pilot_head_pitch_datum = get_comanche_co_pilot_head_pitch_datum ();

  0005a	e8 00 00 00 00	 call	 ?get_comanche_co_pilot_head_pitch_datum@@YGMXZ ; get_comanche_co_pilot_head_pitch_datum
  0005f	d9 1d 00 00 00
	00		 fstp	 DWORD PTR ?co_pilot_head_pitch_datum@@3MA ; co_pilot_head_pitch_datum

; 121  : 
; 122  : 	//
; 123  : 	// wipers and rain
; 124  : 	//
; 125  : 
; 126  : 	initialise_comanche_virtual_cockpit_wiper_and_rain_effect ();

  00065	e8 00 00 00 00	 call	 ?initialise_comanche_virtual_cockpit_wiper_and_rain_effect@@YGXXZ ; initialise_comanche_virtual_cockpit_wiper_and_rain_effect

; 127  : 
; 128  : 	//
; 129  : 	// crew animation
; 130  : 	//
; 131  : 
; 132  : 	initialise_comanche_crew_animation ();

  0006a	e8 00 00 00 00	 call	 ?initialise_comanche_crew_animation@@YGXXZ ; initialise_comanche_crew_animation

; 133  : 
; 134  : 	//
; 135  : 	// canopy doors
; 136  : 	//
; 137  : 
; 138  : 	initialise_comanche_virtual_cockpit_canopy_doors ();

  0006f	e8 00 00 00 00	 call	 ?initialise_comanche_virtual_cockpit_canopy_doors@@YGXXZ ; initialise_comanche_virtual_cockpit_canopy_doors

; 139  : 
; 140  : 	//
; 141  : 	// virtual cockpit cameras
; 142  : 	//
; 143  : 
; 144  : 	initialise_common_virtual_cockpit_cameras ();

  00074	e8 00 00 00 00	 call	 ?initialise_common_virtual_cockpit_cameras@@YGXXZ ; initialise_common_virtual_cockpit_cameras

; 145  : 
; 146  : //VJ 050208 cleaing up wideview
; 147  : 	wide_cockpit_nr = WIDEVIEW_COMANCHE_PILOT;

  00079	c7 05 00 00 00
	00 00 00 00 00	 mov	 DWORD PTR ?wide_cockpit_nr@@3HA, 0 ; wide_cockpit_nr

; 148  : //VJ wideview mod, date: 20-mar-03
; 149  : //start up in normal view because when you switch to wideview the parameters are read
; 150  : 	set_global_wide_cockpit(FALSE);

  00083	c7 05 00 00 00
	00 00 00 00 00	 mov	 DWORD PTR ?wide_cockpit@@3HA, 0 ; wide_cockpit

; 151  : }

  0008d	5f		 pop	 edi
  0008e	5e		 pop	 esi
  0008f	5b		 pop	 ebx
  00090	8b e5		 mov	 esp, ebp
  00092	5d		 pop	 ebp
  00093	c3		 ret	 0
?initialise_comanche_virtual_cockpit@@YGXXZ ENDP	; initialise_comanche_virtual_cockpit
_TEXT	ENDS
END
