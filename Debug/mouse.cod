; Listing generated by Microsoft (R) Optimizing Compiler Version 19.16.27045.0 

	TITLE	C:\Users\nhv90\Projects\eech\modules\system\mouse.c
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB MSVCRTD
INCLUDELIB OLDNAMES

PUBLIC	?mouse_handle@@3PAXA				; mouse_handle
_BSS	SEGMENT
?mouse_handle@@3PAXA DD 01H DUP (?)			; mouse_handle
_BSS	ENDS
PUBLIC	?initialise_mouse@@YGXXZ			; initialise_mouse
PUBLIC	?deinitialise_mouse@@YGXXZ			; deinitialise_mouse
PUBLIC	?generate_mouse_events@@YGXXZ			; generate_mouse_events
PUBLIC	?process_mouse_event@@YGHPAUEVENT@@@Z		; process_mouse_event
PUBLIC	?set_mouse_on@@YGXXZ				; set_mouse_on
PUBLIC	?set_mouse_off@@YGXXZ				; set_mouse_off
PUBLIC	?get_mouse_x@@YGHXZ				; get_mouse_x
PUBLIC	?set_mouse_x@@YGXH@Z				; set_mouse_x
PUBLIC	?get_mouse_y@@YGHXZ				; get_mouse_y
PUBLIC	?set_mouse_y@@YGXH@Z				; set_mouse_y
PUBLIC	?get_mouse_update_flag@@YGHXZ			; get_mouse_update_flag
PUBLIC	?get_mouse_move_delta_x@@YGHXZ			; get_mouse_move_delta_x
PUBLIC	?get_mouse_move_delta_y@@YGHXZ			; get_mouse_move_delta_y
PUBLIC	?get_absolute_mouse_x@@YGHXZ			; get_absolute_mouse_x
PUBLIC	?get_absolute_mouse_y@@YGHXZ			; get_absolute_mouse_y
PUBLIC	?reset_absolute_mouse@@YGXXZ			; reset_absolute_mouse
PUBLIC	?set_absolute_mouse_x@@YGXH@Z			; set_absolute_mouse_x
PUBLIC	?set_absolute_mouse_y@@YGXH@Z			; set_absolute_mouse_y
PUBLIC	?get_mouse_on@@YGHXZ				; get_mouse_on
PUBLIC	?move_mouse@@YGXHH@Z				; move_mouse
PUBLIC	?mouse_activation_routine@@YGXH@Z		; mouse_activation_routine
PUBLIC	??_C@_0CI@JEHIIDHE@Unable?5to?5create?5a?5handle?5for?5t@ ; `string'
EXTRN	_abs:PROC
EXTRN	__imp__CreateEventA@16:PROC
EXTRN	__imp__GetClientRect@8:PROC
EXTRN	__imp__GetCursorPos@4:PROC
EXTRN	__imp__ClientToScreen@8:PROC
EXTRN	?register_system_message_function@@YGHHP6GJPAUHWND__@@IIJ@Z@Z:PROC ; register_system_message_function
EXTRN	?register_pre_activate_message_function@@YGHP6GXH@Z@Z:PROC ; register_pre_activate_message_function
EXTRN	?debug_fatal@@YAXPBDZZ:PROC			; debug_fatal
EXTRN	?set_mouse_graphic_on@@YGXXZ:PROC		; set_mouse_graphic_on
EXTRN	?set_mouse_graphic_off@@YGXXZ:PROC		; set_mouse_graphic_off
EXTRN	?create_mouse_button_event@@YGXW4DEVICE_EVENTS@@W4BUTTON_STATES@@@Z:PROC ; create_mouse_button_event
EXTRN	?create_mouse_move_event@@YGXHHH@Z:PROC		; create_mouse_move_event
EXTRN	_IID_IDirectInputDevice7A:BYTE
EXTRN	_GUID_SysMouse:BYTE
EXTRN	_c_dfDIMouse:BYTE
EXTRN	?application_window@@3PAUHWND__@@A:DWORD	; application_window
EXTRN	?direct_input@@3PAUIDirectInput7A@@A:DWORD	; direct_input
EXTRN	?input_system_type@@3W4INPUT_TYPES@@A:DWORD	; input_system_type
EXTRN	?registered_events@@3PAY08UREGISTERED_EVENT_TYPE@@A:BYTE ; registered_events
EXTRN	?current_modifier_states@@3HA:DWORD		; current_modifier_states
EXTRN	?application_video_width@@3HA:DWORD		; application_video_width
EXTRN	?application_video_height@@3HA:DWORD		; application_video_height
EXTRN	?command_line_mouse_look_speed@@3HA:DWORD	; command_line_mouse_look_speed
EXTRN	?in_flight_game_mode@@3W4IN_FLIGHT_GAME_MODES@@A:DWORD ; in_flight_game_mode
_BSS	SEGMENT
?direct_input_mouse@@3PAUIDirectInputDevice7A@@A DD 01H DUP (?) ; direct_input_mouse
?direct_input_mouse_events@@3PAUDIDEVICEOBJECTDATA@@A DB 01000H DUP (?) ; direct_input_mouse_events
?mouse_position_x@@3HA DD 01H DUP (?)			; mouse_position_x
?mouse_position_y@@3HA DD 01H DUP (?)			; mouse_position_y
?abs_mouse_x@@3HA DD 01H DUP (?)			; abs_mouse_x
?abs_mouse_y@@3HA DD 01H DUP (?)			; abs_mouse_y
?mouse_move_delta_x@@3HA DD 01H DUP (?)			; mouse_move_delta_x
?mouse_move_delta_y@@3HA DD 01H DUP (?)			; mouse_move_delta_y
?mouse_update_flag@@3HA DD 01H DUP (?)			; mouse_update_flag
?mouse_on@@3HA DD 01H DUP (?)				; mouse_on
?windows_cursor_position@@3UtagPOINT@@A DQ 01H DUP (?)	; windows_cursor_position
?remove_mouse_graphic_function@@3P6GXHH@ZA DD 01H DUP (?) ; remove_mouse_graphic_function
?draw_mouse_graphic_function@@3P6GXHH@ZA DD 01H DUP (?)	; draw_mouse_graphic_function
_BSS	ENDS
;	COMDAT ??_C@_0CI@JEHIIDHE@Unable?5to?5create?5a?5handle?5for?5t@
CONST	SEGMENT
??_C@_0CI@JEHIIDHE@Unable?5to?5create?5a?5handle?5for?5t@ DB 'Unable to c'
	DB	'reate a handle for the mouse', 00H		; `string'
CONST	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\modules\system\mouse.c
;	COMDAT ?windows_middle_button_down_routine@@YGJPAUHWND__@@IIJ@Z
_TEXT	SEGMENT
_hWnd$ = 8						; size = 4
_message$ = 12						; size = 4
_wParam$ = 16						; size = 4
_lParam$ = 20						; size = 4
?windows_middle_button_down_routine@@YGJPAUHWND__@@IIJ@Z PROC ; windows_middle_button_down_routine, COMDAT

; 1007 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 1008 : 
; 1009 : 	hWnd;
; 1010 : 	message;
; 1011 : 	wParam;
; 1012 : 	lParam;
; 1013 : 
; 1014 : 	create_mouse_button_event ( MOUSE_MIDDLE_BUTTON, BUTTON_STATE_DOWN );

  00009	6a 02		 push	 2
  0000b	68 09 01 00 00	 push	 265			; 00000109H
  00010	e8 00 00 00 00	 call	 ?create_mouse_button_event@@YGXW4DEVICE_EVENTS@@W4BUTTON_STATES@@@Z ; create_mouse_button_event

; 1015 : 
; 1016 : 	return ( 0 );

  00015	33 c0		 xor	 eax, eax

; 1017 : }

  00017	5f		 pop	 edi
  00018	5e		 pop	 esi
  00019	5b		 pop	 ebx
  0001a	8b e5		 mov	 esp, ebp
  0001c	5d		 pop	 ebp
  0001d	c2 10 00	 ret	 16			; 00000010H
?windows_middle_button_down_routine@@YGJPAUHWND__@@IIJ@Z ENDP ; windows_middle_button_down_routine
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\modules\system\mouse.c
;	COMDAT ?windows_middle_button_up_routine@@YGJPAUHWND__@@IIJ@Z
_TEXT	SEGMENT
_hWnd$ = 8						; size = 4
_message$ = 12						; size = 4
_wParam$ = 16						; size = 4
_lParam$ = 20						; size = 4
?windows_middle_button_up_routine@@YGJPAUHWND__@@IIJ@Z PROC ; windows_middle_button_up_routine, COMDAT

; 990  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 991  : 
; 992  : 	hWnd;
; 993  : 	message;
; 994  : 	wParam;
; 995  : 	lParam;
; 996  : 
; 997  : 	create_mouse_button_event ( MOUSE_MIDDLE_BUTTON, BUTTON_STATE_UP );

  00009	6a 01		 push	 1
  0000b	68 09 01 00 00	 push	 265			; 00000109H
  00010	e8 00 00 00 00	 call	 ?create_mouse_button_event@@YGXW4DEVICE_EVENTS@@W4BUTTON_STATES@@@Z ; create_mouse_button_event

; 998  : 
; 999  : 	return ( 0 );

  00015	33 c0		 xor	 eax, eax

; 1000 : }

  00017	5f		 pop	 edi
  00018	5e		 pop	 esi
  00019	5b		 pop	 ebx
  0001a	8b e5		 mov	 esp, ebp
  0001c	5d		 pop	 ebp
  0001d	c2 10 00	 ret	 16			; 00000010H
?windows_middle_button_up_routine@@YGJPAUHWND__@@IIJ@Z ENDP ; windows_middle_button_up_routine
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\modules\system\mouse.c
;	COMDAT ?windows_right_button_down_routine@@YGJPAUHWND__@@IIJ@Z
_TEXT	SEGMENT
_hWnd$ = 8						; size = 4
_message$ = 12						; size = 4
_wParam$ = 16						; size = 4
_lParam$ = 20						; size = 4
?windows_right_button_down_routine@@YGJPAUHWND__@@IIJ@Z PROC ; windows_right_button_down_routine, COMDAT

; 971  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 972  : 
; 973  : 	hWnd;
; 974  : 	message;
; 975  : 	wParam;
; 976  : 	lParam;
; 977  : 
; 978  : 	create_mouse_button_event ( MOUSE_RIGHT_BUTTON, BUTTON_STATE_DOWN );

  00009	6a 02		 push	 2
  0000b	68 01 01 00 00	 push	 257			; 00000101H
  00010	e8 00 00 00 00	 call	 ?create_mouse_button_event@@YGXW4DEVICE_EVENTS@@W4BUTTON_STATES@@@Z ; create_mouse_button_event

; 979  : 
; 980  : 	return ( 0 );

  00015	33 c0		 xor	 eax, eax

; 981  : }

  00017	5f		 pop	 edi
  00018	5e		 pop	 esi
  00019	5b		 pop	 ebx
  0001a	8b e5		 mov	 esp, ebp
  0001c	5d		 pop	 ebp
  0001d	c2 10 00	 ret	 16			; 00000010H
?windows_right_button_down_routine@@YGJPAUHWND__@@IIJ@Z ENDP ; windows_right_button_down_routine
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\modules\system\mouse.c
;	COMDAT ?windows_right_button_up_routine@@YGJPAUHWND__@@IIJ@Z
_TEXT	SEGMENT
_hWnd$ = 8						; size = 4
_message$ = 12						; size = 4
_wParam$ = 16						; size = 4
_lParam$ = 20						; size = 4
?windows_right_button_up_routine@@YGJPAUHWND__@@IIJ@Z PROC ; windows_right_button_up_routine, COMDAT

; 954  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 955  : 
; 956  : 	hWnd;
; 957  : 	message;
; 958  : 	wParam;
; 959  : 	lParam;
; 960  : 
; 961  : 	create_mouse_button_event ( MOUSE_RIGHT_BUTTON, BUTTON_STATE_UP );

  00009	6a 01		 push	 1
  0000b	68 01 01 00 00	 push	 257			; 00000101H
  00010	e8 00 00 00 00	 call	 ?create_mouse_button_event@@YGXW4DEVICE_EVENTS@@W4BUTTON_STATES@@@Z ; create_mouse_button_event

; 962  : 
; 963  : 	return ( 0 );

  00015	33 c0		 xor	 eax, eax

; 964  : }

  00017	5f		 pop	 edi
  00018	5e		 pop	 esi
  00019	5b		 pop	 ebx
  0001a	8b e5		 mov	 esp, ebp
  0001c	5d		 pop	 ebp
  0001d	c2 10 00	 ret	 16			; 00000010H
?windows_right_button_up_routine@@YGJPAUHWND__@@IIJ@Z ENDP ; windows_right_button_up_routine
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\modules\system\mouse.c
;	COMDAT ?windows_left_button_down_routine@@YGJPAUHWND__@@IIJ@Z
_TEXT	SEGMENT
_hWnd$ = 8						; size = 4
_message$ = 12						; size = 4
_wParam$ = 16						; size = 4
_lParam$ = 20						; size = 4
?windows_left_button_down_routine@@YGJPAUHWND__@@IIJ@Z PROC ; windows_left_button_down_routine, COMDAT

; 937  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 938  : 
; 939  : 	hWnd;
; 940  : 	message;
; 941  : 	wParam;
; 942  : 	lParam;
; 943  : 
; 944  : 	create_mouse_button_event ( MOUSE_LEFT_BUTTON, BUTTON_STATE_DOWN );

  00009	6a 02		 push	 2
  0000b	68 00 01 00 00	 push	 256			; 00000100H
  00010	e8 00 00 00 00	 call	 ?create_mouse_button_event@@YGXW4DEVICE_EVENTS@@W4BUTTON_STATES@@@Z ; create_mouse_button_event

; 945  : 
; 946  : 	return ( 0 );

  00015	33 c0		 xor	 eax, eax

; 947  : }

  00017	5f		 pop	 edi
  00018	5e		 pop	 esi
  00019	5b		 pop	 ebx
  0001a	8b e5		 mov	 esp, ebp
  0001c	5d		 pop	 ebp
  0001d	c2 10 00	 ret	 16			; 00000010H
?windows_left_button_down_routine@@YGJPAUHWND__@@IIJ@Z ENDP ; windows_left_button_down_routine
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\modules\system\mouse.c
;	COMDAT ?windows_left_button_up_routine@@YGJPAUHWND__@@IIJ@Z
_TEXT	SEGMENT
_hWnd$ = 8						; size = 4
_message$ = 12						; size = 4
_wParam$ = 16						; size = 4
_lParam$ = 20						; size = 4
?windows_left_button_up_routine@@YGJPAUHWND__@@IIJ@Z PROC ; windows_left_button_up_routine, COMDAT

; 920  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 921  : 
; 922  : 	hWnd;
; 923  : 	message;
; 924  : 	wParam;
; 925  : 	lParam;
; 926  : 
; 927  : 	create_mouse_button_event ( MOUSE_LEFT_BUTTON, BUTTON_STATE_UP );

  00009	6a 01		 push	 1
  0000b	68 00 01 00 00	 push	 256			; 00000100H
  00010	e8 00 00 00 00	 call	 ?create_mouse_button_event@@YGXW4DEVICE_EVENTS@@W4BUTTON_STATES@@@Z ; create_mouse_button_event

; 928  : 
; 929  : 	return ( 0 );

  00015	33 c0		 xor	 eax, eax

; 930  : }

  00017	5f		 pop	 edi
  00018	5e		 pop	 esi
  00019	5b		 pop	 ebx
  0001a	8b e5		 mov	 esp, ebp
  0001c	5d		 pop	 ebp
  0001d	c2 10 00	 ret	 16			; 00000010H
?windows_left_button_up_routine@@YGJPAUHWND__@@IIJ@Z ENDP ; windows_left_button_up_routine
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\modules\system\mouse.c
;	COMDAT ?windows_mouse_move_routine@@YGJPAUHWND__@@IIJ@Z
_TEXT	SEGMENT
_dy$ = -40						; size = 4
_dx$ = -36						; size = 4
_y$ = -32						; size = 4
_x$ = -28						; size = 4
_my_rc$ = -24						; size = 16
_pt$ = -8						; size = 8
_hWnd$ = 8						; size = 4
_message$ = 12						; size = 4
_wParam$ = 16						; size = 4
_lParam$ = 20						; size = 4
?windows_mouse_move_routine@@YGJPAUHWND__@@IIJ@Z PROC	; windows_mouse_move_routine, COMDAT

; 873  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 68	 sub	 esp, 104		; 00000068H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 874  : 
; 875  : 	POINT
; 876  : 		pt;
; 877  : 
; 878  : 	RECT
; 879  : 		my_rc;
; 880  : 
; 881  : 	int
; 882  : 		x,
; 883  : 		y,
; 884  : 		dx,
; 885  : 		dy;
; 886  : 
; 887  : 	hWnd;
; 888  : 	message;
; 889  : 	wParam;
; 890  : 	lParam;
; 891  : 
; 892  : 	GetCursorPos ( &pt );

  00009	8d 45 f8	 lea	 eax, DWORD PTR _pt$[ebp]
  0000c	50		 push	 eax
  0000d	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetCursorPos@4

; 893  : 
; 894  : 	GetClientRect ( application_window, &my_rc);

  00013	8d 45 e8	 lea	 eax, DWORD PTR _my_rc$[ebp]
  00016	50		 push	 eax
  00017	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?application_window@@3PAUHWND__@@A ; application_window
  0001d	51		 push	 ecx
  0001e	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetClientRect@8

; 895  : 
; 896  : 	ClientToScreen ( application_window, (LPPOINT)&my_rc);

  00024	8d 45 e8	 lea	 eax, DWORD PTR _my_rc$[ebp]
  00027	50		 push	 eax
  00028	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?application_window@@3PAUHWND__@@A ; application_window
  0002e	51		 push	 ecx
  0002f	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__ClientToScreen@8

; 897  : 
; 898  : 	ClientToScreen ( application_window, (LPPOINT)&my_rc+1);

  00035	8d 45 f0	 lea	 eax, DWORD PTR _my_rc$[ebp+8]
  00038	50		 push	 eax
  00039	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?application_window@@3PAUHWND__@@A ; application_window
  0003f	51		 push	 ecx
  00040	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__ClientToScreen@8

; 899  : 
; 900  : 	x = pt.x - my_rc.left;

  00046	8b 45 f8	 mov	 eax, DWORD PTR _pt$[ebp]
  00049	2b 45 e8	 sub	 eax, DWORD PTR _my_rc$[ebp]
  0004c	89 45 e4	 mov	 DWORD PTR _x$[ebp], eax

; 901  : 
; 902  : 	y = pt.y - my_rc.top;

  0004f	8b 45 fc	 mov	 eax, DWORD PTR _pt$[ebp+4]
  00052	2b 45 ec	 sub	 eax, DWORD PTR _my_rc$[ebp+4]
  00055	89 45 e0	 mov	 DWORD PTR _y$[ebp], eax

; 903  : 
; 904  : 	dx = x - mouse_position_x;

  00058	8b 45 e4	 mov	 eax, DWORD PTR _x$[ebp]
  0005b	2b 05 00 00 00
	00		 sub	 eax, DWORD PTR ?mouse_position_x@@3HA
  00061	89 45 dc	 mov	 DWORD PTR _dx$[ebp], eax

; 905  : 
; 906  : 	dy = y - mouse_position_y;

  00064	8b 45 e0	 mov	 eax, DWORD PTR _y$[ebp]
  00067	2b 05 00 00 00
	00		 sub	 eax, DWORD PTR ?mouse_position_y@@3HA
  0006d	89 45 d8	 mov	 DWORD PTR _dy$[ebp], eax

; 907  : 
; 908  : 	create_mouse_move_event ( dx, dy, 0 );

  00070	6a 00		 push	 0
  00072	8b 45 d8	 mov	 eax, DWORD PTR _dy$[ebp]
  00075	50		 push	 eax
  00076	8b 4d dc	 mov	 ecx, DWORD PTR _dx$[ebp]
  00079	51		 push	 ecx
  0007a	e8 00 00 00 00	 call	 ?create_mouse_move_event@@YGXHHH@Z ; create_mouse_move_event

; 909  : 
; 910  : 	move_mouse ( dx, dy );

  0007f	8b 45 d8	 mov	 eax, DWORD PTR _dy$[ebp]
  00082	50		 push	 eax
  00083	8b 4d dc	 mov	 ecx, DWORD PTR _dx$[ebp]
  00086	51		 push	 ecx
  00087	e8 00 00 00 00	 call	 ?move_mouse@@YGXHH@Z	; move_mouse

; 911  : 
; 912  : 	return ( 0 );

  0008c	33 c0		 xor	 eax, eax

; 913  : }

  0008e	5f		 pop	 edi
  0008f	5e		 pop	 esi
  00090	5b		 pop	 ebx
  00091	8b e5		 mov	 esp, ebp
  00093	5d		 pop	 ebp
  00094	c2 10 00	 ret	 16			; 00000010H
?windows_mouse_move_routine@@YGJPAUHWND__@@IIJ@Z ENDP	; windows_mouse_move_routine
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\modules\system\mouse.c
;	COMDAT ?mouse_activation_routine@@YGXH@Z
_TEXT	SEGMENT
_activate$ = 8						; size = 4
?mouse_activation_routine@@YGXH@Z PROC			; mouse_activation_routine, COMDAT

; 281  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 282  : 
; 283  : 	if ( direct_input_mouse )

  00009	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?direct_input_mouse@@3PAUIDirectInputDevice7A@@A, 0
  00010	74 2e		 je	 SHORT $LN1@mouse_acti

; 284  : 	{
; 285  : 
; 286  : 		if ( !activate )

  00012	83 7d 08 00	 cmp	 DWORD PTR _activate$[ebp], 0
  00016	75 15		 jne	 SHORT $LN3@mouse_acti

; 287  : 		{
; 288  : 
; 289  : 			//
; 290  : 			// We are about to LOSE focus
; 291  : 			//
; 292  : 	
; 293  : 			IDirectInputDevice7_Unacquire ( direct_input_mouse );

  00018	a1 00 00 00 00	 mov	 eax, DWORD PTR ?direct_input_mouse@@3PAUIDirectInputDevice7A@@A
  0001d	8b 08		 mov	 ecx, DWORD PTR [eax]
  0001f	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?direct_input_mouse@@3PAUIDirectInputDevice7A@@A
  00025	52		 push	 edx
  00026	8b 41 20	 mov	 eax, DWORD PTR [ecx+32]
  00029	ff d0		 call	 eax

; 294  : 		}
; 295  : 		else

  0002b	eb 13		 jmp	 SHORT $LN1@mouse_acti
$LN3@mouse_acti:

; 296  : 		{
; 297  : 
; 298  : 			//
; 299  : 			// About to GAIN focus
; 300  : 			//
; 301  : 
; 302  : 			IDirectInputDevice7_Acquire ( direct_input_mouse );

  0002d	a1 00 00 00 00	 mov	 eax, DWORD PTR ?direct_input_mouse@@3PAUIDirectInputDevice7A@@A
  00032	8b 08		 mov	 ecx, DWORD PTR [eax]
  00034	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?direct_input_mouse@@3PAUIDirectInputDevice7A@@A
  0003a	52		 push	 edx
  0003b	8b 41 1c	 mov	 eax, DWORD PTR [ecx+28]
  0003e	ff d0		 call	 eax
$LN1@mouse_acti:

; 303  : 		}
; 304  : 	}
; 305  : }

  00040	5f		 pop	 edi
  00041	5e		 pop	 esi
  00042	5b		 pop	 ebx
  00043	8b e5		 mov	 esp, ebp
  00045	5d		 pop	 ebp
  00046	c2 04 00	 ret	 4
?mouse_activation_routine@@YGXH@Z ENDP			; mouse_activation_routine
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\modules\system\mouse.c
;	COMDAT ?move_mouse@@YGXHH@Z
_TEXT	SEGMENT
tv80 = -72						; size = 4
tv74 = -72						; size = 4
tv81 = -68						; size = 4
tv75 = -68						; size = 4
_dx$ = 8						; size = 4
_dy$ = 12						; size = 4
?move_mouse@@YGXHH@Z PROC				; move_mouse, COMDAT

; 691  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 48	 sub	 esp, 72			; 00000048H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 692  : 
; 693  : 	if ( mouse_on )

  00009	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?mouse_on@@3HA, 0
  00010	0f 84 d3 00 00
	00		 je	 $LN2@move_mouse

; 694  : 	{
; 695  : 		mouse_update_flag++;  // wraparound ok

  00016	a1 00 00 00 00	 mov	 eax, DWORD PTR ?mouse_update_flag@@3HA
  0001b	83 c0 01	 add	 eax, 1
  0001e	a3 00 00 00 00	 mov	 DWORD PTR ?mouse_update_flag@@3HA, eax

; 696  : 		mouse_move_delta_x = command_line_mouse_look_speed * dx;

  00023	a1 00 00 00 00	 mov	 eax, DWORD PTR ?command_line_mouse_look_speed@@3HA ; command_line_mouse_look_speed
  00028	0f af 45 08	 imul	 eax, DWORD PTR _dx$[ebp]
  0002c	a3 00 00 00 00	 mov	 DWORD PTR ?mouse_move_delta_x@@3HA, eax

; 697  : 		mouse_move_delta_y = command_line_mouse_look_speed * dy;

  00031	a1 00 00 00 00	 mov	 eax, DWORD PTR ?command_line_mouse_look_speed@@3HA ; command_line_mouse_look_speed
  00036	0f af 45 0c	 imul	 eax, DWORD PTR _dy$[ebp]
  0003a	a3 00 00 00 00	 mov	 DWORD PTR ?mouse_move_delta_y@@3HA, eax

; 698  : 
; 699  : 		mouse_position_x += dx;

  0003f	a1 00 00 00 00	 mov	 eax, DWORD PTR ?mouse_position_x@@3HA
  00044	03 45 08	 add	 eax, DWORD PTR _dx$[ebp]
  00047	a3 00 00 00 00	 mov	 DWORD PTR ?mouse_position_x@@3HA, eax

; 700  : 		mouse_position_y += dy;

  0004c	a1 00 00 00 00	 mov	 eax, DWORD PTR ?mouse_position_y@@3HA
  00051	03 45 0c	 add	 eax, DWORD PTR _dy$[ebp]
  00054	a3 00 00 00 00	 mov	 DWORD PTR ?mouse_position_y@@3HA, eax

; 701  : 
; 702  : 		mouse_position_x = bound ( mouse_position_x, 0, (application_video_width -1) );

  00059	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?mouse_position_x@@3HA, 0
  00060	7d 09		 jge	 SHORT $LN13@move_mouse
  00062	c7 45 bc 00 00
	00 00		 mov	 DWORD PTR tv75[ebp], 0
  00069	eb 2d		 jmp	 SHORT $LN14@move_mouse
$LN13@move_mouse:
  0006b	a1 00 00 00 00	 mov	 eax, DWORD PTR ?application_video_width@@3HA ; application_video_width
  00070	83 e8 01	 sub	 eax, 1
  00073	39 05 00 00 00
	00		 cmp	 DWORD PTR ?mouse_position_x@@3HA, eax
  00079	7e 0e		 jle	 SHORT $LN11@move_mouse
  0007b	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?application_video_width@@3HA ; application_video_width
  00081	83 e9 01	 sub	 ecx, 1
  00084	89 4d b8	 mov	 DWORD PTR tv74[ebp], ecx
  00087	eb 09		 jmp	 SHORT $LN12@move_mouse
$LN11@move_mouse:
  00089	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?mouse_position_x@@3HA
  0008f	89 55 b8	 mov	 DWORD PTR tv74[ebp], edx
$LN12@move_mouse:
  00092	8b 45 b8	 mov	 eax, DWORD PTR tv74[ebp]
  00095	89 45 bc	 mov	 DWORD PTR tv75[ebp], eax
$LN14@move_mouse:
  00098	8b 4d bc	 mov	 ecx, DWORD PTR tv75[ebp]
  0009b	89 0d 00 00 00
	00		 mov	 DWORD PTR ?mouse_position_x@@3HA, ecx

; 703  : 		mouse_position_y = bound ( mouse_position_y, 0, (application_video_height -1) );

  000a1	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?mouse_position_y@@3HA, 0
  000a8	7d 09		 jge	 SHORT $LN17@move_mouse
  000aa	c7 45 bc 00 00
	00 00		 mov	 DWORD PTR tv81[ebp], 0
  000b1	eb 2d		 jmp	 SHORT $LN18@move_mouse
$LN17@move_mouse:
  000b3	a1 00 00 00 00	 mov	 eax, DWORD PTR ?application_video_height@@3HA ; application_video_height
  000b8	83 e8 01	 sub	 eax, 1
  000bb	39 05 00 00 00
	00		 cmp	 DWORD PTR ?mouse_position_y@@3HA, eax
  000c1	7e 0e		 jle	 SHORT $LN15@move_mouse
  000c3	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?application_video_height@@3HA ; application_video_height
  000c9	83 e9 01	 sub	 ecx, 1
  000cc	89 4d b8	 mov	 DWORD PTR tv80[ebp], ecx
  000cf	eb 09		 jmp	 SHORT $LN16@move_mouse
$LN15@move_mouse:
  000d1	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?mouse_position_y@@3HA
  000d7	89 55 b8	 mov	 DWORD PTR tv80[ebp], edx
$LN16@move_mouse:
  000da	8b 45 b8	 mov	 eax, DWORD PTR tv80[ebp]
  000dd	89 45 bc	 mov	 DWORD PTR tv81[ebp], eax
$LN18@move_mouse:
  000e0	8b 4d bc	 mov	 ecx, DWORD PTR tv81[ebp]
  000e3	89 0d 00 00 00
	00		 mov	 DWORD PTR ?mouse_position_y@@3HA, ecx
$LN2@move_mouse:

; 704  : 	
; 705  : 	}
; 706  : 	
; 707  : 
; 708  : 	// Retro 030317 starts
; 709  : 	// OK what´s happening here... I need an absolute rather than a relative mouse, so I add/dec the mouse movements
; 710  : 	// to two variables that have a 'hard ceiling'
; 711  : 	// There are 2 access methods (below) through which I can get to this data
; 712  : 	// There´s also a reset function to recenter the view
; 713  : 	// This works regardless of mouse_on or mouse_off... we might change that though..
; 714  : 	// EVENTS assigned to mouse buttons work ONLY when mouse is ON !
; 715  : 
; 716  : 	if (get_in_flight_game_mode () == IN_FLIGHT_GAME_MODE_SIMULATOR)	// Retro 25Jul2004 - only do this while in the 3d

  000e9	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?in_flight_game_mode@@3W4IN_FLIGHT_GAME_MODES@@A, 0 ; in_flight_game_mode
  000f0	0f 85 84 00 00
	00		 jne	 $LN1@move_mouse

; 717  : 	{
; 718  : 		abs_mouse_x += (command_line_mouse_look_speed * dx);  // minimum value of dx/dy is 8, with a '10' scaling is 80.. makes 1/400 of max movement

  000f6	a1 00 00 00 00	 mov	 eax, DWORD PTR ?command_line_mouse_look_speed@@3HA ; command_line_mouse_look_speed
  000fb	0f af 45 08	 imul	 eax, DWORD PTR _dx$[ebp]
  000ff	03 05 00 00 00
	00		 add	 eax, DWORD PTR ?abs_mouse_x@@3HA
  00105	a3 00 00 00 00	 mov	 DWORD PTR ?abs_mouse_x@@3HA, eax

; 719  : 		abs_mouse_y += (command_line_mouse_look_speed * dy);

  0010a	a1 00 00 00 00	 mov	 eax, DWORD PTR ?command_line_mouse_look_speed@@3HA ; command_line_mouse_look_speed
  0010f	0f af 45 0c	 imul	 eax, DWORD PTR _dy$[ebp]
  00113	03 05 00 00 00
	00		 add	 eax, DWORD PTR ?abs_mouse_y@@3HA
  00119	a3 00 00 00 00	 mov	 DWORD PTR ?abs_mouse_y@@3HA, eax

; 720  : 
; 721  : 		if (abs_mouse_x >= 16383)

  0011e	81 3d 00 00 00
	00 ff 3f 00 00	 cmp	 DWORD PTR ?abs_mouse_x@@3HA, 16383 ; 00003fffH
  00128	7c 0c		 jl	 SHORT $LN4@move_mouse

; 722  : 			abs_mouse_x = 16383;

  0012a	c7 05 00 00 00
	00 ff 3f 00 00	 mov	 DWORD PTR ?abs_mouse_x@@3HA, 16383 ; 00003fffH
  00134	eb 16		 jmp	 SHORT $LN5@move_mouse
$LN4@move_mouse:

; 723  : 		else if (abs_mouse_x <= -16383)

  00136	81 3d 00 00 00
	00 01 c0 ff ff	 cmp	 DWORD PTR ?abs_mouse_x@@3HA, -16383 ; ffffc001H
  00140	7f 0a		 jg	 SHORT $LN5@move_mouse

; 724  : 			abs_mouse_x = -16383;

  00142	c7 05 00 00 00
	00 01 c0 ff ff	 mov	 DWORD PTR ?abs_mouse_x@@3HA, -16383 ; ffffc001H
$LN5@move_mouse:

; 725  : 
; 726  : 		if (abs_mouse_y >= 16383)

  0014c	81 3d 00 00 00
	00 ff 3f 00 00	 cmp	 DWORD PTR ?abs_mouse_y@@3HA, 16383 ; 00003fffH
  00156	7c 0c		 jl	 SHORT $LN7@move_mouse

; 727  : 			abs_mouse_y = 16383;

  00158	c7 05 00 00 00
	00 ff 3f 00 00	 mov	 DWORD PTR ?abs_mouse_y@@3HA, 16383 ; 00003fffH
  00162	eb 16		 jmp	 SHORT $LN1@move_mouse
$LN7@move_mouse:

; 728  : 		else if (abs_mouse_y <= -16383)

  00164	81 3d 00 00 00
	00 01 c0 ff ff	 cmp	 DWORD PTR ?abs_mouse_y@@3HA, -16383 ; ffffc001H
  0016e	7f 0a		 jg	 SHORT $LN1@move_mouse

; 729  : 			abs_mouse_y = -16383;

  00170	c7 05 00 00 00
	00 01 c0 ff ff	 mov	 DWORD PTR ?abs_mouse_y@@3HA, -16383 ; ffffc001H
$LN1@move_mouse:

; 730  : 	}
; 731  : 	// Retro 030317 ends
; 732  : }

  0017a	5f		 pop	 edi
  0017b	5e		 pop	 esi
  0017c	5b		 pop	 ebx
  0017d	8b e5		 mov	 esp, ebp
  0017f	5d		 pop	 ebp
  00180	c2 08 00	 ret	 8
?move_mouse@@YGXHH@Z ENDP				; move_mouse
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\modules\system\mouse.c
;	COMDAT ?get_mouse_on@@YGHXZ
_TEXT	SEGMENT
?get_mouse_on@@YGHXZ PROC				; get_mouse_on, COMDAT

; 778  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 779  : 
; 780  : 	return ( mouse_on );

  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ?mouse_on@@3HA

; 781  : }

  0000e	5f		 pop	 edi
  0000f	5e		 pop	 esi
  00010	5b		 pop	 ebx
  00011	8b e5		 mov	 esp, ebp
  00013	5d		 pop	 ebp
  00014	c3		 ret	 0
?get_mouse_on@@YGHXZ ENDP				; get_mouse_on
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\modules\system\mouse.c
;	COMDAT ?set_absolute_mouse_y@@YGXH@Z
_TEXT	SEGMENT
_pos$ = 8						; size = 4
?set_absolute_mouse_y@@YGXH@Z PROC			; set_absolute_mouse_y, COMDAT

; 865  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 866  : 	abs_mouse_y = pos;

  00009	8b 45 08	 mov	 eax, DWORD PTR _pos$[ebp]
  0000c	a3 00 00 00 00	 mov	 DWORD PTR ?abs_mouse_y@@3HA, eax

; 867  : }

  00011	5f		 pop	 edi
  00012	5e		 pop	 esi
  00013	5b		 pop	 ebx
  00014	8b e5		 mov	 esp, ebp
  00016	5d		 pop	 ebp
  00017	c2 04 00	 ret	 4
?set_absolute_mouse_y@@YGXH@Z ENDP			; set_absolute_mouse_y
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\modules\system\mouse.c
;	COMDAT ?set_absolute_mouse_x@@YGXH@Z
_TEXT	SEGMENT
_pos$ = 8						; size = 4
?set_absolute_mouse_x@@YGXH@Z PROC			; set_absolute_mouse_x, COMDAT

; 859  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 860  : 	abs_mouse_x = pos;

  00009	8b 45 08	 mov	 eax, DWORD PTR _pos$[ebp]
  0000c	a3 00 00 00 00	 mov	 DWORD PTR ?abs_mouse_x@@3HA, eax

; 861  : }

  00011	5f		 pop	 edi
  00012	5e		 pop	 esi
  00013	5b		 pop	 ebx
  00014	8b e5		 mov	 esp, ebp
  00016	5d		 pop	 ebp
  00017	c2 04 00	 ret	 4
?set_absolute_mouse_x@@YGXH@Z ENDP			; set_absolute_mouse_x
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\modules\system\mouse.c
;	COMDAT ?reset_absolute_mouse@@YGXXZ
_TEXT	SEGMENT
?reset_absolute_mouse@@YGXXZ PROC			; reset_absolute_mouse, COMDAT

; 853  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 854  : 	abs_mouse_x = abs_mouse_y = 0;

  00009	c7 05 00 00 00
	00 00 00 00 00	 mov	 DWORD PTR ?abs_mouse_y@@3HA, 0
  00013	a1 00 00 00 00	 mov	 eax, DWORD PTR ?abs_mouse_y@@3HA
  00018	a3 00 00 00 00	 mov	 DWORD PTR ?abs_mouse_x@@3HA, eax

; 855  : }

  0001d	5f		 pop	 edi
  0001e	5e		 pop	 esi
  0001f	5b		 pop	 ebx
  00020	8b e5		 mov	 esp, ebp
  00022	5d		 pop	 ebp
  00023	c3		 ret	 0
?reset_absolute_mouse@@YGXXZ ENDP			; reset_absolute_mouse
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\modules\system\mouse.c
;	COMDAT ?get_absolute_mouse_y@@YGHXZ
_TEXT	SEGMENT
?get_absolute_mouse_y@@YGHXZ PROC			; get_absolute_mouse_y, COMDAT

; 848  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 849  : 
; 850  : 	return ( abs_mouse_y );

  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ?abs_mouse_y@@3HA

; 851  : }

  0000e	5f		 pop	 edi
  0000f	5e		 pop	 esi
  00010	5b		 pop	 ebx
  00011	8b e5		 mov	 esp, ebp
  00013	5d		 pop	 ebp
  00014	c3		 ret	 0
?get_absolute_mouse_y@@YGHXZ ENDP			; get_absolute_mouse_y
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\modules\system\mouse.c
;	COMDAT ?get_absolute_mouse_x@@YGHXZ
_TEXT	SEGMENT
?get_absolute_mouse_x@@YGHXZ PROC			; get_absolute_mouse_x, COMDAT

; 843  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 844  : 
; 845  : 	return ( abs_mouse_x );

  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ?abs_mouse_x@@3HA

; 846  : }

  0000e	5f		 pop	 edi
  0000f	5e		 pop	 esi
  00010	5b		 pop	 ebx
  00011	8b e5		 mov	 esp, ebp
  00013	5d		 pop	 ebp
  00014	c3		 ret	 0
?get_absolute_mouse_x@@YGHXZ ENDP			; get_absolute_mouse_x
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\modules\system\mouse.c
;	COMDAT ?get_mouse_move_delta_y@@YGHXZ
_TEXT	SEGMENT
?get_mouse_move_delta_y@@YGHXZ PROC			; get_mouse_move_delta_y, COMDAT

; 838  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 839  : 	return mouse_move_delta_y;	

  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ?mouse_move_delta_y@@3HA

; 840  : }

  0000e	5f		 pop	 edi
  0000f	5e		 pop	 esi
  00010	5b		 pop	 ebx
  00011	8b e5		 mov	 esp, ebp
  00013	5d		 pop	 ebp
  00014	c3		 ret	 0
?get_mouse_move_delta_y@@YGHXZ ENDP			; get_mouse_move_delta_y
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\modules\system\mouse.c
;	COMDAT ?get_mouse_move_delta_x@@YGHXZ
_TEXT	SEGMENT
?get_mouse_move_delta_x@@YGHXZ PROC			; get_mouse_move_delta_x, COMDAT

; 833  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 834  : 	return mouse_move_delta_x;	

  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ?mouse_move_delta_x@@3HA

; 835  : }

  0000e	5f		 pop	 edi
  0000f	5e		 pop	 esi
  00010	5b		 pop	 ebx
  00011	8b e5		 mov	 esp, ebp
  00013	5d		 pop	 ebp
  00014	c3		 ret	 0
?get_mouse_move_delta_x@@YGHXZ ENDP			; get_mouse_move_delta_x
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\modules\system\mouse.c
;	COMDAT ?get_mouse_update_flag@@YGHXZ
_TEXT	SEGMENT
?get_mouse_update_flag@@YGHXZ PROC			; get_mouse_update_flag, COMDAT

; 828  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 829  : 	return mouse_update_flag;

  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ?mouse_update_flag@@3HA

; 830  : }

  0000e	5f		 pop	 edi
  0000f	5e		 pop	 esi
  00010	5b		 pop	 ebx
  00011	8b e5		 mov	 esp, ebp
  00013	5d		 pop	 ebp
  00014	c3		 ret	 0
?get_mouse_update_flag@@YGHXZ ENDP			; get_mouse_update_flag
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\modules\system\mouse.c
;	COMDAT ?set_mouse_y@@YGXH@Z
_TEXT	SEGMENT
_y$ = 8							; size = 4
?set_mouse_y@@YGXH@Z PROC				; set_mouse_y, COMDAT

; 818  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 819  : 
; 820  : 	mouse_position_y = y;

  00009	8b 45 08	 mov	 eax, DWORD PTR _y$[ebp]
  0000c	a3 00 00 00 00	 mov	 DWORD PTR ?mouse_position_y@@3HA, eax

; 821  : }

  00011	5f		 pop	 edi
  00012	5e		 pop	 esi
  00013	5b		 pop	 ebx
  00014	8b e5		 mov	 esp, ebp
  00016	5d		 pop	 ebp
  00017	c2 04 00	 ret	 4
?set_mouse_y@@YGXH@Z ENDP				; set_mouse_y
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\modules\system\mouse.c
;	COMDAT ?get_mouse_y@@YGHXZ
_TEXT	SEGMENT
?get_mouse_y@@YGHXZ PROC				; get_mouse_y, COMDAT

; 808  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 809  : 
; 810  : 	return ( mouse_position_y );

  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ?mouse_position_y@@3HA

; 811  : }

  0000e	5f		 pop	 edi
  0000f	5e		 pop	 esi
  00010	5b		 pop	 ebx
  00011	8b e5		 mov	 esp, ebp
  00013	5d		 pop	 ebp
  00014	c3		 ret	 0
?get_mouse_y@@YGHXZ ENDP				; get_mouse_y
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\modules\system\mouse.c
;	COMDAT ?set_mouse_x@@YGXH@Z
_TEXT	SEGMENT
_x$ = 8							; size = 4
?set_mouse_x@@YGXH@Z PROC				; set_mouse_x, COMDAT

; 798  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 799  : 
; 800  : 	mouse_position_x = x;

  00009	8b 45 08	 mov	 eax, DWORD PTR _x$[ebp]
  0000c	a3 00 00 00 00	 mov	 DWORD PTR ?mouse_position_x@@3HA, eax

; 801  : }

  00011	5f		 pop	 edi
  00012	5e		 pop	 esi
  00013	5b		 pop	 ebx
  00014	8b e5		 mov	 esp, ebp
  00016	5d		 pop	 ebp
  00017	c2 04 00	 ret	 4
?set_mouse_x@@YGXH@Z ENDP				; set_mouse_x
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\modules\system\mouse.c
;	COMDAT ?get_mouse_x@@YGHXZ
_TEXT	SEGMENT
?get_mouse_x@@YGHXZ PROC				; get_mouse_x, COMDAT

; 788  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 789  : 
; 790  : 	return ( mouse_position_x );

  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ?mouse_position_x@@3HA

; 791  : }

  0000e	5f		 pop	 edi
  0000f	5e		 pop	 esi
  00010	5b		 pop	 ebx
  00011	8b e5		 mov	 esp, ebp
  00013	5d		 pop	 ebp
  00014	c3		 ret	 0
?get_mouse_x@@YGHXZ ENDP				; get_mouse_x
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\modules\system\mouse.c
;	COMDAT ?set_mouse_off@@YGXXZ
_TEXT	SEGMENT
?set_mouse_off@@YGXXZ PROC				; set_mouse_off, COMDAT

; 757  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 758  : 
; 759  : 	if (command_line_mouse_look == FALSE)	// Clause by Retro 030317, to enable mouse_events in 3d
; 760  : 	{
; 761  : 		#if MOUSE_DEBUG
; 762  : 
; 763  : 		debug_log ("MOUSE: OFF");
; 764  : 
; 765  : 		#endif
; 766  : 
; 767  : 		// mouse_on = FALSE; Commented out by Jabberwock 030930, to enable mouse FLIR control
; 768  : 	}
; 769  : 
; 770  : 	set_mouse_graphic_off ();

  00009	e8 00 00 00 00	 call	 ?set_mouse_graphic_off@@YGXXZ ; set_mouse_graphic_off

; 771  : }

  0000e	5f		 pop	 edi
  0000f	5e		 pop	 esi
  00010	5b		 pop	 ebx
  00011	8b e5		 mov	 esp, ebp
  00013	5d		 pop	 ebp
  00014	c3		 ret	 0
?set_mouse_off@@YGXXZ ENDP				; set_mouse_off
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\modules\system\mouse.c
;	COMDAT ?set_mouse_on@@YGXXZ
_TEXT	SEGMENT
?set_mouse_on@@YGXXZ PROC				; set_mouse_on, COMDAT

; 739  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 740  : 
; 741  : 	#if MOUSE_DEBUG
; 742  : 
; 743  : 	debug_log ("MOUSE: ON");
; 744  : 
; 745  : 	#endif
; 746  : 
; 747  : 	mouse_on = TRUE;

  00009	c7 05 00 00 00
	00 01 00 00 00	 mov	 DWORD PTR ?mouse_on@@3HA, 1

; 748  : 
; 749  : 	set_mouse_graphic_on ();

  00013	e8 00 00 00 00	 call	 ?set_mouse_graphic_on@@YGXXZ ; set_mouse_graphic_on

; 750  : }

  00018	5f		 pop	 edi
  00019	5e		 pop	 esi
  0001a	5b		 pop	 ebx
  0001b	8b e5		 mov	 esp, ebp
  0001d	5d		 pop	 ebp
  0001e	c3		 ret	 0
?set_mouse_on@@YGXXZ ENDP				; set_mouse_on
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\modules\system\mouse.c
;	COMDAT ?process_mouse_event@@YGHPAUEVENT@@@Z
_TEXT	SEGMENT
tv212 = -92						; size = 4
tv79 = -92						; size = 4
_function_flag$ = -24					; size = 4
_move_wheel_ev$ = -20					; size = 4
_move_vertical_ev$ = -16				; size = 4
_move_horizontal_ev$ = -12				; size = 4
_modifier$ = -8						; size = 4
_loop$ = -4						; size = 4
_ev$ = 8						; size = 4
?process_mouse_event@@YGHPAUEVENT@@@Z PROC		; process_mouse_event, COMDAT

; 481  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 5c	 sub	 esp, 92			; 0000005cH
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 482  : 	int
; 483  : 		loop,
; 484  : 		modifier,
; 485  : 		move_horizontal_ev = 0,

  00009	c7 45 f4 00 00
	00 00		 mov	 DWORD PTR _move_horizontal_ev$[ebp], 0

; 486  : 		move_vertical_ev = 0,

  00010	c7 45 f0 00 00
	00 00		 mov	 DWORD PTR _move_vertical_ev$[ebp], 0

; 487  : 		move_wheel_ev = 0; // Jabberwock 030930 Mouse wheel events

  00017	c7 45 ec 00 00
	00 00		 mov	 DWORD PTR _move_wheel_ev$[ebp], 0

; 488  : 
; 489  : 	int
; 490  : 		function_flag = FALSE;

  0001e	c7 45 e8 00 00
	00 00		 mov	 DWORD PTR _function_flag$[ebp], 0

; 491  : 
; 492  : 	// JB 030311 From Gotcha (Victor Jetten)
; 493  : 	// Solves the problem with lack of mouse click in 2D until a keyboard key is pressed
; 494  : 	if ((current_modifier_states & (1 << MODIFIER_LEFT_ALT)) ||

  00025	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_modifier_states@@3HA ; current_modifier_states
  0002a	83 e0 08	 and	 eax, 8
  0002d	75 0a		 jne	 SHORT $LN10@process_mo
  0002f	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_modifier_states@@3HA ; current_modifier_states
  00034	83 e0 40	 and	 eax, 64			; 00000040H
  00037	74 0a		 je	 SHORT $LN9@process_mo
$LN10@process_mo:

; 495  : 		(current_modifier_states & (1 << MODIFIER_RIGHT_ALT)))
; 496  : 	{
; 497  : 		current_modifier_states = MODIFIER_NONE;

  00039	c7 05 00 00 00
	00 00 00 00 00	 mov	 DWORD PTR ?current_modifier_states@@3HA, 0 ; current_modifier_states
$LN9@process_mo:

; 498  : 	}
; 499  : 
; 500  : 	for (loop = MODIFIER_NONE; loop < NUM_MODIFIER_TYPES; loop ++)

  00043	c7 45 fc 00 00
	00 00		 mov	 DWORD PTR _loop$[ebp], 0
  0004a	eb 09		 jmp	 SHORT $LN4@process_mo
$LN2@process_mo:
  0004c	8b 45 fc	 mov	 eax, DWORD PTR _loop$[ebp]
  0004f	83 c0 01	 add	 eax, 1
  00052	89 45 fc	 mov	 DWORD PTR _loop$[ebp], eax
$LN4@process_mo:
  00055	83 7d fc 09	 cmp	 DWORD PTR _loop$[ebp], 9
  00059	0f 8d cd 02 00
	00		 jge	 $LN3@process_mo

; 501  : 	{
; 502  : 
; 503  : 		if ((current_modifier_states & (1 << loop)) || ((current_modifier_states | loop) == 0) || (ev->state == BUTTON_STATE_UP))

  0005f	b8 01 00 00 00	 mov	 eax, 1
  00064	8b 4d fc	 mov	 ecx, DWORD PTR _loop$[ebp]
  00067	d3 e0		 shl	 eax, cl
  00069	23 05 00 00 00
	00		 and	 eax, DWORD PTR ?current_modifier_states@@3HA ; current_modifier_states
  0006f	75 1a		 jne	 SHORT $LN12@process_mo
  00071	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_modifier_states@@3HA ; current_modifier_states
  00076	0b 45 fc	 or	 eax, DWORD PTR _loop$[ebp]
  00079	74 10		 je	 SHORT $LN12@process_mo
  0007b	8b 45 08	 mov	 eax, DWORD PTR _ev$[ebp]
  0007e	0f b7 48 08	 movzx	 ecx, WORD PTR [eax+8]
  00082	83 f9 01	 cmp	 ecx, 1
  00085	0f 85 9c 02 00
	00		 jne	 $LN11@process_mo
$LN12@process_mo:

; 504  : 		{
; 505  : 
; 506  : 			switch (ev->type)

  0008b	8b 45 08	 mov	 eax, DWORD PTR _ev$[ebp]
  0008e	8b 08		 mov	 ecx, DWORD PTR [eax]
  00090	89 4d a4	 mov	 DWORD PTR tv79[ebp], ecx
  00093	83 7d a4 03	 cmp	 DWORD PTR tv79[ebp], 3
  00097	74 05		 je	 SHORT $LN13@process_mo
  00099	e9 a8 01 00 00	 jmp	 $LN35@process_mo
$LN13@process_mo:

; 507  : 			{
; 508  : 		
; 509  : 				case EVENT_TYPE_MOUSE_MOVE:
; 510  : 				{
; 511  : 			
; 512  : 					// assign desired move function
; 513  : 		
; 514  : 					if (ev->dx < 0)

  0009e	8b 45 08	 mov	 eax, DWORD PTR _ev$[ebp]
  000a1	0f bf 48 0c	 movsx	 ecx, WORD PTR [eax+12]
  000a5	85 c9		 test	 ecx, ecx
  000a7	7d 09		 jge	 SHORT $LN14@process_mo

; 515  : 					{
; 516  : 		
; 517  : 						move_horizontal_ev = MOUSE_MOVE_LEFT;

  000a9	c7 45 f4 05 01
	00 00		 mov	 DWORD PTR _move_horizontal_ev$[ebp], 261 ; 00000105H
  000b0	eb 12		 jmp	 SHORT $LN15@process_mo
$LN14@process_mo:

; 518  : 					}
; 519  : 					else if (ev->dx > 0)

  000b2	8b 45 08	 mov	 eax, DWORD PTR _ev$[ebp]
  000b5	0f bf 48 0c	 movsx	 ecx, WORD PTR [eax+12]
  000b9	85 c9		 test	 ecx, ecx
  000bb	7e 07		 jle	 SHORT $LN15@process_mo

; 520  : 					{
; 521  : 			
; 522  : 						move_horizontal_ev = MOUSE_MOVE_RIGHT;

  000bd	c7 45 f4 06 01
	00 00		 mov	 DWORD PTR _move_horizontal_ev$[ebp], 262 ; 00000106H
$LN15@process_mo:

; 523  : 					}
; 524  : 			
; 525  : 					if (ev->dy < 0)

  000c4	8b 45 08	 mov	 eax, DWORD PTR _ev$[ebp]
  000c7	0f bf 48 0e	 movsx	 ecx, WORD PTR [eax+14]
  000cb	85 c9		 test	 ecx, ecx
  000cd	7d 09		 jge	 SHORT $LN17@process_mo

; 526  : 					{
; 527  : 			
; 528  : 						move_vertical_ev = MOUSE_MOVE_UP;

  000cf	c7 45 f0 03 01
	00 00		 mov	 DWORD PTR _move_vertical_ev$[ebp], 259 ; 00000103H
  000d6	eb 12		 jmp	 SHORT $LN18@process_mo
$LN17@process_mo:

; 529  : 					}
; 530  : 					else if (ev->dy > 0)

  000d8	8b 45 08	 mov	 eax, DWORD PTR _ev$[ebp]
  000db	0f bf 48 0e	 movsx	 ecx, WORD PTR [eax+14]
  000df	85 c9		 test	 ecx, ecx
  000e1	7e 07		 jle	 SHORT $LN18@process_mo

; 531  : 					{
; 532  : 			
; 533  : 						move_vertical_ev = MOUSE_MOVE_DOWN;

  000e3	c7 45 f0 04 01
	00 00		 mov	 DWORD PTR _move_vertical_ev$[ebp], 260 ; 00000104H
$LN18@process_mo:

; 534  : 					}
; 535  : 					// Jabberwock 030930 - mouse wheel events
; 536  : 					if (ev->dz > 0)

  000ea	8b 45 08	 mov	 eax, DWORD PTR _ev$[ebp]
  000ed	0f bf 48 10	 movsx	 ecx, WORD PTR [eax+16]
  000f1	85 c9		 test	 ecx, ecx
  000f3	7e 09		 jle	 SHORT $LN20@process_mo

; 537  : 					{
; 538  : 								
; 539  : 						move_wheel_ev = MOUSE_WHEEL_UP;

  000f5	c7 45 ec 07 01
	00 00		 mov	 DWORD PTR _move_wheel_ev$[ebp], 263 ; 00000107H
  000fc	eb 12		 jmp	 SHORT $LN21@process_mo
$LN20@process_mo:

; 540  : 					}
; 541  : 					else if (ev->dz < 0)

  000fe	8b 45 08	 mov	 eax, DWORD PTR _ev$[ebp]
  00101	0f bf 48 10	 movsx	 ecx, WORD PTR [eax+16]
  00105	85 c9		 test	 ecx, ecx
  00107	7d 07		 jge	 SHORT $LN21@process_mo

; 542  : 					{
; 543  : 						move_wheel_ev = MOUSE_WHEEL_DOWN;

  00109	c7 45 ec 08 01
	00 00		 mov	 DWORD PTR _move_wheel_ev$[ebp], 264 ; 00000108H
$LN21@process_mo:

; 544  : 					}
; 545  : 					
; 546  : 					// Jabberwock 030930 ends
; 547  : 					
; 548  : 	
; 549  : 					// horizontal move function
; 550  : 		
; 551  : 					if (move_horizontal_ev)

  00110	83 7d f4 00	 cmp	 DWORD PTR _move_horizontal_ev$[ebp], 0
  00114	74 3f		 je	 SHORT $LN23@process_mo

; 552  : 					{
; 553  : 	
; 554  : 						if (registered_events [move_horizontal_ev][loop].in_use)

  00116	6b 45 f4 48	 imul	 eax, DWORD PTR _move_horizontal_ev$[ebp], 72
  0011a	8b 4d fc	 mov	 ecx, DWORD PTR _loop$[ebp]
  0011d	0f b6 94 c8 00
	00 00 00	 movzx	 edx, BYTE PTR ?registered_events@@3PAY08UREGISTERED_EVENT_TYPE@@A[eax+ecx*8]
  00125	85 d2		 test	 edx, edx
  00127	74 2c		 je	 SHORT $LN23@process_mo

; 555  : 						{
; 556  : 	
; 557  : 							if (registered_events [move_horizontal_ev][loop].function)

  00129	6b 45 f4 48	 imul	 eax, DWORD PTR _move_horizontal_ev$[ebp], 72
  0012d	8b 4d fc	 mov	 ecx, DWORD PTR _loop$[ebp]
  00130	83 bc c8 04 00
	00 00 00	 cmp	 DWORD PTR ?registered_events@@3PAY08UREGISTERED_EVENT_TYPE@@A[eax+ecx*8+4], 0
  00138	74 1b		 je	 SHORT $LN23@process_mo

; 558  : 							{
; 559  : 	
; 560  : 								registered_events [move_horizontal_ev][loop].function (ev);

  0013a	8b 45 08	 mov	 eax, DWORD PTR _ev$[ebp]
  0013d	50		 push	 eax
  0013e	6b 4d f4 48	 imul	 ecx, DWORD PTR _move_horizontal_ev$[ebp], 72
  00142	8b 55 fc	 mov	 edx, DWORD PTR _loop$[ebp]
  00145	8b 84 d1 04 00
	00 00		 mov	 eax, DWORD PTR ?registered_events@@3PAY08UREGISTERED_EVENT_TYPE@@A[ecx+edx*8+4]
  0014c	ff d0		 call	 eax

; 561  : 	
; 562  : 								function_flag = TRUE;

  0014e	c7 45 e8 01 00
	00 00		 mov	 DWORD PTR _function_flag$[ebp], 1
$LN23@process_mo:

; 563  : 							}
; 564  : 						}
; 565  : 					}
; 566  : 		
; 567  : 					// vertical move function
; 568  : 	
; 569  : 					if (move_vertical_ev)

  00155	83 7d f0 00	 cmp	 DWORD PTR _move_vertical_ev$[ebp], 0
  00159	74 3f		 je	 SHORT $LN26@process_mo

; 570  : 					{
; 571  : 	
; 572  : 						if (registered_events [move_vertical_ev][loop].in_use)

  0015b	6b 45 f0 48	 imul	 eax, DWORD PTR _move_vertical_ev$[ebp], 72
  0015f	8b 4d fc	 mov	 ecx, DWORD PTR _loop$[ebp]
  00162	0f b6 94 c8 00
	00 00 00	 movzx	 edx, BYTE PTR ?registered_events@@3PAY08UREGISTERED_EVENT_TYPE@@A[eax+ecx*8]
  0016a	85 d2		 test	 edx, edx
  0016c	74 2c		 je	 SHORT $LN26@process_mo

; 573  : 						{
; 574  : 	
; 575  : 							if (registered_events [move_vertical_ev][loop].function)

  0016e	6b 45 f0 48	 imul	 eax, DWORD PTR _move_vertical_ev$[ebp], 72
  00172	8b 4d fc	 mov	 ecx, DWORD PTR _loop$[ebp]
  00175	83 bc c8 04 00
	00 00 00	 cmp	 DWORD PTR ?registered_events@@3PAY08UREGISTERED_EVENT_TYPE@@A[eax+ecx*8+4], 0
  0017d	74 1b		 je	 SHORT $LN26@process_mo

; 576  : 							{
; 577  : 	
; 578  : 								registered_events [move_vertical_ev][loop].function (ev);

  0017f	8b 45 08	 mov	 eax, DWORD PTR _ev$[ebp]
  00182	50		 push	 eax
  00183	6b 4d f0 48	 imul	 ecx, DWORD PTR _move_vertical_ev$[ebp], 72
  00187	8b 55 fc	 mov	 edx, DWORD PTR _loop$[ebp]
  0018a	8b 84 d1 04 00
	00 00		 mov	 eax, DWORD PTR ?registered_events@@3PAY08UREGISTERED_EVENT_TYPE@@A[ecx+edx*8+4]
  00191	ff d0		 call	 eax

; 579  : 	
; 580  : 								function_flag = TRUE;

  00193	c7 45 e8 01 00
	00 00		 mov	 DWORD PTR _function_flag$[ebp], 1
$LN26@process_mo:

; 581  : 							}
; 582  : 						}
; 583  : 					}
; 584  : 	
; 585  : 					if (move_wheel_ev)

  0019a	83 7d ec 00	 cmp	 DWORD PTR _move_wheel_ev$[ebp], 0
  0019e	74 3f		 je	 SHORT $LN29@process_mo

; 586  : 						{
; 587  : 		
; 588  : 							if (registered_events [move_wheel_ev][loop].in_use)

  001a0	6b 45 ec 48	 imul	 eax, DWORD PTR _move_wheel_ev$[ebp], 72
  001a4	8b 4d fc	 mov	 ecx, DWORD PTR _loop$[ebp]
  001a7	0f b6 94 c8 00
	00 00 00	 movzx	 edx, BYTE PTR ?registered_events@@3PAY08UREGISTERED_EVENT_TYPE@@A[eax+ecx*8]
  001af	85 d2		 test	 edx, edx
  001b1	74 2c		 je	 SHORT $LN29@process_mo

; 589  : 							{
; 590  : 		
; 591  : 								if (registered_events [move_wheel_ev][loop].function)

  001b3	6b 45 ec 48	 imul	 eax, DWORD PTR _move_wheel_ev$[ebp], 72
  001b7	8b 4d fc	 mov	 ecx, DWORD PTR _loop$[ebp]
  001ba	83 bc c8 04 00
	00 00 00	 cmp	 DWORD PTR ?registered_events@@3PAY08UREGISTERED_EVENT_TYPE@@A[eax+ecx*8+4], 0
  001c2	74 1b		 je	 SHORT $LN29@process_mo

; 592  : 								{
; 593  : 		
; 594  : 									registered_events [move_wheel_ev][loop].function (ev);

  001c4	8b 45 08	 mov	 eax, DWORD PTR _ev$[ebp]
  001c7	50		 push	 eax
  001c8	6b 4d ec 48	 imul	 ecx, DWORD PTR _move_wheel_ev$[ebp], 72
  001cc	8b 55 fc	 mov	 edx, DWORD PTR _loop$[ebp]
  001cf	8b 84 d1 04 00
	00 00		 mov	 eax, DWORD PTR ?registered_events@@3PAY08UREGISTERED_EVENT_TYPE@@A[ecx+edx*8+4]
  001d6	ff d0		 call	 eax

; 595  : 		
; 596  : 									function_flag = TRUE;

  001d8	c7 45 e8 01 00
	00 00		 mov	 DWORD PTR _function_flag$[ebp], 1
$LN29@process_mo:

; 597  : 								}
; 598  : 							}
; 599  : 						}
; 600  : 	
; 601  : 	
; 602  : 					// if we've already done a function quit
; 603  : 	
; 604  : 					if (!function_flag)

  001df	83 7d e8 00	 cmp	 DWORD PTR _function_flag$[ebp], 0
  001e3	75 54		 jne	 SHORT $LN32@process_mo

; 605  : 					{
; 606  : 	
; 607  : 						if (registered_events [MOUSE_MOVE][loop].in_use)

  001e5	b8 48 00 00 00	 mov	 eax, 72			; 00000048H
  001ea	69 c8 02 01 00
	00		 imul	 ecx, eax, 258
  001f0	8b 55 fc	 mov	 edx, DWORD PTR _loop$[ebp]
  001f3	0f b6 84 d1 00
	00 00 00	 movzx	 eax, BYTE PTR ?registered_events@@3PAY08UREGISTERED_EVENT_TYPE@@A[ecx+edx*8]
  001fb	85 c0		 test	 eax, eax
  001fd	74 3a		 je	 SHORT $LN32@process_mo

; 608  : 						{
; 609  : 	
; 610  : 							if (registered_events [MOUSE_MOVE][loop].function)

  001ff	b8 48 00 00 00	 mov	 eax, 72			; 00000048H
  00204	69 c8 02 01 00
	00		 imul	 ecx, eax, 258
  0020a	8b 55 fc	 mov	 edx, DWORD PTR _loop$[ebp]
  0020d	83 bc d1 04 00
	00 00 00	 cmp	 DWORD PTR ?registered_events@@3PAY08UREGISTERED_EVENT_TYPE@@A[ecx+edx*8+4], 0
  00215	74 22		 je	 SHORT $LN32@process_mo

; 611  : 							{
; 612  : 	
; 613  : 								registered_events [MOUSE_MOVE][loop].function (ev);

  00217	8b 45 08	 mov	 eax, DWORD PTR _ev$[ebp]
  0021a	50		 push	 eax
  0021b	b9 48 00 00 00	 mov	 ecx, 72			; 00000048H
  00220	69 d1 02 01 00
	00		 imul	 edx, ecx, 258
  00226	8b 45 fc	 mov	 eax, DWORD PTR _loop$[ebp]
  00229	8b 8c c2 04 00
	00 00		 mov	 ecx, DWORD PTR ?registered_events@@3PAY08UREGISTERED_EVENT_TYPE@@A[edx+eax*8+4]
  00230	ff d1		 call	 ecx

; 614  : 	
; 615  : 								function_flag = TRUE;

  00232	c7 45 e8 01 00
	00 00		 mov	 DWORD PTR _function_flag$[ebp], 1
$LN32@process_mo:

; 616  : 							}
; 617  : 						}
; 618  : 					}
; 619  : 	
; 620  : 					return function_flag;

  00239	8b 45 e8	 mov	 eax, DWORD PTR _function_flag$[ebp]
  0023c	e9 ed 00 00 00	 jmp	 $LN1@process_mo

; 621  : 	
; 622  : 					break;

  00241	e9 e1 00 00 00	 jmp	 $LN11@process_mo
$LN35@process_mo:

; 623  : 				}
; 624  : 				
; 625  : 				case EVENT_TYPE_MOUSE_BUTTON:
; 626  : 				default:
; 627  : 				{
; 628  : 
; 629  : 					switch (ev->button)

  00246	8b 45 08	 mov	 eax, DWORD PTR _ev$[ebp]
  00249	0f b7 48 0a	 movzx	 ecx, WORD PTR [eax+10]
  0024d	89 4d a4	 mov	 DWORD PTR tv212[ebp], ecx
  00250	81 7d a4 00 01
	00 00		 cmp	 DWORD PTR tv212[ebp], 256 ; 00000100H
  00257	74 0b		 je	 SHORT $LN36@process_mo
  00259	81 7d a4 01 01
	00 00		 cmp	 DWORD PTR tv212[ebp], 257 ; 00000101H
  00260	74 0b		 je	 SHORT $LN37@process_mo
  00262	eb 10		 jmp	 SHORT $LN7@process_mo
$LN36@process_mo:

; 630  : 					{
; 631  : 						case MOUSE_LEFT_BUTTON:
; 632  : 						{
; 633  : 							modifier = 1 << MODIFIER_MOUSE_LEFT_BUTTON;

  00264	c7 45 f8 80 00
	00 00		 mov	 DWORD PTR _modifier$[ebp], 128 ; 00000080H

; 634  : 							
; 635  : 							break;

  0026b	eb 07		 jmp	 SHORT $LN7@process_mo
$LN37@process_mo:

; 636  : 						}
; 637  : 						case MOUSE_RIGHT_BUTTON:
; 638  : 						{
; 639  : 							modifier = 1 << MODIFIER_MOUSE_RIGHT_BUTTON;

  0026d	c7 45 f8 00 01
	00 00		 mov	 DWORD PTR _modifier$[ebp], 256 ; 00000100H
$LN7@process_mo:

; 640  : 							
; 641  : 							break;
; 642  : 						}
; 643  : 						default:
; 644  : 						{
; 645  : 							break;
; 646  : 						}
; 647  : 					}
; 648  : 		
; 649  : 					if (ev->state == BUTTON_STATE_UP)

  00274	8b 45 08	 mov	 eax, DWORD PTR _ev$[ebp]
  00277	0f b7 48 08	 movzx	 ecx, WORD PTR [eax+8]
  0027b	83 f9 01	 cmp	 ecx, 1
  0027e	75 0f		 jne	 SHORT $LN39@process_mo

; 650  : 					{
; 651  : 		
; 652  : 						current_modifier_states ^= modifier;

  00280	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_modifier_states@@3HA ; current_modifier_states
  00285	33 45 f8	 xor	 eax, DWORD PTR _modifier$[ebp]
  00288	a3 00 00 00 00	 mov	 DWORD PTR ?current_modifier_states@@3HA, eax ; current_modifier_states

; 653  : 					}
; 654  : 					else

  0028d	eb 0d		 jmp	 SHORT $LN40@process_mo
$LN39@process_mo:

; 655  : 					{
; 656  : 		
; 657  : 						current_modifier_states |= modifier;

  0028f	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_modifier_states@@3HA ; current_modifier_states
  00294	0b 45 f8	 or	 eax, DWORD PTR _modifier$[ebp]
  00297	a3 00 00 00 00	 mov	 DWORD PTR ?current_modifier_states@@3HA, eax ; current_modifier_states
$LN40@process_mo:

; 658  : 					}
; 659  : 		
; 660  : 					if (registered_events [ev->button][loop].in_use)

  0029c	8b 45 08	 mov	 eax, DWORD PTR _ev$[ebp]
  0029f	0f b7 48 0a	 movzx	 ecx, WORD PTR [eax+10]
  002a3	6b d1 48	 imul	 edx, ecx, 72
  002a6	8b 45 fc	 mov	 eax, DWORD PTR _loop$[ebp]
  002a9	0f b6 8c c2 00
	00 00 00	 movzx	 ecx, BYTE PTR ?registered_events@@3PAY08UREGISTERED_EVENT_TYPE@@A[edx+eax*8]
  002b1	85 c9		 test	 ecx, ecx
  002b3	74 72		 je	 SHORT $LN11@process_mo

; 661  : 					{
; 662  : 		
; 663  : 						if ((registered_events [ev->button][loop].notify_state == ev->state) ||

  002b5	8b 45 08	 mov	 eax, DWORD PTR _ev$[ebp]
  002b8	0f b7 48 0a	 movzx	 ecx, WORD PTR [eax+10]
  002bc	6b d1 48	 imul	 edx, ecx, 72
  002bf	8b 45 fc	 mov	 eax, DWORD PTR _loop$[ebp]
  002c2	0f b6 8c c2 02
	00 00 00	 movzx	 ecx, BYTE PTR ?registered_events@@3PAY08UREGISTERED_EVENT_TYPE@@A[edx+eax*8+2]
  002ca	8b 55 08	 mov	 edx, DWORD PTR _ev$[ebp]
  002cd	0f b7 42 08	 movzx	 eax, WORD PTR [edx+8]
  002d1	3b c8		 cmp	 ecx, eax
  002d3	74 1a		 je	 SHORT $LN43@process_mo
  002d5	8b 45 08	 mov	 eax, DWORD PTR _ev$[ebp]
  002d8	0f b7 48 0a	 movzx	 ecx, WORD PTR [eax+10]
  002dc	6b d1 48	 imul	 edx, ecx, 72
  002df	8b 45 fc	 mov	 eax, DWORD PTR _loop$[ebp]
  002e2	0f b6 8c c2 02
	00 00 00	 movzx	 ecx, BYTE PTR ?registered_events@@3PAY08UREGISTERED_EVENT_TYPE@@A[edx+eax*8+2]
  002ea	83 f9 03	 cmp	 ecx, 3
  002ed	75 38		 jne	 SHORT $LN11@process_mo
$LN43@process_mo:

; 664  : 							(registered_events [ev->button][loop].notify_state == BUTTON_STATE_EITHER))
; 665  : 						{
; 666  : 			
; 667  : 							if (registered_events [ev->button][loop].function)

  002ef	8b 45 08	 mov	 eax, DWORD PTR _ev$[ebp]
  002f2	0f b7 48 0a	 movzx	 ecx, WORD PTR [eax+10]
  002f6	6b d1 48	 imul	 edx, ecx, 72
  002f9	8b 45 fc	 mov	 eax, DWORD PTR _loop$[ebp]
  002fc	83 bc c2 04 00
	00 00 00	 cmp	 DWORD PTR ?registered_events@@3PAY08UREGISTERED_EVENT_TYPE@@A[edx+eax*8+4], 0
  00304	74 21		 je	 SHORT $LN11@process_mo

; 668  : 							{
; 669  : 			
; 670  : 								registered_events [ev->button][loop].function (ev);

  00306	8b 45 08	 mov	 eax, DWORD PTR _ev$[ebp]
  00309	50		 push	 eax
  0030a	8b 4d 08	 mov	 ecx, DWORD PTR _ev$[ebp]
  0030d	0f b7 51 0a	 movzx	 edx, WORD PTR [ecx+10]
  00311	6b c2 48	 imul	 eax, edx, 72
  00314	8b 4d fc	 mov	 ecx, DWORD PTR _loop$[ebp]
  00317	8b 94 c8 04 00
	00 00		 mov	 edx, DWORD PTR ?registered_events@@3PAY08UREGISTERED_EVENT_TYPE@@A[eax+ecx*8+4]
  0031e	ff d2		 call	 edx

; 671  : 			
; 672  : 								return TRUE;

  00320	b8 01 00 00 00	 mov	 eax, 1
  00325	eb 07		 jmp	 SHORT $LN1@process_mo
$LN11@process_mo:

; 673  : 							}
; 674  : 						}
; 675  : 					}
; 676  : 		
; 677  : 					break;
; 678  : 				}
; 679  : 			}
; 680  : 		}
; 681  : 	}

  00327	e9 20 fd ff ff	 jmp	 $LN2@process_mo
$LN3@process_mo:

; 682  : 
; 683  : 	return FALSE;

  0032c	33 c0		 xor	 eax, eax
$LN1@process_mo:

; 684  : }

  0032e	5f		 pop	 edi
  0032f	5e		 pop	 esi
  00330	5b		 pop	 ebx
  00331	8b e5		 mov	 esp, ebp
  00333	5d		 pop	 ebp
  00334	c2 04 00	 ret	 4
?process_mouse_event@@YGHPAUEVENT@@@Z ENDP		; process_mouse_event
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\modules\system\mouse.c
;	COMDAT ?generate_mouse_events@@YGXXZ
_TEXT	SEGMENT
tv93 = -92						; size = 4
_dz$1 = -24						; size = 4
_dy$2 = -20						; size = 4
_dx$3 = -16						; size = 4
_count$ = -12						; size = 4
_items$ = -8						; size = 4
_ret$ = -4						; size = 4
?generate_mouse_events@@YGXXZ PROC			; generate_mouse_events, COMDAT

; 312  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 5c	 sub	 esp, 92			; 0000005cH
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 313  : 
; 314  : 	HRESULT
; 315  : 		ret;
; 316  : 
; 317  : 	DWORD
; 318  : 		items,
; 319  : 		count;
; 320  : 
; 321  : 	if ( direct_input_mouse )

  00009	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?direct_input_mouse@@3PAUIDirectInputDevice7A@@A, 0
  00010	0f 84 f7 01 00
	00		 je	 $LN1@generate_m

; 322  : 	{
; 323  : 
; 324  : 		ret = IDirectInputDevice7_Acquire ( direct_input_mouse );

  00016	a1 00 00 00 00	 mov	 eax, DWORD PTR ?direct_input_mouse@@3PAUIDirectInputDevice7A@@A
  0001b	8b 08		 mov	 ecx, DWORD PTR [eax]
  0001d	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?direct_input_mouse@@3PAUIDirectInputDevice7A@@A
  00023	52		 push	 edx
  00024	8b 41 1c	 mov	 eax, DWORD PTR [ecx+28]
  00027	ff d0		 call	 eax
  00029	89 45 fc	 mov	 DWORD PTR _ret$[ebp], eax

; 325  : 
; 326  : 		if ( ( ret == DI_OK ) || ( ret == S_FALSE ) )

  0002c	83 7d fc 00	 cmp	 DWORD PTR _ret$[ebp], 0
  00030	74 0a		 je	 SHORT $LN11@generate_m
  00032	83 7d fc 01	 cmp	 DWORD PTR _ret$[ebp], 1
  00036	0f 85 d1 01 00
	00		 jne	 $LN1@generate_m
$LN11@generate_m:

; 327  : 		{
; 328  : 	
; 329  : 			int
; 330  : 				dx,
; 331  : 				dy,
; 332  : 				dz;
; 333  : 	
; 334  : 			dx = 0;

  0003c	c7 45 f0 00 00
	00 00		 mov	 DWORD PTR _dx$3[ebp], 0

; 335  : 	
; 336  : 			dy = 0;

  00043	c7 45 ec 00 00
	00 00		 mov	 DWORD PTR _dy$2[ebp], 0

; 337  : 	
; 338  : 			dz = 0;

  0004a	c7 45 e8 00 00
	00 00		 mov	 DWORD PTR _dz$1[ebp], 0

; 339  : 	
; 340  : 			ret = DI_BUFFEROVERFLOW;

  00051	c7 45 fc 01 00
	00 00		 mov	 DWORD PTR _ret$[ebp], 1
$LN2@generate_m:

; 341  : 	
; 342  : 			while ( ret == DI_BUFFEROVERFLOW )

  00058	83 7d fc 01	 cmp	 DWORD PTR _ret$[ebp], 1
  0005c	0f 85 49 01 00
	00		 jne	 $LN3@generate_m

; 343  : 			{
; 344  : 	
; 345  : 				//
; 346  : 				// Get the mouse events.
; 347  : 				//
; 348  : 	
; 349  : 				items = MAX_DI_MOUSE_EVENTS;

  00062	c7 45 f8 00 01
	00 00		 mov	 DWORD PTR _items$[ebp], 256 ; 00000100H

; 350  : 	
; 351  : 				ret = IDirectInputDevice_GetDeviceData ( direct_input_mouse,

  00069	6a 00		 push	 0
  0006b	8d 45 f8	 lea	 eax, DWORD PTR _items$[ebp]
  0006e	50		 push	 eax
  0006f	68 00 00 00 00	 push	 OFFSET ?direct_input_mouse_events@@3PAUDIDEVICEOBJECTDATA@@A
  00074	6a 10		 push	 16			; 00000010H
  00076	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?direct_input_mouse@@3PAUIDirectInputDevice7A@@A
  0007c	8b 11		 mov	 edx, DWORD PTR [ecx]
  0007e	a1 00 00 00 00	 mov	 eax, DWORD PTR ?direct_input_mouse@@3PAUIDirectInputDevice7A@@A
  00083	50		 push	 eax
  00084	8b 4a 28	 mov	 ecx, DWORD PTR [edx+40]
  00087	ff d1		 call	 ecx
  00089	89 45 fc	 mov	 DWORD PTR _ret$[ebp], eax

; 352  : 																			sizeof ( DIDEVICEOBJECTDATA ),
; 353  : 																			direct_input_mouse_events,
; 354  : 																			&items,
; 355  : 																			0 );
; 356  : 	
; 357  : 	
; 358  : 	//			if ( ( ret == DIERR_NOTACQUIRED ) || ( ret == DIERR_INPUTLOST ) )
; 359  : 	//			{
; 360  : 	//
; 361  : 	//				IDirectInputDevice_Acquire ( direct_input_mouse );
; 362  : 	//
; 363  : 	//				ret = IDirectInputDevice_GetDeviceData ( direct_input_mouse,
; 364  : 	//																			sizeof ( DIDEVICEOBJECTDATA ),
; 365  : 	//																			direct_input_mouse_events,
; 366  : 	//																			&items,
; 367  : 	//																			0 );
; 368  : 	//			}
; 369  : 	
; 370  : 				for ( count = 0; count < items; count++ )

  0008c	c7 45 f4 00 00
	00 00		 mov	 DWORD PTR _count$[ebp], 0
  00093	eb 09		 jmp	 SHORT $LN6@generate_m
$LN4@generate_m:
  00095	8b 45 f4	 mov	 eax, DWORD PTR _count$[ebp]
  00098	83 c0 01	 add	 eax, 1
  0009b	89 45 f4	 mov	 DWORD PTR _count$[ebp], eax
$LN6@generate_m:
  0009e	8b 45 f4	 mov	 eax, DWORD PTR _count$[ebp]
  000a1	3b 45 f8	 cmp	 eax, DWORD PTR _items$[ebp]
  000a4	0f 83 fc 00 00
	00		 jae	 $LN5@generate_m

; 371  : 				{
; 372  : 	
; 373  : 					switch ( direct_input_mouse_events[count].dwOfs )

  000aa	8b 45 f4	 mov	 eax, DWORD PTR _count$[ebp]
  000ad	c1 e0 04	 shl	 eax, 4
  000b0	8b 88 00 00 00
	00		 mov	 ecx, DWORD PTR ?direct_input_mouse_events@@3PAUDIDEVICEOBJECTDATA@@A[eax]
  000b6	89 4d a4	 mov	 DWORD PTR tv93[ebp], ecx
  000b9	83 7d a4 0e	 cmp	 DWORD PTR tv93[ebp], 14	; 0000000eH
  000bd	0f 87 de 00 00
	00		 ja	 $LN7@generate_m
  000c3	8b 55 a4	 mov	 edx, DWORD PTR tv93[ebp]
  000c6	0f b6 82 00 00
	00 00		 movzx	 eax, BYTE PTR $LN29@generate_m[edx]
  000cd	ff 24 85 00 00
	00 00		 jmp	 DWORD PTR $LN30@generate_m[eax*4]
$LN12@generate_m:

; 374  : 					{
; 375  : 	
; 376  : 						case DIMOFS_BUTTON0:
; 377  : 						{
; 378  : 	
; 379  : 							if ( direct_input_mouse_events[count].dwData & 0x80 )

  000d4	8b 45 f4	 mov	 eax, DWORD PTR _count$[ebp]
  000d7	c1 e0 04	 shl	 eax, 4
  000da	8b 88 04 00 00
	00		 mov	 ecx, DWORD PTR ?direct_input_mouse_events@@3PAUDIDEVICEOBJECTDATA@@A[eax+4]
  000e0	81 e1 80 00 00
	00		 and	 ecx, 128		; 00000080H
  000e6	74 0e		 je	 SHORT $LN13@generate_m

; 380  : 							{
; 381  : 			
; 382  : 								create_mouse_button_event ( MOUSE_LEFT_BUTTON, BUTTON_STATE_DOWN );

  000e8	6a 02		 push	 2
  000ea	68 00 01 00 00	 push	 256			; 00000100H
  000ef	e8 00 00 00 00	 call	 ?create_mouse_button_event@@YGXW4DEVICE_EVENTS@@W4BUTTON_STATES@@@Z ; create_mouse_button_event

; 383  : 							}
; 384  : 							else

  000f4	eb 0c		 jmp	 SHORT $LN14@generate_m
$LN13@generate_m:

; 385  : 							{
; 386  : 			
; 387  : 								create_mouse_button_event ( MOUSE_LEFT_BUTTON, BUTTON_STATE_UP );

  000f6	6a 01		 push	 1
  000f8	68 00 01 00 00	 push	 256			; 00000100H
  000fd	e8 00 00 00 00	 call	 ?create_mouse_button_event@@YGXW4DEVICE_EVENTS@@W4BUTTON_STATES@@@Z ; create_mouse_button_event
$LN14@generate_m:

; 388  : 							}
; 389  : 	
; 390  : 							break;

  00102	e9 9a 00 00 00	 jmp	 $LN7@generate_m
$LN15@generate_m:

; 391  : 						}
; 392  : 	
; 393  : 						case DIMOFS_BUTTON1:
; 394  : 						{
; 395  : 	
; 396  : 							if ( direct_input_mouse_events[count].dwData & 0x80 )

  00107	8b 45 f4	 mov	 eax, DWORD PTR _count$[ebp]
  0010a	c1 e0 04	 shl	 eax, 4
  0010d	8b 88 04 00 00
	00		 mov	 ecx, DWORD PTR ?direct_input_mouse_events@@3PAUDIDEVICEOBJECTDATA@@A[eax+4]
  00113	81 e1 80 00 00
	00		 and	 ecx, 128		; 00000080H
  00119	74 0e		 je	 SHORT $LN16@generate_m

; 397  : 							{
; 398  : 			
; 399  : 								create_mouse_button_event ( MOUSE_RIGHT_BUTTON, BUTTON_STATE_DOWN );

  0011b	6a 02		 push	 2
  0011d	68 01 01 00 00	 push	 257			; 00000101H
  00122	e8 00 00 00 00	 call	 ?create_mouse_button_event@@YGXW4DEVICE_EVENTS@@W4BUTTON_STATES@@@Z ; create_mouse_button_event

; 400  : 							}
; 401  : 							else

  00127	eb 0c		 jmp	 SHORT $LN17@generate_m
$LN16@generate_m:

; 402  : 							{
; 403  : 			
; 404  : 								create_mouse_button_event ( MOUSE_RIGHT_BUTTON, BUTTON_STATE_UP );

  00129	6a 01		 push	 1
  0012b	68 01 01 00 00	 push	 257			; 00000101H
  00130	e8 00 00 00 00	 call	 ?create_mouse_button_event@@YGXW4DEVICE_EVENTS@@W4BUTTON_STATES@@@Z ; create_mouse_button_event
$LN17@generate_m:

; 405  : 							}
; 406  : 	
; 407  : 							break;

  00135	eb 6a		 jmp	 SHORT $LN7@generate_m
$LN18@generate_m:

; 408  : 						}
; 409  : 						
; 410  : 						case DIMOFS_BUTTON2: // Jabberwock 031016 Middle button
; 411  : 						{
; 412  : 	
; 413  : 							if ( direct_input_mouse_events[count].dwData & 0x80 )

  00137	8b 45 f4	 mov	 eax, DWORD PTR _count$[ebp]
  0013a	c1 e0 04	 shl	 eax, 4
  0013d	8b 88 04 00 00
	00		 mov	 ecx, DWORD PTR ?direct_input_mouse_events@@3PAUDIDEVICEOBJECTDATA@@A[eax+4]
  00143	81 e1 80 00 00
	00		 and	 ecx, 128		; 00000080H
  00149	74 0e		 je	 SHORT $LN19@generate_m

; 414  : 							{
; 415  : 			
; 416  : 								create_mouse_button_event ( MOUSE_MIDDLE_BUTTON, BUTTON_STATE_DOWN );

  0014b	6a 02		 push	 2
  0014d	68 09 01 00 00	 push	 265			; 00000109H
  00152	e8 00 00 00 00	 call	 ?create_mouse_button_event@@YGXW4DEVICE_EVENTS@@W4BUTTON_STATES@@@Z ; create_mouse_button_event

; 417  : 							}
; 418  : 							else

  00157	eb 0c		 jmp	 SHORT $LN20@generate_m
$LN19@generate_m:

; 419  : 							{
; 420  : 			
; 421  : 								create_mouse_button_event ( MOUSE_MIDDLE_BUTTON, BUTTON_STATE_UP );

  00159	6a 01		 push	 1
  0015b	68 09 01 00 00	 push	 265			; 00000109H
  00160	e8 00 00 00 00	 call	 ?create_mouse_button_event@@YGXW4DEVICE_EVENTS@@W4BUTTON_STATES@@@Z ; create_mouse_button_event
$LN20@generate_m:

; 422  : 							}
; 423  : 	
; 424  : 							break;

  00165	eb 3a		 jmp	 SHORT $LN7@generate_m
$LN21@generate_m:

; 425  : 						}
; 426  : 						
; 427  : 	
; 428  : 						case DIMOFS_X:
; 429  : 						{
; 430  : 	
; 431  : 							dx += direct_input_mouse_events[count].dwData;

  00167	8b 45 f4	 mov	 eax, DWORD PTR _count$[ebp]
  0016a	c1 e0 04	 shl	 eax, 4
  0016d	8b 4d f0	 mov	 ecx, DWORD PTR _dx$3[ebp]
  00170	03 88 04 00 00
	00		 add	 ecx, DWORD PTR ?direct_input_mouse_events@@3PAUDIDEVICEOBJECTDATA@@A[eax+4]
  00176	89 4d f0	 mov	 DWORD PTR _dx$3[ebp], ecx

; 432  : 	
; 433  : 							break;

  00179	eb 26		 jmp	 SHORT $LN7@generate_m
$LN22@generate_m:

; 434  : 						}
; 435  : 	
; 436  : 						case DIMOFS_Y:
; 437  : 						{
; 438  : 	
; 439  : 							dy += direct_input_mouse_events[count].dwData;

  0017b	8b 45 f4	 mov	 eax, DWORD PTR _count$[ebp]
  0017e	c1 e0 04	 shl	 eax, 4
  00181	8b 4d ec	 mov	 ecx, DWORD PTR _dy$2[ebp]
  00184	03 88 04 00 00
	00		 add	 ecx, DWORD PTR ?direct_input_mouse_events@@3PAUDIDEVICEOBJECTDATA@@A[eax+4]
  0018a	89 4d ec	 mov	 DWORD PTR _dy$2[ebp], ecx

; 440  : 	
; 441  : 							break;

  0018d	eb 12		 jmp	 SHORT $LN7@generate_m
$LN23@generate_m:

; 442  : 						}
; 443  : 
; 444  : 						case DIMOFS_Z:
; 445  : 						{
; 446  : 	
; 447  : 							dz += direct_input_mouse_events[count].dwData;

  0018f	8b 45 f4	 mov	 eax, DWORD PTR _count$[ebp]
  00192	c1 e0 04	 shl	 eax, 4
  00195	8b 4d e8	 mov	 ecx, DWORD PTR _dz$1[ebp]
  00198	03 88 04 00 00
	00		 add	 ecx, DWORD PTR ?direct_input_mouse_events@@3PAUDIDEVICEOBJECTDATA@@A[eax+4]
  0019e	89 4d e8	 mov	 DWORD PTR _dz$1[ebp], ecx
$LN7@generate_m:

; 448  : 	
; 449  : 							break;
; 450  : 						}
; 451  : 					}
; 452  : 				}

  001a1	e9 ef fe ff ff	 jmp	 $LN4@generate_m
$LN5@generate_m:

; 453  : 			}

  001a6	e9 ad fe ff ff	 jmp	 $LN2@generate_m
$LN3@generate_m:

; 454  : 	
; 455  : 			if ( ( dx != 0 ) || ( dy != 0 ) || ( dz != 0 ) )

  001ab	83 7d f0 00	 cmp	 DWORD PTR _dx$3[ebp], 0
  001af	75 0c		 jne	 SHORT $LN25@generate_m
  001b1	83 7d ec 00	 cmp	 DWORD PTR _dy$2[ebp], 0
  001b5	75 06		 jne	 SHORT $LN25@generate_m
  001b7	83 7d e8 00	 cmp	 DWORD PTR _dz$1[ebp], 0
  001bb	74 43		 je	 SHORT $LN24@generate_m
$LN25@generate_m:

; 456  : 			{
; 457  : 
; 458  : 				if ( ( abs ( dx ) > 4 ) || ( abs ( dy ) > 4 ) )

  001bd	8b 45 f0	 mov	 eax, DWORD PTR _dx$3[ebp]
  001c0	50		 push	 eax
  001c1	e8 00 00 00 00	 call	 _abs
  001c6	83 c4 04	 add	 esp, 4
  001c9	83 f8 04	 cmp	 eax, 4
  001cc	7f 11		 jg	 SHORT $LN27@generate_m
  001ce	8b 45 ec	 mov	 eax, DWORD PTR _dy$2[ebp]
  001d1	50		 push	 eax
  001d2	e8 00 00 00 00	 call	 _abs
  001d7	83 c4 04	 add	 esp, 4
  001da	83 f8 04	 cmp	 eax, 4
  001dd	7e 10		 jle	 SHORT $LN26@generate_m
$LN27@generate_m:

; 459  : 				{
; 460  : 
; 461  : 					dx *= 2;

  001df	8b 45 f0	 mov	 eax, DWORD PTR _dx$3[ebp]
  001e2	d1 e0		 shl	 eax, 1
  001e4	89 45 f0	 mov	 DWORD PTR _dx$3[ebp], eax

; 462  : 
; 463  : 					dy *= 2;

  001e7	8b 45 ec	 mov	 eax, DWORD PTR _dy$2[ebp]
  001ea	d1 e0		 shl	 eax, 1
  001ec	89 45 ec	 mov	 DWORD PTR _dy$2[ebp], eax
$LN26@generate_m:

; 464  : 				}
; 465  : 
; 466  : 
; 467  : 				create_mouse_move_event ( dx, dy, dz );

  001ef	8b 45 e8	 mov	 eax, DWORD PTR _dz$1[ebp]
  001f2	50		 push	 eax
  001f3	8b 4d ec	 mov	 ecx, DWORD PTR _dy$2[ebp]
  001f6	51		 push	 ecx
  001f7	8b 55 f0	 mov	 edx, DWORD PTR _dx$3[ebp]
  001fa	52		 push	 edx
  001fb	e8 00 00 00 00	 call	 ?create_mouse_move_event@@YGXHHH@Z ; create_mouse_move_event
$LN24@generate_m:

; 468  : 			}
; 469  : 			
; 470  : 			move_mouse ( dx, dy );

  00200	8b 45 ec	 mov	 eax, DWORD PTR _dy$2[ebp]
  00203	50		 push	 eax
  00204	8b 4d f0	 mov	 ecx, DWORD PTR _dx$3[ebp]
  00207	51		 push	 ecx
  00208	e8 00 00 00 00	 call	 ?move_mouse@@YGXHH@Z	; move_mouse
$LN1@generate_m:

; 471  : 	
; 472  : 		}
; 473  : 	}
; 474  : }

  0020d	5f		 pop	 edi
  0020e	5e		 pop	 esi
  0020f	5b		 pop	 ebx
  00210	8b e5		 mov	 esp, ebp
  00212	5d		 pop	 ebp
  00213	c3		 ret	 0
$LN30@generate_m:
  00214	00 00 00 00	 DD	 $LN21@generate_m
  00218	00 00 00 00	 DD	 $LN22@generate_m
  0021c	00 00 00 00	 DD	 $LN23@generate_m
  00220	00 00 00 00	 DD	 $LN12@generate_m
  00224	00 00 00 00	 DD	 $LN15@generate_m
  00228	00 00 00 00	 DD	 $LN18@generate_m
  0022c	00 00 00 00	 DD	 $LN7@generate_m
$LN29@generate_m:
  00230	00		 DB	 0
  00231	06		 DB	 6
  00232	06		 DB	 6
  00233	06		 DB	 6
  00234	01		 DB	 1
  00235	06		 DB	 6
  00236	06		 DB	 6
  00237	06		 DB	 6
  00238	02		 DB	 2
  00239	06		 DB	 6
  0023a	06		 DB	 6
  0023b	06		 DB	 6
  0023c	03		 DB	 3
  0023d	04		 DB	 4
  0023e	05		 DB	 5
?generate_mouse_events@@YGXXZ ENDP			; generate_mouse_events
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\modules\system\mouse.c
;	COMDAT ?deinitialise_mouse@@YGXXZ
_TEXT	SEGMENT
?deinitialise_mouse@@YGXXZ PROC				; deinitialise_mouse, COMDAT

; 263  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 264  : 
; 265  : 	if ( direct_input_mouse )

  00009	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?direct_input_mouse@@3PAUIDirectInputDevice7A@@A, 0
  00010	74 30		 je	 SHORT $LN1@deinitiali

; 266  : 	{
; 267  : 
; 268  : 		IDirectInputDevice7_Unacquire ( direct_input_mouse );

  00012	a1 00 00 00 00	 mov	 eax, DWORD PTR ?direct_input_mouse@@3PAUIDirectInputDevice7A@@A
  00017	8b 08		 mov	 ecx, DWORD PTR [eax]
  00019	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?direct_input_mouse@@3PAUIDirectInputDevice7A@@A
  0001f	52		 push	 edx
  00020	8b 41 20	 mov	 eax, DWORD PTR [ecx+32]
  00023	ff d0		 call	 eax

; 269  : 
; 270  : 		IDirectInputDevice7_Release ( direct_input_mouse );

  00025	a1 00 00 00 00	 mov	 eax, DWORD PTR ?direct_input_mouse@@3PAUIDirectInputDevice7A@@A
  0002a	8b 08		 mov	 ecx, DWORD PTR [eax]
  0002c	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?direct_input_mouse@@3PAUIDirectInputDevice7A@@A
  00032	52		 push	 edx
  00033	8b 41 08	 mov	 eax, DWORD PTR [ecx+8]
  00036	ff d0		 call	 eax

; 271  : 
; 272  : 		direct_input_mouse = NULL;

  00038	c7 05 00 00 00
	00 00 00 00 00	 mov	 DWORD PTR ?direct_input_mouse@@3PAUIDirectInputDevice7A@@A, 0
$LN1@deinitiali:

; 273  : 	}
; 274  : }

  00042	5f		 pop	 edi
  00043	5e		 pop	 esi
  00044	5b		 pop	 ebx
  00045	8b e5		 mov	 esp, ebp
  00047	5d		 pop	 ebp
  00048	c3		 ret	 0
?deinitialise_mouse@@YGXXZ ENDP				; deinitialise_mouse
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\modules\system\mouse.c
;	COMDAT ?initialise_mouse@@YGXXZ
_TEXT	SEGMENT
_di_buffer_data$ = -24					; size = 20
_ret$ = -4						; size = 4
?initialise_mouse@@YGXXZ PROC				; initialise_mouse, COMDAT

; 152  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 58	 sub	 esp, 88			; 00000058H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 153  : 
; 154  : 	HRESULT
; 155  : 		ret;
; 156  : 
; 157  : 	DIPROPDWORD
; 158  : 		di_buffer_data;
; 159  : 
; 160  : 	mouse_position_x = 0;

  00009	c7 05 00 00 00
	00 00 00 00 00	 mov	 DWORD PTR ?mouse_position_x@@3HA, 0

; 161  : 
; 162  : 	mouse_position_y = 0;

  00013	c7 05 00 00 00
	00 00 00 00 00	 mov	 DWORD PTR ?mouse_position_y@@3HA, 0

; 163  : 
; 164  : 	mouse_on = FALSE;

  0001d	c7 05 00 00 00
	00 00 00 00 00	 mov	 DWORD PTR ?mouse_on@@3HA, 0

; 165  : 
; 166  : 	remove_mouse_graphic_function = NULL;

  00027	c7 05 00 00 00
	00 00 00 00 00	 mov	 DWORD PTR ?remove_mouse_graphic_function@@3P6GXHH@ZA, 0

; 167  : 
; 168  : 	draw_mouse_graphic_function = NULL;

  00031	c7 05 00 00 00
	00 00 00 00 00	 mov	 DWORD PTR ?draw_mouse_graphic_function@@3P6GXHH@ZA, 0

; 169  : 
; 170  : 	if ( input_system_type == INPUT_DIRECTINPUT )

  0003b	83 3d 00 00 00
	00 01		 cmp	 DWORD PTR ?input_system_type@@3W4INPUT_TYPES@@A, 1 ; input_system_type
  00042	0f 85 4d 01 00
	00		 jne	 $LN2@initialise

; 171  : 	{
; 172  : 	
; 173  : 		ret = IDirectInput7_CreateDeviceEx ( direct_input, GUID_PREFIX GUID_SysMouse, GUID_PREFIX IID_IDirectInputDevice7, ( LPVOID * ) &direct_input_mouse, NULL );

  00048	6a 00		 push	 0
  0004a	68 00 00 00 00	 push	 OFFSET ?direct_input_mouse@@3PAUIDirectInputDevice7A@@A
  0004f	68 00 00 00 00	 push	 OFFSET _IID_IDirectInputDevice7A
  00054	68 00 00 00 00	 push	 OFFSET _GUID_SysMouse
  00059	a1 00 00 00 00	 mov	 eax, DWORD PTR ?direct_input@@3PAUIDirectInput7A@@A ; direct_input
  0005e	8b 08		 mov	 ecx, DWORD PTR [eax]
  00060	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?direct_input@@3PAUIDirectInput7A@@A ; direct_input
  00066	52		 push	 edx
  00067	8b 41 24	 mov	 eax, DWORD PTR [ecx+36]
  0006a	ff d0		 call	 eax
  0006c	89 45 fc	 mov	 DWORD PTR _ret$[ebp], eax

; 174  : 	
; 175  : 		if (ret != DI_OK )

  0006f	83 7d fc 00	 cmp	 DWORD PTR _ret$[ebp], 0
  00073	74 05		 je	 SHORT $LN4@initialise

; 176  : 		{
; 177  : 	
; 178  : 			return;

  00075	e9 8f 01 00 00	 jmp	 $LN1@initialise
$LN4@initialise:

; 179  : 		}
; 180  : 	
; 181  : 		ret = IDirectInputDevice7_SetDataFormat ( direct_input_mouse, &c_dfDIMouse );

  0007a	68 00 00 00 00	 push	 OFFSET _c_dfDIMouse
  0007f	a1 00 00 00 00	 mov	 eax, DWORD PTR ?direct_input_mouse@@3PAUIDirectInputDevice7A@@A
  00084	8b 08		 mov	 ecx, DWORD PTR [eax]
  00086	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?direct_input_mouse@@3PAUIDirectInputDevice7A@@A
  0008c	52		 push	 edx
  0008d	8b 41 2c	 mov	 eax, DWORD PTR [ecx+44]
  00090	ff d0		 call	 eax
  00092	89 45 fc	 mov	 DWORD PTR _ret$[ebp], eax

; 182  : 	
; 183  : 		if ( ret != DI_OK )

  00095	83 7d fc 00	 cmp	 DWORD PTR _ret$[ebp], 0
  00099	74 05		 je	 SHORT $LN5@initialise

; 184  : 		{
; 185  : 	
; 186  : 			return;

  0009b	e9 69 01 00 00	 jmp	 $LN1@initialise
$LN5@initialise:

; 187  : 		}
; 188  : 
; 189  : 		// JB 030311 from Andrew
; 190  : 		// Sometimes a double mouse is visible (when the resilution in EECH is different from the desktop)
; 191  : 		// VJ 030430 Double mouse problem, Changed last param to NONEXCLUSIVE
; 192  : 		ret = IDirectInputDevice7_SetCooperativeLevel ( direct_input_mouse, application_window, DISCL_FOREGROUND | DISCL_NONEXCLUSIVE );	

  000a0	6a 06		 push	 6
  000a2	a1 00 00 00 00	 mov	 eax, DWORD PTR ?application_window@@3PAUHWND__@@A ; application_window
  000a7	50		 push	 eax
  000a8	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?direct_input_mouse@@3PAUIDirectInputDevice7A@@A
  000ae	8b 11		 mov	 edx, DWORD PTR [ecx]
  000b0	a1 00 00 00 00	 mov	 eax, DWORD PTR ?direct_input_mouse@@3PAUIDirectInputDevice7A@@A
  000b5	50		 push	 eax
  000b6	8b 4a 34	 mov	 ecx, DWORD PTR [edx+52]
  000b9	ff d1		 call	 ecx
  000bb	89 45 fc	 mov	 DWORD PTR _ret$[ebp], eax

; 193  : 		
; 194  : 		if ( ret != DI_OK )

  000be	83 7d fc 00	 cmp	 DWORD PTR _ret$[ebp], 0
  000c2	74 05		 je	 SHORT $LN6@initialise

; 195  : 		{
; 196  : 	
; 197  : 			return;

  000c4	e9 40 01 00 00	 jmp	 $LN1@initialise
$LN6@initialise:

; 198  : 		}
; 199  : 
; 200  : 		mouse_handle = CreateEvent ( 0, 0, 0, 0 );

  000c9	6a 00		 push	 0
  000cb	6a 00		 push	 0
  000cd	6a 00		 push	 0
  000cf	6a 00		 push	 0
  000d1	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__CreateEventA@16
  000d7	a3 00 00 00 00	 mov	 DWORD PTR ?mouse_handle@@3PAXA, eax ; mouse_handle

; 201  : 
; 202  : 		if ( mouse_handle == NULL )

  000dc	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?mouse_handle@@3PAXA, 0 ; mouse_handle
  000e3	75 0d		 jne	 SHORT $LN7@initialise

; 203  : 		{
; 204  : 
; 205  : 			debug_fatal ( "Unable to create a handle for the mouse" );

  000e5	68 00 00 00 00	 push	 OFFSET ??_C@_0CI@JEHIIDHE@Unable?5to?5create?5a?5handle?5for?5t@
  000ea	e8 00 00 00 00	 call	 ?debug_fatal@@YAXPBDZZ	; debug_fatal
  000ef	83 c4 04	 add	 esp, 4
$LN7@initialise:

; 206  : 		}
; 207  : 
; 208  : 		IDirectInputDevice7_SetEventNotification ( direct_input_mouse, mouse_handle );

  000f2	a1 00 00 00 00	 mov	 eax, DWORD PTR ?mouse_handle@@3PAXA ; mouse_handle
  000f7	50		 push	 eax
  000f8	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?direct_input_mouse@@3PAUIDirectInputDevice7A@@A
  000fe	8b 11		 mov	 edx, DWORD PTR [ecx]
  00100	a1 00 00 00 00	 mov	 eax, DWORD PTR ?direct_input_mouse@@3PAUIDirectInputDevice7A@@A
  00105	50		 push	 eax
  00106	8b 4a 30	 mov	 ecx, DWORD PTR [edx+48]
  00109	ff d1		 call	 ecx

; 209  : 
; 210  : 		//
; 211  : 		// Set the hardware buffering of the keyboard
; 212  : 		//
; 213  : 	
; 214  : 		di_buffer_data.diph.dwSize = sizeof ( DIPROPDWORD );

  0010b	c7 45 e8 14 00
	00 00		 mov	 DWORD PTR _di_buffer_data$[ebp], 20 ; 00000014H

; 215  : 		di_buffer_data.diph.dwHeaderSize = sizeof ( DIPROPHEADER );

  00112	c7 45 ec 10 00
	00 00		 mov	 DWORD PTR _di_buffer_data$[ebp+4], 16 ; 00000010H

; 216  : 		di_buffer_data.diph.dwObj = 0;

  00119	c7 45 f0 00 00
	00 00		 mov	 DWORD PTR _di_buffer_data$[ebp+8], 0

; 217  : 		di_buffer_data.diph.dwHow = DIPH_DEVICE;

  00120	c7 45 f4 00 00
	00 00		 mov	 DWORD PTR _di_buffer_data$[ebp+12], 0

; 218  : 		di_buffer_data.dwData = MOUSE_BUFFER_SIZE;

  00127	c7 45 f8 10 00
	00 00		 mov	 DWORD PTR _di_buffer_data$[ebp+16], 16 ; 00000010H

; 219  : 	
; 220  : 		ret = IDirectInputDevice7_SetProperty ( direct_input_mouse, DIPROP_BUFFERSIZE, &di_buffer_data.diph );

  0012e	8d 45 e8	 lea	 eax, DWORD PTR _di_buffer_data$[ebp]
  00131	50		 push	 eax
  00132	6a 01		 push	 1
  00134	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?direct_input_mouse@@3PAUIDirectInputDevice7A@@A
  0013a	8b 11		 mov	 edx, DWORD PTR [ecx]
  0013c	a1 00 00 00 00	 mov	 eax, DWORD PTR ?direct_input_mouse@@3PAUIDirectInputDevice7A@@A
  00141	50		 push	 eax
  00142	8b 4a 18	 mov	 ecx, DWORD PTR [edx+24]
  00145	ff d1		 call	 ecx
  00147	89 45 fc	 mov	 DWORD PTR _ret$[ebp], eax

; 221  : 	
; 222  : 		if ( ret != DI_OK )

  0014a	83 7d fc 00	 cmp	 DWORD PTR _ret$[ebp], 0
  0014e	74 05		 je	 SHORT $LN8@initialise

; 223  : 		{
; 224  : 	
; 225  : 			return;

  00150	e9 b4 00 00 00	 jmp	 $LN1@initialise
$LN8@initialise:

; 226  : 		}
; 227  : 
; 228  : 		//
; 229  : 		// register the activation routine.
; 230  : 		//
; 231  : 
; 232  : 		register_pre_activate_message_function ( mouse_activation_routine );

  00155	68 00 00 00 00	 push	 OFFSET ?mouse_activation_routine@@YGXH@Z ; mouse_activation_routine
  0015a	e8 00 00 00 00	 call	 ?register_pre_activate_message_function@@YGHP6GXH@Z@Z ; register_pre_activate_message_function

; 233  : 
; 234  : 		ret = IDirectInputDevice7_Acquire ( direct_input_mouse );

  0015f	a1 00 00 00 00	 mov	 eax, DWORD PTR ?direct_input_mouse@@3PAUIDirectInputDevice7A@@A
  00164	8b 08		 mov	 ecx, DWORD PTR [eax]
  00166	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?direct_input_mouse@@3PAUIDirectInputDevice7A@@A
  0016c	52		 push	 edx
  0016d	8b 41 1c	 mov	 eax, DWORD PTR [ecx+28]
  00170	ff d0		 call	 eax
  00172	89 45 fc	 mov	 DWORD PTR _ret$[ebp], eax

; 235  : 
; 236  : 		ret = IDirectInputDevice7_SetCooperativeLevel ( direct_input_mouse, application_window, DISCL_FOREGROUND | DISCL_NONEXCLUSIVE );

  00175	6a 06		 push	 6
  00177	a1 00 00 00 00	 mov	 eax, DWORD PTR ?application_window@@3PAUHWND__@@A ; application_window
  0017c	50		 push	 eax
  0017d	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?direct_input_mouse@@3PAUIDirectInputDevice7A@@A
  00183	8b 11		 mov	 edx, DWORD PTR [ecx]
  00185	a1 00 00 00 00	 mov	 eax, DWORD PTR ?direct_input_mouse@@3PAUIDirectInputDevice7A@@A
  0018a	50		 push	 eax
  0018b	8b 4a 34	 mov	 ecx, DWORD PTR [edx+52]
  0018e	ff d1		 call	 ecx
  00190	89 45 fc	 mov	 DWORD PTR _ret$[ebp], eax

; 237  : 	}
; 238  : 	else

  00193	eb 74		 jmp	 SHORT $LN1@initialise
$LN2@initialise:

; 239  : 	{
; 240  : 
; 241  : 		//
; 242  : 		// Assumes the only other input system is windows
; 243  : 		//
; 244  : 
; 245  : 		GetCursorPos ( &windows_cursor_position );

  00195	68 00 00 00 00	 push	 OFFSET ?windows_cursor_position@@3UtagPOINT@@A
  0019a	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetCursorPos@4

; 246  : 
; 247  : 		register_system_message_function ( WM_MOUSEMOVE, windows_mouse_move_routine );

  001a0	68 00 00 00 00	 push	 OFFSET ?windows_mouse_move_routine@@YGJPAUHWND__@@IIJ@Z ; windows_mouse_move_routine
  001a5	68 00 02 00 00	 push	 512			; 00000200H
  001aa	e8 00 00 00 00	 call	 ?register_system_message_function@@YGHHP6GJPAUHWND__@@IIJ@Z@Z ; register_system_message_function

; 248  : 		register_system_message_function ( WM_LBUTTONDOWN, windows_left_button_down_routine );

  001af	68 00 00 00 00	 push	 OFFSET ?windows_left_button_down_routine@@YGJPAUHWND__@@IIJ@Z ; windows_left_button_down_routine
  001b4	68 01 02 00 00	 push	 513			; 00000201H
  001b9	e8 00 00 00 00	 call	 ?register_system_message_function@@YGHHP6GJPAUHWND__@@IIJ@Z@Z ; register_system_message_function

; 249  : 		register_system_message_function ( WM_LBUTTONUP, windows_left_button_up_routine );

  001be	68 00 00 00 00	 push	 OFFSET ?windows_left_button_up_routine@@YGJPAUHWND__@@IIJ@Z ; windows_left_button_up_routine
  001c3	68 02 02 00 00	 push	 514			; 00000202H
  001c8	e8 00 00 00 00	 call	 ?register_system_message_function@@YGHHP6GJPAUHWND__@@IIJ@Z@Z ; register_system_message_function

; 250  : 		register_system_message_function ( WM_RBUTTONDOWN, windows_right_button_down_routine );

  001cd	68 00 00 00 00	 push	 OFFSET ?windows_right_button_down_routine@@YGJPAUHWND__@@IIJ@Z ; windows_right_button_down_routine
  001d2	68 04 02 00 00	 push	 516			; 00000204H
  001d7	e8 00 00 00 00	 call	 ?register_system_message_function@@YGHHP6GJPAUHWND__@@IIJ@Z@Z ; register_system_message_function

; 251  : 		register_system_message_function ( WM_RBUTTONUP, windows_right_button_up_routine );

  001dc	68 00 00 00 00	 push	 OFFSET ?windows_right_button_up_routine@@YGJPAUHWND__@@IIJ@Z ; windows_right_button_up_routine
  001e1	68 05 02 00 00	 push	 517			; 00000205H
  001e6	e8 00 00 00 00	 call	 ?register_system_message_function@@YGHHP6GJPAUHWND__@@IIJ@Z@Z ; register_system_message_function

; 252  : 		register_system_message_function ( WM_MBUTTONDOWN, windows_middle_button_down_routine );

  001eb	68 00 00 00 00	 push	 OFFSET ?windows_middle_button_down_routine@@YGJPAUHWND__@@IIJ@Z ; windows_middle_button_down_routine
  001f0	68 07 02 00 00	 push	 519			; 00000207H
  001f5	e8 00 00 00 00	 call	 ?register_system_message_function@@YGHHP6GJPAUHWND__@@IIJ@Z@Z ; register_system_message_function

; 253  : 		register_system_message_function ( WM_MBUTTONUP, windows_middle_button_up_routine ); // Jabberwock 031016 Middle button

  001fa	68 00 00 00 00	 push	 OFFSET ?windows_middle_button_up_routine@@YGJPAUHWND__@@IIJ@Z ; windows_middle_button_up_routine
  001ff	68 08 02 00 00	 push	 520			; 00000208H
  00204	e8 00 00 00 00	 call	 ?register_system_message_function@@YGHHP6GJPAUHWND__@@IIJ@Z@Z ; register_system_message_function
$LN1@initialise:

; 254  : 
; 255  : 	}
; 256  : }

  00209	5f		 pop	 edi
  0020a	5e		 pop	 esi
  0020b	5b		 pop	 ebx
  0020c	8b e5		 mov	 esp, ebp
  0020e	5d		 pop	 ebp
  0020f	c3		 ret	 0
?initialise_mouse@@YGXXZ ENDP				; initialise_mouse
_TEXT	ENDS
END
