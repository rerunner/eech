; Listing generated by Microsoft (R) Optimizing Compiler Version 19.16.27045.0 

	TITLE	C:\Users\nhv90\Projects\eech\modules\system\sysmess.c
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB MSVCRTD
INCLUDELIB OLDNAMES

PUBLIC	?message_table@@3PAUmessage_table_struct@@A	; message_table
_BSS	SEGMENT
?message_table@@3PAUmessage_table_struct@@A DQ 0400H DUP (?) ; message_table
_BSS	ENDS
PUBLIC	?get_unique_message_id@@YGHXZ			; get_unique_message_id
PUBLIC	?system_thread_function@@YGHP6GHPAX@Z0@Z	; system_thread_function
PUBLIC	?initialise_system_thread_calling_function@@YGXXZ ; initialise_system_thread_calling_function
EXTRN	__imp__GetCurrentThreadId@0:PROC
EXTRN	__imp__SendMessageA@16:PROC
EXTRN	?register_user_message_function@@YGHHP6GJPAX@Z@Z:PROC ; register_user_message_function
EXTRN	?application_window@@3PAUHWND__@@A:DWORD	; application_window
EXTRN	?system_thread_id@@3KA:DWORD			; system_thread_id
_BSS	SEGMENT
?global_message_id@@3HA DD 01H DUP (?)			; global_message_id
?system_thread_calling_id@@3HA DD 01H DUP (?)		; system_thread_calling_id
?system_thread_return_code@@3HA DD 01H DUP (?)		; system_thread_return_code
?system_thread_function_pointer@@3P6GHPAX@ZA DD 01H DUP (?) ; system_thread_function_pointer
_BSS	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\modules\system\sysmess.c
;	COMDAT ?system_thread_system_function@@YGJPAX@Z
_TEXT	SEGMENT
_data$ = 8						; size = 4
?system_thread_system_function@@YGJPAX@Z PROC		; system_thread_system_function, COMDAT

; 169  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 170  : 
; 171  : 	system_thread_return_code = system_thread_function_pointer ( data );

  00009	8b 45 08	 mov	 eax, DWORD PTR _data$[ebp]
  0000c	50		 push	 eax
  0000d	ff 15 00 00 00
	00		 call	 DWORD PTR ?system_thread_function_pointer@@3P6GHPAX@ZA
  00013	a3 00 00 00 00	 mov	 DWORD PTR ?system_thread_return_code@@3HA, eax

; 172  : 
; 173  : 	return ( 0 );

  00018	33 c0		 xor	 eax, eax

; 174  : }

  0001a	5f		 pop	 edi
  0001b	5e		 pop	 esi
  0001c	5b		 pop	 ebx
  0001d	8b e5		 mov	 esp, ebp
  0001f	5d		 pop	 ebp
  00020	c2 04 00	 ret	 4
?system_thread_system_function@@YGJPAX@Z ENDP		; system_thread_system_function
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\modules\system\sysmess.c
;	COMDAT ?initialise_system_thread_calling_function@@YGXXZ
_TEXT	SEGMENT
?initialise_system_thread_calling_function@@YGXXZ PROC	; initialise_system_thread_calling_function, COMDAT

; 132  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 133  : 
; 134  : 	system_thread_calling_id = get_unique_message_id ();

  00009	e8 00 00 00 00	 call	 ?get_unique_message_id@@YGHXZ ; get_unique_message_id
  0000e	a3 00 00 00 00	 mov	 DWORD PTR ?system_thread_calling_id@@3HA, eax

; 135  : 
; 136  : 	register_user_message_function ( system_thread_calling_id, system_thread_system_function );

  00013	68 00 00 00 00	 push	 OFFSET ?system_thread_system_function@@YGJPAX@Z ; system_thread_system_function
  00018	a1 00 00 00 00	 mov	 eax, DWORD PTR ?system_thread_calling_id@@3HA
  0001d	50		 push	 eax
  0001e	e8 00 00 00 00	 call	 ?register_user_message_function@@YGHHP6GJPAX@Z@Z ; register_user_message_function

; 137  : }

  00023	5f		 pop	 edi
  00024	5e		 pop	 esi
  00025	5b		 pop	 ebx
  00026	8b e5		 mov	 esp, ebp
  00028	5d		 pop	 ebp
  00029	c3		 ret	 0
?initialise_system_thread_calling_function@@YGXXZ ENDP	; initialise_system_thread_calling_function
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\modules\system\sysmess.c
;	COMDAT ?system_thread_function@@YGHP6GHPAX@Z0@Z
_TEXT	SEGMENT
_function$ = 8						; size = 4
_data$ = 12						; size = 4
?system_thread_function@@YGHP6GHPAX@Z0@Z PROC		; system_thread_function, COMDAT

; 144  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 145  : 
; 146  : //	system_thread_return_code = function ( data );
; 147  : 
; 148  : 	if ( GetCurrentThreadId () == system_thread_id )

  00009	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetCurrentThreadId@0
  0000f	3b 05 00 00 00
	00		 cmp	 eax, DWORD PTR ?system_thread_id@@3KA ; system_thread_id
  00015	75 0e		 jne	 SHORT $LN2@system_thr

; 149  : 	{
; 150  : 
; 151  : 		system_thread_return_code = function ( data );

  00017	8b 45 0c	 mov	 eax, DWORD PTR _data$[ebp]
  0001a	50		 push	 eax
  0001b	ff 55 08	 call	 DWORD PTR _function$[ebp]
  0001e	a3 00 00 00 00	 mov	 DWORD PTR ?system_thread_return_code@@3HA, eax

; 152  : 	}
; 153  : 	else

  00023	eb 25		 jmp	 SHORT $LN3@system_thr
$LN2@system_thr:

; 154  : 	{
; 155  : 
; 156  : 		system_thread_function_pointer = function;

  00025	8b 45 08	 mov	 eax, DWORD PTR _function$[ebp]
  00028	a3 00 00 00 00	 mov	 DWORD PTR ?system_thread_function_pointer@@3P6GHPAX@ZA, eax

; 157  : 
; 158  : 		SendMessage ( application_window, WM_USER, system_thread_calling_id, (LPARAM) data );

  0002d	8b 45 0c	 mov	 eax, DWORD PTR _data$[ebp]
  00030	50		 push	 eax
  00031	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?system_thread_calling_id@@3HA
  00037	51		 push	 ecx
  00038	68 00 04 00 00	 push	 1024			; 00000400H
  0003d	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?application_window@@3PAUHWND__@@A ; application_window
  00043	52		 push	 edx
  00044	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__SendMessageA@16
$LN3@system_thr:

; 159  : 	}
; 160  : 
; 161  : 	return ( system_thread_return_code );

  0004a	a1 00 00 00 00	 mov	 eax, DWORD PTR ?system_thread_return_code@@3HA

; 162  : }

  0004f	5f		 pop	 edi
  00050	5e		 pop	 esi
  00051	5b		 pop	 ebx
  00052	8b e5		 mov	 esp, ebp
  00054	5d		 pop	 ebp
  00055	c2 08 00	 ret	 8
?system_thread_function@@YGHP6GHPAX@Z0@Z ENDP		; system_thread_function
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\modules\system\sysmess.c
;	COMDAT ?get_unique_message_id@@YGHXZ
_TEXT	SEGMENT
?get_unique_message_id@@YGHXZ PROC			; get_unique_message_id, COMDAT

; 103  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 104  : 
; 105  :     global_message_id ++;

  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ?global_message_id@@3HA
  0000e	83 c0 01	 add	 eax, 1
  00011	a3 00 00 00 00	 mov	 DWORD PTR ?global_message_id@@3HA, eax

; 106  : 
; 107  :     return ( global_message_id );

  00016	a1 00 00 00 00	 mov	 eax, DWORD PTR ?global_message_id@@3HA

; 108  : }

  0001b	5f		 pop	 edi
  0001c	5e		 pop	 esi
  0001d	5b		 pop	 ebx
  0001e	8b e5		 mov	 esp, ebp
  00020	5d		 pop	 ebp
  00021	c3		 ret	 0
?get_unique_message_id@@YGHXZ ENDP			; get_unique_message_id
_TEXT	ENDS
END
