; Listing generated by Microsoft (R) Optimizing Compiler Version 19.16.27045.0 

	TITLE	C:\Users\nhv90\Projects\eech\aphavoc\source\entity\special\effect\sprite\sp_updt.c
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB MSVCRTD
INCLUDELIB OLDNAMES

PUBLIC	?overload_sprite_update_functions@@YGXXZ	; overload_sprite_update_functions
PUBLIC	?__LINE__Var@?0??update_server@@YGXPAUENTITY@@@Z@4JA ; `update_server'::`1'::__LINE__Var
PUBLIC	??_C@_0FD@FBBGKNGP@c?3?2users?2nhv90?2projects?2eech?2ap@ ; `string'
EXTRN	?process_assert@@YGXPBD0H@Z:PROC		; process_assert
EXTRN	?system_delta_time@@3MA:DWORD			; system_delta_time
EXTRN	?null_entity_pointer_message@@3PBDB:DWORD	; null_entity_pointer_message
EXTRN	?system_comms_model@@3W4COMMS_MODEL_TYPES@@A:DWORD ; system_comms_model
EXTRN	?fn_destroy_client_server_entity_family@@3PAY01P6GXPAUENTITY@@@ZA:BYTE ; fn_destroy_client_server_entity_family
EXTRN	?fn_update_client_server_entity@@3PAY01P6GXPAUENTITY@@@ZA:BYTE ; fn_update_client_server_entity
EXTRN	__fltused:DWORD
;	COMDAT ??_C@_0FD@FBBGKNGP@c?3?2users?2nhv90?2projects?2eech?2ap@
CONST	SEGMENT
??_C@_0FD@FBBGKNGP@c?3?2users?2nhv90?2projects?2eech?2ap@ DB 'c:\users\nh'
	DB	'v90\projects\eech\aphavoc\source\entity\special\effect\sprite'
	DB	'\sp_updt.c', 00H				; `string'
CONST	ENDS
;	COMDAT ?__LINE__Var@?0??update_server@@YGXPAUENTITY@@@Z@4JA
_DATA	SEGMENT
?__LINE__Var@?0??update_server@@YGXPAUENTITY@@@Z@4JA DD 050H ; `update_server'::`1'::__LINE__Var
_DATA	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\entity\special\effect\sprite\sp_updt.c
;	COMDAT ?update_client@@YGXPAUENTITY@@@Z
_TEXT	SEGMENT
_raw$ = -4						; size = 4
_en$ = 8						; size = 4
?update_client@@YGXPAUENTITY@@@Z PROC			; update_client, COMDAT

; 105  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 44	 sub	 esp, 68			; 00000044H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 106  : 
; 107  : 	sprite
; 108  : 		*raw;
; 109  : 
; 110  : 	#if DEBUG_MODULE
; 111  : 
; 112  : 	debug_log ("SPRITE: update");
; 113  : 
; 114  : 	#endif
; 115  : 
; 116  : 	raw = (sprite *) get_local_entity_data (en);

  00009	8b 45 08	 mov	 eax, DWORD PTR _en$[ebp]
  0000c	8b 48 04	 mov	 ecx, DWORD PTR [eax+4]
  0000f	89 4d fc	 mov	 DWORD PTR _raw$[ebp], ecx

; 117  : 
; 118  : 	raw->effect_lifetime += get_delta_time ();

  00012	8b 45 fc	 mov	 eax, DWORD PTR _raw$[ebp]
  00015	f3 0f 10 40 30	 movss	 xmm0, DWORD PTR [eax+48]
  0001a	f3 0f 58 05 00
	00 00 00	 addss	 xmm0, DWORD PTR ?system_delta_time@@3MA
  00022	8b 4d fc	 mov	 ecx, DWORD PTR _raw$[ebp]
  00025	f3 0f 11 41 30	 movss	 DWORD PTR [ecx+48], xmm0

; 119  : }

  0002a	5f		 pop	 edi
  0002b	5e		 pop	 esi
  0002c	5b		 pop	 ebx
  0002d	8b e5		 mov	 esp, ebp
  0002f	5d		 pop	 ebp
  00030	c2 04 00	 ret	 4
?update_client@@YGXPAUENTITY@@@Z ENDP			; update_client
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\entity\special\effect\sprite\sp_updt.c
;	COMDAT ?update_server@@YGXPAUENTITY@@@Z
_TEXT	SEGMENT
tv77 = -72						; size = 4
_raw$ = -4						; size = 4
_en$ = 8						; size = 4
?update_server@@YGXPAUENTITY@@@Z PROC			; update_server, COMDAT

; 80   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 48	 sub	 esp, 72			; 00000048H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 81   : 	sprite
; 82   : 		*raw;
; 83   : 
; 84   : 	#if DEBUG_MODULE
; 85   : 
; 86   : 	debug_log ("SPRITE: update");
; 87   : 
; 88   : 	#endif
; 89   : 
; 90   : 	raw = (sprite *) get_local_entity_data (en);

  00009	8b 45 08	 mov	 eax, DWORD PTR _en$[ebp]
  0000c	8b 48 04	 mov	 ecx, DWORD PTR [eax+4]
  0000f	89 4d fc	 mov	 DWORD PTR _raw$[ebp], ecx

; 91   : 
; 92   : 	raw->effect_lifetime += get_delta_time ();

  00012	8b 45 fc	 mov	 eax, DWORD PTR _raw$[ebp]
  00015	f3 0f 10 40 30	 movss	 xmm0, DWORD PTR [eax+48]
  0001a	f3 0f 58 05 00
	00 00 00	 addss	 xmm0, DWORD PTR ?system_delta_time@@3MA
  00022	8b 4d fc	 mov	 ecx, DWORD PTR _raw$[ebp]
  00025	f3 0f 11 41 30	 movss	 DWORD PTR [ecx+48], xmm0

; 93   : 
; 94   : 	if ( raw->effect_lifetime >= raw->sprite_lifetime )

  0002a	8b 45 fc	 mov	 eax, DWORD PTR _raw$[ebp]
  0002d	8b 4d fc	 mov	 ecx, DWORD PTR _raw$[ebp]
  00030	f3 0f 10 40 30	 movss	 xmm0, DWORD PTR [eax+48]
  00035	0f 2f 41 34	 comiss	 xmm0, DWORD PTR [ecx+52]
  00039	72 4a		 jb	 SHORT $LN2@update_ser

; 95   : 	{
; 96   : 		destroy_client_server_entity_family( en );

  0003b	83 7d 08 00	 cmp	 DWORD PTR _en$[ebp], 0
  0003f	74 0a		 je	 SHORT $LN4@update_ser
  00041	8b 45 08	 mov	 eax, DWORD PTR _en$[ebp]
  00044	8b 08		 mov	 ecx, DWORD PTR [eax]
  00046	89 4d b8	 mov	 DWORD PTR tv77[ebp], ecx
  00049	eb 21		 jmp	 SHORT $LN5@update_ser
$LN4@update_ser:
  0004b	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??update_server@@YGXPAUENTITY@@@Z@4JA
  00051	83 c2 10	 add	 edx, 16			; 00000010H
  00054	52		 push	 edx
  00055	68 00 00 00 00	 push	 OFFSET ??_C@_0FD@FBBGKNGP@c?3?2users?2nhv90?2projects?2eech?2ap@
  0005a	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  0005f	50		 push	 eax
  00060	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00065	c7 45 b8 00 00
	00 00		 mov	 DWORD PTR tv77[ebp], 0
$LN5@update_ser:
  0006c	8b 4d 08	 mov	 ecx, DWORD PTR _en$[ebp]
  0006f	51		 push	 ecx
  00070	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?system_comms_model@@3W4COMMS_MODEL_TYPES@@A ; system_comms_model
  00076	c1 e2 02	 shl	 edx, 2
  00079	8b 45 b8	 mov	 eax, DWORD PTR tv77[ebp]
  0007c	8b 8c c2 00 00
	00 00		 mov	 ecx, DWORD PTR ?fn_destroy_client_server_entity_family@@3PAY01P6GXPAUENTITY@@@ZA[edx+eax*8]
  00083	ff d1		 call	 ecx
$LN2@update_ser:

; 97   : 	}
; 98   : }

  00085	5f		 pop	 edi
  00086	5e		 pop	 esi
  00087	5b		 pop	 ebx
  00088	8b e5		 mov	 esp, ebp
  0008a	5d		 pop	 ebp
  0008b	c2 04 00	 ret	 4
?update_server@@YGXPAUENTITY@@@Z ENDP			; update_server
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\entity\special\effect\sprite\sp_updt.c
;	COMDAT ?overload_sprite_update_functions@@YGXXZ
_TEXT	SEGMENT
?overload_sprite_update_functions@@YGXXZ PROC		; overload_sprite_update_functions, COMDAT

; 126  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 127  : 	fn_update_client_server_entity[ENTITY_TYPE_SPRITE][COMMS_MODEL_SERVER]  	= update_server;

  00009	b8 08 00 00 00	 mov	 eax, 8
  0000e	6b c8 21	 imul	 ecx, eax, 33
  00011	ba 04 00 00 00	 mov	 edx, 4
  00016	6b c2 00	 imul	 eax, edx, 0
  00019	c7 84 01 00 00
	00 00 00 00 00
	00		 mov	 DWORD PTR ?fn_update_client_server_entity@@3PAY01P6GXPAUENTITY@@@ZA[ecx+eax], OFFSET ?update_server@@YGXPAUENTITY@@@Z ; update_server

; 128  : 
; 129  : 	fn_update_client_server_entity[ENTITY_TYPE_SPRITE][COMMS_MODEL_CLIENT]  	= update_client;

  00024	b8 08 00 00 00	 mov	 eax, 8
  00029	6b c8 21	 imul	 ecx, eax, 33
  0002c	ba 04 00 00 00	 mov	 edx, 4
  00031	c1 e2 00	 shl	 edx, 0
  00034	c7 84 11 00 00
	00 00 00 00 00
	00		 mov	 DWORD PTR ?fn_update_client_server_entity@@3PAY01P6GXPAUENTITY@@@ZA[ecx+edx], OFFSET ?update_client@@YGXPAUENTITY@@@Z ; update_client

; 130  : }

  0003f	5f		 pop	 edi
  00040	5e		 pop	 esi
  00041	5b		 pop	 ebx
  00042	8b e5		 mov	 esp, ebp
  00044	5d		 pop	 ebp
  00045	c3		 ret	 0
?overload_sprite_update_functions@@YGXXZ ENDP		; overload_sprite_update_functions
_TEXT	ENDS
END
