; Listing generated by Microsoft (R) Optimizing Compiler Version 19.16.27045.0 

	TITLE	C:\Users\nhv90\Projects\eech\aphavoc\source\entity\special\effect\explosn\xp_draw.c
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB MSVCRTD
INCLUDELIB OLDNAMES

PUBLIC	?overload_explosion_draw_functions@@YGXXZ	; overload_explosion_draw_functions
PUBLIC	?__LINE__Var@?0??draw_local_3d_object@@YGXPAUENTITY@@M@Z@4JA ; `draw_local_3d_object'::`1'::__LINE__Var
PUBLIC	??_C@_0FE@DHAKKHON@c?3?2users?2nhv90?2projects?2eech?2ap@ ; `string'
PUBLIC	??_C@_0BM@CMBMICCB@raw?9?$DOexplosion_state?5?$DM?$DN?51?40@ ; `string'
PUBLIC	__real@3ff0000000000000
EXTRN	_memcpy:PROC
EXTRN	?process_assert@@YGXPBD0H@Z:PROC		; process_assert
EXTRN	?insert_zbiased_object_into_3d_scene@@YGXW4OBJECT_3D_DRAWING_TYPES@@PAXM@Z:PROC ; insert_zbiased_object_into_3d_scene
EXTRN	?fn_draw_local_entity_3d_object@@3PAP6GXPAUENTITY@@M@ZA:BYTE ; fn_draw_local_entity_3d_object
EXTRN	__fltused:DWORD
;	COMDAT __real@3ff0000000000000
CONST	SEGMENT
__real@3ff0000000000000 DQ 03ff0000000000000r	; 1
CONST	ENDS
;	COMDAT ??_C@_0BM@CMBMICCB@raw?9?$DOexplosion_state?5?$DM?$DN?51?40@
CONST	SEGMENT
??_C@_0BM@CMBMICCB@raw?9?$DOexplosion_state?5?$DM?$DN?51?40@ DB 'raw->exp'
	DB	'losion_state <= 1.0', 00H			; `string'
CONST	ENDS
;	COMDAT ??_C@_0FE@DHAKKHON@c?3?2users?2nhv90?2projects?2eech?2ap@
CONST	SEGMENT
??_C@_0FE@DHAKKHON@c?3?2users?2nhv90?2projects?2eech?2ap@ DB 'c:\users\nh'
	DB	'v90\projects\eech\aphavoc\source\entity\special\effect\explos'
	DB	'n\xp_draw.c', 00H				; `string'
CONST	ENDS
;	COMDAT ?__LINE__Var@?0??draw_local_3d_object@@YGXPAUENTITY@@M@Z@4JA
_DATA	SEGMENT
?__LINE__Var@?0??draw_local_3d_object@@YGXPAUENTITY@@M@Z@4JA DD 050H ; `draw_local_3d_object'::`1'::__LINE__Var
_DATA	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\entity\special\effect\explosn\xp_draw.c
;	COMDAT ?draw_local_3d_object@@YGXPAUENTITY@@M@Z
_TEXT	SEGMENT
_explosion$ = -40					; size = 36
_raw$ = -4						; size = 4
_en$ = 8						; size = 4
_range$ = 12						; size = 4
?draw_local_3d_object@@YGXPAUENTITY@@M@Z PROC		; draw_local_3d_object, COMDAT

; 80   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 68	 sub	 esp, 104		; 00000068H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 81   : 	explosion
; 82   : 		*raw;
; 83   : 
; 84   : 	object_3d_explosion
; 85   : 		explosion;
; 86   : 
; 87   : 	raw = (struct EXPLOSION *) get_local_entity_data (en);

  00009	8b 45 08	 mov	 eax, DWORD PTR _en$[ebp]
  0000c	8b 48 04	 mov	 ecx, DWORD PTR [eax+4]
  0000f	89 4d fc	 mov	 DWORD PTR _raw$[ebp], ecx

; 88   : 
; 89   : 	if (raw->explosion_state < 0.0)

  00012	8b 45 fc	 mov	 eax, DWORD PTR _raw$[ebp]
  00015	f3 0f 5a 40 30	 cvtss2sd xmm0, DWORD PTR [eax+48]
  0001a	0f 57 c9	 xorps	 xmm1, xmm1
  0001d	66 0f 2f c8	 comisd	 xmm1, xmm0
  00021	76 02		 jbe	 SHORT $LN2@draw_local

; 90   : 	{
; 91   : 		return;

  00023	eb 7a		 jmp	 SHORT $LN1@draw_local
$LN2@draw_local:

; 92   : 	}
; 93   : 
; 94   : 	ASSERT (raw->explosion_state <= 1.0);

  00025	8b 45 fc	 mov	 eax, DWORD PTR _raw$[ebp]
  00028	f3 0f 5a 40 30	 cvtss2sd xmm0, DWORD PTR [eax+48]
  0002d	f2 0f 10 0d 00
	00 00 00	 movsd	 xmm1, QWORD PTR __real@3ff0000000000000
  00035	66 0f 2f c8	 comisd	 xmm1, xmm0
  00039	73 18		 jae	 SHORT $LN3@draw_local
  0003b	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??draw_local_3d_object@@YGXPAUENTITY@@M@Z@4JA
  00040	83 c0 0e	 add	 eax, 14			; 0000000eH
  00043	50		 push	 eax
  00044	68 00 00 00 00	 push	 OFFSET ??_C@_0FE@DHAKKHON@c?3?2users?2nhv90?2projects?2eech?2ap@
  00049	68 00 00 00 00	 push	 OFFSET ??_C@_0BM@CMBMICCB@raw?9?$DOexplosion_state?5?$DM?$DN?51?40@
  0004e	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN3@draw_local:

; 95   : 
; 96   : 	explosion.object_index = raw->object_3d_shape;

  00053	8b 45 fc	 mov	 eax, DWORD PTR _raw$[ebp]
  00056	8b 48 28	 mov	 ecx, DWORD PTR [eax+40]
  00059	89 4d f8	 mov	 DWORD PTR _explosion$[ebp+32], ecx

; 97   : 
; 98   : 	memcpy (&explosion.position, &raw->eff.position, sizeof (vec3d));

  0005c	6a 0c		 push	 12			; 0000000cH
  0005e	8b 45 fc	 mov	 eax, DWORD PTR _raw$[ebp]
  00061	83 c0 04	 add	 eax, 4
  00064	50		 push	 eax
  00065	8d 4d d8	 lea	 ecx, DWORD PTR _explosion$[ebp]
  00068	51		 push	 ecx
  00069	e8 00 00 00 00	 call	 _memcpy
  0006e	83 c4 0c	 add	 esp, 12			; 0000000cH

; 99   : 
; 100  : 	explosion.scale = raw->scale;

  00071	8b 45 fc	 mov	 eax, DWORD PTR _raw$[ebp]
  00074	f3 0f 10 40 34	 movss	 xmm0, DWORD PTR [eax+52]
  00079	f3 0f 11 45 f0	 movss	 DWORD PTR _explosion$[ebp+24], xmm0

; 101  : 
; 102  : 	explosion.animation = raw->explosion_state;

  0007e	8b 45 fc	 mov	 eax, DWORD PTR _raw$[ebp]
  00081	f3 0f 10 40 30	 movss	 xmm0, DWORD PTR [eax+48]
  00086	f3 0f 11 45 f4	 movss	 DWORD PTR _explosion$[ebp+28], xmm0

; 103  : 
; 104  : 	insert_object_into_3d_scene ( OBJECT_3D_DRAW_TYPE_EXPLOSION, &explosion );

  0008b	51		 push	 ecx
  0008c	0f 57 c0	 xorps	 xmm0, xmm0
  0008f	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00094	8d 45 d8	 lea	 eax, DWORD PTR _explosion$[ebp]
  00097	50		 push	 eax
  00098	6a 13		 push	 19			; 00000013H
  0009a	e8 00 00 00 00	 call	 ?insert_zbiased_object_into_3d_scene@@YGXW4OBJECT_3D_DRAWING_TYPES@@PAXM@Z ; insert_zbiased_object_into_3d_scene
$LN1@draw_local:

; 105  : }

  0009f	5f		 pop	 edi
  000a0	5e		 pop	 esi
  000a1	5b		 pop	 ebx
  000a2	8b e5		 mov	 esp, ebp
  000a4	5d		 pop	 ebp
  000a5	c2 08 00	 ret	 8
?draw_local_3d_object@@YGXPAUENTITY@@M@Z ENDP		; draw_local_3d_object
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\entity\special\effect\explosn\xp_draw.c
;	COMDAT ?overload_explosion_draw_functions@@YGXXZ
_TEXT	SEGMENT
?overload_explosion_draw_functions@@YGXXZ PROC		; overload_explosion_draw_functions, COMDAT

; 112  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 113  : 	fn_draw_local_entity_3d_object[ENTITY_TYPE_EXPLOSION]	= draw_local_3d_object;

  00009	b8 04 00 00 00	 mov	 eax, 4
  0000e	6b c8 09	 imul	 ecx, eax, 9
  00011	c7 81 00 00 00
	00 00 00 00 00	 mov	 DWORD PTR ?fn_draw_local_entity_3d_object@@3PAP6GXPAUENTITY@@M@ZA[ecx], OFFSET ?draw_local_3d_object@@YGXPAUENTITY@@M@Z ; draw_local_3d_object

; 114  : }

  0001b	5f		 pop	 edi
  0001c	5e		 pop	 esi
  0001d	5b		 pop	 ebx
  0001e	8b e5		 mov	 esp, ebp
  00020	5d		 pop	 ebp
  00021	c3		 ret	 0
?overload_explosion_draw_functions@@YGXXZ ENDP		; overload_explosion_draw_functions
_TEXT	ENDS
END
