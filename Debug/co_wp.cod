; Listing generated by Microsoft (R) Optimizing Compiler Version 19.16.27045.0 

	TITLE	C:\Users\nhv90\Projects\eech\aphavoc\source\gunships\avionics\common\co_wp.c
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB MSVCRTD
INCLUDELIB OLDNAMES

PUBLIC	?set_next_waypoint@@YGXXZ			; set_next_waypoint
PUBLIC	?set_prev_waypoint@@YGXXZ			; set_prev_waypoint
PUBLIC	?__LINE__Var@?0??set_next_waypoint@@YGXXZ@4JA	; `set_next_waypoint'::`1'::__LINE__Var
PUBLIC	??_C@_0EN@MCBLABMC@c?3?2users?2nhv90?2projects?2eech?2ap@ ; `string'
PUBLIC	?__LINE__Var@?0??set_prev_waypoint@@YGXXZ@4JA	; `set_prev_waypoint'::`1'::__LINE__Var
EXTRN	?process_assert@@YGXPBD0H@Z:PROC		; process_assert
EXTRN	?set_guide_next_waypoint@@YGHPAUENTITY@@@Z:PROC	; set_guide_next_waypoint
EXTRN	?set_guide_prev_waypoint@@YGHPAUENTITY@@@Z:PROC	; set_guide_prev_waypoint
EXTRN	?null_entity_pointer_message@@3PBDB:DWORD	; null_entity_pointer_message
EXTRN	?overload_invalid_list_type_message@@3PBDB:DWORD ; overload_invalid_list_type_message
EXTRN	?fn_get_local_entity_parent@@3PAY0CN@P6GPAUENTITY@@PAU1@W4LIST_TYPES@@@ZA:BYTE ; fn_get_local_entity_parent
EXTRN	?overload_invalid_int_type_message@@3PBDB:DWORD	; overload_invalid_int_type_message
EXTRN	?fn_get_local_entity_int_value@@3PAY0BBH@P6GHPAUENTITY@@W4INT_TYPES@@@ZA:BYTE ; fn_get_local_entity_int_value
EXTRN	?gunship_entity@@3PAUENTITY@@A:DWORD		; gunship_entity
;	COMDAT ?__LINE__Var@?0??set_prev_waypoint@@YGXXZ@4JA
_DATA	SEGMENT
?__LINE__Var@?0??set_prev_waypoint@@YGXXZ@4JA DD 071H	; `set_prev_waypoint'::`1'::__LINE__Var
_DATA	ENDS
;	COMDAT ??_C@_0EN@MCBLABMC@c?3?2users?2nhv90?2projects?2eech?2ap@
CONST	SEGMENT
??_C@_0EN@MCBLABMC@c?3?2users?2nhv90?2projects?2eech?2ap@ DB 'c:\users\nh'
	DB	'v90\projects\eech\aphavoc\source\gunships\avionics\common\co_'
	DB	'wp.c', 00H					; `string'
CONST	ENDS
;	COMDAT ?__LINE__Var@?0??set_next_waypoint@@YGXXZ@4JA
_DATA	SEGMENT
?__LINE__Var@?0??set_next_waypoint@@YGXXZ@4JA DD 050H	; `set_next_waypoint'::`1'::__LINE__Var
_DATA	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\gunships\avionics\common\co_wp.c
;	COMDAT ?set_prev_waypoint@@YGXXZ
_TEXT	SEGMENT
tv130 = -76						; size = 4
tv77 = -76						; size = 4
tv90 = -72						; size = 4
tv70 = -72						; size = 4
_guide$ = -4						; size = 4
?set_prev_waypoint@@YGXXZ PROC				; set_prev_waypoint, COMDAT

; 113  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 4c	 sub	 esp, 76			; 0000004cH
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 114  : 	entity
; 115  : 		*guide;
; 116  : 
; 117  : 	//
; 118  : 	// Can only change your current waypoint if you have a gunship, and you are leader of your current task
; 119  : 	//
; 120  : 
; 121  : 	if (!get_gunship_entity ())

  00009	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?gunship_entity@@3PAUENTITY@@A, 0 ; gunship_entity
  00010	75 05		 jne	 SHORT $LN2@set_prev_w

; 122  : 	{
; 123  : 		return;

  00012	e9 1c 01 00 00	 jmp	 $LN1@set_prev_w
$LN2@set_prev_w:

; 124  : 	}
; 125  : 
; 126  : 	if (!get_local_entity_int_value (get_gunship_entity (), INT_TYPE_TASK_LEADER))

  00017	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?gunship_entity@@3PAUENTITY@@A, 0 ; gunship_entity
  0001e	74 0c		 je	 SHORT $LN6@set_prev_w
  00020	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gunship_entity@@3PAUENTITY@@A ; gunship_entity
  00025	8b 08		 mov	 ecx, DWORD PTR [eax]
  00027	89 4d b8	 mov	 DWORD PTR tv70[ebp], ecx
  0002a	eb 1a		 jmp	 SHORT $LN7@set_prev_w
$LN6@set_prev_w:
  0002c	6a 7e		 push	 126			; 0000007eH
  0002e	68 00 00 00 00	 push	 OFFSET ??_C@_0EN@MCBLABMC@c?3?2users?2nhv90?2projects?2eech?2ap@
  00033	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  00039	52		 push	 edx
  0003a	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  0003f	c7 45 b8 00 00
	00 00		 mov	 DWORD PTR tv70[ebp], 0
$LN7@set_prev_w:
  00046	b8 01 00 00 00	 mov	 eax, 1
  0004b	85 c0		 test	 eax, eax
  0004d	74 09		 je	 SHORT $LN8@set_prev_w
  0004f	c7 45 b4 dd 00
	00 00		 mov	 DWORD PTR tv77[ebp], 221 ; 000000ddH
  00056	eb 1a		 jmp	 SHORT $LN9@set_prev_w
$LN8@set_prev_w:
  00058	6a 7e		 push	 126			; 0000007eH
  0005a	68 00 00 00 00	 push	 OFFSET ??_C@_0EN@MCBLABMC@c?3?2users?2nhv90?2projects?2eech?2ap@
  0005f	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?overload_invalid_int_type_message@@3PBDB ; overload_invalid_int_type_message
  00065	51		 push	 ecx
  00066	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  0006b	c7 45 b4 00 00
	00 00		 mov	 DWORD PTR tv77[ebp], 0
$LN9@set_prev_w:
  00072	68 dd 00 00 00	 push	 221			; 000000ddH
  00077	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gunship_entity@@3PAUENTITY@@A ; gunship_entity
  0007d	52		 push	 edx
  0007e	69 45 b8 5c 04
	00 00		 imul	 eax, DWORD PTR tv70[ebp], 1116
  00085	8b 4d b4	 mov	 ecx, DWORD PTR tv77[ebp]
  00088	8b 94 88 00 00
	00 00		 mov	 edx, DWORD PTR ?fn_get_local_entity_int_value@@3PAY0BBH@P6GHPAUENTITY@@W4INT_TYPES@@@ZA[eax+ecx*4]
  0008f	ff d2		 call	 edx
  00091	85 c0		 test	 eax, eax
  00093	75 05		 jne	 SHORT $LN3@set_prev_w

; 127  : 	{
; 128  : 		return;

  00095	e9 99 00 00 00	 jmp	 $LN1@set_prev_w
$LN3@set_prev_w:

; 129  : 	}
; 130  : 
; 131  : 	guide = get_local_entity_parent (get_gunship_entity (), LIST_TYPE_FOLLOWER);

  0009a	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?gunship_entity@@3PAUENTITY@@A, 0 ; gunship_entity
  000a1	74 0c		 je	 SHORT $LN10@set_prev_w
  000a3	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gunship_entity@@3PAUENTITY@@A ; gunship_entity
  000a8	8b 08		 mov	 ecx, DWORD PTR [eax]
  000aa	89 4d b8	 mov	 DWORD PTR tv90[ebp], ecx
  000ad	eb 21		 jmp	 SHORT $LN11@set_prev_w
$LN10@set_prev_w:
  000af	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??set_prev_waypoint@@YGXXZ@4JA
  000b5	83 c2 12	 add	 edx, 18			; 00000012H
  000b8	52		 push	 edx
  000b9	68 00 00 00 00	 push	 OFFSET ??_C@_0EN@MCBLABMC@c?3?2users?2nhv90?2projects?2eech?2ap@
  000be	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  000c3	50		 push	 eax
  000c4	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  000c9	c7 45 b8 00 00
	00 00		 mov	 DWORD PTR tv90[ebp], 0
$LN11@set_prev_w:
  000d0	b9 01 00 00 00	 mov	 ecx, 1
  000d5	85 c9		 test	 ecx, ecx
  000d7	74 09		 je	 SHORT $LN12@set_prev_w
  000d9	c7 45 b4 0d 00
	00 00		 mov	 DWORD PTR tv130[ebp], 13 ; 0000000dH
  000e0	eb 21		 jmp	 SHORT $LN13@set_prev_w
$LN12@set_prev_w:
  000e2	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??set_prev_waypoint@@YGXXZ@4JA
  000e8	83 c2 12	 add	 edx, 18			; 00000012H
  000eb	52		 push	 edx
  000ec	68 00 00 00 00	 push	 OFFSET ??_C@_0EN@MCBLABMC@c?3?2users?2nhv90?2projects?2eech?2ap@
  000f1	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_list_type_message@@3PBDB ; overload_invalid_list_type_message
  000f6	50		 push	 eax
  000f7	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  000fc	c7 45 b4 00 00
	00 00		 mov	 DWORD PTR tv130[ebp], 0
$LN13@set_prev_w:
  00103	6a 0d		 push	 13			; 0000000dH
  00105	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gunship_entity@@3PAUENTITY@@A ; gunship_entity
  0010b	51		 push	 ecx
  0010c	69 55 b8 b4 00
	00 00		 imul	 edx, DWORD PTR tv90[ebp], 180
  00113	8b 45 b4	 mov	 eax, DWORD PTR tv130[ebp]
  00116	8b 8c 82 00 00
	00 00		 mov	 ecx, DWORD PTR ?fn_get_local_entity_parent@@3PAY0CN@P6GPAUENTITY@@PAU1@W4LIST_TYPES@@@ZA[edx+eax*4]
  0011d	ff d1		 call	 ecx
  0011f	89 45 fc	 mov	 DWORD PTR _guide$[ebp], eax

; 132  : 
; 133  : 	if (!guide)

  00122	83 7d fc 00	 cmp	 DWORD PTR _guide$[ebp], 0
  00126	75 02		 jne	 SHORT $LN4@set_prev_w

; 134  : 	{
; 135  : 		return;

  00128	eb 09		 jmp	 SHORT $LN1@set_prev_w
$LN4@set_prev_w:

; 136  : 	}
; 137  : 
; 138  : 	set_guide_prev_waypoint (guide);

  0012a	8b 45 fc	 mov	 eax, DWORD PTR _guide$[ebp]
  0012d	50		 push	 eax
  0012e	e8 00 00 00 00	 call	 ?set_guide_prev_waypoint@@YGHPAUENTITY@@@Z ; set_guide_prev_waypoint
$LN1@set_prev_w:

; 139  : }

  00133	5f		 pop	 edi
  00134	5e		 pop	 esi
  00135	5b		 pop	 ebx
  00136	8b e5		 mov	 esp, ebp
  00138	5d		 pop	 ebp
  00139	c3		 ret	 0
?set_prev_waypoint@@YGXXZ ENDP				; set_prev_waypoint
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\gunships\avionics\common\co_wp.c
;	COMDAT ?set_next_waypoint@@YGXXZ
_TEXT	SEGMENT
tv130 = -76						; size = 4
tv77 = -76						; size = 4
tv90 = -72						; size = 4
tv70 = -72						; size = 4
_guide$ = -4						; size = 4
?set_next_waypoint@@YGXXZ PROC				; set_next_waypoint, COMDAT

; 80   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 4c	 sub	 esp, 76			; 0000004cH
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 81   : 	entity
; 82   : 		*guide;
; 83   : 
; 84   : 	//
; 85   : 	// Can only change your current waypoint if you have a gunship, and you are leader of your current task
; 86   : 	//
; 87   : 
; 88   : 	if (!get_gunship_entity ())

  00009	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?gunship_entity@@3PAUENTITY@@A, 0 ; gunship_entity
  00010	75 05		 jne	 SHORT $LN2@set_next_w

; 89   : 	{
; 90   : 		return;

  00012	e9 1c 01 00 00	 jmp	 $LN1@set_next_w
$LN2@set_next_w:

; 91   : 	}
; 92   : 
; 93   : 	if (!get_local_entity_int_value (get_gunship_entity (), INT_TYPE_TASK_LEADER))

  00017	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?gunship_entity@@3PAUENTITY@@A, 0 ; gunship_entity
  0001e	74 0c		 je	 SHORT $LN6@set_next_w
  00020	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gunship_entity@@3PAUENTITY@@A ; gunship_entity
  00025	8b 08		 mov	 ecx, DWORD PTR [eax]
  00027	89 4d b8	 mov	 DWORD PTR tv70[ebp], ecx
  0002a	eb 1a		 jmp	 SHORT $LN7@set_next_w
$LN6@set_next_w:
  0002c	6a 5d		 push	 93			; 0000005dH
  0002e	68 00 00 00 00	 push	 OFFSET ??_C@_0EN@MCBLABMC@c?3?2users?2nhv90?2projects?2eech?2ap@
  00033	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  00039	52		 push	 edx
  0003a	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  0003f	c7 45 b8 00 00
	00 00		 mov	 DWORD PTR tv70[ebp], 0
$LN7@set_next_w:
  00046	b8 01 00 00 00	 mov	 eax, 1
  0004b	85 c0		 test	 eax, eax
  0004d	74 09		 je	 SHORT $LN8@set_next_w
  0004f	c7 45 b4 dd 00
	00 00		 mov	 DWORD PTR tv77[ebp], 221 ; 000000ddH
  00056	eb 1a		 jmp	 SHORT $LN9@set_next_w
$LN8@set_next_w:
  00058	6a 5d		 push	 93			; 0000005dH
  0005a	68 00 00 00 00	 push	 OFFSET ??_C@_0EN@MCBLABMC@c?3?2users?2nhv90?2projects?2eech?2ap@
  0005f	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?overload_invalid_int_type_message@@3PBDB ; overload_invalid_int_type_message
  00065	51		 push	 ecx
  00066	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  0006b	c7 45 b4 00 00
	00 00		 mov	 DWORD PTR tv77[ebp], 0
$LN9@set_next_w:
  00072	68 dd 00 00 00	 push	 221			; 000000ddH
  00077	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gunship_entity@@3PAUENTITY@@A ; gunship_entity
  0007d	52		 push	 edx
  0007e	69 45 b8 5c 04
	00 00		 imul	 eax, DWORD PTR tv70[ebp], 1116
  00085	8b 4d b4	 mov	 ecx, DWORD PTR tv77[ebp]
  00088	8b 94 88 00 00
	00 00		 mov	 edx, DWORD PTR ?fn_get_local_entity_int_value@@3PAY0BBH@P6GHPAUENTITY@@W4INT_TYPES@@@ZA[eax+ecx*4]
  0008f	ff d2		 call	 edx
  00091	85 c0		 test	 eax, eax
  00093	75 05		 jne	 SHORT $LN3@set_next_w

; 94   : 	{
; 95   : 		return;

  00095	e9 99 00 00 00	 jmp	 $LN1@set_next_w
$LN3@set_next_w:

; 96   : 	}
; 97   : 
; 98   : 	guide = get_local_entity_parent (get_gunship_entity (), LIST_TYPE_FOLLOWER);

  0009a	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?gunship_entity@@3PAUENTITY@@A, 0 ; gunship_entity
  000a1	74 0c		 je	 SHORT $LN10@set_next_w
  000a3	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gunship_entity@@3PAUENTITY@@A ; gunship_entity
  000a8	8b 08		 mov	 ecx, DWORD PTR [eax]
  000aa	89 4d b8	 mov	 DWORD PTR tv90[ebp], ecx
  000ad	eb 21		 jmp	 SHORT $LN11@set_next_w
$LN10@set_next_w:
  000af	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??set_next_waypoint@@YGXXZ@4JA
  000b5	83 c2 12	 add	 edx, 18			; 00000012H
  000b8	52		 push	 edx
  000b9	68 00 00 00 00	 push	 OFFSET ??_C@_0EN@MCBLABMC@c?3?2users?2nhv90?2projects?2eech?2ap@
  000be	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  000c3	50		 push	 eax
  000c4	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  000c9	c7 45 b8 00 00
	00 00		 mov	 DWORD PTR tv90[ebp], 0
$LN11@set_next_w:
  000d0	b9 01 00 00 00	 mov	 ecx, 1
  000d5	85 c9		 test	 ecx, ecx
  000d7	74 09		 je	 SHORT $LN12@set_next_w
  000d9	c7 45 b4 0d 00
	00 00		 mov	 DWORD PTR tv130[ebp], 13 ; 0000000dH
  000e0	eb 21		 jmp	 SHORT $LN13@set_next_w
$LN12@set_next_w:
  000e2	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??set_next_waypoint@@YGXXZ@4JA
  000e8	83 c2 12	 add	 edx, 18			; 00000012H
  000eb	52		 push	 edx
  000ec	68 00 00 00 00	 push	 OFFSET ??_C@_0EN@MCBLABMC@c?3?2users?2nhv90?2projects?2eech?2ap@
  000f1	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_list_type_message@@3PBDB ; overload_invalid_list_type_message
  000f6	50		 push	 eax
  000f7	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  000fc	c7 45 b4 00 00
	00 00		 mov	 DWORD PTR tv130[ebp], 0
$LN13@set_next_w:
  00103	6a 0d		 push	 13			; 0000000dH
  00105	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gunship_entity@@3PAUENTITY@@A ; gunship_entity
  0010b	51		 push	 ecx
  0010c	69 55 b8 b4 00
	00 00		 imul	 edx, DWORD PTR tv90[ebp], 180
  00113	8b 45 b4	 mov	 eax, DWORD PTR tv130[ebp]
  00116	8b 8c 82 00 00
	00 00		 mov	 ecx, DWORD PTR ?fn_get_local_entity_parent@@3PAY0CN@P6GPAUENTITY@@PAU1@W4LIST_TYPES@@@ZA[edx+eax*4]
  0011d	ff d1		 call	 ecx
  0011f	89 45 fc	 mov	 DWORD PTR _guide$[ebp], eax

; 99   : 
; 100  : 	if (!guide)

  00122	83 7d fc 00	 cmp	 DWORD PTR _guide$[ebp], 0
  00126	75 02		 jne	 SHORT $LN4@set_next_w

; 101  : 	{
; 102  : 		return;

  00128	eb 09		 jmp	 SHORT $LN1@set_next_w
$LN4@set_next_w:

; 103  : 	}
; 104  : 
; 105  : 	set_guide_next_waypoint (guide);

  0012a	8b 45 fc	 mov	 eax, DWORD PTR _guide$[ebp]
  0012d	50		 push	 eax
  0012e	e8 00 00 00 00	 call	 ?set_guide_next_waypoint@@YGHPAUENTITY@@@Z ; set_guide_next_waypoint
$LN1@set_next_w:

; 106  : }

  00133	5f		 pop	 edi
  00134	5e		 pop	 esi
  00135	5b		 pop	 ebx
  00136	8b e5		 mov	 esp, ebp
  00138	5d		 pop	 ebp
  00139	c3		 ret	 0
?set_next_waypoint@@YGXXZ ENDP				; set_next_waypoint
_TEXT	ENDS
END
