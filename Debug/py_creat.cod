; Listing generated by Microsoft (R) Optimizing Compiler Version 19.16.27045.0 

	TITLE	C:\Users\nhv90\Projects\eech\aphavoc\source\entity\fixed\pylon\py_creat.c
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB MSVCRTD
INCLUDELIB OLDNAMES

PUBLIC	___local_stdio_printf_options
PUBLIC	__vsnprintf_l
PUBLIC	__vsprintf_l
PUBLIC	_sprintf
PUBLIC	?create_local_pylon_entities@@YGXW4PACK_MODES@@@Z ; create_local_pylon_entities
PUBLIC	?overload_pylon_create_functions@@YGXXZ		; overload_pylon_create_functions
PUBLIC	?_OptionsStorage@?1??__local_stdio_printf_options@@9@4_KA ; `__local_stdio_printf_options'::`2'::_OptionsStorage
PUBLIC	?__LINE__Var@?0??load_local_pylon_entities@@YGHPBD@Z@4JA ; `load_local_pylon_entities'::`1'::__LINE__Var
PUBLIC	??_C@_0EK@EBJOPBNC@c?3?2users?2nhv90?2projects?2eech?2ap@ ; `string'
PUBLIC	??_C@_0CC@EEKIOPJL@get_valid_current_game_session?5@ ; `string'
PUBLIC	??_C@_04MEMAJGDJ@name@				; `string'
PUBLIC	??_C@_0BA@GCFGLPDM@?$CFs?2route?2?$CFs?4nde@	; `string'
PUBLIC	??_C@_02JDPG@rb@				; `string'
PUBLIC	??_C@_0P@ILCDDJCB@?$CFs?2route?2?$CFs?4wp@	; `string'
PUBLIC	?__LINE__Var@?0??create_local_pylon_entities@@YGXW4PACK_MODES@@@Z@4JA ; `create_local_pylon_entities'::`1'::__LINE__Var
PUBLIC	??_C@_0CJ@DMBLBJBK@get_comms_model?5?$CI?$CJ?5?$DN?$DN?5COMMS_MOD@ ; `string'
PUBLIC	??_C@_0BC@PODNONFH@ASSERT?5?$CFs?5?$CI?$CFs?3?$CFd?$CJ@ ; `string'
PUBLIC	??_C@_05BKHBCENJ@utils@				; `string'
PUBLIC	??_C@_08CKPGOPDH@utildata@			; `string'
PUBLIC	?__LINE__Var@?0??create_local@@YGPAUENTITY@@W4ENTITY_TYPES@@HPAD@Z@4JA ; `create_local'::`1'::__LINE__Var
PUBLIC	??_C@_0CL@OOPHFNJI@assert_local_create_entity_inde@ ; `string'
EXTRN	__imp__fclose:PROC
EXTRN	__imp__fread:PROC
EXTRN	__imp____stdio_common_vsprintf:PROC
EXTRN	_memset:PROC
EXTRN	?process_assert@@YGXPBD0H@Z:PROC		; process_assert
EXTRN	?debug_fatal@@YAXPBDZZ:PROC			; debug_fatal
EXTRN	?file_exist@@YGHPBD@Z:PROC			; file_exist
EXTRN	?safe_fopen@@YGPAU_iobuf@@PBD0@Z:PROC		; safe_fopen
EXTRN	?malloc_fast_memory@@YGPAXI@Z:PROC		; malloc_fast_memory
EXTRN	?malloc_heap_memory@@YGPAXI@Z:PROC		; malloc_heap_memory
EXTRN	?free_mem@@YGXPAX@Z:PROC			; free_mem
EXTRN	?set_local_entity_attributes@@YGXPAUENTITY@@PAD@Z:PROC ; set_local_entity_attributes
EXTRN	?insert_local_entity_into_parents_child_list@@YGXPAUENTITY@@W4LIST_TYPES@@00@Z:PROC ; insert_local_entity_into_parents_child_list
EXTRN	?create_local_entity@@YAPAUENTITY@@W4ENTITY_TYPES@@HZZ:PROC ; create_local_entity
EXTRN	?assert_local_create_entity_index@@YGHH@Z:PROC	; assert_local_create_entity_index
EXTRN	?get_free_entity@@YGPAUENTITY@@H@Z:PROC		; get_free_entity
EXTRN	?get_pylon_sub_type@@YG?AW4PYLON_TYPES@@H@Z:PROC ; get_pylon_sub_type
EXTRN	?calculate_pylon_heading@@YGXPAUENTITY@@00PAUVEC3D@@1@Z:PROC ; calculate_pylon_heading
EXTRN	?get_local_sector_entity@@YGPAUENTITY@@PAUVEC3D@@@Z:PROC ; get_local_sector_entity
EXTRN	?system_comms_model@@3W4COMMS_MODEL_TYPES@@A:DWORD ; system_comms_model
EXTRN	?world_map@@3UWORLD_MAP_DATA@@A:BYTE		; world_map
EXTRN	?fn_create_local_entity@@3PAP6GPAUENTITY@@W4ENTITY_TYPES@@HPAD@ZA:BYTE ; fn_create_local_entity
EXTRN	?pylon_attachment_database@@3PAUPYLON_ATTACHMENT_DATA@@A:BYTE ; pylon_attachment_database
EXTRN	?current_game_session@@3PAUSESSION_LIST_DATA_TYPE@@A:DWORD ; current_game_session
EXTRN	__fltused:DWORD
;	COMDAT ?_OptionsStorage@?1??__local_stdio_printf_options@@9@4_KA
_BSS	SEGMENT
?_OptionsStorage@?1??__local_stdio_printf_options@@9@4_KA DQ 01H DUP (?) ; `__local_stdio_printf_options'::`2'::_OptionsStorage
_BSS	ENDS
;	COMDAT ??_C@_0CL@OOPHFNJI@assert_local_create_entity_inde@
CONST	SEGMENT
??_C@_0CL@OOPHFNJI@assert_local_create_entity_inde@ DB 'assert_local_crea'
	DB	'te_entity_index ((index))', 00H		; `string'
CONST	ENDS
;	COMDAT ?__LINE__Var@?0??create_local@@YGPAUENTITY@@W4ENTITY_TYPES@@HPAD@Z@4JA
_DATA	SEGMENT
?__LINE__Var@?0??create_local@@YGPAUENTITY@@W4ENTITY_TYPES@@HPAD@Z@4JA DD 0108H ; `create_local'::`1'::__LINE__Var
_DATA	ENDS
;	COMDAT ??_C@_08CKPGOPDH@utildata@
CONST	SEGMENT
??_C@_08CKPGOPDH@utildata@ DB 'utildata', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_05BKHBCENJ@utils@
CONST	SEGMENT
??_C@_05BKHBCENJ@utils@ DB 'utils', 00H			; `string'
CONST	ENDS
;	COMDAT ??_C@_0BC@PODNONFH@ASSERT?5?$CFs?5?$CI?$CFs?3?$CFd?$CJ@
CONST	SEGMENT
??_C@_0BC@PODNONFH@ASSERT?5?$CFs?5?$CI?$CFs?3?$CFd?$CJ@ DB 'ASSERT %s (%s'
	DB	':%d)', 00H					; `string'
CONST	ENDS
;	COMDAT ??_C@_0CJ@DMBLBJBK@get_comms_model?5?$CI?$CJ?5?$DN?$DN?5COMMS_MOD@
CONST	SEGMENT
??_C@_0CJ@DMBLBJBK@get_comms_model?5?$CI?$CJ?5?$DN?$DN?5COMMS_MOD@ DB 'ge'
	DB	't_comms_model () == COMMS_MODEL_SERVER', 00H ; `string'
CONST	ENDS
;	COMDAT ?__LINE__Var@?0??create_local_pylon_entities@@YGXW4PACK_MODES@@@Z@4JA
_DATA	SEGMENT
?__LINE__Var@?0??create_local_pylon_entities@@YGXW4PACK_MODES@@@Z@4JA DD 0f5H ; `create_local_pylon_entities'::`1'::__LINE__Var
_DATA	ENDS
;	COMDAT ??_C@_0P@ILCDDJCB@?$CFs?2route?2?$CFs?4wp@
CONST	SEGMENT
??_C@_0P@ILCDDJCB@?$CFs?2route?2?$CFs?4wp@ DB '%s\route\%s.wp', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_02JDPG@rb@
CONST	SEGMENT
??_C@_02JDPG@rb@ DB 'rb', 00H				; `string'
CONST	ENDS
;	COMDAT ??_C@_0BA@GCFGLPDM@?$CFs?2route?2?$CFs?4nde@
CONST	SEGMENT
??_C@_0BA@GCFGLPDM@?$CFs?2route?2?$CFs?4nde@ DB '%s\route\%s.nde', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_04MEMAJGDJ@name@
CONST	SEGMENT
??_C@_04MEMAJGDJ@name@ DB 'name', 00H			; `string'
CONST	ENDS
;	COMDAT ??_C@_0CC@EEKIOPJL@get_valid_current_game_session?5@
CONST	SEGMENT
??_C@_0CC@EEKIOPJL@get_valid_current_game_session?5@ DB 'get_valid_curren'
	DB	't_game_session ()', 00H			; `string'
CONST	ENDS
;	COMDAT ??_C@_0EK@EBJOPBNC@c?3?2users?2nhv90?2projects?2eech?2ap@
CONST	SEGMENT
??_C@_0EK@EBJOPBNC@c?3?2users?2nhv90?2projects?2eech?2ap@ DB 'c:\users\nh'
	DB	'v90\projects\eech\aphavoc\source\entity\fixed\pylon\py_creat.'
	DB	'c', 00H					; `string'
CONST	ENDS
;	COMDAT ?__LINE__Var@?0??load_local_pylon_entities@@YGHPBD@Z@4JA
_DATA	SEGMENT
?__LINE__Var@?0??load_local_pylon_entities@@YGHPBD@Z@4JA DD 050H ; `load_local_pylon_entities'::`1'::__LINE__Var
_DATA	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\entity\fixed\pylon\py_creat.c
;	COMDAT ?create_local@@YGPAUENTITY@@W4ENTITY_TYPES@@HPAD@Z
_TEXT	SEGMENT
_raw$ = -8						; size = 4
_en$ = -4						; size = 4
_type$ = 8						; size = 4
_index$ = 12						; size = 4
_pargs$ = 16						; size = 4
?create_local@@YGPAUENTITY@@W4ENTITY_TYPES@@HPAD@Z PROC	; create_local, COMDAT

; 264  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 48	 sub	 esp, 72			; 00000048H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 265  : 	entity
; 266  : 		*en;
; 267  : 
; 268  : 	pylon
; 269  : 		*raw;
; 270  : 
; 271  : 	////////////////////////////////////////
; 272  :  	//
; 273  :  	// VALIDATE
; 274  :  	//
; 275  : 	////////////////////////////////////////
; 276  : 
; 277  : 	validate_local_create_entity_index (index);

  00009	8b 45 0c	 mov	 eax, DWORD PTR _index$[ebp]
  0000c	50		 push	 eax
  0000d	e8 00 00 00 00	 call	 ?assert_local_create_entity_index@@YGHH@Z ; assert_local_create_entity_index
  00012	85 c0		 test	 eax, eax
  00014	75 18		 jne	 SHORT $LN2@create_loc
  00016	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??create_local@@YGPAUENTITY@@W4ENTITY_TYPES@@HPAD@Z@4JA
  0001b	83 c0 0d	 add	 eax, 13			; 0000000dH
  0001e	50		 push	 eax
  0001f	68 00 00 00 00	 push	 OFFSET ??_C@_0EK@EBJOPBNC@c?3?2users?2nhv90?2projects?2eech?2ap@
  00024	68 00 00 00 00	 push	 OFFSET ??_C@_0CL@OOPHFNJI@assert_local_create_entity_inde@
  00029	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN2@create_loc:

; 278  : 
; 279  : 	#if DEBUG_MODULE
; 280  : 
; 281  : 	debug_log_entity_args (ENTITY_DEBUG_LOCAL, ENTITY_DEBUG_CREATE, NULL, type, index);
; 282  : 
; 283  : 	#endif
; 284  : 
; 285  : 	en = get_free_entity (index);

  0002e	8b 45 0c	 mov	 eax, DWORD PTR _index$[ebp]
  00031	50		 push	 eax
  00032	e8 00 00 00 00	 call	 ?get_free_entity@@YGPAUENTITY@@H@Z ; get_free_entity
  00037	89 45 fc	 mov	 DWORD PTR _en$[ebp], eax

; 286  : 
; 287  : 	if (en)

  0003a	83 7d fc 00	 cmp	 DWORD PTR _en$[ebp], 0
  0003e	0f 84 06 01 00
	00		 je	 $LN3@create_loc

; 288  : 	{
; 289  : 		////////////////////////////////////////
; 290  : 		//
; 291  : 		// MALLOC ENTITY DATA
; 292  : 		//
; 293  : 		////////////////////////////////////////
; 294  : 
; 295  : 		set_local_entity_type (en, type);

  00044	8b 45 fc	 mov	 eax, DWORD PTR _en$[ebp]
  00047	8b 4d 08	 mov	 ecx, DWORD PTR _type$[ebp]
  0004a	89 08		 mov	 DWORD PTR [eax], ecx

; 296  : 
; 297  : 		raw = (pylon *) malloc_fast_mem (sizeof (pylon));

  0004c	6a 48		 push	 72			; 00000048H
  0004e	e8 00 00 00 00	 call	 ?malloc_fast_memory@@YGPAXI@Z ; malloc_fast_memory
  00053	89 45 f8	 mov	 DWORD PTR _raw$[ebp], eax

; 298  : 
; 299  : 		set_local_entity_data (en, raw);

  00056	8b 45 fc	 mov	 eax, DWORD PTR _en$[ebp]
  00059	8b 4d f8	 mov	 ecx, DWORD PTR _raw$[ebp]
  0005c	89 48 04	 mov	 DWORD PTR [eax+4], ecx

; 300  : 
; 301  : 		////////////////////////////////////////
; 302  : 		//
; 303  : 		// INITIALISE ALL ENTITY DATA TO 'WORKING' DEFAULT VALUES
; 304  : 		//
; 305  : 		// DO NOT USE ACCESS FUNCTIONS
; 306  : 		//
; 307  : 		// DO NOT USE RANDOM VALUES
; 308  : 		//
; 309  : 		////////////////////////////////////////
; 310  : 
; 311  : 		memset (raw, 0, sizeof (pylon));

  0005f	6a 48		 push	 72			; 00000048H
  00061	6a 00		 push	 0
  00063	8b 45 f8	 mov	 eax, DWORD PTR _raw$[ebp]
  00066	50		 push	 eax
  00067	e8 00 00 00 00	 call	 _memset
  0006c	83 c4 0c	 add	 esp, 12			; 0000000cH

; 312  : 
; 313  : 		//
; 314  : 		// fixed
; 315  : 		//
; 316  : 
; 317  : 		raw->fix.position.x = MID_MAP_X;

  0006f	8b 45 f8	 mov	 eax, DWORD PTR _raw$[ebp]
  00072	f3 0f 10 05 30
	00 00 00	 movss	 xmm0, DWORD PTR ?world_map@@3UWORLD_MAP_DATA@@A+48
  0007a	f3 0f 11 00	 movss	 DWORD PTR [eax], xmm0

; 318  : 		raw->fix.position.y = MID_MAP_Y;

  0007e	8b 45 f8	 mov	 eax, DWORD PTR _raw$[ebp]
  00081	f3 0f 10 05 34
	00 00 00	 movss	 xmm0, DWORD PTR ?world_map@@3UWORLD_MAP_DATA@@A+52
  00089	f3 0f 11 40 04	 movss	 DWORD PTR [eax+4], xmm0

; 319  : 		raw->fix.position.z = MID_MAP_Z;

  0008e	8b 45 f8	 mov	 eax, DWORD PTR _raw$[ebp]
  00091	f3 0f 10 05 38
	00 00 00	 movss	 xmm0, DWORD PTR ?world_map@@3UWORLD_MAP_DATA@@A+56
  00099	f3 0f 11 40 08	 movss	 DWORD PTR [eax+8], xmm0

; 320  : 
; 321  : 		raw->fix.object_3d_shape = OBJECT_3D_INVALID_OBJECT_INDEX;

  0009e	8b 45 f8	 mov	 eax, DWORD PTR _raw$[ebp]
  000a1	8b 48 38	 mov	 ecx, DWORD PTR [eax+56]
  000a4	81 e1 ff 00 f0
	ff		 and	 ecx, -1048321		; fff000ffH
  000aa	8b 55 f8	 mov	 edx, DWORD PTR _raw$[ebp]
  000ad	89 4a 38	 mov	 DWORD PTR [edx+56], ecx

; 322  : 
; 323  : 		raw->fix.alive = TRUE;

  000b0	8b 45 f8	 mov	 eax, DWORD PTR _raw$[ebp]
  000b3	8b 48 38	 mov	 ecx, DWORD PTR [eax+56]
  000b6	81 c9 00 00 10
	00		 or	 ecx, 1048576		; 00100000H
  000bc	8b 55 f8	 mov	 edx, DWORD PTR _raw$[ebp]
  000bf	89 4a 38	 mov	 DWORD PTR [edx+56], ecx

; 324  : 
; 325  : 		raw->fix.side = ENTITY_SIDE_NEUTRAL;

  000c2	8b 45 f8	 mov	 eax, DWORD PTR _raw$[ebp]
  000c5	8b 48 38	 mov	 ecx, DWORD PTR [eax+56]
  000c8	81 e1 ff ff 9f
	ff		 and	 ecx, -6291457		; ff9fffffH
  000ce	8b 55 f8	 mov	 edx, DWORD PTR _raw$[ebp]
  000d1	89 4a 38	 mov	 DWORD PTR [edx+56], ecx

; 326  : 
; 327  : 		//
; 328  : 		// pylon
; 329  : 		//
; 330  : 
; 331  : 		raw->damage_level = PYLON_DAMAGE_LEVEL;

  000d4	8b 45 f8	 mov	 eax, DWORD PTR _raw$[ebp]
  000d7	c7 40 40 e8 03
	00 00		 mov	 DWORD PTR [eax+64], 1000 ; 000003e8H

; 332  : 
; 333  : 		////////////////////////////////////////
; 334  : 		//
; 335  : 		// OVERWRITE DEFAULT VALUES WITH GIVEN ATTRIBUTES
; 336  : 		//
; 337  : 		////////////////////////////////////////
; 338  : 
; 339  : 		set_local_entity_attributes (en, pargs);

  000de	8b 45 10	 mov	 eax, DWORD PTR _pargs$[ebp]
  000e1	50		 push	 eax
  000e2	8b 4d fc	 mov	 ecx, DWORD PTR _en$[ebp]
  000e5	51		 push	 ecx
  000e6	e8 00 00 00 00	 call	 ?set_local_entity_attributes@@YGXPAUENTITY@@PAD@Z ; set_local_entity_attributes

; 340  : 
; 341  : 		////////////////////////////////////////
; 342  : 		//
; 343  : 		// CHECK MANDATORY ATTRIBUTES HAVE BEEN GIVEN
; 344  : 		//
; 345  : 		////////////////////////////////////////
; 346  : 
; 347  : 		////////////////////////////////////////
; 348  : 		//
; 349  : 		// RESOLVE DEFAULT VALUES
; 350  : 		//
; 351  : 		////////////////////////////////////////
; 352  : 
; 353  : 		if (raw->fix.object_3d_shape == OBJECT_3D_INVALID_OBJECT_INDEX)

  000eb	8b 45 f8	 mov	 eax, DWORD PTR _raw$[ebp]
  000ee	8b 48 38	 mov	 ecx, DWORD PTR [eax+56]
  000f1	c1 e9 08	 shr	 ecx, 8
  000f4	81 e1 ff 0f 00
	00		 and	 ecx, 4095		; 00000fffH
  000fa	75 37		 jne	 SHORT $LN4@create_loc

; 354  : 		{
; 355  : 			raw->fix.object_3d_shape = pylon_default_object_3d_shape (get_pylon_sub_type (raw->fix.sub_type));

  000fc	8b 45 f8	 mov	 eax, DWORD PTR _raw$[ebp]
  000ff	8b 48 38	 mov	 ecx, DWORD PTR [eax+56]
  00102	81 e1 ff 00 00
	00		 and	 ecx, 255		; 000000ffH
  00108	51		 push	 ecx
  00109	e8 00 00 00 00	 call	 ?get_pylon_sub_type@@YG?AW4PYLON_TYPES@@H@Z ; get_pylon_sub_type
  0010e	6b d0 54	 imul	 edx, eax, 84
  00111	8b 82 00 00 00
	00		 mov	 eax, DWORD PTR ?pylon_attachment_database@@3PAUPYLON_ATTACHMENT_DATA@@A[edx]
  00117	25 ff 0f 00 00	 and	 eax, 4095		; 00000fffH
  0011c	c1 e0 08	 shl	 eax, 8
  0011f	8b 4d f8	 mov	 ecx, DWORD PTR _raw$[ebp]
  00122	8b 51 38	 mov	 edx, DWORD PTR [ecx+56]
  00125	81 e2 ff 00 f0
	ff		 and	 edx, -1048321		; fff000ffH
  0012b	0b d0		 or	 edx, eax
  0012d	8b 45 f8	 mov	 eax, DWORD PTR _raw$[ebp]
  00130	89 50 38	 mov	 DWORD PTR [eax+56], edx
$LN4@create_loc:

; 356  : 		}
; 357  : 
; 358  : 		////////////////////////////////////////
; 359  : 		//
; 360  : 		// BUILD COMPONENTS
; 361  : 		//
; 362  : 		////////////////////////////////////////
; 363  : 
; 364  : 		////////////////////////////////////////
; 365  : 		//
; 366  : 		// LINK INTO SYSTEM
; 367  : 		//
; 368  : 		////////////////////////////////////////
; 369  : 
; 370  : 		insert_local_entity_into_parents_child_list (en, LIST_TYPE_SECTOR, get_local_sector_entity (&raw->fix.position), NULL);

  00133	6a 00		 push	 0
  00135	8b 45 f8	 mov	 eax, DWORD PTR _raw$[ebp]
  00138	50		 push	 eax
  00139	e8 00 00 00 00	 call	 ?get_local_sector_entity@@YGPAUENTITY@@PAUVEC3D@@@Z ; get_local_sector_entity
  0013e	50		 push	 eax
  0013f	6a 21		 push	 33			; 00000021H
  00141	8b 4d fc	 mov	 ecx, DWORD PTR _en$[ebp]
  00144	51		 push	 ecx
  00145	e8 00 00 00 00	 call	 ?insert_local_entity_into_parents_child_list@@YGXPAUENTITY@@W4LIST_TYPES@@00@Z ; insert_local_entity_into_parents_child_list
$LN3@create_loc:

; 371  : 	}
; 372  : 
; 373  : 	return (en);

  0014a	8b 45 fc	 mov	 eax, DWORD PTR _en$[ebp]

; 374  : }

  0014d	5f		 pop	 edi
  0014e	5e		 pop	 esi
  0014f	5b		 pop	 ebx
  00150	8b e5		 mov	 esp, ebp
  00152	5d		 pop	 ebp
  00153	c2 0c 00	 ret	 12			; 0000000cH
?create_local@@YGPAUENTITY@@W4ENTITY_TYPES@@HPAD@Z ENDP	; create_local
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\entity\fixed\pylon\py_creat.c
;	COMDAT ?load_local_pylon_entities@@YGHPBD@Z
_TEXT	SEGMENT
_current_session$ = -1108				; size = 4
_filename$ = -1104					; size = 1024
_pylon_link_file_ptr$ = -80				; size = 4
_pylon_node_file_ptr$ = -76				; size = 4
_pos$ = -72						; size = 12
_node_positions$ = -60					; size = 4
_link_loop$ = -56					; size = 4
_link_count$ = -52					; size = 4
_end$ = -48						; size = 4
_start$ = -44						; size = 4
_path_loop$ = -40					; size = 4
_node_loop$ = -36					; size = 4
_path_count$ = -32					; size = 4
_node_link_count$ = -28					; size = 4
_node_count$ = -24					; size = 4
_type$ = -20						; size = 4
_sub_type$ = -16					; size = 4
_new_entity$ = -12					; size = 4
_last_last_entity$ = -8					; size = 4
_last_entity$ = -4					; size = 4
_name$ = 8						; size = 4
?load_local_pylon_entities@@YGHPBD@Z PROC		; load_local_pylon_entities, COMDAT

; 80   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec 14 05 00
	00		 sub	 esp, 1300		; 00000514H
  00009	53		 push	 ebx
  0000a	56		 push	 esi
  0000b	57		 push	 edi

; 81   : 	entity
; 82   : 		*last_entity,
; 83   : 		*last_last_entity,
; 84   : 		*new_entity;
; 85   : 
; 86   : 	entity_sub_types
; 87   : 		sub_type;
; 88   : 
; 89   : 	int
; 90   : 		type,
; 91   : 		node_count,
; 92   : 		*node_link_count,
; 93   : 		path_count,
; 94   : 		node_loop,
; 95   : 		path_loop,
; 96   : 		start,
; 97   : 		end,
; 98   : 		link_count,
; 99   : 		link_loop;
; 100  : 
; 101  : 	vec3d
; 102  : 		*node_positions,
; 103  : 		pos;
; 104  : 
; 105  : 	FILE
; 106  : 		*pylon_node_file_ptr,
; 107  : 		*pylon_link_file_ptr;
; 108  : 
; 109  : 	char
; 110  : 		filename [1024];
; 111  : 
; 112  : 	session_list_data_type
; 113  : 		*current_session;
; 114  : 
; 115  : 	//
; 116  : 	// Create "Node" Pylons
; 117  : 	//
; 118  : 
; 119  : 	ASSERT (get_valid_current_game_session ());

  0000c	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?current_game_session@@3PAUSESSION_LIST_DATA_TYPE@@A, 0 ; current_game_session
  00013	75 18		 jne	 SHORT $LN14@load_local
  00015	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??load_local_pylon_entities@@YGHPBD@Z@4JA
  0001a	83 c0 27	 add	 eax, 39			; 00000027H
  0001d	50		 push	 eax
  0001e	68 00 00 00 00	 push	 OFFSET ??_C@_0EK@EBJOPBNC@c?3?2users?2nhv90?2projects?2eech?2ap@
  00023	68 00 00 00 00	 push	 OFFSET ??_C@_0CC@EEKIOPJL@get_valid_current_game_session?5@
  00028	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN14@load_local:

; 120  : 
; 121  : 	ASSERT (name);

  0002d	83 7d 08 00	 cmp	 DWORD PTR _name$[ebp], 0
  00031	75 18		 jne	 SHORT $LN15@load_local
  00033	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??load_local_pylon_entities@@YGHPBD@Z@4JA
  00038	83 c0 29	 add	 eax, 41			; 00000029H
  0003b	50		 push	 eax
  0003c	68 00 00 00 00	 push	 OFFSET ??_C@_0EK@EBJOPBNC@c?3?2users?2nhv90?2projects?2eech?2ap@
  00041	68 00 00 00 00	 push	 OFFSET ??_C@_04MEMAJGDJ@name@
  00046	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN15@load_local:

; 122  : 
; 123  : 	current_session = get_current_game_session ();

  0004b	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_game_session@@3PAUSESSION_LIST_DATA_TYPE@@A ; current_game_session
  00050	89 85 ac fb ff
	ff		 mov	 DWORD PTR _current_session$[ebp], eax

; 124  : 
; 125  : 	sprintf (filename, "%s\\route\\%s.nde", current_session->data_path, name);

  00056	8b 45 08	 mov	 eax, DWORD PTR _name$[ebp]
  00059	50		 push	 eax
  0005a	8b 8d ac fb ff
	ff		 mov	 ecx, DWORD PTR _current_session$[ebp]
  00060	83 c1 1c	 add	 ecx, 28			; 0000001cH
  00063	51		 push	 ecx
  00064	68 00 00 00 00	 push	 OFFSET ??_C@_0BA@GCFGLPDM@?$CFs?2route?2?$CFs?4nde@
  00069	8d 95 b0 fb ff
	ff		 lea	 edx, DWORD PTR _filename$[ebp]
  0006f	52		 push	 edx
  00070	e8 00 00 00 00	 call	 _sprintf
  00075	83 c4 10	 add	 esp, 16			; 00000010H

; 126  : 
; 127  : 	if (file_exist (filename))

  00078	8d 85 b0 fb ff
	ff		 lea	 eax, DWORD PTR _filename$[ebp]
  0007e	50		 push	 eax
  0007f	e8 00 00 00 00	 call	 ?file_exist@@YGHPBD@Z	; file_exist
  00084	85 c0		 test	 eax, eax
  00086	0f 84 1b 03 00
	00		 je	 $LN16@load_local

; 128  : 	{
; 129  : 		pylon_node_file_ptr = safe_fopen (filename, "rb");

  0008c	68 00 00 00 00	 push	 OFFSET ??_C@_02JDPG@rb@
  00091	8d 85 b0 fb ff
	ff		 lea	 eax, DWORD PTR _filename$[ebp]
  00097	50		 push	 eax
  00098	e8 00 00 00 00	 call	 ?safe_fopen@@YGPAU_iobuf@@PBD0@Z ; safe_fopen
  0009d	89 45 b4	 mov	 DWORD PTR _pylon_node_file_ptr$[ebp], eax

; 130  : 
; 131  : 		fread (&node_count, sizeof (int), 1, pylon_node_file_ptr);

  000a0	8b 45 b4	 mov	 eax, DWORD PTR _pylon_node_file_ptr$[ebp]
  000a3	50		 push	 eax
  000a4	6a 01		 push	 1
  000a6	6a 04		 push	 4
  000a8	8d 4d e8	 lea	 ecx, DWORD PTR _node_count$[ebp]
  000ab	51		 push	 ecx
  000ac	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__fread
  000b2	83 c4 10	 add	 esp, 16			; 00000010H

; 132  : 
; 133  : 		node_positions = (vec3d *) malloc_heap_mem (sizeof (vec3d) * node_count);

  000b5	6b 45 e8 0c	 imul	 eax, DWORD PTR _node_count$[ebp], 12
  000b9	50		 push	 eax
  000ba	e8 00 00 00 00	 call	 ?malloc_heap_memory@@YGPAXI@Z ; malloc_heap_memory
  000bf	89 45 c4	 mov	 DWORD PTR _node_positions$[ebp], eax

; 134  : 
; 135  : 		node_link_count = (int *) malloc_heap_mem (sizeof (int) * node_count);

  000c2	8b 45 e8	 mov	 eax, DWORD PTR _node_count$[ebp]
  000c5	c1 e0 02	 shl	 eax, 2
  000c8	50		 push	 eax
  000c9	e8 00 00 00 00	 call	 ?malloc_heap_memory@@YGPAXI@Z ; malloc_heap_memory
  000ce	89 45 e4	 mov	 DWORD PTR _node_link_count$[ebp], eax

; 136  : 
; 137  : 		for (node_loop = 0 ; node_loop < node_count ; node_loop ++)

  000d1	c7 45 dc 00 00
	00 00		 mov	 DWORD PTR _node_loop$[ebp], 0
  000d8	eb 09		 jmp	 SHORT $LN4@load_local
$LN2@load_local:
  000da	8b 45 dc	 mov	 eax, DWORD PTR _node_loop$[ebp]
  000dd	83 c0 01	 add	 eax, 1
  000e0	89 45 dc	 mov	 DWORD PTR _node_loop$[ebp], eax
$LN4@load_local:
  000e3	8b 45 dc	 mov	 eax, DWORD PTR _node_loop$[ebp]
  000e6	3b 45 e8	 cmp	 eax, DWORD PTR _node_count$[ebp]
  000e9	7d 59		 jge	 SHORT $LN3@load_local

; 138  : 		{
; 139  : 			fread (&pos, sizeof (vec3d), 1, pylon_node_file_ptr);

  000eb	8b 45 b4	 mov	 eax, DWORD PTR _pylon_node_file_ptr$[ebp]
  000ee	50		 push	 eax
  000ef	6a 01		 push	 1
  000f1	6a 0c		 push	 12			; 0000000cH
  000f3	8d 4d b8	 lea	 ecx, DWORD PTR _pos$[ebp]
  000f6	51		 push	 ecx
  000f7	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__fread
  000fd	83 c4 10	 add	 esp, 16			; 00000010H

; 140  : 
; 141  : 			node_positions [node_loop].x = pos.x;

  00100	6b 45 dc 0c	 imul	 eax, DWORD PTR _node_loop$[ebp], 12
  00104	8b 4d c4	 mov	 ecx, DWORD PTR _node_positions$[ebp]
  00107	f3 0f 10 45 b8	 movss	 xmm0, DWORD PTR _pos$[ebp]
  0010c	f3 0f 11 04 01	 movss	 DWORD PTR [ecx+eax], xmm0

; 142  : 			node_positions [node_loop].y = pos.y;

  00111	6b 45 dc 0c	 imul	 eax, DWORD PTR _node_loop$[ebp], 12
  00115	8b 4d c4	 mov	 ecx, DWORD PTR _node_positions$[ebp]
  00118	f3 0f 10 45 bc	 movss	 xmm0, DWORD PTR _pos$[ebp+4]
  0011d	f3 0f 11 44 01
	04		 movss	 DWORD PTR [ecx+eax+4], xmm0

; 143  : 			node_positions [node_loop].z = pos.z;

  00123	6b 45 dc 0c	 imul	 eax, DWORD PTR _node_loop$[ebp], 12
  00127	8b 4d c4	 mov	 ecx, DWORD PTR _node_positions$[ebp]
  0012a	f3 0f 10 45 c0	 movss	 xmm0, DWORD PTR _pos$[ebp+8]
  0012f	f3 0f 11 44 01
	08		 movss	 DWORD PTR [ecx+eax+8], xmm0

; 144  : 
; 145  : 			node_link_count [node_loop] = 0;

  00135	8b 45 dc	 mov	 eax, DWORD PTR _node_loop$[ebp]
  00138	8b 4d e4	 mov	 ecx, DWORD PTR _node_link_count$[ebp]
  0013b	c7 04 81 00 00
	00 00		 mov	 DWORD PTR [ecx+eax*4], 0

; 146  : 		}

  00142	eb 96		 jmp	 SHORT $LN2@load_local
$LN3@load_local:

; 147  : 
; 148  : 		fclose (pylon_node_file_ptr);

  00144	8b 45 b4	 mov	 eax, DWORD PTR _pylon_node_file_ptr$[ebp]
  00147	50		 push	 eax
  00148	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__fclose
  0014e	83 c4 04	 add	 esp, 4

; 149  : 
; 150  : 		//
; 151  : 		// Create "Link" Pylons
; 152  : 		//
; 153  : 
; 154  : 		sprintf (filename, "%s\\route\\%s.wp", current_session->data_path, name);

  00151	8b 45 08	 mov	 eax, DWORD PTR _name$[ebp]
  00154	50		 push	 eax
  00155	8b 8d ac fb ff
	ff		 mov	 ecx, DWORD PTR _current_session$[ebp]
  0015b	83 c1 1c	 add	 ecx, 28			; 0000001cH
  0015e	51		 push	 ecx
  0015f	68 00 00 00 00	 push	 OFFSET ??_C@_0P@ILCDDJCB@?$CFs?2route?2?$CFs?4wp@
  00164	8d 95 b0 fb ff
	ff		 lea	 edx, DWORD PTR _filename$[ebp]
  0016a	52		 push	 edx
  0016b	e8 00 00 00 00	 call	 _sprintf
  00170	83 c4 10	 add	 esp, 16			; 00000010H

; 155  : 
; 156  : 		pylon_link_file_ptr = safe_fopen (filename, "rb");

  00173	68 00 00 00 00	 push	 OFFSET ??_C@_02JDPG@rb@
  00178	8d 85 b0 fb ff
	ff		 lea	 eax, DWORD PTR _filename$[ebp]
  0017e	50		 push	 eax
  0017f	e8 00 00 00 00	 call	 ?safe_fopen@@YGPAU_iobuf@@PBD0@Z ; safe_fopen
  00184	89 45 b0	 mov	 DWORD PTR _pylon_link_file_ptr$[ebp], eax

; 157  : 
; 158  : 		fread (&path_count, sizeof (int), 1, pylon_link_file_ptr);

  00187	8b 45 b0	 mov	 eax, DWORD PTR _pylon_link_file_ptr$[ebp]
  0018a	50		 push	 eax
  0018b	6a 01		 push	 1
  0018d	6a 04		 push	 4
  0018f	8d 4d e0	 lea	 ecx, DWORD PTR _path_count$[ebp]
  00192	51		 push	 ecx
  00193	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__fread
  00199	83 c4 10	 add	 esp, 16			; 00000010H

; 159  : 
; 160  : 		new_entity = NULL;

  0019c	c7 45 f4 00 00
	00 00		 mov	 DWORD PTR _new_entity$[ebp], 0

; 161  : 
; 162  : 		for (path_loop = 0 ; path_loop < path_count ; path_loop ++)

  001a3	c7 45 d8 00 00
	00 00		 mov	 DWORD PTR _path_loop$[ebp], 0
  001aa	eb 09		 jmp	 SHORT $LN7@load_local
$LN5@load_local:
  001ac	8b 45 d8	 mov	 eax, DWORD PTR _path_loop$[ebp]
  001af	83 c0 01	 add	 eax, 1
  001b2	89 45 d8	 mov	 DWORD PTR _path_loop$[ebp], eax
$LN7@load_local:
  001b5	8b 45 d8	 mov	 eax, DWORD PTR _path_loop$[ebp]
  001b8	3b 45 e0	 cmp	 eax, DWORD PTR _path_count$[ebp]
  001bb	0f 8d a4 01 00
	00		 jge	 $LN6@load_local

; 163  : 		{
; 164  : 			fread (&start, sizeof (int), 1, pylon_link_file_ptr);

  001c1	8b 45 b0	 mov	 eax, DWORD PTR _pylon_link_file_ptr$[ebp]
  001c4	50		 push	 eax
  001c5	6a 01		 push	 1
  001c7	6a 04		 push	 4
  001c9	8d 4d d4	 lea	 ecx, DWORD PTR _start$[ebp]
  001cc	51		 push	 ecx
  001cd	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__fread
  001d3	83 c4 10	 add	 esp, 16			; 00000010H

; 165  : 
; 166  : 			fread (&end, sizeof (int), 1, pylon_link_file_ptr);

  001d6	8b 45 b0	 mov	 eax, DWORD PTR _pylon_link_file_ptr$[ebp]
  001d9	50		 push	 eax
  001da	6a 01		 push	 1
  001dc	6a 04		 push	 4
  001de	8d 4d d0	 lea	 ecx, DWORD PTR _end$[ebp]
  001e1	51		 push	 ecx
  001e2	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__fread
  001e8	83 c4 10	 add	 esp, 16			; 00000010H

; 167  : 
; 168  : 			fread (&type, sizeof (int), 1, pylon_link_file_ptr);

  001eb	8b 45 b0	 mov	 eax, DWORD PTR _pylon_link_file_ptr$[ebp]
  001ee	50		 push	 eax
  001ef	6a 01		 push	 1
  001f1	6a 04		 push	 4
  001f3	8d 4d ec	 lea	 ecx, DWORD PTR _type$[ebp]
  001f6	51		 push	 ecx
  001f7	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__fread
  001fd	83 c4 10	 add	 esp, 16			; 00000010H

; 169  : 
; 170  : 			fread (&link_count, sizeof (int), 1, pylon_link_file_ptr);

  00200	8b 45 b0	 mov	 eax, DWORD PTR _pylon_link_file_ptr$[ebp]
  00203	50		 push	 eax
  00204	6a 01		 push	 1
  00206	6a 04		 push	 4
  00208	8d 4d cc	 lea	 ecx, DWORD PTR _link_count$[ebp]
  0020b	51		 push	 ecx
  0020c	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__fread
  00212	83 c4 10	 add	 esp, 16			; 00000010H

; 171  : 
; 172  : 			node_link_count [start] += 1;

  00215	8b 45 d4	 mov	 eax, DWORD PTR _start$[ebp]
  00218	8b 4d e4	 mov	 ecx, DWORD PTR _node_link_count$[ebp]
  0021b	8b 14 81	 mov	 edx, DWORD PTR [ecx+eax*4]
  0021e	83 c2 01	 add	 edx, 1
  00221	8b 45 d4	 mov	 eax, DWORD PTR _start$[ebp]
  00224	8b 4d e4	 mov	 ecx, DWORD PTR _node_link_count$[ebp]
  00227	89 14 81	 mov	 DWORD PTR [ecx+eax*4], edx

; 173  : 			node_link_count [end] += 1;

  0022a	8b 45 d0	 mov	 eax, DWORD PTR _end$[ebp]
  0022d	8b 4d e4	 mov	 ecx, DWORD PTR _node_link_count$[ebp]
  00230	8b 14 81	 mov	 edx, DWORD PTR [ecx+eax*4]
  00233	83 c2 01	 add	 edx, 1
  00236	8b 45 d0	 mov	 eax, DWORD PTR _end$[ebp]
  00239	8b 4d e4	 mov	 ecx, DWORD PTR _node_link_count$[ebp]
  0023c	89 14 81	 mov	 DWORD PTR [ecx+eax*4], edx

; 174  : 
; 175  : 			if (link_count > 0)

  0023f	83 7d cc 00	 cmp	 DWORD PTR _link_count$[ebp], 0
  00243	0f 8e 17 01 00
	00		 jle	 $LN17@load_local

; 176  : 			{
; 177  : 				last_entity = NULL;

  00249	c7 45 fc 00 00
	00 00		 mov	 DWORD PTR _last_entity$[ebp], 0

; 178  : 
; 179  : 				last_last_entity = NULL;

  00250	c7 45 f8 00 00
	00 00		 mov	 DWORD PTR _last_last_entity$[ebp], 0

; 180  : 
; 181  : 				for (link_loop = 0 ; link_loop < link_count ; link_loop ++)

  00257	c7 45 c8 00 00
	00 00		 mov	 DWORD PTR _link_loop$[ebp], 0
  0025e	eb 09		 jmp	 SHORT $LN10@load_local
$LN8@load_local:
  00260	8b 45 c8	 mov	 eax, DWORD PTR _link_loop$[ebp]
  00263	83 c0 01	 add	 eax, 1
  00266	89 45 c8	 mov	 DWORD PTR _link_loop$[ebp], eax
$LN10@load_local:
  00269	8b 45 c8	 mov	 eax, DWORD PTR _link_loop$[ebp]
  0026c	3b 45 cc	 cmp	 eax, DWORD PTR _link_count$[ebp]
  0026f	0f 8d cc 00 00
	00		 jge	 $LN9@load_local

; 182  : 				{
; 183  : 					fread (&pos, sizeof (vec3d), 1, pylon_link_file_ptr);

  00275	8b 45 b0	 mov	 eax, DWORD PTR _pylon_link_file_ptr$[ebp]
  00278	50		 push	 eax
  00279	6a 01		 push	 1
  0027b	6a 0c		 push	 12			; 0000000cH
  0027d	8d 4d b8	 lea	 ecx, DWORD PTR _pos$[ebp]
  00280	51		 push	 ecx
  00281	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__fread
  00287	83 c4 10	 add	 esp, 16			; 00000010H

; 184  : 
; 185  : 					if (link_loop == 0)

  0028a	83 7d c8 00	 cmp	 DWORD PTR _link_loop$[ebp], 0
  0028e	75 09		 jne	 SHORT $LN18@load_local

; 186  : 					{
; 187  : 						sub_type = ENTITY_SUB_TYPE_FIXED_ELECTRICITY_PYLON_START_TERMINATOR;

  00290	c7 45 f0 09 00
	00 00		 mov	 DWORD PTR _sub_type$[ebp], 9
  00297	eb 1b		 jmp	 SHORT $LN21@load_local
$LN18@load_local:

; 188  : 					}
; 189  : 					else if (link_loop == link_count - 1)

  00299	8b 45 cc	 mov	 eax, DWORD PTR _link_count$[ebp]
  0029c	83 e8 01	 sub	 eax, 1
  0029f	39 45 c8	 cmp	 DWORD PTR _link_loop$[ebp], eax
  002a2	75 09		 jne	 SHORT $LN20@load_local

; 190  : 					{
; 191  : 						sub_type = ENTITY_SUB_TYPE_FIXED_ELECTRICITY_PYLON_END_TERMINATOR;

  002a4	c7 45 f0 07 00
	00 00		 mov	 DWORD PTR _sub_type$[ebp], 7

; 192  : 					}
; 193  : 					else 

  002ab	eb 07		 jmp	 SHORT $LN21@load_local
$LN20@load_local:

; 194  : 					{
; 195  : 						sub_type = ENTITY_SUB_TYPE_FIXED_ELECTRICITY_PYLON_STANDARD;

  002ad	c7 45 f0 08 00
	00 00		 mov	 DWORD PTR _sub_type$[ebp], 8
$LN21@load_local:

; 196  : 					}
; 197  : 
; 198  : 					new_entity = create_local_entity

  002b4	6a 00		 push	 0
  002b6	8b 45 fc	 mov	 eax, DWORD PTR _last_entity$[ebp]
  002b9	50		 push	 eax
  002ba	6a 0d		 push	 13			; 0000000dH
  002bc	6a 07		 push	 7
  002be	83 ec 08	 sub	 esp, 8
  002c1	0f 57 c0	 xorps	 xmm0, xmm0
  002c4	f2 0f 11 04 24	 movsd	 QWORD PTR [esp], xmm0
  002c9	6a 34		 push	 52			; 00000034H
  002cb	6a 04		 push	 4
  002cd	f3 0f 5a 45 c0	 cvtss2sd xmm0, DWORD PTR _pos$[ebp+8]
  002d2	83 ec 08	 sub	 esp, 8
  002d5	f2 0f 11 04 24	 movsd	 QWORD PTR [esp], xmm0
  002da	f3 0f 5a 45 bc	 cvtss2sd xmm0, DWORD PTR _pos$[ebp+4]
  002df	83 ec 08	 sub	 esp, 8
  002e2	f2 0f 11 04 24	 movsd	 QWORD PTR [esp], xmm0
  002e7	f3 0f 5a 45 b8	 cvtss2sd xmm0, DWORD PTR _pos$[ebp]
  002ec	83 ec 08	 sub	 esp, 8
  002ef	f2 0f 11 04 24	 movsd	 QWORD PTR [esp], xmm0
  002f4	6a 08		 push	 8
  002f6	6a 09		 push	 9
  002f8	8b 4d f0	 mov	 ecx, DWORD PTR _sub_type$[ebp]
  002fb	51		 push	 ecx
  002fc	6a 34		 push	 52			; 00000034H
  002fe	6a 05		 push	 5
  00300	6a ff		 push	 -1
  00302	6a 15		 push	 21			; 00000015H
  00304	e8 00 00 00 00	 call	 ?create_local_entity@@YAPAUENTITY@@W4ENTITY_TYPES@@HZZ ; create_local_entity
  00309	83 c4 54	 add	 esp, 84			; 00000054H
  0030c	89 45 f4	 mov	 DWORD PTR _new_entity$[ebp], eax

; 199  : 					(
; 200  : 						ENTITY_TYPE_PYLON,
; 201  : 						ENTITY_INDEX_DONT_CARE,
; 202  : 						ENTITY_ATTR_INT_VALUE (INT_TYPE_ENTITY_SUB_TYPE, sub_type),
; 203  : 						ENTITY_ATTR_VEC3D (VEC3D_TYPE_POSITION, pos.x, pos.y, pos.z),
; 204  : 						ENTITY_ATTR_FLOAT_VALUE (FLOAT_TYPE_HEADING, 0),
; 205  : 						ENTITY_ATTR_PTR_VALUE (PTR_TYPE_SUCC, last_entity),
; 206  : 						ENTITY_ATTR_END
; 207  : 					);
; 208  : 
; 209  : 					calculate_pylon_heading (last_last_entity, last_entity, new_entity, &node_positions [start], &node_positions [end]);

  0030f	6b 45 d0 0c	 imul	 eax, DWORD PTR _end$[ebp], 12
  00313	03 45 c4	 add	 eax, DWORD PTR _node_positions$[ebp]
  00316	50		 push	 eax
  00317	6b 4d d4 0c	 imul	 ecx, DWORD PTR _start$[ebp], 12
  0031b	03 4d c4	 add	 ecx, DWORD PTR _node_positions$[ebp]
  0031e	51		 push	 ecx
  0031f	8b 55 f4	 mov	 edx, DWORD PTR _new_entity$[ebp]
  00322	52		 push	 edx
  00323	8b 45 fc	 mov	 eax, DWORD PTR _last_entity$[ebp]
  00326	50		 push	 eax
  00327	8b 4d f8	 mov	 ecx, DWORD PTR _last_last_entity$[ebp]
  0032a	51		 push	 ecx
  0032b	e8 00 00 00 00	 call	 ?calculate_pylon_heading@@YGXPAUENTITY@@00PAUVEC3D@@1@Z ; calculate_pylon_heading

; 210  : 
; 211  : 					last_last_entity = last_entity;

  00330	8b 45 fc	 mov	 eax, DWORD PTR _last_entity$[ebp]
  00333	89 45 f8	 mov	 DWORD PTR _last_last_entity$[ebp], eax

; 212  : 
; 213  : 					last_entity = new_entity;

  00336	8b 45 f4	 mov	 eax, DWORD PTR _new_entity$[ebp]
  00339	89 45 fc	 mov	 DWORD PTR _last_entity$[ebp], eax

; 214  : 				}

  0033c	e9 1f ff ff ff	 jmp	 $LN8@load_local
$LN9@load_local:

; 215  : 
; 216  : 				// last pylon in the link
; 217  : 				calculate_pylon_heading (last_last_entity, last_entity, NULL, &node_positions [start], &node_positions [end]);

  00341	6b 45 d0 0c	 imul	 eax, DWORD PTR _end$[ebp], 12
  00345	03 45 c4	 add	 eax, DWORD PTR _node_positions$[ebp]
  00348	50		 push	 eax
  00349	6b 4d d4 0c	 imul	 ecx, DWORD PTR _start$[ebp], 12
  0034d	03 4d c4	 add	 ecx, DWORD PTR _node_positions$[ebp]
  00350	51		 push	 ecx
  00351	6a 00		 push	 0
  00353	8b 55 fc	 mov	 edx, DWORD PTR _last_entity$[ebp]
  00356	52		 push	 edx
  00357	8b 45 f8	 mov	 eax, DWORD PTR _last_last_entity$[ebp]
  0035a	50		 push	 eax
  0035b	e8 00 00 00 00	 call	 ?calculate_pylon_heading@@YGXPAUENTITY@@00PAUVEC3D@@1@Z ; calculate_pylon_heading
$LN17@load_local:

; 218  : 			}
; 219  : 		}

  00360	e9 47 fe ff ff	 jmp	 $LN5@load_local
$LN6@load_local:

; 220  : 
; 221  : 		for (node_loop = 0 ; node_loop < node_count ; node_loop ++)

  00365	c7 45 dc 00 00
	00 00		 mov	 DWORD PTR _node_loop$[ebp], 0
  0036c	eb 09		 jmp	 SHORT $LN13@load_local
$LN11@load_local:
  0036e	8b 45 dc	 mov	 eax, DWORD PTR _node_loop$[ebp]
  00371	83 c0 01	 add	 eax, 1
  00374	89 45 dc	 mov	 DWORD PTR _node_loop$[ebp], eax
$LN13@load_local:
  00377	8b 45 dc	 mov	 eax, DWORD PTR _node_loop$[ebp]
  0037a	3b 45 e8	 cmp	 eax, DWORD PTR _node_count$[ebp]
  0037d	7d 02		 jge	 SHORT $LN12@load_local

; 222  : 		{
; 223  : 			//
; 224  : 			// create node entities here
; 225  : 			//
; 226  : 		}

  0037f	eb ed		 jmp	 SHORT $LN11@load_local
$LN12@load_local:

; 227  : 
; 228  : 		fclose (pylon_link_file_ptr);

  00381	8b 45 b0	 mov	 eax, DWORD PTR _pylon_link_file_ptr$[ebp]
  00384	50		 push	 eax
  00385	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__fclose
  0038b	83 c4 04	 add	 esp, 4

; 229  : 
; 230  : 		free_mem (node_positions);

  0038e	8b 45 c4	 mov	 eax, DWORD PTR _node_positions$[ebp]
  00391	50		 push	 eax
  00392	e8 00 00 00 00	 call	 ?free_mem@@YGXPAX@Z	; free_mem

; 231  : 
; 232  : 		free_mem (node_link_count);

  00397	8b 45 e4	 mov	 eax, DWORD PTR _node_link_count$[ebp]
  0039a	50		 push	 eax
  0039b	e8 00 00 00 00	 call	 ?free_mem@@YGXPAX@Z	; free_mem

; 233  : 
; 234  : 		return TRUE;

  003a0	b8 01 00 00 00	 mov	 eax, 1
  003a5	eb 02		 jmp	 SHORT $LN1@load_local
$LN16@load_local:

; 235  : 	}
; 236  : 
; 237  : 	return FALSE;

  003a7	33 c0		 xor	 eax, eax
$LN1@load_local:

; 238  : }

  003a9	5f		 pop	 edi
  003aa	5e		 pop	 esi
  003ab	5b		 pop	 ebx
  003ac	8b e5		 mov	 esp, ebp
  003ae	5d		 pop	 ebp
  003af	c2 04 00	 ret	 4
?load_local_pylon_entities@@YGHPBD@Z ENDP		; load_local_pylon_entities
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\entity\fixed\pylon\py_creat.c
;	COMDAT ?overload_pylon_create_functions@@YGXXZ
_TEXT	SEGMENT
?overload_pylon_create_functions@@YGXXZ PROC		; overload_pylon_create_functions, COMDAT

; 381  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 382  : 	fn_create_local_entity[ENTITY_TYPE_PYLON]		 				 					 = create_local;

  00009	b8 04 00 00 00	 mov	 eax, 4
  0000e	6b c8 15	 imul	 ecx, eax, 21
  00011	c7 81 00 00 00
	00 00 00 00 00	 mov	 DWORD PTR ?fn_create_local_entity@@3PAP6GPAUENTITY@@W4ENTITY_TYPES@@HPAD@ZA[ecx], OFFSET ?create_local@@YGPAUENTITY@@W4ENTITY_TYPES@@HPAD@Z ; create_local

; 383  : }

  0001b	5f		 pop	 edi
  0001c	5e		 pop	 esi
  0001d	5b		 pop	 ebx
  0001e	8b e5		 mov	 esp, ebp
  00020	5d		 pop	 ebp
  00021	c3		 ret	 0
?overload_pylon_create_functions@@YGXXZ ENDP		; overload_pylon_create_functions
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\entity\fixed\pylon\py_creat.c
;	COMDAT ?create_local_pylon_entities@@YGXW4PACK_MODES@@@Z
_TEXT	SEGMENT
_pack_mode$ = 8						; size = 4
?create_local_pylon_entities@@YGXW4PACK_MODES@@@Z PROC	; create_local_pylon_entities, COMDAT

; 245  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 246  : 	debug_assert (get_comms_model () == COMMS_MODEL_SERVER);

  00009	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?system_comms_model@@3W4COMMS_MODEL_TYPES@@A, 0 ; system_comms_model
  00010	74 20		 je	 SHORT $LN2@create_loc
  00012	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??create_local_pylon_entities@@YGXW4PACK_MODES@@@Z@4JA
  00017	83 c0 01	 add	 eax, 1
  0001a	50		 push	 eax
  0001b	68 00 00 00 00	 push	 OFFSET ??_C@_0EK@EBJOPBNC@c?3?2users?2nhv90?2projects?2eech?2ap@
  00020	68 00 00 00 00	 push	 OFFSET ??_C@_0CJ@DMBLBJBK@get_comms_model?5?$CI?$CJ?5?$DN?$DN?5COMMS_MOD@
  00025	68 00 00 00 00	 push	 OFFSET ??_C@_0BC@PODNONFH@ASSERT?5?$CFs?5?$CI?$CFs?3?$CFd?$CJ@
  0002a	e8 00 00 00 00	 call	 ?debug_fatal@@YAXPBDZZ	; debug_fatal
  0002f	83 c4 10	 add	 esp, 16			; 00000010H
$LN2@create_loc:

; 247  : 
; 248  : 	if (pack_mode == PACK_MODE_BROWSE_SESSION)

  00032	83 7d 08 02	 cmp	 DWORD PTR _pack_mode$[ebp], 2
  00036	75 02		 jne	 SHORT $LN3@create_loc

; 249  : 	{
; 250  : 		return;

  00038	eb 18		 jmp	 SHORT $LN1@create_loc
$LN3@create_loc:

; 251  : 	}
; 252  : 
; 253  : 	if (!load_local_pylon_entities ("utils"))

  0003a	68 00 00 00 00	 push	 OFFSET ??_C@_05BKHBCENJ@utils@
  0003f	e8 00 00 00 00	 call	 ?load_local_pylon_entities@@YGHPBD@Z ; load_local_pylon_entities
  00044	85 c0		 test	 eax, eax
  00046	75 0a		 jne	 SHORT $LN1@create_loc

; 254  : 	{
; 255  : 		load_local_pylon_entities ("utildata");

  00048	68 00 00 00 00	 push	 OFFSET ??_C@_08CKPGOPDH@utildata@
  0004d	e8 00 00 00 00	 call	 ?load_local_pylon_entities@@YGHPBD@Z ; load_local_pylon_entities
$LN1@create_loc:

; 256  : 	}
; 257  : }

  00052	5f		 pop	 edi
  00053	5e		 pop	 esi
  00054	5b		 pop	 ebx
  00055	8b e5		 mov	 esp, ebp
  00057	5d		 pop	 ebp
  00058	c2 04 00	 ret	 4
?create_local_pylon_entities@@YGXW4PACK_MODES@@@Z ENDP	; create_local_pylon_entities
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\program files (x86)\windows kits\10\include\10.0.18362.0\ucrt\stdio.h
;	COMDAT _sprintf
_TEXT	SEGMENT
__ArgList$ = -8						; size = 4
__Result$ = -4						; size = 4
__Buffer$ = 8						; size = 4
__Format$ = 12						; size = 4
_sprintf PROC						; COMDAT

; 1781 :     {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 4c	 sub	 esp, 76			; 0000004cH
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 1782 :         int _Result;
; 1783 :         va_list _ArgList;
; 1784 :         __crt_va_start(_ArgList, _Format);

  00009	8d 45 10	 lea	 eax, DWORD PTR __Format$[ebp+4]
  0000c	89 45 f8	 mov	 DWORD PTR __ArgList$[ebp], eax

; 1785 : 
; 1786 :         #pragma warning(push)
; 1787 :         #pragma warning(disable: 4996) // Deprecation
; 1788 :         _Result = _vsprintf_l(_Buffer, _Format, NULL, _ArgList);

  0000f	8b 45 f8	 mov	 eax, DWORD PTR __ArgList$[ebp]
  00012	50		 push	 eax
  00013	6a 00		 push	 0
  00015	8b 4d 0c	 mov	 ecx, DWORD PTR __Format$[ebp]
  00018	51		 push	 ecx
  00019	8b 55 08	 mov	 edx, DWORD PTR __Buffer$[ebp]
  0001c	52		 push	 edx
  0001d	e8 00 00 00 00	 call	 __vsprintf_l
  00022	83 c4 10	 add	 esp, 16			; 00000010H
  00025	89 45 fc	 mov	 DWORD PTR __Result$[ebp], eax

; 1789 :         #pragma warning(pop)
; 1790 : 
; 1791 :         __crt_va_end(_ArgList);

  00028	c7 45 f8 00 00
	00 00		 mov	 DWORD PTR __ArgList$[ebp], 0

; 1792 :         return _Result;

  0002f	8b 45 fc	 mov	 eax, DWORD PTR __Result$[ebp]

; 1793 :     }

  00032	5f		 pop	 edi
  00033	5e		 pop	 esi
  00034	5b		 pop	 ebx
  00035	8b e5		 mov	 esp, ebp
  00037	5d		 pop	 ebp
  00038	c3		 ret	 0
_sprintf ENDP
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\program files (x86)\windows kits\10\include\10.0.18362.0\ucrt\stdio.h
;	COMDAT __vsprintf_l
_TEXT	SEGMENT
__Buffer$ = 8						; size = 4
__Format$ = 12						; size = 4
__Locale$ = 16						; size = 4
__ArgList$ = 20						; size = 4
__vsprintf_l PROC					; COMDAT

; 1459 :     {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 1460 :         #pragma warning(push)
; 1461 :         #pragma warning(disable: 4996) // Deprecation
; 1462 :         return _vsnprintf_l(_Buffer, (size_t)-1, _Format, _Locale, _ArgList);

  00009	8b 45 14	 mov	 eax, DWORD PTR __ArgList$[ebp]
  0000c	50		 push	 eax
  0000d	8b 4d 10	 mov	 ecx, DWORD PTR __Locale$[ebp]
  00010	51		 push	 ecx
  00011	8b 55 0c	 mov	 edx, DWORD PTR __Format$[ebp]
  00014	52		 push	 edx
  00015	6a ff		 push	 -1
  00017	8b 45 08	 mov	 eax, DWORD PTR __Buffer$[ebp]
  0001a	50		 push	 eax
  0001b	e8 00 00 00 00	 call	 __vsnprintf_l
  00020	83 c4 14	 add	 esp, 20			; 00000014H

; 1463 :         #pragma warning(pop)
; 1464 :     }

  00023	5f		 pop	 edi
  00024	5e		 pop	 esi
  00025	5b		 pop	 ebx
  00026	8b e5		 mov	 esp, ebp
  00028	5d		 pop	 ebp
  00029	c3		 ret	 0
__vsprintf_l ENDP
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\program files (x86)\windows kits\10\include\10.0.18362.0\ucrt\stdio.h
;	COMDAT __vsnprintf_l
_TEXT	SEGMENT
tv74 = -72						; size = 4
__Result$ = -4						; size = 4
__Buffer$ = 8						; size = 4
__BufferCount$ = 12					; size = 4
__Format$ = 16						; size = 4
__Locale$ = 20						; size = 4
__ArgList$ = 24						; size = 4
__vsnprintf_l PROC					; COMDAT

; 1389 :     {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 48	 sub	 esp, 72			; 00000048H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 1390 :         int const _Result = __stdio_common_vsprintf(

  00009	8b 45 18	 mov	 eax, DWORD PTR __ArgList$[ebp]
  0000c	50		 push	 eax
  0000d	8b 4d 14	 mov	 ecx, DWORD PTR __Locale$[ebp]
  00010	51		 push	 ecx
  00011	8b 55 10	 mov	 edx, DWORD PTR __Format$[ebp]
  00014	52		 push	 edx
  00015	8b 45 0c	 mov	 eax, DWORD PTR __BufferCount$[ebp]
  00018	50		 push	 eax
  00019	8b 4d 08	 mov	 ecx, DWORD PTR __Buffer$[ebp]
  0001c	51		 push	 ecx
  0001d	e8 00 00 00 00	 call	 ___local_stdio_printf_options
  00022	8b 10		 mov	 edx, DWORD PTR [eax]
  00024	83 ca 01	 or	 edx, 1
  00027	8b 40 04	 mov	 eax, DWORD PTR [eax+4]
  0002a	50		 push	 eax
  0002b	52		 push	 edx
  0002c	ff 15 00 00 00
	00		 call	 DWORD PTR __imp____stdio_common_vsprintf
  00032	83 c4 1c	 add	 esp, 28			; 0000001cH
  00035	89 45 fc	 mov	 DWORD PTR __Result$[ebp], eax

; 1391 :             _CRT_INTERNAL_LOCAL_PRINTF_OPTIONS | _CRT_INTERNAL_PRINTF_LEGACY_VSPRINTF_NULL_TERMINATION,
; 1392 :             _Buffer, _BufferCount, _Format, _Locale, _ArgList);
; 1393 : 
; 1394 :         return _Result < 0 ? -1 : _Result;

  00038	83 7d fc 00	 cmp	 DWORD PTR __Result$[ebp], 0
  0003c	7d 09		 jge	 SHORT $LN3@vsnprintf_
  0003e	c7 45 b8 ff ff
	ff ff		 mov	 DWORD PTR tv74[ebp], -1
  00045	eb 06		 jmp	 SHORT $LN4@vsnprintf_
$LN3@vsnprintf_:
  00047	8b 45 fc	 mov	 eax, DWORD PTR __Result$[ebp]
  0004a	89 45 b8	 mov	 DWORD PTR tv74[ebp], eax
$LN4@vsnprintf_:
  0004d	8b 45 b8	 mov	 eax, DWORD PTR tv74[ebp]

; 1395 :     }

  00050	5f		 pop	 edi
  00051	5e		 pop	 esi
  00052	5b		 pop	 ebx
  00053	8b e5		 mov	 esp, ebp
  00055	5d		 pop	 ebp
  00056	c3		 ret	 0
__vsnprintf_l ENDP
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\program files (x86)\windows kits\10\include\10.0.18362.0\ucrt\corecrt_stdio_config.h
;	COMDAT ___local_stdio_printf_options
_TEXT	SEGMENT
___local_stdio_printf_options PROC			; COMDAT

; 86   :     {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 87   :         static unsigned __int64 _OptionsStorage;
; 88   :         return &_OptionsStorage;

  00009	b8 00 00 00 00	 mov	 eax, OFFSET ?_OptionsStorage@?1??__local_stdio_printf_options@@9@4_KA ; `__local_stdio_printf_options'::`2'::_OptionsStorage

; 89   :     }

  0000e	5f		 pop	 edi
  0000f	5e		 pop	 esi
  00010	5b		 pop	 ebx
  00011	8b e5		 mov	 esp, ebp
  00013	5d		 pop	 ebp
  00014	c3		 ret	 0
___local_stdio_printf_options ENDP
_TEXT	ENDS
END
