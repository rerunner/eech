; Listing generated by Microsoft (R) Optimizing Compiler Version 19.16.27045.0 

	TITLE	C:\Users\nhv90\Projects\eech\modules\userint2\ui_obj\close\cl_creat.c
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB MSVCRTD
INCLUDELIB OLDNAMES

PUBLIC	?overload_close_ui_object_create_functions@@YGXH@Z ; overload_close_ui_object_create_functions
PUBLIC	??_C@_0CE@FGGPOOMI@ERROR?3?5Close_box?5MUST?5have?5a?5pa@ ; `string'
PUBLIC	__real@3f800000
EXTRN	_memset:PROC
EXTRN	?debug_fatal@@YAXPBDZZ:PROC			; debug_fatal
EXTRN	?safe_malloc_memory@@YGPAXI@Z:PROC		; safe_malloc_memory
EXTRN	?set_ui_object_attributes@@YGXPAUUI_OBJECT@@PAD@Z:PROC ; set_ui_object_attributes
EXTRN	?increase_ui_object_counter@@YGXXZ:PROC		; increase_ui_object_counter
EXTRN	?fn_create_ui_object@@3PAP6GXPAUUI_OBJECT@@HPAD@ZA:BYTE ; fn_create_ui_object
EXTRN	?fn_get_ui_object_x_size@@3PAP6GMPAUUI_OBJECT@@@ZA:BYTE ; fn_get_ui_object_x_size
EXTRN	?fn_get_ui_object_y_size@@3PAP6GMPAUUI_OBJECT@@@ZA:BYTE ; fn_get_ui_object_y_size
EXTRN	__fltused:DWORD
;	COMDAT __real@3f800000
CONST	SEGMENT
__real@3f800000 DD 03f800000r			; 1
CONST	ENDS
;	COMDAT ??_C@_0CE@FGGPOOMI@ERROR?3?5Close_box?5MUST?5have?5a?5pa@
CONST	SEGMENT
??_C@_0CE@FGGPOOMI@ERROR?3?5Close_box?5MUST?5have?5a?5pa@ DB 'ERROR: Clos'
	DB	'e_box MUST have a parent', 00H		; `string'
CONST	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\modules\userint2\ui_obj\close\cl_creat.c
;	COMDAT ?create_close_ui_object@@YGXPAUUI_OBJECT@@HPAD@Z
_TEXT	SEGMENT
_new_close$ = -12					; size = 4
_py_size$ = -8						; size = 4
_px_size$ = -4						; size = 4
_obj$ = 8						; size = 4
_type$ = 12						; size = 4
_pargs$ = 16						; size = 4
?create_close_ui_object@@YGXPAUUI_OBJECT@@HPAD@Z PROC	; create_close_ui_object, COMDAT

; 74   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 4c	 sub	 esp, 76			; 0000004cH
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 75   : 
; 76   : 	float
; 77   : 		px_size,
; 78   : 		py_size;
; 79   : 
; 80   :    close_ui_object
; 81   :       *new_close;
; 82   : 
; 83   : 	increase_ui_object_counter ();

  00009	e8 00 00 00 00	 call	 ?increase_ui_object_counter@@YGXXZ ; increase_ui_object_counter

; 84   : 
; 85   :    ////////////////////////////////////////
; 86   :    //
; 87   :    // MALLOC ENTITY DATA
; 88   :    //
; 89   :    ////////////////////////////////////////
; 90   : 
; 91   :    obj->type   = type;

  0000e	8b 45 08	 mov	 eax, DWORD PTR _obj$[ebp]
  00011	8b 4d 0c	 mov	 ecx, DWORD PTR _type$[ebp]
  00014	89 08		 mov	 DWORD PTR [eax], ecx

; 92   : 
; 93   :    new_close    = (close_ui_object*) safe_malloc (sizeof (close_ui_object));

  00016	68 e4 00 00 00	 push	 228			; 000000e4H
  0001b	e8 00 00 00 00	 call	 ?safe_malloc_memory@@YGPAXI@Z ; safe_malloc_memory
  00020	89 45 f4	 mov	 DWORD PTR _new_close$[ebp], eax

; 94   : 
; 95   :    obj->data   = new_close;

  00023	8b 45 08	 mov	 eax, DWORD PTR _obj$[ebp]
  00026	8b 4d f4	 mov	 ecx, DWORD PTR _new_close$[ebp]
  00029	89 48 04	 mov	 DWORD PTR [eax+4], ecx

; 96   : 
; 97   :    ////////////////////////////////////////
; 98   :    //
; 99   :    // INITIALISE ALL ENTITY DATA TO 'WORKING' DEFAULT VALUES
; 100  :    //
; 101  :    // DO NOT USE ACCESS FUNCTIONS
; 102  :    //
; 103  :    // DO NOT USE RANDOM VALUES
; 104  :    //
; 105  :    ////////////////////////////////////////
; 106  : 
; 107  :    memset (new_close, 0, sizeof (close_ui_object));

  0002c	68 e4 00 00 00	 push	 228			; 000000e4H
  00031	6a 00		 push	 0
  00033	8b 45 f4	 mov	 eax, DWORD PTR _new_close$[ebp]
  00036	50		 push	 eax
  00037	e8 00 00 00 00	 call	 _memset
  0003c	83 c4 0c	 add	 esp, 12			; 0000000cH

; 108  : 
; 109  :    //new_close->area.x = 0.0;
; 110  :    //new_close->area.y = 0.0;
; 111  :    //new_close->area.x_size = 20.0;
; 112  :    //new_close->area.y_size = 20.0;
; 113  :    new_close->area.x_origin = 0.0;

  0003f	8b 45 f4	 mov	 eax, DWORD PTR _new_close$[ebp]
  00042	0f 57 c0	 xorps	 xmm0, xmm0
  00045	f3 0f 11 40 30	 movss	 DWORD PTR [eax+48], xmm0

; 114  :    new_close->area.y_origin = 0.0;

  0004a	8b 45 f4	 mov	 eax, DWORD PTR _new_close$[ebp]
  0004d	0f 57 c0	 xorps	 xmm0, xmm0
  00050	f3 0f 11 40 34	 movss	 DWORD PTR [eax+52], xmm0

; 115  :    new_close->area.drawable = 1;

  00055	8b 45 f4	 mov	 eax, DWORD PTR _new_close$[ebp]
  00058	8b 48 4c	 mov	 ecx, DWORD PTR [eax+76]
  0005b	83 c9 20	 or	 ecx, 32			; 00000020H
  0005e	8b 55 f4	 mov	 edx, DWORD PTR _new_close$[ebp]
  00061	89 4a 4c	 mov	 DWORD PTR [edx+76], ecx

; 116  :    new_close->area.redraw = 1;

  00064	8b 45 f4	 mov	 eax, DWORD PTR _new_close$[ebp]
  00067	8b 48 4c	 mov	 ecx, DWORD PTR [eax+76]
  0006a	81 e1 7f 80 ff
	ff		 and	 ecx, -32641		; ffff807fH
  00070	81 c9 80 00 00
	00		 or	 ecx, 128		; 00000080H
  00076	8b 55 f4	 mov	 edx, DWORD PTR _new_close$[ebp]
  00079	89 4a 4c	 mov	 DWORD PTR [edx+76], ecx

; 117  :    new_close->area.item_number = -1;

  0007c	8b 45 f4	 mov	 eax, DWORD PTR _new_close$[ebp]
  0007f	c7 40 54 ff ff
	ff ff		 mov	 DWORD PTR [eax+84], -1

; 118  :    new_close->area.moveable = 0;

  00086	8b 45 f4	 mov	 eax, DWORD PTR _new_close$[ebp]
  00089	8b 48 4c	 mov	 ecx, DWORD PTR [eax+76]
  0008c	81 e1 ff 7f ff
	ff		 and	 ecx, -32769		; ffff7fffH
  00092	8b 55 f4	 mov	 edx, DWORD PTR _new_close$[ebp]
  00095	89 4a 4c	 mov	 DWORD PTR [edx+76], ecx

; 119  :    new_close->area.resizeable = 0;

  00098	8b 45 f4	 mov	 eax, DWORD PTR _new_close$[ebp]
  0009b	8b 48 4c	 mov	 ecx, DWORD PTR [eax+76]
  0009e	81 e1 ff ff fe
	ff		 and	 ecx, -65537		; fffeffffH
  000a4	8b 55 f4	 mov	 edx, DWORD PTR _new_close$[ebp]
  000a7	89 4a 4c	 mov	 DWORD PTR [edx+76], ecx

; 120  :    new_close->area.notify_on = NOTIFY_TYPE_BUTTON_UP;

  000aa	8b 45 f4	 mov	 eax, DWORD PTR _new_close$[ebp]
  000ad	8b 48 4c	 mov	 ecx, DWORD PTR [eax+76]
  000b0	81 e1 ff ff ff
	87		 and	 ecx, -2013265921	; 87ffffffH
  000b6	81 c9 00 00 00
	08		 or	 ecx, 134217728		; 08000000H
  000bc	8b 55 f4	 mov	 edx, DWORD PTR _new_close$[ebp]
  000bf	89 4a 4c	 mov	 DWORD PTR [edx+76], ecx

; 121  :    new_close->area.parent = NULL;

  000c2	8b 45 f4	 mov	 eax, DWORD PTR _new_close$[ebp]
  000c5	c7 40 3c 00 00
	00 00		 mov	 DWORD PTR [eax+60], 0

; 122  :    new_close->area.child = NULL;

  000cc	8b 45 f4	 mov	 eax, DWORD PTR _new_close$[ebp]
  000cf	c7 40 40 00 00
	00 00		 mov	 DWORD PTR [eax+64], 0

; 123  :    new_close->area.next = NULL;

  000d6	8b 45 f4	 mov	 eax, DWORD PTR _new_close$[ebp]
  000d9	c7 40 44 00 00
	00 00		 mov	 DWORD PTR [eax+68], 0

; 124  :    new_close->area.prev = NULL;

  000e0	8b 45 f4	 mov	 eax, DWORD PTR _new_close$[ebp]
  000e3	c7 40 48 00 00
	00 00		 mov	 DWORD PTR [eax+72], 0

; 125  : 
; 126  :    new_close->area.state = 0;

  000ea	8b 45 f4	 mov	 eax, DWORD PTR _new_close$[ebp]
  000ed	8b 48 4c	 mov	 ecx, DWORD PTR [eax+76]
  000f0	83 e1 e7	 and	 ecx, -25		; ffffffe7H
  000f3	8b 55 f4	 mov	 edx, DWORD PTR _new_close$[ebp]
  000f6	89 4a 4c	 mov	 DWORD PTR [edx+76], ecx

; 127  : 
; 128  :    ////////////////////////////////////////
; 129  :    //
; 130  :    // OVERWRITE DEFAULTS WITH GIVEN ATTRIBUTES
; 131  :    //
; 132  :    ////////////////////////////////////////
; 133  : 
; 134  :    set_ui_object_attributes (obj, pargs);

  000f9	8b 45 10	 mov	 eax, DWORD PTR _pargs$[ebp]
  000fc	50		 push	 eax
  000fd	8b 4d 08	 mov	 ecx, DWORD PTR _obj$[ebp]
  00100	51		 push	 ecx
  00101	e8 00 00 00 00	 call	 ?set_ui_object_attributes@@YGXPAUUI_OBJECT@@PAD@Z ; set_ui_object_attributes

; 135  : 
; 136  : 	if (!new_close->area.parent)

  00106	8b 45 f4	 mov	 eax, DWORD PTR _new_close$[ebp]
  00109	83 78 3c 00	 cmp	 DWORD PTR [eax+60], 0
  0010d	75 0d		 jne	 SHORT $LN2@create_clo

; 137  : 	{
; 138  : 
; 139  : 		debug_fatal ("ERROR: Close_box MUST have a parent");

  0010f	68 00 00 00 00	 push	 OFFSET ??_C@_0CE@FGGPOOMI@ERROR?3?5Close_box?5MUST?5have?5a?5pa@
  00114	e8 00 00 00 00	 call	 ?debug_fatal@@YAXPBDZZ	; debug_fatal
  00119	83 c4 04	 add	 esp, 4
$LN2@create_clo:

; 140  : 	}
; 141  : 
; 142  : 	// set close box position relative to parent
; 143  : 	
; 144  : 	px_size = get_ui_object_x_size (new_close->area.parent);

  0011c	8b 45 f4	 mov	 eax, DWORD PTR _new_close$[ebp]
  0011f	8b 48 3c	 mov	 ecx, DWORD PTR [eax+60]
  00122	51		 push	 ecx
  00123	8b 55 f4	 mov	 edx, DWORD PTR _new_close$[ebp]
  00126	8b 42 3c	 mov	 eax, DWORD PTR [edx+60]
  00129	8b 08		 mov	 ecx, DWORD PTR [eax]
  0012b	8b 14 8d 00 00
	00 00		 mov	 edx, DWORD PTR ?fn_get_ui_object_x_size@@3PAP6GMPAUUI_OBJECT@@@ZA[ecx*4]
  00132	ff d2		 call	 edx
  00134	d9 5d fc	 fstp	 DWORD PTR _px_size$[ebp]

; 145  : 	
; 146  : 	py_size = get_ui_object_y_size (new_close->area.parent);

  00137	8b 45 f4	 mov	 eax, DWORD PTR _new_close$[ebp]
  0013a	8b 48 3c	 mov	 ecx, DWORD PTR [eax+60]
  0013d	51		 push	 ecx
  0013e	8b 55 f4	 mov	 edx, DWORD PTR _new_close$[ebp]
  00141	8b 42 3c	 mov	 eax, DWORD PTR [edx+60]
  00144	8b 08		 mov	 ecx, DWORD PTR [eax]
  00146	8b 14 8d 00 00
	00 00		 mov	 edx, DWORD PTR ?fn_get_ui_object_y_size@@3PAP6GMPAUUI_OBJECT@@@ZA[ecx*4]
  0014d	ff d2		 call	 edx
  0014f	d9 5d f8	 fstp	 DWORD PTR _py_size$[ebp]

; 147  : 	
; 148  :   	new_close->area.x_start = px_size - new_close->area.x_size_start - 1;

  00152	8b 45 f4	 mov	 eax, DWORD PTR _new_close$[ebp]
  00155	f3 0f 10 45 fc	 movss	 xmm0, DWORD PTR _px_size$[ebp]
  0015a	f3 0f 5c 40 18	 subss	 xmm0, DWORD PTR [eax+24]
  0015f	f3 0f 5c 05 00
	00 00 00	 subss	 xmm0, DWORD PTR __real@3f800000
  00167	8b 4d f4	 mov	 ecx, DWORD PTR _new_close$[ebp]
  0016a	f3 0f 11 41 04	 movss	 DWORD PTR [ecx+4], xmm0

; 149  : 
; 150  :   	new_close->area.y_start = 1;

  0016f	8b 45 f4	 mov	 eax, DWORD PTR _new_close$[ebp]
  00172	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3f800000
  0017a	f3 0f 11 40 0c	 movss	 DWORD PTR [eax+12], xmm0

; 151  : 
; 152  :    ////////////////////////////////////////
; 153  :    //
; 154  :    // INTEGRATE INTO SYSTEM
; 155  :    //
; 156  :    ////////////////////////////////////////
; 157  : }

  0017f	5f		 pop	 edi
  00180	5e		 pop	 esi
  00181	5b		 pop	 ebx
  00182	8b e5		 mov	 esp, ebp
  00184	5d		 pop	 ebp
  00185	c2 0c 00	 ret	 12			; 0000000cH
?create_close_ui_object@@YGXPAUUI_OBJECT@@HPAD@Z ENDP	; create_close_ui_object
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\modules\userint2\ui_obj\close\cl_creat.c
;	COMDAT ?overload_close_ui_object_create_functions@@YGXH@Z
_TEXT	SEGMENT
_type$ = 8						; size = 4
?overload_close_ui_object_create_functions@@YGXH@Z PROC	; overload_close_ui_object_create_functions, COMDAT

; 164  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 165  : 
; 166  : 	fn_create_ui_object [type] = create_close_ui_object;

  00009	8b 45 08	 mov	 eax, DWORD PTR _type$[ebp]
  0000c	c7 04 85 00 00
	00 00 00 00 00
	00		 mov	 DWORD PTR ?fn_create_ui_object@@3PAP6GXPAUUI_OBJECT@@HPAD@ZA[eax*4], OFFSET ?create_close_ui_object@@YGXPAUUI_OBJECT@@HPAD@Z ; create_close_ui_object

; 167  : }

  00017	5f		 pop	 edi
  00018	5e		 pop	 esi
  00019	5b		 pop	 ebx
  0001a	8b e5		 mov	 esp, ebp
  0001c	5d		 pop	 ebp
  0001d	c2 04 00	 ret	 4
?overload_close_ui_object_create_functions@@YGXH@Z ENDP	; overload_close_ui_object_create_functions
_TEXT	ENDS
END
