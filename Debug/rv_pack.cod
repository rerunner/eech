; Listing generated by Microsoft (R) Optimizing Compiler Version 19.16.27045.0 

	TITLE	C:\Users\nhv90\Projects\eech\aphavoc\source\entity\mobile\vehicle\routed\rv_pack.c
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB MSVCRTD
INCLUDELIB OLDNAMES

PUBLIC	?overload_routed_vehicle_pack_functions@@YGXXZ	; overload_routed_vehicle_pack_functions
PUBLIC	?__LINE__Var@?0??pack_local_data@@YGXPAUENTITY@@W4PACK_MODES@@@Z@4JA ; `pack_local_data'::`1'::__LINE__Var
PUBLIC	??_C@_0FD@FBDJGPOE@c?3?2users?2nhv90?2projects?2eech?2ap@ ; `string'
PUBLIC	??_C@_0CH@MMFDPOBJ@?$CImode?5?$DO?$DN?50?$CJ?5?$CG?$CG?5?$CImode?5?$DM?5NUM_PACK@ ; `string'
PUBLIC	?__LINE__Var@?0??unpack_local_data@@YGXPAUENTITY@@W4ENTITY_TYPES@@W4PACK_MODES@@@Z@4JA ; `unpack_local_data'::`1'::__LINE__Var
PUBLIC	??_C@_0DG@CCPFLNFN@RV_PACK?3?5WARNING?5NO?5SUB?5ROUTE?5F@ ; `string'
PUBLIC	__real@0000000000000000
PUBLIC	__real@3f00002000400080
EXTRN	_memset:PROC
EXTRN	?process_assert@@YGXPBD0H@Z:PROC		; process_assert
EXTRN	?debug_log@@YAXPBDZZ:PROC			; debug_log
EXTRN	?malloc_fast_memory@@YGPAXI@Z:PROC		; malloc_fast_memory
EXTRN	?pack_entity_type@@YGXW4ENTITY_TYPES@@@Z:PROC	; pack_entity_type
EXTRN	?insert_local_entity_into_parents_child_list@@YGXPAUENTITY@@W4LIST_TYPES@@00@Z:PROC ; insert_local_entity_into_parents_child_list
EXTRN	?pack_attitude_matrix@@YGXPAUENTITY@@QAY02M@Z:PROC ; pack_attitude_matrix
EXTRN	?unpack_attitude_matrix@@YGXPAUENTITY@@QAY02M@Z:PROC ; unpack_attitude_matrix
EXTRN	?pack_float_value@@YGXPAUENTITY@@W4FLOAT_TYPES@@M@Z:PROC ; pack_float_value
EXTRN	?unpack_float_value@@YGMPAUENTITY@@W4FLOAT_TYPES@@@Z:PROC ; unpack_float_value
EXTRN	?pack_int_value@@YGXPAUENTITY@@W4INT_TYPES@@H@Z:PROC ; pack_int_value
EXTRN	?unpack_int_value@@YGHPAUENTITY@@W4INT_TYPES@@@Z:PROC ; unpack_int_value
EXTRN	?pack_vec3d@@YGXPAUENTITY@@W4VEC3D_TYPES@@PAUVEC3D@@@Z:PROC ; pack_vec3d
EXTRN	?unpack_vec3d@@YGXPAUENTITY@@W4VEC3D_TYPES@@PAUVEC3D@@@Z:PROC ; unpack_vec3d
EXTRN	?get_free_entity@@YGPAUENTITY@@H@Z:PROC		; get_free_entity
EXTRN	?unpack_entity_safe_index@@YGHXZ:PROC		; unpack_entity_safe_index
EXTRN	?pack_entity_safe_ptr@@YGXPAUENTITY@@@Z:PROC	; pack_entity_safe_ptr
EXTRN	?pack_mobile_local_sound_effects@@YGHPAUENTITY@@W4PACK_MODES@@@Z:PROC ; pack_mobile_local_sound_effects
EXTRN	?unpack_mobile_local_sound_effects@@YGHPAUENTITY@@W4PACK_MODES@@@Z:PROC ; unpack_mobile_local_sound_effects
EXTRN	?set_vehicle_headlight_state@@YGXPAUENTITY@@H@Z:PROC ; set_vehicle_headlight_state
EXTRN	?pack_vehicle_data@@YGXPAUENTITY@@PAUVEHICLE@@W4PACK_MODES@@@Z:PROC ; pack_vehicle_data
EXTRN	?unpack_vehicle_data@@YGXPAUENTITY@@PAUVEHICLE@@W4PACK_MODES@@@Z:PROC ; unpack_vehicle_data
EXTRN	?set_initial_rotation_angle_of_routed_vehicle_wheels@@YGHPAUOBJECT_3D_INSTANCE@@@Z:PROC ; set_initial_rotation_angle_of_routed_vehicle_wheels
EXTRN	?set_routed_vehicle_id_number@@YGXPAUENTITY@@@Z:PROC ; set_routed_vehicle_id_number
EXTRN	?pack_routed_vehicle_meta_smoke_lists@@YGXPAUENTITY@@W4PACK_MODES@@@Z:PROC ; pack_routed_vehicle_meta_smoke_lists
EXTRN	?unpack_routed_vehicle_meta_smoke_lists@@YGXPAUENTITY@@W4PACK_MODES@@@Z:PROC ; unpack_routed_vehicle_meta_smoke_lists
EXTRN	?get_local_force_entity@@YGPAUENTITY@@W4ENTITY_SIDES@@@Z:PROC ; get_local_force_entity
EXTRN	?add_to_force_info@@YGXPAUENTITY@@0@Z:PROC	; add_to_force_info
EXTRN	?get_local_sector_entity@@YGPAUENTITY@@PAUVEC3D@@@Z:PROC ; get_local_sector_entity
EXTRN	?get_road_sub_route@@YGPAUNODE_LINK_DATA@@HHPAHPAU1@@Z:PROC ; get_road_sub_route
EXTRN	?random_number_seed@@3HA:DWORD			; random_number_seed
EXTRN	?null_entity_pointer_message@@3PBDB:DWORD	; null_entity_pointer_message
EXTRN	?fn_pack_local_entity_data@@3PAP6GXPAUENTITY@@W4PACK_MODES@@@ZA:BYTE ; fn_pack_local_entity_data
EXTRN	?fn_unpack_local_entity_data@@3PAP6GXPAUENTITY@@W4ENTITY_TYPES@@W4PACK_MODES@@@ZA:BYTE ; fn_unpack_local_entity_data
EXTRN	?fn_set_local_entity_attitude_matrix@@3PAP6GXPAUENTITY@@QAY02M@ZA:BYTE ; fn_set_local_entity_attitude_matrix
EXTRN	?overload_invalid_float_type_message@@3PBDB:DWORD ; overload_invalid_float_type_message
EXTRN	?fn_set_local_entity_float_value@@3PAY0KP@P6GXPAUENTITY@@W4FLOAT_TYPES@@M@ZA:BYTE ; fn_set_local_entity_float_value
EXTRN	?overload_invalid_int_type_message@@3PBDB:DWORD	; overload_invalid_int_type_message
EXTRN	?fn_set_local_entity_int_value@@3PAY0BBH@P6GXPAUENTITY@@W4INT_TYPES@@H@ZA:BYTE ; fn_set_local_entity_int_value
EXTRN	?overload_invalid_vec3d_type_message@@3PBDB:DWORD ; overload_invalid_vec3d_type_message
EXTRN	?fn_set_local_entity_vec3d@@3PAY0BI@P6GXPAUENTITY@@W4VEC3D_TYPES@@PAUVEC3D@@@ZA:BYTE ; fn_set_local_entity_vec3d
EXTRN	?camera_entity@@3PAUENTITY@@A:DWORD		; camera_entity
EXTRN	?update_entity@@3PAUENTITY@@A:DWORD		; update_entity
EXTRN	__fltused:DWORD
;	COMDAT __real@3f00002000400080
CONST	SEGMENT
__real@3f00002000400080 DQ 03f00002000400080r	; 3.05185e-05
CONST	ENDS
;	COMDAT __real@0000000000000000
CONST	SEGMENT
__real@0000000000000000 DQ 00000000000000000r	; 0
CONST	ENDS
;	COMDAT ??_C@_0DG@CCPFLNFN@RV_PACK?3?5WARNING?5NO?5SUB?5ROUTE?5F@
CONST	SEGMENT
??_C@_0DG@CCPFLNFN@RV_PACK?3?5WARNING?5NO?5SUB?5ROUTE?5F@ DB 'RV_PACK: WA'
	DB	'RNING NO SUB ROUTE FOUND BETWEEN %d AND %d', 00H ; `string'
CONST	ENDS
;	COMDAT ?__LINE__Var@?0??unpack_local_data@@YGXPAUENTITY@@W4ENTITY_TYPES@@W4PACK_MODES@@@Z@4JA
_DATA	SEGMENT
?__LINE__Var@?0??unpack_local_data@@YGXPAUENTITY@@W4ENTITY_TYPES@@W4PACK_MODES@@@Z@4JA DD 0c2H ; `unpack_local_data'::`1'::__LINE__Var
_DATA	ENDS
;	COMDAT ??_C@_0CH@MMFDPOBJ@?$CImode?5?$DO?$DN?50?$CJ?5?$CG?$CG?5?$CImode?5?$DM?5NUM_PACK@
CONST	SEGMENT
??_C@_0CH@MMFDPOBJ@?$CImode?5?$DO?$DN?50?$CJ?5?$CG?$CG?5?$CImode?5?$DM?5NUM_PACK@ DB '('
	DB	'mode >= 0) && (mode < NUM_PACK_MODES)', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_0FD@FBDJGPOE@c?3?2users?2nhv90?2projects?2eech?2ap@
CONST	SEGMENT
??_C@_0FD@FBDJGPOE@c?3?2users?2nhv90?2projects?2eech?2ap@ DB 'c:\users\nh'
	DB	'v90\projects\eech\aphavoc\source\entity\mobile\vehicle\routed'
	DB	'\rv_pack.c', 00H				; `string'
CONST	ENDS
;	COMDAT ?__LINE__Var@?0??pack_local_data@@YGXPAUENTITY@@W4PACK_MODES@@@Z@4JA
_DATA	SEGMENT
?__LINE__Var@?0??pack_local_data@@YGXPAUENTITY@@W4PACK_MODES@@@Z@4JA DD 052H ; `pack_local_data'::`1'::__LINE__Var
_DATA	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\entity\mobile\vehicle\routed\rv_pack.c
;	COMDAT ?unpack_local_data@@YGXPAUENTITY@@W4ENTITY_TYPES@@W4PACK_MODES@@@Z
_TEXT	SEGMENT
tv322 = -136						; size = 4
tv302 = -136						; size = 4
tv271 = -136						; size = 4
tv314 = -132						; size = 4
tv294 = -132						; size = 4
tv283 = -132						; size = 4
tv263 = -132						; size = 4
tv162 = -132						; size = 4
tv152 = -132						; size = 4
tv143 = -132						; size = 4
tv70 = -132						; size = 4
_sub_waypoint_count$1 = -64				; size = 4
_attitude$2 = -60					; size = 36
_position$3 = -24					; size = 12
_route_data$4 = -12					; size = 4
_raw$5 = -8						; size = 4
_index$6 = -4						; size = 4
_en$ = 8						; size = 4
_type$ = 12						; size = 4
_mode$ = 16						; size = 4
?unpack_local_data@@YGXPAUENTITY@@W4ENTITY_TYPES@@W4PACK_MODES@@@Z PROC ; unpack_local_data, COMDAT

; 194  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec 88 00 00
	00		 sub	 esp, 136		; 00000088H
  00009	53		 push	 ebx
  0000a	56		 push	 esi
  0000b	57		 push	 edi

; 195  : 	ASSERT ((mode >= 0) && (mode < NUM_PACK_MODES));

  0000c	83 7d 10 00	 cmp	 DWORD PTR _mode$[ebp], 0
  00010	7c 06		 jl	 SHORT $LN5@unpack_loc
  00012	83 7d 10 04	 cmp	 DWORD PTR _mode$[ebp], 4
  00016	7c 18		 jl	 SHORT $LN4@unpack_loc
$LN5@unpack_loc:
  00018	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??unpack_local_data@@YGXPAUENTITY@@W4ENTITY_TYPES@@W4PACK_MODES@@@Z@4JA
  0001d	83 c0 01	 add	 eax, 1
  00020	50		 push	 eax
  00021	68 00 00 00 00	 push	 OFFSET ??_C@_0FD@FBDJGPOE@c?3?2users?2nhv90?2projects?2eech?2ap@
  00026	68 00 00 00 00	 push	 OFFSET ??_C@_0CH@MMFDPOBJ@?$CImode?5?$DO?$DN?50?$CJ?5?$CG?$CG?5?$CImode?5?$DM?5NUM_PACK@
  0002b	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN4@unpack_loc:

; 196  : 
; 197  : 	switch (mode)

  00030	8b 45 10	 mov	 eax, DWORD PTR _mode$[ebp]
  00033	89 85 7c ff ff
	ff		 mov	 DWORD PTR tv70[ebp], eax
  00039	83 bd 7c ff ff
	ff 00		 cmp	 DWORD PTR tv70[ebp], 0
  00040	0f 8c 70 05 00
	00		 jl	 $LN2@unpack_loc
  00046	83 bd 7c ff ff
	ff 01		 cmp	 DWORD PTR tv70[ebp], 1
  0004d	7e 12		 jle	 SHORT $LN6@unpack_loc
  0004f	83 bd 7c ff ff
	ff 03		 cmp	 DWORD PTR tv70[ebp], 3
  00056	0f 84 0c 03 00
	00		 je	 $LN14@unpack_loc
  0005c	e9 55 05 00 00	 jmp	 $LN2@unpack_loc
$LN6@unpack_loc:

; 198  : 	{
; 199  : 		////////////////////////////////////////
; 200  : 		case PACK_MODE_SERVER_SESSION:
; 201  : 		case PACK_MODE_CLIENT_SESSION:
; 202  : 		////////////////////////////////////////
; 203  : 		{
; 204  : 
; 205  : 			int
; 206  : 				index;
; 207  : 
; 208  : 			routed_vehicle
; 209  : 				*raw;
; 210  : 
; 211  : 			node_link_data
; 212  : 				*route_data;
; 213  : 
; 214  : 			//
; 215  : 			// create entity
; 216  : 			//
; 217  : 
; 218  : 			index = unpack_entity_safe_index ();

  00061	e8 00 00 00 00	 call	 ?unpack_entity_safe_index@@YGHXZ ; unpack_entity_safe_index
  00066	89 45 fc	 mov	 DWORD PTR _index$6[ebp], eax

; 219  : 
; 220  : 			en = get_free_entity (index);

  00069	8b 45 fc	 mov	 eax, DWORD PTR _index$6[ebp]
  0006c	50		 push	 eax
  0006d	e8 00 00 00 00	 call	 ?get_free_entity@@YGPAUENTITY@@H@Z ; get_free_entity
  00072	89 45 08	 mov	 DWORD PTR _en$[ebp], eax

; 221  : 
; 222  : 			set_local_entity_type (en, type);

  00075	8b 45 08	 mov	 eax, DWORD PTR _en$[ebp]
  00078	8b 4d 0c	 mov	 ecx, DWORD PTR _type$[ebp]
  0007b	89 08		 mov	 DWORD PTR [eax], ecx

; 223  : 
; 224  : 			raw = (routed_vehicle *) malloc_fast_mem (sizeof (routed_vehicle));

  0007d	68 84 01 00 00	 push	 388			; 00000184H
  00082	e8 00 00 00 00	 call	 ?malloc_fast_memory@@YGPAXI@Z ; malloc_fast_memory
  00087	89 45 f8	 mov	 DWORD PTR _raw$5[ebp], eax

; 225  : 
; 226  : 			set_local_entity_data (en, raw);

  0008a	8b 45 08	 mov	 eax, DWORD PTR _en$[ebp]
  0008d	8b 4d f8	 mov	 ecx, DWORD PTR _raw$5[ebp]
  00090	89 48 04	 mov	 DWORD PTR [eax+4], ecx

; 227  : 
; 228  : 			memset (raw, 0, sizeof (routed_vehicle));

  00093	68 84 01 00 00	 push	 388			; 00000184H
  00098	6a 00		 push	 0
  0009a	8b 45 f8	 mov	 eax, DWORD PTR _raw$5[ebp]
  0009d	50		 push	 eax
  0009e	e8 00 00 00 00	 call	 _memset
  000a3	83 c4 0c	 add	 esp, 12			; 0000000cH

; 229  : 
; 230  : 			//
; 231  : 			// unpack vehicle data (in exactly the same order as the data was packed)
; 232  : 			//
; 233  : 
; 234  : 			unpack_vehicle_data (en, &raw->vh, mode);

  000a6	8b 45 10	 mov	 eax, DWORD PTR _mode$[ebp]
  000a9	50		 push	 eax
  000aa	8b 4d f8	 mov	 ecx, DWORD PTR _raw$5[ebp]
  000ad	51		 push	 ecx
  000ae	8b 55 08	 mov	 edx, DWORD PTR _en$[ebp]
  000b1	52		 push	 edx
  000b2	e8 00 00 00 00	 call	 ?unpack_vehicle_data@@YGXPAUENTITY@@PAUVEHICLE@@W4PACK_MODES@@@Z ; unpack_vehicle_data

; 235  : 
; 236  : 			if (unpack_int_value (en, INT_TYPE_VALID))

  000b7	68 ef 00 00 00	 push	 239			; 000000efH
  000bc	8b 45 08	 mov	 eax, DWORD PTR _en$[ebp]
  000bf	50		 push	 eax
  000c0	e8 00 00 00 00	 call	 ?unpack_int_value@@YGHPAUENTITY@@W4INT_TYPES@@@Z ; unpack_int_value
  000c5	85 c0		 test	 eax, eax
  000c7	74 1b		 je	 SHORT $LN7@unpack_loc

; 237  : 			{
; 238  : 
; 239  : 				raw->vh.mob.velocity = 0.0;

  000c9	8b 45 f8	 mov	 eax, DWORD PTR _raw$5[ebp]
  000cc	0f 57 c0	 xorps	 xmm0, xmm0
  000cf	f3 0f 11 40 40	 movss	 DWORD PTR [eax+64], xmm0

; 240  : 
; 241  : 				raw->desired_velocity = 0.0;

  000d4	8b 45 f8	 mov	 eax, DWORD PTR _raw$5[ebp]
  000d7	0f 57 c0	 xorps	 xmm0, xmm0
  000da	f3 0f 11 80 78
	01 00 00	 movss	 DWORD PTR [eax+376], xmm0

; 242  : 			}
; 243  : 			else

  000e2	eb 25		 jmp	 SHORT $LN8@unpack_loc
$LN7@unpack_loc:

; 244  : 			{
; 245  : 
; 246  : 				raw->vh.mob.velocity = unpack_float_value (en, FLOAT_TYPE_LOW_VELOCITY);

  000e4	6a 41		 push	 65			; 00000041H
  000e6	8b 45 08	 mov	 eax, DWORD PTR _en$[ebp]
  000e9	50		 push	 eax
  000ea	e8 00 00 00 00	 call	 ?unpack_float_value@@YGMPAUENTITY@@W4FLOAT_TYPES@@@Z ; unpack_float_value
  000ef	8b 4d f8	 mov	 ecx, DWORD PTR _raw$5[ebp]
  000f2	d9 59 40	 fstp	 DWORD PTR [ecx+64]

; 247  : 
; 248  : 				raw->desired_velocity = unpack_float_value (en, FLOAT_TYPE_DESIRED_VELOCITY);

  000f5	6a 1e		 push	 30			; 0000001eH
  000f7	8b 45 08	 mov	 eax, DWORD PTR _en$[ebp]
  000fa	50		 push	 eax
  000fb	e8 00 00 00 00	 call	 ?unpack_float_value@@YGMPAUENTITY@@W4FLOAT_TYPES@@@Z ; unpack_float_value
  00100	8b 4d f8	 mov	 ecx, DWORD PTR _raw$5[ebp]
  00103	d9 99 78 01 00
	00		 fstp	 DWORD PTR [ecx+376]
$LN8@unpack_loc:

; 249  : 			}
; 250  : 
; 251  : 			//
; 252  : 			// unpack routed data
; 253  : 			//
; 254  : 
; 255  : 			if (unpack_int_value (en, INT_TYPE_VALID))

  00109	68 ef 00 00 00	 push	 239			; 000000efH
  0010e	8b 45 08	 mov	 eax, DWORD PTR _en$[ebp]
  00111	50		 push	 eax
  00112	e8 00 00 00 00	 call	 ?unpack_int_value@@YGHPAUENTITY@@W4INT_TYPES@@@Z ; unpack_int_value
  00117	85 c0		 test	 eax, eax
  00119	0f 84 b1 00 00
	00		 je	 $LN9@unpack_loc

; 256  : 			{
; 257  : 	
; 258  : 				raw->sub_waypoint_count = unpack_int_value (en, INT_TYPE_SUB_WAYPOINT_COUNT);

  0011f	68 cf 00 00 00	 push	 207			; 000000cfH
  00124	8b 45 08	 mov	 eax, DWORD PTR _en$[ebp]
  00127	50		 push	 eax
  00128	e8 00 00 00 00	 call	 ?unpack_int_value@@YGHPAUENTITY@@W4INT_TYPES@@@Z ; unpack_int_value
  0012d	89 85 7c ff ff
	ff		 mov	 DWORD PTR tv143[ebp], eax
  00133	8b 8d 7c ff ff
	ff		 mov	 ecx, DWORD PTR tv143[ebp]
  00139	81 e1 ff 03 00
	00		 and	 ecx, 1023		; 000003ffH
  0013f	8b 55 f8	 mov	 edx, DWORD PTR _raw$5[ebp]
  00142	8b 82 7c 01 00
	00		 mov	 eax, DWORD PTR [edx+380]
  00148	25 00 fc ff ff	 and	 eax, -1024		; fffffc00H
  0014d	0b c1		 or	 eax, ecx
  0014f	8b 4d f8	 mov	 ecx, DWORD PTR _raw$5[ebp]
  00152	89 81 7c 01 00
	00		 mov	 DWORD PTR [ecx+380], eax

; 259  : 	
; 260  : 				raw->waypoint_next_index = unpack_int_value (en, INT_TYPE_WAYPOINT_NEXT_INDEX);

  00158	68 00 01 00 00	 push	 256			; 00000100H
  0015d	8b 45 08	 mov	 eax, DWORD PTR _en$[ebp]
  00160	50		 push	 eax
  00161	e8 00 00 00 00	 call	 ?unpack_int_value@@YGHPAUENTITY@@W4INT_TYPES@@@Z ; unpack_int_value
  00166	89 85 7c ff ff
	ff		 mov	 DWORD PTR tv152[ebp], eax
  0016c	8b 8d 7c ff ff
	ff		 mov	 ecx, DWORD PTR tv152[ebp]
  00172	81 e1 ff 03 00
	00		 and	 ecx, 1023		; 000003ffH
  00178	c1 e1 0a	 shl	 ecx, 10			; 0000000aH
  0017b	8b 55 f8	 mov	 edx, DWORD PTR _raw$5[ebp]
  0017e	8b 82 7c 01 00
	00		 mov	 eax, DWORD PTR [edx+380]
  00184	25 ff 03 f0 ff	 and	 eax, -1047553		; fff003ffH
  00189	0b c1		 or	 eax, ecx
  0018b	8b 4d f8	 mov	 ecx, DWORD PTR _raw$5[ebp]
  0018e	89 81 7c 01 00
	00		 mov	 DWORD PTR [ecx+380], eax

; 261  : 	
; 262  : 				raw->waypoint_this_index = unpack_int_value (en, INT_TYPE_WAYPOINT_THIS_INDEX);

  00194	68 01 01 00 00	 push	 257			; 00000101H
  00199	8b 45 08	 mov	 eax, DWORD PTR _en$[ebp]
  0019c	50		 push	 eax
  0019d	e8 00 00 00 00	 call	 ?unpack_int_value@@YGHPAUENTITY@@W4INT_TYPES@@@Z ; unpack_int_value
  001a2	89 85 7c ff ff
	ff		 mov	 DWORD PTR tv162[ebp], eax
  001a8	8b 8d 7c ff ff
	ff		 mov	 ecx, DWORD PTR tv162[ebp]
  001ae	81 e1 ff 03 00
	00		 and	 ecx, 1023		; 000003ffH
  001b4	c1 e1 14	 shl	 ecx, 20			; 00000014H
  001b7	8b 55 f8	 mov	 edx, DWORD PTR _raw$5[ebp]
  001ba	8b 82 7c 01 00
	00		 mov	 eax, DWORD PTR [edx+380]
  001c0	25 ff ff 0f c0	 and	 eax, -1072693249	; c00fffffH
  001c5	0b c1		 or	 eax, ecx
  001c7	8b 4d f8	 mov	 ecx, DWORD PTR _raw$5[ebp]
  001ca	89 81 7c 01 00
	00		 mov	 DWORD PTR [ecx+380], eax
$LN9@unpack_loc:

; 263  : 			}
; 264  : 
; 265  : 			//
; 266  : 			// turn lights on if necessary
; 267  : 			//
; 268  : 
; 269  : 			set_vehicle_headlight_state (en, raw->vh.lights_on);

  001d0	8b 45 f8	 mov	 eax, DWORD PTR _raw$5[ebp]
  001d3	8b 88 24 01 00
	00		 mov	 ecx, DWORD PTR [eax+292]
  001d9	c1 e9 0e	 shr	 ecx, 14			; 0000000eH
  001dc	83 e1 01	 and	 ecx, 1
  001df	51		 push	 ecx
  001e0	8b 55 08	 mov	 edx, DWORD PTR _en$[ebp]
  001e3	52		 push	 edx
  001e4	e8 00 00 00 00	 call	 ?set_vehicle_headlight_state@@YGXPAUENTITY@@H@Z ; set_vehicle_headlight_state

; 270  : 
; 271  : 			//
; 272  : 			// setup waypoint route pointer
; 273  : 			//
; 274  : 
; 275  : 			#if DEBUG_MODULE
; 276  : 
; 277  : 			debug_log ("ROUTED ENTITY PACK: client setting up waypoint list pointer");
; 278  : 
; 279  : 			#endif
; 280  : 
; 281  : 			route_data = get_road_sub_route (raw->waypoint_this_index, raw->waypoint_next_index, &index, NULL);

  001e9	6a 00		 push	 0
  001eb	8d 45 fc	 lea	 eax, DWORD PTR _index$6[ebp]
  001ee	50		 push	 eax
  001ef	8b 4d f8	 mov	 ecx, DWORD PTR _raw$5[ebp]
  001f2	8b 91 7c 01 00
	00		 mov	 edx, DWORD PTR [ecx+380]
  001f8	c1 ea 0a	 shr	 edx, 10			; 0000000aH
  001fb	81 e2 ff 03 00
	00		 and	 edx, 1023		; 000003ffH
  00201	52		 push	 edx
  00202	8b 45 f8	 mov	 eax, DWORD PTR _raw$5[ebp]
  00205	8b 88 7c 01 00
	00		 mov	 ecx, DWORD PTR [eax+380]
  0020b	c1 e9 14	 shr	 ecx, 20			; 00000014H
  0020e	81 e1 ff 03 00
	00		 and	 ecx, 1023		; 000003ffH
  00214	51		 push	 ecx
  00215	e8 00 00 00 00	 call	 ?get_road_sub_route@@YGPAUNODE_LINK_DATA@@HHPAHPAU1@@Z ; get_road_sub_route
  0021a	89 45 f4	 mov	 DWORD PTR _route_data$4[ebp], eax

; 282  : 
; 283  : 			if ((route_data) && (route_data->link_positions))

  0021d	83 7d f4 00	 cmp	 DWORD PTR _route_data$4[ebp], 0
  00221	74 17		 je	 SHORT $LN10@unpack_loc
  00223	8b 45 f4	 mov	 eax, DWORD PTR _route_data$4[ebp]
  00226	83 78 0c 00	 cmp	 DWORD PTR [eax+12], 0
  0022a	74 0e		 je	 SHORT $LN10@unpack_loc

; 284  : 			{
; 285  : 
; 286  : 				raw->sub_route = route_data;

  0022c	8b 45 f8	 mov	 eax, DWORD PTR _raw$5[ebp]
  0022f	8b 4d f4	 mov	 ecx, DWORD PTR _route_data$4[ebp]
  00232	89 88 80 01 00
	00		 mov	 DWORD PTR [eax+384], ecx

; 287  : 			}
; 288  : 			else

  00238	eb 59		 jmp	 SHORT $LN12@unpack_loc
$LN10@unpack_loc:

; 289  : 			{
; 290  : 
; 291  : 				if ((raw->waypoint_this_index + raw->waypoint_next_index) != 0)

  0023a	8b 45 f8	 mov	 eax, DWORD PTR _raw$5[ebp]
  0023d	8b 88 7c 01 00
	00		 mov	 ecx, DWORD PTR [eax+380]
  00243	c1 e9 14	 shr	 ecx, 20			; 00000014H
  00246	81 e1 ff 03 00
	00		 and	 ecx, 1023		; 000003ffH
  0024c	8b 55 f8	 mov	 edx, DWORD PTR _raw$5[ebp]
  0024f	8b 82 7c 01 00
	00		 mov	 eax, DWORD PTR [edx+380]
  00255	c1 e8 0a	 shr	 eax, 10			; 0000000aH
  00258	25 ff 03 00 00	 and	 eax, 1023		; 000003ffH
  0025d	03 c8		 add	 ecx, eax
  0025f	74 32		 je	 SHORT $LN12@unpack_loc

; 292  : 				{
; 293  : 
; 294  : 					debug_log ("RV_PACK: WARNING NO SUB ROUTE FOUND BETWEEN %d AND %d", raw->waypoint_this_index, raw->waypoint_next_index);

  00261	8b 45 f8	 mov	 eax, DWORD PTR _raw$5[ebp]
  00264	8b 88 7c 01 00
	00		 mov	 ecx, DWORD PTR [eax+380]
  0026a	c1 e9 0a	 shr	 ecx, 10			; 0000000aH
  0026d	81 e1 ff 03 00
	00		 and	 ecx, 1023		; 000003ffH
  00273	51		 push	 ecx
  00274	8b 55 f8	 mov	 edx, DWORD PTR _raw$5[ebp]
  00277	8b 82 7c 01 00
	00		 mov	 eax, DWORD PTR [edx+380]
  0027d	c1 e8 14	 shr	 eax, 20			; 00000014H
  00280	25 ff 03 00 00	 and	 eax, 1023		; 000003ffH
  00285	50		 push	 eax
  00286	68 00 00 00 00	 push	 OFFSET ??_C@_0DG@CCPFLNFN@RV_PACK?3?5WARNING?5NO?5SUB?5ROUTE?5F@
  0028b	e8 00 00 00 00	 call	 ?debug_log@@YAXPBDZZ	; debug_log
  00290	83 c4 0c	 add	 esp, 12			; 0000000cH
$LN12@unpack_loc:

; 295  : 				}
; 296  : 			}
; 297  : 
; 298  : 			//
; 299  : 			// radar dish rotation (ok to use a random number as this is for visual effect only)
; 300  : 			//
; 301  : 
; 302  : 			raw->vh.radar_rotation_state = frand1 ();

  00293	69 05 00 00 00
	00 6d 4e c6 41	 imul	 eax, DWORD PTR ?random_number_seed@@3HA, 1103515245 ; random_number_seed
  0029d	05 39 30 00 00	 add	 eax, 12345		; 00003039H
  002a2	a3 00 00 00 00	 mov	 DWORD PTR ?random_number_seed@@3HA, eax ; random_number_seed
  002a7	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?random_number_seed@@3HA ; random_number_seed
  002ad	c1 f9 10	 sar	 ecx, 16			; 00000010H
  002b0	81 e1 ff 7f 00
	00		 and	 ecx, 32767		; 00007fffH
  002b6	f2 0f 2a c1	 cvtsi2sd xmm0, ecx
  002ba	f2 0f 59 05 00
	00 00 00	 mulsd	 xmm0, QWORD PTR __real@3f00002000400080
  002c2	f2 0f 5a c0	 cvtsd2ss xmm0, xmm0
  002c6	8b 55 f8	 mov	 edx, DWORD PTR _raw$5[ebp]
  002c9	f3 0f 11 82 f4
	00 00 00	 movss	 DWORD PTR [edx+244], xmm0

; 303  : 
; 304  : 			set_routed_vehicle_id_number (en);

  002d1	8b 45 08	 mov	 eax, DWORD PTR _en$[ebp]
  002d4	50		 push	 eax
  002d5	e8 00 00 00 00	 call	 ?set_routed_vehicle_id_number@@YGXPAUENTITY@@@Z ; set_routed_vehicle_id_number

; 305  : 
; 306  : 			set_initial_rotation_angle_of_routed_vehicle_wheels (raw->vh.inst3d);

  002da	8b 45 f8	 mov	 eax, DWORD PTR _raw$5[ebp]
  002dd	8b 88 84 00 00
	00		 mov	 ecx, DWORD PTR [eax+132]
  002e3	51		 push	 ecx
  002e4	e8 00 00 00 00	 call	 ?set_initial_rotation_angle_of_routed_vehicle_wheels@@YGHPAUOBJECT_3D_INSTANCE@@@Z ; set_initial_rotation_angle_of_routed_vehicle_wheels

; 307  : 
; 308  : 			//
; 309  : 			// link into system
; 310  : 			//
; 311  : 
; 312  : 			insert_local_entity_into_parents_child_list (en, LIST_TYPE_VIEW, get_camera_entity (), NULL);

  002e9	6a 00		 push	 0
  002eb	a1 00 00 00 00	 mov	 eax, DWORD PTR ?camera_entity@@3PAUENTITY@@A ; camera_entity
  002f0	50		 push	 eax
  002f1	6a 2a		 push	 42			; 0000002aH
  002f3	8b 4d 08	 mov	 ecx, DWORD PTR _en$[ebp]
  002f6	51		 push	 ecx
  002f7	e8 00 00 00 00	 call	 ?insert_local_entity_into_parents_child_list@@YGXPAUENTITY@@W4LIST_TYPES@@00@Z ; insert_local_entity_into_parents_child_list

; 313  : 
; 314  : 			insert_local_entity_into_parents_child_list (en, LIST_TYPE_SECTOR, get_local_sector_entity (&raw->vh.mob.position), NULL);

  002fc	6a 00		 push	 0
  002fe	8b 45 f8	 mov	 eax, DWORD PTR _raw$5[ebp]
  00301	83 c0 04	 add	 eax, 4
  00304	50		 push	 eax
  00305	e8 00 00 00 00	 call	 ?get_local_sector_entity@@YGPAUENTITY@@PAUVEC3D@@@Z ; get_local_sector_entity
  0030a	50		 push	 eax
  0030b	6a 21		 push	 33			; 00000021H
  0030d	8b 4d 08	 mov	 ecx, DWORD PTR _en$[ebp]
  00310	51		 push	 ecx
  00311	e8 00 00 00 00	 call	 ?insert_local_entity_into_parents_child_list@@YGXPAUENTITY@@W4LIST_TYPES@@00@Z ; insert_local_entity_into_parents_child_list

; 315  : 
; 316  : 			insert_local_entity_into_parents_child_list (en, LIST_TYPE_UPDATE, get_update_entity (), NULL);

  00316	6a 00		 push	 0
  00318	a1 00 00 00 00	 mov	 eax, DWORD PTR ?update_entity@@3PAUENTITY@@A ; update_entity
  0031d	50		 push	 eax
  0031e	6a 29		 push	 41			; 00000029H
  00320	8b 4d 08	 mov	 ecx, DWORD PTR _en$[ebp]
  00323	51		 push	 ecx
  00324	e8 00 00 00 00	 call	 ?insert_local_entity_into_parents_child_list@@YGXPAUENTITY@@W4LIST_TYPES@@00@Z ; insert_local_entity_into_parents_child_list

; 317  : 
; 318  : 			add_to_force_info (get_local_force_entity ((entity_sides) raw->vh.mob.side), en);

  00329	8b 45 08	 mov	 eax, DWORD PTR _en$[ebp]
  0032c	50		 push	 eax
  0032d	8b 4d f8	 mov	 ecx, DWORD PTR _raw$5[ebp]
  00330	8b 51 7c	 mov	 edx, DWORD PTR [ecx+124]
  00333	d1 ea		 shr	 edx, 1
  00335	83 e2 03	 and	 edx, 3
  00338	52		 push	 edx
  00339	e8 00 00 00 00	 call	 ?get_local_force_entity@@YGPAUENTITY@@W4ENTITY_SIDES@@@Z ; get_local_force_entity
  0033e	50		 push	 eax
  0033f	e8 00 00 00 00	 call	 ?add_to_force_info@@YGXPAUENTITY@@0@Z ; add_to_force_info

; 319  : 
; 320  : 			//
; 321  : 			// attached smoke lists must be unpacked after the entity is linked into the world
; 322  : 			//
; 323  : 
; 324  : 			unpack_routed_vehicle_meta_smoke_lists (en, mode);

  00344	8b 45 10	 mov	 eax, DWORD PTR _mode$[ebp]
  00347	50		 push	 eax
  00348	8b 4d 08	 mov	 ecx, DWORD PTR _en$[ebp]
  0034b	51		 push	 ecx
  0034c	e8 00 00 00 00	 call	 ?unpack_routed_vehicle_meta_smoke_lists@@YGXPAUENTITY@@W4PACK_MODES@@@Z ; unpack_routed_vehicle_meta_smoke_lists

; 325  : 	
; 326  : 			unpack_mobile_local_sound_effects (en, mode);

  00351	8b 45 10	 mov	 eax, DWORD PTR _mode$[ebp]
  00354	50		 push	 eax
  00355	8b 4d 08	 mov	 ecx, DWORD PTR _en$[ebp]
  00358	51		 push	 ecx
  00359	e8 00 00 00 00	 call	 ?unpack_mobile_local_sound_effects@@YGHPAUENTITY@@W4PACK_MODES@@@Z ; unpack_mobile_local_sound_effects

; 327  : 
; 328  : 			break;

  0035e	e9 53 02 00 00	 jmp	 $LN2@unpack_loc

; 329  : 		}
; 330  : 		////////////////////////////////////////
; 331  : 		case PACK_MODE_BROWSE_SESSION:
; 332  : 		////////////////////////////////////////
; 333  : 		{
; 334  : 
; 335  : 			break;

  00363	e9 4e 02 00 00	 jmp	 $LN2@unpack_loc
$LN14@unpack_loc:

; 336  : 		}
; 337  : 		////////////////////////////////////////
; 338  : 		case PACK_MODE_UPDATE_ENTITY:
; 339  : 		////////////////////////////////////////
; 340  : 		{
; 341  : 			//
; 342  : 			// always use access functions to set the data
; 343  : 			//
; 344  : 
; 345  : 			vec3d
; 346  : 				position;
; 347  : 
; 348  : 			matrix3x3
; 349  : 				attitude;
; 350  : 
; 351  : 			int
; 352  : 				sub_waypoint_count;
; 353  : 
; 354  : 			//
; 355  : 			// unpack all data (even if the echoed data is to be ignored)
; 356  : 			//
; 357  : 
; 358  : 			unpack_vec3d (en, VEC3D_TYPE_POSITION, &position);

  00368	8d 45 e8	 lea	 eax, DWORD PTR _position$3[ebp]
  0036b	50		 push	 eax
  0036c	6a 08		 push	 8
  0036e	8b 4d 08	 mov	 ecx, DWORD PTR _en$[ebp]
  00371	51		 push	 ecx
  00372	e8 00 00 00 00	 call	 ?unpack_vec3d@@YGXPAUENTITY@@W4VEC3D_TYPES@@PAUVEC3D@@@Z ; unpack_vec3d

; 359  : 
; 360  : 			unpack_attitude_matrix (en, attitude);

  00377	8d 45 c4	 lea	 eax, DWORD PTR _attitude$2[ebp]
  0037a	50		 push	 eax
  0037b	8b 4d 08	 mov	 ecx, DWORD PTR _en$[ebp]
  0037e	51		 push	 ecx
  0037f	e8 00 00 00 00	 call	 ?unpack_attitude_matrix@@YGXPAUENTITY@@QAY02M@Z ; unpack_attitude_matrix

; 361  : 
; 362  : 			sub_waypoint_count = unpack_int_value (en, INT_TYPE_SUB_WAYPOINT_COUNT);

  00384	68 cf 00 00 00	 push	 207			; 000000cfH
  00389	8b 45 08	 mov	 eax, DWORD PTR _en$[ebp]
  0038c	50		 push	 eax
  0038d	e8 00 00 00 00	 call	 ?unpack_int_value@@YGHPAUENTITY@@W4INT_TYPES@@@Z ; unpack_int_value
  00392	89 45 c0	 mov	 DWORD PTR _sub_waypoint_count$1[ebp], eax

; 363  : 
; 364  : 			set_local_entity_vec3d (en, VEC3D_TYPE_POSITION, &position);

  00395	83 7d 08 00	 cmp	 DWORD PTR _en$[ebp], 0
  00399	74 0d		 je	 SHORT $LN16@unpack_loc
  0039b	8b 45 08	 mov	 eax, DWORD PTR _en$[ebp]
  0039e	8b 08		 mov	 ecx, DWORD PTR [eax]
  003a0	89 8d 7c ff ff
	ff		 mov	 DWORD PTR tv263[ebp], ecx
  003a6	eb 27		 jmp	 SHORT $LN17@unpack_loc
$LN16@unpack_loc:
  003a8	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??unpack_local_data@@YGXPAUENTITY@@W4ENTITY_TYPES@@W4PACK_MODES@@@Z@4JA
  003ae	81 c2 aa 00 00
	00		 add	 edx, 170		; 000000aaH
  003b4	52		 push	 edx
  003b5	68 00 00 00 00	 push	 OFFSET ??_C@_0FD@FBDJGPOE@c?3?2users?2nhv90?2projects?2eech?2ap@
  003ba	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  003bf	50		 push	 eax
  003c0	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  003c5	c7 85 7c ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv263[ebp], 0
$LN17@unpack_loc:
  003cf	b9 01 00 00 00	 mov	 ecx, 1
  003d4	85 c9		 test	 ecx, ecx
  003d6	74 0c		 je	 SHORT $LN18@unpack_loc
  003d8	c7 85 78 ff ff
	ff 08 00 00 00	 mov	 DWORD PTR tv271[ebp], 8
  003e2	eb 27		 jmp	 SHORT $LN19@unpack_loc
$LN18@unpack_loc:
  003e4	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??unpack_local_data@@YGXPAUENTITY@@W4ENTITY_TYPES@@W4PACK_MODES@@@Z@4JA
  003ea	81 c2 aa 00 00
	00		 add	 edx, 170		; 000000aaH
  003f0	52		 push	 edx
  003f1	68 00 00 00 00	 push	 OFFSET ??_C@_0FD@FBDJGPOE@c?3?2users?2nhv90?2projects?2eech?2ap@
  003f6	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_vec3d_type_message@@3PBDB ; overload_invalid_vec3d_type_message
  003fb	50		 push	 eax
  003fc	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00401	c7 85 78 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv271[ebp], 0
$LN19@unpack_loc:
  0040b	8d 4d e8	 lea	 ecx, DWORD PTR _position$3[ebp]
  0040e	51		 push	 ecx
  0040f	6a 08		 push	 8
  00411	8b 55 08	 mov	 edx, DWORD PTR _en$[ebp]
  00414	52		 push	 edx
  00415	6b 85 7c ff ff
	ff 60		 imul	 eax, DWORD PTR tv263[ebp], 96
  0041c	8b 8d 78 ff ff
	ff		 mov	 ecx, DWORD PTR tv271[ebp]
  00422	8b 94 88 00 00
	00 00		 mov	 edx, DWORD PTR ?fn_set_local_entity_vec3d@@3PAY0BI@P6GXPAUENTITY@@W4VEC3D_TYPES@@PAUVEC3D@@@ZA[eax+ecx*4]
  00429	ff d2		 call	 edx

; 365  : 
; 366  : 			set_local_entity_attitude_matrix (en, attitude);

  0042b	83 7d 08 00	 cmp	 DWORD PTR _en$[ebp], 0
  0042f	74 0d		 je	 SHORT $LN20@unpack_loc
  00431	8b 45 08	 mov	 eax, DWORD PTR _en$[ebp]
  00434	8b 08		 mov	 ecx, DWORD PTR [eax]
  00436	89 8d 7c ff ff
	ff		 mov	 DWORD PTR tv283[ebp], ecx
  0043c	eb 27		 jmp	 SHORT $LN21@unpack_loc
$LN20@unpack_loc:
  0043e	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??unpack_local_data@@YGXPAUENTITY@@W4ENTITY_TYPES@@W4PACK_MODES@@@Z@4JA
  00444	81 c2 ac 00 00
	00		 add	 edx, 172		; 000000acH
  0044a	52		 push	 edx
  0044b	68 00 00 00 00	 push	 OFFSET ??_C@_0FD@FBDJGPOE@c?3?2users?2nhv90?2projects?2eech?2ap@
  00450	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  00455	50		 push	 eax
  00456	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  0045b	c7 85 7c ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv283[ebp], 0
$LN21@unpack_loc:
  00465	8d 4d c4	 lea	 ecx, DWORD PTR _attitude$2[ebp]
  00468	51		 push	 ecx
  00469	8b 55 08	 mov	 edx, DWORD PTR _en$[ebp]
  0046c	52		 push	 edx
  0046d	8b 85 7c ff ff
	ff		 mov	 eax, DWORD PTR tv283[ebp]
  00473	8b 0c 85 00 00
	00 00		 mov	 ecx, DWORD PTR ?fn_set_local_entity_attitude_matrix@@3PAP6GXPAUENTITY@@QAY02M@ZA[eax*4]
  0047a	ff d1		 call	 ecx

; 367  : 
; 368  : 			set_local_entity_int_value (en, INT_TYPE_SUB_WAYPOINT_COUNT, sub_waypoint_count);

  0047c	83 7d 08 00	 cmp	 DWORD PTR _en$[ebp], 0
  00480	74 0d		 je	 SHORT $LN22@unpack_loc
  00482	8b 45 08	 mov	 eax, DWORD PTR _en$[ebp]
  00485	8b 08		 mov	 ecx, DWORD PTR [eax]
  00487	89 8d 7c ff ff
	ff		 mov	 DWORD PTR tv294[ebp], ecx
  0048d	eb 27		 jmp	 SHORT $LN23@unpack_loc
$LN22@unpack_loc:
  0048f	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??unpack_local_data@@YGXPAUENTITY@@W4ENTITY_TYPES@@W4PACK_MODES@@@Z@4JA
  00495	81 c2 ae 00 00
	00		 add	 edx, 174		; 000000aeH
  0049b	52		 push	 edx
  0049c	68 00 00 00 00	 push	 OFFSET ??_C@_0FD@FBDJGPOE@c?3?2users?2nhv90?2projects?2eech?2ap@
  004a1	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  004a6	50		 push	 eax
  004a7	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  004ac	c7 85 7c ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv294[ebp], 0
$LN23@unpack_loc:
  004b6	b9 01 00 00 00	 mov	 ecx, 1
  004bb	85 c9		 test	 ecx, ecx
  004bd	74 0c		 je	 SHORT $LN24@unpack_loc
  004bf	c7 85 78 ff ff
	ff cf 00 00 00	 mov	 DWORD PTR tv302[ebp], 207 ; 000000cfH
  004c9	eb 27		 jmp	 SHORT $LN25@unpack_loc
$LN24@unpack_loc:
  004cb	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??unpack_local_data@@YGXPAUENTITY@@W4ENTITY_TYPES@@W4PACK_MODES@@@Z@4JA
  004d1	81 c2 ae 00 00
	00		 add	 edx, 174		; 000000aeH
  004d7	52		 push	 edx
  004d8	68 00 00 00 00	 push	 OFFSET ??_C@_0FD@FBDJGPOE@c?3?2users?2nhv90?2projects?2eech?2ap@
  004dd	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_int_type_message@@3PBDB ; overload_invalid_int_type_message
  004e2	50		 push	 eax
  004e3	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  004e8	c7 85 78 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv302[ebp], 0
$LN25@unpack_loc:
  004f2	8b 4d c0	 mov	 ecx, DWORD PTR _sub_waypoint_count$1[ebp]
  004f5	51		 push	 ecx
  004f6	68 cf 00 00 00	 push	 207			; 000000cfH
  004fb	8b 55 08	 mov	 edx, DWORD PTR _en$[ebp]
  004fe	52		 push	 edx
  004ff	69 85 7c ff ff
	ff 5c 04 00 00	 imul	 eax, DWORD PTR tv294[ebp], 1116
  00509	8b 8d 78 ff ff
	ff		 mov	 ecx, DWORD PTR tv302[ebp]
  0050f	8b 94 88 00 00
	00 00		 mov	 edx, DWORD PTR ?fn_set_local_entity_int_value@@3PAY0BBH@P6GXPAUENTITY@@W4INT_TYPES@@H@ZA[eax+ecx*4]
  00516	ff d2		 call	 edx

; 369  : 
; 370  : 			// Vehicle is moving so sleep must equal 0
; 371  : 			set_local_entity_float_value (en, FLOAT_TYPE_SLEEP, 0.0);

  00518	83 7d 08 00	 cmp	 DWORD PTR _en$[ebp], 0
  0051c	74 0d		 je	 SHORT $LN26@unpack_loc
  0051e	8b 45 08	 mov	 eax, DWORD PTR _en$[ebp]
  00521	8b 08		 mov	 ecx, DWORD PTR [eax]
  00523	89 8d 7c ff ff
	ff		 mov	 DWORD PTR tv314[ebp], ecx
  00529	eb 27		 jmp	 SHORT $LN27@unpack_loc
$LN26@unpack_loc:
  0052b	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??unpack_local_data@@YGXPAUENTITY@@W4ENTITY_TYPES@@W4PACK_MODES@@@Z@4JA
  00531	81 c2 b1 00 00
	00		 add	 edx, 177		; 000000b1H
  00537	52		 push	 edx
  00538	68 00 00 00 00	 push	 OFFSET ??_C@_0FD@FBDJGPOE@c?3?2users?2nhv90?2projects?2eech?2ap@
  0053d	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  00542	50		 push	 eax
  00543	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00548	c7 85 7c ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv314[ebp], 0
$LN27@unpack_loc:
  00552	b9 01 00 00 00	 mov	 ecx, 1
  00557	85 c9		 test	 ecx, ecx
  00559	74 0c		 je	 SHORT $LN28@unpack_loc
  0055b	c7 85 78 ff ff
	ff 75 00 00 00	 mov	 DWORD PTR tv322[ebp], 117 ; 00000075H
  00565	eb 27		 jmp	 SHORT $LN29@unpack_loc
$LN28@unpack_loc:
  00567	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??unpack_local_data@@YGXPAUENTITY@@W4ENTITY_TYPES@@W4PACK_MODES@@@Z@4JA
  0056d	81 c2 b1 00 00
	00		 add	 edx, 177		; 000000b1H
  00573	52		 push	 edx
  00574	68 00 00 00 00	 push	 OFFSET ??_C@_0FD@FBDJGPOE@c?3?2users?2nhv90?2projects?2eech?2ap@
  00579	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_float_type_message@@3PBDB ; overload_invalid_float_type_message
  0057e	50		 push	 eax
  0057f	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00584	c7 85 78 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv322[ebp], 0
$LN29@unpack_loc:
  0058e	51		 push	 ecx
  0058f	0f 57 c0	 xorps	 xmm0, xmm0
  00592	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00597	6a 75		 push	 117			; 00000075H
  00599	8b 4d 08	 mov	 ecx, DWORD PTR _en$[ebp]
  0059c	51		 push	 ecx
  0059d	69 95 7c ff ff
	ff bc 02 00 00	 imul	 edx, DWORD PTR tv314[ebp], 700
  005a7	8b 85 78 ff ff
	ff		 mov	 eax, DWORD PTR tv322[ebp]
  005ad	8b 8c 82 00 00
	00 00		 mov	 ecx, DWORD PTR ?fn_set_local_entity_float_value@@3PAY0KP@P6GXPAUENTITY@@W4FLOAT_TYPES@@M@ZA[edx+eax*4]
  005b4	ff d1		 call	 ecx
$LN2@unpack_loc:

; 372  : 
; 373  : 			break;
; 374  : 		}
; 375  : 	}
; 376  : }

  005b6	5f		 pop	 edi
  005b7	5e		 pop	 esi
  005b8	5b		 pop	 ebx
  005b9	8b e5		 mov	 esp, ebp
  005bb	5d		 pop	 ebp
  005bc	c2 0c 00	 ret	 12			; 0000000cH
?unpack_local_data@@YGXPAUENTITY@@W4ENTITY_TYPES@@W4PACK_MODES@@@Z ENDP ; unpack_local_data
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\entity\mobile\vehicle\routed\rv_pack.c
;	COMDAT ?pack_local_data@@YGXPAUENTITY@@W4PACK_MODES@@@Z
_TEXT	SEGMENT
tv78 = -76						; size = 4
tv70 = -76						; size = 4
_raw$1 = -8						; size = 4
_raw$2 = -4						; size = 4
_en$ = 8						; size = 4
_mode$ = 12						; size = 4
?pack_local_data@@YGXPAUENTITY@@W4PACK_MODES@@@Z PROC	; pack_local_data, COMDAT

; 82   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 4c	 sub	 esp, 76			; 0000004cH
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 83   : 	ASSERT ((mode >= 0) && (mode < NUM_PACK_MODES));

  00009	83 7d 0c 00	 cmp	 DWORD PTR _mode$[ebp], 0
  0000d	7c 06		 jl	 SHORT $LN5@pack_local
  0000f	83 7d 0c 04	 cmp	 DWORD PTR _mode$[ebp], 4
  00013	7c 18		 jl	 SHORT $LN4@pack_local
$LN5@pack_local:
  00015	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??pack_local_data@@YGXPAUENTITY@@W4PACK_MODES@@@Z@4JA
  0001a	83 c0 01	 add	 eax, 1
  0001d	50		 push	 eax
  0001e	68 00 00 00 00	 push	 OFFSET ??_C@_0FD@FBDJGPOE@c?3?2users?2nhv90?2projects?2eech?2ap@
  00023	68 00 00 00 00	 push	 OFFSET ??_C@_0CH@MMFDPOBJ@?$CImode?5?$DO?$DN?50?$CJ?5?$CG?$CG?5?$CImode?5?$DM?5NUM_PACK@
  00028	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN4@pack_local:

; 84   : 
; 85   : 	switch (mode)

  0002d	8b 45 0c	 mov	 eax, DWORD PTR _mode$[ebp]
  00030	89 45 b4	 mov	 DWORD PTR tv70[ebp], eax
  00033	83 7d b4 00	 cmp	 DWORD PTR tv70[ebp], 0
  00037	0f 8c 1a 02 00
	00		 jl	 $LN2@pack_local
  0003d	83 7d b4 01	 cmp	 DWORD PTR tv70[ebp], 1
  00041	7e 0f		 jle	 SHORT $LN6@pack_local
  00043	83 7d b4 03	 cmp	 DWORD PTR tv70[ebp], 3
  00047	0f 84 c1 01 00
	00		 je	 $LN12@pack_local
  0004d	e9 05 02 00 00	 jmp	 $LN2@pack_local
$LN6@pack_local:

; 86   : 	{
; 87   : 		////////////////////////////////////////
; 88   : 		case PACK_MODE_SERVER_SESSION:
; 89   : 		case PACK_MODE_CLIENT_SESSION:
; 90   : 		////////////////////////////////////////
; 91   : 		{
; 92   : 			routed_vehicle
; 93   : 				*raw;
; 94   : 
; 95   : 			raw = (routed_vehicle *) get_local_entity_data (en);

  00052	8b 45 08	 mov	 eax, DWORD PTR _en$[ebp]
  00055	8b 48 04	 mov	 ecx, DWORD PTR [eax+4]
  00058	89 4d fc	 mov	 DWORD PTR _raw$2[ebp], ecx

; 96   : 
; 97   : 			pack_entity_type (get_local_entity_type (en));

  0005b	83 7d 08 00	 cmp	 DWORD PTR _en$[ebp], 0
  0005f	74 0a		 je	 SHORT $LN14@pack_local
  00061	8b 45 08	 mov	 eax, DWORD PTR _en$[ebp]
  00064	8b 08		 mov	 ecx, DWORD PTR [eax]
  00066	89 4d b4	 mov	 DWORD PTR tv78[ebp], ecx
  00069	eb 21		 jmp	 SHORT $LN15@pack_local
$LN14@pack_local:
  0006b	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??pack_local_data@@YGXPAUENTITY@@W4PACK_MODES@@@Z@4JA
  00071	83 c2 0f	 add	 edx, 15			; 0000000fH
  00074	52		 push	 edx
  00075	68 00 00 00 00	 push	 OFFSET ??_C@_0FD@FBDJGPOE@c?3?2users?2nhv90?2projects?2eech?2ap@
  0007a	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  0007f	50		 push	 eax
  00080	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00085	c7 45 b4 00 00
	00 00		 mov	 DWORD PTR tv78[ebp], 0
$LN15@pack_local:
  0008c	8b 4d b4	 mov	 ecx, DWORD PTR tv78[ebp]
  0008f	51		 push	 ecx
  00090	e8 00 00 00 00	 call	 ?pack_entity_type@@YGXW4ENTITY_TYPES@@@Z ; pack_entity_type

; 98   : 
; 99   : 			pack_entity_safe_ptr (en);

  00095	8b 45 08	 mov	 eax, DWORD PTR _en$[ebp]
  00098	50		 push	 eax
  00099	e8 00 00 00 00	 call	 ?pack_entity_safe_ptr@@YGXPAUENTITY@@@Z ; pack_entity_safe_ptr

; 100  : 
; 101  : 			//
; 102  : 			// pack vehicle data
; 103  : 			//
; 104  : 
; 105  : 			pack_vehicle_data (en, &raw->vh, mode);

  0009e	8b 45 0c	 mov	 eax, DWORD PTR _mode$[ebp]
  000a1	50		 push	 eax
  000a2	8b 4d fc	 mov	 ecx, DWORD PTR _raw$2[ebp]
  000a5	51		 push	 ecx
  000a6	8b 55 08	 mov	 edx, DWORD PTR _en$[ebp]
  000a9	52		 push	 edx
  000aa	e8 00 00 00 00	 call	 ?pack_vehicle_data@@YGXPAUENTITY@@PAUVEHICLE@@W4PACK_MODES@@@Z ; pack_vehicle_data

; 106  : 
; 107  : 			/////////////////////////////////////////////////////////////////
; 108  : 
; 109  : 			if ((raw->vh.mob.velocity == 0.0) && (raw->desired_velocity == 0.0))

  000af	8b 45 fc	 mov	 eax, DWORD PTR _raw$2[ebp]
  000b2	f3 0f 5a 40 40	 cvtss2sd xmm0, DWORD PTR [eax+64]
  000b7	66 0f 2e 05 00
	00 00 00	 ucomisd xmm0, QWORD PTR __real@0000000000000000
  000bf	9f		 lahf
  000c0	f6 c4 44	 test	 ah, 68			; 00000044H
  000c3	7a 2b		 jp	 SHORT $LN7@pack_local
  000c5	8b 45 fc	 mov	 eax, DWORD PTR _raw$2[ebp]
  000c8	f3 0f 5a 80 78
	01 00 00	 cvtss2sd xmm0, DWORD PTR [eax+376]
  000d0	66 0f 2e 05 00
	00 00 00	 ucomisd xmm0, QWORD PTR __real@0000000000000000
  000d8	9f		 lahf
  000d9	f6 c4 44	 test	 ah, 68			; 00000044H
  000dc	7a 12		 jp	 SHORT $LN7@pack_local

; 110  : 			{
; 111  : 
; 112  : 				pack_int_value (en, INT_TYPE_VALID, TRUE);

  000de	6a 01		 push	 1
  000e0	68 ef 00 00 00	 push	 239			; 000000efH
  000e5	8b 45 08	 mov	 eax, DWORD PTR _en$[ebp]
  000e8	50		 push	 eax
  000e9	e8 00 00 00 00	 call	 ?pack_int_value@@YGXPAUENTITY@@W4INT_TYPES@@H@Z ; pack_int_value

; 113  : 			}
; 114  : 			else

  000ee	eb 45		 jmp	 SHORT $LN8@pack_local
$LN7@pack_local:

; 115  : 			{
; 116  : 				
; 117  : 				pack_int_value (en, INT_TYPE_VALID, FALSE);

  000f0	6a 00		 push	 0
  000f2	68 ef 00 00 00	 push	 239			; 000000efH
  000f7	8b 45 08	 mov	 eax, DWORD PTR _en$[ebp]
  000fa	50		 push	 eax
  000fb	e8 00 00 00 00	 call	 ?pack_int_value@@YGXPAUENTITY@@W4INT_TYPES@@H@Z ; pack_int_value

; 118  : 
; 119  : 				pack_float_value (en, FLOAT_TYPE_LOW_VELOCITY, raw->vh.mob.velocity);

  00100	8b 45 fc	 mov	 eax, DWORD PTR _raw$2[ebp]
  00103	51		 push	 ecx
  00104	f3 0f 10 40 40	 movss	 xmm0, DWORD PTR [eax+64]
  00109	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  0010e	6a 41		 push	 65			; 00000041H
  00110	8b 4d 08	 mov	 ecx, DWORD PTR _en$[ebp]
  00113	51		 push	 ecx
  00114	e8 00 00 00 00	 call	 ?pack_float_value@@YGXPAUENTITY@@W4FLOAT_TYPES@@M@Z ; pack_float_value

; 120  : 
; 121  : 				pack_float_value (en, FLOAT_TYPE_DESIRED_VELOCITY, raw->desired_velocity);

  00119	8b 45 fc	 mov	 eax, DWORD PTR _raw$2[ebp]
  0011c	51		 push	 ecx
  0011d	f3 0f 10 80 78
	01 00 00	 movss	 xmm0, DWORD PTR [eax+376]
  00125	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  0012a	6a 1e		 push	 30			; 0000001eH
  0012c	8b 4d 08	 mov	 ecx, DWORD PTR _en$[ebp]
  0012f	51		 push	 ecx
  00130	e8 00 00 00 00	 call	 ?pack_float_value@@YGXPAUENTITY@@W4FLOAT_TYPES@@M@Z ; pack_float_value
$LN8@pack_local:

; 122  : 			}
; 123  : 
; 124  : 			/////////////////////////////////////////////////////////////////
; 125  : 
; 126  : 			//
; 127  : 			// pack routed data
; 128  : 			//
; 129  : 
; 130  : 			/////////////////////////////////////////////////////////////////
; 131  : 			if ((raw->sub_waypoint_count == 0) && (raw->waypoint_next_index == 0) && (raw->waypoint_this_index == 0))

  00135	8b 45 fc	 mov	 eax, DWORD PTR _raw$2[ebp]
  00138	8b 88 7c 01 00
	00		 mov	 ecx, DWORD PTR [eax+380]
  0013e	81 e1 ff 03 00
	00		 and	 ecx, 1023		; 000003ffH
  00144	75 3a		 jne	 SHORT $LN9@pack_local
  00146	8b 45 fc	 mov	 eax, DWORD PTR _raw$2[ebp]
  00149	8b 88 7c 01 00
	00		 mov	 ecx, DWORD PTR [eax+380]
  0014f	c1 e9 0a	 shr	 ecx, 10			; 0000000aH
  00152	81 e1 ff 03 00
	00		 and	 ecx, 1023		; 000003ffH
  00158	75 26		 jne	 SHORT $LN9@pack_local
  0015a	8b 45 fc	 mov	 eax, DWORD PTR _raw$2[ebp]
  0015d	8b 88 7c 01 00
	00		 mov	 ecx, DWORD PTR [eax+380]
  00163	c1 e9 14	 shr	 ecx, 20			; 00000014H
  00166	81 e1 ff 03 00
	00		 and	 ecx, 1023		; 000003ffH
  0016c	75 12		 jne	 SHORT $LN9@pack_local

; 132  : 			{
; 133  : 
; 134  : 				pack_int_value (en, INT_TYPE_VALID, FALSE);

  0016e	6a 00		 push	 0
  00170	68 ef 00 00 00	 push	 239			; 000000efH
  00175	8b 45 08	 mov	 eax, DWORD PTR _en$[ebp]
  00178	50		 push	 eax
  00179	e8 00 00 00 00	 call	 ?pack_int_value@@YGXPAUENTITY@@W4INT_TYPES@@H@Z ; pack_int_value

; 135  : 			}
; 136  : 			else

  0017e	eb 70		 jmp	 SHORT $LN10@pack_local
$LN9@pack_local:

; 137  : 			{
; 138  : 
; 139  : 				pack_int_value (en, INT_TYPE_VALID, TRUE);

  00180	6a 01		 push	 1
  00182	68 ef 00 00 00	 push	 239			; 000000efH
  00187	8b 45 08	 mov	 eax, DWORD PTR _en$[ebp]
  0018a	50		 push	 eax
  0018b	e8 00 00 00 00	 call	 ?pack_int_value@@YGXPAUENTITY@@W4INT_TYPES@@H@Z ; pack_int_value

; 140  : 	
; 141  : 				pack_int_value (en, INT_TYPE_SUB_WAYPOINT_COUNT, raw->sub_waypoint_count);

  00190	8b 45 fc	 mov	 eax, DWORD PTR _raw$2[ebp]
  00193	8b 88 7c 01 00
	00		 mov	 ecx, DWORD PTR [eax+380]
  00199	81 e1 ff 03 00
	00		 and	 ecx, 1023		; 000003ffH
  0019f	51		 push	 ecx
  001a0	68 cf 00 00 00	 push	 207			; 000000cfH
  001a5	8b 55 08	 mov	 edx, DWORD PTR _en$[ebp]
  001a8	52		 push	 edx
  001a9	e8 00 00 00 00	 call	 ?pack_int_value@@YGXPAUENTITY@@W4INT_TYPES@@H@Z ; pack_int_value

; 142  : 	
; 143  : 				pack_int_value (en, INT_TYPE_WAYPOINT_NEXT_INDEX, raw->waypoint_next_index);

  001ae	8b 45 fc	 mov	 eax, DWORD PTR _raw$2[ebp]
  001b1	8b 88 7c 01 00
	00		 mov	 ecx, DWORD PTR [eax+380]
  001b7	c1 e9 0a	 shr	 ecx, 10			; 0000000aH
  001ba	81 e1 ff 03 00
	00		 and	 ecx, 1023		; 000003ffH
  001c0	51		 push	 ecx
  001c1	68 00 01 00 00	 push	 256			; 00000100H
  001c6	8b 55 08	 mov	 edx, DWORD PTR _en$[ebp]
  001c9	52		 push	 edx
  001ca	e8 00 00 00 00	 call	 ?pack_int_value@@YGXPAUENTITY@@W4INT_TYPES@@H@Z ; pack_int_value

; 144  : 	
; 145  : 				pack_int_value (en, INT_TYPE_WAYPOINT_THIS_INDEX, raw->waypoint_this_index);

  001cf	8b 45 fc	 mov	 eax, DWORD PTR _raw$2[ebp]
  001d2	8b 88 7c 01 00
	00		 mov	 ecx, DWORD PTR [eax+380]
  001d8	c1 e9 14	 shr	 ecx, 20			; 00000014H
  001db	81 e1 ff 03 00
	00		 and	 ecx, 1023		; 000003ffH
  001e1	51		 push	 ecx
  001e2	68 01 01 00 00	 push	 257			; 00000101H
  001e7	8b 55 08	 mov	 edx, DWORD PTR _en$[ebp]
  001ea	52		 push	 edx
  001eb	e8 00 00 00 00	 call	 ?pack_int_value@@YGXPAUENTITY@@W4INT_TYPES@@H@Z ; pack_int_value
$LN10@pack_local:

; 146  : 			}
; 147  : 			/////////////////////////////////////////////////////////////////
; 148  : 
; 149  : 			// sub_waypoint_list reconstructed locally
; 150  : 
; 151  : 			//
; 152  : 			// spin through special effects link and pack up local only smoke trails
; 153  : 			//
; 154  : 
; 155  : 			pack_routed_vehicle_meta_smoke_lists (en, mode);

  001f0	8b 45 0c	 mov	 eax, DWORD PTR _mode$[ebp]
  001f3	50		 push	 eax
  001f4	8b 4d 08	 mov	 ecx, DWORD PTR _en$[ebp]
  001f7	51		 push	 ecx
  001f8	e8 00 00 00 00	 call	 ?pack_routed_vehicle_meta_smoke_lists@@YGXPAUENTITY@@W4PACK_MODES@@@Z ; pack_routed_vehicle_meta_smoke_lists

; 156  : 
; 157  : 			pack_mobile_local_sound_effects (en, mode);

  001fd	8b 45 0c	 mov	 eax, DWORD PTR _mode$[ebp]
  00200	50		 push	 eax
  00201	8b 4d 08	 mov	 ecx, DWORD PTR _en$[ebp]
  00204	51		 push	 ecx
  00205	e8 00 00 00 00	 call	 ?pack_mobile_local_sound_effects@@YGHPAUENTITY@@W4PACK_MODES@@@Z ; pack_mobile_local_sound_effects

; 158  : 
; 159  : 			break;

  0020a	eb 4b		 jmp	 SHORT $LN2@pack_local

; 160  : 		}
; 161  : 		////////////////////////////////////////
; 162  : 		case PACK_MODE_BROWSE_SESSION:
; 163  : 		////////////////////////////////////////
; 164  : 		{
; 165  : 
; 166  : 			break;

  0020c	eb 49		 jmp	 SHORT $LN2@pack_local
$LN12@pack_local:

; 167  : 		}
; 168  : 		////////////////////////////////////////
; 169  : 		case PACK_MODE_UPDATE_ENTITY:
; 170  : 		////////////////////////////////////////
; 171  : 		{
; 172  : 
; 173  : 			routed_vehicle
; 174  : 				*raw;
; 175  : 
; 176  : 			raw = (routed_vehicle *) get_local_entity_data (en);

  0020e	8b 45 08	 mov	 eax, DWORD PTR _en$[ebp]
  00211	8b 48 04	 mov	 ecx, DWORD PTR [eax+4]
  00214	89 4d f8	 mov	 DWORD PTR _raw$1[ebp], ecx

; 177  : 
; 178  : 			pack_vec3d (en, VEC3D_TYPE_POSITION, &raw->vh.mob.position);

  00217	8b 45 f8	 mov	 eax, DWORD PTR _raw$1[ebp]
  0021a	83 c0 04	 add	 eax, 4
  0021d	50		 push	 eax
  0021e	6a 08		 push	 8
  00220	8b 4d 08	 mov	 ecx, DWORD PTR _en$[ebp]
  00223	51		 push	 ecx
  00224	e8 00 00 00 00	 call	 ?pack_vec3d@@YGXPAUENTITY@@W4VEC3D_TYPES@@PAUVEC3D@@@Z ; pack_vec3d

; 179  : 
; 180  : 			pack_attitude_matrix (en, raw->vh.mob.attitude);

  00229	8b 45 f8	 mov	 eax, DWORD PTR _raw$1[ebp]
  0022c	83 c0 10	 add	 eax, 16			; 00000010H
  0022f	50		 push	 eax
  00230	8b 4d 08	 mov	 ecx, DWORD PTR _en$[ebp]
  00233	51		 push	 ecx
  00234	e8 00 00 00 00	 call	 ?pack_attitude_matrix@@YGXPAUENTITY@@QAY02M@Z ; pack_attitude_matrix

; 181  : 
; 182  : 			pack_int_value (en, INT_TYPE_SUB_WAYPOINT_COUNT, raw->sub_waypoint_count);

  00239	8b 45 f8	 mov	 eax, DWORD PTR _raw$1[ebp]
  0023c	8b 88 7c 01 00
	00		 mov	 ecx, DWORD PTR [eax+380]
  00242	81 e1 ff 03 00
	00		 and	 ecx, 1023		; 000003ffH
  00248	51		 push	 ecx
  00249	68 cf 00 00 00	 push	 207			; 000000cfH
  0024e	8b 55 08	 mov	 edx, DWORD PTR _en$[ebp]
  00251	52		 push	 edx
  00252	e8 00 00 00 00	 call	 ?pack_int_value@@YGXPAUENTITY@@W4INT_TYPES@@H@Z ; pack_int_value
$LN2@pack_local:

; 183  : 
; 184  : 			break;
; 185  : 		}
; 186  : 	}
; 187  : }

  00257	5f		 pop	 edi
  00258	5e		 pop	 esi
  00259	5b		 pop	 ebx
  0025a	8b e5		 mov	 esp, ebp
  0025c	5d		 pop	 ebp
  0025d	c2 08 00	 ret	 8
?pack_local_data@@YGXPAUENTITY@@W4PACK_MODES@@@Z ENDP	; pack_local_data
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\entity\mobile\vehicle\routed\rv_pack.c
;	COMDAT ?overload_routed_vehicle_pack_functions@@YGXXZ
_TEXT	SEGMENT
?overload_routed_vehicle_pack_functions@@YGXXZ PROC	; overload_routed_vehicle_pack_functions, COMDAT

; 383  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 384  : 	fn_pack_local_entity_data[ENTITY_TYPE_ROUTED_VEHICLE]		= pack_local_data;

  00009	b8 04 00 00 00	 mov	 eax, 4
  0000e	6b c8 17	 imul	 ecx, eax, 23
  00011	c7 81 00 00 00
	00 00 00 00 00	 mov	 DWORD PTR ?fn_pack_local_entity_data@@3PAP6GXPAUENTITY@@W4PACK_MODES@@@ZA[ecx], OFFSET ?pack_local_data@@YGXPAUENTITY@@W4PACK_MODES@@@Z ; pack_local_data

; 385  : 
; 386  : 	fn_unpack_local_entity_data[ENTITY_TYPE_ROUTED_VEHICLE]	= unpack_local_data;

  0001b	b8 04 00 00 00	 mov	 eax, 4
  00020	6b c8 17	 imul	 ecx, eax, 23
  00023	c7 81 00 00 00
	00 00 00 00 00	 mov	 DWORD PTR ?fn_unpack_local_entity_data@@3PAP6GXPAUENTITY@@W4ENTITY_TYPES@@W4PACK_MODES@@@ZA[ecx], OFFSET ?unpack_local_data@@YGXPAUENTITY@@W4ENTITY_TYPES@@W4PACK_MODES@@@Z ; unpack_local_data

; 387  : }

  0002d	5f		 pop	 edi
  0002e	5e		 pop	 esi
  0002f	5b		 pop	 ebx
  00030	8b e5		 mov	 esp, ebp
  00032	5d		 pop	 ebp
  00033	c3		 ret	 0
?overload_routed_vehicle_pack_functions@@YGXXZ ENDP	; overload_routed_vehicle_pack_functions
_TEXT	ENDS
END
