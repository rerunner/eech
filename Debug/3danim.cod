; Listing generated by Microsoft (R) Optimizing Compiler Version 19.16.27045.0 

	TITLE	C:\Users\nhv90\Projects\eech\modules\3d\3danim.c
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB MSVCRTD
INCLUDELIB OLDNAMES

PUBLIC	___@@_PchSym_@00@UfhvihUmseJAUkilqvxghUvvxsUwvyftUDwzmrnOlyq@4B2008FD98C1DD4
;	COMDAT ___@@_PchSym_@00@UfhvihUmseJAUkilqvxghUvvxsUwvyftUDwzmrnOlyq@4B2008FD98C1DD4
_BSS	SEGMENT
___@@_PchSym_@00@UfhvihUmseJAUkilqvxghUvvxsUwvyftUDwzmrnOlyq@4B2008FD98C1DD4 DD 01H DUP (?)
_BSS	ENDS
PUBLIC	?initialise_object_texture_animations@@YGXPAUOBJECT_3D_INSTANCE@@@Z ; initialise_object_texture_animations
PUBLIC	?set_texture_animation_frame_on_object@@YGHPAUOBJECT_3D_INSTANCE@@W4TEXTURE_ANIMATION_INDICES@@H@Z ; set_texture_animation_frame_on_object
PUBLIC	?advance_texture_animation_frame_on_object@@YGHPAUOBJECT_3D_INSTANCE@@W4TEXTURE_ANIMATION_INDICES@@@Z ; advance_texture_animation_frame_on_object
PUBLIC	?get_texture_animation_number_of_frames@@YGHW4TEXTURE_ANIMATION_INDICES@@@Z ; get_texture_animation_number_of_frames
PUBLIC	?get_texture_animation_texture_pointer@@YGPAUSCREEN@@W4TEXTURE_ANIMATION_INDICES@@H@Z ; get_texture_animation_texture_pointer
PUBLIC	?get_texture_map_pointer@@YGPAUSCREEN@@H@Z	; get_texture_map_pointer
PUBLIC	?__LINE__Var@?0??initialise_object_texture_animations@@YGXPAUOBJECT_3D_INSTANCE@@@Z@4JA ; `initialise_object_texture_animations'::`1'::__LINE__Var
PUBLIC	??_C@_0DB@OIBFGIKD@c?3?2users?2nhv90?2projects?2eech?2mo@ ; `string'
PUBLIC	??_C@_0L@HNGMIHEN@animations@			; `string'
PUBLIC	??_C@_07OKCKIPNN@indices@			; `string'
PUBLIC	??_C@_0DE@IIHAEAII@Setting?5an?5animation?5frame?5to?5a@ ; `string'
PUBLIC	??_C@_0DO@OGAMCFHA@Trying?5to?5set?5an?5animation?5fram@ ; `string'
PUBLIC	?__LINE__Var@?0??get_texture_animation_number_of_frames@@YGHW4TEXTURE_ANIMATION_INDICES@@@Z@4JA ; `get_texture_animation_number_of_frames'::`1'::__LINE__Var
PUBLIC	??_C@_0L@MKDLGBOI@index?5?$DO?$DN?50@		; `string'
PUBLIC	??_C@_0BL@CJBDKNGC@index?5?$DM?5TEXTURE_INDEX_LAST@ ; `string'
PUBLIC	?__LINE__Var@?0??get_texture_animation_texture_pointer@@YGPAUSCREEN@@W4TEXTURE_ANIMATION_INDICES@@H@Z@4JA ; `get_texture_animation_texture_pointer'::`1'::__LINE__Var
PUBLIC	??_C@_0CJ@CNPNDLOJ@Trying?5to?5get?5texture?5animation@ ; `string'
PUBLIC	??_C@_05MAJJAKPI@FALSE@				; `string'
PUBLIC	??_C@_0BP@JMIHKDDA@Trying?5to?5get?5texture?5index?5?$CFd@ ; `string'
PUBLIC	?__LINE__Var@?0??get_texture_map_pointer@@YGPAUSCREEN@@H@Z@4JA ; `get_texture_map_pointer'::`1'::__LINE__Var
EXTRN	?process_assert@@YGXPBD0H@Z:PROC		; process_assert
EXTRN	?debug_log@@YAXPBDZZ:PROC			; debug_log
EXTRN	?system_textures@@3PAPAUSCREEN@@A:BYTE		; system_textures
EXTRN	?objects_3d_scene_database@@3PAUOBJECT_3D_SCENE_DATABASE_ENTRY@@A:DWORD ; objects_3d_scene_database
EXTRN	?texture_animations@@3PAUTEXTURE_ANIMATION_INFORMATION@@A:DWORD ; texture_animations
;	COMDAT ?__LINE__Var@?0??get_texture_map_pointer@@YGPAUSCREEN@@H@Z@4JA
_DATA	SEGMENT
?__LINE__Var@?0??get_texture_map_pointer@@YGPAUSCREEN@@H@Z@4JA DD 0f4H ; `get_texture_map_pointer'::`1'::__LINE__Var
_DATA	ENDS
;	COMDAT ??_C@_0BP@JMIHKDDA@Trying?5to?5get?5texture?5index?5?$CFd@
CONST	SEGMENT
??_C@_0BP@JMIHKDDA@Trying?5to?5get?5texture?5index?5?$CFd@ DB 'Trying to '
	DB	'get texture index %d', 00H			; `string'
CONST	ENDS
;	COMDAT ??_C@_05MAJJAKPI@FALSE@
CONST	SEGMENT
??_C@_05MAJJAKPI@FALSE@ DB 'FALSE', 00H			; `string'
CONST	ENDS
;	COMDAT ??_C@_0CJ@CNPNDLOJ@Trying?5to?5get?5texture?5animation@
CONST	SEGMENT
??_C@_0CJ@CNPNDLOJ@Trying?5to?5get?5texture?5animation@ DB 'Trying to get'
	DB	' texture animation frame %d', 00H		; `string'
CONST	ENDS
;	COMDAT ?__LINE__Var@?0??get_texture_animation_texture_pointer@@YGPAUSCREEN@@W4TEXTURE_ANIMATION_INDICES@@H@Z@4JA
_DATA	SEGMENT
?__LINE__Var@?0??get_texture_animation_texture_pointer@@YGPAUSCREEN@@W4TEXTURE_ANIMATION_INDICES@@H@Z@4JA DD 0dcH ; `get_texture_animation_texture_pointer'::`1'::__LINE__Var
_DATA	ENDS
;	COMDAT ??_C@_0BL@CJBDKNGC@index?5?$DM?5TEXTURE_INDEX_LAST@
CONST	SEGMENT
??_C@_0BL@CJBDKNGC@index?5?$DM?5TEXTURE_INDEX_LAST@ DB 'index < TEXTURE_I'
	DB	'NDEX_LAST', 00H				; `string'
CONST	ENDS
;	COMDAT ??_C@_0L@MKDLGBOI@index?5?$DO?$DN?50@
CONST	SEGMENT
??_C@_0L@MKDLGBOI@index?5?$DO?$DN?50@ DB 'index >= 0', 00H ; `string'
CONST	ENDS
;	COMDAT ?__LINE__Var@?0??get_texture_animation_number_of_frames@@YGHW4TEXTURE_ANIMATION_INDICES@@@Z@4JA
_DATA	SEGMENT
?__LINE__Var@?0??get_texture_animation_number_of_frames@@YGHW4TEXTURE_ANIMATION_INDICES@@@Z@4JA DD 0ccH ; `get_texture_animation_number_of_frames'::`1'::__LINE__Var
_DATA	ENDS
;	COMDAT ??_C@_0DO@OGAMCFHA@Trying?5to?5set?5an?5animation?5fram@
CONST	SEGMENT
??_C@_0DO@OGAMCFHA@Trying?5to?5set?5an?5animation?5fram@ DB 'Trying to se'
	DB	't an animation frame outside the number of frames', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0DE@IIHAEAII@Setting?5an?5animation?5frame?5to?5a@
CONST	SEGMENT
??_C@_0DE@IIHAEAII@Setting?5an?5animation?5frame?5to?5a@ DB 'Setting an a'
	DB	'nimation frame to an invalid number: %d', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_07OKCKIPNN@indices@
CONST	SEGMENT
??_C@_07OKCKIPNN@indices@ DB 'indices', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_0L@HNGMIHEN@animations@
CONST	SEGMENT
??_C@_0L@HNGMIHEN@animations@ DB 'animations', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_0DB@OIBFGIKD@c?3?2users?2nhv90?2projects?2eech?2mo@
CONST	SEGMENT
??_C@_0DB@OIBFGIKD@c?3?2users?2nhv90?2projects?2eech?2mo@ DB 'c:\users\nh'
	DB	'v90\projects\eech\modules\3d\3danim.c', 00H	; `string'
CONST	ENDS
;	COMDAT ?__LINE__Var@?0??initialise_object_texture_animations@@YGXPAUOBJECT_3D_INSTANCE@@@Z@4JA
_DATA	SEGMENT
?__LINE__Var@?0??initialise_object_texture_animations@@YGXPAUOBJECT_3D_INSTANCE@@@Z@4JA DD 04aH ; `initialise_object_texture_animations'::`1'::__LINE__Var
_DATA	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\modules\3d\3danim.c
;	COMDAT ?get_texture_map_pointer@@YGPAUSCREEN@@H@Z
_TEXT	SEGMENT
_index$ = 8						; size = 4
?get_texture_map_pointer@@YGPAUSCREEN@@H@Z PROC		; get_texture_map_pointer, COMDAT

; 244  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 245  : 
; 246  : 
; 247  : 	ASSERT ( index >= 0 );

  00009	83 7d 08 00	 cmp	 DWORD PTR _index$[ebp], 0
  0000d	7d 18		 jge	 SHORT $LN2@get_textur
  0000f	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??get_texture_map_pointer@@YGPAUSCREEN@@H@Z@4JA
  00014	83 c0 03	 add	 eax, 3
  00017	50		 push	 eax
  00018	68 00 00 00 00	 push	 OFFSET ??_C@_0DB@OIBFGIKD@c?3?2users?2nhv90?2projects?2eech?2mo@
  0001d	68 00 00 00 00	 push	 OFFSET ??_C@_0L@MKDLGBOI@index?5?$DO?$DN?50@
  00022	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN2@get_textur:

; 248  : 	ASSERT ( index < TEXTURE_INDEX_LAST );

  00027	81 7d 08 0e 09
	00 00		 cmp	 DWORD PTR _index$[ebp], 2318 ; 0000090eH
  0002e	7c 18		 jl	 SHORT $LN3@get_textur
  00030	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??get_texture_map_pointer@@YGPAUSCREEN@@H@Z@4JA
  00035	83 c0 04	 add	 eax, 4
  00038	50		 push	 eax
  00039	68 00 00 00 00	 push	 OFFSET ??_C@_0DB@OIBFGIKD@c?3?2users?2nhv90?2projects?2eech?2mo@
  0003e	68 00 00 00 00	 push	 OFFSET ??_C@_0BL@CJBDKNGC@index?5?$DM?5TEXTURE_INDEX_LAST@
  00043	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN3@get_textur:

; 249  : 
; 250  : 	return ( system_textures[index] );

  00048	8b 45 08	 mov	 eax, DWORD PTR _index$[ebp]
  0004b	8b 04 85 00 00
	00 00		 mov	 eax, DWORD PTR ?system_textures@@3PAPAUSCREEN@@A[eax*4]

; 251  : }

  00052	5f		 pop	 edi
  00053	5e		 pop	 esi
  00054	5b		 pop	 ebx
  00055	8b e5		 mov	 esp, ebp
  00057	5d		 pop	 ebp
  00058	c2 04 00	 ret	 4
?get_texture_map_pointer@@YGPAUSCREEN@@H@Z ENDP		; get_texture_map_pointer
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\modules\3d\3danim.c
;	COMDAT ?get_texture_animation_texture_pointer@@YGPAUSCREEN@@W4TEXTURE_ANIMATION_INDICES@@H@Z
_TEXT	SEGMENT
_index$ = 8						; size = 4
_frame$ = 12						; size = 4
?get_texture_animation_texture_pointer@@YGPAUSCREEN@@W4TEXTURE_ANIMATION_INDICES@@H@Z PROC ; get_texture_animation_texture_pointer, COMDAT

; 220  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 221  : 
; 222  : 	if ( ( frame < 0 ) || ( frame >= texture_animations[index].number_of_frames ) )

  00009	83 7d 0c 00	 cmp	 DWORD PTR _frame$[ebp], 0
  0000d	7c 12		 jl	 SHORT $LN3@get_textur
  0000f	6b 45 08 0c	 imul	 eax, DWORD PTR _index$[ebp], 12
  00013	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?texture_animations@@3PAUTEXTURE_ANIMATION_INFORMATION@@A ; texture_animations
  00019	8b 55 0c	 mov	 edx, DWORD PTR _frame$[ebp]
  0001c	3b 14 01	 cmp	 edx, DWORD PTR [ecx+eax]
  0001f	7c 39		 jl	 SHORT $LN2@get_textur
$LN3@get_textur:

; 223  : 	{
; 224  : 
; 225  : 		debug_log ( "Trying to get texture animation frame %d", frame );

  00021	8b 45 0c	 mov	 eax, DWORD PTR _frame$[ebp]
  00024	50		 push	 eax
  00025	68 00 00 00 00	 push	 OFFSET ??_C@_0CJ@CNPNDLOJ@Trying?5to?5get?5texture?5animation@
  0002a	e8 00 00 00 00	 call	 ?debug_log@@YAXPBDZZ	; debug_log
  0002f	83 c4 08	 add	 esp, 8

; 226  : 		frame = 0;

  00032	c7 45 0c 00 00
	00 00		 mov	 DWORD PTR _frame$[ebp], 0

; 227  : 		ASSERT(FALSE);

  00039	b8 01 00 00 00	 mov	 eax, 1
  0003e	85 c0		 test	 eax, eax
  00040	74 18		 je	 SHORT $LN2@get_textur
  00042	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??get_texture_animation_texture_pointer@@YGPAUSCREEN@@W4TEXTURE_ANIMATION_INDICES@@H@Z@4JA
  00047	83 c0 07	 add	 eax, 7
  0004a	50		 push	 eax
  0004b	68 00 00 00 00	 push	 OFFSET ??_C@_0DB@OIBFGIKD@c?3?2users?2nhv90?2projects?2eech?2mo@
  00050	68 00 00 00 00	 push	 OFFSET ??_C@_05MAJJAKPI@FALSE@
  00055	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN2@get_textur:

; 228  : 	}
; 229  : 	if (index >= TEXTURE_INDEX_LAST)

  0005a	81 7d 08 0e 09
	00 00		 cmp	 DWORD PTR _index$[ebp], 2318 ; 0000090eH
  00061	7c 39		 jl	 SHORT $LN5@get_textur

; 230  : 	{
; 231  : 		debug_log ( "Trying to get texture index %d", index );

  00063	8b 45 08	 mov	 eax, DWORD PTR _index$[ebp]
  00066	50		 push	 eax
  00067	68 00 00 00 00	 push	 OFFSET ??_C@_0BP@JMIHKDDA@Trying?5to?5get?5texture?5index?5?$CFd@
  0006c	e8 00 00 00 00	 call	 ?debug_log@@YAXPBDZZ	; debug_log
  00071	83 c4 08	 add	 esp, 8

; 232  : 		index = (texture_animation_indices)0;

  00074	c7 45 08 00 00
	00 00		 mov	 DWORD PTR _index$[ebp], 0

; 233  : 		ASSERT(FALSE);

  0007b	b8 01 00 00 00	 mov	 eax, 1
  00080	85 c0		 test	 eax, eax
  00082	74 18		 je	 SHORT $LN5@get_textur
  00084	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??get_texture_animation_texture_pointer@@YGPAUSCREEN@@W4TEXTURE_ANIMATION_INDICES@@H@Z@4JA
  00089	83 c0 0d	 add	 eax, 13			; 0000000dH
  0008c	50		 push	 eax
  0008d	68 00 00 00 00	 push	 OFFSET ??_C@_0DB@OIBFGIKD@c?3?2users?2nhv90?2projects?2eech?2mo@
  00092	68 00 00 00 00	 push	 OFFSET ??_C@_05MAJJAKPI@FALSE@
  00097	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN5@get_textur:

; 234  : 	}
; 235  : 
; 236  : 	return ( system_textures[ texture_animations[index].texture_indices[frame] ] );

  0009c	6b 45 08 0c	 imul	 eax, DWORD PTR _index$[ebp], 12
  000a0	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?texture_animations@@3PAUTEXTURE_ANIMATION_INFORMATION@@A ; texture_animations
  000a6	8b 54 01 08	 mov	 edx, DWORD PTR [ecx+eax+8]
  000aa	8b 45 0c	 mov	 eax, DWORD PTR _frame$[ebp]
  000ad	8b 0c 82	 mov	 ecx, DWORD PTR [edx+eax*4]
  000b0	8b 04 8d 00 00
	00 00		 mov	 eax, DWORD PTR ?system_textures@@3PAPAUSCREEN@@A[ecx*4]

; 237  : }

  000b7	5f		 pop	 edi
  000b8	5e		 pop	 esi
  000b9	5b		 pop	 ebx
  000ba	8b e5		 mov	 esp, ebp
  000bc	5d		 pop	 ebp
  000bd	c2 08 00	 ret	 8
?get_texture_animation_texture_pointer@@YGPAUSCREEN@@W4TEXTURE_ANIMATION_INDICES@@H@Z ENDP ; get_texture_animation_texture_pointer
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\modules\3d\3danim.c
;	COMDAT ?get_texture_animation_number_of_frames@@YGHW4TEXTURE_ANIMATION_INDICES@@@Z
_TEXT	SEGMENT
_index$ = 8						; size = 4
?get_texture_animation_number_of_frames@@YGHW4TEXTURE_ANIMATION_INDICES@@@Z PROC ; get_texture_animation_number_of_frames, COMDAT

; 204  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 205  : 	ASSERT ( index >= 0 );

  00009	83 7d 08 00	 cmp	 DWORD PTR _index$[ebp], 0
  0000d	7d 18		 jge	 SHORT $LN2@get_textur
  0000f	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??get_texture_animation_number_of_frames@@YGHW4TEXTURE_ANIMATION_INDICES@@@Z@4JA
  00014	83 c0 01	 add	 eax, 1
  00017	50		 push	 eax
  00018	68 00 00 00 00	 push	 OFFSET ??_C@_0DB@OIBFGIKD@c?3?2users?2nhv90?2projects?2eech?2mo@
  0001d	68 00 00 00 00	 push	 OFFSET ??_C@_0L@MKDLGBOI@index?5?$DO?$DN?50@
  00022	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN2@get_textur:

; 206  : 	ASSERT ( index < TEXTURE_INDEX_LAST );

  00027	81 7d 08 0e 09
	00 00		 cmp	 DWORD PTR _index$[ebp], 2318 ; 0000090eH
  0002e	7c 18		 jl	 SHORT $LN3@get_textur
  00030	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??get_texture_animation_number_of_frames@@YGHW4TEXTURE_ANIMATION_INDICES@@@Z@4JA
  00035	83 c0 02	 add	 eax, 2
  00038	50		 push	 eax
  00039	68 00 00 00 00	 push	 OFFSET ??_C@_0DB@OIBFGIKD@c?3?2users?2nhv90?2projects?2eech?2mo@
  0003e	68 00 00 00 00	 push	 OFFSET ??_C@_0BL@CJBDKNGC@index?5?$DM?5TEXTURE_INDEX_LAST@
  00043	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN3@get_textur:

; 207  : 	//-- Werewolf: Sanity check to fix a crash 4 Apr 2003
; 208  : 	if (index < 0 || index >= TEXTURE_INDEX_LAST)

  00048	83 7d 08 00	 cmp	 DWORD PTR _index$[ebp], 0
  0004c	7c 09		 jl	 SHORT $LN6@get_textur
  0004e	81 7d 08 0e 09
	00 00		 cmp	 DWORD PTR _index$[ebp], 2318 ; 0000090eH
  00055	7c 06		 jl	 SHORT $LN4@get_textur
$LN6@get_textur:

; 209  : 		return ( 0 );

  00057	33 c0		 xor	 eax, eax
  00059	eb 0f		 jmp	 SHORT $LN1@get_textur

; 210  : 	else

  0005b	eb 0d		 jmp	 SHORT $LN1@get_textur
$LN4@get_textur:

; 211  : 	//-- Werewolf
; 212  : 		return ( texture_animations[index].number_of_frames );

  0005d	6b 45 08 0c	 imul	 eax, DWORD PTR _index$[ebp], 12
  00061	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?texture_animations@@3PAUTEXTURE_ANIMATION_INFORMATION@@A ; texture_animations
  00067	8b 04 01	 mov	 eax, DWORD PTR [ecx+eax]
$LN1@get_textur:

; 213  : }

  0006a	5f		 pop	 edi
  0006b	5e		 pop	 esi
  0006c	5b		 pop	 ebx
  0006d	8b e5		 mov	 esp, ebp
  0006f	5d		 pop	 ebp
  00070	c2 04 00	 ret	 4
?get_texture_animation_number_of_frames@@YGHW4TEXTURE_ANIMATION_INDICES@@@Z ENDP ; get_texture_animation_number_of_frames
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\modules\3d\3danim.c
;	COMDAT ?advance_texture_animation_frame_on_object@@YGHPAUOBJECT_3D_INSTANCE@@W4TEXTURE_ANIMATION_INDICES@@@Z
_TEXT	SEGMENT
tv86 = -76						; size = 4
_count$ = -8						; size = 4
_scene$ = -4						; size = 4
_obj$ = 8						; size = 4
_index$ = 12						; size = 4
?advance_texture_animation_frame_on_object@@YGHPAUOBJECT_3D_INSTANCE@@W4TEXTURE_ANIMATION_INDICES@@@Z PROC ; advance_texture_animation_frame_on_object, COMDAT

; 163  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 4c	 sub	 esp, 76			; 0000004cH
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 164  : 
; 165  : 	int
; 166  : 		scene,
; 167  : 		count;
; 168  : 
; 169  : 	scene = obj->object_number;

  00009	8b 45 08	 mov	 eax, DWORD PTR _obj$[ebp]
  0000c	8b 48 04	 mov	 ecx, DWORD PTR [eax+4]
  0000f	89 4d fc	 mov	 DWORD PTR _scene$[ebp], ecx

; 170  : 
; 171  : 	if ( objects_3d_scene_database[scene].number_of_texture_animations )

  00012	69 45 fc e0 00
	00 00		 imul	 eax, DWORD PTR _scene$[ebp], 224
  00019	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?objects_3d_scene_database@@3PAUOBJECT_3D_SCENE_DATABASE_ENTRY@@A ; objects_3d_scene_database
  0001f	83 7c 01 14 00	 cmp	 DWORD PTR [ecx+eax+20], 0
  00024	0f 84 98 00 00
	00		 je	 $LN5@advance_te

; 172  : 	{
; 173  : 
; 174  : 		for ( count = 0; count < objects_3d_scene_database[scene].number_of_texture_animations; count++ )

  0002a	c7 45 f8 00 00
	00 00		 mov	 DWORD PTR _count$[ebp], 0
  00031	eb 09		 jmp	 SHORT $LN4@advance_te
$LN2@advance_te:
  00033	8b 45 f8	 mov	 eax, DWORD PTR _count$[ebp]
  00036	83 c0 01	 add	 eax, 1
  00039	89 45 f8	 mov	 DWORD PTR _count$[ebp], eax
$LN4@advance_te:
  0003c	69 45 fc e0 00
	00 00		 imul	 eax, DWORD PTR _scene$[ebp], 224
  00043	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?objects_3d_scene_database@@3PAUOBJECT_3D_SCENE_DATABASE_ENTRY@@A ; objects_3d_scene_database
  00049	8b 55 f8	 mov	 edx, DWORD PTR _count$[ebp]
  0004c	3b 54 01 14	 cmp	 edx, DWORD PTR [ecx+eax+20]
  00050	7d 6a		 jge	 SHORT $LN3@advance_te

; 175  : 		{
; 176  : 
; 177  : 			if ( objects_3d_scene_database[scene].texture_animations[count] == index )

  00052	69 45 fc e0 00
	00 00		 imul	 eax, DWORD PTR _scene$[ebp], 224
  00059	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?objects_3d_scene_database@@3PAUOBJECT_3D_SCENE_DATABASE_ENTRY@@A ; objects_3d_scene_database
  0005f	8b 54 01 48	 mov	 edx, DWORD PTR [ecx+eax+72]
  00063	8b 45 f8	 mov	 eax, DWORD PTR _count$[ebp]
  00066	8b 0c 82	 mov	 ecx, DWORD PTR [edx+eax*4]
  00069	3b 4d 0c	 cmp	 ecx, DWORD PTR _index$[ebp]
  0006c	75 49		 jne	 SHORT $LN7@advance_te

; 178  : 			{
; 179  : 
; 180  : 				if ( ++( obj->texture_animations[count] ) >= texture_animations[index].number_of_frames )

  0006e	8b 45 08	 mov	 eax, DWORD PTR _obj$[ebp]
  00071	8b 48 54	 mov	 ecx, DWORD PTR [eax+84]
  00074	8b 55 f8	 mov	 edx, DWORD PTR _count$[ebp]
  00077	8b 04 91	 mov	 eax, DWORD PTR [ecx+edx*4]
  0007a	83 c0 01	 add	 eax, 1
  0007d	89 45 b4	 mov	 DWORD PTR tv86[ebp], eax
  00080	8b 4d 08	 mov	 ecx, DWORD PTR _obj$[ebp]
  00083	8b 51 54	 mov	 edx, DWORD PTR [ecx+84]
  00086	8b 45 f8	 mov	 eax, DWORD PTR _count$[ebp]
  00089	8b 4d b4	 mov	 ecx, DWORD PTR tv86[ebp]
  0008c	89 0c 82	 mov	 DWORD PTR [edx+eax*4], ecx
  0008f	6b 55 0c 0c	 imul	 edx, DWORD PTR _index$[ebp], 12
  00093	a1 00 00 00 00	 mov	 eax, DWORD PTR ?texture_animations@@3PAUTEXTURE_ANIMATION_INFORMATION@@A ; texture_animations
  00098	8b 4d b4	 mov	 ecx, DWORD PTR tv86[ebp]
  0009b	3b 0c 10	 cmp	 ecx, DWORD PTR [eax+edx]
  0009e	7c 10		 jl	 SHORT $LN8@advance_te

; 181  : 				{
; 182  : 
; 183  : 					obj->texture_animations[count] = 0;

  000a0	8b 45 08	 mov	 eax, DWORD PTR _obj$[ebp]
  000a3	8b 48 54	 mov	 ecx, DWORD PTR [eax+84]
  000a6	8b 55 f8	 mov	 edx, DWORD PTR _count$[ebp]
  000a9	c7 04 91 00 00
	00 00		 mov	 DWORD PTR [ecx+edx*4], 0
$LN8@advance_te:

; 184  : 				}
; 185  : 
; 186  : 				return ( TRUE );

  000b0	b8 01 00 00 00	 mov	 eax, 1
  000b5	eb 0d		 jmp	 SHORT $LN1@advance_te
$LN7@advance_te:

; 187  : 			}
; 188  : 		}

  000b7	e9 77 ff ff ff	 jmp	 $LN2@advance_te
$LN3@advance_te:

; 189  : 
; 190  : 		return ( FALSE );

  000bc	33 c0		 xor	 eax, eax
  000be	eb 04		 jmp	 SHORT $LN1@advance_te

; 191  : 	}
; 192  : 	else

  000c0	eb 02		 jmp	 SHORT $LN1@advance_te
$LN5@advance_te:

; 193  : 	{
; 194  : 
; 195  : 		return ( FALSE );

  000c2	33 c0		 xor	 eax, eax
$LN1@advance_te:

; 196  : 	}
; 197  : }

  000c4	5f		 pop	 edi
  000c5	5e		 pop	 esi
  000c6	5b		 pop	 ebx
  000c7	8b e5		 mov	 esp, ebp
  000c9	5d		 pop	 ebp
  000ca	c2 08 00	 ret	 8
?advance_texture_animation_frame_on_object@@YGHPAUOBJECT_3D_INSTANCE@@W4TEXTURE_ANIMATION_INDICES@@@Z ENDP ; advance_texture_animation_frame_on_object
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\modules\3d\3danim.c
;	COMDAT ?set_texture_animation_frame_on_object@@YGHPAUOBJECT_3D_INSTANCE@@W4TEXTURE_ANIMATION_INDICES@@H@Z
_TEXT	SEGMENT
_count$ = -8						; size = 4
_scene$ = -4						; size = 4
_obj$ = 8						; size = 4
_index$ = 12						; size = 4
_frame$ = 16						; size = 4
?set_texture_animation_frame_on_object@@YGHPAUOBJECT_3D_INSTANCE@@W4TEXTURE_ANIMATION_INDICES@@H@Z PROC ; set_texture_animation_frame_on_object, COMDAT

; 111  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 48	 sub	 esp, 72			; 00000048H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 112  : 
; 113  : 	int
; 114  : 		scene,
; 115  : 		count;
; 116  : 
; 117  : 	if ( frame < 0 )

  00009	83 7d 10 00	 cmp	 DWORD PTR _frame$[ebp], 0
  0000d	7d 11		 jge	 SHORT $LN5@set_textur

; 118  : 	{
; 119  : 
; 120  : 		debug_log ( "Setting an animation frame to an invalid number: %d", frame );

  0000f	8b 45 10	 mov	 eax, DWORD PTR _frame$[ebp]
  00012	50		 push	 eax
  00013	68 00 00 00 00	 push	 OFFSET ??_C@_0DE@IIHAEAII@Setting?5an?5animation?5frame?5to?5a@
  00018	e8 00 00 00 00	 call	 ?debug_log@@YAXPBDZZ	; debug_log
  0001d	83 c4 08	 add	 esp, 8
$LN5@set_textur:

; 121  : 	}
; 122  : 
; 123  : 	scene = obj->object_number;

  00020	8b 45 08	 mov	 eax, DWORD PTR _obj$[ebp]
  00023	8b 48 04	 mov	 ecx, DWORD PTR [eax+4]
  00026	89 4d fc	 mov	 DWORD PTR _scene$[ebp], ecx

; 124  : 
; 125  : 	if ( objects_3d_scene_database[scene].number_of_texture_animations )

  00029	69 45 fc e0 00
	00 00		 imul	 eax, DWORD PTR _scene$[ebp], 224
  00030	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?objects_3d_scene_database@@3PAUOBJECT_3D_SCENE_DATABASE_ENTRY@@A ; objects_3d_scene_database
  00036	83 7c 01 14 00	 cmp	 DWORD PTR [ecx+eax+20], 0
  0003b	0f 84 83 00 00
	00		 je	 $LN6@set_textur

; 126  : 	{
; 127  : 
; 128  : 		for ( count = 0; count < objects_3d_scene_database[scene].number_of_texture_animations; count++ )

  00041	c7 45 f8 00 00
	00 00		 mov	 DWORD PTR _count$[ebp], 0
  00048	eb 09		 jmp	 SHORT $LN4@set_textur
$LN2@set_textur:
  0004a	8b 45 f8	 mov	 eax, DWORD PTR _count$[ebp]
  0004d	83 c0 01	 add	 eax, 1
  00050	89 45 f8	 mov	 DWORD PTR _count$[ebp], eax
$LN4@set_textur:
  00053	69 45 fc e0 00
	00 00		 imul	 eax, DWORD PTR _scene$[ebp], 224
  0005a	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?objects_3d_scene_database@@3PAUOBJECT_3D_SCENE_DATABASE_ENTRY@@A ; objects_3d_scene_database
  00060	8b 55 f8	 mov	 edx, DWORD PTR _count$[ebp]
  00063	3b 54 01 14	 cmp	 edx, DWORD PTR [ecx+eax+20]
  00067	7d 55		 jge	 SHORT $LN3@set_textur

; 129  : 		{
; 130  : 
; 131  : 			if ( objects_3d_scene_database[scene].texture_animations[count] == index )

  00069	69 45 fc e0 00
	00 00		 imul	 eax, DWORD PTR _scene$[ebp], 224
  00070	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?objects_3d_scene_database@@3PAUOBJECT_3D_SCENE_DATABASE_ENTRY@@A ; objects_3d_scene_database
  00076	8b 54 01 48	 mov	 edx, DWORD PTR [ecx+eax+72]
  0007a	8b 45 f8	 mov	 eax, DWORD PTR _count$[ebp]
  0007d	8b 0c 82	 mov	 ecx, DWORD PTR [edx+eax*4]
  00080	3b 4d 0c	 cmp	 ecx, DWORD PTR _index$[ebp]
  00083	75 37		 jne	 SHORT $LN8@set_textur

; 132  : 			{
; 133  : 
; 134  : 				if ( frame > texture_animations[index].number_of_frames )

  00085	6b 45 0c 0c	 imul	 eax, DWORD PTR _index$[ebp], 12
  00089	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?texture_animations@@3PAUTEXTURE_ANIMATION_INFORMATION@@A ; texture_animations
  0008f	8b 55 10	 mov	 edx, DWORD PTR _frame$[ebp]
  00092	3b 14 01	 cmp	 edx, DWORD PTR [ecx+eax]
  00095	7e 0f		 jle	 SHORT $LN9@set_textur

; 135  : 				{
; 136  : 
; 137  : 					debug_log ( "Trying to set an animation frame outside the number of frames" );

  00097	68 00 00 00 00	 push	 OFFSET ??_C@_0DO@OGAMCFHA@Trying?5to?5set?5an?5animation?5fram@
  0009c	e8 00 00 00 00	 call	 ?debug_log@@YAXPBDZZ	; debug_log
  000a1	83 c4 04	 add	 esp, 4

; 138  : 				}
; 139  : 				else

  000a4	eb 16		 jmp	 SHORT $LN8@set_textur
$LN9@set_textur:

; 140  : 				{
; 141  : 	
; 142  : 					obj->texture_animations[count] = frame;

  000a6	8b 45 08	 mov	 eax, DWORD PTR _obj$[ebp]
  000a9	8b 48 54	 mov	 ecx, DWORD PTR [eax+84]
  000ac	8b 55 f8	 mov	 edx, DWORD PTR _count$[ebp]
  000af	8b 45 10	 mov	 eax, DWORD PTR _frame$[ebp]
  000b2	89 04 91	 mov	 DWORD PTR [ecx+edx*4], eax

; 143  : 
; 144  : 					return ( TRUE );

  000b5	b8 01 00 00 00	 mov	 eax, 1
  000ba	eb 0a		 jmp	 SHORT $LN1@set_textur
$LN8@set_textur:

; 145  : 				}
; 146  : 			}
; 147  : 		}

  000bc	eb 8c		 jmp	 SHORT $LN2@set_textur
$LN3@set_textur:

; 148  : 
; 149  : 		return ( FALSE );

  000be	33 c0		 xor	 eax, eax
  000c0	eb 04		 jmp	 SHORT $LN1@set_textur

; 150  : 	}
; 151  : 	else

  000c2	eb 02		 jmp	 SHORT $LN1@set_textur
$LN6@set_textur:

; 152  : 	{
; 153  : 
; 154  : 		return ( FALSE );

  000c4	33 c0		 xor	 eax, eax
$LN1@set_textur:

; 155  : 	}
; 156  : }

  000c6	5f		 pop	 edi
  000c7	5e		 pop	 esi
  000c8	5b		 pop	 ebx
  000c9	8b e5		 mov	 esp, ebp
  000cb	5d		 pop	 ebp
  000cc	c2 0c 00	 ret	 12			; 0000000cH
?set_texture_animation_frame_on_object@@YGHPAUOBJECT_3D_INSTANCE@@W4TEXTURE_ANIMATION_INDICES@@H@Z ENDP ; set_texture_animation_frame_on_object
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\modules\3d\3danim.c
;	COMDAT ?initialise_object_texture_animations@@YGXPAUOBJECT_3D_INSTANCE@@@Z
_TEXT	SEGMENT
_indices$ = -16						; size = 4
_animations$ = -12					; size = 4
_scene$ = -8						; size = 4
_count$ = -4						; size = 4
_obj$ = 8						; size = 4
?initialise_object_texture_animations@@YGXPAUOBJECT_3D_INSTANCE@@@Z PROC ; initialise_object_texture_animations, COMDAT

; 74   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 50	 sub	 esp, 80			; 00000050H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 75   : 
; 76   : 	int
; 77   : 		count,
; 78   : 		scene,
; 79   : 		*animations,
; 80   : 		*indices;
; 81   : 
; 82   : 	scene = obj->object_number;

  00009	8b 45 08	 mov	 eax, DWORD PTR _obj$[ebp]
  0000c	8b 48 04	 mov	 ecx, DWORD PTR [eax+4]
  0000f	89 4d f8	 mov	 DWORD PTR _scene$[ebp], ecx

; 83   : 
; 84   : 	if ( objects_3d_scene_database[scene].number_of_texture_animations )

  00012	69 45 f8 e0 00
	00 00		 imul	 eax, DWORD PTR _scene$[ebp], 224
  00019	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?objects_3d_scene_database@@3PAUOBJECT_3D_SCENE_DATABASE_ENTRY@@A ; objects_3d_scene_database
  0001f	83 7c 01 14 00	 cmp	 DWORD PTR [ecx+eax+20], 0
  00024	0f 84 a7 00 00
	00		 je	 $LN1@initialise

; 85   : 	{
; 86   : 
; 87   : 		animations = objects_3d_scene_database[scene].texture_animations;

  0002a	69 45 f8 e0 00
	00 00		 imul	 eax, DWORD PTR _scene$[ebp], 224
  00031	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?objects_3d_scene_database@@3PAUOBJECT_3D_SCENE_DATABASE_ENTRY@@A ; objects_3d_scene_database
  00037	8b 54 01 48	 mov	 edx, DWORD PTR [ecx+eax+72]
  0003b	89 55 f4	 mov	 DWORD PTR _animations$[ebp], edx

; 88   : 
; 89   : 		indices = obj->texture_animations;

  0003e	8b 45 08	 mov	 eax, DWORD PTR _obj$[ebp]
  00041	8b 48 54	 mov	 ecx, DWORD PTR [eax+84]
  00044	89 4d f0	 mov	 DWORD PTR _indices$[ebp], ecx

; 90   : 
; 91   : 		ASSERT ( animations );

  00047	83 7d f4 00	 cmp	 DWORD PTR _animations$[ebp], 0
  0004b	75 18		 jne	 SHORT $LN6@initialise
  0004d	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??initialise_object_texture_animations@@YGXPAUOBJECT_3D_INSTANCE@@@Z@4JA
  00052	83 c0 11	 add	 eax, 17			; 00000011H
  00055	50		 push	 eax
  00056	68 00 00 00 00	 push	 OFFSET ??_C@_0DB@OIBFGIKD@c?3?2users?2nhv90?2projects?2eech?2mo@
  0005b	68 00 00 00 00	 push	 OFFSET ??_C@_0L@HNGMIHEN@animations@
  00060	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN6@initialise:

; 92   : 		ASSERT ( indices );

  00065	83 7d f0 00	 cmp	 DWORD PTR _indices$[ebp], 0
  00069	75 18		 jne	 SHORT $LN7@initialise
  0006b	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??initialise_object_texture_animations@@YGXPAUOBJECT_3D_INSTANCE@@@Z@4JA
  00070	83 c0 12	 add	 eax, 18			; 00000012H
  00073	50		 push	 eax
  00074	68 00 00 00 00	 push	 OFFSET ??_C@_0DB@OIBFGIKD@c?3?2users?2nhv90?2projects?2eech?2mo@
  00079	68 00 00 00 00	 push	 OFFSET ??_C@_07OKCKIPNN@indices@
  0007e	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN7@initialise:

; 93   : 
; 94   : 		for ( count = objects_3d_scene_database[scene].number_of_texture_animations; count > 0; count-- )

  00083	69 45 f8 e0 00
	00 00		 imul	 eax, DWORD PTR _scene$[ebp], 224
  0008a	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?objects_3d_scene_database@@3PAUOBJECT_3D_SCENE_DATABASE_ENTRY@@A ; objects_3d_scene_database
  00090	8b 54 01 14	 mov	 edx, DWORD PTR [ecx+eax+20]
  00094	89 55 fc	 mov	 DWORD PTR _count$[ebp], edx
  00097	eb 09		 jmp	 SHORT $LN4@initialise
$LN2@initialise:
  00099	8b 45 fc	 mov	 eax, DWORD PTR _count$[ebp]
  0009c	83 e8 01	 sub	 eax, 1
  0009f	89 45 fc	 mov	 DWORD PTR _count$[ebp], eax
$LN4@initialise:
  000a2	83 7d fc 00	 cmp	 DWORD PTR _count$[ebp], 0
  000a6	7e 29		 jle	 SHORT $LN1@initialise

; 95   : 		{
; 96   : 	
; 97   : 			texture_animations[ *animations ].current_frame = *indices;

  000a8	8b 45 f4	 mov	 eax, DWORD PTR _animations$[ebp]
  000ab	6b 08 0c	 imul	 ecx, DWORD PTR [eax], 12
  000ae	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?texture_animations@@3PAUTEXTURE_ANIMATION_INFORMATION@@A ; texture_animations
  000b4	8b 45 f0	 mov	 eax, DWORD PTR _indices$[ebp]
  000b7	8b 00		 mov	 eax, DWORD PTR [eax]
  000b9	89 44 0a 04	 mov	 DWORD PTR [edx+ecx+4], eax

; 98   : 
; 99   : 			animations++;

  000bd	8b 45 f4	 mov	 eax, DWORD PTR _animations$[ebp]
  000c0	83 c0 04	 add	 eax, 4
  000c3	89 45 f4	 mov	 DWORD PTR _animations$[ebp], eax

; 100  : 
; 101  : 			indices++;

  000c6	8b 45 f0	 mov	 eax, DWORD PTR _indices$[ebp]
  000c9	83 c0 04	 add	 eax, 4
  000cc	89 45 f0	 mov	 DWORD PTR _indices$[ebp], eax

; 102  : 		}

  000cf	eb c8		 jmp	 SHORT $LN2@initialise
$LN1@initialise:

; 103  : 	}
; 104  : }

  000d1	5f		 pop	 edi
  000d2	5e		 pop	 esi
  000d3	5b		 pop	 ebx
  000d4	8b e5		 mov	 esp, ebp
  000d6	5d		 pop	 ebp
  000d7	c2 04 00	 ret	 4
?initialise_object_texture_animations@@YGXPAUOBJECT_3D_INSTANCE@@@Z ENDP ; initialise_object_texture_animations
_TEXT	ENDS
END
