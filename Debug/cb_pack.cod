; Listing generated by Microsoft (R) Optimizing Compiler Version 19.16.27045.0 

	TITLE	C:\Users\nhv90\Projects\eech\aphavoc\source\entity\fixed\cbuild\cb_pack.c
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB MSVCRTD
INCLUDELIB OLDNAMES

PUBLIC	?overload_city_building_pack_functions@@YGXXZ	; overload_city_building_pack_functions
PUBLIC	?pack_local_city_building_data@@YGXW4PACK_MODES@@@Z ; pack_local_city_building_data
PUBLIC	?unpack_local_city_building_data@@YGXW4PACK_MODES@@@Z ; unpack_local_city_building_data
PUBLIC	??_C@_0P@CHDGFHLL@RLE?5CITY?5BLOCK@		; `string'
PUBLIC	??_C@_0EK@MOKADKDP@c?3?2users?2nhv90?2projects?2eech?2ap@ ; `string'
EXTRN	?process_assert@@YGXPBD0H@Z:PROC		; process_assert
EXTRN	?debug_log@@YAXPBDZZ:PROC			; debug_log
EXTRN	?pack_int_value@@YGXPAUENTITY@@W4INT_TYPES@@H@Z:PROC ; pack_int_value
EXTRN	?unpack_int_value@@YGHPAUENTITY@@W4INT_TYPES@@@Z:PROC ; unpack_int_value
EXTRN	?get_3d_object_destroyed_object_index@@YGHH@Z:PROC ; get_3d_object_destroyed_object_index
EXTRN	?null_entity_pointer_message@@3PBDB:DWORD	; null_entity_pointer_message
EXTRN	?fn_pack_local_entity_data@@3PAP6GXPAUENTITY@@W4PACK_MODES@@@ZA:BYTE ; fn_pack_local_entity_data
EXTRN	?fn_unpack_local_entity_data@@3PAP6GXPAUENTITY@@W4ENTITY_TYPES@@W4PACK_MODES@@@ZA:BYTE ; fn_unpack_local_entity_data
EXTRN	?first_used_entity@@3PAUENTITY@@A:DWORD		; first_used_entity
;	COMDAT ??_C@_0EK@MOKADKDP@c?3?2users?2nhv90?2projects?2eech?2ap@
CONST	SEGMENT
??_C@_0EK@MOKADKDP@c?3?2users?2nhv90?2projects?2eech?2ap@ DB 'c:\users\nh'
	DB	'v90\projects\eech\aphavoc\source\entity\fixed\cbuild\cb_pack.'
	DB	'c', 00H					; `string'
CONST	ENDS
;	COMDAT ??_C@_0P@CHDGFHLL@RLE?5CITY?5BLOCK@
CONST	SEGMENT
??_C@_0P@CHDGFHLL@RLE?5CITY?5BLOCK@ DB 'RLE CITY BLOCK', 00H ; `string'
CONST	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\entity\fixed\cbuild\cb_pack.c
;	COMDAT ?unpack_local_data@@YGXPAUENTITY@@W4ENTITY_TYPES@@W4PACK_MODES@@@Z
_TEXT	SEGMENT
_en$ = 8						; size = 4
_type$ = 12						; size = 4
_mode$ = 16						; size = 4
?unpack_local_data@@YGXPAUENTITY@@W4ENTITY_TYPES@@W4PACK_MODES@@@Z PROC ; unpack_local_data, COMDAT

; 88   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 89   : }

  00009	5f		 pop	 edi
  0000a	5e		 pop	 esi
  0000b	5b		 pop	 ebx
  0000c	8b e5		 mov	 esp, ebp
  0000e	5d		 pop	 ebp
  0000f	c2 0c 00	 ret	 12			; 0000000cH
?unpack_local_data@@YGXPAUENTITY@@W4ENTITY_TYPES@@W4PACK_MODES@@@Z ENDP ; unpack_local_data
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\entity\fixed\cbuild\cb_pack.c
;	COMDAT ?pack_local_data@@YGXPAUENTITY@@W4PACK_MODES@@@Z
_TEXT	SEGMENT
_en$ = 8						; size = 4
_mode$ = 12						; size = 4
?pack_local_data@@YGXPAUENTITY@@W4PACK_MODES@@@Z PROC	; pack_local_data, COMDAT

; 80   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 81   : }

  00009	5f		 pop	 edi
  0000a	5e		 pop	 esi
  0000b	5b		 pop	 ebx
  0000c	8b e5		 mov	 esp, ebp
  0000e	5d		 pop	 ebp
  0000f	c2 08 00	 ret	 8
?pack_local_data@@YGXPAUENTITY@@W4PACK_MODES@@@Z ENDP	; pack_local_data
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\entity\fixed\cbuild\cb_pack.c
;	COMDAT ?unpack_local_city_building_data@@YGXW4PACK_MODES@@@Z
_TEXT	SEGMENT
tv140 = -88						; size = 4
tv80 = -88						; size = 4
_city_building_alive$ = -20				; size = 4
_city_building_count$ = -16				; size = 4
_en$ = -12						; size = 4
_destroy_en$ = -8					; size = 4
_raw$ = -4						; size = 4
_mode$ = 8						; size = 4
?unpack_local_city_building_data@@YGXW4PACK_MODES@@@Z PROC ; unpack_local_city_building_data, COMDAT

; 186  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 58	 sub	 esp, 88			; 00000058H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 187  : 
; 188  : 	city_building
; 189  : 		*raw;
; 190  : 
; 191  : 	entity
; 192  : 		*destroy_en,
; 193  : 		*en;
; 194  : 
; 195  : 	int
; 196  : 		city_building_count,
; 197  : 		city_building_alive;
; 198  : 
; 199  : 	if ((mode != PACK_MODE_SERVER_SESSION) && (mode != PACK_MODE_CLIENT_SESSION))

  00009	83 7d 08 00	 cmp	 DWORD PTR _mode$[ebp], 0
  0000d	74 0b		 je	 SHORT $LN4@unpack_loc
  0000f	83 7d 08 01	 cmp	 DWORD PTR _mode$[ebp], 1
  00013	74 05		 je	 SHORT $LN4@unpack_loc

; 200  : 	{
; 201  : 
; 202  : 		return;

  00015	e9 0d 01 00 00	 jmp	 $LN1@unpack_loc
$LN4@unpack_loc:

; 203  : 	}
; 204  : 
; 205  : 	//
; 206  : 	// RLE encoded
; 207  : 	//
; 208  : 
; 209  : 	debug_log ("RLE CITY BLOCK");

  0001a	68 00 00 00 00	 push	 OFFSET ??_C@_0P@CHDGFHLL@RLE?5CITY?5BLOCK@
  0001f	e8 00 00 00 00	 call	 ?debug_log@@YAXPBDZZ	; debug_log
  00024	83 c4 04	 add	 esp, 4

; 210  : 
; 211  : 	en = get_local_entity_list ();

  00027	a1 00 00 00 00	 mov	 eax, DWORD PTR ?first_used_entity@@3PAUENTITY@@A ; first_used_entity
  0002c	89 45 f4	 mov	 DWORD PTR _en$[ebp], eax

; 212  : 
; 213  : 	city_building_count = unpack_int_value (NULL, INT_TYPE_LENGTH);

  0002f	6a 79		 push	 121			; 00000079H
  00031	6a 00		 push	 0
  00033	e8 00 00 00 00	 call	 ?unpack_int_value@@YGHPAUENTITY@@W4INT_TYPES@@@Z ; unpack_int_value
  00038	89 45 f0	 mov	 DWORD PTR _city_building_count$[ebp], eax

; 214  : 
; 215  : 	city_building_alive = unpack_int_value (NULL, INT_TYPE_ALIVE);

  0003b	6a 07		 push	 7
  0003d	6a 00		 push	 0
  0003f	e8 00 00 00 00	 call	 ?unpack_int_value@@YGHPAUENTITY@@W4INT_TYPES@@@Z ; unpack_int_value
  00044	89 45 ec	 mov	 DWORD PTR _city_building_alive$[ebp], eax
$LN2@unpack_loc:

; 216  : 
; 217  : 	while (en)

  00047	83 7d f4 00	 cmp	 DWORD PTR _en$[ebp], 0
  0004b	0f 84 d6 00 00
	00		 je	 $LN1@unpack_loc

; 218  : 	{
; 219  : 
; 220  : 		destroy_en = en;

  00051	8b 45 f4	 mov	 eax, DWORD PTR _en$[ebp]
  00054	89 45 f8	 mov	 DWORD PTR _destroy_en$[ebp], eax

; 221  : 
; 222  : 		en = get_local_entity_succ (en);

  00057	8b 45 f4	 mov	 eax, DWORD PTR _en$[ebp]
  0005a	8b 48 08	 mov	 ecx, DWORD PTR [eax+8]
  0005d	89 4d f4	 mov	 DWORD PTR _en$[ebp], ecx

; 223  : 
; 224  : 		if (get_local_entity_type (destroy_en) == ENTITY_TYPE_CITY_BUILDING)

  00060	83 7d f8 00	 cmp	 DWORD PTR _destroy_en$[ebp], 0
  00064	74 0a		 je	 SHORT $LN9@unpack_loc
  00066	8b 45 f8	 mov	 eax, DWORD PTR _destroy_en$[ebp]
  00069	8b 08		 mov	 ecx, DWORD PTR [eax]
  0006b	89 4d a8	 mov	 DWORD PTR tv80[ebp], ecx
  0006e	eb 1d		 jmp	 SHORT $LN10@unpack_loc
$LN9@unpack_loc:
  00070	68 e0 00 00 00	 push	 224			; 000000e0H
  00075	68 00 00 00 00	 push	 OFFSET ??_C@_0EK@MOKADKDP@c?3?2users?2nhv90?2projects?2eech?2ap@
  0007a	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  00080	52		 push	 edx
  00081	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00086	c7 45 a8 00 00
	00 00		 mov	 DWORD PTR tv80[ebp], 0
$LN10@unpack_loc:
  0008d	83 7d a8 06	 cmp	 DWORD PTR tv80[ebp], 6
  00091	0f 85 8b 00 00
	00		 jne	 $LN5@unpack_loc

; 225  : 		{
; 226  : 
; 227  : 			if (city_building_count == 0)

  00097	83 7d f0 00	 cmp	 DWORD PTR _city_building_count$[ebp], 0
  0009b	75 18		 jne	 SHORT $LN6@unpack_loc

; 228  : 			{
; 229  : 
; 230  : 				city_building_count = unpack_int_value (NULL, INT_TYPE_LENGTH);

  0009d	6a 79		 push	 121			; 00000079H
  0009f	6a 00		 push	 0
  000a1	e8 00 00 00 00	 call	 ?unpack_int_value@@YGHPAUENTITY@@W4INT_TYPES@@@Z ; unpack_int_value
  000a6	89 45 f0	 mov	 DWORD PTR _city_building_count$[ebp], eax

; 231  : 
; 232  : 				city_building_alive = unpack_int_value (NULL, INT_TYPE_ALIVE);

  000a9	6a 07		 push	 7
  000ab	6a 00		 push	 0
  000ad	e8 00 00 00 00	 call	 ?unpack_int_value@@YGHPAUENTITY@@W4INT_TYPES@@@Z ; unpack_int_value
  000b2	89 45 ec	 mov	 DWORD PTR _city_building_alive$[ebp], eax
$LN6@unpack_loc:

; 233  : 			}
; 234  : 
; 235  : 			city_building_count --;

  000b5	8b 45 f0	 mov	 eax, DWORD PTR _city_building_count$[ebp]
  000b8	83 e8 01	 sub	 eax, 1
  000bb	89 45 f0	 mov	 DWORD PTR _city_building_count$[ebp], eax

; 236  : 
; 237  : 			raw = (city_building *) get_local_entity_data (destroy_en);

  000be	8b 45 f8	 mov	 eax, DWORD PTR _destroy_en$[ebp]
  000c1	8b 48 04	 mov	 ecx, DWORD PTR [eax+4]
  000c4	89 4d fc	 mov	 DWORD PTR _raw$[ebp], ecx

; 238  : 
; 239  : 			raw->fix.alive = city_building_alive;

  000c7	8b 45 ec	 mov	 eax, DWORD PTR _city_building_alive$[ebp]
  000ca	83 e0 01	 and	 eax, 1
  000cd	c1 e0 14	 shl	 eax, 20			; 00000014H
  000d0	8b 4d fc	 mov	 ecx, DWORD PTR _raw$[ebp]
  000d3	8b 51 38	 mov	 edx, DWORD PTR [ecx+56]
  000d6	81 e2 ff ff ef
	ff		 and	 edx, -1048577		; ffefffffH
  000dc	0b d0		 or	 edx, eax
  000de	8b 45 fc	 mov	 eax, DWORD PTR _raw$[ebp]
  000e1	89 50 38	 mov	 DWORD PTR [eax+56], edx

; 240  : 
; 241  : 			if (!city_building_alive)

  000e4	83 7d ec 00	 cmp	 DWORD PTR _city_building_alive$[ebp], 0
  000e8	75 38		 jne	 SHORT $LN5@unpack_loc

; 242  : 			{
; 243  : 				raw->fix.object_3d_shape = get_3d_object_destroyed_object_index (raw->fix.object_3d_shape);

  000ea	8b 45 fc	 mov	 eax, DWORD PTR _raw$[ebp]
  000ed	8b 48 38	 mov	 ecx, DWORD PTR [eax+56]
  000f0	c1 e9 08	 shr	 ecx, 8
  000f3	81 e1 ff 0f 00
	00		 and	 ecx, 4095		; 00000fffH
  000f9	51		 push	 ecx
  000fa	e8 00 00 00 00	 call	 ?get_3d_object_destroyed_object_index@@YGHH@Z ; get_3d_object_destroyed_object_index
  000ff	89 45 a8	 mov	 DWORD PTR tv140[ebp], eax
  00102	8b 55 a8	 mov	 edx, DWORD PTR tv140[ebp]
  00105	81 e2 ff 0f 00
	00		 and	 edx, 4095		; 00000fffH
  0010b	c1 e2 08	 shl	 edx, 8
  0010e	8b 45 fc	 mov	 eax, DWORD PTR _raw$[ebp]
  00111	8b 48 38	 mov	 ecx, DWORD PTR [eax+56]
  00114	81 e1 ff 00 f0
	ff		 and	 ecx, -1048321		; fff000ffH
  0011a	0b ca		 or	 ecx, edx
  0011c	8b 55 fc	 mov	 edx, DWORD PTR _raw$[ebp]
  0011f	89 4a 38	 mov	 DWORD PTR [edx+56], ecx
$LN5@unpack_loc:

; 244  : 			}
; 245  : 		}
; 246  : 	}

  00122	e9 20 ff ff ff	 jmp	 $LN2@unpack_loc
$LN1@unpack_loc:

; 247  : }

  00127	5f		 pop	 edi
  00128	5e		 pop	 esi
  00129	5b		 pop	 ebx
  0012a	8b e5		 mov	 esp, ebp
  0012c	5d		 pop	 ebp
  0012d	c2 04 00	 ret	 4
?unpack_local_city_building_data@@YGXW4PACK_MODES@@@Z ENDP ; unpack_local_city_building_data
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\entity\fixed\cbuild\cb_pack.c
;	COMDAT ?pack_local_city_building_data@@YGXW4PACK_MODES@@@Z
_TEXT	SEGMENT
tv73 = -92						; size = 4
_count$ = -24						; size = 4
_city_building_alive$ = -20				; size = 4
_city_building_count$ = -16				; size = 4
_city_building_pack_size$ = -12				; size = 4
_raw$ = -8						; size = 4
_en$ = -4						; size = 4
_mode$ = 8						; size = 4
?pack_local_city_building_data@@YGXW4PACK_MODES@@@Z PROC ; pack_local_city_building_data, COMDAT

; 107  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 5c	 sub	 esp, 92			; 0000005cH
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 108  : 
; 109  : 	entity
; 110  : 		*en;
; 111  : 
; 112  : 	city_building
; 113  : 		*raw;
; 114  : 
; 115  : 	int
; 116  : 		city_building_pack_size,
; 117  : 		city_building_count,
; 118  : 		city_building_alive,
; 119  : 		count;
; 120  : 
; 121  : 	if ((mode != PACK_MODE_SERVER_SESSION) && (mode != PACK_MODE_CLIENT_SESSION))

  00009	83 7d 08 00	 cmp	 DWORD PTR _mode$[ebp], 0
  0000d	74 0b		 je	 SHORT $LN4@pack_local
  0000f	83 7d 08 01	 cmp	 DWORD PTR _mode$[ebp], 1
  00013	74 05		 je	 SHORT $LN4@pack_local

; 122  : 	{
; 123  : 
; 124  : 		return;

  00015	e9 18 01 00 00	 jmp	 $LN1@pack_local
$LN4@pack_local:

; 125  : 	}
; 126  : 
; 127  : 	debug_log ("RLE CITY BLOCK");

  0001a	68 00 00 00 00	 push	 OFFSET ??_C@_0P@CHDGFHLL@RLE?5CITY?5BLOCK@
  0001f	e8 00 00 00 00	 call	 ?debug_log@@YAXPBDZZ	; debug_log
  00024	83 c4 04	 add	 esp, 4

; 128  : 
; 129  : 	city_building_pack_size = 0;

  00027	c7 45 f4 00 00
	00 00		 mov	 DWORD PTR _city_building_pack_size$[ebp], 0

; 130  : 
; 131  : 	city_building_count = 0;

  0002e	c7 45 f0 00 00
	00 00		 mov	 DWORD PTR _city_building_count$[ebp], 0

; 132  : 
; 133  : 	city_building_alive = TRUE;

  00035	c7 45 ec 01 00
	00 00		 mov	 DWORD PTR _city_building_alive$[ebp], 1

; 134  : 
; 135  : 	count = 0;

  0003c	c7 45 e8 00 00
	00 00		 mov	 DWORD PTR _count$[ebp], 0

; 136  : 
; 137  : 	en = get_local_entity_list ();

  00043	a1 00 00 00 00	 mov	 eax, DWORD PTR ?first_used_entity@@3PAUENTITY@@A ; first_used_entity
  00048	89 45 fc	 mov	 DWORD PTR _en$[ebp], eax
$LN2@pack_local:

; 138  : 
; 139  : 	while (en)

  0004b	83 7d fc 00	 cmp	 DWORD PTR _en$[ebp], 0
  0004f	0f 84 b1 00 00
	00		 je	 $LN3@pack_local

; 140  : 	{
; 141  : 
; 142  : 		if (get_local_entity_type (en) == ENTITY_TYPE_CITY_BUILDING)

  00055	83 7d fc 00	 cmp	 DWORD PTR _en$[ebp], 0
  00059	74 0a		 je	 SHORT $LN9@pack_local
  0005b	8b 45 fc	 mov	 eax, DWORD PTR _en$[ebp]
  0005e	8b 08		 mov	 ecx, DWORD PTR [eax]
  00060	89 4d a4	 mov	 DWORD PTR tv73[ebp], ecx
  00063	eb 1d		 jmp	 SHORT $LN10@pack_local
$LN9@pack_local:
  00065	68 8e 00 00 00	 push	 142			; 0000008eH
  0006a	68 00 00 00 00	 push	 OFFSET ??_C@_0EK@MOKADKDP@c?3?2users?2nhv90?2projects?2eech?2ap@
  0006f	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  00075	52		 push	 edx
  00076	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  0007b	c7 45 a4 00 00
	00 00		 mov	 DWORD PTR tv73[ebp], 0
$LN10@pack_local:
  00082	83 7d a4 06	 cmp	 DWORD PTR tv73[ebp], 6
  00086	75 70		 jne	 SHORT $LN5@pack_local

; 143  : 		{
; 144  : 
; 145  : 			count ++;

  00088	8b 45 e8	 mov	 eax, DWORD PTR _count$[ebp]
  0008b	83 c0 01	 add	 eax, 1
  0008e	89 45 e8	 mov	 DWORD PTR _count$[ebp], eax

; 146  : 
; 147  : 			raw = (city_building *) get_local_entity_data (en);

  00091	8b 45 fc	 mov	 eax, DWORD PTR _en$[ebp]
  00094	8b 48 04	 mov	 ecx, DWORD PTR [eax+4]
  00097	89 4d f8	 mov	 DWORD PTR _raw$[ebp], ecx

; 148  : 
; 149  : 			if (city_building_alive == raw->fix.alive)

  0009a	8b 45 f8	 mov	 eax, DWORD PTR _raw$[ebp]
  0009d	8b 48 38	 mov	 ecx, DWORD PTR [eax+56]
  000a0	c1 e9 14	 shr	 ecx, 20			; 00000014H
  000a3	83 e1 01	 and	 ecx, 1
  000a6	39 4d ec	 cmp	 DWORD PTR _city_building_alive$[ebp], ecx
  000a9	75 0b		 jne	 SHORT $LN6@pack_local

; 150  : 			{
; 151  : 
; 152  : 				city_building_count ++;

  000ab	8b 45 f0	 mov	 eax, DWORD PTR _city_building_count$[ebp]
  000ae	83 c0 01	 add	 eax, 1
  000b1	89 45 f0	 mov	 DWORD PTR _city_building_count$[ebp], eax

; 153  : 			}
; 154  : 			else

  000b4	eb 42		 jmp	 SHORT $LN5@pack_local
$LN6@pack_local:

; 155  : 			{
; 156  : 
; 157  : 				pack_int_value (NULL, INT_TYPE_LENGTH, city_building_count);

  000b6	8b 45 f0	 mov	 eax, DWORD PTR _city_building_count$[ebp]
  000b9	50		 push	 eax
  000ba	6a 79		 push	 121			; 00000079H
  000bc	6a 00		 push	 0
  000be	e8 00 00 00 00	 call	 ?pack_int_value@@YGXPAUENTITY@@W4INT_TYPES@@H@Z ; pack_int_value

; 158  : 				city_building_pack_size += NUM_LENGTH_BITS;

  000c3	8b 45 f4	 mov	 eax, DWORD PTR _city_building_pack_size$[ebp]
  000c6	83 c0 10	 add	 eax, 16			; 00000010H
  000c9	89 45 f4	 mov	 DWORD PTR _city_building_pack_size$[ebp], eax

; 159  : 
; 160  : 				pack_int_value (NULL, INT_TYPE_ALIVE, city_building_alive);

  000cc	8b 45 ec	 mov	 eax, DWORD PTR _city_building_alive$[ebp]
  000cf	50		 push	 eax
  000d0	6a 07		 push	 7
  000d2	6a 00		 push	 0
  000d4	e8 00 00 00 00	 call	 ?pack_int_value@@YGXPAUENTITY@@W4INT_TYPES@@H@Z ; pack_int_value

; 161  : 				city_building_pack_size += NUM_ALIVE_BITS;

  000d9	8b 45 f4	 mov	 eax, DWORD PTR _city_building_pack_size$[ebp]
  000dc	83 c0 01	 add	 eax, 1
  000df	89 45 f4	 mov	 DWORD PTR _city_building_pack_size$[ebp], eax

; 162  : 
; 163  : 				city_building_alive = raw->fix.alive;

  000e2	8b 45 f8	 mov	 eax, DWORD PTR _raw$[ebp]
  000e5	8b 48 38	 mov	 ecx, DWORD PTR [eax+56]
  000e8	c1 e9 14	 shr	 ecx, 20			; 00000014H
  000eb	83 e1 01	 and	 ecx, 1
  000ee	89 4d ec	 mov	 DWORD PTR _city_building_alive$[ebp], ecx

; 164  : 
; 165  : 				city_building_count = 1;

  000f1	c7 45 f0 01 00
	00 00		 mov	 DWORD PTR _city_building_count$[ebp], 1
$LN5@pack_local:

; 166  : 			}
; 167  : 		}
; 168  : 
; 169  : 		en = get_local_entity_succ (en);

  000f8	8b 45 fc	 mov	 eax, DWORD PTR _en$[ebp]
  000fb	8b 48 08	 mov	 ecx, DWORD PTR [eax+8]
  000fe	89 4d fc	 mov	 DWORD PTR _en$[ebp], ecx

; 170  : 	}

  00101	e9 45 ff ff ff	 jmp	 $LN2@pack_local
$LN3@pack_local:

; 171  : 
; 172  : 	pack_int_value (NULL, INT_TYPE_LENGTH, city_building_count);

  00106	8b 45 f0	 mov	 eax, DWORD PTR _city_building_count$[ebp]
  00109	50		 push	 eax
  0010a	6a 79		 push	 121			; 00000079H
  0010c	6a 00		 push	 0
  0010e	e8 00 00 00 00	 call	 ?pack_int_value@@YGXPAUENTITY@@W4INT_TYPES@@H@Z ; pack_int_value

; 173  : 	city_building_pack_size += NUM_LENGTH_BITS;

  00113	8b 45 f4	 mov	 eax, DWORD PTR _city_building_pack_size$[ebp]
  00116	83 c0 10	 add	 eax, 16			; 00000010H
  00119	89 45 f4	 mov	 DWORD PTR _city_building_pack_size$[ebp], eax

; 174  : 
; 175  : 	pack_int_value (NULL, INT_TYPE_ALIVE, city_building_alive);

  0011c	8b 45 ec	 mov	 eax, DWORD PTR _city_building_alive$[ebp]
  0011f	50		 push	 eax
  00120	6a 07		 push	 7
  00122	6a 00		 push	 0
  00124	e8 00 00 00 00	 call	 ?pack_int_value@@YGXPAUENTITY@@W4INT_TYPES@@H@Z ; pack_int_value

; 176  : 	city_building_pack_size += NUM_ALIVE_BITS;

  00129	8b 45 f4	 mov	 eax, DWORD PTR _city_building_pack_size$[ebp]
  0012c	83 c0 01	 add	 eax, 1
  0012f	89 45 f4	 mov	 DWORD PTR _city_building_pack_size$[ebp], eax
$LN1@pack_local:

; 177  : 
; 178  : 	//debug_log ("CB_PACK: packing %d city_building took %d bytes (%d bits)", count, city_building_pack_size / 8, city_building_pack_size);
; 179  : }

  00132	5f		 pop	 edi
  00133	5e		 pop	 esi
  00134	5b		 pop	 ebx
  00135	8b e5		 mov	 esp, ebp
  00137	5d		 pop	 ebp
  00138	c2 04 00	 ret	 4
?pack_local_city_building_data@@YGXW4PACK_MODES@@@Z ENDP ; pack_local_city_building_data
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\entity\fixed\cbuild\cb_pack.c
;	COMDAT ?overload_city_building_pack_functions@@YGXXZ
_TEXT	SEGMENT
?overload_city_building_pack_functions@@YGXXZ PROC	; overload_city_building_pack_functions, COMDAT

; 96   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 97   : 	fn_pack_local_entity_data[ENTITY_TYPE_CITY_BUILDING]	= pack_local_data;

  00009	b8 04 00 00 00	 mov	 eax, 4
  0000e	6b c8 06	 imul	 ecx, eax, 6
  00011	c7 81 00 00 00
	00 00 00 00 00	 mov	 DWORD PTR ?fn_pack_local_entity_data@@3PAP6GXPAUENTITY@@W4PACK_MODES@@@ZA[ecx], OFFSET ?pack_local_data@@YGXPAUENTITY@@W4PACK_MODES@@@Z ; pack_local_data

; 98   : 
; 99   : 	fn_unpack_local_entity_data[ENTITY_TYPE_CITY_BUILDING]	= unpack_local_data;

  0001b	b8 04 00 00 00	 mov	 eax, 4
  00020	6b c8 06	 imul	 ecx, eax, 6
  00023	c7 81 00 00 00
	00 00 00 00 00	 mov	 DWORD PTR ?fn_unpack_local_entity_data@@3PAP6GXPAUENTITY@@W4ENTITY_TYPES@@W4PACK_MODES@@@ZA[ecx], OFFSET ?unpack_local_data@@YGXPAUENTITY@@W4ENTITY_TYPES@@W4PACK_MODES@@@Z ; unpack_local_data

; 100  : }

  0002d	5f		 pop	 edi
  0002e	5e		 pop	 esi
  0002f	5b		 pop	 ebx
  00030	8b e5		 mov	 esp, ebp
  00032	5d		 pop	 ebp
  00033	c3		 ret	 0
?overload_city_building_pack_functions@@YGXXZ ENDP	; overload_city_building_pack_functions
_TEXT	ENDS
END
