; Listing generated by Microsoft (R) Optimizing Compiler Version 19.16.27045.0 

	TITLE	C:\Users\nhv90\Projects\eech\aphavoc\source\entity\mobile\weapon\wn_decoy.c
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB MSVCRTD
INCLUDELIB OLDNAMES

PUBLIC	?get_decoy_timer_start_value@@YGMW4WEAPON_DECOY_TYPES@@@Z ; get_decoy_timer_start_value
PUBLIC	?get_decoy_timer_restart_value@@YGMW4WEAPON_DECOY_TYPES@@@Z ; get_decoy_timer_restart_value
PUBLIC	?get_weapon_locked_onto_decoy@@YGHW4WEAPON_DECOY_TYPES@@@Z ; get_weapon_locked_onto_decoy
PUBLIC	?update_decoy@@YGXPAUENTITY@@@Z			; update_decoy
PUBLIC	?get_smoke_grenade_distract_position@@YGXPAUENTITY@@0PAUVEC3D@@@Z ; get_smoke_grenade_distract_position
PUBLIC	?get_jammer_distract_position@@YGXPAUENTITY@@PAUVEC3D@@@Z ; get_jammer_distract_position
PUBLIC	?get_decoy_type_for_weapon@@YGHPAUENTITY@@@Z	; get_decoy_type_for_weapon
PUBLIC	??_C@_0BP@NAFKOIIC@Invalid?5weapon?5decoy?5type?5?$DN?5?$CFd@ ; `string'
PUBLIC	?__LINE__Var@?0??update_decoy@@YGXPAUENTITY@@@Z@4JA ; `update_decoy'::`1'::__LINE__Var
PUBLIC	??_C@_0EM@GKDIAKLN@c?3?2users?2nhv90?2projects?2eech?2ap@ ; `string'
PUBLIC	??_C@_02LFNMGJAP@en@				; `string'
PUBLIC	??_C@_0CJ@DMBLBJBK@get_comms_model?5?$CI?$CJ?5?$DN?$DN?5COMMS_MOD@ ; `string'
PUBLIC	??_C@_0EI@DDCJBDPE@weapon_database?$FLraw?9?$DOmob?4sub_ty@ ; `string'
PUBLIC	?__LINE__Var@?0??get_smoke_grenade_distract_position@@YGXPAUENTITY@@0PAUVEC3D@@@Z@4JA ; `get_smoke_grenade_distract_position'::`1'::__LINE__Var
PUBLIC	??_C@_06GEPNGEJI@weapon@			; `string'
PUBLIC	??_C@_07JBPBHDIL@grenade@			; `string'
PUBLIC	??_C@_0BC@GEIMKDDI@distract_position@		; `string'
PUBLIC	?__LINE__Var@?0??get_jammer_distract_position@@YGXPAUENTITY@@PAUVEC3D@@@Z@4JA ; `get_jammer_distract_position'::`1'::__LINE__Var
PUBLIC	??_C@_0BA@NENIEICJ@target_position@		; `string'
PUBLIC	?__LINE__Var@?0??get_decoy_type_for_weapon@@YGHPAUENTITY@@@Z@4JA ; `get_decoy_type_for_weapon'::`1'::__LINE__Var
PUBLIC	??_C@_0CC@OLGGCFIB@Invalid?5weapon?5guidance?5type?5?$DN?5@ ; `string'
PUBLIC	__real@3dcccccd
PUBLIC	__real@3f00002000400080
PUBLIC	__real@3f10000000000000
PUBLIC	__real@3fb999999999999a
PUBLIC	__real@3fc999999999999a
PUBLIC	__real@3fd999999999999a
PUBLIC	__real@3fe0000000000000
PUBLIC	__real@3ff0000000000000
PUBLIC	__real@40400000
PUBLIC	__real@4041800000000000
PUBLIC	__real@4049000000000000
EXTRN	?process_assert@@YGXPBD0H@Z:PROC		; process_assert
EXTRN	?debug_fatal@@YAXPBDZZ:PROC			; debug_fatal
EXTRN	?get_3d_terrain_point_data@@YGMMMPAUTERRAIN_3D_POINT_DATA@@@Z:PROC ; get_3d_terrain_point_data
EXTRN	?notify_local_entity@@YAHW4ENTITY_MESSAGES@@PAUENTITY@@1ZZ:PROC ; notify_local_entity
EXTRN	?system_delta_time@@3MA:DWORD			; system_delta_time
EXTRN	?random_number_seed@@3HA:DWORD			; random_number_seed
EXTRN	?command_line_chaff_effectiveness@@3MA:DWORD	; command_line_chaff_effectiveness
EXTRN	?command_line_flare_effectiveness@@3MA:DWORD	; command_line_flare_effectiveness
EXTRN	?command_line_smoke_effectiveness@@3MA:DWORD	; command_line_smoke_effectiveness
EXTRN	?null_entity_pointer_message@@3PBDB:DWORD	; null_entity_pointer_message
EXTRN	?system_comms_model@@3W4COMMS_MODEL_TYPES@@A:DWORD ; system_comms_model
EXTRN	?world_map@@3UWORLD_MAP_DATA@@A:BYTE		; world_map
EXTRN	?overload_invalid_list_type_message@@3PBDB:DWORD ; overload_invalid_list_type_message
EXTRN	?fn_get_local_entity_first_child@@3PAY0CN@P6GPAUENTITY@@PAU1@W4LIST_TYPES@@@ZA:BYTE ; fn_get_local_entity_first_child
EXTRN	?fn_get_local_entity_parent@@3PAY0CN@P6GPAUENTITY@@PAU1@W4LIST_TYPES@@@ZA:BYTE ; fn_get_local_entity_parent
EXTRN	?fn_get_local_entity_child_succ@@3PAY0CN@P6GPAUENTITY@@PAU1@W4LIST_TYPES@@@ZA:BYTE ; fn_get_local_entity_child_succ
EXTRN	?overload_invalid_vec3d_type_message@@3PBDB:DWORD ; overload_invalid_vec3d_type_message
EXTRN	?fn_get_local_entity_vec3d@@3PAY0BI@P6GXPAUENTITY@@W4VEC3D_TYPES@@PAUVEC3D@@@ZA:BYTE ; fn_get_local_entity_vec3d
EXTRN	?entities@@3PAUENTITY@@A:DWORD			; entities
EXTRN	?weapon_database@@3PAUWEAPON_DATA@@A:BYTE	; weapon_database
EXTRN	__fltused:DWORD
;	COMDAT __real@4049000000000000
CONST	SEGMENT
__real@4049000000000000 DQ 04049000000000000r	; 50
CONST	ENDS
;	COMDAT __real@4041800000000000
CONST	SEGMENT
__real@4041800000000000 DQ 04041800000000000r	; 35
CONST	ENDS
;	COMDAT __real@40400000
CONST	SEGMENT
__real@40400000 DD 040400000r			; 3
CONST	ENDS
;	COMDAT __real@3ff0000000000000
CONST	SEGMENT
__real@3ff0000000000000 DQ 03ff0000000000000r	; 1
CONST	ENDS
;	COMDAT __real@3fe0000000000000
CONST	SEGMENT
__real@3fe0000000000000 DQ 03fe0000000000000r	; 0.5
CONST	ENDS
;	COMDAT __real@3fd999999999999a
CONST	SEGMENT
__real@3fd999999999999a DQ 03fd999999999999ar	; 0.4
CONST	ENDS
;	COMDAT __real@3fc999999999999a
CONST	SEGMENT
__real@3fc999999999999a DQ 03fc999999999999ar	; 0.2
CONST	ENDS
;	COMDAT __real@3fb999999999999a
CONST	SEGMENT
__real@3fb999999999999a DQ 03fb999999999999ar	; 0.1
CONST	ENDS
;	COMDAT __real@3f10000000000000
CONST	SEGMENT
__real@3f10000000000000 DQ 03f10000000000000r	; 6.10352e-05
CONST	ENDS
;	COMDAT __real@3f00002000400080
CONST	SEGMENT
__real@3f00002000400080 DQ 03f00002000400080r	; 3.05185e-05
CONST	ENDS
;	COMDAT __real@3dcccccd
CONST	SEGMENT
__real@3dcccccd DD 03dcccccdr			; 0.1
CONST	ENDS
;	COMDAT ??_C@_0CC@OLGGCFIB@Invalid?5weapon?5guidance?5type?5?$DN?5@
CONST	SEGMENT
??_C@_0CC@OLGGCFIB@Invalid?5weapon?5guidance?5type?5?$DN?5@ DB 'Invalid w'
	DB	'eapon guidance type = %d', 00H		; `string'
CONST	ENDS
;	COMDAT ?__LINE__Var@?0??get_decoy_type_for_weapon@@YGHPAUENTITY@@@Z@4JA
_DATA	SEGMENT
?__LINE__Var@?0??get_decoy_type_for_weapon@@YGHPAUENTITY@@@Z@4JA DD 017aH ; `get_decoy_type_for_weapon'::`1'::__LINE__Var
_DATA	ENDS
;	COMDAT ??_C@_0BA@NENIEICJ@target_position@
CONST	SEGMENT
??_C@_0BA@NENIEICJ@target_position@ DB 'target_position', 00H ; `string'
CONST	ENDS
;	COMDAT ?__LINE__Var@?0??get_jammer_distract_position@@YGXPAUENTITY@@PAUVEC3D@@@Z@4JA
_DATA	SEGMENT
?__LINE__Var@?0??get_jammer_distract_position@@YGXPAUENTITY@@PAUVEC3D@@@Z@4JA DD 0163H ; `get_jammer_distract_position'::`1'::__LINE__Var
_DATA	ENDS
;	COMDAT ??_C@_0BC@GEIMKDDI@distract_position@
CONST	SEGMENT
??_C@_0BC@GEIMKDDI@distract_position@ DB 'distract_position', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_07JBPBHDIL@grenade@
CONST	SEGMENT
??_C@_07JBPBHDIL@grenade@ DB 'grenade', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_06GEPNGEJI@weapon@
CONST	SEGMENT
??_C@_06GEPNGEJI@weapon@ DB 'weapon', 00H		; `string'
CONST	ENDS
;	COMDAT ?__LINE__Var@?0??get_smoke_grenade_distract_position@@YGXPAUENTITY@@0PAUVEC3D@@@Z@4JA
_DATA	SEGMENT
?__LINE__Var@?0??get_smoke_grenade_distract_position@@YGXPAUENTITY@@0PAUVEC3D@@@Z@4JA DD 013eH ; `get_smoke_grenade_distract_position'::`1'::__LINE__Var
_DATA	ENDS
;	COMDAT ??_C@_0EI@DDCJBDPE@weapon_database?$FLraw?9?$DOmob?4sub_ty@
CONST	SEGMENT
??_C@_0EI@DDCJBDPE@weapon_database?$FLraw?9?$DOmob?4sub_ty@ DB 'weapon_da'
	DB	'tabase[raw->mob.sub_type].decoy_type != WEAPON_DECOY_TYPE_NON'
	DB	'E', 00H					; `string'
CONST	ENDS
;	COMDAT ??_C@_0CJ@DMBLBJBK@get_comms_model?5?$CI?$CJ?5?$DN?$DN?5COMMS_MOD@
CONST	SEGMENT
??_C@_0CJ@DMBLBJBK@get_comms_model?5?$CI?$CJ?5?$DN?$DN?5COMMS_MOD@ DB 'ge'
	DB	't_comms_model () == COMMS_MODEL_SERVER', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_02LFNMGJAP@en@
CONST	SEGMENT
??_C@_02LFNMGJAP@en@ DB 'en', 00H			; `string'
CONST	ENDS
;	COMDAT ??_C@_0EM@GKDIAKLN@c?3?2users?2nhv90?2projects?2eech?2ap@
CONST	SEGMENT
??_C@_0EM@GKDIAKLN@c?3?2users?2nhv90?2projects?2eech?2ap@ DB 'c:\users\nh'
	DB	'v90\projects\eech\aphavoc\source\entity\mobile\weapon\wn_deco'
	DB	'y.c', 00H					; `string'
CONST	ENDS
;	COMDAT ?__LINE__Var@?0??update_decoy@@YGXPAUENTITY@@@Z@4JA
_DATA	SEGMENT
?__LINE__Var@?0??update_decoy@@YGXPAUENTITY@@@Z@4JA DD 0110H ; `update_decoy'::`1'::__LINE__Var
_DATA	ENDS
;	COMDAT ??_C@_0BP@NAFKOIIC@Invalid?5weapon?5decoy?5type?5?$DN?5?$CFd@
CONST	SEGMENT
??_C@_0BP@NAFKOIIC@Invalid?5weapon?5decoy?5type?5?$DN?5?$CFd@ DB 'Invalid'
	DB	' weapon decoy type = %d', 00H		; `string'
CONST	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\entity\mobile\weapon\wn_decoy.c
;	COMDAT ?get_decoy_type_for_weapon@@YGHPAUENTITY@@@Z
_TEXT	SEGMENT
tv75 = -76						; size = 4
_weapon_sub_type$ = -8					; size = 4
_raw$ = -4						; size = 4
_en$ = 8						; size = 4
?get_decoy_type_for_weapon@@YGHPAUENTITY@@@Z PROC	; get_decoy_type_for_weapon, COMDAT

; 378  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 4c	 sub	 esp, 76			; 0000004cH
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 379  : 	weapon
; 380  : 		*raw;
; 381  : 
; 382  : 	entity_sub_types
; 383  : 		weapon_sub_type;
; 384  : 
; 385  : 	ASSERT (en);

  00009	83 7d 08 00	 cmp	 DWORD PTR _en$[ebp], 0
  0000d	75 18		 jne	 SHORT $LN4@get_decoy_
  0000f	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??get_decoy_type_for_weapon@@YGHPAUENTITY@@@Z@4JA
  00014	83 c0 07	 add	 eax, 7
  00017	50		 push	 eax
  00018	68 00 00 00 00	 push	 OFFSET ??_C@_0EM@GKDIAKLN@c?3?2users?2nhv90?2projects?2eech?2ap@
  0001d	68 00 00 00 00	 push	 OFFSET ??_C@_02LFNMGJAP@en@
  00022	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN4@get_decoy_:

; 386  : 
; 387  : 	raw = (weapon *) get_local_entity_data (en);

  00027	8b 45 08	 mov	 eax, DWORD PTR _en$[ebp]
  0002a	8b 48 04	 mov	 ecx, DWORD PTR [eax+4]
  0002d	89 4d fc	 mov	 DWORD PTR _raw$[ebp], ecx

; 388  : 
; 389  : 	switch (weapon_database[raw->mob.sub_type].guidance_type)

  00030	8b 45 fc	 mov	 eax, DWORD PTR _raw$[ebp]
  00033	69 08 e0 00 00
	00		 imul	 ecx, DWORD PTR [eax], 224
  00039	8b 91 18 00 00
	00		 mov	 edx, DWORD PTR ?weapon_database@@3PAUWEAPON_DATA@@A[ecx+24]
  0003f	89 55 b4	 mov	 DWORD PTR tv75[ebp], edx
  00042	83 7d b4 08	 cmp	 DWORD PTR tv75[ebp], 8
  00046	77 2e		 ja	 SHORT $LN9@get_decoy_
  00048	8b 45 b4	 mov	 eax, DWORD PTR tv75[ebp]
  0004b	ff 24 85 00 00
	00 00		 jmp	 DWORD PTR $LN11@get_decoy_[eax*4]
$LN5@get_decoy_:

; 390  : 	{
; 391  : 		////////////////////////////////////////
; 392  : 		case WEAPON_GUIDANCE_TYPE_NONE:
; 393  : 		////////////////////////////////////////
; 394  : 		{
; 395  : 			weapon_sub_type = ENTITY_SUB_TYPE_WEAPON_NO_WEAPON;

  00052	c7 45 f8 00 00
	00 00		 mov	 DWORD PTR _weapon_sub_type$[ebp], 0

; 396  : 
; 397  : 			break;

  00059	eb 38		 jmp	 SHORT $LN2@get_decoy_
$LN6@get_decoy_:

; 398  : 		}
; 399  : 		////////////////////////////////////////
; 400  : 		case WEAPON_GUIDANCE_TYPE_SEMI_ACTIVE_RADAR:
; 401  : 		case WEAPON_GUIDANCE_TYPE_ACTIVE_RADAR:
; 402  : 		case WEAPON_GUIDANCE_TYPE_RADIO_COMMAND:
; 403  : 		////////////////////////////////////////
; 404  : 		{
; 405  : 			weapon_sub_type = ENTITY_SUB_TYPE_WEAPON_CHAFF;

  0005b	c7 45 f8 43 00
	00 00		 mov	 DWORD PTR _weapon_sub_type$[ebp], 67 ; 00000043H

; 406  : 
; 407  : 			break;

  00062	eb 2f		 jmp	 SHORT $LN2@get_decoy_
$LN7@get_decoy_:

; 408  : 		}
; 409  : 		////////////////////////////////////////
; 410  : 		case WEAPON_GUIDANCE_TYPE_PASSIVE_INFRA_RED:
; 411  : 		////////////////////////////////////////
; 412  : 		{
; 413  : 			weapon_sub_type = ENTITY_SUB_TYPE_WEAPON_FLARE;

  00064	c7 45 f8 44 00
	00 00		 mov	 DWORD PTR _weapon_sub_type$[ebp], 68 ; 00000044H

; 414  : 
; 415  : 			break;

  0006b	eb 26		 jmp	 SHORT $LN2@get_decoy_
$LN8@get_decoy_:

; 416  : 		}
; 417  : 		////////////////////////////////////////
; 418  : 		case WEAPON_GUIDANCE_TYPE_SEMI_ACTIVE_LASER:
; 419  : 		case WEAPON_GUIDANCE_TYPE_SEMI_ACTIVE_LASER_BEAM_RIDING:
; 420  : 		case WEAPON_GUIDANCE_TYPE_ACTIVE_LASER:
; 421  : 		case WEAPON_GUIDANCE_TYPE_WIRE_GUIDED:
; 422  : 		////////////////////////////////////////
; 423  : 		{
; 424  : 			weapon_sub_type = ENTITY_SUB_TYPE_WEAPON_SMOKE_GRENADE;

  0006d	c7 45 f8 45 00
	00 00		 mov	 DWORD PTR _weapon_sub_type$[ebp], 69 ; 00000045H

; 425  : 
; 426  : 			break;

  00074	eb 1d		 jmp	 SHORT $LN2@get_decoy_
$LN9@get_decoy_:

; 427  : 		}
; 428  : 		////////////////////////////////////////
; 429  : 		default:
; 430  : 		////////////////////////////////////////
; 431  : 		{
; 432  : 			debug_fatal ("Invalid weapon guidance type = %d", weapon_database[raw->mob.sub_type].guidance_type);

  00076	8b 45 fc	 mov	 eax, DWORD PTR _raw$[ebp]
  00079	69 08 e0 00 00
	00		 imul	 ecx, DWORD PTR [eax], 224
  0007f	8b 91 18 00 00
	00		 mov	 edx, DWORD PTR ?weapon_database@@3PAUWEAPON_DATA@@A[ecx+24]
  00085	52		 push	 edx
  00086	68 00 00 00 00	 push	 OFFSET ??_C@_0CC@OLGGCFIB@Invalid?5weapon?5guidance?5type?5?$DN?5@
  0008b	e8 00 00 00 00	 call	 ?debug_fatal@@YAXPBDZZ	; debug_fatal
  00090	83 c4 08	 add	 esp, 8
$LN2@get_decoy_:

; 433  : 
; 434  : 			break;
; 435  : 		}
; 436  : 	}
; 437  : 
; 438  : 	return (weapon_sub_type);

  00093	8b 45 f8	 mov	 eax, DWORD PTR _weapon_sub_type$[ebp]

; 439  : }

  00096	5f		 pop	 edi
  00097	5e		 pop	 esi
  00098	5b		 pop	 ebx
  00099	8b e5		 mov	 esp, ebp
  0009b	5d		 pop	 ebp
  0009c	c2 04 00	 ret	 4
  0009f	90		 npad	 1
$LN11@get_decoy_:
  000a0	00 00 00 00	 DD	 $LN5@get_decoy_
  000a4	00 00 00 00	 DD	 $LN7@get_decoy_
  000a8	00 00 00 00	 DD	 $LN6@get_decoy_
  000ac	00 00 00 00	 DD	 $LN6@get_decoy_
  000b0	00 00 00 00	 DD	 $LN8@get_decoy_
  000b4	00 00 00 00	 DD	 $LN8@get_decoy_
  000b8	00 00 00 00	 DD	 $LN8@get_decoy_
  000bc	00 00 00 00	 DD	 $LN6@get_decoy_
  000c0	00 00 00 00	 DD	 $LN8@get_decoy_
?get_decoy_type_for_weapon@@YGHPAUENTITY@@@Z ENDP	; get_decoy_type_for_weapon
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\entity\mobile\weapon\wn_decoy.c
;	COMDAT ?get_jammer_distract_position@@YGXPAUENTITY@@PAUVEC3D@@@Z
_TEXT	SEGMENT
_seed$ = -4						; size = 4
_weapon$ = 8						; size = 4
_target_position$ = 12					; size = 4
?get_jammer_distract_position@@YGXPAUENTITY@@PAUVEC3D@@@Z PROC ; get_jammer_distract_position, COMDAT

; 355  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 44	 sub	 esp, 68			; 00000044H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 356  : 	int
; 357  : 		seed;
; 358  : 
; 359  : 	ASSERT (weapon);

  00009	83 7d 08 00	 cmp	 DWORD PTR _weapon$[ebp], 0
  0000d	75 18		 jne	 SHORT $LN2@get_jammer
  0000f	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??get_jammer_distract_position@@YGXPAUENTITY@@PAUVEC3D@@@Z@4JA
  00014	83 c0 04	 add	 eax, 4
  00017	50		 push	 eax
  00018	68 00 00 00 00	 push	 OFFSET ??_C@_0EM@GKDIAKLN@c?3?2users?2nhv90?2projects?2eech?2ap@
  0001d	68 00 00 00 00	 push	 OFFSET ??_C@_06GEPNGEJI@weapon@
  00022	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN2@get_jammer:

; 360  : 
; 361  : 	ASSERT (target_position);

  00027	83 7d 0c 00	 cmp	 DWORD PTR _target_position$[ebp], 0
  0002b	75 18		 jne	 SHORT $LN3@get_jammer
  0002d	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??get_jammer_distract_position@@YGXPAUENTITY@@PAUVEC3D@@@Z@4JA
  00032	83 c0 06	 add	 eax, 6
  00035	50		 push	 eax
  00036	68 00 00 00 00	 push	 OFFSET ??_C@_0EM@GKDIAKLN@c?3?2users?2nhv90?2projects?2eech?2ap@
  0003b	68 00 00 00 00	 push	 OFFSET ??_C@_0BA@NENIEICJ@target_position@
  00040	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN3@get_jammer:

; 362  : 
; 363  : 	seed = get_client_server_entity_random_number_seed (weapon);

  00045	8b 45 08	 mov	 eax, DWORD PTR _weapon$[ebp]
  00048	2b 05 00 00 00
	00		 sub	 eax, DWORD PTR ?entities@@3PAUENTITY@@A ; entities
  0004e	c1 f8 04	 sar	 eax, 4
  00051	89 45 fc	 mov	 DWORD PTR _seed$[ebp], eax

; 364  : 
; 365  : 	if (frand1x (&seed) > 0.5)

  00054	69 45 fc 6d 4e
	c6 41		 imul	 eax, DWORD PTR _seed$[ebp], 1103515245
  0005b	05 39 30 00 00	 add	 eax, 12345		; 00003039H
  00060	89 45 fc	 mov	 DWORD PTR _seed$[ebp], eax
  00063	8b 4d fc	 mov	 ecx, DWORD PTR _seed$[ebp]
  00066	c1 f9 10	 sar	 ecx, 16			; 00000010H
  00069	81 e1 ff 7f 00
	00		 and	 ecx, 32767		; 00007fffH
  0006f	f2 0f 2a c1	 cvtsi2sd xmm0, ecx
  00073	f2 0f 59 05 00
	00 00 00	 mulsd	 xmm0, QWORD PTR __real@3f00002000400080
  0007b	66 0f 2f 05 00
	00 00 00	 comisd	 xmm0, QWORD PTR __real@3fe0000000000000
  00083	0f 86 e5 00 00
	00		 jbe	 $LN4@get_jammer

; 366  : 	{
; 367  : 		target_position->x += sfrand1x (&seed) * 35.0;

  00089	69 45 fc 6d 4e
	c6 41		 imul	 eax, DWORD PTR _seed$[ebp], 1103515245
  00090	05 39 30 00 00	 add	 eax, 12345		; 00003039H
  00095	89 45 fc	 mov	 DWORD PTR _seed$[ebp], eax
  00098	8b 4d fc	 mov	 ecx, DWORD PTR _seed$[ebp]
  0009b	c1 f9 10	 sar	 ecx, 16			; 00000010H
  0009e	81 e1 ff 7f 00
	00		 and	 ecx, 32767		; 00007fffH
  000a4	81 e9 00 40 00
	00		 sub	 ecx, 16384		; 00004000H
  000aa	f2 0f 2a c1	 cvtsi2sd xmm0, ecx
  000ae	f2 0f 59 05 00
	00 00 00	 mulsd	 xmm0, QWORD PTR __real@3f10000000000000
  000b6	f2 0f 59 05 00
	00 00 00	 mulsd	 xmm0, QWORD PTR __real@4041800000000000
  000be	8b 55 0c	 mov	 edx, DWORD PTR _target_position$[ebp]
  000c1	f3 0f 5a 0a	 cvtss2sd xmm1, DWORD PTR [edx]
  000c5	f2 0f 58 c8	 addsd	 xmm1, xmm0
  000c9	f2 0f 5a c1	 cvtsd2ss xmm0, xmm1
  000cd	8b 45 0c	 mov	 eax, DWORD PTR _target_position$[ebp]
  000d0	f3 0f 11 00	 movss	 DWORD PTR [eax], xmm0

; 368  : 		target_position->y += sfrand1x (&seed) * 35.0;

  000d4	69 45 fc 6d 4e
	c6 41		 imul	 eax, DWORD PTR _seed$[ebp], 1103515245
  000db	05 39 30 00 00	 add	 eax, 12345		; 00003039H
  000e0	89 45 fc	 mov	 DWORD PTR _seed$[ebp], eax
  000e3	8b 4d fc	 mov	 ecx, DWORD PTR _seed$[ebp]
  000e6	c1 f9 10	 sar	 ecx, 16			; 00000010H
  000e9	81 e1 ff 7f 00
	00		 and	 ecx, 32767		; 00007fffH
  000ef	81 e9 00 40 00
	00		 sub	 ecx, 16384		; 00004000H
  000f5	f2 0f 2a c1	 cvtsi2sd xmm0, ecx
  000f9	f2 0f 59 05 00
	00 00 00	 mulsd	 xmm0, QWORD PTR __real@3f10000000000000
  00101	f2 0f 59 05 00
	00 00 00	 mulsd	 xmm0, QWORD PTR __real@4041800000000000
  00109	8b 55 0c	 mov	 edx, DWORD PTR _target_position$[ebp]
  0010c	f3 0f 5a 4a 04	 cvtss2sd xmm1, DWORD PTR [edx+4]
  00111	f2 0f 58 c8	 addsd	 xmm1, xmm0
  00115	f2 0f 5a c1	 cvtsd2ss xmm0, xmm1
  00119	8b 45 0c	 mov	 eax, DWORD PTR _target_position$[ebp]
  0011c	f3 0f 11 40 04	 movss	 DWORD PTR [eax+4], xmm0

; 369  : 		target_position->z += sfrand1x (&seed) * 35.0;

  00121	69 45 fc 6d 4e
	c6 41		 imul	 eax, DWORD PTR _seed$[ebp], 1103515245
  00128	05 39 30 00 00	 add	 eax, 12345		; 00003039H
  0012d	89 45 fc	 mov	 DWORD PTR _seed$[ebp], eax
  00130	8b 4d fc	 mov	 ecx, DWORD PTR _seed$[ebp]
  00133	c1 f9 10	 sar	 ecx, 16			; 00000010H
  00136	81 e1 ff 7f 00
	00		 and	 ecx, 32767		; 00007fffH
  0013c	81 e9 00 40 00
	00		 sub	 ecx, 16384		; 00004000H
  00142	f2 0f 2a c1	 cvtsi2sd xmm0, ecx
  00146	f2 0f 59 05 00
	00 00 00	 mulsd	 xmm0, QWORD PTR __real@3f10000000000000
  0014e	f2 0f 59 05 00
	00 00 00	 mulsd	 xmm0, QWORD PTR __real@4041800000000000
  00156	8b 55 0c	 mov	 edx, DWORD PTR _target_position$[ebp]
  00159	f3 0f 5a 4a 08	 cvtss2sd xmm1, DWORD PTR [edx+8]
  0015e	f2 0f 58 c8	 addsd	 xmm1, xmm0
  00162	f2 0f 5a c1	 cvtsd2ss xmm0, xmm1
  00166	8b 45 0c	 mov	 eax, DWORD PTR _target_position$[ebp]
  00169	f3 0f 11 40 08	 movss	 DWORD PTR [eax+8], xmm0
$LN4@get_jammer:

; 370  : 	}
; 371  : }

  0016e	5f		 pop	 edi
  0016f	5e		 pop	 esi
  00170	5b		 pop	 ebx
  00171	8b e5		 mov	 esp, ebp
  00173	5d		 pop	 ebp
  00174	c2 08 00	 ret	 8
?get_jammer_distract_position@@YGXPAUENTITY@@PAUVEC3D@@@Z ENDP ; get_jammer_distract_position
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\entity\mobile\weapon\wn_decoy.c
;	COMDAT ?get_smoke_grenade_distract_position@@YGXPAUENTITY@@0PAUVEC3D@@@Z
_TEXT	SEGMENT
tv95 = -88						; size = 4
tv87 = -84						; size = 4
_grenade_position$ = -16				; size = 12
_seed$ = -4						; size = 4
_weapon$ = 8						; size = 4
_grenade$ = 12						; size = 4
_distract_position$ = 16				; size = 4
?get_smoke_grenade_distract_position@@YGXPAUENTITY@@0PAUVEC3D@@@Z PROC ; get_smoke_grenade_distract_position, COMDAT

; 318  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 58	 sub	 esp, 88			; 00000058H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 319  : 	int
; 320  : 		seed;
; 321  : 
; 322  : 	vec3d
; 323  : 		grenade_position;
; 324  : 
; 325  : 	ASSERT (weapon);

  00009	83 7d 08 00	 cmp	 DWORD PTR _weapon$[ebp], 0
  0000d	75 18		 jne	 SHORT $LN2@get_smoke_
  0000f	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??get_smoke_grenade_distract_position@@YGXPAUENTITY@@0PAUVEC3D@@@Z@4JA
  00014	83 c0 07	 add	 eax, 7
  00017	50		 push	 eax
  00018	68 00 00 00 00	 push	 OFFSET ??_C@_0EM@GKDIAKLN@c?3?2users?2nhv90?2projects?2eech?2ap@
  0001d	68 00 00 00 00	 push	 OFFSET ??_C@_06GEPNGEJI@weapon@
  00022	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN2@get_smoke_:

; 326  : 
; 327  : 	ASSERT (grenade);

  00027	83 7d 0c 00	 cmp	 DWORD PTR _grenade$[ebp], 0
  0002b	75 18		 jne	 SHORT $LN3@get_smoke_
  0002d	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??get_smoke_grenade_distract_position@@YGXPAUENTITY@@0PAUVEC3D@@@Z@4JA
  00032	83 c0 09	 add	 eax, 9
  00035	50		 push	 eax
  00036	68 00 00 00 00	 push	 OFFSET ??_C@_0EM@GKDIAKLN@c?3?2users?2nhv90?2projects?2eech?2ap@
  0003b	68 00 00 00 00	 push	 OFFSET ??_C@_07JBPBHDIL@grenade@
  00040	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN3@get_smoke_:

; 328  : 
; 329  : 	ASSERT (distract_position);

  00045	83 7d 10 00	 cmp	 DWORD PTR _distract_position$[ebp], 0
  00049	75 18		 jne	 SHORT $LN4@get_smoke_
  0004b	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??get_smoke_grenade_distract_position@@YGXPAUENTITY@@0PAUVEC3D@@@Z@4JA
  00050	83 c0 0b	 add	 eax, 11			; 0000000bH
  00053	50		 push	 eax
  00054	68 00 00 00 00	 push	 OFFSET ??_C@_0EM@GKDIAKLN@c?3?2users?2nhv90?2projects?2eech?2ap@
  00059	68 00 00 00 00	 push	 OFFSET ??_C@_0BC@GEIMKDDI@distract_position@
  0005e	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN4@get_smoke_:

; 330  : 
; 331  : 	seed = get_client_server_entity_random_number_seed (weapon);

  00063	8b 45 08	 mov	 eax, DWORD PTR _weapon$[ebp]
  00066	2b 05 00 00 00
	00		 sub	 eax, DWORD PTR ?entities@@3PAUENTITY@@A ; entities
  0006c	c1 f8 04	 sar	 eax, 4
  0006f	89 45 fc	 mov	 DWORD PTR _seed$[ebp], eax

; 332  : 
; 333  : 	get_local_entity_vec3d (grenade, VEC3D_TYPE_POSITION, &grenade_position);

  00072	83 7d 0c 00	 cmp	 DWORD PTR _grenade$[ebp], 0
  00076	74 0a		 je	 SHORT $LN8@get_smoke_
  00078	8b 45 0c	 mov	 eax, DWORD PTR _grenade$[ebp]
  0007b	8b 08		 mov	 ecx, DWORD PTR [eax]
  0007d	89 4d ac	 mov	 DWORD PTR tv87[ebp], ecx
  00080	eb 21		 jmp	 SHORT $LN9@get_smoke_
$LN8@get_smoke_:
  00082	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??get_smoke_grenade_distract_position@@YGXPAUENTITY@@0PAUVEC3D@@@Z@4JA
  00088	83 c2 0f	 add	 edx, 15			; 0000000fH
  0008b	52		 push	 edx
  0008c	68 00 00 00 00	 push	 OFFSET ??_C@_0EM@GKDIAKLN@c?3?2users?2nhv90?2projects?2eech?2ap@
  00091	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  00096	50		 push	 eax
  00097	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  0009c	c7 45 ac 00 00
	00 00		 mov	 DWORD PTR tv87[ebp], 0
$LN9@get_smoke_:
  000a3	b9 01 00 00 00	 mov	 ecx, 1
  000a8	85 c9		 test	 ecx, ecx
  000aa	74 09		 je	 SHORT $LN10@get_smoke_
  000ac	c7 45 a8 08 00
	00 00		 mov	 DWORD PTR tv95[ebp], 8
  000b3	eb 21		 jmp	 SHORT $LN11@get_smoke_
$LN10@get_smoke_:
  000b5	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??get_smoke_grenade_distract_position@@YGXPAUENTITY@@0PAUVEC3D@@@Z@4JA
  000bb	83 c2 0f	 add	 edx, 15			; 0000000fH
  000be	52		 push	 edx
  000bf	68 00 00 00 00	 push	 OFFSET ??_C@_0EM@GKDIAKLN@c?3?2users?2nhv90?2projects?2eech?2ap@
  000c4	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_vec3d_type_message@@3PBDB ; overload_invalid_vec3d_type_message
  000c9	50		 push	 eax
  000ca	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  000cf	c7 45 a8 00 00
	00 00		 mov	 DWORD PTR tv95[ebp], 0
$LN11@get_smoke_:
  000d6	8d 4d f0	 lea	 ecx, DWORD PTR _grenade_position$[ebp]
  000d9	51		 push	 ecx
  000da	6a 08		 push	 8
  000dc	8b 55 0c	 mov	 edx, DWORD PTR _grenade$[ebp]
  000df	52		 push	 edx
  000e0	6b 45 ac 60	 imul	 eax, DWORD PTR tv87[ebp], 96
  000e4	8b 4d a8	 mov	 ecx, DWORD PTR tv95[ebp]
  000e7	8b 94 88 00 00
	00 00		 mov	 edx, DWORD PTR ?fn_get_local_entity_vec3d@@3PAY0BI@P6GXPAUENTITY@@W4VEC3D_TYPES@@PAUVEC3D@@@ZA[eax+ecx*4]
  000ee	ff d2		 call	 edx

; 334  : 
; 335  : 	*distract_position = grenade_position;

  000f0	8b 45 10	 mov	 eax, DWORD PTR _distract_position$[ebp]
  000f3	8b 4d f0	 mov	 ecx, DWORD PTR _grenade_position$[ebp]
  000f6	89 08		 mov	 DWORD PTR [eax], ecx
  000f8	8b 55 f4	 mov	 edx, DWORD PTR _grenade_position$[ebp+4]
  000fb	89 50 04	 mov	 DWORD PTR [eax+4], edx
  000fe	8b 4d f8	 mov	 ecx, DWORD PTR _grenade_position$[ebp+8]
  00101	89 48 08	 mov	 DWORD PTR [eax+8], ecx

; 336  : 
; 337  : 	distract_position->x += sfrand1x (&seed) * 50.0;

  00104	69 45 fc 6d 4e
	c6 41		 imul	 eax, DWORD PTR _seed$[ebp], 1103515245
  0010b	05 39 30 00 00	 add	 eax, 12345		; 00003039H
  00110	89 45 fc	 mov	 DWORD PTR _seed$[ebp], eax
  00113	8b 4d fc	 mov	 ecx, DWORD PTR _seed$[ebp]
  00116	c1 f9 10	 sar	 ecx, 16			; 00000010H
  00119	81 e1 ff 7f 00
	00		 and	 ecx, 32767		; 00007fffH
  0011f	81 e9 00 40 00
	00		 sub	 ecx, 16384		; 00004000H
  00125	f2 0f 2a c1	 cvtsi2sd xmm0, ecx
  00129	f2 0f 59 05 00
	00 00 00	 mulsd	 xmm0, QWORD PTR __real@3f10000000000000
  00131	f2 0f 59 05 00
	00 00 00	 mulsd	 xmm0, QWORD PTR __real@4049000000000000
  00139	8b 55 10	 mov	 edx, DWORD PTR _distract_position$[ebp]
  0013c	f3 0f 5a 0a	 cvtss2sd xmm1, DWORD PTR [edx]
  00140	f2 0f 58 c8	 addsd	 xmm1, xmm0
  00144	f2 0f 5a c1	 cvtsd2ss xmm0, xmm1
  00148	8b 45 10	 mov	 eax, DWORD PTR _distract_position$[ebp]
  0014b	f3 0f 11 00	 movss	 DWORD PTR [eax], xmm0

; 338  : 	distract_position->z += sfrand1x (&seed) * 50.0;

  0014f	69 45 fc 6d 4e
	c6 41		 imul	 eax, DWORD PTR _seed$[ebp], 1103515245
  00156	05 39 30 00 00	 add	 eax, 12345		; 00003039H
  0015b	89 45 fc	 mov	 DWORD PTR _seed$[ebp], eax
  0015e	8b 4d fc	 mov	 ecx, DWORD PTR _seed$[ebp]
  00161	c1 f9 10	 sar	 ecx, 16			; 00000010H
  00164	81 e1 ff 7f 00
	00		 and	 ecx, 32767		; 00007fffH
  0016a	81 e9 00 40 00
	00		 sub	 ecx, 16384		; 00004000H
  00170	f2 0f 2a c1	 cvtsi2sd xmm0, ecx
  00174	f2 0f 59 05 00
	00 00 00	 mulsd	 xmm0, QWORD PTR __real@3f10000000000000
  0017c	f2 0f 59 05 00
	00 00 00	 mulsd	 xmm0, QWORD PTR __real@4049000000000000
  00184	8b 55 10	 mov	 edx, DWORD PTR _distract_position$[ebp]
  00187	f3 0f 5a 4a 08	 cvtss2sd xmm1, DWORD PTR [edx+8]
  0018c	f2 0f 58 c8	 addsd	 xmm1, xmm0
  00190	f2 0f 5a c1	 cvtsd2ss xmm0, xmm1
  00194	8b 45 10	 mov	 eax, DWORD PTR _distract_position$[ebp]
  00197	f3 0f 11 40 08	 movss	 DWORD PTR [eax+8], xmm0

; 339  : 
; 340  : 	if (point_inside_map_area (distract_position))

  0019c	8b 45 10	 mov	 eax, DWORD PTR _distract_position$[ebp]
  0019f	f3 0f 10 00	 movss	 xmm0, DWORD PTR [eax]
  001a3	0f 2f 05 24 00
	00 00		 comiss	 xmm0, DWORD PTR ?world_map@@3UWORLD_MAP_DATA@@A+36
  001aa	72 5c		 jb	 SHORT $LN5@get_smoke_
  001ac	8b 45 10	 mov	 eax, DWORD PTR _distract_position$[ebp]
  001af	f3 0f 10 05 3c
	00 00 00	 movss	 xmm0, DWORD PTR ?world_map@@3UWORLD_MAP_DATA@@A+60
  001b7	0f 2f 00	 comiss	 xmm0, DWORD PTR [eax]
  001ba	72 4c		 jb	 SHORT $LN5@get_smoke_
  001bc	8b 45 10	 mov	 eax, DWORD PTR _distract_position$[ebp]
  001bf	f3 0f 10 40 08	 movss	 xmm0, DWORD PTR [eax+8]
  001c4	0f 2f 05 2c 00
	00 00		 comiss	 xmm0, DWORD PTR ?world_map@@3UWORLD_MAP_DATA@@A+44
  001cb	72 3b		 jb	 SHORT $LN5@get_smoke_
  001cd	8b 45 10	 mov	 eax, DWORD PTR _distract_position$[ebp]
  001d0	f3 0f 10 05 44
	00 00 00	 movss	 xmm0, DWORD PTR ?world_map@@3UWORLD_MAP_DATA@@A+68
  001d8	0f 2f 40 08	 comiss	 xmm0, DWORD PTR [eax+8]
  001dc	72 2a		 jb	 SHORT $LN5@get_smoke_

; 341  : 	{
; 342  : 		distract_position->y = get_3d_terrain_elevation (distract_position->x, distract_position->z);

  001de	6a 00		 push	 0
  001e0	8b 45 10	 mov	 eax, DWORD PTR _distract_position$[ebp]
  001e3	f3 0f 10 40 08	 movss	 xmm0, DWORD PTR [eax+8]
  001e8	51		 push	 ecx
  001e9	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  001ee	8b 4d 10	 mov	 ecx, DWORD PTR _distract_position$[ebp]
  001f1	f3 0f 10 01	 movss	 xmm0, DWORD PTR [ecx]
  001f5	51		 push	 ecx
  001f6	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  001fb	e8 00 00 00 00	 call	 ?get_3d_terrain_point_data@@YGMMMPAUTERRAIN_3D_POINT_DATA@@@Z ; get_3d_terrain_point_data
  00200	8b 55 10	 mov	 edx, DWORD PTR _distract_position$[ebp]
  00203	d9 5a 04	 fstp	 DWORD PTR [edx+4]

; 343  : 	}
; 344  : 	else

  00206	eb 14		 jmp	 SHORT $LN6@get_smoke_
$LN5@get_smoke_:

; 345  : 	{
; 346  : 		*distract_position = grenade_position;

  00208	8b 45 10	 mov	 eax, DWORD PTR _distract_position$[ebp]
  0020b	8b 4d f0	 mov	 ecx, DWORD PTR _grenade_position$[ebp]
  0020e	89 08		 mov	 DWORD PTR [eax], ecx
  00210	8b 55 f4	 mov	 edx, DWORD PTR _grenade_position$[ebp+4]
  00213	89 50 04	 mov	 DWORD PTR [eax+4], edx
  00216	8b 4d f8	 mov	 ecx, DWORD PTR _grenade_position$[ebp+8]
  00219	89 48 08	 mov	 DWORD PTR [eax+8], ecx
$LN6@get_smoke_:

; 347  : 	}
; 348  : }

  0021c	5f		 pop	 edi
  0021d	5e		 pop	 esi
  0021e	5b		 pop	 ebx
  0021f	8b e5		 mov	 esp, ebp
  00221	5d		 pop	 ebp
  00222	c2 0c 00	 ret	 12			; 0000000cH
?get_smoke_grenade_distract_position@@YGXPAUENTITY@@0PAUVEC3D@@@Z ENDP ; get_smoke_grenade_distract_position
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\entity\mobile\weapon\wn_decoy.c
;	COMDAT ?update_decoy@@YGXPAUENTITY@@@Z
_TEXT	SEGMENT
tv187 = -88						; size = 4
tv166 = -88						; size = 4
tv145 = -88						; size = 4
tv179 = -84						; size = 4
tv158 = -84						; size = 4
tv137 = -84						; size = 4
_succ$ = -16						; size = 4
_locked_on_weapon$ = -12				; size = 4
_launcher$ = -8						; size = 4
_raw$ = -4						; size = 4
_en$ = 8						; size = 4
?update_decoy@@YGXPAUENTITY@@@Z PROC			; update_decoy, COMDAT

; 272  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 58	 sub	 esp, 88			; 00000058H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 273  : 	weapon
; 274  : 		*raw;
; 275  : 
; 276  : 	entity
; 277  : 		*launcher,
; 278  : 		*locked_on_weapon,
; 279  : 		*succ;
; 280  : 
; 281  : 	ASSERT (en);

  00009	83 7d 08 00	 cmp	 DWORD PTR _en$[ebp], 0
  0000d	75 18		 jne	 SHORT $LN4@update_dec
  0000f	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??update_decoy@@YGXPAUENTITY@@@Z@4JA
  00014	83 c0 09	 add	 eax, 9
  00017	50		 push	 eax
  00018	68 00 00 00 00	 push	 OFFSET ??_C@_0EM@GKDIAKLN@c?3?2users?2nhv90?2projects?2eech?2ap@
  0001d	68 00 00 00 00	 push	 OFFSET ??_C@_02LFNMGJAP@en@
  00022	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN4@update_dec:

; 282  : 
; 283  : 	ASSERT (get_comms_model () == COMMS_MODEL_SERVER);

  00027	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?system_comms_model@@3W4COMMS_MODEL_TYPES@@A, 0 ; system_comms_model
  0002e	74 18		 je	 SHORT $LN5@update_dec
  00030	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??update_decoy@@YGXPAUENTITY@@@Z@4JA
  00035	83 c0 0b	 add	 eax, 11			; 0000000bH
  00038	50		 push	 eax
  00039	68 00 00 00 00	 push	 OFFSET ??_C@_0EM@GKDIAKLN@c?3?2users?2nhv90?2projects?2eech?2ap@
  0003e	68 00 00 00 00	 push	 OFFSET ??_C@_0CJ@DMBLBJBK@get_comms_model?5?$CI?$CJ?5?$DN?$DN?5COMMS_MOD@
  00043	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN5@update_dec:

; 284  : 
; 285  : 	raw = (weapon *) get_local_entity_data (en);

  00048	8b 45 08	 mov	 eax, DWORD PTR _en$[ebp]
  0004b	8b 48 04	 mov	 ecx, DWORD PTR [eax+4]
  0004e	89 4d fc	 mov	 DWORD PTR _raw$[ebp], ecx

; 286  : 
; 287  : 	ASSERT (weapon_database[raw->mob.sub_type].decoy_type != WEAPON_DECOY_TYPE_NONE);

  00051	8b 45 fc	 mov	 eax, DWORD PTR _raw$[ebp]
  00054	69 08 e0 00 00
	00		 imul	 ecx, DWORD PTR [eax], 224
  0005a	83 b9 20 00 00
	00 00		 cmp	 DWORD PTR ?weapon_database@@3PAUWEAPON_DATA@@A[ecx+32], 0
  00061	75 18		 jne	 SHORT $LN6@update_dec
  00063	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??update_decoy@@YGXPAUENTITY@@@Z@4JA
  00068	83 c0 0f	 add	 eax, 15			; 0000000fH
  0006b	50		 push	 eax
  0006c	68 00 00 00 00	 push	 OFFSET ??_C@_0EM@GKDIAKLN@c?3?2users?2nhv90?2projects?2eech?2ap@
  00071	68 00 00 00 00	 push	 OFFSET ??_C@_0EI@DDCJBDPE@weapon_database?$FLraw?9?$DOmob?4sub_ty@
  00076	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN6@update_dec:

; 288  : 
; 289  : 	raw->decoy_timer -= get_delta_time ();

  0007b	8b 45 fc	 mov	 eax, DWORD PTR _raw$[ebp]
  0007e	f3 0f 10 80 84
	00 00 00	 movss	 xmm0, DWORD PTR [eax+132]
  00086	f3 0f 5c 05 00
	00 00 00	 subss	 xmm0, DWORD PTR ?system_delta_time@@3MA
  0008e	8b 4d fc	 mov	 ecx, DWORD PTR _raw$[ebp]
  00091	f3 0f 11 81 84
	00 00 00	 movss	 DWORD PTR [ecx+132], xmm0

; 290  : 
; 291  : 	if (raw->decoy_timer < 0.0)

  00099	8b 45 fc	 mov	 eax, DWORD PTR _raw$[ebp]
  0009c	f3 0f 5a 80 84
	00 00 00	 cvtss2sd xmm0, DWORD PTR [eax+132]
  000a4	0f 57 c9	 xorps	 xmm1, xmm1
  000a7	66 0f 2f c8	 comisd	 xmm1, xmm0
  000ab	0f 86 cf 01 00
	00		 jbe	 $LN3@update_dec

; 292  : 	{
; 293  : 		raw->decoy_timer = get_decoy_timer_restart_value (weapon_database[raw->mob.sub_type].decoy_type);

  000b1	8b 45 fc	 mov	 eax, DWORD PTR _raw$[ebp]
  000b4	69 08 e0 00 00
	00		 imul	 ecx, DWORD PTR [eax], 224
  000ba	8b 91 20 00 00
	00		 mov	 edx, DWORD PTR ?weapon_database@@3PAUWEAPON_DATA@@A[ecx+32]
  000c0	52		 push	 edx
  000c1	e8 00 00 00 00	 call	 ?get_decoy_timer_restart_value@@YGMW4WEAPON_DECOY_TYPES@@@Z ; get_decoy_timer_restart_value
  000c6	8b 45 fc	 mov	 eax, DWORD PTR _raw$[ebp]
  000c9	d9 98 84 00 00
	00		 fstp	 DWORD PTR [eax+132]

; 294  : 
; 295  : 		launcher = get_local_entity_parent (en, LIST_TYPE_LAUNCHED_WEAPON);

  000cf	83 7d 08 00	 cmp	 DWORD PTR _en$[ebp], 0
  000d3	74 0a		 je	 SHORT $LN10@update_dec
  000d5	8b 45 08	 mov	 eax, DWORD PTR _en$[ebp]
  000d8	8b 08		 mov	 ecx, DWORD PTR [eax]
  000da	89 4d ac	 mov	 DWORD PTR tv137[ebp], ecx
  000dd	eb 21		 jmp	 SHORT $LN11@update_dec
$LN10@update_dec:
  000df	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??update_decoy@@YGXPAUENTITY@@@Z@4JA
  000e5	83 c2 17	 add	 edx, 23			; 00000017H
  000e8	52		 push	 edx
  000e9	68 00 00 00 00	 push	 OFFSET ??_C@_0EM@GKDIAKLN@c?3?2users?2nhv90?2projects?2eech?2ap@
  000ee	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  000f3	50		 push	 eax
  000f4	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  000f9	c7 45 ac 00 00
	00 00		 mov	 DWORD PTR tv137[ebp], 0
$LN11@update_dec:
  00100	b9 01 00 00 00	 mov	 ecx, 1
  00105	85 c9		 test	 ecx, ecx
  00107	74 09		 je	 SHORT $LN12@update_dec
  00109	c7 45 a8 18 00
	00 00		 mov	 DWORD PTR tv145[ebp], 24 ; 00000018H
  00110	eb 21		 jmp	 SHORT $LN13@update_dec
$LN12@update_dec:
  00112	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??update_decoy@@YGXPAUENTITY@@@Z@4JA
  00118	83 c2 17	 add	 edx, 23			; 00000017H
  0011b	52		 push	 edx
  0011c	68 00 00 00 00	 push	 OFFSET ??_C@_0EM@GKDIAKLN@c?3?2users?2nhv90?2projects?2eech?2ap@
  00121	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_list_type_message@@3PBDB ; overload_invalid_list_type_message
  00126	50		 push	 eax
  00127	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  0012c	c7 45 a8 00 00
	00 00		 mov	 DWORD PTR tv145[ebp], 0
$LN13@update_dec:
  00133	6a 18		 push	 24			; 00000018H
  00135	8b 4d 08	 mov	 ecx, DWORD PTR _en$[ebp]
  00138	51		 push	 ecx
  00139	69 55 ac b4 00
	00 00		 imul	 edx, DWORD PTR tv137[ebp], 180
  00140	8b 45 a8	 mov	 eax, DWORD PTR tv145[ebp]
  00143	8b 8c 82 00 00
	00 00		 mov	 ecx, DWORD PTR ?fn_get_local_entity_parent@@3PAY0CN@P6GPAUENTITY@@PAU1@W4LIST_TYPES@@@ZA[edx+eax*4]
  0014a	ff d1		 call	 ecx
  0014c	89 45 f8	 mov	 DWORD PTR _launcher$[ebp], eax

; 296  : 
; 297  : 		if (launcher)

  0014f	83 7d f8 00	 cmp	 DWORD PTR _launcher$[ebp], 0
  00153	0f 84 27 01 00
	00		 je	 $LN3@update_dec

; 298  : 		{
; 299  : 			locked_on_weapon = get_local_entity_first_child (launcher, LIST_TYPE_TARGET);

  00159	83 7d f8 00	 cmp	 DWORD PTR _launcher$[ebp], 0
  0015d	74 0a		 je	 SHORT $LN14@update_dec
  0015f	8b 45 f8	 mov	 eax, DWORD PTR _launcher$[ebp]
  00162	8b 08		 mov	 ecx, DWORD PTR [eax]
  00164	89 4d ac	 mov	 DWORD PTR tv158[ebp], ecx
  00167	eb 21		 jmp	 SHORT $LN15@update_dec
$LN14@update_dec:
  00169	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??update_decoy@@YGXPAUENTITY@@@Z@4JA
  0016f	83 c2 1b	 add	 edx, 27			; 0000001bH
  00172	52		 push	 edx
  00173	68 00 00 00 00	 push	 OFFSET ??_C@_0EM@GKDIAKLN@c?3?2users?2nhv90?2projects?2eech?2ap@
  00178	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  0017d	50		 push	 eax
  0017e	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00183	c7 45 ac 00 00
	00 00		 mov	 DWORD PTR tv158[ebp], 0
$LN15@update_dec:
  0018a	b9 01 00 00 00	 mov	 ecx, 1
  0018f	85 c9		 test	 ecx, ecx
  00191	74 09		 je	 SHORT $LN16@update_dec
  00193	c7 45 a8 26 00
	00 00		 mov	 DWORD PTR tv166[ebp], 38 ; 00000026H
  0019a	eb 21		 jmp	 SHORT $LN17@update_dec
$LN16@update_dec:
  0019c	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??update_decoy@@YGXPAUENTITY@@@Z@4JA
  001a2	83 c2 1b	 add	 edx, 27			; 0000001bH
  001a5	52		 push	 edx
  001a6	68 00 00 00 00	 push	 OFFSET ??_C@_0EM@GKDIAKLN@c?3?2users?2nhv90?2projects?2eech?2ap@
  001ab	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_list_type_message@@3PBDB ; overload_invalid_list_type_message
  001b0	50		 push	 eax
  001b1	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  001b6	c7 45 a8 00 00
	00 00		 mov	 DWORD PTR tv166[ebp], 0
$LN17@update_dec:
  001bd	6a 26		 push	 38			; 00000026H
  001bf	8b 4d f8	 mov	 ecx, DWORD PTR _launcher$[ebp]
  001c2	51		 push	 ecx
  001c3	69 55 ac b4 00
	00 00		 imul	 edx, DWORD PTR tv158[ebp], 180
  001ca	8b 45 a8	 mov	 eax, DWORD PTR tv166[ebp]
  001cd	8b 8c 82 00 00
	00 00		 mov	 ecx, DWORD PTR ?fn_get_local_entity_first_child@@3PAY0CN@P6GPAUENTITY@@PAU1@W4LIST_TYPES@@@ZA[edx+eax*4]
  001d4	ff d1		 call	 ecx
  001d6	89 45 f4	 mov	 DWORD PTR _locked_on_weapon$[ebp], eax
$LN2@update_dec:

; 300  : 
; 301  : 			while (locked_on_weapon)

  001d9	83 7d f4 00	 cmp	 DWORD PTR _locked_on_weapon$[ebp], 0
  001dd	0f 84 9d 00 00
	00		 je	 $LN3@update_dec

; 302  : 			{
; 303  : 				succ = get_local_entity_child_succ (locked_on_weapon, LIST_TYPE_TARGET);

  001e3	83 7d f4 00	 cmp	 DWORD PTR _locked_on_weapon$[ebp], 0
  001e7	74 0a		 je	 SHORT $LN18@update_dec
  001e9	8b 45 f4	 mov	 eax, DWORD PTR _locked_on_weapon$[ebp]
  001ec	8b 08		 mov	 ecx, DWORD PTR [eax]
  001ee	89 4d ac	 mov	 DWORD PTR tv179[ebp], ecx
  001f1	eb 21		 jmp	 SHORT $LN19@update_dec
$LN18@update_dec:
  001f3	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??update_decoy@@YGXPAUENTITY@@@Z@4JA
  001f9	83 c2 1f	 add	 edx, 31			; 0000001fH
  001fc	52		 push	 edx
  001fd	68 00 00 00 00	 push	 OFFSET ??_C@_0EM@GKDIAKLN@c?3?2users?2nhv90?2projects?2eech?2ap@
  00202	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  00207	50		 push	 eax
  00208	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  0020d	c7 45 ac 00 00
	00 00		 mov	 DWORD PTR tv179[ebp], 0
$LN19@update_dec:
  00214	b9 01 00 00 00	 mov	 ecx, 1
  00219	85 c9		 test	 ecx, ecx
  0021b	74 09		 je	 SHORT $LN20@update_dec
  0021d	c7 45 a8 26 00
	00 00		 mov	 DWORD PTR tv187[ebp], 38 ; 00000026H
  00224	eb 21		 jmp	 SHORT $LN21@update_dec
$LN20@update_dec:
  00226	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??update_decoy@@YGXPAUENTITY@@@Z@4JA
  0022c	83 c2 1f	 add	 edx, 31			; 0000001fH
  0022f	52		 push	 edx
  00230	68 00 00 00 00	 push	 OFFSET ??_C@_0EM@GKDIAKLN@c?3?2users?2nhv90?2projects?2eech?2ap@
  00235	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_list_type_message@@3PBDB ; overload_invalid_list_type_message
  0023a	50		 push	 eax
  0023b	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00240	c7 45 a8 00 00
	00 00		 mov	 DWORD PTR tv187[ebp], 0
$LN21@update_dec:
  00247	6a 26		 push	 38			; 00000026H
  00249	8b 4d f4	 mov	 ecx, DWORD PTR _locked_on_weapon$[ebp]
  0024c	51		 push	 ecx
  0024d	69 55 ac b4 00
	00 00		 imul	 edx, DWORD PTR tv179[ebp], 180
  00254	8b 45 a8	 mov	 eax, DWORD PTR tv187[ebp]
  00257	8b 8c 82 00 00
	00 00		 mov	 ecx, DWORD PTR ?fn_get_local_entity_child_succ@@3PAY0CN@P6GPAUENTITY@@PAU1@W4LIST_TYPES@@@ZA[edx+eax*4]
  0025e	ff d1		 call	 ecx
  00260	89 45 f0	 mov	 DWORD PTR _succ$[ebp], eax

; 304  : 
; 305  : 				notify_local_entity (ENTITY_MESSAGE_DECOY_ACTIVE, locked_on_weapon, en);

  00263	8b 45 08	 mov	 eax, DWORD PTR _en$[ebp]
  00266	50		 push	 eax
  00267	8b 4d f4	 mov	 ecx, DWORD PTR _locked_on_weapon$[ebp]
  0026a	51		 push	 ecx
  0026b	6a 08		 push	 8
  0026d	e8 00 00 00 00	 call	 ?notify_local_entity@@YAHW4ENTITY_MESSAGES@@PAUENTITY@@1ZZ ; notify_local_entity
  00272	83 c4 0c	 add	 esp, 12			; 0000000cH

; 306  : 
; 307  : 				locked_on_weapon = succ;

  00275	8b 45 f0	 mov	 eax, DWORD PTR _succ$[ebp]
  00278	89 45 f4	 mov	 DWORD PTR _locked_on_weapon$[ebp], eax

; 308  : 			}

  0027b	e9 59 ff ff ff	 jmp	 $LN2@update_dec
$LN3@update_dec:

; 309  : 		}
; 310  : 	}
; 311  : }

  00280	5f		 pop	 edi
  00281	5e		 pop	 esi
  00282	5b		 pop	 ebx
  00283	8b e5		 mov	 esp, ebp
  00285	5d		 pop	 ebp
  00286	c2 04 00	 ret	 4
?update_decoy@@YGXPAUENTITY@@@Z ENDP			; update_decoy
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\entity\mobile\weapon\wn_decoy.c
;	COMDAT ?get_weapon_locked_onto_decoy@@YGHW4WEAPON_DECOY_TYPES@@@Z
_TEXT	SEGMENT
tv94 = -72						; size = 4
tv84 = -72						; size = 4
tv74 = -72						; size = 4
tv64 = -72						; size = 4
_locked$ = -4						; size = 4
_type$ = 8						; size = 4
?get_weapon_locked_onto_decoy@@YGHW4WEAPON_DECOY_TYPES@@@Z PROC ; get_weapon_locked_onto_decoy, COMDAT

; 192  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 48	 sub	 esp, 72			; 00000048H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 193  : 	int
; 194  : 		locked;
; 195  : 
; 196  : 	switch (type)

  00009	8b 45 08	 mov	 eax, DWORD PTR _type$[ebp]
  0000c	89 45 b8	 mov	 DWORD PTR tv64[ebp], eax
  0000f	83 7d b8 03	 cmp	 DWORD PTR tv64[ebp], 3
  00013	0f 87 30 01 00
	00		 ja	 $LN8@get_weapon
  00019	8b 4d b8	 mov	 ecx, DWORD PTR tv64[ebp]
  0001c	ff 24 8d 00 00
	00 00		 jmp	 DWORD PTR $LN16@get_weapon[ecx*4]
$LN4@get_weapon:

; 197  : 	{
; 198  : 		////////////////////////////////////////
; 199  : 		case WEAPON_DECOY_TYPE_NONE:
; 200  : 		////////////////////////////////////////
; 201  : 		{
; 202  : 			locked = FALSE;

  00023	c7 45 fc 00 00
	00 00		 mov	 DWORD PTR _locked$[ebp], 0

; 203  : 
; 204  : 			break;

  0002a	e9 2b 01 00 00	 jmp	 $LN2@get_weapon
$LN5@get_weapon:

; 205  : 		}
; 206  : 		////////////////////////////////////////
; 207  : 		case WEAPON_DECOY_TYPE_CHAFF:
; 208  : 		////////////////////////////////////////
; 209  : 		{
; 210  : 			#if 0
; 211  : 
; 212  : 			locked = frand1 () > 0.9;
; 213  : 
; 214  : 			#else
; 215  : 
; 216  : 			locked = frand1 () < (0.1 * command_line_chaff_effectiveness);

  0002f	69 05 00 00 00
	00 6d 4e c6 41	 imul	 eax, DWORD PTR ?random_number_seed@@3HA, 1103515245 ; random_number_seed
  00039	05 39 30 00 00	 add	 eax, 12345		; 00003039H
  0003e	a3 00 00 00 00	 mov	 DWORD PTR ?random_number_seed@@3HA, eax ; random_number_seed
  00043	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?random_number_seed@@3HA ; random_number_seed
  00049	c1 f9 10	 sar	 ecx, 16			; 00000010H
  0004c	81 e1 ff 7f 00
	00		 and	 ecx, 32767		; 00007fffH
  00052	f2 0f 2a c1	 cvtsi2sd xmm0, ecx
  00056	f2 0f 59 05 00
	00 00 00	 mulsd	 xmm0, QWORD PTR __real@3f00002000400080
  0005e	f3 0f 5a 0d 00
	00 00 00	 cvtss2sd xmm1, DWORD PTR ?command_line_chaff_effectiveness@@3MA
  00066	f2 0f 59 0d 00
	00 00 00	 mulsd	 xmm1, QWORD PTR __real@3fb999999999999a
  0006e	66 0f 2f c8	 comisd	 xmm1, xmm0
  00072	76 09		 jbe	 SHORT $LN10@get_weapon
  00074	c7 45 b8 01 00
	00 00		 mov	 DWORD PTR tv74[ebp], 1
  0007b	eb 07		 jmp	 SHORT $LN11@get_weapon
$LN10@get_weapon:
  0007d	c7 45 b8 00 00
	00 00		 mov	 DWORD PTR tv74[ebp], 0
$LN11@get_weapon:
  00084	8b 55 b8	 mov	 edx, DWORD PTR tv74[ebp]
  00087	89 55 fc	 mov	 DWORD PTR _locked$[ebp], edx

; 217  : 
; 218  : 			#endif
; 219  : 
; 220  : 			break;

  0008a	e9 cb 00 00 00	 jmp	 $LN2@get_weapon
$LN6@get_weapon:

; 221  : 		}
; 222  : 		////////////////////////////////////////
; 223  : 		case WEAPON_DECOY_TYPE_FLARE:
; 224  : 		////////////////////////////////////////
; 225  : 		{
; 226  : 			#if 0
; 227  : 
; 228  : 			locked = frand1 () > 0.9;
; 229  : 
; 230  : 			#else
; 231  : 
; 232  : 			locked = frand1 () < (0.1 * command_line_flare_effectiveness);

  0008f	69 05 00 00 00
	00 6d 4e c6 41	 imul	 eax, DWORD PTR ?random_number_seed@@3HA, 1103515245 ; random_number_seed
  00099	05 39 30 00 00	 add	 eax, 12345		; 00003039H
  0009e	a3 00 00 00 00	 mov	 DWORD PTR ?random_number_seed@@3HA, eax ; random_number_seed
  000a3	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?random_number_seed@@3HA ; random_number_seed
  000a9	c1 f9 10	 sar	 ecx, 16			; 00000010H
  000ac	81 e1 ff 7f 00
	00		 and	 ecx, 32767		; 00007fffH
  000b2	f2 0f 2a c1	 cvtsi2sd xmm0, ecx
  000b6	f2 0f 59 05 00
	00 00 00	 mulsd	 xmm0, QWORD PTR __real@3f00002000400080
  000be	f3 0f 5a 0d 00
	00 00 00	 cvtss2sd xmm1, DWORD PTR ?command_line_flare_effectiveness@@3MA
  000c6	f2 0f 59 0d 00
	00 00 00	 mulsd	 xmm1, QWORD PTR __real@3fb999999999999a
  000ce	66 0f 2f c8	 comisd	 xmm1, xmm0
  000d2	76 09		 jbe	 SHORT $LN12@get_weapon
  000d4	c7 45 b8 01 00
	00 00		 mov	 DWORD PTR tv84[ebp], 1
  000db	eb 07		 jmp	 SHORT $LN13@get_weapon
$LN12@get_weapon:
  000dd	c7 45 b8 00 00
	00 00		 mov	 DWORD PTR tv84[ebp], 0
$LN13@get_weapon:
  000e4	8b 55 b8	 mov	 edx, DWORD PTR tv84[ebp]
  000e7	89 55 fc	 mov	 DWORD PTR _locked$[ebp], edx

; 233  : 
; 234  : 			#endif
; 235  : 
; 236  : 			break;

  000ea	eb 6e		 jmp	 SHORT $LN2@get_weapon
$LN7@get_weapon:

; 237  : 		}
; 238  : 		////////////////////////////////////////
; 239  : 		case WEAPON_DECOY_TYPE_SMOKE_GRENADE:
; 240  : 		////////////////////////////////////////
; 241  : 		{
; 242  : 			#if 0
; 243  : 
; 244  : 			locked = frand1 () < 0.1;
; 245  : 
; 246  : 			#else
; 247  : 
; 248  : 			locked = frand1 () < (0.1 * command_line_smoke_effectiveness);

  000ec	69 05 00 00 00
	00 6d 4e c6 41	 imul	 eax, DWORD PTR ?random_number_seed@@3HA, 1103515245 ; random_number_seed
  000f6	05 39 30 00 00	 add	 eax, 12345		; 00003039H
  000fb	a3 00 00 00 00	 mov	 DWORD PTR ?random_number_seed@@3HA, eax ; random_number_seed
  00100	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?random_number_seed@@3HA ; random_number_seed
  00106	c1 f9 10	 sar	 ecx, 16			; 00000010H
  00109	81 e1 ff 7f 00
	00		 and	 ecx, 32767		; 00007fffH
  0010f	f2 0f 2a c1	 cvtsi2sd xmm0, ecx
  00113	f2 0f 59 05 00
	00 00 00	 mulsd	 xmm0, QWORD PTR __real@3f00002000400080
  0011b	f3 0f 5a 0d 00
	00 00 00	 cvtss2sd xmm1, DWORD PTR ?command_line_smoke_effectiveness@@3MA
  00123	f2 0f 59 0d 00
	00 00 00	 mulsd	 xmm1, QWORD PTR __real@3fb999999999999a
  0012b	66 0f 2f c8	 comisd	 xmm1, xmm0
  0012f	76 09		 jbe	 SHORT $LN14@get_weapon
  00131	c7 45 b8 01 00
	00 00		 mov	 DWORD PTR tv94[ebp], 1
  00138	eb 07		 jmp	 SHORT $LN15@get_weapon
$LN14@get_weapon:
  0013a	c7 45 b8 00 00
	00 00		 mov	 DWORD PTR tv94[ebp], 0
$LN15@get_weapon:
  00141	8b 55 b8	 mov	 edx, DWORD PTR tv94[ebp]
  00144	89 55 fc	 mov	 DWORD PTR _locked$[ebp], edx

; 249  : 
; 250  : 			#endif
; 251  : 
; 252  : 			break;

  00147	eb 11		 jmp	 SHORT $LN2@get_weapon
$LN8@get_weapon:

; 253  : 		}
; 254  : 		////////////////////////////////////////
; 255  : 		default:
; 256  : 		////////////////////////////////////////
; 257  : 		{
; 258  : 			debug_fatal ("Invalid weapon decoy type = %d", type);

  00149	8b 45 08	 mov	 eax, DWORD PTR _type$[ebp]
  0014c	50		 push	 eax
  0014d	68 00 00 00 00	 push	 OFFSET ??_C@_0BP@NAFKOIIC@Invalid?5weapon?5decoy?5type?5?$DN?5?$CFd@
  00152	e8 00 00 00 00	 call	 ?debug_fatal@@YAXPBDZZ	; debug_fatal
  00157	83 c4 08	 add	 esp, 8
$LN2@get_weapon:

; 259  : 
; 260  : 			break;
; 261  : 		}
; 262  : 	}
; 263  : 
; 264  : 	return (locked);

  0015a	8b 45 fc	 mov	 eax, DWORD PTR _locked$[ebp]

; 265  : }

  0015d	5f		 pop	 edi
  0015e	5e		 pop	 esi
  0015f	5b		 pop	 ebx
  00160	8b e5		 mov	 esp, ebp
  00162	5d		 pop	 ebp
  00163	c2 04 00	 ret	 4
  00166	66 90		 npad	 2
$LN16@get_weapon:
  00168	00 00 00 00	 DD	 $LN4@get_weapon
  0016c	00 00 00 00	 DD	 $LN5@get_weapon
  00170	00 00 00 00	 DD	 $LN6@get_weapon
  00174	00 00 00 00	 DD	 $LN7@get_weapon
?get_weapon_locked_onto_decoy@@YGHW4WEAPON_DECOY_TYPES@@@Z ENDP ; get_weapon_locked_onto_decoy
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\entity\mobile\weapon\wn_decoy.c
;	COMDAT ?get_decoy_timer_restart_value@@YGMW4WEAPON_DECOY_TYPES@@@Z
_TEXT	SEGMENT
tv64 = -72						; size = 4
_timer$ = -4						; size = 4
_type$ = 8						; size = 4
?get_decoy_timer_restart_value@@YGMW4WEAPON_DECOY_TYPES@@@Z PROC ; get_decoy_timer_restart_value, COMDAT

; 136  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 48	 sub	 esp, 72			; 00000048H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 137  : 	float
; 138  : 		timer;
; 139  : 
; 140  : 	switch (type)

  00009	8b 45 08	 mov	 eax, DWORD PTR _type$[ebp]
  0000c	89 45 b8	 mov	 DWORD PTR tv64[ebp], eax
  0000f	83 7d b8 03	 cmp	 DWORD PTR tv64[ebp], 3
  00013	0f 87 f8 00 00
	00		 ja	 $LN8@get_decoy_
  00019	8b 4d b8	 mov	 ecx, DWORD PTR tv64[ebp]
  0001c	ff 24 8d 00 00
	00 00		 jmp	 DWORD PTR $LN10@get_decoy_[ecx*4]
$LN4@get_decoy_:

; 141  : 	{
; 142  : 		////////////////////////////////////////
; 143  : 		case WEAPON_DECOY_TYPE_NONE:
; 144  : 		////////////////////////////////////////
; 145  : 		{
; 146  : 			timer = 0.0;

  00023	0f 57 c0	 xorps	 xmm0, xmm0
  00026	f3 0f 11 45 fc	 movss	 DWORD PTR _timer$[ebp], xmm0

; 147  : 
; 148  : 			break;

  0002b	e9 f2 00 00 00	 jmp	 $LN2@get_decoy_
$LN5@get_decoy_:

; 149  : 		}
; 150  : 		////////////////////////////////////////
; 151  : 		case WEAPON_DECOY_TYPE_CHAFF:
; 152  : 		////////////////////////////////////////
; 153  : 		{
; 154  : 			timer = 0.4 + (frand1 () * 0.2);

  00030	69 05 00 00 00
	00 6d 4e c6 41	 imul	 eax, DWORD PTR ?random_number_seed@@3HA, 1103515245 ; random_number_seed
  0003a	05 39 30 00 00	 add	 eax, 12345		; 00003039H
  0003f	a3 00 00 00 00	 mov	 DWORD PTR ?random_number_seed@@3HA, eax ; random_number_seed
  00044	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?random_number_seed@@3HA ; random_number_seed
  0004a	c1 f9 10	 sar	 ecx, 16			; 00000010H
  0004d	81 e1 ff 7f 00
	00		 and	 ecx, 32767		; 00007fffH
  00053	f2 0f 2a c1	 cvtsi2sd xmm0, ecx
  00057	f2 0f 59 05 00
	00 00 00	 mulsd	 xmm0, QWORD PTR __real@3f00002000400080
  0005f	f2 0f 59 05 00
	00 00 00	 mulsd	 xmm0, QWORD PTR __real@3fc999999999999a
  00067	f2 0f 58 05 00
	00 00 00	 addsd	 xmm0, QWORD PTR __real@3fd999999999999a
  0006f	f2 0f 5a c0	 cvtsd2ss xmm0, xmm0
  00073	f3 0f 11 45 fc	 movss	 DWORD PTR _timer$[ebp], xmm0

; 155  : 
; 156  : 			break;

  00078	e9 a5 00 00 00	 jmp	 $LN2@get_decoy_
$LN6@get_decoy_:

; 157  : 		}
; 158  : 		////////////////////////////////////////
; 159  : 		case WEAPON_DECOY_TYPE_FLARE:
; 160  : 		////////////////////////////////////////
; 161  : 		{
; 162  : 			timer = 0.4 + (frand1 () * 0.2);

  0007d	69 05 00 00 00
	00 6d 4e c6 41	 imul	 eax, DWORD PTR ?random_number_seed@@3HA, 1103515245 ; random_number_seed
  00087	05 39 30 00 00	 add	 eax, 12345		; 00003039H
  0008c	a3 00 00 00 00	 mov	 DWORD PTR ?random_number_seed@@3HA, eax ; random_number_seed
  00091	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?random_number_seed@@3HA ; random_number_seed
  00097	c1 f9 10	 sar	 ecx, 16			; 00000010H
  0009a	81 e1 ff 7f 00
	00		 and	 ecx, 32767		; 00007fffH
  000a0	f2 0f 2a c1	 cvtsi2sd xmm0, ecx
  000a4	f2 0f 59 05 00
	00 00 00	 mulsd	 xmm0, QWORD PTR __real@3f00002000400080
  000ac	f2 0f 59 05 00
	00 00 00	 mulsd	 xmm0, QWORD PTR __real@3fc999999999999a
  000b4	f2 0f 58 05 00
	00 00 00	 addsd	 xmm0, QWORD PTR __real@3fd999999999999a
  000bc	f2 0f 5a c0	 cvtsd2ss xmm0, xmm0
  000c0	f3 0f 11 45 fc	 movss	 DWORD PTR _timer$[ebp], xmm0

; 163  : 
; 164  : 			break;

  000c5	eb 5b		 jmp	 SHORT $LN2@get_decoy_
$LN7@get_decoy_:

; 165  : 		}
; 166  : 		////////////////////////////////////////
; 167  : 		case WEAPON_DECOY_TYPE_SMOKE_GRENADE:
; 168  : 		////////////////////////////////////////
; 169  : 		{
; 170  : 			timer = 1.0 + (frand1 () * 0.5);

  000c7	69 05 00 00 00
	00 6d 4e c6 41	 imul	 eax, DWORD PTR ?random_number_seed@@3HA, 1103515245 ; random_number_seed
  000d1	05 39 30 00 00	 add	 eax, 12345		; 00003039H
  000d6	a3 00 00 00 00	 mov	 DWORD PTR ?random_number_seed@@3HA, eax ; random_number_seed
  000db	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?random_number_seed@@3HA ; random_number_seed
  000e1	c1 f9 10	 sar	 ecx, 16			; 00000010H
  000e4	81 e1 ff 7f 00
	00		 and	 ecx, 32767		; 00007fffH
  000ea	f2 0f 2a c1	 cvtsi2sd xmm0, ecx
  000ee	f2 0f 59 05 00
	00 00 00	 mulsd	 xmm0, QWORD PTR __real@3f00002000400080
  000f6	f2 0f 59 05 00
	00 00 00	 mulsd	 xmm0, QWORD PTR __real@3fe0000000000000
  000fe	f2 0f 58 05 00
	00 00 00	 addsd	 xmm0, QWORD PTR __real@3ff0000000000000
  00106	f2 0f 5a c0	 cvtsd2ss xmm0, xmm0
  0010a	f3 0f 11 45 fc	 movss	 DWORD PTR _timer$[ebp], xmm0

; 171  : 
; 172  : 			break;

  0010f	eb 11		 jmp	 SHORT $LN2@get_decoy_
$LN8@get_decoy_:

; 173  : 		}
; 174  : 		////////////////////////////////////////
; 175  : 		default:
; 176  : 		////////////////////////////////////////
; 177  : 		{
; 178  : 			debug_fatal ("Invalid weapon decoy type = %d", type);

  00111	8b 45 08	 mov	 eax, DWORD PTR _type$[ebp]
  00114	50		 push	 eax
  00115	68 00 00 00 00	 push	 OFFSET ??_C@_0BP@NAFKOIIC@Invalid?5weapon?5decoy?5type?5?$DN?5?$CFd@
  0011a	e8 00 00 00 00	 call	 ?debug_fatal@@YAXPBDZZ	; debug_fatal
  0011f	83 c4 08	 add	 esp, 8
$LN2@get_decoy_:

; 179  : 
; 180  : 			break;
; 181  : 		}
; 182  : 	}
; 183  : 
; 184  : 	return (timer);

  00122	d9 45 fc	 fld	 DWORD PTR _timer$[ebp]

; 185  : }

  00125	5f		 pop	 edi
  00126	5e		 pop	 esi
  00127	5b		 pop	 ebx
  00128	8b e5		 mov	 esp, ebp
  0012a	5d		 pop	 ebp
  0012b	c2 04 00	 ret	 4
  0012e	66 90		 npad	 2
$LN10@get_decoy_:
  00130	00 00 00 00	 DD	 $LN4@get_decoy_
  00134	00 00 00 00	 DD	 $LN5@get_decoy_
  00138	00 00 00 00	 DD	 $LN6@get_decoy_
  0013c	00 00 00 00	 DD	 $LN7@get_decoy_
?get_decoy_timer_restart_value@@YGMW4WEAPON_DECOY_TYPES@@@Z ENDP ; get_decoy_timer_restart_value
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\entity\mobile\weapon\wn_decoy.c
;	COMDAT ?get_decoy_timer_start_value@@YGMW4WEAPON_DECOY_TYPES@@@Z
_TEXT	SEGMENT
tv64 = -72						; size = 4
_timer$ = -4						; size = 4
_type$ = 8						; size = 4
?get_decoy_timer_start_value@@YGMW4WEAPON_DECOY_TYPES@@@Z PROC ; get_decoy_timer_start_value, COMDAT

; 80   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 48	 sub	 esp, 72			; 00000048H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 81   : 	float
; 82   : 		timer;
; 83   : 
; 84   : 	switch (type)

  00009	8b 45 08	 mov	 eax, DWORD PTR _type$[ebp]
  0000c	89 45 b8	 mov	 DWORD PTR tv64[ebp], eax
  0000f	83 7d b8 03	 cmp	 DWORD PTR tv64[ebp], 3
  00013	77 41		 ja	 SHORT $LN8@get_decoy_
  00015	8b 4d b8	 mov	 ecx, DWORD PTR tv64[ebp]
  00018	ff 24 8d 00 00
	00 00		 jmp	 DWORD PTR $LN10@get_decoy_[ecx*4]
$LN4@get_decoy_:

; 85   : 	{
; 86   : 		////////////////////////////////////////
; 87   : 		case WEAPON_DECOY_TYPE_NONE:
; 88   : 		////////////////////////////////////////
; 89   : 		{
; 90   : 			timer = 0.0;

  0001f	0f 57 c0	 xorps	 xmm0, xmm0
  00022	f3 0f 11 45 fc	 movss	 DWORD PTR _timer$[ebp], xmm0

; 91   : 
; 92   : 			break;

  00027	eb 3e		 jmp	 SHORT $LN2@get_decoy_
$LN5@get_decoy_:

; 93   : 		}
; 94   : 		////////////////////////////////////////
; 95   : 		case WEAPON_DECOY_TYPE_CHAFF:
; 96   : 		////////////////////////////////////////
; 97   : 		{
; 98   : 			timer = 0.1;

  00029	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3dcccccd
  00031	f3 0f 11 45 fc	 movss	 DWORD PTR _timer$[ebp], xmm0

; 99   : 
; 100  : 			break;

  00036	eb 2f		 jmp	 SHORT $LN2@get_decoy_
$LN6@get_decoy_:

; 101  : 		}
; 102  : 		////////////////////////////////////////
; 103  : 		case WEAPON_DECOY_TYPE_FLARE:
; 104  : 		////////////////////////////////////////
; 105  : 		{
; 106  : 			timer = 0.1;

  00038	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3dcccccd
  00040	f3 0f 11 45 fc	 movss	 DWORD PTR _timer$[ebp], xmm0

; 107  : 
; 108  : 			break;

  00045	eb 20		 jmp	 SHORT $LN2@get_decoy_
$LN7@get_decoy_:

; 109  : 		}
; 110  : 		////////////////////////////////////////
; 111  : 		case WEAPON_DECOY_TYPE_SMOKE_GRENADE:
; 112  : 		////////////////////////////////////////
; 113  : 		{
; 114  : 			timer = 3.0;

  00047	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@40400000
  0004f	f3 0f 11 45 fc	 movss	 DWORD PTR _timer$[ebp], xmm0

; 115  : 
; 116  : 			break;

  00054	eb 11		 jmp	 SHORT $LN2@get_decoy_
$LN8@get_decoy_:

; 117  : 		}
; 118  : 		////////////////////////////////////////
; 119  : 		default:
; 120  : 		////////////////////////////////////////
; 121  : 		{
; 122  : 			debug_fatal ("Invalid weapon decoy type = %d", type);

  00056	8b 45 08	 mov	 eax, DWORD PTR _type$[ebp]
  00059	50		 push	 eax
  0005a	68 00 00 00 00	 push	 OFFSET ??_C@_0BP@NAFKOIIC@Invalid?5weapon?5decoy?5type?5?$DN?5?$CFd@
  0005f	e8 00 00 00 00	 call	 ?debug_fatal@@YAXPBDZZ	; debug_fatal
  00064	83 c4 08	 add	 esp, 8
$LN2@get_decoy_:

; 123  : 
; 124  : 			break;
; 125  : 		}
; 126  : 	}
; 127  : 
; 128  : 	return (timer);

  00067	d9 45 fc	 fld	 DWORD PTR _timer$[ebp]

; 129  : }

  0006a	5f		 pop	 edi
  0006b	5e		 pop	 esi
  0006c	5b		 pop	 ebx
  0006d	8b e5		 mov	 esp, ebp
  0006f	5d		 pop	 ebp
  00070	c2 04 00	 ret	 4
  00073	90		 npad	 1
$LN10@get_decoy_:
  00074	00 00 00 00	 DD	 $LN4@get_decoy_
  00078	00 00 00 00	 DD	 $LN5@get_decoy_
  0007c	00 00 00 00	 DD	 $LN6@get_decoy_
  00080	00 00 00 00	 DD	 $LN7@get_decoy_
?get_decoy_timer_start_value@@YGMW4WEAPON_DECOY_TYPES@@@Z ENDP ; get_decoy_timer_start_value
_TEXT	ENDS
END
