; Listing generated by Microsoft (R) Optimizing Compiler Version 19.16.27045.0 

	TITLE	C:\Users\nhv90\Projects\eech\aphavoc\source\gunships\cockpits\hokum\hk_wiper.c
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB MSVCRTD
INCLUDELIB OLDNAMES

PUBLIC	?initialise_hokum_virtual_cockpit_wiper_and_rain_effect@@YGXXZ ; initialise_hokum_virtual_cockpit_wiper_and_rain_effect
PUBLIC	?deinitialise_hokum_virtual_cockpit_wiper_and_rain_effect@@YGXXZ ; deinitialise_hokum_virtual_cockpit_wiper_and_rain_effect
PUBLIC	?animate_hokum_wipers@@YGXPAUOBJECT_3D_INSTANCE@@@Z ; animate_hokum_wipers
PUBLIC	?__LINE__Var@?0??animate_hokum_wipers@@YGXPAUOBJECT_3D_INSTANCE@@@Z@4JA ; `animate_hokum_wipers'::`1'::__LINE__Var
PUBLIC	??_C@_0EP@HLMMJBCK@c?3?2users?2nhv90?2projects?2eech?2ap@ ; `string'
PUBLIC	??_C@_06DDNABPCD@inst3d@			; `string'
PUBLIC	__real@0000000000000000
PUBLIC	__real@3f800051ed28954b
PUBLIC	__real@3ff0000000000000
EXTRN	?process_assert@@YGXPBD0H@Z:PROC		; process_assert
EXTRN	?create_screen_for_system_texture@@YGPAUSCREEN@@H@Z:PROC ; create_screen_for_system_texture
EXTRN	?destroy_screen@@YGHPAUSCREEN@@@Z:PROC		; destroy_screen
EXTRN	?animate_keyframed_sub_object_type@@YGHPAUOBJECT_3D_INSTANCE@@HM@Z:PROC ; animate_keyframed_sub_object_type
EXTRN	?pilot_wiped_rain_texture_screen@@3PAUSCREEN@@A:DWORD ; pilot_wiped_rain_texture_screen
EXTRN	?co_pilot_wiped_rain_texture_screen@@3PAUSCREEN@@A:DWORD ; co_pilot_wiped_rain_texture_screen
EXTRN	?pilot_wiper@@3HA:DWORD				; pilot_wiper
EXTRN	?co_pilot_wiper@@3HA:DWORD			; co_pilot_wiper
EXTRN	?pilot_wipe_type@@3W4WIPE_TYPES@@A:DWORD	; pilot_wipe_type
EXTRN	?co_pilot_wipe_type@@3W4WIPE_TYPES@@A:DWORD	; co_pilot_wipe_type
EXTRN	?wiper_position@@3MA:DWORD			; wiper_position
EXTRN	__fltused:DWORD
;	COMDAT __real@3ff0000000000000
CONST	SEGMENT
__real@3ff0000000000000 DQ 03ff0000000000000r	; 1
CONST	ENDS
;	COMDAT __real@3f800051ed28954b
CONST	SEGMENT
__real@3f800051ed28954b DQ 03f800051ed28954br	; 0.00781311
CONST	ENDS
;	COMDAT __real@0000000000000000
CONST	SEGMENT
__real@0000000000000000 DQ 00000000000000000r	; 0
CONST	ENDS
;	COMDAT ??_C@_06DDNABPCD@inst3d@
CONST	SEGMENT
??_C@_06DDNABPCD@inst3d@ DB 'inst3d', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_0EP@HLMMJBCK@c?3?2users?2nhv90?2projects?2eech?2ap@
CONST	SEGMENT
??_C@_0EP@HLMMJBCK@c?3?2users?2nhv90?2projects?2eech?2ap@ DB 'c:\users\nh'
	DB	'v90\projects\eech\aphavoc\source\gunships\cockpits\hokum\hk_w'
	DB	'iper.c', 00H				; `string'
CONST	ENDS
;	COMDAT ?__LINE__Var@?0??animate_hokum_wipers@@YGXPAUOBJECT_3D_INSTANCE@@@Z@4JA
_DATA	SEGMENT
?__LINE__Var@?0??animate_hokum_wipers@@YGXPAUOBJECT_3D_INSTANCE@@@Z@4JA DD 06eH ; `animate_hokum_wipers'::`1'::__LINE__Var
_DATA	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\gunships\cockpits\hokum\hk_wiper.c
;	COMDAT ?animate_hokum_wipers@@YGXPAUOBJECT_3D_INSTANCE@@@Z
_TEXT	SEGMENT
tv78 = -84						; size = 8
tv79 = -76						; size = 8
_state$ = -4						; size = 4
_inst3d$ = 8						; size = 4
?animate_hokum_wipers@@YGXPAUOBJECT_3D_INSTANCE@@@Z PROC ; animate_hokum_wipers, COMDAT

; 110  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 54	 sub	 esp, 84			; 00000054H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 111  : 	float
; 112  : 		state;
; 113  : 
; 114  : 	ASSERT (inst3d);

  00009	83 7d 08 00	 cmp	 DWORD PTR _inst3d$[ebp], 0
  0000d	75 18		 jne	 SHORT $LN2@animate_ho
  0000f	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??animate_hokum_wipers@@YGXPAUOBJECT_3D_INSTANCE@@@Z@4JA
  00014	83 c0 04	 add	 eax, 4
  00017	50		 push	 eax
  00018	68 00 00 00 00	 push	 OFFSET ??_C@_0EP@HLMMJBCK@c?3?2users?2nhv90?2projects?2eech?2ap@
  0001d	68 00 00 00 00	 push	 OFFSET ??_C@_06DDNABPCD@inst3d@
  00022	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN2@animate_ho:

; 115  : 
; 116  : 	state = (wiper_position - MIN_WIPER_POSITION) * (1.0 / (MAX_WIPER_POSITION - MIN_WIPER_POSITION));

  00027	f3 0f 5a 05 00
	00 00 00	 cvtss2sd xmm0, DWORD PTR ?wiper_position@@3MA
  0002f	f2 0f 5c 05 00
	00 00 00	 subsd	 xmm0, QWORD PTR __real@0000000000000000
  00037	f2 0f 59 05 00
	00 00 00	 mulsd	 xmm0, QWORD PTR __real@3f800051ed28954b
  0003f	f2 0f 5a c0	 cvtsd2ss xmm0, xmm0
  00043	f3 0f 11 45 fc	 movss	 DWORD PTR _state$[ebp], xmm0

; 117  : 
; 118  : 	state = bound (state, 0.0, 1.0);

  00048	f3 0f 5a 45 fc	 cvtss2sd xmm0, DWORD PTR _state$[ebp]
  0004d	0f 57 c9	 xorps	 xmm1, xmm1
  00050	66 0f 2f c8	 comisd	 xmm1, xmm0
  00054	76 0a		 jbe	 SHORT $LN6@animate_ho
  00056	0f 57 c0	 xorps	 xmm0, xmm0
  00059	f2 0f 11 45 b4	 movsd	 QWORD PTR tv79[ebp], xmm0
  0005e	eb 32		 jmp	 SHORT $LN7@animate_ho
$LN6@animate_ho:
  00060	f3 0f 5a 45 fc	 cvtss2sd xmm0, DWORD PTR _state$[ebp]
  00065	66 0f 2f 05 00
	00 00 00	 comisd	 xmm0, QWORD PTR __real@3ff0000000000000
  0006d	76 0f		 jbe	 SHORT $LN4@animate_ho
  0006f	f2 0f 10 05 00
	00 00 00	 movsd	 xmm0, QWORD PTR __real@3ff0000000000000
  00077	f2 0f 11 45 ac	 movsd	 QWORD PTR tv78[ebp], xmm0
  0007c	eb 0a		 jmp	 SHORT $LN5@animate_ho
$LN4@animate_ho:
  0007e	f3 0f 5a 45 fc	 cvtss2sd xmm0, DWORD PTR _state$[ebp]
  00083	f2 0f 11 45 ac	 movsd	 QWORD PTR tv78[ebp], xmm0
$LN5@animate_ho:
  00088	f2 0f 10 45 ac	 movsd	 xmm0, QWORD PTR tv78[ebp]
  0008d	f2 0f 11 45 b4	 movsd	 QWORD PTR tv79[ebp], xmm0
$LN7@animate_ho:
  00092	f2 0f 5a 45 b4	 cvtsd2ss xmm0, QWORD PTR tv79[ebp]
  00097	f3 0f 11 45 fc	 movss	 DWORD PTR _state$[ebp], xmm0

; 119  : 
; 120  : 	animate_keyframed_sub_object_type (inst3d, OBJECT_3D_SUB_OBJECT_WIPER, state);

  0009c	51		 push	 ecx
  0009d	f3 0f 10 45 fc	 movss	 xmm0, DWORD PTR _state$[ebp]
  000a2	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  000a7	6a 29		 push	 41			; 00000029H
  000a9	8b 45 08	 mov	 eax, DWORD PTR _inst3d$[ebp]
  000ac	50		 push	 eax
  000ad	e8 00 00 00 00	 call	 ?animate_keyframed_sub_object_type@@YGHPAUOBJECT_3D_INSTANCE@@HM@Z ; animate_keyframed_sub_object_type

; 121  : }

  000b2	5f		 pop	 edi
  000b3	5e		 pop	 esi
  000b4	5b		 pop	 ebx
  000b5	8b e5		 mov	 esp, ebp
  000b7	5d		 pop	 ebp
  000b8	c2 04 00	 ret	 4
?animate_hokum_wipers@@YGXPAUOBJECT_3D_INSTANCE@@@Z ENDP ; animate_hokum_wipers
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\gunships\cockpits\hokum\hk_wiper.c
;	COMDAT ?deinitialise_hokum_virtual_cockpit_wiper_and_rain_effect@@YGXXZ
_TEXT	SEGMENT
?deinitialise_hokum_virtual_cockpit_wiper_and_rain_effect@@YGXXZ PROC ; deinitialise_hokum_virtual_cockpit_wiper_and_rain_effect, COMDAT

; 99   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 100  : 	destroy_screen (pilot_wiped_rain_texture_screen);

  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ?pilot_wiped_rain_texture_screen@@3PAUSCREEN@@A ; pilot_wiped_rain_texture_screen
  0000e	50		 push	 eax
  0000f	e8 00 00 00 00	 call	 ?destroy_screen@@YGHPAUSCREEN@@@Z ; destroy_screen

; 101  : 
; 102  : 	destroy_screen (co_pilot_wiped_rain_texture_screen);

  00014	a1 00 00 00 00	 mov	 eax, DWORD PTR ?co_pilot_wiped_rain_texture_screen@@3PAUSCREEN@@A ; co_pilot_wiped_rain_texture_screen
  00019	50		 push	 eax
  0001a	e8 00 00 00 00	 call	 ?destroy_screen@@YGHPAUSCREEN@@@Z ; destroy_screen

; 103  : }

  0001f	5f		 pop	 edi
  00020	5e		 pop	 esi
  00021	5b		 pop	 ebx
  00022	8b e5		 mov	 esp, ebp
  00024	5d		 pop	 ebp
  00025	c3		 ret	 0
?deinitialise_hokum_virtual_cockpit_wiper_and_rain_effect@@YGXXZ ENDP ; deinitialise_hokum_virtual_cockpit_wiper_and_rain_effect
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\gunships\cockpits\hokum\hk_wiper.c
;	COMDAT ?initialise_hokum_virtual_cockpit_wiper_and_rain_effect@@YGXXZ
_TEXT	SEGMENT
?initialise_hokum_virtual_cockpit_wiper_and_rain_effect@@YGXXZ PROC ; initialise_hokum_virtual_cockpit_wiper_and_rain_effect, COMDAT

; 80   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 81   : 	pilot_wiper = TRUE;

  00009	c7 05 00 00 00
	00 01 00 00 00	 mov	 DWORD PTR ?pilot_wiper@@3HA, 1 ; pilot_wiper

; 82   : 
; 83   : 	pilot_wiped_rain_texture_screen = create_screen_for_system_texture (TEXTURE_INDEX_HOKUM_PILOT_RAIN_WIPE);

  00013	68 5c 05 00 00	 push	 1372			; 0000055cH
  00018	e8 00 00 00 00	 call	 ?create_screen_for_system_texture@@YGPAUSCREEN@@H@Z ; create_screen_for_system_texture
  0001d	a3 00 00 00 00	 mov	 DWORD PTR ?pilot_wiped_rain_texture_screen@@3PAUSCREEN@@A, eax ; pilot_wiped_rain_texture_screen

; 84   : 
; 85   : 	pilot_wipe_type = WIPE_TYPE_LEFT_THEN_RIGHT;

  00022	c7 05 00 00 00
	00 01 00 00 00	 mov	 DWORD PTR ?pilot_wipe_type@@3W4WIPE_TYPES@@A, 1 ; pilot_wipe_type

; 86   : 
; 87   : 	co_pilot_wiper = TRUE;

  0002c	c7 05 00 00 00
	00 01 00 00 00	 mov	 DWORD PTR ?co_pilot_wiper@@3HA, 1 ; co_pilot_wiper

; 88   : 
; 89   : 	co_pilot_wiped_rain_texture_screen =  create_screen_for_system_texture (TEXTURE_INDEX_HOKUM_WSO_RAIN_WIPE);

  00036	68 62 05 00 00	 push	 1378			; 00000562H
  0003b	e8 00 00 00 00	 call	 ?create_screen_for_system_texture@@YGPAUSCREEN@@H@Z ; create_screen_for_system_texture
  00040	a3 00 00 00 00	 mov	 DWORD PTR ?co_pilot_wiped_rain_texture_screen@@3PAUSCREEN@@A, eax ; co_pilot_wiped_rain_texture_screen

; 90   : 
; 91   : 	co_pilot_wipe_type = WIPE_TYPE_RIGHT_THEN_LEFT;

  00045	c7 05 00 00 00
	00 02 00 00 00	 mov	 DWORD PTR ?co_pilot_wipe_type@@3W4WIPE_TYPES@@A, 2 ; co_pilot_wipe_type

; 92   : }

  0004f	5f		 pop	 edi
  00050	5e		 pop	 esi
  00051	5b		 pop	 ebx
  00052	8b e5		 mov	 esp, ebp
  00054	5d		 pop	 ebp
  00055	c3		 ret	 0
?initialise_hokum_virtual_cockpit_wiper_and_rain_effect@@YGXXZ ENDP ; initialise_hokum_virtual_cockpit_wiper_and_rain_effect
_TEXT	ENDS
END
