; Listing generated by Microsoft (R) Optimizing Compiler Version 19.16.27045.0 

	TITLE	C:\Users\nhv90\Projects\eech\aphavoc\source\entity\system\en_funcs\en_dstry.c
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB MSVCRTD
INCLUDELIB OLDNAMES

PUBLIC	?fn_destroy_local_entity@@3PAP6GXPAUENTITY@@@ZA	; fn_destroy_local_entity
PUBLIC	?fn_destroy_client_server_entity@@3PAY01P6GXPAUENTITY@@@ZA ; fn_destroy_client_server_entity
PUBLIC	?fn_destroy_local_entity_family@@3PAP6GXPAUENTITY@@@ZA ; fn_destroy_local_entity_family
PUBLIC	?fn_destroy_client_server_entity_family@@3PAY01P6GXPAUENTITY@@@ZA ; fn_destroy_client_server_entity_family
PUBLIC	?fn_kill_local_entity@@3PAP6GXPAUENTITY@@@ZA	; fn_kill_local_entity
PUBLIC	?fn_kill_client_server_entity@@3PAY01P6GXPAUENTITY@@@ZA ; fn_kill_client_server_entity
_BSS	SEGMENT
?fn_destroy_local_entity@@3PAP6GXPAUENTITY@@@ZA DD 026H DUP (?) ; fn_destroy_local_entity
?fn_destroy_client_server_entity@@3PAY01P6GXPAUENTITY@@@ZA DD 04cH DUP (?) ; fn_destroy_client_server_entity
?fn_destroy_local_entity_family@@3PAP6GXPAUENTITY@@@ZA DD 026H DUP (?) ; fn_destroy_local_entity_family
?fn_destroy_client_server_entity_family@@3PAY01P6GXPAUENTITY@@@ZA DD 04cH DUP (?) ; fn_destroy_client_server_entity_family
?fn_kill_local_entity@@3PAP6GXPAUENTITY@@@ZA DD 026H DUP (?) ; fn_kill_local_entity
?fn_kill_client_server_entity@@3PAY01P6GXPAUENTITY@@@ZA DD 04cH DUP (?) ; fn_kill_client_server_entity
_BSS	ENDS
PUBLIC	?initialise_entity_destroy_default_functions@@YGXXZ ; initialise_entity_destroy_default_functions
PUBLIC	?destroy_local_entity@@YGXPAUENTITY@@@Z		; destroy_local_entity
PUBLIC	?destroy_local_entities@@YGXXZ			; destroy_local_entities
PUBLIC	?destroy_local_entity_children@@YGXPAUENTITY@@W4LIST_TYPES@@@Z ; destroy_local_entity_children
PUBLIC	?destroy_client_server_entity_children@@YGXPAUENTITY@@W4LIST_TYPES@@@Z ; destroy_client_server_entity_children
PUBLIC	?destroy_local_only_entities@@YGXXZ		; destroy_local_only_entities
PUBLIC	?__LINE__Var@?0??default_kill_entity@@YGXPAUENTITY@@@Z@4JA ; `default_kill_entity'::`1'::__LINE__Var
PUBLIC	??_C@_0EO@NNHLLOBI@c?3?2users?2nhv90?2projects?2eech?2ap@ ; `string'
PUBLIC	??_C@_0CN@JNNHFOGN@default_kill_entity?5invoked?3?5?$CFs@ ; `string'
PUBLIC	?__LINE__Var@?0??destroy_local_entity@@YGXPAUENTITY@@@Z@4JA ; `destroy_local_entity'::`1'::__LINE__Var
PUBLIC	?__LINE__Var@?0??destroy_local_entities@@YGXXZ@4JA ; `destroy_local_entities'::`1'::__LINE__Var
PUBLIC	?__LINE__Var@?0??destroy_local_entity_children@@YGXPAUENTITY@@W4LIST_TYPES@@@Z@4JA ; `destroy_local_entity_children'::`1'::__LINE__Var
PUBLIC	?__LINE__Var@?0??destroy_client_server_entity_children@@YGXPAUENTITY@@W4LIST_TYPES@@@Z@4JA ; `destroy_client_server_entity_children'::`1'::__LINE__Var
EXTRN	?process_assert@@YGXPBD0H@Z:PROC		; process_assert
EXTRN	?debug_fatal@@YAXPBDZZ:PROC			; debug_fatal
EXTRN	?update_destroy_entity_statistics@@YGXPAUENTITY@@@Z:PROC ; update_destroy_entity_statistics
EXTRN	?destroy_local_pylon_entities@@YGXXZ:PROC	; destroy_local_pylon_entities
EXTRN	?set_gunship_entity@@YGXPAUENTITY@@@Z:PROC	; set_gunship_entity
EXTRN	?destroy_local_camera_entity@@YGXXZ:PROC	; destroy_local_camera_entity
EXTRN	?destroy_local_sector_entities@@YGXXZ:PROC	; destroy_local_sector_entities
EXTRN	?destroy_local_update_entity@@YGXXZ:PROC	; destroy_local_update_entity
EXTRN	?null_entity_pointer_message@@3PBDB:DWORD	; null_entity_pointer_message
EXTRN	?entity_type_database@@3PAUENTITY_TYPE_DATA@@A:BYTE ; entity_type_database
EXTRN	?system_comms_model@@3W4COMMS_MODEL_TYPES@@A:DWORD ; system_comms_model
EXTRN	?overload_invalid_list_type_message@@3PBDB:DWORD ; overload_invalid_list_type_message
EXTRN	?fn_get_local_entity_first_child@@3PAY0CN@P6GPAUENTITY@@PAU1@W4LIST_TYPES@@@ZA:BYTE ; fn_get_local_entity_first_child
EXTRN	?entities@@3PAUENTITY@@A:DWORD			; entities
EXTRN	?first_used_entity@@3PAUENTITY@@A:DWORD		; first_used_entity
EXTRN	?gunship_entity@@3PAUENTITY@@A:DWORD		; gunship_entity
;	COMDAT ?__LINE__Var@?0??destroy_client_server_entity_children@@YGXPAUENTITY@@W4LIST_TYPES@@@Z@4JA
_DATA	SEGMENT
?__LINE__Var@?0??destroy_client_server_entity_children@@YGXPAUENTITY@@W4LIST_TYPES@@@Z@4JA DD 0206H ; `destroy_client_server_entity_children'::`1'::__LINE__Var
_DATA	ENDS
;	COMDAT ?__LINE__Var@?0??destroy_local_entity_children@@YGXPAUENTITY@@W4LIST_TYPES@@@Z@4JA
_DATA	SEGMENT
?__LINE__Var@?0??destroy_local_entity_children@@YGXPAUENTITY@@W4LIST_TYPES@@@Z@4JA DD 018cH ; `destroy_local_entity_children'::`1'::__LINE__Var
_DATA	ENDS
;	COMDAT ?__LINE__Var@?0??destroy_local_entities@@YGXXZ@4JA
_DATA	SEGMENT
?__LINE__Var@?0??destroy_local_entities@@YGXXZ@4JA DD 010fH ; `destroy_local_entities'::`1'::__LINE__Var
_DATA	ENDS
;	COMDAT ?__LINE__Var@?0??destroy_local_entity@@YGXPAUENTITY@@@Z@4JA
_DATA	SEGMENT
?__LINE__Var@?0??destroy_local_entity@@YGXPAUENTITY@@@Z@4JA DD 09eH ; `destroy_local_entity'::`1'::__LINE__Var
_DATA	ENDS
;	COMDAT ??_C@_0CN@JNNHFOGN@default_kill_entity?5invoked?3?5?$CFs@
CONST	SEGMENT
??_C@_0CN@JNNHFOGN@default_kill_entity?5invoked?3?5?$CFs@ DB 'default_kil'
	DB	'l_entity invoked: %s (index = %d)', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_0EO@NNHLLOBI@c?3?2users?2nhv90?2projects?2eech?2ap@
CONST	SEGMENT
??_C@_0EO@NNHLLOBI@c?3?2users?2nhv90?2projects?2eech?2ap@ DB 'c:\users\nh'
	DB	'v90\projects\eech\aphavoc\source\entity\system\en_funcs\en_ds'
	DB	'try.c', 00H					; `string'
CONST	ENDS
;	COMDAT ?__LINE__Var@?0??default_kill_entity@@YGXPAUENTITY@@@Z@4JA
_DATA	SEGMENT
?__LINE__Var@?0??default_kill_entity@@YGXPAUENTITY@@@Z@4JA DD 076H ; `default_kill_entity'::`1'::__LINE__Var
_DATA	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\entity\system\en_funcs\en_dstry.c
;	COMDAT ?default_kill_entity@@YGXPAUENTITY@@@Z
_TEXT	SEGMENT
tv73 = -68						; size = 4
_en$ = 8						; size = 4
?default_kill_entity@@YGXPAUENTITY@@@Z PROC		; default_kill_entity, COMDAT

; 118  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 44	 sub	 esp, 68			; 00000044H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 119  :      debug_fatal ("default_kill_entity invoked: %s (index = %d)", get_local_entity_type_name (en), get_local_entity_index (en));

  00009	83 7d 08 00	 cmp	 DWORD PTR _en$[ebp], 0
  0000d	74 0a		 je	 SHORT $LN3@default_ki
  0000f	8b 45 08	 mov	 eax, DWORD PTR _en$[ebp]
  00012	8b 08		 mov	 ecx, DWORD PTR [eax]
  00014	89 4d bc	 mov	 DWORD PTR tv73[ebp], ecx
  00017	eb 21		 jmp	 SHORT $LN4@default_ki
$LN3@default_ki:
  00019	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??default_kill_entity@@YGXPAUENTITY@@@Z@4JA
  0001f	83 c2 01	 add	 edx, 1
  00022	52		 push	 edx
  00023	68 00 00 00 00	 push	 OFFSET ??_C@_0EO@NNHLLOBI@c?3?2users?2nhv90?2projects?2eech?2ap@
  00028	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  0002d	50		 push	 eax
  0002e	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00033	c7 45 bc 00 00
	00 00		 mov	 DWORD PTR tv73[ebp], 0
$LN4@default_ki:
  0003a	8b 4d 08	 mov	 ecx, DWORD PTR _en$[ebp]
  0003d	2b 0d 00 00 00
	00		 sub	 ecx, DWORD PTR ?entities@@3PAUENTITY@@A ; entities
  00043	c1 f9 04	 sar	 ecx, 4
  00046	51		 push	 ecx
  00047	6b 55 bc 0c	 imul	 edx, DWORD PTR tv73[ebp], 12
  0004b	8b 82 00 00 00
	00		 mov	 eax, DWORD PTR ?entity_type_database@@3PAUENTITY_TYPE_DATA@@A[edx]
  00051	50		 push	 eax
  00052	68 00 00 00 00	 push	 OFFSET ??_C@_0CN@JNNHFOGN@default_kill_entity?5invoked?3?5?$CFs@
  00057	e8 00 00 00 00	 call	 ?debug_fatal@@YAXPBDZZ	; debug_fatal
  0005c	83 c4 0c	 add	 esp, 12			; 0000000cH

; 120  : }

  0005f	5f		 pop	 edi
  00060	5e		 pop	 esi
  00061	5b		 pop	 ebx
  00062	8b e5		 mov	 esp, ebp
  00064	5d		 pop	 ebp
  00065	c2 04 00	 ret	 4
?default_kill_entity@@YGXPAUENTITY@@@Z ENDP		; default_kill_entity
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\entity\system\en_funcs\en_dstry.c
;	COMDAT ?default_destroy_entity_family@@YGXPAUENTITY@@@Z
_TEXT	SEGMENT
_en$ = 8						; size = 4
?default_destroy_entity_family@@YGXPAUENTITY@@@Z PROC	; default_destroy_entity_family, COMDAT

; 108  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 109  : ////Moje 030929 According to an e-mail Werewolf should have done this:
; 110  : //   debug_fatal ("default_destroy_entity_family invoked: %s (index = %d)", get_local_entity_type_name (en), get_local_entity_index (en));
; 111  : }

  00009	5f		 pop	 edi
  0000a	5e		 pop	 esi
  0000b	5b		 pop	 ebx
  0000c	8b e5		 mov	 esp, ebp
  0000e	5d		 pop	 ebp
  0000f	c2 04 00	 ret	 4
?default_destroy_entity_family@@YGXPAUENTITY@@@Z ENDP	; default_destroy_entity_family
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\entity\system\en_funcs\en_dstry.c
;	COMDAT ?default_destroy_entity@@YGXPAUENTITY@@@Z
_TEXT	SEGMENT
_en$ = 8						; size = 4
?default_destroy_entity@@YGXPAUENTITY@@@Z PROC		; default_destroy_entity, COMDAT

; 98   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 99   : //Werewolf 14 May 2003
; 100  : //	debug_fatal ("default_destroy_entity invoked: %s (index = %d)", get_local_entity_type_name (en), get_local_entity_index (en));
; 101  : }

  00009	5f		 pop	 edi
  0000a	5e		 pop	 esi
  0000b	5b		 pop	 ebx
  0000c	8b e5		 mov	 esp, ebp
  0000e	5d		 pop	 ebp
  0000f	c2 04 00	 ret	 4
?default_destroy_entity@@YGXPAUENTITY@@@Z ENDP		; default_destroy_entity
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\entity\system\en_funcs\en_dstry.c
;	COMDAT ?destroy_local_only_entities@@YGXXZ
_TEXT	SEGMENT
?destroy_local_only_entities@@YGXXZ PROC		; destroy_local_only_entities, COMDAT

; 640  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 641  : 
; 642  : 	destroy_local_sector_entities ();

  00009	e8 00 00 00 00	 call	 ?destroy_local_sector_entities@@YGXXZ ; destroy_local_sector_entities

; 643  : 
; 644  : 	//
; 645  : 	// These functions just assert that the entities have been destroyed by the destroy_local_entity_family system
; 646  : 	//
; 647  : 
; 648  : 	destroy_local_pylon_entities ();

  0000e	e8 00 00 00 00	 call	 ?destroy_local_pylon_entities@@YGXXZ ; destroy_local_pylon_entities

; 649  : 
; 650  : 	destroy_local_update_entity ();

  00013	e8 00 00 00 00	 call	 ?destroy_local_update_entity@@YGXXZ ; destroy_local_update_entity

; 651  : 
; 652  : 	destroy_local_camera_entity ();

  00018	e8 00 00 00 00	 call	 ?destroy_local_camera_entity@@YGXXZ ; destroy_local_camera_entity

; 653  : }

  0001d	5f		 pop	 edi
  0001e	5e		 pop	 esi
  0001f	5b		 pop	 ebx
  00020	8b e5		 mov	 esp, ebp
  00022	5d		 pop	 ebp
  00023	c3		 ret	 0
?destroy_local_only_entities@@YGXXZ ENDP		; destroy_local_only_entities
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\entity\system\en_funcs\en_dstry.c
;	COMDAT ?destroy_client_server_entity_children@@YGXPAUENTITY@@W4LIST_TYPES@@@Z
_TEXT	SEGMENT
tv145 = -76						; size = 4
tv79 = -76						; size = 4
tv136 = -72						; size = 4
tv92 = -72						; size = 4
tv70 = -72						; size = 4
_child$ = -4						; size = 4
_en$ = 8						; size = 4
_list$ = 12						; size = 4
?destroy_client_server_entity_children@@YGXPAUENTITY@@W4LIST_TYPES@@@Z PROC ; destroy_client_server_entity_children, COMDAT

; 518  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 4c	 sub	 esp, 76			; 0000004cH
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 519  :    entity
; 520  :       *child;
; 521  : 
; 522  :    child = get_local_entity_first_child (en, list);

  00009	83 7d 08 00	 cmp	 DWORD PTR _en$[ebp], 0
  0000d	74 0a		 je	 SHORT $LN5@destroy_cl
  0000f	8b 45 08	 mov	 eax, DWORD PTR _en$[ebp]
  00012	8b 08		 mov	 ecx, DWORD PTR [eax]
  00014	89 4d b8	 mov	 DWORD PTR tv70[ebp], ecx
  00017	eb 21		 jmp	 SHORT $LN6@destroy_cl
$LN5@destroy_cl:
  00019	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??destroy_client_server_entity_children@@YGXPAUENTITY@@W4LIST_TYPES@@@Z@4JA
  0001f	83 c2 04	 add	 edx, 4
  00022	52		 push	 edx
  00023	68 00 00 00 00	 push	 OFFSET ??_C@_0EO@NNHLLOBI@c?3?2users?2nhv90?2projects?2eech?2ap@
  00028	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  0002d	50		 push	 eax
  0002e	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00033	c7 45 b8 00 00
	00 00		 mov	 DWORD PTR tv70[ebp], 0
$LN6@destroy_cl:
  0003a	83 7d 0c 00	 cmp	 DWORD PTR _list$[ebp], 0
  0003e	7c 0e		 jl	 SHORT $LN7@destroy_cl
  00040	83 7d 0c 2d	 cmp	 DWORD PTR _list$[ebp], 45 ; 0000002dH
  00044	7d 08		 jge	 SHORT $LN7@destroy_cl
  00046	8b 4d 0c	 mov	 ecx, DWORD PTR _list$[ebp]
  00049	89 4d b4	 mov	 DWORD PTR tv79[ebp], ecx
  0004c	eb 21		 jmp	 SHORT $LN8@destroy_cl
$LN7@destroy_cl:
  0004e	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??destroy_client_server_entity_children@@YGXPAUENTITY@@W4LIST_TYPES@@@Z@4JA
  00054	83 c2 04	 add	 edx, 4
  00057	52		 push	 edx
  00058	68 00 00 00 00	 push	 OFFSET ??_C@_0EO@NNHLLOBI@c?3?2users?2nhv90?2projects?2eech?2ap@
  0005d	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_list_type_message@@3PBDB ; overload_invalid_list_type_message
  00062	50		 push	 eax
  00063	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00068	c7 45 b4 00 00
	00 00		 mov	 DWORD PTR tv79[ebp], 0
$LN8@destroy_cl:
  0006f	8b 4d 0c	 mov	 ecx, DWORD PTR _list$[ebp]
  00072	51		 push	 ecx
  00073	8b 55 08	 mov	 edx, DWORD PTR _en$[ebp]
  00076	52		 push	 edx
  00077	69 45 b8 b4 00
	00 00		 imul	 eax, DWORD PTR tv70[ebp], 180
  0007e	8b 4d b4	 mov	 ecx, DWORD PTR tv79[ebp]
  00081	8b 94 88 00 00
	00 00		 mov	 edx, DWORD PTR ?fn_get_local_entity_first_child@@3PAY0CN@P6GPAUENTITY@@PAU1@W4LIST_TYPES@@@ZA[eax+ecx*4]
  00088	ff d2		 call	 edx
  0008a	89 45 fc	 mov	 DWORD PTR _child$[ebp], eax
$LN2@destroy_cl:

; 523  : 
; 524  :    while (child)

  0008d	83 7d fc 00	 cmp	 DWORD PTR _child$[ebp], 0
  00091	0f 84 d3 00 00
	00		 je	 $LN1@destroy_cl

; 525  :    {
; 526  : 
; 527  : 		#if DEBUG_MODULE
; 528  : 		{
; 529  : 
; 530  : 			static int
; 531  : 				reported_segment = FALSE,
; 532  : 				reported_city_building = FALSE,
; 533  : 				reported_sector = FALSE;
; 534  : 	
; 535  : 			#if DEBUG_UPDATE_LIST_VALIDATION
; 536  : 
; 537  : 			entity
; 538  : 				*succ,
; 539  : 				*pred,
; 540  : 				*updt;
; 541  : 		
; 542  : 			if (get_update_entity ())
; 543  : 			{
; 544  : 			
; 545  : 				updt = get_local_entity_first_child (get_update_entity (), LIST_TYPE_UPDATE);
; 546  : 		
; 547  : 				while (updt)
; 548  : 				{
; 549  : 		
; 550  : 					ASSERT (updt->type != ENTITY_TYPE_UNKNOWN);
; 551  : 
; 552  : 				succ = get_local_entity_child_succ (updt, LIST_TYPE_UPDATE);
; 553  : 
; 554  : 				if (succ)
; 555  : 				{
; 556  : 
; 557  : 					ASSERT (get_local_entity_child_pred (succ, LIST_TYPE_UPDATE) == updt);
; 558  : 				}
; 559  : 
; 560  : 				pred = get_local_entity_child_pred (updt, LIST_TYPE_UPDATE);
; 561  : 
; 562  : 				if (pred)
; 563  : 				{
; 564  : 
; 565  : 					ASSERT (get_local_entity_child_succ (pred, LIST_TYPE_UPDATE) == updt);
; 566  : 				}
; 567  : 	
; 568  : 				updt = get_local_entity_child_succ (updt, LIST_TYPE_UPDATE);
; 569  : 				}
; 570  : 			}
; 571  : 
; 572  : 			#endif
; 573  : 
; 574  : 			switch (get_local_entity_type (en))
; 575  : 			{
; 576  : 		
; 577  : 				case ENTITY_TYPE_SEGMENT:
; 578  : 				case ENTITY_TYPE_SECTOR:
; 579  : 				case ENTITY_TYPE_CITY_BUILDING:
; 580  : 				{
; 581  : 		
; 582  : 					if (get_local_entity_type (en) == ENTITY_TYPE_SEGMENT)
; 583  : 					{
; 584  : 			
; 585  : 						if (reported_segment)
; 586  : 						{
; 587  : 			
; 588  : 							break;
; 589  : 						}
; 590  : 			
; 591  : 						reported_segment = TRUE;
; 592  : 					}
; 593  : 		
; 594  : 					if (get_local_entity_type (en) == ENTITY_TYPE_SECTOR)
; 595  : 					{
; 596  : 			
; 597  : 						if (reported_sector)
; 598  : 						{
; 599  : 			
; 600  : 							break;
; 601  : 						}
; 602  : 			
; 603  : 						reported_sector = TRUE;
; 604  : 					}
; 605  : 		
; 606  : 					if (get_local_entity_type (en) == ENTITY_TYPE_CITY_BUILDING)
; 607  : 					{
; 608  : 			
; 609  : 						if (reported_city_building)
; 610  : 						{
; 611  : 			
; 612  : 							break;
; 613  : 						}
; 614  : 			
; 615  : 						reported_city_building = TRUE;
; 616  : 					}
; 617  : 				}
; 618  : 				default:
; 619  : 				{
; 620  : 	
; 621  : 					debug_log ("EN_DSTRY: destroying %s, index %d, sub_type %d", get_local_entity_type_name (child), get_local_entity_index (child), get_local_entity_int_value (en, INT_TYPE_ENTITY_SUB_TYPE));
; 622  : 		
; 623  : 					break;
; 624  : 				} 
; 625  : 			}
; 626  : 		}
; 627  : 		#endif
; 628  : 
; 629  :       destroy_client_server_entity_family (child);

  00097	83 7d fc 00	 cmp	 DWORD PTR _child$[ebp], 0
  0009b	74 0a		 je	 SHORT $LN9@destroy_cl
  0009d	8b 45 fc	 mov	 eax, DWORD PTR _child$[ebp]
  000a0	8b 08		 mov	 ecx, DWORD PTR [eax]
  000a2	89 4d b8	 mov	 DWORD PTR tv92[ebp], ecx
  000a5	eb 21		 jmp	 SHORT $LN10@destroy_cl
$LN9@destroy_cl:
  000a7	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??destroy_client_server_entity_children@@YGXPAUENTITY@@W4LIST_TYPES@@@Z@4JA
  000ad	83 c2 6f	 add	 edx, 111		; 0000006fH
  000b0	52		 push	 edx
  000b1	68 00 00 00 00	 push	 OFFSET ??_C@_0EO@NNHLLOBI@c?3?2users?2nhv90?2projects?2eech?2ap@
  000b6	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  000bb	50		 push	 eax
  000bc	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  000c1	c7 45 b8 00 00
	00 00		 mov	 DWORD PTR tv92[ebp], 0
$LN10@destroy_cl:
  000c8	8b 4d fc	 mov	 ecx, DWORD PTR _child$[ebp]
  000cb	51		 push	 ecx
  000cc	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?system_comms_model@@3W4COMMS_MODEL_TYPES@@A ; system_comms_model
  000d2	c1 e2 02	 shl	 edx, 2
  000d5	8b 45 b8	 mov	 eax, DWORD PTR tv92[ebp]
  000d8	8b 8c c2 00 00
	00 00		 mov	 ecx, DWORD PTR ?fn_destroy_client_server_entity_family@@3PAY01P6GXPAUENTITY@@@ZA[edx+eax*8]
  000df	ff d1		 call	 ecx

; 630  : 
; 631  :       child = get_local_entity_first_child (en, list);

  000e1	83 7d 08 00	 cmp	 DWORD PTR _en$[ebp], 0
  000e5	74 0a		 je	 SHORT $LN11@destroy_cl
  000e7	8b 45 08	 mov	 eax, DWORD PTR _en$[ebp]
  000ea	8b 08		 mov	 ecx, DWORD PTR [eax]
  000ec	89 4d b8	 mov	 DWORD PTR tv136[ebp], ecx
  000ef	eb 21		 jmp	 SHORT $LN12@destroy_cl
$LN11@destroy_cl:
  000f1	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??destroy_client_server_entity_children@@YGXPAUENTITY@@W4LIST_TYPES@@@Z@4JA
  000f7	83 c2 71	 add	 edx, 113		; 00000071H
  000fa	52		 push	 edx
  000fb	68 00 00 00 00	 push	 OFFSET ??_C@_0EO@NNHLLOBI@c?3?2users?2nhv90?2projects?2eech?2ap@
  00100	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  00105	50		 push	 eax
  00106	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  0010b	c7 45 b8 00 00
	00 00		 mov	 DWORD PTR tv136[ebp], 0
$LN12@destroy_cl:
  00112	83 7d 0c 00	 cmp	 DWORD PTR _list$[ebp], 0
  00116	7c 0e		 jl	 SHORT $LN13@destroy_cl
  00118	83 7d 0c 2d	 cmp	 DWORD PTR _list$[ebp], 45 ; 0000002dH
  0011c	7d 08		 jge	 SHORT $LN13@destroy_cl
  0011e	8b 4d 0c	 mov	 ecx, DWORD PTR _list$[ebp]
  00121	89 4d b4	 mov	 DWORD PTR tv145[ebp], ecx
  00124	eb 21		 jmp	 SHORT $LN14@destroy_cl
$LN13@destroy_cl:
  00126	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??destroy_client_server_entity_children@@YGXPAUENTITY@@W4LIST_TYPES@@@Z@4JA
  0012c	83 c2 71	 add	 edx, 113		; 00000071H
  0012f	52		 push	 edx
  00130	68 00 00 00 00	 push	 OFFSET ??_C@_0EO@NNHLLOBI@c?3?2users?2nhv90?2projects?2eech?2ap@
  00135	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_list_type_message@@3PBDB ; overload_invalid_list_type_message
  0013a	50		 push	 eax
  0013b	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00140	c7 45 b4 00 00
	00 00		 mov	 DWORD PTR tv145[ebp], 0
$LN14@destroy_cl:
  00147	8b 4d 0c	 mov	 ecx, DWORD PTR _list$[ebp]
  0014a	51		 push	 ecx
  0014b	8b 55 08	 mov	 edx, DWORD PTR _en$[ebp]
  0014e	52		 push	 edx
  0014f	69 45 b8 b4 00
	00 00		 imul	 eax, DWORD PTR tv136[ebp], 180
  00156	8b 4d b4	 mov	 ecx, DWORD PTR tv145[ebp]
  00159	8b 94 88 00 00
	00 00		 mov	 edx, DWORD PTR ?fn_get_local_entity_first_child@@3PAY0CN@P6GPAUENTITY@@PAU1@W4LIST_TYPES@@@ZA[eax+ecx*4]
  00160	ff d2		 call	 edx
  00162	89 45 fc	 mov	 DWORD PTR _child$[ebp], eax

; 632  :    }

  00165	e9 23 ff ff ff	 jmp	 $LN2@destroy_cl
$LN1@destroy_cl:

; 633  : }

  0016a	5f		 pop	 edi
  0016b	5e		 pop	 esi
  0016c	5b		 pop	 ebx
  0016d	8b e5		 mov	 esp, ebp
  0016f	5d		 pop	 ebp
  00170	c2 08 00	 ret	 8
?destroy_client_server_entity_children@@YGXPAUENTITY@@W4LIST_TYPES@@@Z ENDP ; destroy_client_server_entity_children
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\entity\system\en_funcs\en_dstry.c
;	COMDAT ?destroy_local_entity_children@@YGXPAUENTITY@@W4LIST_TYPES@@@Z
_TEXT	SEGMENT
tv143 = -76						; size = 4
tv79 = -76						; size = 4
tv134 = -72						; size = 4
tv92 = -72						; size = 4
tv70 = -72						; size = 4
_child$ = -4						; size = 4
_en$ = 8						; size = 4
_list$ = 12						; size = 4
?destroy_local_entity_children@@YGXPAUENTITY@@W4LIST_TYPES@@@Z PROC ; destroy_local_entity_children, COMDAT

; 396  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 4c	 sub	 esp, 76			; 0000004cH
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 397  :    entity
; 398  :       *child;
; 399  : 
; 400  :    child = get_local_entity_first_child (en, list);

  00009	83 7d 08 00	 cmp	 DWORD PTR _en$[ebp], 0
  0000d	74 0a		 je	 SHORT $LN5@destroy_lo
  0000f	8b 45 08	 mov	 eax, DWORD PTR _en$[ebp]
  00012	8b 08		 mov	 ecx, DWORD PTR [eax]
  00014	89 4d b8	 mov	 DWORD PTR tv70[ebp], ecx
  00017	eb 21		 jmp	 SHORT $LN6@destroy_lo
$LN5@destroy_lo:
  00019	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??destroy_local_entity_children@@YGXPAUENTITY@@W4LIST_TYPES@@@Z@4JA
  0001f	83 c2 04	 add	 edx, 4
  00022	52		 push	 edx
  00023	68 00 00 00 00	 push	 OFFSET ??_C@_0EO@NNHLLOBI@c?3?2users?2nhv90?2projects?2eech?2ap@
  00028	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  0002d	50		 push	 eax
  0002e	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00033	c7 45 b8 00 00
	00 00		 mov	 DWORD PTR tv70[ebp], 0
$LN6@destroy_lo:
  0003a	83 7d 0c 00	 cmp	 DWORD PTR _list$[ebp], 0
  0003e	7c 0e		 jl	 SHORT $LN7@destroy_lo
  00040	83 7d 0c 2d	 cmp	 DWORD PTR _list$[ebp], 45 ; 0000002dH
  00044	7d 08		 jge	 SHORT $LN7@destroy_lo
  00046	8b 4d 0c	 mov	 ecx, DWORD PTR _list$[ebp]
  00049	89 4d b4	 mov	 DWORD PTR tv79[ebp], ecx
  0004c	eb 21		 jmp	 SHORT $LN8@destroy_lo
$LN7@destroy_lo:
  0004e	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??destroy_local_entity_children@@YGXPAUENTITY@@W4LIST_TYPES@@@Z@4JA
  00054	83 c2 04	 add	 edx, 4
  00057	52		 push	 edx
  00058	68 00 00 00 00	 push	 OFFSET ??_C@_0EO@NNHLLOBI@c?3?2users?2nhv90?2projects?2eech?2ap@
  0005d	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_list_type_message@@3PBDB ; overload_invalid_list_type_message
  00062	50		 push	 eax
  00063	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00068	c7 45 b4 00 00
	00 00		 mov	 DWORD PTR tv79[ebp], 0
$LN8@destroy_lo:
  0006f	8b 4d 0c	 mov	 ecx, DWORD PTR _list$[ebp]
  00072	51		 push	 ecx
  00073	8b 55 08	 mov	 edx, DWORD PTR _en$[ebp]
  00076	52		 push	 edx
  00077	69 45 b8 b4 00
	00 00		 imul	 eax, DWORD PTR tv70[ebp], 180
  0007e	8b 4d b4	 mov	 ecx, DWORD PTR tv79[ebp]
  00081	8b 94 88 00 00
	00 00		 mov	 edx, DWORD PTR ?fn_get_local_entity_first_child@@3PAY0CN@P6GPAUENTITY@@PAU1@W4LIST_TYPES@@@ZA[eax+ecx*4]
  00088	ff d2		 call	 edx
  0008a	89 45 fc	 mov	 DWORD PTR _child$[ebp], eax
$LN2@destroy_lo:

; 401  : 
; 402  :    while (child)

  0008d	83 7d fc 00	 cmp	 DWORD PTR _child$[ebp], 0
  00091	0f 84 ca 00 00
	00		 je	 $LN1@destroy_lo

; 403  :    {
; 404  : 
; 405  : 		#if DEBUG_MODULE
; 406  : 		{
; 407  : 
; 408  : 			static int
; 409  : 				reported_segment = FALSE,
; 410  : 				reported_city_building = FALSE,
; 411  : 				reported_sector = FALSE;
; 412  : 	
; 413  : 			#if DEBUG_UPDATE_LIST_VALIDATION
; 414  : 
; 415  : 			entity
; 416  : 				*succ,
; 417  : 				*pred,
; 418  : 				*updt;
; 419  : 		
; 420  : 			if (get_update_entity ())
; 421  : 			{
; 422  : 			
; 423  : 				updt = get_local_entity_first_child (get_update_entity (), LIST_TYPE_UPDATE);
; 424  : 		
; 425  : 				while (updt)
; 426  : 				{
; 427  : 		
; 428  : 					ASSERT (updt->type != ENTITY_TYPE_UNKNOWN);
; 429  : 	
; 430  : 					succ = get_local_entity_child_succ (updt, LIST_TYPE_UPDATE);
; 431  : 	
; 432  : 					if (succ)
; 433  : 					{
; 434  : 	
; 435  : 						ASSERT (get_local_entity_child_pred (succ, LIST_TYPE_UPDATE) == updt);
; 436  : 					}
; 437  : 	
; 438  : 					pred = get_local_entity_child_pred (updt, LIST_TYPE_UPDATE);
; 439  : 	
; 440  : 					if (pred)
; 441  : 					{
; 442  : 	
; 443  : 						ASSERT (get_local_entity_child_succ (pred, LIST_TYPE_UPDATE) == updt);
; 444  : 					}
; 445  : 		
; 446  : 					updt = get_local_entity_child_succ (updt, LIST_TYPE_UPDATE);
; 447  : 				}
; 448  : 			}
; 449  : 
; 450  : 			#endif
; 451  : 			
; 452  : 			switch (get_local_entity_type (en))
; 453  : 			{
; 454  : 		
; 455  : 				case ENTITY_TYPE_SEGMENT:
; 456  : 				case ENTITY_TYPE_SECTOR:
; 457  : 				case ENTITY_TYPE_CITY_BUILDING:
; 458  : 				{
; 459  : 		
; 460  : 					if (get_local_entity_type (en) == ENTITY_TYPE_SEGMENT)
; 461  : 					{
; 462  : 			
; 463  : 						if (reported_segment)
; 464  : 						{
; 465  : 			
; 466  : 							break;
; 467  : 						}
; 468  : 			
; 469  : 						reported_segment = TRUE;
; 470  : 					}
; 471  : 		
; 472  : 					if (get_local_entity_type (en) == ENTITY_TYPE_SECTOR)
; 473  : 					{
; 474  : 			
; 475  : 						if (reported_sector)
; 476  : 						{
; 477  : 			
; 478  : 							break;
; 479  : 						}
; 480  : 			
; 481  : 						reported_sector = TRUE;
; 482  : 					}
; 483  : 		
; 484  : 					if (get_local_entity_type (en) == ENTITY_TYPE_CITY_BUILDING)
; 485  : 					{
; 486  : 			
; 487  : 						if (reported_city_building)
; 488  : 						{
; 489  : 			
; 490  : 							break;
; 491  : 						}
; 492  : 			
; 493  : 						reported_city_building = TRUE;
; 494  : 					}
; 495  : 				}
; 496  : 				default:
; 497  : 				{
; 498  : 	
; 499  : 					debug_log ("EN_DSTRY: destroying %s, index %d, sub_type %d", get_local_entity_type_name (child), get_local_entity_index (child), get_local_entity_int_value (en, INT_TYPE_ENTITY_SUB_TYPE));
; 500  : 		
; 501  : 					break;
; 502  : 				} 
; 503  : 			}
; 504  : 		}
; 505  : 		#endif
; 506  : 
; 507  :       destroy_local_entity_family (child);

  00097	83 7d fc 00	 cmp	 DWORD PTR _child$[ebp], 0
  0009b	74 0a		 je	 SHORT $LN9@destroy_lo
  0009d	8b 45 fc	 mov	 eax, DWORD PTR _child$[ebp]
  000a0	8b 08		 mov	 ecx, DWORD PTR [eax]
  000a2	89 4d b8	 mov	 DWORD PTR tv92[ebp], ecx
  000a5	eb 21		 jmp	 SHORT $LN10@destroy_lo
$LN9@destroy_lo:
  000a7	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??destroy_local_entity_children@@YGXPAUENTITY@@W4LIST_TYPES@@@Z@4JA
  000ad	83 c2 6f	 add	 edx, 111		; 0000006fH
  000b0	52		 push	 edx
  000b1	68 00 00 00 00	 push	 OFFSET ??_C@_0EO@NNHLLOBI@c?3?2users?2nhv90?2projects?2eech?2ap@
  000b6	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  000bb	50		 push	 eax
  000bc	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  000c1	c7 45 b8 00 00
	00 00		 mov	 DWORD PTR tv92[ebp], 0
$LN10@destroy_lo:
  000c8	8b 4d fc	 mov	 ecx, DWORD PTR _child$[ebp]
  000cb	51		 push	 ecx
  000cc	8b 55 b8	 mov	 edx, DWORD PTR tv92[ebp]
  000cf	8b 04 95 00 00
	00 00		 mov	 eax, DWORD PTR ?fn_destroy_local_entity_family@@3PAP6GXPAUENTITY@@@ZA[edx*4]
  000d6	ff d0		 call	 eax

; 508  : 
; 509  :       child = get_local_entity_first_child (en, list);

  000d8	83 7d 08 00	 cmp	 DWORD PTR _en$[ebp], 0
  000dc	74 0a		 je	 SHORT $LN11@destroy_lo
  000de	8b 45 08	 mov	 eax, DWORD PTR _en$[ebp]
  000e1	8b 08		 mov	 ecx, DWORD PTR [eax]
  000e3	89 4d b8	 mov	 DWORD PTR tv134[ebp], ecx
  000e6	eb 21		 jmp	 SHORT $LN12@destroy_lo
$LN11@destroy_lo:
  000e8	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??destroy_local_entity_children@@YGXPAUENTITY@@W4LIST_TYPES@@@Z@4JA
  000ee	83 c2 71	 add	 edx, 113		; 00000071H
  000f1	52		 push	 edx
  000f2	68 00 00 00 00	 push	 OFFSET ??_C@_0EO@NNHLLOBI@c?3?2users?2nhv90?2projects?2eech?2ap@
  000f7	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  000fc	50		 push	 eax
  000fd	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00102	c7 45 b8 00 00
	00 00		 mov	 DWORD PTR tv134[ebp], 0
$LN12@destroy_lo:
  00109	83 7d 0c 00	 cmp	 DWORD PTR _list$[ebp], 0
  0010d	7c 0e		 jl	 SHORT $LN13@destroy_lo
  0010f	83 7d 0c 2d	 cmp	 DWORD PTR _list$[ebp], 45 ; 0000002dH
  00113	7d 08		 jge	 SHORT $LN13@destroy_lo
  00115	8b 4d 0c	 mov	 ecx, DWORD PTR _list$[ebp]
  00118	89 4d b4	 mov	 DWORD PTR tv143[ebp], ecx
  0011b	eb 21		 jmp	 SHORT $LN14@destroy_lo
$LN13@destroy_lo:
  0011d	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??destroy_local_entity_children@@YGXPAUENTITY@@W4LIST_TYPES@@@Z@4JA
  00123	83 c2 71	 add	 edx, 113		; 00000071H
  00126	52		 push	 edx
  00127	68 00 00 00 00	 push	 OFFSET ??_C@_0EO@NNHLLOBI@c?3?2users?2nhv90?2projects?2eech?2ap@
  0012c	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_list_type_message@@3PBDB ; overload_invalid_list_type_message
  00131	50		 push	 eax
  00132	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00137	c7 45 b4 00 00
	00 00		 mov	 DWORD PTR tv143[ebp], 0
$LN14@destroy_lo:
  0013e	8b 4d 0c	 mov	 ecx, DWORD PTR _list$[ebp]
  00141	51		 push	 ecx
  00142	8b 55 08	 mov	 edx, DWORD PTR _en$[ebp]
  00145	52		 push	 edx
  00146	69 45 b8 b4 00
	00 00		 imul	 eax, DWORD PTR tv134[ebp], 180
  0014d	8b 4d b4	 mov	 ecx, DWORD PTR tv143[ebp]
  00150	8b 94 88 00 00
	00 00		 mov	 edx, DWORD PTR ?fn_get_local_entity_first_child@@3PAY0CN@P6GPAUENTITY@@PAU1@W4LIST_TYPES@@@ZA[eax+ecx*4]
  00157	ff d2		 call	 edx
  00159	89 45 fc	 mov	 DWORD PTR _child$[ebp], eax

; 510  :    }

  0015c	e9 2c ff ff ff	 jmp	 $LN2@destroy_lo
$LN1@destroy_lo:

; 511  : }

  00161	5f		 pop	 edi
  00162	5e		 pop	 esi
  00163	5b		 pop	 ebx
  00164	8b e5		 mov	 esp, ebp
  00166	5d		 pop	 ebp
  00167	c2 08 00	 ret	 8
?destroy_local_entity_children@@YGXPAUENTITY@@W4LIST_TYPES@@@Z ENDP ; destroy_local_entity_children
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\entity\system\en_funcs\en_dstry.c
;	COMDAT ?destroy_local_entities@@YGXXZ
_TEXT	SEGMENT
tv73 = -72						; size = 4
_en$ = -4						; size = 4
?destroy_local_entities@@YGXXZ PROC			; destroy_local_entities, COMDAT

; 271  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 48	 sub	 esp, 72			; 00000048H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 272  : 	entity
; 273  : 		*en;
; 274  : 
; 275  : 	en = get_local_entity_list ();

  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ?first_used_entity@@3PAUENTITY@@A ; first_used_entity
  0000e	89 45 fc	 mov	 DWORD PTR _en$[ebp], eax

; 276  : 
; 277  : 	if (get_gunship_entity())

  00011	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?gunship_entity@@3PAUENTITY@@A, 0 ; gunship_entity
  00018	74 07		 je	 SHORT $LN2@destroy_lo

; 278  : 		set_gunship_entity(NULL);

  0001a	6a 00		 push	 0
  0001c	e8 00 00 00 00	 call	 ?set_gunship_entity@@YGXPAUENTITY@@@Z ; set_gunship_entity
$LN2@destroy_lo:

; 279  : 
; 280  : 	while (en)

  00021	83 7d fc 00	 cmp	 DWORD PTR _en$[ebp], 0
  00025	74 4b		 je	 SHORT $LN1@destroy_lo

; 281  :    {
; 282  : 
; 283  : 		#if DEBUG_MODULE
; 284  : 		{
; 285  : 
; 286  : 			static int
; 287  : 				reported_segment = FALSE,
; 288  : 				reported_city_building = FALSE,
; 289  : 				reported_sector = FALSE;
; 290  : 	
; 291  : 			#if DEBUG_UPDATE_LIST_VALIDATION
; 292  : 
; 293  : 			entity
; 294  : 				*succ,
; 295  : 				*pred,
; 296  : 				*updt;
; 297  : 	
; 298  : 			if (get_update_entity ())
; 299  : 			{
; 300  : 			
; 301  : 				updt = get_local_entity_first_child (get_update_entity (), LIST_TYPE_UPDATE);
; 302  : 		
; 303  : 				while (updt)
; 304  : 				{
; 305  : 		
; 306  : 					ASSERT (updt->type != ENTITY_TYPE_UNKNOWN);
; 307  : 	
; 308  : 					succ = get_local_entity_child_succ (updt, LIST_TYPE_UPDATE);
; 309  : 	
; 310  : 					if (succ)
; 311  : 					{
; 312  : 	
; 313  : 						ASSERT (get_local_entity_child_pred (succ, LIST_TYPE_UPDATE) == updt);
; 314  : 					}
; 315  : 	
; 316  : 					pred = get_local_entity_child_pred (updt, LIST_TYPE_UPDATE);
; 317  : 	
; 318  : 					if (pred)
; 319  : 					{
; 320  : 	
; 321  : 						ASSERT (get_local_entity_child_succ (pred, LIST_TYPE_UPDATE) == updt);
; 322  : 					}
; 323  : 		
; 324  : 					updt = get_local_entity_child_succ (updt, LIST_TYPE_UPDATE);
; 325  : 				}
; 326  : 			}
; 327  : 
; 328  : 			#endif
; 329  : 
; 330  : 			switch (get_local_entity_type (en))
; 331  : 			{
; 332  : 		
; 333  : 				case ENTITY_TYPE_SEGMENT:
; 334  : 				case ENTITY_TYPE_SECTOR:
; 335  : 				case ENTITY_TYPE_CITY_BUILDING:
; 336  : 				{
; 337  : 		
; 338  : 					if (get_local_entity_type (en) == ENTITY_TYPE_SEGMENT)
; 339  : 					{
; 340  : 			
; 341  : 						if (reported_segment)
; 342  : 						{
; 343  : 			
; 344  : 							break;
; 345  : 						}
; 346  : 			
; 347  : 						reported_segment = TRUE;
; 348  : 					}
; 349  : 		
; 350  : 					if (get_local_entity_type (en) == ENTITY_TYPE_SECTOR)
; 351  : 					{
; 352  : 			
; 353  : 						if (reported_sector)
; 354  : 						{
; 355  : 			
; 356  : 							break;
; 357  : 						}
; 358  : 			
; 359  : 						reported_sector = TRUE;
; 360  : 					}
; 361  : 		
; 362  : 					if (get_local_entity_type (en) == ENTITY_TYPE_CITY_BUILDING)
; 363  : 					{
; 364  : 			
; 365  : 						if (reported_city_building)
; 366  : 						{
; 367  : 			
; 368  : 							break;
; 369  : 						}
; 370  : 			
; 371  : 						reported_city_building = TRUE;
; 372  : 					}
; 373  : 				}
; 374  : 				default:
; 375  : 				{
; 376  : 		
; 377  : 					debug_log ("EN_DSTRY: destroying %s, index %d, sub_type %d", get_local_entity_type_name (en), get_local_entity_index (en), get_local_entity_int_value (en, INT_TYPE_ENTITY_SUB_TYPE));
; 378  : 		
; 379  : 					break;
; 380  : 				} 
; 381  : 			}
; 382  : 		}
; 383  : 		#endif
; 384  : 
; 385  : 		destroy_local_entity_family(en);

  00027	83 7d fc 00	 cmp	 DWORD PTR _en$[ebp], 0
  0002b	74 0a		 je	 SHORT $LN6@destroy_lo
  0002d	8b 45 fc	 mov	 eax, DWORD PTR _en$[ebp]
  00030	8b 08		 mov	 ecx, DWORD PTR [eax]
  00032	89 4d b8	 mov	 DWORD PTR tv73[ebp], ecx
  00035	eb 21		 jmp	 SHORT $LN7@destroy_lo
$LN6@destroy_lo:
  00037	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??destroy_local_entities@@YGXXZ@4JA
  0003d	83 c2 72	 add	 edx, 114		; 00000072H
  00040	52		 push	 edx
  00041	68 00 00 00 00	 push	 OFFSET ??_C@_0EO@NNHLLOBI@c?3?2users?2nhv90?2projects?2eech?2ap@
  00046	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  0004b	50		 push	 eax
  0004c	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00051	c7 45 b8 00 00
	00 00		 mov	 DWORD PTR tv73[ebp], 0
$LN7@destroy_lo:
  00058	8b 4d fc	 mov	 ecx, DWORD PTR _en$[ebp]
  0005b	51		 push	 ecx
  0005c	8b 55 b8	 mov	 edx, DWORD PTR tv73[ebp]
  0005f	8b 04 95 00 00
	00 00		 mov	 eax, DWORD PTR ?fn_destroy_local_entity_family@@3PAP6GXPAUENTITY@@@ZA[edx*4]
  00066	ff d0		 call	 eax

; 386  : 
; 387  : 		en = get_local_entity_list ();

  00068	a1 00 00 00 00	 mov	 eax, DWORD PTR ?first_used_entity@@3PAUENTITY@@A ; first_used_entity
  0006d	89 45 fc	 mov	 DWORD PTR _en$[ebp], eax

; 388  :    }

  00070	eb af		 jmp	 SHORT $LN2@destroy_lo
$LN1@destroy_lo:

; 389  : }

  00072	5f		 pop	 edi
  00073	5e		 pop	 esi
  00074	5b		 pop	 ebx
  00075	8b e5		 mov	 esp, ebp
  00077	5d		 pop	 ebp
  00078	c3		 ret	 0
?destroy_local_entities@@YGXXZ ENDP			; destroy_local_entities
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\entity\system\en_funcs\en_dstry.c
;	COMDAT ?destroy_local_entity@@YGXPAUENTITY@@@Z
_TEXT	SEGMENT
tv71 = -68						; size = 4
_en$ = 8						; size = 4
?destroy_local_entity@@YGXPAUENTITY@@@Z PROC		; destroy_local_entity, COMDAT

; 158  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 44	 sub	 esp, 68			; 00000044H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 159  :    update_destroy_entity_statistics (en);

  00009	8b 45 08	 mov	 eax, DWORD PTR _en$[ebp]
  0000c	50		 push	 eax
  0000d	e8 00 00 00 00	 call	 ?update_destroy_entity_statistics@@YGXPAUENTITY@@@Z ; update_destroy_entity_statistics

; 160  : 
; 161  : 	#if DEBUG_MODULE
; 162  : 	{
; 163  : 
; 164  : 		static int
; 165  : 			reported_segment = FALSE,
; 166  : 			reported_city_building = FALSE,
; 167  : 			reported_sector = FALSE;
; 168  : 
; 169  : 		#if DEBUG_UPDATE_LIST_VALIDATION
; 170  : 
; 171  : 		entity
; 172  : 			*succ,
; 173  : 			*pred,
; 174  : 			*updt;
; 175  : 
; 176  : 		if (get_update_entity ())
; 177  : 		{
; 178  : 		
; 179  : 			updt = get_local_entity_first_child (get_update_entity (), LIST_TYPE_UPDATE);
; 180  : 	
; 181  : 			while (updt)
; 182  : 			{
; 183  : 	
; 184  : 				ASSERT (updt->type != ENTITY_TYPE_UNKNOWN);
; 185  : 
; 186  : 				succ = get_local_entity_child_succ (updt, LIST_TYPE_UPDATE);
; 187  : 
; 188  : 				if (succ)
; 189  : 				{
; 190  : 
; 191  : 					ASSERT (get_local_entity_child_pred (succ, LIST_TYPE_UPDATE) == updt);
; 192  : 				}
; 193  : 
; 194  : 				pred = get_local_entity_child_pred (updt, LIST_TYPE_UPDATE);
; 195  : 
; 196  : 				if (pred)
; 197  : 				{
; 198  : 
; 199  : 					ASSERT (get_local_entity_child_succ (pred, LIST_TYPE_UPDATE) == updt);
; 200  : 				}
; 201  : 	
; 202  : 				updt = get_local_entity_child_succ (updt, LIST_TYPE_UPDATE);
; 203  : 			}
; 204  : 		}
; 205  : 
; 206  : 		#endif
; 207  : 	
; 208  : 		switch (get_local_entity_type (en))
; 209  : 		{
; 210  : 	
; 211  : 			case ENTITY_TYPE_SEGMENT:
; 212  : 			case ENTITY_TYPE_SECTOR:
; 213  : 			case ENTITY_TYPE_CITY_BUILDING:
; 214  : 			{
; 215  : 	
; 216  : 				if (get_local_entity_type (en) == ENTITY_TYPE_SEGMENT)
; 217  : 				{
; 218  : 		
; 219  : 					if (reported_segment)
; 220  : 					{
; 221  : 		
; 222  : 						break;
; 223  : 					}
; 224  : 		
; 225  : 					reported_segment = TRUE;
; 226  : 				}
; 227  : 	
; 228  : 				if (get_local_entity_type (en) == ENTITY_TYPE_SECTOR)
; 229  : 				{
; 230  : 		
; 231  : 					if (reported_sector)
; 232  : 					{
; 233  : 		
; 234  : 						break;
; 235  : 					}
; 236  : 		
; 237  : 					reported_sector = TRUE;
; 238  : 				}
; 239  : 	
; 240  : 				if (get_local_entity_type (en) == ENTITY_TYPE_CITY_BUILDING)
; 241  : 				{
; 242  : 		
; 243  : 					if (reported_city_building)
; 244  : 					{
; 245  : 		
; 246  : 						break;
; 247  : 					}
; 248  : 		
; 249  : 					reported_city_building = TRUE;
; 250  : 				}
; 251  : 			}
; 252  : 			default:
; 253  : 			{
; 254  : 	
; 255  : 				debug_log ("EN_DSTRY: destroyed %s, index %d, sub_type %d", get_local_entity_type_name (en), get_local_entity_index (en), get_local_entity_int_value (en, INT_TYPE_ENTITY_SUB_TYPE));
; 256  : 	
; 257  : 				break;
; 258  : 			} 
; 259  : 		}
; 260  : 	}
; 261  : 	#endif
; 262  : 
; 263  :    fn_destroy_local_entity[get_local_entity_type(en)] (en);

  00012	83 7d 08 00	 cmp	 DWORD PTR _en$[ebp], 0
  00016	74 0a		 je	 SHORT $LN3@destroy_lo
  00018	8b 45 08	 mov	 eax, DWORD PTR _en$[ebp]
  0001b	8b 08		 mov	 ecx, DWORD PTR [eax]
  0001d	89 4d bc	 mov	 DWORD PTR tv71[ebp], ecx
  00020	eb 21		 jmp	 SHORT $LN4@destroy_lo
$LN3@destroy_lo:
  00022	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??destroy_local_entity@@YGXPAUENTITY@@@Z@4JA
  00028	83 c2 69	 add	 edx, 105		; 00000069H
  0002b	52		 push	 edx
  0002c	68 00 00 00 00	 push	 OFFSET ??_C@_0EO@NNHLLOBI@c?3?2users?2nhv90?2projects?2eech?2ap@
  00031	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  00036	50		 push	 eax
  00037	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  0003c	c7 45 bc 00 00
	00 00		 mov	 DWORD PTR tv71[ebp], 0
$LN4@destroy_lo:
  00043	8b 4d 08	 mov	 ecx, DWORD PTR _en$[ebp]
  00046	51		 push	 ecx
  00047	8b 55 bc	 mov	 edx, DWORD PTR tv71[ebp]
  0004a	8b 04 95 00 00
	00 00		 mov	 eax, DWORD PTR ?fn_destroy_local_entity@@3PAP6GXPAUENTITY@@@ZA[edx*4]
  00051	ff d0		 call	 eax

; 264  : }

  00053	5f		 pop	 edi
  00054	5e		 pop	 esi
  00055	5b		 pop	 ebx
  00056	8b e5		 mov	 esp, ebp
  00058	5d		 pop	 ebp
  00059	c2 04 00	 ret	 4
?destroy_local_entity@@YGXPAUENTITY@@@Z ENDP		; destroy_local_entity
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\entity\system\en_funcs\en_dstry.c
;	COMDAT ?initialise_entity_destroy_default_functions@@YGXXZ
_TEXT	SEGMENT
_i$ = -4						; size = 4
?initialise_entity_destroy_default_functions@@YGXXZ PROC ; initialise_entity_destroy_default_functions, COMDAT

; 127  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 44	 sub	 esp, 68			; 00000044H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 128  :    int
; 129  :       i;
; 130  : 
; 131  :    for (i = 0; i < NUM_ENTITY_TYPES; i++)

  00009	c7 45 fc 00 00
	00 00		 mov	 DWORD PTR _i$[ebp], 0
  00010	eb 09		 jmp	 SHORT $LN4@initialise
$LN2@initialise:
  00012	8b 45 fc	 mov	 eax, DWORD PTR _i$[ebp]
  00015	83 c0 01	 add	 eax, 1
  00018	89 45 fc	 mov	 DWORD PTR _i$[ebp], eax
$LN4@initialise:
  0001b	83 7d fc 26	 cmp	 DWORD PTR _i$[ebp], 38	; 00000026H
  0001f	0f 8d b3 00 00
	00		 jge	 $LN1@initialise

; 132  :    {
; 133  :       fn_destroy_local_entity[i]													= default_destroy_entity;

  00025	8b 45 fc	 mov	 eax, DWORD PTR _i$[ebp]
  00028	c7 04 85 00 00
	00 00 00 00 00
	00		 mov	 DWORD PTR ?fn_destroy_local_entity@@3PAP6GXPAUENTITY@@@ZA[eax*4], OFFSET ?default_destroy_entity@@YGXPAUENTITY@@@Z ; default_destroy_entity

; 134  : 
; 135  :       fn_destroy_client_server_entity[i][COMMS_MODEL_SERVER]			= default_destroy_entity;

  00033	b8 04 00 00 00	 mov	 eax, 4
  00038	6b c8 00	 imul	 ecx, eax, 0
  0003b	8b 55 fc	 mov	 edx, DWORD PTR _i$[ebp]
  0003e	c7 84 d1 00 00
	00 00 00 00 00
	00		 mov	 DWORD PTR ?fn_destroy_client_server_entity@@3PAY01P6GXPAUENTITY@@@ZA[ecx+edx*8], OFFSET ?default_destroy_entity@@YGXPAUENTITY@@@Z ; default_destroy_entity

; 136  : 
; 137  :       fn_destroy_client_server_entity[i][COMMS_MODEL_CLIENT]			= default_destroy_entity;

  00049	b8 04 00 00 00	 mov	 eax, 4
  0004e	c1 e0 00	 shl	 eax, 0
  00051	8b 4d fc	 mov	 ecx, DWORD PTR _i$[ebp]
  00054	c7 84 c8 00 00
	00 00 00 00 00
	00		 mov	 DWORD PTR ?fn_destroy_client_server_entity@@3PAY01P6GXPAUENTITY@@@ZA[eax+ecx*8], OFFSET ?default_destroy_entity@@YGXPAUENTITY@@@Z ; default_destroy_entity

; 138  : 
; 139  :       fn_destroy_local_entity_family[i]										= default_destroy_entity_family;

  0005f	8b 45 fc	 mov	 eax, DWORD PTR _i$[ebp]
  00062	c7 04 85 00 00
	00 00 00 00 00
	00		 mov	 DWORD PTR ?fn_destroy_local_entity_family@@3PAP6GXPAUENTITY@@@ZA[eax*4], OFFSET ?default_destroy_entity_family@@YGXPAUENTITY@@@Z ; default_destroy_entity_family

; 140  : 
; 141  :       fn_destroy_client_server_entity_family[i][COMMS_MODEL_SERVER]	= default_destroy_entity_family;

  0006d	b8 04 00 00 00	 mov	 eax, 4
  00072	6b c8 00	 imul	 ecx, eax, 0
  00075	8b 55 fc	 mov	 edx, DWORD PTR _i$[ebp]
  00078	c7 84 d1 00 00
	00 00 00 00 00
	00		 mov	 DWORD PTR ?fn_destroy_client_server_entity_family@@3PAY01P6GXPAUENTITY@@@ZA[ecx+edx*8], OFFSET ?default_destroy_entity_family@@YGXPAUENTITY@@@Z ; default_destroy_entity_family

; 142  : 
; 143  :       fn_destroy_client_server_entity_family[i][COMMS_MODEL_CLIENT]	= default_destroy_entity_family;

  00083	b8 04 00 00 00	 mov	 eax, 4
  00088	c1 e0 00	 shl	 eax, 0
  0008b	8b 4d fc	 mov	 ecx, DWORD PTR _i$[ebp]
  0008e	c7 84 c8 00 00
	00 00 00 00 00
	00		 mov	 DWORD PTR ?fn_destroy_client_server_entity_family@@3PAY01P6GXPAUENTITY@@@ZA[eax+ecx*8], OFFSET ?default_destroy_entity_family@@YGXPAUENTITY@@@Z ; default_destroy_entity_family

; 144  : 
; 145  :       fn_kill_local_entity[i]														= default_kill_entity;

  00099	8b 45 fc	 mov	 eax, DWORD PTR _i$[ebp]
  0009c	c7 04 85 00 00
	00 00 00 00 00
	00		 mov	 DWORD PTR ?fn_kill_local_entity@@3PAP6GXPAUENTITY@@@ZA[eax*4], OFFSET ?default_kill_entity@@YGXPAUENTITY@@@Z ; default_kill_entity

; 146  : 
; 147  :       fn_kill_client_server_entity[i][COMMS_MODEL_SERVER]				= default_kill_entity;

  000a7	b8 04 00 00 00	 mov	 eax, 4
  000ac	6b c8 00	 imul	 ecx, eax, 0
  000af	8b 55 fc	 mov	 edx, DWORD PTR _i$[ebp]
  000b2	c7 84 d1 00 00
	00 00 00 00 00
	00		 mov	 DWORD PTR ?fn_kill_client_server_entity@@3PAY01P6GXPAUENTITY@@@ZA[ecx+edx*8], OFFSET ?default_kill_entity@@YGXPAUENTITY@@@Z ; default_kill_entity

; 148  : 
; 149  :       fn_kill_client_server_entity[i][COMMS_MODEL_CLIENT]				= default_kill_entity;

  000bd	b8 04 00 00 00	 mov	 eax, 4
  000c2	c1 e0 00	 shl	 eax, 0
  000c5	8b 4d fc	 mov	 ecx, DWORD PTR _i$[ebp]
  000c8	c7 84 c8 00 00
	00 00 00 00 00
	00		 mov	 DWORD PTR ?fn_kill_client_server_entity@@3PAY01P6GXPAUENTITY@@@ZA[eax+ecx*8], OFFSET ?default_kill_entity@@YGXPAUENTITY@@@Z ; default_kill_entity

; 150  :    }

  000d3	e9 3a ff ff ff	 jmp	 $LN2@initialise
$LN1@initialise:

; 151  : }

  000d8	5f		 pop	 edi
  000d9	5e		 pop	 esi
  000da	5b		 pop	 ebx
  000db	8b e5		 mov	 esp, ebp
  000dd	5d		 pop	 ebp
  000de	c3		 ret	 0
?initialise_entity_destroy_default_functions@@YGXXZ ENDP ; initialise_entity_destroy_default_functions
_TEXT	ENDS
END
