; Listing generated by Microsoft (R) Optimizing Compiler Version 19.16.27045.0 

	TITLE	C:\Users\nhv90\Projects\eech\aphavoc\source\entity\special\camera\cm_auto.c
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB MSVCRTD
INCLUDELIB OLDNAMES

PUBLIC	?switch_auto_edit_entity@@YGPAUENTITY@@PAUCAMERA@@@Z ; switch_auto_edit_entity
PUBLIC	?get_auto_edit_random_camera_mode@@YG?AW4CAMERA_MODES@@PAUCAMERA@@@Z ; get_auto_edit_random_camera_mode
PUBLIC	?switch_auto_edit_camera_mode@@YGHPAUCAMERA@@@Z	; switch_auto_edit_camera_mode
PUBLIC	?update_local_entity_view_interest_level@@YGXPAUENTITY@@@Z ; update_local_entity_view_interest_level
PUBLIC	?__LINE__Var@?0??find_matching_entity@@YGPAUENTITY@@PAUCAMERA@@W4ENTITY_FORCES@@W4ENTITY_SIDES@@W4MOTION_STATES@@@Z@4JA ; `find_matching_entity'::`1'::__LINE__Var
PUBLIC	??_C@_0EM@PMEHNMCG@c?3?2users?2nhv90?2projects?2eech?2ap@ ; `string'
PUBLIC	??_C@_03DGOGAGNC@raw@				; `string'
PUBLIC	?__LINE__Var@?0??get_best_view_entity@@YGPAUENTITY@@PAUCAMERA@@@Z@4JA ; `get_best_view_entity'::`1'::__LINE__Var
PUBLIC	?__LINE__Var@?0??switch_auto_edit_entity@@YGPAUENTITY@@PAUCAMERA@@@Z@4JA ; `switch_auto_edit_entity'::`1'::__LINE__Var
PUBLIC	??_C@_0BK@NIGJPCBN@raw?9?$DOexternal_view_entity@ ; `string'
PUBLIC	?__LINE__Var@?0??get_auto_edit_random_camera_mode@@YG?AW4CAMERA_MODES@@PAUCAMERA@@@Z@4JA ; `get_auto_edit_random_camera_mode'::`1'::__LINE__Var
PUBLIC	?__LINE__Var@?0??switch_auto_edit_camera_mode@@YGHPAUCAMERA@@@Z@4JA ; `switch_auto_edit_camera_mode'::`1'::__LINE__Var
PUBLIC	?__LINE__Var@?0??update_local_entity_view_interest_level@@YGXPAUENTITY@@@Z@4JA ; `update_local_entity_view_interest_level'::`1'::__LINE__Var
PUBLIC	??_C@_02LFNMGJAP@en@				; `string'
PUBLIC	__real@0000000000000000
PUBLIC	__real@3f00002000400080
PUBLIC	__real@3fd54fdf3b645a1d
PUBLIC	__real@3fd999999999999a
PUBLIC	__real@3fe0000000000000
PUBLIC	__real@3fe3333333333333
PUBLIC	__real@3fe55810624dd2f2
PUBLIC	__real@3feccccccccccccd
PUBLIC	__real@3ff0000000000000
PUBLIC	__real@4014000000000000
PUBLIC	__real@bf800000
EXTRN	?process_assert@@YGXPBD0H@Z:PROC		; process_assert
EXTRN	?get_local_entity_vec3d_magnitude@@YGMPAUENTITY@@W4VEC3D_TYPES@@@Z:PROC ; get_local_entity_vec3d_magnitude
EXTRN	?update_cinematic_camera_continued@@YGXPAUCAMERA@@@Z:PROC ; update_cinematic_camera_continued
EXTRN	?update_fly_by_camera_continued@@YGXPAUCAMERA@@@Z:PROC ; update_fly_by_camera_continued
EXTRN	?set_camera_mode@@YGXPAUCAMERA@@W4CAMERA_MODES@@H@Z:PROC ; set_camera_mode
EXTRN	?set_external_view_entity@@YGXPAUENTITY@@@Z:PROC ; set_external_view_entity
EXTRN	?get_entity_available_from_view_menu@@YGHPAUENTITY@@@Z:PROC ; get_entity_available_from_view_menu
EXTRN	?system_delta_time@@3MA:DWORD			; system_delta_time
EXTRN	?random_number_seed@@3HA:DWORD			; random_number_seed
EXTRN	?null_entity_pointer_message@@3PBDB:DWORD	; null_entity_pointer_message
EXTRN	?overload_invalid_list_type_message@@3PBDB:DWORD ; overload_invalid_list_type_message
EXTRN	?fn_get_local_entity_child_succ@@3PAY0CN@P6GPAUENTITY@@PAU1@W4LIST_TYPES@@@ZA:BYTE ; fn_get_local_entity_child_succ
EXTRN	?overload_invalid_float_type_message@@3PBDB:DWORD ; overload_invalid_float_type_message
EXTRN	?fn_set_local_entity_float_value@@3PAY0KP@P6GXPAUENTITY@@W4FLOAT_TYPES@@M@ZA:BYTE ; fn_set_local_entity_float_value
EXTRN	?fn_get_local_entity_float_value@@3PAY0KP@P6GMPAUENTITY@@W4FLOAT_TYPES@@@ZA:BYTE ; fn_get_local_entity_float_value
EXTRN	?overload_invalid_int_type_message@@3PBDB:DWORD	; overload_invalid_int_type_message
EXTRN	?fn_get_local_entity_int_value@@3PAY0BBH@P6GHPAUENTITY@@W4INT_TYPES@@@ZA:BYTE ; fn_get_local_entity_int_value
EXTRN	__fltused:DWORD
;	COMDAT __real@bf800000
CONST	SEGMENT
__real@bf800000 DD 0bf800000r			; -1
CONST	ENDS
;	COMDAT __real@4014000000000000
CONST	SEGMENT
__real@4014000000000000 DQ 04014000000000000r	; 5
CONST	ENDS
;	COMDAT __real@3ff0000000000000
CONST	SEGMENT
__real@3ff0000000000000 DQ 03ff0000000000000r	; 1
CONST	ENDS
;	COMDAT __real@3feccccccccccccd
CONST	SEGMENT
__real@3feccccccccccccd DQ 03feccccccccccccdr	; 0.9
CONST	ENDS
;	COMDAT __real@3fe55810624dd2f2
CONST	SEGMENT
__real@3fe55810624dd2f2 DQ 03fe55810624dd2f2r	; 0.667
CONST	ENDS
;	COMDAT __real@3fe3333333333333
CONST	SEGMENT
__real@3fe3333333333333 DQ 03fe3333333333333r	; 0.6
CONST	ENDS
;	COMDAT __real@3fe0000000000000
CONST	SEGMENT
__real@3fe0000000000000 DQ 03fe0000000000000r	; 0.5
CONST	ENDS
;	COMDAT __real@3fd999999999999a
CONST	SEGMENT
__real@3fd999999999999a DQ 03fd999999999999ar	; 0.4
CONST	ENDS
;	COMDAT __real@3fd54fdf3b645a1d
CONST	SEGMENT
__real@3fd54fdf3b645a1d DQ 03fd54fdf3b645a1dr	; 0.333
CONST	ENDS
;	COMDAT __real@3f00002000400080
CONST	SEGMENT
__real@3f00002000400080 DQ 03f00002000400080r	; 3.05185e-05
CONST	ENDS
;	COMDAT __real@0000000000000000
CONST	SEGMENT
__real@0000000000000000 DQ 00000000000000000r	; 0
CONST	ENDS
;	COMDAT ??_C@_02LFNMGJAP@en@
CONST	SEGMENT
??_C@_02LFNMGJAP@en@ DB 'en', 00H			; `string'
CONST	ENDS
;	COMDAT ?__LINE__Var@?0??update_local_entity_view_interest_level@@YGXPAUENTITY@@@Z@4JA
_DATA	SEGMENT
?__LINE__Var@?0??update_local_entity_view_interest_level@@YGXPAUENTITY@@@Z@4JA DD 0186H ; `update_local_entity_view_interest_level'::`1'::__LINE__Var
_DATA	ENDS
;	COMDAT ?__LINE__Var@?0??switch_auto_edit_camera_mode@@YGHPAUCAMERA@@@Z@4JA
_DATA	SEGMENT
?__LINE__Var@?0??switch_auto_edit_camera_mode@@YGHPAUCAMERA@@@Z@4JA DD 015fH ; `switch_auto_edit_camera_mode'::`1'::__LINE__Var
_DATA	ENDS
;	COMDAT ?__LINE__Var@?0??get_auto_edit_random_camera_mode@@YG?AW4CAMERA_MODES@@PAUCAMERA@@@Z@4JA
_DATA	SEGMENT
?__LINE__Var@?0??get_auto_edit_random_camera_mode@@YG?AW4CAMERA_MODES@@PAUCAMERA@@@Z@4JA DD 0141H ; `get_auto_edit_random_camera_mode'::`1'::__LINE__Var
_DATA	ENDS
;	COMDAT ??_C@_0BK@NIGJPCBN@raw?9?$DOexternal_view_entity@
CONST	SEGMENT
??_C@_0BK@NIGJPCBN@raw?9?$DOexternal_view_entity@ DB 'raw->external_view_'
	DB	'entity', 00H				; `string'
CONST	ENDS
;	COMDAT ?__LINE__Var@?0??switch_auto_edit_entity@@YGPAUENTITY@@PAUCAMERA@@@Z@4JA
_DATA	SEGMENT
?__LINE__Var@?0??switch_auto_edit_entity@@YGPAUENTITY@@PAUCAMERA@@@Z@4JA DD 0123H ; `switch_auto_edit_entity'::`1'::__LINE__Var
_DATA	ENDS
;	COMDAT ?__LINE__Var@?0??get_best_view_entity@@YGPAUENTITY@@PAUCAMERA@@@Z@4JA
_DATA	SEGMENT
?__LINE__Var@?0??get_best_view_entity@@YGPAUENTITY@@PAUCAMERA@@@Z@4JA DD 0b7H ; `get_best_view_entity'::`1'::__LINE__Var
_DATA	ENDS
;	COMDAT ??_C@_03DGOGAGNC@raw@
CONST	SEGMENT
??_C@_03DGOGAGNC@raw@ DB 'raw', 00H			; `string'
CONST	ENDS
;	COMDAT ??_C@_0EM@PMEHNMCG@c?3?2users?2nhv90?2projects?2eech?2ap@
CONST	SEGMENT
??_C@_0EM@PMEHNMCG@c?3?2users?2nhv90?2projects?2eech?2ap@ DB 'c:\users\nh'
	DB	'v90\projects\eech\aphavoc\source\entity\special\camera\cm_aut'
	DB	'o.c', 00H					; `string'
CONST	ENDS
;	COMDAT ?__LINE__Var@?0??find_matching_entity@@YGPAUENTITY@@PAUCAMERA@@W4ENTITY_FORCES@@W4ENTITY_SIDES@@W4MOTION_STATES@@@Z@4JA
_DATA	SEGMENT
?__LINE__Var@?0??find_matching_entity@@YGPAUENTITY@@PAUCAMERA@@W4ENTITY_FORCES@@W4ENTITY_SIDES@@W4MOTION_STATES@@@Z@4JA DD 05eH ; `find_matching_entity'::`1'::__LINE__Var
_DATA	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\entity\special\camera\cm_auto.c
;	COMDAT ?get_best_view_entity@@YGPAUENTITY@@PAUCAMERA@@@Z
_TEXT	SEGMENT
_x$ = -20						; size = 4
_state$ = -16						; size = 4
_side$ = -12						; size = 4
_force$ = -8						; size = 4
_en$ = -4						; size = 4
_raw$ = 8						; size = 4
?get_best_view_entity@@YGPAUENTITY@@PAUCAMERA@@@Z PROC	; get_best_view_entity, COMDAT

; 183  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 54	 sub	 esp, 84			; 00000054H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 184  : 	entity
; 185  : 		*en;
; 186  : 
; 187  : 	entity_forces
; 188  : 		force;
; 189  : 
; 190  : 	entity_sides
; 191  : 		side;
; 192  : 
; 193  : 	motion_states
; 194  : 		state;
; 195  : 
; 196  : 	float
; 197  : 		x;
; 198  : 
; 199  : 	ASSERT (raw);

  00009	83 7d 08 00	 cmp	 DWORD PTR _raw$[ebp], 0
  0000d	75 18		 jne	 SHORT $LN2@get_best_v
  0000f	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??get_best_view_entity@@YGPAUENTITY@@PAUCAMERA@@@Z@4JA
  00014	83 c0 10	 add	 eax, 16			; 00000010H
  00017	50		 push	 eax
  00018	68 00 00 00 00	 push	 OFFSET ??_C@_0EM@PMEHNMCG@c?3?2users?2nhv90?2projects?2eech?2ap@
  0001d	68 00 00 00 00	 push	 OFFSET ??_C@_03DGOGAGNC@raw@
  00022	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN2@get_best_v:

; 200  : 
; 201  : 	////////////////////////////////////////
; 202  : 	//
; 203  : 	// force
; 204  : 	//
; 205  : 	////////////////////////////////////////
; 206  : 
; 207  : 	x = frand1 ();

  00027	69 05 00 00 00
	00 6d 4e c6 41	 imul	 eax, DWORD PTR ?random_number_seed@@3HA, 1103515245 ; random_number_seed
  00031	05 39 30 00 00	 add	 eax, 12345		; 00003039H
  00036	a3 00 00 00 00	 mov	 DWORD PTR ?random_number_seed@@3HA, eax ; random_number_seed
  0003b	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?random_number_seed@@3HA ; random_number_seed
  00041	c1 f9 10	 sar	 ecx, 16			; 00000010H
  00044	81 e1 ff 7f 00
	00		 and	 ecx, 32767		; 00007fffH
  0004a	f2 0f 2a c1	 cvtsi2sd xmm0, ecx
  0004e	f2 0f 59 05 00
	00 00 00	 mulsd	 xmm0, QWORD PTR __real@3f00002000400080
  00056	f2 0f 5a c0	 cvtsd2ss xmm0, xmm0
  0005a	f3 0f 11 45 ec	 movss	 DWORD PTR _x$[ebp], xmm0

; 208  : 
; 209  : 	if (x <= 0.6)

  0005f	f3 0f 5a 45 ec	 cvtss2sd xmm0, DWORD PTR _x$[ebp]
  00064	f2 0f 10 0d 00
	00 00 00	 movsd	 xmm1, QWORD PTR __real@3fe3333333333333
  0006c	66 0f 2f c8	 comisd	 xmm1, xmm0
  00070	72 09		 jb	 SHORT $LN3@get_best_v

; 210  : 	{
; 211  : 		force = ENTITY_FORCE_AIR;

  00072	c7 45 f8 01 00
	00 00		 mov	 DWORD PTR _force$[ebp], 1
  00079	eb 23		 jmp	 SHORT $LN6@get_best_v
$LN3@get_best_v:

; 212  : 	}
; 213  : 	else if (x <= 0.9)

  0007b	f3 0f 5a 45 ec	 cvtss2sd xmm0, DWORD PTR _x$[ebp]
  00080	f2 0f 10 0d 00
	00 00 00	 movsd	 xmm1, QWORD PTR __real@3feccccccccccccd
  00088	66 0f 2f c8	 comisd	 xmm1, xmm0
  0008c	72 09		 jb	 SHORT $LN5@get_best_v

; 214  : 	{
; 215  : 		force = ENTITY_FORCE_GROUND;

  0008e	c7 45 f8 02 00
	00 00		 mov	 DWORD PTR _force$[ebp], 2

; 216  : 	}
; 217  : 	else

  00095	eb 07		 jmp	 SHORT $LN6@get_best_v
$LN5@get_best_v:

; 218  : 	{
; 219  : 		force = ENTITY_FORCE_SEA;

  00097	c7 45 f8 03 00
	00 00		 mov	 DWORD PTR _force$[ebp], 3
$LN6@get_best_v:

; 220  : 	}
; 221  : 
; 222  : 	////////////////////////////////////////
; 223  : 	//
; 224  : 	// side
; 225  : 	//
; 226  : 	////////////////////////////////////////
; 227  : 
; 228  : 	x = frand1 ();

  0009e	69 05 00 00 00
	00 6d 4e c6 41	 imul	 eax, DWORD PTR ?random_number_seed@@3HA, 1103515245 ; random_number_seed
  000a8	05 39 30 00 00	 add	 eax, 12345		; 00003039H
  000ad	a3 00 00 00 00	 mov	 DWORD PTR ?random_number_seed@@3HA, eax ; random_number_seed
  000b2	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?random_number_seed@@3HA ; random_number_seed
  000b8	c1 f9 10	 sar	 ecx, 16			; 00000010H
  000bb	81 e1 ff 7f 00
	00		 and	 ecx, 32767		; 00007fffH
  000c1	f2 0f 2a c1	 cvtsi2sd xmm0, ecx
  000c5	f2 0f 59 05 00
	00 00 00	 mulsd	 xmm0, QWORD PTR __real@3f00002000400080
  000cd	f2 0f 5a c0	 cvtsd2ss xmm0, xmm0
  000d1	f3 0f 11 45 ec	 movss	 DWORD PTR _x$[ebp], xmm0

; 229  : 
; 230  : 	if (x <= 0.5)

  000d6	f3 0f 5a 45 ec	 cvtss2sd xmm0, DWORD PTR _x$[ebp]
  000db	f2 0f 10 0d 00
	00 00 00	 movsd	 xmm1, QWORD PTR __real@3fe0000000000000
  000e3	66 0f 2f c8	 comisd	 xmm1, xmm0
  000e7	72 09		 jb	 SHORT $LN7@get_best_v

; 231  : 	{
; 232  : 		side = ENTITY_SIDE_BLUE_FORCE;

  000e9	c7 45 f4 01 00
	00 00		 mov	 DWORD PTR _side$[ebp], 1

; 233  : 	}
; 234  : 	else

  000f0	eb 07		 jmp	 SHORT $LN8@get_best_v
$LN7@get_best_v:

; 235  : 	{
; 236  : 		side = ENTITY_SIDE_RED_FORCE;

  000f2	c7 45 f4 02 00
	00 00		 mov	 DWORD PTR _side$[ebp], 2
$LN8@get_best_v:

; 237  : 	}
; 238  : 
; 239  : 	////////////////////////////////////////
; 240  : 	//
; 241  : 	// motion state
; 242  : 	//
; 243  : 	////////////////////////////////////////
; 244  : 
; 245  : 	x = frand1 ();

  000f9	69 05 00 00 00
	00 6d 4e c6 41	 imul	 eax, DWORD PTR ?random_number_seed@@3HA, 1103515245 ; random_number_seed
  00103	05 39 30 00 00	 add	 eax, 12345		; 00003039H
  00108	a3 00 00 00 00	 mov	 DWORD PTR ?random_number_seed@@3HA, eax ; random_number_seed
  0010d	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?random_number_seed@@3HA ; random_number_seed
  00113	c1 f9 10	 sar	 ecx, 16			; 00000010H
  00116	81 e1 ff 7f 00
	00		 and	 ecx, 32767		; 00007fffH
  0011c	f2 0f 2a c1	 cvtsi2sd xmm0, ecx
  00120	f2 0f 59 05 00
	00 00 00	 mulsd	 xmm0, QWORD PTR __real@3f00002000400080
  00128	f2 0f 5a c0	 cvtsd2ss xmm0, xmm0
  0012c	f3 0f 11 45 ec	 movss	 DWORD PTR _x$[ebp], xmm0

; 246  : 
; 247  : 	if (x <= 0.333)

  00131	f3 0f 5a 45 ec	 cvtss2sd xmm0, DWORD PTR _x$[ebp]
  00136	f2 0f 10 0d 00
	00 00 00	 movsd	 xmm1, QWORD PTR __real@3fd54fdf3b645a1d
  0013e	66 0f 2f c8	 comisd	 xmm1, xmm0
  00142	72 09		 jb	 SHORT $LN9@get_best_v

; 248  : 	{
; 249  : 		state = MOTION_STATE_STATIC;

  00144	c7 45 f0 01 00
	00 00		 mov	 DWORD PTR _state$[ebp], 1

; 250  : 	}
; 251  : 	else

  0014b	eb 07		 jmp	 SHORT $LN10@get_best_v
$LN9@get_best_v:

; 252  : 	{
; 253  : 		state = MOTION_STATE_MOVING;

  0014d	c7 45 f0 02 00
	00 00		 mov	 DWORD PTR _state$[ebp], 2
$LN10@get_best_v:

; 254  : 	}
; 255  : 
; 256  : 	////////////////////////////////////////
; 257  : 	//
; 258  : 	// find ideal entity, if not, relax parameters until something is found
; 259  : 	//
; 260  : 	////////////////////////////////////////
; 261  : 
; 262  : 	en = find_matching_entity (raw, force, side, state);

  00154	8b 45 f0	 mov	 eax, DWORD PTR _state$[ebp]
  00157	50		 push	 eax
  00158	8b 4d f4	 mov	 ecx, DWORD PTR _side$[ebp]
  0015b	51		 push	 ecx
  0015c	8b 55 f8	 mov	 edx, DWORD PTR _force$[ebp]
  0015f	52		 push	 edx
  00160	8b 45 08	 mov	 eax, DWORD PTR _raw$[ebp]
  00163	50		 push	 eax
  00164	e8 00 00 00 00	 call	 ?find_matching_entity@@YGPAUENTITY@@PAUCAMERA@@W4ENTITY_FORCES@@W4ENTITY_SIDES@@W4MOTION_STATES@@@Z ; find_matching_entity
  00169	89 45 fc	 mov	 DWORD PTR _en$[ebp], eax

; 263  : 
; 264  : 	if (!en)

  0016c	83 7d fc 00	 cmp	 DWORD PTR _en$[ebp], 0
  00170	75 48		 jne	 SHORT $LN13@get_best_v

; 265  : 	{
; 266  : 		en = find_matching_entity (raw, force, side, MOTION_STATE_DONT_CARE);

  00172	6a 00		 push	 0
  00174	8b 45 f4	 mov	 eax, DWORD PTR _side$[ebp]
  00177	50		 push	 eax
  00178	8b 4d f8	 mov	 ecx, DWORD PTR _force$[ebp]
  0017b	51		 push	 ecx
  0017c	8b 55 08	 mov	 edx, DWORD PTR _raw$[ebp]
  0017f	52		 push	 edx
  00180	e8 00 00 00 00	 call	 ?find_matching_entity@@YGPAUENTITY@@PAUCAMERA@@W4ENTITY_FORCES@@W4ENTITY_SIDES@@W4MOTION_STATES@@@Z ; find_matching_entity
  00185	89 45 fc	 mov	 DWORD PTR _en$[ebp], eax

; 267  : 
; 268  : 		if (!en)

  00188	83 7d fc 00	 cmp	 DWORD PTR _en$[ebp], 0
  0018c	75 2c		 jne	 SHORT $LN13@get_best_v

; 269  : 		{
; 270  : 			en = find_matching_entity (raw, force, ENTITY_SIDE_NEUTRAL, MOTION_STATE_DONT_CARE);

  0018e	6a 00		 push	 0
  00190	6a 00		 push	 0
  00192	8b 45 f8	 mov	 eax, DWORD PTR _force$[ebp]
  00195	50		 push	 eax
  00196	8b 4d 08	 mov	 ecx, DWORD PTR _raw$[ebp]
  00199	51		 push	 ecx
  0019a	e8 00 00 00 00	 call	 ?find_matching_entity@@YGPAUENTITY@@PAUCAMERA@@W4ENTITY_FORCES@@W4ENTITY_SIDES@@W4MOTION_STATES@@@Z ; find_matching_entity
  0019f	89 45 fc	 mov	 DWORD PTR _en$[ebp], eax

; 271  : 
; 272  : 			if (!en)

  001a2	83 7d fc 00	 cmp	 DWORD PTR _en$[ebp], 0
  001a6	75 12		 jne	 SHORT $LN13@get_best_v

; 273  : 			{
; 274  : 				en = find_matching_entity (raw, ENTITY_FORCE_UNKNOWN, ENTITY_SIDE_NEUTRAL, MOTION_STATE_DONT_CARE);

  001a8	6a 00		 push	 0
  001aa	6a 00		 push	 0
  001ac	6a 00		 push	 0
  001ae	8b 45 08	 mov	 eax, DWORD PTR _raw$[ebp]
  001b1	50		 push	 eax
  001b2	e8 00 00 00 00	 call	 ?find_matching_entity@@YGPAUENTITY@@PAUCAMERA@@W4ENTITY_FORCES@@W4ENTITY_SIDES@@W4MOTION_STATES@@@Z ; find_matching_entity
  001b7	89 45 fc	 mov	 DWORD PTR _en$[ebp], eax
$LN13@get_best_v:

; 275  : 			}
; 276  : 		}
; 277  : 	}
; 278  : 
; 279  : 	return (en);

  001ba	8b 45 fc	 mov	 eax, DWORD PTR _en$[ebp]

; 280  : }

  001bd	5f		 pop	 edi
  001be	5e		 pop	 esi
  001bf	5b		 pop	 ebx
  001c0	8b e5		 mov	 esp, ebp
  001c2	5d		 pop	 ebp
  001c3	c2 04 00	 ret	 4
?get_best_view_entity@@YGPAUENTITY@@PAUCAMERA@@@Z ENDP	; get_best_view_entity
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\entity\special\camera\cm_auto.c
;	COMDAT ?find_matching_entity@@YGPAUENTITY@@PAUCAMERA@@W4ENTITY_FORCES@@W4ENTITY_SIDES@@W4MOTION_STATES@@@Z
_TEXT	SEGMENT
tv219 = -100						; size = 8
tv305 = -92						; size = 8
tv298 = -92						; size = 8
tv250 = -92						; size = 4
tv220 = -92						; size = 8
tv208 = -92						; size = 4
tv162 = -92						; size = 4
tv139 = -92						; size = 4
tv87 = -92						; size = 4
tv242 = -88						; size = 4
tv200 = -88						; size = 4
tv155 = -88						; size = 4
tv132 = -88						; size = 4
tv80 = -88						; size = 4
_view_interest_level$ = -20				; size = 4
_best_score$ = -16					; size = 4
_this_score$ = -12					; size = 4
_best_entity$ = -8					; size = 4
_this_entity$ = -4					; size = 4
_raw$ = 8						; size = 4
_force$ = 12						; size = 4
_side$ = 16						; size = 4
_state$ = 20						; size = 4
?find_matching_entity@@YGPAUENTITY@@PAUCAMERA@@W4ENTITY_FORCES@@W4ENTITY_SIDES@@W4MOTION_STATES@@@Z PROC ; find_matching_entity, COMDAT

; 94   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 64	 sub	 esp, 100		; 00000064H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 95   : 	entity
; 96   : 		*this_entity,
; 97   : 		*best_entity;
; 98   : 
; 99   : 	float
; 100  : 		this_score,
; 101  : 		best_score,
; 102  : 		view_interest_level;
; 103  : 
; 104  : 	ASSERT (raw);

  00009	83 7d 08 00	 cmp	 DWORD PTR _raw$[ebp], 0
  0000d	75 18		 jne	 SHORT $LN4@find_match
  0000f	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??find_matching_entity@@YGPAUENTITY@@PAUCAMERA@@W4ENTITY_FORCES@@W4ENTITY_SIDES@@W4MOTION_STATES@@@Z@4JA
  00014	83 c0 0a	 add	 eax, 10			; 0000000aH
  00017	50		 push	 eax
  00018	68 00 00 00 00	 push	 OFFSET ??_C@_0EM@PMEHNMCG@c?3?2users?2nhv90?2projects?2eech?2ap@
  0001d	68 00 00 00 00	 push	 OFFSET ??_C@_03DGOGAGNC@raw@
  00022	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN4@find_match:

; 105  : 
; 106  : 	this_entity = raw->view_root.first_child;

  00027	8b 45 08	 mov	 eax, DWORD PTR _raw$[ebp]
  0002a	8b 88 1c 01 00
	00		 mov	 ecx, DWORD PTR [eax+284]
  00030	89 4d fc	 mov	 DWORD PTR _this_entity$[ebp], ecx

; 107  : 
; 108  : 	best_entity = NULL;

  00033	c7 45 f8 00 00
	00 00		 mov	 DWORD PTR _best_entity$[ebp], 0

; 109  : 
; 110  : 	best_score = -1.0;

  0003a	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@bf800000
  00042	f3 0f 11 45 f0	 movss	 DWORD PTR _best_score$[ebp], xmm0
$LN2@find_match:

; 111  : 
; 112  : 	while (this_entity)

  00047	83 7d fc 00	 cmp	 DWORD PTR _this_entity$[ebp], 0
  0004b	0f 84 22 04 00
	00		 je	 $LN3@find_match

; 113  : 	{
; 114  : 		if (get_entity_available_from_view_menu (this_entity))

  00051	8b 45 fc	 mov	 eax, DWORD PTR _this_entity$[ebp]
  00054	50		 push	 eax
  00055	e8 00 00 00 00	 call	 ?get_entity_available_from_view_menu@@YGHPAUENTITY@@@Z ; get_entity_available_from_view_menu
  0005a	85 c0		 test	 eax, eax
  0005c	0f 84 8c 03 00
	00		 je	 $LN16@find_match

; 115  : 		{
; 116  : 			this_score = 0.0;

  00062	0f 57 c0	 xorps	 xmm0, xmm0
  00065	f3 0f 11 45 f4	 movss	 DWORD PTR _this_score$[ebp], xmm0

; 117  : 
; 118  : 			if (get_local_entity_int_value (this_entity, INT_TYPE_ALIVE))

  0006a	83 7d fc 00	 cmp	 DWORD PTR _this_entity$[ebp], 0
  0006e	74 0a		 je	 SHORT $LN18@find_match
  00070	8b 45 fc	 mov	 eax, DWORD PTR _this_entity$[ebp]
  00073	8b 08		 mov	 ecx, DWORD PTR [eax]
  00075	89 4d a8	 mov	 DWORD PTR tv80[ebp], ecx
  00078	eb 1a		 jmp	 SHORT $LN19@find_match
$LN18@find_match:
  0007a	6a 76		 push	 118			; 00000076H
  0007c	68 00 00 00 00	 push	 OFFSET ??_C@_0EM@PMEHNMCG@c?3?2users?2nhv90?2projects?2eech?2ap@
  00081	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  00087	52		 push	 edx
  00088	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  0008d	c7 45 a8 00 00
	00 00		 mov	 DWORD PTR tv80[ebp], 0
$LN19@find_match:
  00094	b8 01 00 00 00	 mov	 eax, 1
  00099	85 c0		 test	 eax, eax
  0009b	74 09		 je	 SHORT $LN20@find_match
  0009d	c7 45 a4 07 00
	00 00		 mov	 DWORD PTR tv87[ebp], 7
  000a4	eb 1a		 jmp	 SHORT $LN21@find_match
$LN20@find_match:
  000a6	6a 76		 push	 118			; 00000076H
  000a8	68 00 00 00 00	 push	 OFFSET ??_C@_0EM@PMEHNMCG@c?3?2users?2nhv90?2projects?2eech?2ap@
  000ad	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?overload_invalid_int_type_message@@3PBDB ; overload_invalid_int_type_message
  000b3	51		 push	 ecx
  000b4	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  000b9	c7 45 a4 00 00
	00 00		 mov	 DWORD PTR tv87[ebp], 0
$LN21@find_match:
  000c0	6a 07		 push	 7
  000c2	8b 55 fc	 mov	 edx, DWORD PTR _this_entity$[ebp]
  000c5	52		 push	 edx
  000c6	69 45 a8 5c 04
	00 00		 imul	 eax, DWORD PTR tv80[ebp], 1116
  000cd	8b 4d a4	 mov	 ecx, DWORD PTR tv87[ebp]
  000d0	8b 94 88 00 00
	00 00		 mov	 edx, DWORD PTR ?fn_get_local_entity_int_value@@3PAY0BBH@P6GHPAUENTITY@@W4INT_TYPES@@@ZA[eax+ecx*4]
  000d7	ff d2		 call	 edx
  000d9	85 c0		 test	 eax, eax
  000db	0f 84 f2 02 00
	00		 je	 $LN6@find_match

; 119  : 			{
; 120  : 				if ((force == ENTITY_FORCE_UNKNOWN) || (get_local_entity_int_value (this_entity, INT_TYPE_FORCE) == force))

  000e1	83 7d 0c 00	 cmp	 DWORD PTR _force$[ebp], 0
  000e5	74 74		 je	 SHORT $LN8@find_match
  000e7	83 7d fc 00	 cmp	 DWORD PTR _this_entity$[ebp], 0
  000eb	74 0a		 je	 SHORT $LN22@find_match
  000ed	8b 45 fc	 mov	 eax, DWORD PTR _this_entity$[ebp]
  000f0	8b 08		 mov	 ecx, DWORD PTR [eax]
  000f2	89 4d a8	 mov	 DWORD PTR tv132[ebp], ecx
  000f5	eb 1a		 jmp	 SHORT $LN23@find_match
$LN22@find_match:
  000f7	6a 78		 push	 120			; 00000078H
  000f9	68 00 00 00 00	 push	 OFFSET ??_C@_0EM@PMEHNMCG@c?3?2users?2nhv90?2projects?2eech?2ap@
  000fe	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  00104	52		 push	 edx
  00105	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  0010a	c7 45 a8 00 00
	00 00		 mov	 DWORD PTR tv132[ebp], 0
$LN23@find_match:
  00111	b8 01 00 00 00	 mov	 eax, 1
  00116	85 c0		 test	 eax, eax
  00118	74 09		 je	 SHORT $LN24@find_match
  0011a	c7 45 a4 3a 00
	00 00		 mov	 DWORD PTR tv139[ebp], 58 ; 0000003aH
  00121	eb 1a		 jmp	 SHORT $LN25@find_match
$LN24@find_match:
  00123	6a 78		 push	 120			; 00000078H
  00125	68 00 00 00 00	 push	 OFFSET ??_C@_0EM@PMEHNMCG@c?3?2users?2nhv90?2projects?2eech?2ap@
  0012a	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?overload_invalid_int_type_message@@3PBDB ; overload_invalid_int_type_message
  00130	51		 push	 ecx
  00131	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00136	c7 45 a4 00 00
	00 00		 mov	 DWORD PTR tv139[ebp], 0
$LN25@find_match:
  0013d	6a 3a		 push	 58			; 0000003aH
  0013f	8b 55 fc	 mov	 edx, DWORD PTR _this_entity$[ebp]
  00142	52		 push	 edx
  00143	69 45 a8 5c 04
	00 00		 imul	 eax, DWORD PTR tv132[ebp], 1116
  0014a	8b 4d a4	 mov	 ecx, DWORD PTR tv139[ebp]
  0014d	8b 94 88 00 00
	00 00		 mov	 edx, DWORD PTR ?fn_get_local_entity_int_value@@3PAY0BBH@P6GHPAUENTITY@@W4INT_TYPES@@@ZA[eax+ecx*4]
  00154	ff d2		 call	 edx
  00156	3b 45 0c	 cmp	 eax, DWORD PTR _force$[ebp]
  00159	75 16		 jne	 SHORT $LN7@find_match
$LN8@find_match:

; 121  : 				{
; 122  : 					this_score += 1.0;

  0015b	f3 0f 5a 45 f4	 cvtss2sd xmm0, DWORD PTR _this_score$[ebp]
  00160	f2 0f 58 05 00
	00 00 00	 addsd	 xmm0, QWORD PTR __real@3ff0000000000000
  00168	f2 0f 5a c0	 cvtsd2ss xmm0, xmm0
  0016c	f3 0f 11 45 f4	 movss	 DWORD PTR _this_score$[ebp], xmm0
$LN7@find_match:

; 123  : 				}
; 124  : 
; 125  : 				////////////////////////////////////////
; 126  : 
; 127  : 				if ((side == ENTITY_SIDE_NEUTRAL) || (get_local_entity_int_value (this_entity, INT_TYPE_SIDE) == side))

  00171	83 7d 10 00	 cmp	 DWORD PTR _side$[ebp], 0
  00175	74 77		 je	 SHORT $LN10@find_match
  00177	83 7d fc 00	 cmp	 DWORD PTR _this_entity$[ebp], 0
  0017b	74 0a		 je	 SHORT $LN26@find_match
  0017d	8b 45 fc	 mov	 eax, DWORD PTR _this_entity$[ebp]
  00180	8b 08		 mov	 ecx, DWORD PTR [eax]
  00182	89 4d a8	 mov	 DWORD PTR tv155[ebp], ecx
  00185	eb 1a		 jmp	 SHORT $LN27@find_match
$LN26@find_match:
  00187	6a 7f		 push	 127			; 0000007fH
  00189	68 00 00 00 00	 push	 OFFSET ??_C@_0EM@PMEHNMCG@c?3?2users?2nhv90?2projects?2eech?2ap@
  0018e	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  00194	52		 push	 edx
  00195	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  0019a	c7 45 a8 00 00
	00 00		 mov	 DWORD PTR tv155[ebp], 0
$LN27@find_match:
  001a1	b8 01 00 00 00	 mov	 eax, 1
  001a6	85 c0		 test	 eax, eax
  001a8	74 09		 je	 SHORT $LN28@find_match
  001aa	c7 45 a4 bb 00
	00 00		 mov	 DWORD PTR tv162[ebp], 187 ; 000000bbH
  001b1	eb 1a		 jmp	 SHORT $LN29@find_match
$LN28@find_match:
  001b3	6a 7f		 push	 127			; 0000007fH
  001b5	68 00 00 00 00	 push	 OFFSET ??_C@_0EM@PMEHNMCG@c?3?2users?2nhv90?2projects?2eech?2ap@
  001ba	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?overload_invalid_int_type_message@@3PBDB ; overload_invalid_int_type_message
  001c0	51		 push	 ecx
  001c1	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  001c6	c7 45 a4 00 00
	00 00		 mov	 DWORD PTR tv162[ebp], 0
$LN29@find_match:
  001cd	68 bb 00 00 00	 push	 187			; 000000bbH
  001d2	8b 55 fc	 mov	 edx, DWORD PTR _this_entity$[ebp]
  001d5	52		 push	 edx
  001d6	69 45 a8 5c 04
	00 00		 imul	 eax, DWORD PTR tv155[ebp], 1116
  001dd	8b 4d a4	 mov	 ecx, DWORD PTR tv162[ebp]
  001e0	8b 94 88 00 00
	00 00		 mov	 edx, DWORD PTR ?fn_get_local_entity_int_value@@3PAY0BBH@P6GHPAUENTITY@@W4INT_TYPES@@@ZA[eax+ecx*4]
  001e7	ff d2		 call	 edx
  001e9	3b 45 10	 cmp	 eax, DWORD PTR _side$[ebp]
  001ec	75 16		 jne	 SHORT $LN9@find_match
$LN10@find_match:

; 128  : 				{
; 129  : 					this_score += 1.0;

  001ee	f3 0f 5a 45 f4	 cvtss2sd xmm0, DWORD PTR _this_score$[ebp]
  001f3	f2 0f 58 05 00
	00 00 00	 addsd	 xmm0, QWORD PTR __real@3ff0000000000000
  001fb	f2 0f 5a c0	 cvtsd2ss xmm0, xmm0
  001ff	f3 0f 11 45 f4	 movss	 DWORD PTR _this_score$[ebp], xmm0
$LN9@find_match:

; 130  : 				}
; 131  : 
; 132  : 				////////////////////////////////////////
; 133  : 
; 134  : 				if (state == MOTION_STATE_DONT_CARE)

  00204	83 7d 14 00	 cmp	 DWORD PTR _state$[ebp], 0
  00208	75 18		 jne	 SHORT $LN11@find_match

; 135  : 				{
; 136  : 					this_score += 1.0;

  0020a	f3 0f 5a 45 f4	 cvtss2sd xmm0, DWORD PTR _this_score$[ebp]
  0020f	f2 0f 58 05 00
	00 00 00	 addsd	 xmm0, QWORD PTR __real@3ff0000000000000
  00217	f2 0f 5a c0	 cvtsd2ss xmm0, xmm0
  0021b	f3 0f 11 45 f4	 movss	 DWORD PTR _this_score$[ebp], xmm0
  00220	eb 74		 jmp	 SHORT $LN15@find_match
$LN11@find_match:

; 137  : 				}
; 138  : 				else if ((state == MOTION_STATE_STATIC) && (get_local_entity_vec3d_magnitude (this_entity, VEC3D_TYPE_MOTION_VECTOR) < 1.0))

  00222	83 7d 14 01	 cmp	 DWORD PTR _state$[ebp], 1
  00226	75 35		 jne	 SHORT $LN13@find_match
  00228	6a 06		 push	 6
  0022a	8b 45 fc	 mov	 eax, DWORD PTR _this_entity$[ebp]
  0022d	50		 push	 eax
  0022e	e8 00 00 00 00	 call	 ?get_local_entity_vec3d_magnitude@@YGMPAUENTITY@@W4VEC3D_TYPES@@@Z ; get_local_entity_vec3d_magnitude
  00233	dd 5d a4	 fstp	 QWORD PTR tv298[ebp]
  00236	f2 0f 10 05 00
	00 00 00	 movsd	 xmm0, QWORD PTR __real@3ff0000000000000
  0023e	66 0f 2f 45 a4	 comisd	 xmm0, QWORD PTR tv298[ebp]
  00243	76 18		 jbe	 SHORT $LN13@find_match

; 139  : 				{
; 140  : 					this_score += 1.0;

  00245	f3 0f 5a 45 f4	 cvtss2sd xmm0, DWORD PTR _this_score$[ebp]
  0024a	f2 0f 58 05 00
	00 00 00	 addsd	 xmm0, QWORD PTR __real@3ff0000000000000
  00252	f2 0f 5a c0	 cvtsd2ss xmm0, xmm0
  00256	f3 0f 11 45 f4	 movss	 DWORD PTR _this_score$[ebp], xmm0
  0025b	eb 39		 jmp	 SHORT $LN15@find_match
$LN13@find_match:

; 141  : 				}
; 142  : 				else if ((state == MOTION_STATE_MOVING) && (get_local_entity_vec3d_magnitude (this_entity, VEC3D_TYPE_MOTION_VECTOR) >= 1.0))

  0025d	83 7d 14 02	 cmp	 DWORD PTR _state$[ebp], 2
  00261	75 33		 jne	 SHORT $LN15@find_match
  00263	6a 06		 push	 6
  00265	8b 45 fc	 mov	 eax, DWORD PTR _this_entity$[ebp]
  00268	50		 push	 eax
  00269	e8 00 00 00 00	 call	 ?get_local_entity_vec3d_magnitude@@YGMPAUENTITY@@W4VEC3D_TYPES@@@Z ; get_local_entity_vec3d_magnitude
  0026e	dd 5d a4	 fstp	 QWORD PTR tv305[ebp]
  00271	f2 0f 10 45 a4	 movsd	 xmm0, QWORD PTR tv305[ebp]
  00276	66 0f 2f 05 00
	00 00 00	 comisd	 xmm0, QWORD PTR __real@3ff0000000000000
  0027e	72 16		 jb	 SHORT $LN15@find_match

; 143  : 				{
; 144  : 					this_score += 1.0;

  00280	f3 0f 5a 45 f4	 cvtss2sd xmm0, DWORD PTR _this_score$[ebp]
  00285	f2 0f 58 05 00
	00 00 00	 addsd	 xmm0, QWORD PTR __real@3ff0000000000000
  0028d	f2 0f 5a c0	 cvtsd2ss xmm0, xmm0
  00291	f3 0f 11 45 f4	 movss	 DWORD PTR _this_score$[ebp], xmm0
$LN15@find_match:

; 145  : 				}
; 146  : 
; 147  : 				////////////////////////////////////////
; 148  : 
; 149  : 				view_interest_level = get_local_entity_float_value (this_entity, FLOAT_TYPE_VIEW_INTEREST_LEVEL);

  00296	83 7d fc 00	 cmp	 DWORD PTR _this_entity$[ebp], 0
  0029a	74 0a		 je	 SHORT $LN30@find_match
  0029c	8b 45 fc	 mov	 eax, DWORD PTR _this_entity$[ebp]
  0029f	8b 08		 mov	 ecx, DWORD PTR [eax]
  002a1	89 4d a8	 mov	 DWORD PTR tv200[ebp], ecx
  002a4	eb 21		 jmp	 SHORT $LN31@find_match
$LN30@find_match:
  002a6	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??find_matching_entity@@YGPAUENTITY@@PAUCAMERA@@W4ENTITY_FORCES@@W4ENTITY_SIDES@@W4MOTION_STATES@@@Z@4JA
  002ac	83 c2 37	 add	 edx, 55			; 00000037H
  002af	52		 push	 edx
  002b0	68 00 00 00 00	 push	 OFFSET ??_C@_0EM@PMEHNMCG@c?3?2users?2nhv90?2projects?2eech?2ap@
  002b5	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  002ba	50		 push	 eax
  002bb	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  002c0	c7 45 a8 00 00
	00 00		 mov	 DWORD PTR tv200[ebp], 0
$LN31@find_match:
  002c7	b9 01 00 00 00	 mov	 ecx, 1
  002cc	85 c9		 test	 ecx, ecx
  002ce	74 09		 je	 SHORT $LN32@find_match
  002d0	c7 45 a4 95 00
	00 00		 mov	 DWORD PTR tv208[ebp], 149 ; 00000095H
  002d7	eb 21		 jmp	 SHORT $LN33@find_match
$LN32@find_match:
  002d9	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??find_matching_entity@@YGPAUENTITY@@PAUCAMERA@@W4ENTITY_FORCES@@W4ENTITY_SIDES@@W4MOTION_STATES@@@Z@4JA
  002df	83 c2 37	 add	 edx, 55			; 00000037H
  002e2	52		 push	 edx
  002e3	68 00 00 00 00	 push	 OFFSET ??_C@_0EM@PMEHNMCG@c?3?2users?2nhv90?2projects?2eech?2ap@
  002e8	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_float_type_message@@3PBDB ; overload_invalid_float_type_message
  002ed	50		 push	 eax
  002ee	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  002f3	c7 45 a4 00 00
	00 00		 mov	 DWORD PTR tv208[ebp], 0
$LN33@find_match:
  002fa	68 95 00 00 00	 push	 149			; 00000095H
  002ff	8b 4d fc	 mov	 ecx, DWORD PTR _this_entity$[ebp]
  00302	51		 push	 ecx
  00303	69 55 a8 bc 02
	00 00		 imul	 edx, DWORD PTR tv200[ebp], 700
  0030a	8b 45 a4	 mov	 eax, DWORD PTR tv208[ebp]
  0030d	8b 8c 82 00 00
	00 00		 mov	 ecx, DWORD PTR ?fn_get_local_entity_float_value@@3PAY0KP@P6GMPAUENTITY@@W4FLOAT_TYPES@@@ZA[edx+eax*4]
  00314	ff d1		 call	 ecx
  00316	d9 5d ec	 fstp	 DWORD PTR _view_interest_level$[ebp]

; 150  : 
; 151  : 				view_interest_level = bound (view_interest_level, 0.0, DEFAULT_VIEW_INTEREST_LEVEL);

  00319	f3 0f 5a 45 ec	 cvtss2sd xmm0, DWORD PTR _view_interest_level$[ebp]
  0031e	0f 57 c9	 xorps	 xmm1, xmm1
  00321	66 0f 2f c8	 comisd	 xmm1, xmm0
  00325	76 0a		 jbe	 SHORT $LN36@find_match
  00327	0f 57 c0	 xorps	 xmm0, xmm0
  0032a	f2 0f 11 45 a4	 movsd	 QWORD PTR tv220[ebp], xmm0
  0032f	eb 32		 jmp	 SHORT $LN37@find_match
$LN36@find_match:
  00331	f3 0f 5a 45 ec	 cvtss2sd xmm0, DWORD PTR _view_interest_level$[ebp]
  00336	66 0f 2f 05 00
	00 00 00	 comisd	 xmm0, QWORD PTR __real@4014000000000000
  0033e	76 0f		 jbe	 SHORT $LN34@find_match
  00340	f2 0f 10 05 00
	00 00 00	 movsd	 xmm0, QWORD PTR __real@4014000000000000
  00348	f2 0f 11 45 9c	 movsd	 QWORD PTR tv219[ebp], xmm0
  0034d	eb 0a		 jmp	 SHORT $LN35@find_match
$LN34@find_match:
  0034f	f3 0f 5a 45 ec	 cvtss2sd xmm0, DWORD PTR _view_interest_level$[ebp]
  00354	f2 0f 11 45 9c	 movsd	 QWORD PTR tv219[ebp], xmm0
$LN35@find_match:
  00359	f2 0f 10 45 9c	 movsd	 xmm0, QWORD PTR tv219[ebp]
  0035e	f2 0f 11 45 a4	 movsd	 QWORD PTR tv220[ebp], xmm0
$LN37@find_match:
  00363	f2 0f 5a 45 a4	 cvtsd2ss xmm0, QWORD PTR tv220[ebp]
  00368	f3 0f 11 45 ec	 movss	 DWORD PTR _view_interest_level$[ebp], xmm0

; 152  : 
; 153  : 				view_interest_level *= (2.0 / DEFAULT_VIEW_INTEREST_LEVEL);

  0036d	f3 0f 5a 45 ec	 cvtss2sd xmm0, DWORD PTR _view_interest_level$[ebp]
  00372	f2 0f 59 05 00
	00 00 00	 mulsd	 xmm0, QWORD PTR __real@3fd999999999999a
  0037a	f2 0f 5a c0	 cvtsd2ss xmm0, xmm0
  0037e	f3 0f 11 45 ec	 movss	 DWORD PTR _view_interest_level$[ebp], xmm0

; 154  : 
; 155  : 				this_score += view_interest_level;

  00383	f3 0f 10 45 f4	 movss	 xmm0, DWORD PTR _this_score$[ebp]
  00388	f3 0f 58 45 ec	 addss	 xmm0, DWORD PTR _view_interest_level$[ebp]
  0038d	f3 0f 11 45 f4	 movss	 DWORD PTR _this_score$[ebp], xmm0

; 156  : 
; 157  : 				////////////////////////////////////////
; 158  : 
; 159  : 				this_score += frand1 ();

  00392	69 05 00 00 00
	00 6d 4e c6 41	 imul	 eax, DWORD PTR ?random_number_seed@@3HA, 1103515245 ; random_number_seed
  0039c	05 39 30 00 00	 add	 eax, 12345		; 00003039H
  003a1	a3 00 00 00 00	 mov	 DWORD PTR ?random_number_seed@@3HA, eax ; random_number_seed
  003a6	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?random_number_seed@@3HA ; random_number_seed
  003ac	c1 f9 10	 sar	 ecx, 16			; 00000010H
  003af	81 e1 ff 7f 00
	00		 and	 ecx, 32767		; 00007fffH
  003b5	f2 0f 2a c1	 cvtsi2sd xmm0, ecx
  003b9	f2 0f 59 05 00
	00 00 00	 mulsd	 xmm0, QWORD PTR __real@3f00002000400080
  003c1	f3 0f 5a 4d f4	 cvtss2sd xmm1, DWORD PTR _this_score$[ebp]
  003c6	f2 0f 58 c8	 addsd	 xmm1, xmm0
  003ca	f2 0f 5a c1	 cvtsd2ss xmm0, xmm1
  003ce	f3 0f 11 45 f4	 movss	 DWORD PTR _this_score$[ebp], xmm0
$LN6@find_match:

; 160  : 			}
; 161  : 
; 162  : 			if (this_score > best_score)

  003d3	f3 0f 10 45 f4	 movss	 xmm0, DWORD PTR _this_score$[ebp]
  003d8	0f 2f 45 f0	 comiss	 xmm0, DWORD PTR _best_score$[ebp]
  003dc	76 10		 jbe	 SHORT $LN16@find_match

; 163  : 			{
; 164  : 				best_score = this_score;

  003de	f3 0f 10 45 f4	 movss	 xmm0, DWORD PTR _this_score$[ebp]
  003e3	f3 0f 11 45 f0	 movss	 DWORD PTR _best_score$[ebp], xmm0

; 165  : 
; 166  : 				best_entity = this_entity;

  003e8	8b 45 fc	 mov	 eax, DWORD PTR _this_entity$[ebp]
  003eb	89 45 f8	 mov	 DWORD PTR _best_entity$[ebp], eax
$LN16@find_match:

; 167  : 			}
; 168  : 
; 169  : 			////////////////////////////////////////
; 170  : 		}
; 171  : 
; 172  : 		this_entity = get_local_entity_child_succ (this_entity, LIST_TYPE_VIEW);

  003ee	83 7d fc 00	 cmp	 DWORD PTR _this_entity$[ebp], 0
  003f2	74 0a		 je	 SHORT $LN38@find_match
  003f4	8b 45 fc	 mov	 eax, DWORD PTR _this_entity$[ebp]
  003f7	8b 08		 mov	 ecx, DWORD PTR [eax]
  003f9	89 4d a8	 mov	 DWORD PTR tv242[ebp], ecx
  003fc	eb 21		 jmp	 SHORT $LN39@find_match
$LN38@find_match:
  003fe	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??find_matching_entity@@YGPAUENTITY@@PAUCAMERA@@W4ENTITY_FORCES@@W4ENTITY_SIDES@@W4MOTION_STATES@@@Z@4JA
  00404	83 c2 4e	 add	 edx, 78			; 0000004eH
  00407	52		 push	 edx
  00408	68 00 00 00 00	 push	 OFFSET ??_C@_0EM@PMEHNMCG@c?3?2users?2nhv90?2projects?2eech?2ap@
  0040d	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  00412	50		 push	 eax
  00413	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00418	c7 45 a8 00 00
	00 00		 mov	 DWORD PTR tv242[ebp], 0
$LN39@find_match:
  0041f	b9 01 00 00 00	 mov	 ecx, 1
  00424	85 c9		 test	 ecx, ecx
  00426	74 09		 je	 SHORT $LN40@find_match
  00428	c7 45 a4 2a 00
	00 00		 mov	 DWORD PTR tv250[ebp], 42 ; 0000002aH
  0042f	eb 21		 jmp	 SHORT $LN41@find_match
$LN40@find_match:
  00431	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??find_matching_entity@@YGPAUENTITY@@PAUCAMERA@@W4ENTITY_FORCES@@W4ENTITY_SIDES@@W4MOTION_STATES@@@Z@4JA
  00437	83 c2 4e	 add	 edx, 78			; 0000004eH
  0043a	52		 push	 edx
  0043b	68 00 00 00 00	 push	 OFFSET ??_C@_0EM@PMEHNMCG@c?3?2users?2nhv90?2projects?2eech?2ap@
  00440	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_list_type_message@@3PBDB ; overload_invalid_list_type_message
  00445	50		 push	 eax
  00446	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  0044b	c7 45 a4 00 00
	00 00		 mov	 DWORD PTR tv250[ebp], 0
$LN41@find_match:
  00452	6a 2a		 push	 42			; 0000002aH
  00454	8b 4d fc	 mov	 ecx, DWORD PTR _this_entity$[ebp]
  00457	51		 push	 ecx
  00458	69 55 a8 b4 00
	00 00		 imul	 edx, DWORD PTR tv242[ebp], 180
  0045f	8b 45 a4	 mov	 eax, DWORD PTR tv250[ebp]
  00462	8b 8c 82 00 00
	00 00		 mov	 ecx, DWORD PTR ?fn_get_local_entity_child_succ@@3PAY0CN@P6GPAUENTITY@@PAU1@W4LIST_TYPES@@@ZA[edx+eax*4]
  00469	ff d1		 call	 ecx
  0046b	89 45 fc	 mov	 DWORD PTR _this_entity$[ebp], eax

; 173  : 	}

  0046e	e9 d4 fb ff ff	 jmp	 $LN2@find_match
$LN3@find_match:

; 174  : 
; 175  : 	return (best_entity);

  00473	8b 45 f8	 mov	 eax, DWORD PTR _best_entity$[ebp]

; 176  : }

  00476	5f		 pop	 edi
  00477	5e		 pop	 esi
  00478	5b		 pop	 ebx
  00479	8b e5		 mov	 esp, ebp
  0047b	5d		 pop	 ebp
  0047c	c2 10 00	 ret	 16			; 00000010H
?find_matching_entity@@YGPAUENTITY@@PAUCAMERA@@W4ENTITY_FORCES@@W4ENTITY_SIDES@@W4MOTION_STATES@@@Z ENDP ; find_matching_entity
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\entity\special\camera\cm_auto.c
;	COMDAT ?update_local_entity_view_interest_level@@YGXPAUENTITY@@@Z
_TEXT	SEGMENT
tv140 = -76						; size = 4
tv83 = -76						; size = 4
tv132 = -72						; size = 4
tv75 = -72						; size = 4
_level$ = -4						; size = 4
_en$ = 8						; size = 4
?update_local_entity_view_interest_level@@YGXPAUENTITY@@@Z PROC ; update_local_entity_view_interest_level, COMDAT

; 390  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 4c	 sub	 esp, 76			; 0000004cH
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 391  : 	float
; 392  : 		level;
; 393  : 
; 394  : 	ASSERT (en);

  00009	83 7d 08 00	 cmp	 DWORD PTR _en$[ebp], 0
  0000d	75 18		 jne	 SHORT $LN2@update_loc
  0000f	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??update_local_entity_view_interest_level@@YGXPAUENTITY@@@Z@4JA
  00014	83 c0 04	 add	 eax, 4
  00017	50		 push	 eax
  00018	68 00 00 00 00	 push	 OFFSET ??_C@_0EM@PMEHNMCG@c?3?2users?2nhv90?2projects?2eech?2ap@
  0001d	68 00 00 00 00	 push	 OFFSET ??_C@_02LFNMGJAP@en@
  00022	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN2@update_loc:

; 395  : 
; 396  : 	level = get_local_entity_float_value (en, FLOAT_TYPE_VIEW_INTEREST_LEVEL);

  00027	83 7d 08 00	 cmp	 DWORD PTR _en$[ebp], 0
  0002b	74 0a		 je	 SHORT $LN6@update_loc
  0002d	8b 45 08	 mov	 eax, DWORD PTR _en$[ebp]
  00030	8b 08		 mov	 ecx, DWORD PTR [eax]
  00032	89 4d b8	 mov	 DWORD PTR tv75[ebp], ecx
  00035	eb 21		 jmp	 SHORT $LN7@update_loc
$LN6@update_loc:
  00037	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??update_local_entity_view_interest_level@@YGXPAUENTITY@@@Z@4JA
  0003d	83 c2 06	 add	 edx, 6
  00040	52		 push	 edx
  00041	68 00 00 00 00	 push	 OFFSET ??_C@_0EM@PMEHNMCG@c?3?2users?2nhv90?2projects?2eech?2ap@
  00046	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  0004b	50		 push	 eax
  0004c	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00051	c7 45 b8 00 00
	00 00		 mov	 DWORD PTR tv75[ebp], 0
$LN7@update_loc:
  00058	b9 01 00 00 00	 mov	 ecx, 1
  0005d	85 c9		 test	 ecx, ecx
  0005f	74 09		 je	 SHORT $LN8@update_loc
  00061	c7 45 b4 95 00
	00 00		 mov	 DWORD PTR tv83[ebp], 149 ; 00000095H
  00068	eb 21		 jmp	 SHORT $LN9@update_loc
$LN8@update_loc:
  0006a	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??update_local_entity_view_interest_level@@YGXPAUENTITY@@@Z@4JA
  00070	83 c2 06	 add	 edx, 6
  00073	52		 push	 edx
  00074	68 00 00 00 00	 push	 OFFSET ??_C@_0EM@PMEHNMCG@c?3?2users?2nhv90?2projects?2eech?2ap@
  00079	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_float_type_message@@3PBDB ; overload_invalid_float_type_message
  0007e	50		 push	 eax
  0007f	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00084	c7 45 b4 00 00
	00 00		 mov	 DWORD PTR tv83[ebp], 0
$LN9@update_loc:
  0008b	68 95 00 00 00	 push	 149			; 00000095H
  00090	8b 4d 08	 mov	 ecx, DWORD PTR _en$[ebp]
  00093	51		 push	 ecx
  00094	69 55 b8 bc 02
	00 00		 imul	 edx, DWORD PTR tv75[ebp], 700
  0009b	8b 45 b4	 mov	 eax, DWORD PTR tv83[ebp]
  0009e	8b 8c 82 00 00
	00 00		 mov	 ecx, DWORD PTR ?fn_get_local_entity_float_value@@3PAY0KP@P6GMPAUENTITY@@W4FLOAT_TYPES@@@ZA[edx+eax*4]
  000a5	ff d1		 call	 ecx
  000a7	d9 5d fc	 fstp	 DWORD PTR _level$[ebp]

; 397  : 
; 398  : 	if (level > 0.0)

  000aa	f3 0f 5a 45 fc	 cvtss2sd xmm0, DWORD PTR _level$[ebp]
  000af	66 0f 2f 05 00
	00 00 00	 comisd	 xmm0, QWORD PTR __real@0000000000000000
  000b7	0f 86 b3 00 00
	00		 jbe	 $LN3@update_loc

; 399  : 	{
; 400  : 		level -= get_delta_time ();

  000bd	f3 0f 10 45 fc	 movss	 xmm0, DWORD PTR _level$[ebp]
  000c2	f3 0f 5c 05 00
	00 00 00	 subss	 xmm0, DWORD PTR ?system_delta_time@@3MA
  000ca	f3 0f 11 45 fc	 movss	 DWORD PTR _level$[ebp], xmm0

; 401  : 
; 402  : 		if (level < 0.0)

  000cf	f3 0f 5a 45 fc	 cvtss2sd xmm0, DWORD PTR _level$[ebp]
  000d4	0f 57 c9	 xorps	 xmm1, xmm1
  000d7	66 0f 2f c8	 comisd	 xmm1, xmm0
  000db	76 08		 jbe	 SHORT $LN4@update_loc

; 403  : 		{
; 404  : 			level = 0.0;

  000dd	0f 57 c0	 xorps	 xmm0, xmm0
  000e0	f3 0f 11 45 fc	 movss	 DWORD PTR _level$[ebp], xmm0
$LN4@update_loc:

; 405  : 		}
; 406  : 
; 407  : 		set_local_entity_float_value (en, FLOAT_TYPE_VIEW_INTEREST_LEVEL, level);

  000e5	83 7d 08 00	 cmp	 DWORD PTR _en$[ebp], 0
  000e9	74 0a		 je	 SHORT $LN10@update_loc
  000eb	8b 45 08	 mov	 eax, DWORD PTR _en$[ebp]
  000ee	8b 08		 mov	 ecx, DWORD PTR [eax]
  000f0	89 4d b8	 mov	 DWORD PTR tv132[ebp], ecx
  000f3	eb 21		 jmp	 SHORT $LN11@update_loc
$LN10@update_loc:
  000f5	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??update_local_entity_view_interest_level@@YGXPAUENTITY@@@Z@4JA
  000fb	83 c2 11	 add	 edx, 17			; 00000011H
  000fe	52		 push	 edx
  000ff	68 00 00 00 00	 push	 OFFSET ??_C@_0EM@PMEHNMCG@c?3?2users?2nhv90?2projects?2eech?2ap@
  00104	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  00109	50		 push	 eax
  0010a	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  0010f	c7 45 b8 00 00
	00 00		 mov	 DWORD PTR tv132[ebp], 0
$LN11@update_loc:
  00116	b9 01 00 00 00	 mov	 ecx, 1
  0011b	85 c9		 test	 ecx, ecx
  0011d	74 09		 je	 SHORT $LN12@update_loc
  0011f	c7 45 b4 95 00
	00 00		 mov	 DWORD PTR tv140[ebp], 149 ; 00000095H
  00126	eb 21		 jmp	 SHORT $LN13@update_loc
$LN12@update_loc:
  00128	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??update_local_entity_view_interest_level@@YGXPAUENTITY@@@Z@4JA
  0012e	83 c2 11	 add	 edx, 17			; 00000011H
  00131	52		 push	 edx
  00132	68 00 00 00 00	 push	 OFFSET ??_C@_0EM@PMEHNMCG@c?3?2users?2nhv90?2projects?2eech?2ap@
  00137	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_float_type_message@@3PBDB ; overload_invalid_float_type_message
  0013c	50		 push	 eax
  0013d	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00142	c7 45 b4 00 00
	00 00		 mov	 DWORD PTR tv140[ebp], 0
$LN13@update_loc:
  00149	51		 push	 ecx
  0014a	f3 0f 10 45 fc	 movss	 xmm0, DWORD PTR _level$[ebp]
  0014f	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00154	68 95 00 00 00	 push	 149			; 00000095H
  00159	8b 4d 08	 mov	 ecx, DWORD PTR _en$[ebp]
  0015c	51		 push	 ecx
  0015d	69 55 b8 bc 02
	00 00		 imul	 edx, DWORD PTR tv132[ebp], 700
  00164	8b 45 b4	 mov	 eax, DWORD PTR tv140[ebp]
  00167	8b 8c 82 00 00
	00 00		 mov	 ecx, DWORD PTR ?fn_set_local_entity_float_value@@3PAY0KP@P6GXPAUENTITY@@W4FLOAT_TYPES@@M@ZA[edx+eax*4]
  0016e	ff d1		 call	 ecx
$LN3@update_loc:

; 408  : 	}
; 409  : }

  00170	5f		 pop	 edi
  00171	5e		 pop	 esi
  00172	5b		 pop	 ebx
  00173	8b e5		 mov	 esp, ebp
  00175	5d		 pop	 ebp
  00176	c2 04 00	 ret	 4
?update_local_entity_view_interest_level@@YGXPAUENTITY@@@Z ENDP ; update_local_entity_view_interest_level
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\entity\special\camera\cm_auto.c
;	COMDAT ?switch_auto_edit_camera_mode@@YGHPAUCAMERA@@@Z
_TEXT	SEGMENT
_changed$ = -8						; size = 4
_new_camera_mode$ = -4					; size = 4
_raw$ = 8						; size = 4
?switch_auto_edit_camera_mode@@YGHPAUCAMERA@@@Z PROC	; switch_auto_edit_camera_mode, COMDAT

; 351  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 48	 sub	 esp, 72			; 00000048H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 352  : 	camera_modes
; 353  : 		new_camera_mode;
; 354  : 
; 355  : 	int
; 356  : 		changed;
; 357  : 
; 358  : 	ASSERT (raw);

  00009	83 7d 08 00	 cmp	 DWORD PTR _raw$[ebp], 0
  0000d	75 18		 jne	 SHORT $LN2@switch_aut
  0000f	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??switch_auto_edit_camera_mode@@YGHPAUCAMERA@@@Z@4JA
  00014	83 c0 07	 add	 eax, 7
  00017	50		 push	 eax
  00018	68 00 00 00 00	 push	 OFFSET ??_C@_0EM@PMEHNMCG@c?3?2users?2nhv90?2projects?2eech?2ap@
  0001d	68 00 00 00 00	 push	 OFFSET ??_C@_03DGOGAGNC@raw@
  00022	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN2@switch_aut:

; 359  : 
; 360  : 	new_camera_mode = get_auto_edit_random_camera_mode (raw);

  00027	8b 45 08	 mov	 eax, DWORD PTR _raw$[ebp]
  0002a	50		 push	 eax
  0002b	e8 00 00 00 00	 call	 ?get_auto_edit_random_camera_mode@@YG?AW4CAMERA_MODES@@PAUCAMERA@@@Z ; get_auto_edit_random_camera_mode
  00030	89 45 fc	 mov	 DWORD PTR _new_camera_mode$[ebp], eax

; 361  : 
; 362  : 	if (new_camera_mode == raw->camera_mode)

  00033	8b 45 08	 mov	 eax, DWORD PTR _raw$[ebp]
  00036	8b 4d fc	 mov	 ecx, DWORD PTR _new_camera_mode$[ebp]
  00039	3b 48 3c	 cmp	 ecx, DWORD PTR [eax+60]
  0003c	75 09		 jne	 SHORT $LN3@switch_aut

; 363  : 	{
; 364  : 		changed = FALSE;

  0003e	c7 45 f8 00 00
	00 00		 mov	 DWORD PTR _changed$[ebp], 0

; 365  : 	}
; 366  : 	else

  00045	eb 30		 jmp	 SHORT $LN4@switch_aut
$LN3@switch_aut:

; 367  : 	{
; 368  : 		set_camera_mode (raw, new_camera_mode, TRUE);

  00047	6a 01		 push	 1
  00049	8b 45 fc	 mov	 eax, DWORD PTR _new_camera_mode$[ebp]
  0004c	50		 push	 eax
  0004d	8b 4d 08	 mov	 ecx, DWORD PTR _raw$[ebp]
  00050	51		 push	 ecx
  00051	e8 00 00 00 00	 call	 ?set_camera_mode@@YGXPAUCAMERA@@W4CAMERA_MODES@@H@Z ; set_camera_mode

; 369  : 
; 370  : 		if (new_camera_mode == CAMERA_MODE_FLY_BY)

  00056	83 7d fc 06	 cmp	 DWORD PTR _new_camera_mode$[ebp], 6
  0005a	75 0b		 jne	 SHORT $LN5@switch_aut

; 371  : 		{
; 372  : 			update_fly_by_camera_continued (raw);

  0005c	8b 45 08	 mov	 eax, DWORD PTR _raw$[ebp]
  0005f	50		 push	 eax
  00060	e8 00 00 00 00	 call	 ?update_fly_by_camera_continued@@YGXPAUCAMERA@@@Z ; update_fly_by_camera_continued

; 373  : 		}
; 374  : 		else

  00065	eb 09		 jmp	 SHORT $LN6@switch_aut
$LN5@switch_aut:

; 375  : 		{
; 376  : 			update_cinematic_camera_continued (raw);

  00067	8b 45 08	 mov	 eax, DWORD PTR _raw$[ebp]
  0006a	50		 push	 eax
  0006b	e8 00 00 00 00	 call	 ?update_cinematic_camera_continued@@YGXPAUCAMERA@@@Z ; update_cinematic_camera_continued
$LN6@switch_aut:

; 377  : 		}
; 378  : 
; 379  : 		changed = TRUE;

  00070	c7 45 f8 01 00
	00 00		 mov	 DWORD PTR _changed$[ebp], 1
$LN4@switch_aut:

; 380  : 	}
; 381  : 
; 382  : 	return (changed);

  00077	8b 45 f8	 mov	 eax, DWORD PTR _changed$[ebp]

; 383  : }

  0007a	5f		 pop	 edi
  0007b	5e		 pop	 esi
  0007c	5b		 pop	 ebx
  0007d	8b e5		 mov	 esp, ebp
  0007f	5d		 pop	 ebp
  00080	c2 04 00	 ret	 4
?switch_auto_edit_camera_mode@@YGHPAUCAMERA@@@Z ENDP	; switch_auto_edit_camera_mode
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\entity\special\camera\cm_auto.c
;	COMDAT ?get_auto_edit_random_camera_mode@@YG?AW4CAMERA_MODES@@PAUCAMERA@@@Z
_TEXT	SEGMENT
tv131 = -76						; size = 8
_mode$ = -4						; size = 4
_raw$ = 8						; size = 4
?get_auto_edit_random_camera_mode@@YG?AW4CAMERA_MODES@@PAUCAMERA@@@Z PROC ; get_auto_edit_random_camera_mode, COMDAT

; 321  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 4c	 sub	 esp, 76			; 0000004cH
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 322  : 	camera_modes
; 323  : 		mode;
; 324  : 
; 325  : 	ASSERT (raw);

  00009	83 7d 08 00	 cmp	 DWORD PTR _raw$[ebp], 0
  0000d	75 18		 jne	 SHORT $LN2@get_auto_e
  0000f	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??get_auto_edit_random_camera_mode@@YG?AW4CAMERA_MODES@@PAUCAMERA@@@Z@4JA
  00014	83 c0 04	 add	 eax, 4
  00017	50		 push	 eax
  00018	68 00 00 00 00	 push	 OFFSET ??_C@_0EM@PMEHNMCG@c?3?2users?2nhv90?2projects?2eech?2ap@
  0001d	68 00 00 00 00	 push	 OFFSET ??_C@_03DGOGAGNC@raw@
  00022	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN2@get_auto_e:

; 326  : 
; 327  : 	ASSERT (raw->external_view_entity);

  00027	8b 45 08	 mov	 eax, DWORD PTR _raw$[ebp]
  0002a	83 b8 24 01 00
	00 00		 cmp	 DWORD PTR [eax+292], 0
  00031	75 18		 jne	 SHORT $LN3@get_auto_e
  00033	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??get_auto_edit_random_camera_mode@@YG?AW4CAMERA_MODES@@PAUCAMERA@@@Z@4JA
  00038	83 c0 06	 add	 eax, 6
  0003b	50		 push	 eax
  0003c	68 00 00 00 00	 push	 OFFSET ??_C@_0EM@PMEHNMCG@c?3?2users?2nhv90?2projects?2eech?2ap@
  00041	68 00 00 00 00	 push	 OFFSET ??_C@_0BK@NIGJPCBN@raw?9?$DOexternal_view_entity@
  00046	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN3@get_auto_e:

; 328  : 
; 329  : 	//
; 330  : 	// if the viewed entity is not moving then avoid the fly-by camera
; 331  : 	//
; 332  : 
; 333  : 	mode = CAMERA_MODE_CINEMATIC;

  0004b	c7 45 fc 07 00
	00 00		 mov	 DWORD PTR _mode$[ebp], 7

; 334  : 
; 335  : 	if (frand1 () < 0.5)

  00052	69 05 00 00 00
	00 6d 4e c6 41	 imul	 eax, DWORD PTR ?random_number_seed@@3HA, 1103515245 ; random_number_seed
  0005c	05 39 30 00 00	 add	 eax, 12345		; 00003039H
  00061	a3 00 00 00 00	 mov	 DWORD PTR ?random_number_seed@@3HA, eax ; random_number_seed
  00066	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?random_number_seed@@3HA ; random_number_seed
  0006c	c1 f9 10	 sar	 ecx, 16			; 00000010H
  0006f	81 e1 ff 7f 00
	00		 and	 ecx, 32767		; 00007fffH
  00075	f2 0f 2a c1	 cvtsi2sd xmm0, ecx
  00079	f2 0f 59 05 00
	00 00 00	 mulsd	 xmm0, QWORD PTR __real@3f00002000400080
  00081	f2 0f 10 0d 00
	00 00 00	 movsd	 xmm1, QWORD PTR __real@3fe0000000000000
  00089	66 0f 2f c8	 comisd	 xmm1, xmm0
  0008d	76 2a		 jbe	 SHORT $LN5@get_auto_e

; 336  : 	{
; 337  : 		if (get_local_entity_vec3d_magnitude (raw->external_view_entity, VEC3D_TYPE_MOTION_VECTOR) >= 1.0)

  0008f	6a 06		 push	 6
  00091	8b 45 08	 mov	 eax, DWORD PTR _raw$[ebp]
  00094	8b 88 24 01 00
	00		 mov	 ecx, DWORD PTR [eax+292]
  0009a	51		 push	 ecx
  0009b	e8 00 00 00 00	 call	 ?get_local_entity_vec3d_magnitude@@YGMPAUENTITY@@W4VEC3D_TYPES@@@Z ; get_local_entity_vec3d_magnitude
  000a0	dd 5d b4	 fstp	 QWORD PTR tv131[ebp]
  000a3	f2 0f 10 45 b4	 movsd	 xmm0, QWORD PTR tv131[ebp]
  000a8	66 0f 2f 05 00
	00 00 00	 comisd	 xmm0, QWORD PTR __real@3ff0000000000000
  000b0	72 07		 jb	 SHORT $LN5@get_auto_e

; 338  : 		{
; 339  : 			mode = CAMERA_MODE_FLY_BY;

  000b2	c7 45 fc 06 00
	00 00		 mov	 DWORD PTR _mode$[ebp], 6
$LN5@get_auto_e:

; 340  : 		}
; 341  : 	}
; 342  : 
; 343  : 	return (mode);

  000b9	8b 45 fc	 mov	 eax, DWORD PTR _mode$[ebp]

; 344  : }

  000bc	5f		 pop	 edi
  000bd	5e		 pop	 esi
  000be	5b		 pop	 ebx
  000bf	8b e5		 mov	 esp, ebp
  000c1	5d		 pop	 ebp
  000c2	c2 04 00	 ret	 4
?get_auto_edit_random_camera_mode@@YG?AW4CAMERA_MODES@@PAUCAMERA@@@Z ENDP ; get_auto_edit_random_camera_mode
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\entity\special\camera\cm_auto.c
;	COMDAT ?switch_auto_edit_entity@@YGPAUENTITY@@PAUCAMERA@@@Z
_TEXT	SEGMENT
_new_$ = -4						; size = 4
_raw$ = 8						; size = 4
?switch_auto_edit_entity@@YGPAUENTITY@@PAUCAMERA@@@Z PROC ; switch_auto_edit_entity, COMDAT

; 291  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 44	 sub	 esp, 68			; 00000044H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 292  : 	entity
; 293  : 		*new_;
; 294  : 
; 295  : 	ASSERT (raw);

  00009	83 7d 08 00	 cmp	 DWORD PTR _raw$[ebp], 0
  0000d	75 18		 jne	 SHORT $LN2@switch_aut
  0000f	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??switch_auto_edit_entity@@YGPAUENTITY@@PAUCAMERA@@@Z@4JA
  00014	83 c0 04	 add	 eax, 4
  00017	50		 push	 eax
  00018	68 00 00 00 00	 push	 OFFSET ??_C@_0EM@PMEHNMCG@c?3?2users?2nhv90?2projects?2eech?2ap@
  0001d	68 00 00 00 00	 push	 OFFSET ??_C@_03DGOGAGNC@raw@
  00022	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN2@switch_aut:

; 296  : 
; 297  : 	ASSERT (raw->external_view_entity);

  00027	8b 45 08	 mov	 eax, DWORD PTR _raw$[ebp]
  0002a	83 b8 24 01 00
	00 00		 cmp	 DWORD PTR [eax+292], 0
  00031	75 18		 jne	 SHORT $LN3@switch_aut
  00033	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??switch_auto_edit_entity@@YGPAUENTITY@@PAUCAMERA@@@Z@4JA
  00038	83 c0 06	 add	 eax, 6
  0003b	50		 push	 eax
  0003c	68 00 00 00 00	 push	 OFFSET ??_C@_0EM@PMEHNMCG@c?3?2users?2nhv90?2projects?2eech?2ap@
  00041	68 00 00 00 00	 push	 OFFSET ??_C@_0BK@NIGJPCBN@raw?9?$DOexternal_view_entity@
  00046	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN3@switch_aut:

; 298  : 
; 299  : 	if (frand1 () < 0.667)

  0004b	69 05 00 00 00
	00 6d 4e c6 41	 imul	 eax, DWORD PTR ?random_number_seed@@3HA, 1103515245 ; random_number_seed
  00055	05 39 30 00 00	 add	 eax, 12345		; 00003039H
  0005a	a3 00 00 00 00	 mov	 DWORD PTR ?random_number_seed@@3HA, eax ; random_number_seed
  0005f	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?random_number_seed@@3HA ; random_number_seed
  00065	c1 f9 10	 sar	 ecx, 16			; 00000010H
  00068	81 e1 ff 7f 00
	00		 and	 ecx, 32767		; 00007fffH
  0006e	f2 0f 2a c1	 cvtsi2sd xmm0, ecx
  00072	f2 0f 59 05 00
	00 00 00	 mulsd	 xmm0, QWORD PTR __real@3f00002000400080
  0007a	f2 0f 10 0d 00
	00 00 00	 movsd	 xmm1, QWORD PTR __real@3fe55810624dd2f2
  00082	66 0f 2f c8	 comisd	 xmm1, xmm0
  00086	76 1d		 jbe	 SHORT $LN4@switch_aut

; 300  : 	{
; 301  : 		new_ = get_best_view_entity (raw);

  00088	8b 45 08	 mov	 eax, DWORD PTR _raw$[ebp]
  0008b	50		 push	 eax
  0008c	e8 00 00 00 00	 call	 ?get_best_view_entity@@YGPAUENTITY@@PAUCAMERA@@@Z ; get_best_view_entity
  00091	89 45 fc	 mov	 DWORD PTR _new_$[ebp], eax

; 302  : 
; 303  : 		if (new_)

  00094	83 7d fc 00	 cmp	 DWORD PTR _new_$[ebp], 0
  00098	74 09		 je	 SHORT $LN6@switch_aut

; 304  : 		{
; 305  : 			set_external_view_entity (new_);

  0009a	8b 45 fc	 mov	 eax, DWORD PTR _new_$[ebp]
  0009d	50		 push	 eax
  0009e	e8 00 00 00 00	 call	 ?set_external_view_entity@@YGXPAUENTITY@@@Z ; set_external_view_entity
$LN6@switch_aut:

; 306  : 		}
; 307  : 	}
; 308  : 	else

  000a3	eb 07		 jmp	 SHORT $LN5@switch_aut
$LN4@switch_aut:

; 309  : 	{
; 310  : 		new_ = NULL;

  000a5	c7 45 fc 00 00
	00 00		 mov	 DWORD PTR _new_$[ebp], 0
$LN5@switch_aut:

; 311  : 	}
; 312  : 
; 313  : 	return (new_);

  000ac	8b 45 fc	 mov	 eax, DWORD PTR _new_$[ebp]

; 314  : }

  000af	5f		 pop	 edi
  000b0	5e		 pop	 esi
  000b1	5b		 pop	 ebx
  000b2	8b e5		 mov	 esp, ebp
  000b4	5d		 pop	 ebp
  000b5	c2 04 00	 ret	 4
?switch_auto_edit_entity@@YGPAUENTITY@@PAUCAMERA@@@Z ENDP ; switch_auto_edit_entity
_TEXT	ENDS
END
