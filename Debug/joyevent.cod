; Listing generated by Microsoft (R) Optimizing Compiler Version 19.16.27045.0 

	TITLE	C:\Users\nhv90\Projects\eech\modules\system\joyevent.c
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB MSVCRTD
INCLUDELIB OLDNAMES

PUBLIC	?process_joystick_event@@YGHPAUEVENT@@@Z	; process_joystick_event
EXTRN	?registered_events@@3PAY08UREGISTERED_EVENT_TYPE@@A:BYTE ; registered_events
EXTRN	?current_modifier_states@@3HA:DWORD		; current_modifier_states
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\modules\system\joyevent.c
;	COMDAT ?process_modifiers@@YGHPAUEVENT@@@Z
_TEXT	SEGMENT
tv66 = -80						; size = 4
_modifier$ = -12					; size = 4
_button$ = -8						; size = 4
_loop$ = -4						; size = 4
_ev$ = 8						; size = 4
?process_modifiers@@YGHPAUEVENT@@@Z PROC		; process_modifiers, COMDAT

; 140  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 50	 sub	 esp, 80			; 00000050H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 141  : 
; 142  :    int
; 143  :       loop,
; 144  : 		button,
; 145  :       modifier;
; 146  : 
; 147  :    switch (ev->button)

  00009	8b 45 08	 mov	 eax, DWORD PTR _ev$[ebp]
  0000c	0f b7 48 0a	 movzx	 ecx, WORD PTR [eax+10]
  00010	89 4d b0	 mov	 DWORD PTR tv66[ebp], ecx
  00013	8b 55 b0	 mov	 edx, DWORD PTR tv66[ebp]
  00016	83 ea 1d	 sub	 edx, 29			; 0000001dH
  00019	89 55 b0	 mov	 DWORD PTR tv66[ebp], edx
  0001c	81 7d b0 9b 00
	00 00		 cmp	 DWORD PTR tv66[ebp], 155 ; 0000009bH
  00023	77 71		 ja	 SHORT $LN13@process_mo
  00025	8b 45 b0	 mov	 eax, DWORD PTR tv66[ebp]
  00028	0f b6 88 00 00
	00 00		 movzx	 ecx, BYTE PTR $LN21@process_mo[eax]
  0002f	ff 24 8d 00 00
	00 00		 jmp	 DWORD PTR $LN22@process_mo[ecx*4]
$LN7@process_mo:

; 148  :    {
; 149  : 
; 150  :       case DIK_LSHIFT:
; 151  :       {
; 152  : 
; 153  :          modifier = 1 << MODIFIER_LEFT_SHIFT;

  00036	c7 45 f4 02 00
	00 00		 mov	 DWORD PTR _modifier$[ebp], 2

; 154  : 
; 155  :          button = MODIFIER_LEFT_SHIFT;

  0003d	c7 45 f8 01 00
	00 00		 mov	 DWORD PTR _button$[ebp], 1

; 156  : 
; 157  :          break;

  00044	eb 57		 jmp	 SHORT $LN2@process_mo
$LN8@process_mo:

; 158  :       }
; 159  :    
; 160  :       case DIK_LCONTROL:
; 161  :       {
; 162  :    
; 163  :          modifier = 1 << MODIFIER_LEFT_CONTROL;

  00046	c7 45 f4 04 00
	00 00		 mov	 DWORD PTR _modifier$[ebp], 4

; 164  : 
; 165  :          button = MODIFIER_LEFT_CONTROL;

  0004d	c7 45 f8 02 00
	00 00		 mov	 DWORD PTR _button$[ebp], 2

; 166  : 
; 167  :          break;

  00054	eb 47		 jmp	 SHORT $LN2@process_mo
$LN9@process_mo:

; 168  :       }
; 169  :    
; 170  :       case DIK_LMENU:
; 171  :       {
; 172  :    
; 173  :          modifier = 1 << MODIFIER_LEFT_ALT;

  00056	c7 45 f4 08 00
	00 00		 mov	 DWORD PTR _modifier$[ebp], 8

; 174  : 
; 175  :          button = MODIFIER_LEFT_ALT;

  0005d	c7 45 f8 03 00
	00 00		 mov	 DWORD PTR _button$[ebp], 3

; 176  : 
; 177  :          break;

  00064	eb 37		 jmp	 SHORT $LN2@process_mo
$LN10@process_mo:

; 178  :       }
; 179  :    
; 180  :       case DIK_RSHIFT:
; 181  :       {
; 182  :    
; 183  :          modifier = 1 << MODIFIER_RIGHT_SHIFT;

  00066	c7 45 f4 10 00
	00 00		 mov	 DWORD PTR _modifier$[ebp], 16 ; 00000010H

; 184  : 
; 185  :          button = MODIFIER_RIGHT_SHIFT;

  0006d	c7 45 f8 04 00
	00 00		 mov	 DWORD PTR _button$[ebp], 4

; 186  :    
; 187  :          break;

  00074	eb 27		 jmp	 SHORT $LN2@process_mo
$LN11@process_mo:

; 188  :       }
; 189  :    
; 190  :       case DIK_RCONTROL:
; 191  :       {
; 192  :    
; 193  :          modifier = 1 << MODIFIER_RIGHT_CONTROL;

  00076	c7 45 f4 20 00
	00 00		 mov	 DWORD PTR _modifier$[ebp], 32 ; 00000020H

; 194  : 
; 195  :          button = MODIFIER_RIGHT_CONTROL;

  0007d	c7 45 f8 05 00
	00 00		 mov	 DWORD PTR _button$[ebp], 5

; 196  :    
; 197  :          break;

  00084	eb 17		 jmp	 SHORT $LN2@process_mo
$LN12@process_mo:

; 198  :       }
; 199  :    
; 200  :       case DIK_RMENU:
; 201  :       {
; 202  :    
; 203  :          modifier = 1 << MODIFIER_RIGHT_ALT;

  00086	c7 45 f4 40 00
	00 00		 mov	 DWORD PTR _modifier$[ebp], 64 ; 00000040H

; 204  : 
; 205  :          button = MODIFIER_RIGHT_ALT;

  0008d	c7 45 f8 06 00
	00 00		 mov	 DWORD PTR _button$[ebp], 6

; 206  : 
; 207  :          break;

  00094	eb 07		 jmp	 SHORT $LN2@process_mo
$LN13@process_mo:

; 208  :       }
; 209  :    
; 210  :       default:
; 211  :       {
; 212  : 
; 213  :          return FALSE;

  00096	33 c0		 xor	 eax, eax
  00098	e9 d8 00 00 00	 jmp	 $LN1@process_mo
$LN2@process_mo:

; 214  :       }
; 215  :    }
; 216  : 
; 217  :    if (ev->state == BUTTON_STATE_UP)

  0009d	8b 45 08	 mov	 eax, DWORD PTR _ev$[ebp]
  000a0	0f b7 48 08	 movzx	 ecx, WORD PTR [eax+8]
  000a4	83 f9 01	 cmp	 ecx, 1
  000a7	0f 85 b6 00 00
	00		 jne	 $LN14@process_mo

; 218  :    {
; 219  : 
; 220  :       for (loop = 0; loop < MAX_NUMBER_REGISTERED_EVENTS; loop ++)

  000ad	c7 45 fc 00 00
	00 00		 mov	 DWORD PTR _loop$[ebp], 0
  000b4	eb 09		 jmp	 SHORT $LN6@process_mo
$LN4@process_mo:
  000b6	8b 45 fc	 mov	 eax, DWORD PTR _loop$[ebp]
  000b9	83 c0 01	 add	 eax, 1
  000bc	89 45 fc	 mov	 DWORD PTR _loop$[ebp], eax
$LN6@process_mo:
  000bf	81 7d fc 2c 01
	00 00		 cmp	 DWORD PTR _loop$[ebp], 300 ; 0000012cH
  000c6	0f 8d 88 00 00
	00		 jge	 $LN5@process_mo

; 221  :       {
; 222  : 
; 223  :          if ((registered_events [loop][button].in_use) && (registered_events [loop][button].current_state != BUTTON_STATE_UP))

  000cc	6b 45 fc 48	 imul	 eax, DWORD PTR _loop$[ebp], 72
  000d0	8b 4d f8	 mov	 ecx, DWORD PTR _button$[ebp]
  000d3	0f b6 94 c8 00
	00 00 00	 movzx	 edx, BYTE PTR ?registered_events@@3PAY08UREGISTERED_EVENT_TYPE@@A[eax+ecx*8]
  000db	85 d2		 test	 edx, edx
  000dd	74 70		 je	 SHORT $LN16@process_mo
  000df	6b 45 fc 48	 imul	 eax, DWORD PTR _loop$[ebp], 72
  000e3	8b 4d f8	 mov	 ecx, DWORD PTR _button$[ebp]
  000e6	0f b6 94 c8 01
	00 00 00	 movzx	 edx, BYTE PTR ?registered_events@@3PAY08UREGISTERED_EVENT_TYPE@@A[eax+ecx*8+1]
  000ee	83 fa 01	 cmp	 edx, 1
  000f1	74 5c		 je	 SHORT $LN16@process_mo

; 224  :          {
; 225  : 
; 226  : 				registered_events [loop][button].current_state = BUTTON_STATE_UP;

  000f3	6b 45 fc 48	 imul	 eax, DWORD PTR _loop$[ebp], 72
  000f7	8b 4d f8	 mov	 ecx, DWORD PTR _button$[ebp]
  000fa	c6 84 c8 01 00
	00 00 01	 mov	 BYTE PTR ?registered_events@@3PAY08UREGISTERED_EVENT_TYPE@@A[eax+ecx*8+1], 1

; 227  : 
; 228  :             if ((registered_events [loop][button].notify_state == BUTTON_STATE_UP) ||

  00102	6b 45 fc 48	 imul	 eax, DWORD PTR _loop$[ebp], 72
  00106	8b 4d f8	 mov	 ecx, DWORD PTR _button$[ebp]
  00109	0f b6 94 c8 02
	00 00 00	 movzx	 edx, BYTE PTR ?registered_events@@3PAY08UREGISTERED_EVENT_TYPE@@A[eax+ecx*8+2]
  00111	83 fa 01	 cmp	 edx, 1
  00114	74 14		 je	 SHORT $LN18@process_mo
  00116	6b 45 fc 48	 imul	 eax, DWORD PTR _loop$[ebp], 72
  0011a	8b 4d f8	 mov	 ecx, DWORD PTR _button$[ebp]
  0011d	0f b6 94 c8 02
	00 00 00	 movzx	 edx, BYTE PTR ?registered_events@@3PAY08UREGISTERED_EVENT_TYPE@@A[eax+ecx*8+2]
  00125	83 fa 03	 cmp	 edx, 3
  00128	75 25		 jne	 SHORT $LN16@process_mo
$LN18@process_mo:

; 229  :                (registered_events [loop][button].notify_state == BUTTON_STATE_EITHER))
; 230  :             {
; 231  : 
; 232  :                if (registered_events [loop][button].function)

  0012a	6b 45 fc 48	 imul	 eax, DWORD PTR _loop$[ebp], 72
  0012e	8b 4d f8	 mov	 ecx, DWORD PTR _button$[ebp]
  00131	83 bc c8 04 00
	00 00 00	 cmp	 DWORD PTR ?registered_events@@3PAY08UREGISTERED_EVENT_TYPE@@A[eax+ecx*8+4], 0
  00139	74 14		 je	 SHORT $LN16@process_mo

; 233  :                {
; 234  : 
; 235  :                   registered_events [loop][button].function (ev);

  0013b	8b 45 08	 mov	 eax, DWORD PTR _ev$[ebp]
  0013e	50		 push	 eax
  0013f	6b 4d fc 48	 imul	 ecx, DWORD PTR _loop$[ebp], 72
  00143	8b 55 f8	 mov	 edx, DWORD PTR _button$[ebp]
  00146	8b 84 d1 04 00
	00 00		 mov	 eax, DWORD PTR ?registered_events@@3PAY08UREGISTERED_EVENT_TYPE@@A[ecx+edx*8+4]
  0014d	ff d0		 call	 eax
$LN16@process_mo:

; 236  : 
; 237  : 						#if EVENT_DEBUG
; 238  : 
; 239  :                   debug_log ("JOYSTICK_EVENT button %d, modifier %d, current_state = %d, notify_state = %d", loop, button, registered_events [loop][button].current_state, registered_events [loop][button].notify_state);
; 240  : 
; 241  : 						#endif
; 242  :                }
; 243  :             }
; 244  :          }
; 245  :       }

  0014f	e9 62 ff ff ff	 jmp	 $LN4@process_mo
$LN5@process_mo:

; 246  : 
; 247  :       current_modifier_states ^= modifier;

  00154	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_modifier_states@@3HA ; current_modifier_states
  00159	33 45 f4	 xor	 eax, DWORD PTR _modifier$[ebp]
  0015c	a3 00 00 00 00	 mov	 DWORD PTR ?current_modifier_states@@3HA, eax ; current_modifier_states

; 248  :    }
; 249  :    else

  00161	eb 0d		 jmp	 SHORT $LN15@process_mo
$LN14@process_mo:

; 250  :    {
; 251  : 
; 252  :       current_modifier_states |= modifier;

  00163	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_modifier_states@@3HA ; current_modifier_states
  00168	0b 45 f4	 or	 eax, DWORD PTR _modifier$[ebp]
  0016b	a3 00 00 00 00	 mov	 DWORD PTR ?current_modifier_states@@3HA, eax ; current_modifier_states
$LN15@process_mo:

; 253  :    }
; 254  : 
; 255  : 	#if EVENT_DEBUG
; 256  : 
; 257  :    debug_log ("modifier states %d", current_modifier_states);
; 258  : 
; 259  : 	#endif
; 260  : 
; 261  :    return TRUE;

  00170	b8 01 00 00 00	 mov	 eax, 1
$LN1@process_mo:

; 262  : }

  00175	5f		 pop	 edi
  00176	5e		 pop	 esi
  00177	5b		 pop	 ebx
  00178	8b e5		 mov	 esp, ebp
  0017a	5d		 pop	 ebp
  0017b	c2 04 00	 ret	 4
  0017e	66 90		 npad	 2
$LN22@process_mo:
  00180	00 00 00 00	 DD	 $LN8@process_mo
  00184	00 00 00 00	 DD	 $LN7@process_mo
  00188	00 00 00 00	 DD	 $LN10@process_mo
  0018c	00 00 00 00	 DD	 $LN9@process_mo
  00190	00 00 00 00	 DD	 $LN11@process_mo
  00194	00 00 00 00	 DD	 $LN12@process_mo
  00198	00 00 00 00	 DD	 $LN13@process_mo
$LN21@process_mo:
  0019c	00		 DB	 0
  0019d	06		 DB	 6
  0019e	06		 DB	 6
  0019f	06		 DB	 6
  001a0	06		 DB	 6
  001a1	06		 DB	 6
  001a2	06		 DB	 6
  001a3	06		 DB	 6
  001a4	06		 DB	 6
  001a5	06		 DB	 6
  001a6	06		 DB	 6
  001a7	06		 DB	 6
  001a8	06		 DB	 6
  001a9	01		 DB	 1
  001aa	06		 DB	 6
  001ab	06		 DB	 6
  001ac	06		 DB	 6
  001ad	06		 DB	 6
  001ae	06		 DB	 6
  001af	06		 DB	 6
  001b0	06		 DB	 6
  001b1	06		 DB	 6
  001b2	06		 DB	 6
  001b3	06		 DB	 6
  001b4	06		 DB	 6
  001b5	02		 DB	 2
  001b6	06		 DB	 6
  001b7	03		 DB	 3
  001b8	06		 DB	 6
  001b9	06		 DB	 6
  001ba	06		 DB	 6
  001bb	06		 DB	 6
  001bc	06		 DB	 6
  001bd	06		 DB	 6
  001be	06		 DB	 6
  001bf	06		 DB	 6
  001c0	06		 DB	 6
  001c1	06		 DB	 6
  001c2	06		 DB	 6
  001c3	06		 DB	 6
  001c4	06		 DB	 6
  001c5	06		 DB	 6
  001c6	06		 DB	 6
  001c7	06		 DB	 6
  001c8	06		 DB	 6
  001c9	06		 DB	 6
  001ca	06		 DB	 6
  001cb	06		 DB	 6
  001cc	06		 DB	 6
  001cd	06		 DB	 6
  001ce	06		 DB	 6
  001cf	06		 DB	 6
  001d0	06		 DB	 6
  001d1	06		 DB	 6
  001d2	06		 DB	 6
  001d3	06		 DB	 6
  001d4	06		 DB	 6
  001d5	06		 DB	 6
  001d6	06		 DB	 6
  001d7	06		 DB	 6
  001d8	06		 DB	 6
  001d9	06		 DB	 6
  001da	06		 DB	 6
  001db	06		 DB	 6
  001dc	06		 DB	 6
  001dd	06		 DB	 6
  001de	06		 DB	 6
  001df	06		 DB	 6
  001e0	06		 DB	 6
  001e1	06		 DB	 6
  001e2	06		 DB	 6
  001e3	06		 DB	 6
  001e4	06		 DB	 6
  001e5	06		 DB	 6
  001e6	06		 DB	 6
  001e7	06		 DB	 6
  001e8	06		 DB	 6
  001e9	06		 DB	 6
  001ea	06		 DB	 6
  001eb	06		 DB	 6
  001ec	06		 DB	 6
  001ed	06		 DB	 6
  001ee	06		 DB	 6
  001ef	06		 DB	 6
  001f0	06		 DB	 6
  001f1	06		 DB	 6
  001f2	06		 DB	 6
  001f3	06		 DB	 6
  001f4	06		 DB	 6
  001f5	06		 DB	 6
  001f6	06		 DB	 6
  001f7	06		 DB	 6
  001f8	06		 DB	 6
  001f9	06		 DB	 6
  001fa	06		 DB	 6
  001fb	06		 DB	 6
  001fc	06		 DB	 6
  001fd	06		 DB	 6
  001fe	06		 DB	 6
  001ff	06		 DB	 6
  00200	06		 DB	 6
  00201	06		 DB	 6
  00202	06		 DB	 6
  00203	06		 DB	 6
  00204	06		 DB	 6
  00205	06		 DB	 6
  00206	06		 DB	 6
  00207	06		 DB	 6
  00208	06		 DB	 6
  00209	06		 DB	 6
  0020a	06		 DB	 6
  0020b	06		 DB	 6
  0020c	06		 DB	 6
  0020d	06		 DB	 6
  0020e	06		 DB	 6
  0020f	06		 DB	 6
  00210	06		 DB	 6
  00211	06		 DB	 6
  00212	06		 DB	 6
  00213	06		 DB	 6
  00214	06		 DB	 6
  00215	06		 DB	 6
  00216	06		 DB	 6
  00217	06		 DB	 6
  00218	06		 DB	 6
  00219	06		 DB	 6
  0021a	06		 DB	 6
  0021b	06		 DB	 6
  0021c	04		 DB	 4
  0021d	06		 DB	 6
  0021e	06		 DB	 6
  0021f	06		 DB	 6
  00220	06		 DB	 6
  00221	06		 DB	 6
  00222	06		 DB	 6
  00223	06		 DB	 6
  00224	06		 DB	 6
  00225	06		 DB	 6
  00226	06		 DB	 6
  00227	06		 DB	 6
  00228	06		 DB	 6
  00229	06		 DB	 6
  0022a	06		 DB	 6
  0022b	06		 DB	 6
  0022c	06		 DB	 6
  0022d	06		 DB	 6
  0022e	06		 DB	 6
  0022f	06		 DB	 6
  00230	06		 DB	 6
  00231	06		 DB	 6
  00232	06		 DB	 6
  00233	06		 DB	 6
  00234	06		 DB	 6
  00235	06		 DB	 6
  00236	06		 DB	 6
  00237	05		 DB	 5
?process_modifiers@@YGHPAUEVENT@@@Z ENDP		; process_modifiers
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\modules\system\joyevent.c
;	COMDAT ?process_joystick_event@@YGHPAUEVENT@@@Z
_TEXT	SEGMENT
_loop$ = -4						; size = 4
_ev$ = 8						; size = 4
?process_joystick_event@@YGHPAUEVENT@@@Z PROC		; process_joystick_event, COMDAT

; 80   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 44	 sub	 esp, 68			; 00000044H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 81   : 
; 82   :    int
; 83   :       loop;
; 84   : 
; 85   : 	process_modifiers (ev);

  00009	8b 45 08	 mov	 eax, DWORD PTR _ev$[ebp]
  0000c	50		 push	 eax
  0000d	e8 00 00 00 00	 call	 ?process_modifiers@@YGHPAUEVENT@@@Z ; process_modifiers

; 86   : 
; 87   : 	for (loop = MODIFIER_NONE; loop < NUM_MODIFIER_TYPES; loop ++)

  00012	c7 45 fc 00 00
	00 00		 mov	 DWORD PTR _loop$[ebp], 0
  00019	eb 09		 jmp	 SHORT $LN4@process_jo
$LN2@process_jo:
  0001b	8b 45 fc	 mov	 eax, DWORD PTR _loop$[ebp]
  0001e	83 c0 01	 add	 eax, 1
  00021	89 45 fc	 mov	 DWORD PTR _loop$[ebp], eax
$LN4@process_jo:
  00024	83 7d fc 09	 cmp	 DWORD PTR _loop$[ebp], 9
  00028	0f 8d fe 00 00
	00		 jge	 $LN3@process_jo

; 88   : 	{
; 89   : 
; 90   : 		if ((current_modifier_states & (1 << loop)) || ((current_modifier_states | loop) == 0) || (ev->state == BUTTON_STATE_UP))

  0002e	b8 01 00 00 00	 mov	 eax, 1
  00033	8b 4d fc	 mov	 ecx, DWORD PTR _loop$[ebp]
  00036	d3 e0		 shl	 eax, cl
  00038	23 05 00 00 00
	00		 and	 eax, DWORD PTR ?current_modifier_states@@3HA ; current_modifier_states
  0003e	75 1a		 jne	 SHORT $LN6@process_jo
  00040	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_modifier_states@@3HA ; current_modifier_states
  00045	0b 45 fc	 or	 eax, DWORD PTR _loop$[ebp]
  00048	74 10		 je	 SHORT $LN6@process_jo
  0004a	8b 45 08	 mov	 eax, DWORD PTR _ev$[ebp]
  0004d	0f b7 48 08	 movzx	 ecx, WORD PTR [eax+8]
  00051	83 f9 01	 cmp	 ecx, 1
  00054	0f 85 cd 00 00
	00		 jne	 $LN5@process_jo
$LN6@process_jo:

; 91   : 		{
; 92   : 
; 93   : 			if (registered_events [ev->button][loop].current_state == ev->state)

  0005a	8b 45 08	 mov	 eax, DWORD PTR _ev$[ebp]
  0005d	0f b7 48 0a	 movzx	 ecx, WORD PTR [eax+10]
  00061	6b d1 48	 imul	 edx, ecx, 72
  00064	8b 45 fc	 mov	 eax, DWORD PTR _loop$[ebp]
  00067	0f b6 8c c2 01
	00 00 00	 movzx	 ecx, BYTE PTR ?registered_events@@3PAY08UREGISTERED_EVENT_TYPE@@A[edx+eax*8+1]
  0006f	8b 55 08	 mov	 edx, DWORD PTR _ev$[ebp]
  00072	0f b7 42 08	 movzx	 eax, WORD PTR [edx+8]
  00076	3b c8		 cmp	 ecx, eax
  00078	75 02		 jne	 SHORT $LN7@process_jo

; 94   : 			{
; 95   : 
; 96   : 				continue;

  0007a	eb 9f		 jmp	 SHORT $LN2@process_jo
$LN7@process_jo:

; 97   : 			}
; 98   : 
; 99   : 			if (registered_events [ev->button][loop].in_use)

  0007c	8b 45 08	 mov	 eax, DWORD PTR _ev$[ebp]
  0007f	0f b7 48 0a	 movzx	 ecx, WORD PTR [eax+10]
  00083	6b d1 48	 imul	 edx, ecx, 72
  00086	8b 45 fc	 mov	 eax, DWORD PTR _loop$[ebp]
  00089	0f b6 8c c2 00
	00 00 00	 movzx	 ecx, BYTE PTR ?registered_events@@3PAY08UREGISTERED_EVENT_TYPE@@A[edx+eax*8]
  00091	85 c9		 test	 ecx, ecx
  00093	0f 84 8e 00 00
	00		 je	 $LN5@process_jo

; 100  : 			{
; 101  : 
; 102  : 				#if EVENT_DEBUG
; 103  : 
; 104  : 				debug_log ("JOYSTICK_EVENT: button %d, modifier %d, current_state = %d, notify_state = %d, event state = %d", ev->button, loop, registered_events [ev->button][loop].current_state, registered_events [ev->button][loop].notify_state, ev->state);
; 105  : 
; 106  : 				#endif
; 107  : 
; 108  : 				registered_events [ev->button][loop].current_state = ev->state;

  00099	8b 45 08	 mov	 eax, DWORD PTR _ev$[ebp]
  0009c	0f b7 48 0a	 movzx	 ecx, WORD PTR [eax+10]
  000a0	6b d1 48	 imul	 edx, ecx, 72
  000a3	8b 45 fc	 mov	 eax, DWORD PTR _loop$[ebp]
  000a6	8b 4d 08	 mov	 ecx, DWORD PTR _ev$[ebp]
  000a9	8a 49 08	 mov	 cl, BYTE PTR [ecx+8]
  000ac	88 8c c2 01 00
	00 00		 mov	 BYTE PTR ?registered_events@@3PAY08UREGISTERED_EVENT_TYPE@@A[edx+eax*8+1], cl

; 109  : 
; 110  : 				if ((registered_events [ev->button][loop].notify_state == ev->state) ||

  000b3	8b 45 08	 mov	 eax, DWORD PTR _ev$[ebp]
  000b6	0f b7 48 0a	 movzx	 ecx, WORD PTR [eax+10]
  000ba	6b d1 48	 imul	 edx, ecx, 72
  000bd	8b 45 fc	 mov	 eax, DWORD PTR _loop$[ebp]
  000c0	0f b6 8c c2 02
	00 00 00	 movzx	 ecx, BYTE PTR ?registered_events@@3PAY08UREGISTERED_EVENT_TYPE@@A[edx+eax*8+2]
  000c8	8b 55 08	 mov	 edx, DWORD PTR _ev$[ebp]
  000cb	0f b7 42 08	 movzx	 eax, WORD PTR [edx+8]
  000cf	3b c8		 cmp	 ecx, eax
  000d1	74 1a		 je	 SHORT $LN10@process_jo
  000d3	8b 45 08	 mov	 eax, DWORD PTR _ev$[ebp]
  000d6	0f b7 48 0a	 movzx	 ecx, WORD PTR [eax+10]
  000da	6b d1 48	 imul	 edx, ecx, 72
  000dd	8b 45 fc	 mov	 eax, DWORD PTR _loop$[ebp]
  000e0	0f b6 8c c2 02
	00 00 00	 movzx	 ecx, BYTE PTR ?registered_events@@3PAY08UREGISTERED_EVENT_TYPE@@A[edx+eax*8+2]
  000e8	83 f9 03	 cmp	 ecx, 3
  000eb	75 3a		 jne	 SHORT $LN5@process_jo
$LN10@process_jo:

; 111  : 					(registered_events [ev->button][loop].notify_state == BUTTON_STATE_EITHER))
; 112  : 				{
; 113  : 		
; 114  : 					if (registered_events [ev->button][loop].function)

  000ed	8b 45 08	 mov	 eax, DWORD PTR _ev$[ebp]
  000f0	0f b7 48 0a	 movzx	 ecx, WORD PTR [eax+10]
  000f4	6b d1 48	 imul	 edx, ecx, 72
  000f7	8b 45 fc	 mov	 eax, DWORD PTR _loop$[ebp]
  000fa	83 bc c2 04 00
	00 00 00	 cmp	 DWORD PTR ?registered_events@@3PAY08UREGISTERED_EVENT_TYPE@@A[edx+eax*8+4], 0
  00102	74 23		 je	 SHORT $LN5@process_jo

; 115  : 					{
; 116  : 		
; 117  : 						#if EVENT_DEBUG
; 118  : 			
; 119  : 						debug_log ("JOYSTICK_EVENT: button event called");
; 120  : 			
; 121  : 						#endif
; 122  : 
; 123  : 						ev->modifier = loop;

  00104	8b 45 08	 mov	 eax, DWORD PTR _ev$[ebp]
  00107	8a 4d fc	 mov	 cl, BYTE PTR _loop$[ebp]
  0010a	88 48 04	 mov	 BYTE PTR [eax+4], cl

; 124  : 
; 125  : 						registered_events [ev->button][loop].function (ev);

  0010d	8b 45 08	 mov	 eax, DWORD PTR _ev$[ebp]
  00110	50		 push	 eax
  00111	8b 4d 08	 mov	 ecx, DWORD PTR _ev$[ebp]
  00114	0f b7 51 0a	 movzx	 edx, WORD PTR [ecx+10]
  00118	6b c2 48	 imul	 eax, edx, 72
  0011b	8b 4d fc	 mov	 ecx, DWORD PTR _loop$[ebp]
  0011e	8b 94 c8 04 00
	00 00		 mov	 edx, DWORD PTR ?registered_events@@3PAY08UREGISTERED_EVENT_TYPE@@A[eax+ecx*8+4]
  00125	ff d2		 call	 edx
$LN5@process_jo:

; 126  : 					}
; 127  : 				}
; 128  : 			}
; 129  : 		}
; 130  : 	}

  00127	e9 ef fe ff ff	 jmp	 $LN2@process_jo
$LN3@process_jo:

; 131  : 
; 132  :    return FALSE;

  0012c	33 c0		 xor	 eax, eax

; 133  : }

  0012e	5f		 pop	 edi
  0012f	5e		 pop	 esi
  00130	5b		 pop	 ebx
  00131	8b e5		 mov	 esp, ebp
  00133	5d		 pop	 ebp
  00134	c2 04 00	 ret	 4
?process_joystick_event@@YGHPAUEVENT@@@Z ENDP		; process_joystick_event
_TEXT	ENDS
END
