; Listing generated by Microsoft (R) Optimizing Compiler Version 19.16.27045.0 

	TITLE	C:\Users\nhv90\Projects\eech\modules\3d\3dobjdrw.c
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB MSVCRTD
INCLUDELIB OLDNAMES

PUBLIC	?current_object_3d_translucent_surfaces@@3PAUTRANSLUCENT_OBJECT_SURFACE@@A ; current_object_3d_translucent_surfaces
PUBLIC	?current_object_3d_relative_position@@3PAUVEC3D@@A ; current_object_3d_relative_position
PUBLIC	?current_object_3d_unit_position@@3PAUVEC3D@@A	; current_object_3d_unit_position
PUBLIC	?object_to_eye_attitude@@3PAY02MA		; object_to_eye_attitude
PUBLIC	?previous_object_3d_transparent_surface_index@@3HA ; previous_object_3d_transparent_surface_index
_BSS	SEGMENT
?current_object_3d_translucent_surfaces@@3PAUTRANSLUCENT_OBJECT_SURFACE@@A DD 01H DUP (?) ; current_object_3d_translucent_surfaces
?current_object_3d_relative_position@@3PAUVEC3D@@A DD 01H DUP (?) ; current_object_3d_relative_position
?current_object_3d_unit_position@@3PAUVEC3D@@A DD 01H DUP (?) ; current_object_3d_unit_position
?object_to_eye_attitude@@3PAY02MA DD 09H DUP (?)	; object_to_eye_attitude
?previous_object_3d_transparent_surface_index@@3HA DD 01H DUP (?) ; previous_object_3d_transparent_surface_index
_BSS	ENDS
PUBLIC	?asm_convert_float_to_int@@YGXMPAH@Z		; asm_convert_float_to_int
PUBLIC	?draw_wbuffered_3d_object@@YGXPAUOBJECT_3D_INSTANCE@@HH@Z ; draw_wbuffered_3d_object
PUBLIC	?draw_3d_object_clipped_faces@@YGXH@Z		; draw_3d_object_clipped_faces
PUBLIC	?draw_3d_object_unclipped_faces@@YGXH@Z		; draw_3d_object_unclipped_faces
PUBLIC	?draw_3d_object_untextured_clipped_faces@@YGXH@Z ; draw_3d_object_untextured_clipped_faces
PUBLIC	?draw_3d_object_untextured_unclipped_faces@@YGXH@Z ; draw_3d_object_untextured_unclipped_faces
PUBLIC	?draw_3d_translucent_object@@YGXPAUTRANSLUCENT_OBJECT_SURFACE@@@Z ; draw_3d_translucent_object
PUBLIC	?draw_3d_translucent_surface_clipped_faces@@YGXPAUTRANSLUCENT_OBJECT_SURFACE@@@Z ; draw_3d_translucent_surface_clipped_faces
PUBLIC	?draw_3d_translucent_surface_unclipped_faces@@YGXPAUTRANSLUCENT_OBJECT_SURFACE@@@Z ; draw_3d_translucent_surface_unclipped_faces
PUBLIC	?draw_3d_translucent_surface_clipped_reflection_faces@@YGXPAUTRANSLUCENT_OBJECT_SURFACE@@@Z ; draw_3d_translucent_surface_clipped_reflection_faces
PUBLIC	?draw_3d_translucent_surface_unclipped_reflection_faces@@YGXPAUTRANSLUCENT_OBJECT_SURFACE@@@Z ; draw_3d_translucent_surface_unclipped_reflection_faces
PUBLIC	?__LINE__Var@?0??add_transparent_surface@@YGXH@Z@4JA ; `add_transparent_surface'::`1'::__LINE__Var
PUBLIC	??_C@_0DD@BBFCNKFB@c?3?2users?2nhv90?2projects?2eech?2mo@ ; `string'
PUBLIC	??_C@_0EC@DPGMODHF@object_3d_transparent_surface_i@ ; `string'
PUBLIC	?__LINE__Var@?0??draw_3d_translucent_surface_clipped_reflection_faces@@YGXPAUTRANSLUCENT_OBJECT_SURFACE@@@Z@4JA ; `draw_3d_translucent_surface_clipped_reflection_faces'::`1'::__LINE__Var
PUBLIC	??_C@_05MAJJAKPI@FALSE@				; `string'
PUBLIC	?__LINE__Var@?0??draw_3d_translucent_surface_unclipped_reflection_faces@@YGXPAUTRANSLUCENT_OBJECT_SURFACE@@@Z@4JA ; `draw_3d_translucent_surface_unclipped_reflection_faces'::`1'::__LINE__Var
PUBLIC	__real@3f800000
PUBLIC	__real@406fe00000000000
PUBLIC	__real@40800000
PUBLIC	__real@437f0000
PUBLIC	__xmm@80000000800000008000000080000000
EXTRN	_memcpy:PROC
EXTRN	_memset:PROC
EXTRN	?process_assert@@YGXPBD0H@Z:PROC		; process_assert
EXTRN	?get_delta_time_average@@YGMXZ:PROC		; get_delta_time_average
EXTRN	?normalise_any_3d_vector@@YGMPAUVEC3D@@@Z:PROC	; normalise_any_3d_vector
EXTRN	?get_3d_transformation_matrix@@YGXQAY02MMMM@Z:PROC ; get_3d_transformation_matrix
EXTRN	?get_fog_distance_value@@YGMM@Z:PROC		; get_fog_distance_value
EXTRN	?set_d3d_fog_face_intensity@@YGXH@Z:PROC	; set_d3d_fog_face_intensity
EXTRN	?set_d3d_texture_batching@@YGXH@Z:PROC		; set_d3d_texture_batching
EXTRN	?add_triangle_fan_primitive_to_buffer@@YGXHHPAE@Z:PROC ; add_triangle_fan_primitive_to_buffer
EXTRN	?set_d3d_alpha_fog_zbuffer@@YGXHHHH@Z:PROC	; set_d3d_alpha_fog_zbuffer
EXTRN	?set_d3d_int_state@@YGXW4_D3DRENDERSTATETYPE@@K@Z:PROC ; set_d3d_int_state
EXTRN	?set_d3d_texture@@YGXHPAUSCREEN@@@Z:PROC	; set_d3d_texture
EXTRN	?set_d3d_texture_stage_state@@YGXHHH@Z:PROC	; set_d3d_texture_stage_state
EXTRN	?set_deferred_d3d_int_state@@YGXW4_D3DRENDERSTATETYPE@@K@Z:PROC ; set_deferred_d3d_int_state
EXTRN	?set_deferred_d3d_texture@@YGXHPAUSCREEN@@@Z:PROC ; set_deferred_d3d_texture
EXTRN	?set_deferred_d3d_texture_stage_state@@YGXHHH@Z:PROC ; set_deferred_d3d_texture_stage_state
EXTRN	?reset_deferred_state_changes@@YGXXZ:PROC	; reset_deferred_state_changes
EXTRN	?commit_deferred_state_changes@@YGXXZ:PROC	; commit_deferred_state_changes
EXTRN	?get_d3d_new_vertices_points_address@@YGPAU_D3DTLVERTEX@@HPAH@Z:PROC ; get_d3d_new_vertices_points_address
EXTRN	?reset_temporary_buffered_translucent_polygons@@YGXXZ:PROC ; reset_temporary_buffered_translucent_polygons
EXTRN	?get_number_of_temporary_translucent_polygons@@YGHXZ:PROC ; get_number_of_temporary_translucent_polygons
EXTRN	?draw_temporary_translucent_polygons@@YGXXZ:PROC ; draw_temporary_translucent_polygons
EXTRN	?initialise_object_texture_animations@@YGXPAUOBJECT_3D_INSTANCE@@@Z:PROC ; initialise_object_texture_animations
EXTRN	?get_object_approximation_number@@YGHHMPAH@Z:PROC ; get_object_approximation_number
EXTRN	?get_3d_scene_slot@@YGPAUSCENE_SLOT_DRAWING_LIST@@XZ:PROC ; get_3d_scene_slot
EXTRN	?insert_zbiased_object_into_3d_scene@@YGXW4OBJECT_3D_DRAWING_TYPES@@PAXM@Z:PROC ; insert_zbiased_object_into_3d_scene
EXTRN	?insert_transparent_buffer_into_3d_scene@@YGXPAUSCENE_SLOT_DRAWING_LIST@@@Z:PROC ; insert_transparent_buffer_into_3d_scene
EXTRN	?outcode_3d_object_surface_polygon@@YGHHHPAH@Z:PROC ; outcode_3d_object_surface_polygon
EXTRN	?wrender_clipped_3d_object_textured_polygon@@YGXPAUOBJECT_3D_FACE@@@Z:PROC ; wrender_clipped_3d_object_textured_polygon
EXTRN	?wrender_clipped_3d_object_gouraud_textured_polygon@@YGXPAUOBJECT_3D_FACE@@@Z:PROC ; wrender_clipped_3d_object_gouraud_textured_polygon
EXTRN	?wrender_clipped_3d_object_polygon@@YGXPAUOBJECT_3D_FACE@@@Z:PROC ; wrender_clipped_3d_object_polygon
EXTRN	?wrender_clipped_3d_object_gouraud_polygon@@YGXPAUOBJECT_3D_FACE@@@Z:PROC ; wrender_clipped_3d_object_gouraud_polygon
EXTRN	?wrender_clipped_3d_object_white_polygon@@YGXPAUOBJECT_3D_FACE@@@Z:PROC ; wrender_clipped_3d_object_white_polygon
EXTRN	?wrender_clipped_3d_object_white_textured_polygon@@YGXPAUOBJECT_3D_FACE@@@Z:PROC ; wrender_clipped_3d_object_white_textured_polygon
EXTRN	?wrender_clipped_3d_object_gouraud_white_polygon@@YGXPAUOBJECT_3D_FACE@@@Z:PROC ; wrender_clipped_3d_object_gouraud_white_polygon
EXTRN	?wrender_clipped_3d_object_textured_lightmap_polygon@@YGXPAUOBJECT_3D_FACE@@@Z:PROC ; wrender_clipped_3d_object_textured_lightmap_polygon
EXTRN	?wrender_clipped_3d_object_gouraud_textured_lightmap_polygon@@YGXPAUOBJECT_3D_FACE@@@Z:PROC ; wrender_clipped_3d_object_gouraud_textured_lightmap_polygon
EXTRN	?wrender_unclipped_3d_object_textured_polygon@@YGXPAUOBJECT_3D_FACE@@@Z:PROC ; wrender_unclipped_3d_object_textured_polygon
EXTRN	?wrender_unclipped_3d_object_gouraud_textured_polygon@@YGXPAUOBJECT_3D_FACE@@@Z:PROC ; wrender_unclipped_3d_object_gouraud_textured_polygon
EXTRN	?wrender_unclipped_3d_object_gouraud_textured_nospecular_polygon@@YGXPAUOBJECT_3D_FACE@@@Z:PROC ; wrender_unclipped_3d_object_gouraud_textured_nospecular_polygon
EXTRN	?wrender_unclipped_3d_object_polygon@@YGXPAUOBJECT_3D_FACE@@@Z:PROC ; wrender_unclipped_3d_object_polygon
EXTRN	?wrender_unclipped_3d_object_gouraud_polygon@@YGXPAUOBJECT_3D_FACE@@@Z:PROC ; wrender_unclipped_3d_object_gouraud_polygon
EXTRN	?wrender_unclipped_3d_object_white_polygon@@YGXPAUOBJECT_3D_FACE@@@Z:PROC ; wrender_unclipped_3d_object_white_polygon
EXTRN	?wrender_unclipped_3d_object_white_textured_polygon@@YGXPAUOBJECT_3D_FACE@@@Z:PROC ; wrender_unclipped_3d_object_white_textured_polygon
EXTRN	?wrender_unclipped_3d_object_gouraud_white_polygon@@YGXPAUOBJECT_3D_FACE@@@Z:PROC ; wrender_unclipped_3d_object_gouraud_white_polygon
EXTRN	?wrender_unclipped_3d_object_textured_lightmap_polygon@@YGXPAUOBJECT_3D_FACE@@@Z:PROC ; wrender_unclipped_3d_object_textured_lightmap_polygon
EXTRN	?wrender_unclipped_3d_object_gouraud_textured_lightmap_polygon@@YGXPAUOBJECT_3D_FACE@@@Z:PROC ; wrender_unclipped_3d_object_gouraud_textured_lightmap_polygon
EXTRN	?wrender_clipped_3d_object_textured_line@@YGXXZ:PROC ; wrender_clipped_3d_object_textured_line
EXTRN	?wrender_clipped_3d_object_plain_line@@YGXXZ:PROC ; wrender_clipped_3d_object_plain_line
EXTRN	?wrender_clipped_3d_object_plain_white_line@@YGXXZ:PROC ; wrender_clipped_3d_object_plain_white_line
EXTRN	?wrender_unclipped_3d_object_textured_line@@YGXXZ:PROC ; wrender_unclipped_3d_object_textured_line
EXTRN	?wrender_unclipped_3d_object_plain_line@@YGXXZ:PROC ; wrender_unclipped_3d_object_plain_line
EXTRN	?wrender_unclipped_3d_object_plain_white_line@@YGXXZ:PROC ; wrender_unclipped_3d_object_plain_white_line
EXTRN	?wrender_3d_object_surface@@YGXH@Z:PROC		; wrender_3d_object_surface
EXTRN	?wrender_3d_object_gouraud_surface@@YGXH@Z:PROC	; wrender_3d_object_gouraud_surface
EXTRN	?wrender_3d_object_gouraud_textured_surface@@YGXH@Z:PROC ; wrender_3d_object_gouraud_textured_surface
EXTRN	?wrender_3d_object_gouraud_textured_nospecular_surface@@YGXH@Z:PROC ; wrender_3d_object_gouraud_textured_nospecular_surface
EXTRN	?wrender_3d_object_textured_surface@@YGXH@Z:PROC ; wrender_3d_object_textured_surface
EXTRN	?wrender_translucent_clipped_3d_object_textured_polygon@@YGXPAUOBJECT_3D_FACE@@@Z:PROC ; wrender_translucent_clipped_3d_object_textured_polygon
EXTRN	?wrender_translucent_clipped_3d_object_gouraud_textured_polygon@@YGXPAUOBJECT_3D_FACE@@@Z:PROC ; wrender_translucent_clipped_3d_object_gouraud_textured_polygon
EXTRN	?wrender_translucent_clipped_3d_object_polygon@@YGXPAUOBJECT_3D_FACE@@@Z:PROC ; wrender_translucent_clipped_3d_object_polygon
EXTRN	?wrender_translucent_clipped_3d_object_gouraud_polygon@@YGXPAUOBJECT_3D_FACE@@@Z:PROC ; wrender_translucent_clipped_3d_object_gouraud_polygon
EXTRN	?wrender_translucent_unclipped_3d_object_textured_polygon@@YGXPAUOBJECT_3D_FACE@@@Z:PROC ; wrender_translucent_unclipped_3d_object_textured_polygon
EXTRN	?wrender_translucent_unclipped_3d_object_gouraud_textured_polygon@@YGXPAUOBJECT_3D_FACE@@@Z:PROC ; wrender_translucent_unclipped_3d_object_gouraud_textured_polygon
EXTRN	?wrender_translucent_unclipped_3d_object_polygon@@YGXPAUOBJECT_3D_FACE@@@Z:PROC ; wrender_translucent_unclipped_3d_object_polygon
EXTRN	?wrender_translucent_unclipped_3d_object_gouraud_polygon@@YGXPAUOBJECT_3D_FACE@@@Z:PROC ; wrender_translucent_unclipped_3d_object_gouraud_polygon
EXTRN	?wrender_translucent_clipped_3d_object_reflective_polygon@@YGXPAUOBJECT_3D_FACE@@@Z:PROC ; wrender_translucent_clipped_3d_object_reflective_polygon
EXTRN	?wrender_translucent_clipped_3d_object_reflective_gouraud_polygon@@YGXPAUOBJECT_3D_FACE@@@Z:PROC ; wrender_translucent_clipped_3d_object_reflective_gouraud_polygon
EXTRN	?wrender_translucent_unclipped_3d_object_reflective_polygon@@YGXPAUOBJECT_3D_FACE@@@Z:PROC ; wrender_translucent_unclipped_3d_object_reflective_polygon
EXTRN	?wrender_translucent_unclipped_3d_object_reflective_gouraud_polygon@@YGXPAUOBJECT_3D_FACE@@@Z:PROC ; wrender_translucent_unclipped_3d_object_reflective_gouraud_polygon
EXTRN	?get_textured_surface_face_colour@@YGXPAUREAL_COLOUR@@0@Z:PROC ; get_textured_surface_face_colour
EXTRN	?get_surface_face_colour@@YGXPAUREAL_COLOUR@@0@Z:PROC ; get_surface_face_colour
EXTRN	?generate_relative_lights@@YGPAULIGHT_3D_SOURCE@@PAUVIEWPOINT@@PAUVEC3D@@PAU1@@Z:PROC ; generate_relative_lights
EXTRN	?get_object_3d_outcode@@YGHHPAUVEC3D@@PAH@Z:PROC ; get_object_3d_outcode
EXTRN	?illuminate_3d_object@@YGXPAUOBJECT_3D@@PAUVEC3D@@PAULIGHT_3D_SOURCE@@1H@Z:PROC ; illuminate_3d_object
EXTRN	?transform_3d_object@@YGXPAUOBJECT_3D@@PAUVEC3D@@PAULIGHT_3D_SOURCE@@1H@Z:PROC ; transform_3d_object
EXTRN	?transform_flat_3d_object@@YGXPAUOBJECT_3D@@PAUVEC3D@@PAULIGHT_3D_SOURCE@@1H@Z:PROC ; transform_flat_3d_object
EXTRN	?transform_unclipped_3d_object@@YGXPAUOBJECT_3D@@PAUVEC3D@@PAULIGHT_3D_SOURCE@@1H@Z:PROC ; transform_unclipped_3d_object
EXTRN	?transform_unclipped_flat_3d_object@@YGXPAUOBJECT_3D@@PAUVEC3D@@PAULIGHT_3D_SOURCE@@1H@Z:PROC ; transform_unclipped_flat_3d_object
EXTRN	?illuminate_3d_object_surface@@YGXPAUOBJECT_3D@@PAUVEC3D@@PAULIGHT_3D_SOURCE@@1H@Z:PROC ; illuminate_3d_object_surface
EXTRN	?transform_3d_object_surface@@YGXPAUOBJECT_3D@@PAUVEC3D@@PAULIGHT_3D_SOURCE@@1H@Z:PROC ; transform_3d_object_surface
EXTRN	?transform_unclipped_3d_object_surface@@YGXPAUOBJECT_3D@@PAUVEC3D@@PAULIGHT_3D_SOURCE@@1H@Z:PROC ; transform_unclipped_3d_object_surface
EXTRN	?d3d_textured_lines@@3HA:DWORD			; d3d_textured_lines
EXTRN	?d3d_transparency_enabled@@3HA:DWORD		; d3d_transparency_enabled
EXTRN	?system_textures@@3PAPAUSCREEN@@A:BYTE		; system_textures
EXTRN	?zbuffer_constant@@3NA:QWORD			; zbuffer_constant
EXTRN	?zbuffer_constant_elevated_bias@@3NA:QWORD	; zbuffer_constant_elevated_bias
EXTRN	?zbuffer_constant_normal_bias@@3NA:QWORD	; zbuffer_constant_normal_bias
EXTRN	?active_3d_environment@@3PAUENV_3D@@A:DWORD	; active_3d_environment
EXTRN	?visual_3d_vp@@3PAUVIEWPOINT@@A:DWORD		; visual_3d_vp
EXTRN	?objects_3d_scene_database@@3PAUOBJECT_3D_SCENE_DATABASE_ENTRY@@A:DWORD ; objects_3d_scene_database
EXTRN	?objects_3d_data@@3PAUOBJECT_3D@@A:DWORD	; objects_3d_data
EXTRN	?texture_animations@@3PAUTEXTURE_ANIMATION_INFORMATION@@A:DWORD ; texture_animations
EXTRN	?current_3d_lights@@3PAULIGHT_3D_SOURCE@@A:DWORD ; current_3d_lights
EXTRN	?current_object_3d_luminosity_texture@@3PAUSCREEN@@A:DWORD ; current_object_3d_luminosity_texture
EXTRN	?current_object_3d_luminosity_texture_u_address@@3HA:DWORD ; current_object_3d_luminosity_texture_u_address
EXTRN	?current_object_3d_luminosity_texture_v_address@@3HA:DWORD ; current_object_3d_luminosity_texture_v_address
EXTRN	?current_object_3d_luminosity_texture_filter@@3HA:DWORD ; current_object_3d_luminosity_texture_filter
EXTRN	?current_object_3d_luminosity_texture_mipmap@@3HA:DWORD ; current_object_3d_luminosity_texture_mipmap
EXTRN	?current_object_3d_light_maps_enabled@@3HA:DWORD ; current_object_3d_light_maps_enabled
EXTRN	?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A:DWORD ; current_object_3d_surface
EXTRN	?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A:DWORD ; current_object_3d_point_list
EXTRN	?current_object_3d_face_normal_list@@3PAUPOINT_3D_PLAIN_REFERENCE@@A:DWORD ; current_object_3d_face_normal_list
EXTRN	?object_3d_sprite_flare_texture@@3PAUSCREEN@@A:DWORD ; object_3d_sprite_flare_texture
EXTRN	?current_object_3d_texture@@3PAUSCREEN@@A:DWORD	; current_object_3d_texture
EXTRN	?current_object_3d_reflection_texture_map@@3PAUSCREEN@@A:DWORD ; current_object_3d_reflection_texture_map
EXTRN	?current_object_3d_transformed_normals@@3PAUOBJECT_3D_TRANSFORMED_POINT_NORMAL@@A:DWORD ; current_object_3d_transformed_normals
EXTRN	?current_object_3d_texture_u_address@@3HA:DWORD	; current_object_3d_texture_u_address
EXTRN	?current_object_3d_texture_v_address@@3HA:DWORD	; current_object_3d_texture_v_address
EXTRN	?current_object_3d_texture_filter@@3HA:DWORD	; current_object_3d_texture_filter
EXTRN	?current_object_3d_texture_mipmap@@3HA:DWORD	; current_object_3d_texture_mipmap
EXTRN	?current_object_3d_specular@@3HA:DWORD		; current_object_3d_specular
EXTRN	?current_object_3d_outcode@@3HA:DWORD		; current_object_3d_outcode
EXTRN	?current_object_3d_dissolve_factor@@3MA:DWORD	; current_object_3d_dissolve_factor
EXTRN	?current_object_3d_dissolve_value@@3EA:BYTE	; current_object_3d_dissolve_value
EXTRN	?specular_rendering_enabled@@3HA:DWORD		; specular_rendering_enabled
EXTRN	?object_3d_approximation_level@@3HA:DWORD	; object_3d_approximation_level
EXTRN	?current_3d_object_is_flat@@3HA:DWORD		; current_3d_object_is_flat
EXTRN	?object_3d_points_current_base@@3HA:DWORD	; object_3d_points_current_base
EXTRN	?object_3d_object_current_base@@3HA:DWORD	; object_3d_object_current_base
EXTRN	?object_3d_light_3d_current_base@@3HA:DWORD	; object_3d_light_3d_current_base
EXTRN	?object_3d_perform_lod_calculations@@3HA:DWORD	; object_3d_perform_lod_calculations
EXTRN	?current_object_3d_surface_point_index@@3HA:DWORD ; current_object_3d_surface_point_index
EXTRN	?current_object_3d_surface_point_texture_list@@3PAUOBJECT_3D_SHORT_TEXTURED_POINT@@A:DWORD ; current_object_3d_surface_point_texture_list
EXTRN	?current_object_3d_surface_point_list@@3PAUPOINT_3D_PLAIN_REFERENCE@@A:DWORD ; current_object_3d_surface_point_list
EXTRN	?current_object_3d_surface_point_normal_list@@3PAUPOINT_3D_PLAIN_REFERENCE@@A:DWORD ; current_object_3d_surface_point_normal_list
EXTRN	?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A:DWORD ; current_object_3d_faces
EXTRN	?current_object_3d_surface_vertices@@3PAU_D3DTLVERTEX@@A:DWORD ; current_object_3d_surface_vertices
EXTRN	?current_object_3d_surface_vertices_used@@3PAEA:BYTE ; current_object_3d_surface_vertices_used
EXTRN	?current_object_3d_object_base@@3PAUOBJECT_3D_INFO@@A:DWORD ; current_object_3d_object_base
EXTRN	?object_3d_object_base@@3PAUOBJECT_3D_INFO@@A:BYTE ; object_3d_object_base
EXTRN	?object_3d_scale@@3UVEC3D@@A:BYTE		; object_3d_scale
EXTRN	?textured_object_rendering_enabled@@3HA:DWORD	; textured_object_rendering_enabled
EXTRN	?object_3d_transparent_surface_index@@3HA:DWORD	; object_3d_transparent_surface_index
EXTRN	?object_3d_translucent_surfaces@@3PAUTRANSLUCENT_OBJECT_SURFACE@@A:BYTE ; object_3d_translucent_surfaces
EXTRN	?rotation_3d@@3PAY02MA:BYTE			; rotation_3d
EXTRN	?transformed_3d_normals@@3PAUOBJECT_3D_TRANSFORMED_POINT_NORMAL@@A:BYTE ; transformed_3d_normals
EXTRN	?command_line_trees_fog@@3HA:DWORD		; command_line_trees_fog
EXTRN	?fog@@3HA:DWORD					; fog
EXTRN	__fltused:DWORD
;	COMDAT __xmm@80000000800000008000000080000000
CONST	SEGMENT
__xmm@80000000800000008000000080000000 DB 00H, 00H, 00H, 080H, 00H, 00H, 00H
	DB	080H, 00H, 00H, 00H, 080H, 00H, 00H, 00H, 080H
CONST	ENDS
;	COMDAT __real@437f0000
CONST	SEGMENT
__real@437f0000 DD 0437f0000r			; 255
CONST	ENDS
;	COMDAT __real@40800000
CONST	SEGMENT
__real@40800000 DD 040800000r			; 4
CONST	ENDS
;	COMDAT __real@406fe00000000000
CONST	SEGMENT
__real@406fe00000000000 DQ 0406fe00000000000r	; 255
CONST	ENDS
;	COMDAT __real@3f800000
CONST	SEGMENT
__real@3f800000 DD 03f800000r			; 1
CONST	ENDS
;	COMDAT ?__LINE__Var@?0??draw_3d_translucent_surface_unclipped_reflection_faces@@YGXPAUTRANSLUCENT_OBJECT_SURFACE@@@Z@4JA
_DATA	SEGMENT
?__LINE__Var@?0??draw_3d_translucent_surface_unclipped_reflection_faces@@YGXPAUTRANSLUCENT_OBJECT_SURFACE@@@Z@4JA DD 0b4fH ; `draw_3d_translucent_surface_unclipped_reflection_faces'::`1'::__LINE__Var
_DATA	ENDS
;	COMDAT ??_C@_05MAJJAKPI@FALSE@
CONST	SEGMENT
??_C@_05MAJJAKPI@FALSE@ DB 'FALSE', 00H			; `string'
CONST	ENDS
;	COMDAT ?__LINE__Var@?0??draw_3d_translucent_surface_clipped_reflection_faces@@YGXPAUTRANSLUCENT_OBJECT_SURFACE@@@Z@4JA
_DATA	SEGMENT
?__LINE__Var@?0??draw_3d_translucent_surface_clipped_reflection_faces@@YGXPAUTRANSLUCENT_OBJECT_SURFACE@@@Z@4JA DD 0af2H ; `draw_3d_translucent_surface_clipped_reflection_faces'::`1'::__LINE__Var
_DATA	ENDS
;	COMDAT ??_C@_0EC@DPGMODHF@object_3d_transparent_surface_i@
CONST	SEGMENT
??_C@_0EC@DPGMODHF@object_3d_transparent_surface_i@ DB 'object_3d_transpa'
	DB	'rent_surface_index < MAXIMUM_TRANLUCENT_SURFACES', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0DD@BBFCNKFB@c?3?2users?2nhv90?2projects?2eech?2mo@
CONST	SEGMENT
??_C@_0DD@BBFCNKFB@c?3?2users?2nhv90?2projects?2eech?2mo@ DB 'c:\users\nh'
	DB	'v90\projects\eech\modules\3d\3dobjdrw.c', 00H ; `string'
CONST	ENDS
;	COMDAT ?__LINE__Var@?0??add_transparent_surface@@YGXH@Z@4JA
_DATA	SEGMENT
?__LINE__Var@?0??add_transparent_surface@@YGXH@Z@4JA DD 087dH ; `add_transparent_surface'::`1'::__LINE__Var
_DATA	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\modules\3d\3dobjdrw.c
;	COMDAT ?draw_3d_translucent_surface_unclipped_reflection_faces@@YGXPAUTRANSLUCENT_OBJECT_SURFACE@@@Z
_TEXT	SEGMENT
tv72 = -80						; size = 8
tv76 = -76						; size = 4
_faces_left$ = -8					; size = 4
_number_of_surface_points$ = -4				; size = 4
_surface$ = 8						; size = 4
?draw_3d_translucent_surface_unclipped_reflection_faces@@YGXPAUTRANSLUCENT_OBJECT_SURFACE@@@Z PROC ; draw_3d_translucent_surface_unclipped_reflection_faces, COMDAT

; 2895 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 50	 sub	 esp, 80			; 00000050H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 2896 : 	int
; 2897 : 		number_of_surface_points,
; 2898 : 		faces_left;
; 2899 : 
; 2900 : 	number_of_surface_points = current_object_3d_surface->number_of_points;

  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  0000e	0f b6 48 03	 movzx	 ecx, BYTE PTR [eax+3]
  00012	89 4d fc	 mov	 DWORD PTR _number_of_surface_points$[ebp], ecx

; 2901 : 	if ( number_of_surface_points == 0 )

  00015	83 7d fc 00	 cmp	 DWORD PTR _number_of_surface_points$[ebp], 0
  00019	75 07		 jne	 SHORT $LN8@draw_3d_tr

; 2902 : 	{
; 2903 : 		number_of_surface_points = 256;

  0001b	c7 45 fc 00 01
	00 00		 mov	 DWORD PTR _number_of_surface_points$[ebp], 256 ; 00000100H
$LN8@draw_3d_tr:

; 2904 : 	}
; 2905 : 
; 2906 : 	zbuffer_constant = ( current_object_3d_surface->detail ) ? zbuffer_constant_elevated_bias: zbuffer_constant_normal_bias;

  00022	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  00027	66 8b 08	 mov	 cx, WORD PTR [eax]
  0002a	66 d1 e9	 shr	 cx, 1
  0002d	66 83 e1 01	 and	 cx, 1
  00031	0f b7 d1	 movzx	 edx, cx
  00034	85 d2		 test	 edx, edx
  00036	74 0f		 je	 SHORT $LN15@draw_3d_tr
  00038	f2 0f 10 05 00
	00 00 00	 movsd	 xmm0, QWORD PTR ?zbuffer_constant_elevated_bias@@3NA
  00040	f2 0f 11 45 b0	 movsd	 QWORD PTR tv72[ebp], xmm0
  00045	eb 0d		 jmp	 SHORT $LN16@draw_3d_tr
$LN15@draw_3d_tr:
  00047	f2 0f 10 05 00
	00 00 00	 movsd	 xmm0, QWORD PTR ?zbuffer_constant_normal_bias@@3NA
  0004f	f2 0f 11 45 b0	 movsd	 QWORD PTR tv72[ebp], xmm0
$LN16@draw_3d_tr:
  00054	f2 0f 10 45 b0	 movsd	 xmm0, QWORD PTR tv72[ebp]
  00059	f2 0f 11 05 00
	00 00 00	 movsd	 QWORD PTR ?zbuffer_constant@@3NA, xmm0

; 2907 : 	current_object_3d_specular = ( current_object_3d_surface->specularity )	?	specular_rendering_enabled : FALSE;

  00061	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  00066	0f b6 48 0b	 movzx	 ecx, BYTE PTR [eax+11]
  0006a	85 c9		 test	 ecx, ecx
  0006c	74 0b		 je	 SHORT $LN17@draw_3d_tr
  0006e	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?specular_rendering_enabled@@3HA ; specular_rendering_enabled
  00074	89 55 b4	 mov	 DWORD PTR tv76[ebp], edx
  00077	eb 07		 jmp	 SHORT $LN18@draw_3d_tr
$LN17@draw_3d_tr:
  00079	c7 45 b4 00 00
	00 00		 mov	 DWORD PTR tv76[ebp], 0
$LN18@draw_3d_tr:
  00080	8b 45 b4	 mov	 eax, DWORD PTR tv76[ebp]
  00083	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_specular@@3HA, eax ; current_object_3d_specular

; 2908 : 
; 2909 : 	set_d3d_int_state ( D3DRENDERSTATE_SRCBLEND, D3DBLEND_SRCALPHA );

  00088	6a 05		 push	 5
  0008a	6a 13		 push	 19			; 00000013H
  0008c	e8 00 00 00 00	 call	 ?set_d3d_int_state@@YGXW4_D3DRENDERSTATETYPE@@K@Z ; set_d3d_int_state

; 2910 : 	set_d3d_int_state ( D3DRENDERSTATE_DESTBLEND, D3DBLEND_INVSRCALPHA );

  00091	6a 06		 push	 6
  00093	6a 14		 push	 20			; 00000014H
  00095	e8 00 00 00 00	 call	 ?set_d3d_int_state@@YGXW4_D3DRENDERSTATETYPE@@K@Z ; set_d3d_int_state

; 2911 : 
; 2912 : 	current_object_3d_texture = current_object_3d_reflection_texture_map;

  0009a	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_reflection_texture_map@@3PAUSCREEN@@A ; current_object_3d_reflection_texture_map
  0009f	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_texture@@3PAUSCREEN@@A, eax ; current_object_3d_texture

; 2913 : 	current_object_3d_texture_u_address = D3DTADDRESS_WRAP;

  000a4	c7 05 00 00 00
	00 01 00 00 00	 mov	 DWORD PTR ?current_object_3d_texture_u_address@@3HA, 1 ; current_object_3d_texture_u_address

; 2914 : 	current_object_3d_texture_v_address = D3DTADDRESS_WRAP;

  000ae	c7 05 00 00 00
	00 01 00 00 00	 mov	 DWORD PTR ?current_object_3d_texture_v_address@@3HA, 1 ; current_object_3d_texture_v_address

; 2915 : 	current_object_3d_texture_filter = D3DTFG_LINEAR;

  000b8	c7 05 00 00 00
	00 02 00 00 00	 mov	 DWORD PTR ?current_object_3d_texture_filter@@3HA, 2 ; current_object_3d_texture_filter

; 2916 : 	current_object_3d_texture_mipmap = D3DTFP_POINT;

  000c2	c7 05 00 00 00
	00 02 00 00 00	 mov	 DWORD PTR ?current_object_3d_texture_mipmap@@3HA, 2 ; current_object_3d_texture_mipmap

; 2917 : 
; 2918 : 	set_d3d_int_state ( D3DRENDERSTATE_SPECULARENABLE, FALSE );

  000cc	6a 00		 push	 0
  000ce	6a 1d		 push	 29			; 0000001dH
  000d0	e8 00 00 00 00	 call	 ?set_d3d_int_state@@YGXW4_D3DRENDERSTATETYPE@@K@Z ; set_d3d_int_state

; 2919 : 	set_d3d_int_state ( D3DRENDERSTATE_SHADEMODE, D3DSHADE_GOURAUD );

  000d5	6a 02		 push	 2
  000d7	6a 09		 push	 9
  000d9	e8 00 00 00 00	 call	 ?set_d3d_int_state@@YGXW4_D3DRENDERSTATETYPE@@K@Z ; set_d3d_int_state

; 2920 : 
; 2921 : 	set_d3d_texture ( 0, current_object_3d_texture );

  000de	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_texture@@3PAUSCREEN@@A ; current_object_3d_texture
  000e3	50		 push	 eax
  000e4	6a 00		 push	 0
  000e6	e8 00 00 00 00	 call	 ?set_d3d_texture@@YGXHPAUSCREEN@@@Z ; set_d3d_texture

; 2922 : 	set_d3d_texture_stage_state ( 0, D3DTSS_COLOROP, D3DTOP_MODULATE );

  000eb	6a 04		 push	 4
  000ed	6a 01		 push	 1
  000ef	6a 00		 push	 0
  000f1	e8 00 00 00 00	 call	 ?set_d3d_texture_stage_state@@YGXHHH@Z ; set_d3d_texture_stage_state

; 2923 : 
; 2924 : 	set_d3d_texture_stage_state ( 0, D3DTSS_ADDRESSU, current_object_3d_texture_u_address );

  000f6	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_texture_u_address@@3HA ; current_object_3d_texture_u_address
  000fb	50		 push	 eax
  000fc	6a 0d		 push	 13			; 0000000dH
  000fe	6a 00		 push	 0
  00100	e8 00 00 00 00	 call	 ?set_d3d_texture_stage_state@@YGXHHH@Z ; set_d3d_texture_stage_state

; 2925 : 	set_d3d_texture_stage_state ( 0, D3DTSS_ADDRESSV, current_object_3d_texture_v_address );

  00105	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_texture_v_address@@3HA ; current_object_3d_texture_v_address
  0010a	50		 push	 eax
  0010b	6a 0e		 push	 14			; 0000000eH
  0010d	6a 00		 push	 0
  0010f	e8 00 00 00 00	 call	 ?set_d3d_texture_stage_state@@YGXHHH@Z ; set_d3d_texture_stage_state

; 2926 : 	set_d3d_texture_stage_state ( 0, D3DTSS_MAGFILTER, current_object_3d_texture_filter );

  00114	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_texture_filter@@3HA ; current_object_3d_texture_filter
  00119	50		 push	 eax
  0011a	6a 10		 push	 16			; 00000010H
  0011c	6a 00		 push	 0
  0011e	e8 00 00 00 00	 call	 ?set_d3d_texture_stage_state@@YGXHHH@Z ; set_d3d_texture_stage_state

; 2927 : 	set_d3d_texture_stage_state ( 0, D3DTSS_MINFILTER, current_object_3d_texture_filter );

  00123	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_texture_filter@@3HA ; current_object_3d_texture_filter
  00128	50		 push	 eax
  00129	6a 11		 push	 17			; 00000011H
  0012b	6a 00		 push	 0
  0012d	e8 00 00 00 00	 call	 ?set_d3d_texture_stage_state@@YGXHHH@Z ; set_d3d_texture_stage_state

; 2928 : 	set_d3d_texture_stage_state ( 0, D3DTSS_MIPFILTER, current_object_3d_texture_mipmap );

  00132	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_texture_mipmap@@3HA ; current_object_3d_texture_mipmap
  00137	50		 push	 eax
  00138	6a 12		 push	 18			; 00000012H
  0013a	6a 00		 push	 0
  0013c	e8 00 00 00 00	 call	 ?set_d3d_texture_stage_state@@YGXHHH@Z ; set_d3d_texture_stage_state

; 2929 : 
; 2930 : 	if ( current_object_3d_surface->smoothed )

  00141	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  00146	66 8b 08	 mov	 cx, WORD PTR [eax]
  00149	66 c1 e9 02	 shr	 cx, 2
  0014d	66 83 e1 01	 and	 cx, 1
  00151	0f b7 d1	 movzx	 edx, cx
  00154	85 d2		 test	 edx, edx
  00156	74 50		 je	 SHORT $LN9@draw_3d_tr

; 2931 : 	{
; 2932 : 		for ( faces_left = current_object_3d_surface->number_of_faces; faces_left > 0; faces_left-- )

  00158	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  0015d	0f b7 48 08	 movzx	 ecx, WORD PTR [eax+8]
  00161	89 4d f8	 mov	 DWORD PTR _faces_left$[ebp], ecx
  00164	eb 09		 jmp	 SHORT $LN4@draw_3d_tr
$LN2@draw_3d_tr:
  00166	8b 45 f8	 mov	 eax, DWORD PTR _faces_left$[ebp]
  00169	83 e8 01	 sub	 eax, 1
  0016c	89 45 f8	 mov	 DWORD PTR _faces_left$[ebp], eax
$LN4@draw_3d_tr:
  0016f	83 7d f8 00	 cmp	 DWORD PTR _faces_left$[ebp], 0
  00173	7e 2e		 jle	 SHORT $LN3@draw_3d_tr

; 2933 : 		{
; 2934 : 			wrender_translucent_unclipped_3d_object_reflective_gouraud_polygon ( current_object_3d_faces );

  00175	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  0017a	50		 push	 eax
  0017b	e8 00 00 00 00	 call	 ?wrender_translucent_unclipped_3d_object_reflective_gouraud_polygon@@YGXPAUOBJECT_3D_FACE@@@Z ; wrender_translucent_unclipped_3d_object_reflective_gouraud_polygon

; 2935 : 			current_object_3d_point_list += current_object_3d_faces->number_of_points;

  00180	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  00185	0f b6 08	 movzx	 ecx, BYTE PTR [eax]
  00188	03 0d 00 00 00
	00		 add	 ecx, DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A ; current_object_3d_point_list
  0018e	89 0d 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A, ecx ; current_object_3d_point_list

; 2936 : 			current_object_3d_faces++;

  00194	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  00199	83 c0 01	 add	 eax, 1
  0019c	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A, eax ; current_object_3d_faces

; 2937 : 		}

  001a1	eb c3		 jmp	 SHORT $LN2@draw_3d_tr
$LN3@draw_3d_tr:

; 2938 : 	}
; 2939 : 	else

  001a3	e9 a5 00 00 00	 jmp	 $LN12@draw_3d_tr
$LN9@draw_3d_tr:

; 2940 : 	{
; 2941 : 		if ( current_object_3d_surface->polygons )

  001a8	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  001ad	66 8b 08	 mov	 cx, WORD PTR [eax]
  001b0	66 83 e1 01	 and	 cx, 1
  001b4	0f b7 d1	 movzx	 edx, cx
  001b7	85 d2		 test	 edx, edx
  001b9	74 5a		 je	 SHORT $LN11@draw_3d_tr

; 2942 : 		{
; 2943 : 			for ( faces_left = current_object_3d_surface->number_of_faces; faces_left > 0; faces_left-- )

  001bb	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  001c0	0f b7 48 08	 movzx	 ecx, WORD PTR [eax+8]
  001c4	89 4d f8	 mov	 DWORD PTR _faces_left$[ebp], ecx
  001c7	eb 09		 jmp	 SHORT $LN7@draw_3d_tr
$LN5@draw_3d_tr:
  001c9	8b 45 f8	 mov	 eax, DWORD PTR _faces_left$[ebp]
  001cc	83 e8 01	 sub	 eax, 1
  001cf	89 45 f8	 mov	 DWORD PTR _faces_left$[ebp], eax
$LN7@draw_3d_tr:
  001d2	83 7d f8 00	 cmp	 DWORD PTR _faces_left$[ebp], 0
  001d6	7e 3b		 jle	 SHORT $LN6@draw_3d_tr

; 2944 : 			{
; 2945 : 				wrender_translucent_unclipped_3d_object_reflective_polygon ( current_object_3d_faces );

  001d8	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  001dd	50		 push	 eax
  001de	e8 00 00 00 00	 call	 ?wrender_translucent_unclipped_3d_object_reflective_polygon@@YGXPAUOBJECT_3D_FACE@@@Z ; wrender_translucent_unclipped_3d_object_reflective_polygon

; 2946 : 				current_object_3d_face_normal_list++;

  001e3	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_face_normal_list@@3PAUPOINT_3D_PLAIN_REFERENCE@@A ; current_object_3d_face_normal_list
  001e8	83 c0 02	 add	 eax, 2
  001eb	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_face_normal_list@@3PAUPOINT_3D_PLAIN_REFERENCE@@A, eax ; current_object_3d_face_normal_list

; 2947 : 				current_object_3d_point_list += current_object_3d_faces->number_of_points;

  001f0	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  001f5	0f b6 08	 movzx	 ecx, BYTE PTR [eax]
  001f8	03 0d 00 00 00
	00		 add	 ecx, DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A ; current_object_3d_point_list
  001fe	89 0d 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A, ecx ; current_object_3d_point_list

; 2948 : 				current_object_3d_faces++;

  00204	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  00209	83 c0 01	 add	 eax, 1
  0020c	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A, eax ; current_object_3d_faces

; 2949 : 			}

  00211	eb b6		 jmp	 SHORT $LN5@draw_3d_tr
$LN6@draw_3d_tr:

; 2950 : 		}
; 2951 : 		else

  00213	eb 38		 jmp	 SHORT $LN12@draw_3d_tr
$LN11@draw_3d_tr:

; 2952 : 		{
; 2953 : 			ASSERT ( FALSE );

  00215	b8 01 00 00 00	 mov	 eax, 1
  0021a	85 c0		 test	 eax, eax
  0021c	74 18		 je	 SHORT $LN13@draw_3d_tr
  0021e	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??draw_3d_translucent_surface_unclipped_reflection_faces@@YGXPAUTRANSLUCENT_OBJECT_SURFACE@@@Z@4JA
  00223	83 c0 3a	 add	 eax, 58			; 0000003aH
  00226	50		 push	 eax
  00227	68 00 00 00 00	 push	 OFFSET ??_C@_0DD@BBFCNKFB@c?3?2users?2nhv90?2projects?2eech?2mo@
  0022c	68 00 00 00 00	 push	 OFFSET ??_C@_05MAJJAKPI@FALSE@
  00231	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN13@draw_3d_tr:

; 2954 : 			current_object_3d_point_list += 2 * current_object_3d_surface->number_of_faces;

  00236	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  0023b	0f b7 48 08	 movzx	 ecx, WORD PTR [eax+8]
  0023f	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A ; current_object_3d_point_list
  00245	8d 04 4a	 lea	 eax, DWORD PTR [edx+ecx*2]
  00248	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A, eax ; current_object_3d_point_list
$LN12@draw_3d_tr:

; 2955 : 		}
; 2956 : 	}
; 2957 : }

  0024d	5f		 pop	 edi
  0024e	5e		 pop	 esi
  0024f	5b		 pop	 ebx
  00250	8b e5		 mov	 esp, ebp
  00252	5d		 pop	 ebp
  00253	c2 04 00	 ret	 4
?draw_3d_translucent_surface_unclipped_reflection_faces@@YGXPAUTRANSLUCENT_OBJECT_SURFACE@@@Z ENDP ; draw_3d_translucent_surface_unclipped_reflection_faces
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\modules\3d\3dobjdrw.c
;	COMDAT ?draw_3d_translucent_surface_clipped_reflection_faces@@YGXPAUTRANSLUCENT_OBJECT_SURFACE@@@Z
_TEXT	SEGMENT
tv72 = -80						; size = 8
tv76 = -76						; size = 4
_faces_left$ = -8					; size = 4
_number_of_surface_points$ = -4				; size = 4
_surface$ = 8						; size = 4
?draw_3d_translucent_surface_clipped_reflection_faces@@YGXPAUTRANSLUCENT_OBJECT_SURFACE@@@Z PROC ; draw_3d_translucent_surface_clipped_reflection_faces, COMDAT

; 2802 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 50	 sub	 esp, 80			; 00000050H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 2803 : 	int
; 2804 : 		number_of_surface_points,
; 2805 : 		faces_left;
; 2806 : 
; 2807 : 	number_of_surface_points = current_object_3d_surface->number_of_points;

  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  0000e	0f b6 48 03	 movzx	 ecx, BYTE PTR [eax+3]
  00012	89 4d fc	 mov	 DWORD PTR _number_of_surface_points$[ebp], ecx

; 2808 : 	if ( number_of_surface_points == 0 )

  00015	83 7d fc 00	 cmp	 DWORD PTR _number_of_surface_points$[ebp], 0
  00019	75 07		 jne	 SHORT $LN8@draw_3d_tr

; 2809 : 	{
; 2810 : 		number_of_surface_points = 256;

  0001b	c7 45 fc 00 01
	00 00		 mov	 DWORD PTR _number_of_surface_points$[ebp], 256 ; 00000100H
$LN8@draw_3d_tr:

; 2811 : 	}
; 2812 : 
; 2813 : 	zbuffer_constant = ( current_object_3d_surface->detail ) ? zbuffer_constant_elevated_bias: zbuffer_constant_normal_bias;

  00022	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  00027	66 8b 08	 mov	 cx, WORD PTR [eax]
  0002a	66 d1 e9	 shr	 cx, 1
  0002d	66 83 e1 01	 and	 cx, 1
  00031	0f b7 d1	 movzx	 edx, cx
  00034	85 d2		 test	 edx, edx
  00036	74 0f		 je	 SHORT $LN21@draw_3d_tr
  00038	f2 0f 10 05 00
	00 00 00	 movsd	 xmm0, QWORD PTR ?zbuffer_constant_elevated_bias@@3NA
  00040	f2 0f 11 45 b0	 movsd	 QWORD PTR tv72[ebp], xmm0
  00045	eb 0d		 jmp	 SHORT $LN22@draw_3d_tr
$LN21@draw_3d_tr:
  00047	f2 0f 10 05 00
	00 00 00	 movsd	 xmm0, QWORD PTR ?zbuffer_constant_normal_bias@@3NA
  0004f	f2 0f 11 45 b0	 movsd	 QWORD PTR tv72[ebp], xmm0
$LN22@draw_3d_tr:
  00054	f2 0f 10 45 b0	 movsd	 xmm0, QWORD PTR tv72[ebp]
  00059	f2 0f 11 05 00
	00 00 00	 movsd	 QWORD PTR ?zbuffer_constant@@3NA, xmm0

; 2814 : 	current_object_3d_specular = ( current_object_3d_surface->specularity )	?	specular_rendering_enabled : FALSE;

  00061	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  00066	0f b6 48 0b	 movzx	 ecx, BYTE PTR [eax+11]
  0006a	85 c9		 test	 ecx, ecx
  0006c	74 0b		 je	 SHORT $LN23@draw_3d_tr
  0006e	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?specular_rendering_enabled@@3HA ; specular_rendering_enabled
  00074	89 55 b4	 mov	 DWORD PTR tv76[ebp], edx
  00077	eb 07		 jmp	 SHORT $LN24@draw_3d_tr
$LN23@draw_3d_tr:
  00079	c7 45 b4 00 00
	00 00		 mov	 DWORD PTR tv76[ebp], 0
$LN24@draw_3d_tr:
  00080	8b 45 b4	 mov	 eax, DWORD PTR tv76[ebp]
  00083	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_specular@@3HA, eax ; current_object_3d_specular

; 2815 : 
; 2816 : 	set_d3d_alpha_fog_zbuffer ( TRUE, FALSE, TRUE, FALSE );

  00088	6a 00		 push	 0
  0008a	6a 01		 push	 1
  0008c	6a 00		 push	 0
  0008e	6a 01		 push	 1
  00090	e8 00 00 00 00	 call	 ?set_d3d_alpha_fog_zbuffer@@YGXHHHH@Z ; set_d3d_alpha_fog_zbuffer

; 2817 : 
; 2818 : 	set_d3d_int_state ( D3DRENDERSTATE_SRCBLEND, D3DBLEND_SRCALPHA );

  00095	6a 05		 push	 5
  00097	6a 13		 push	 19			; 00000013H
  00099	e8 00 00 00 00	 call	 ?set_d3d_int_state@@YGXW4_D3DRENDERSTATETYPE@@K@Z ; set_d3d_int_state

; 2819 : 	set_d3d_int_state ( D3DRENDERSTATE_DESTBLEND, D3DBLEND_INVSRCALPHA );

  0009e	6a 06		 push	 6
  000a0	6a 14		 push	 20			; 00000014H
  000a2	e8 00 00 00 00	 call	 ?set_d3d_int_state@@YGXW4_D3DRENDERSTATETYPE@@K@Z ; set_d3d_int_state

; 2820 : 
; 2821 : 	{
; 2822 : 		current_object_3d_texture = current_object_3d_reflection_texture_map;

  000a7	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_reflection_texture_map@@3PAUSCREEN@@A ; current_object_3d_reflection_texture_map
  000ac	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_texture@@3PAUSCREEN@@A, eax ; current_object_3d_texture

; 2823 : 		current_object_3d_texture_u_address = D3DTADDRESS_WRAP;

  000b1	c7 05 00 00 00
	00 01 00 00 00	 mov	 DWORD PTR ?current_object_3d_texture_u_address@@3HA, 1 ; current_object_3d_texture_u_address

; 2824 : 		current_object_3d_texture_v_address = D3DTADDRESS_WRAP;

  000bb	c7 05 00 00 00
	00 01 00 00 00	 mov	 DWORD PTR ?current_object_3d_texture_v_address@@3HA, 1 ; current_object_3d_texture_v_address

; 2825 : 		current_object_3d_texture_filter = D3DTFG_LINEAR;

  000c5	c7 05 00 00 00
	00 02 00 00 00	 mov	 DWORD PTR ?current_object_3d_texture_filter@@3HA, 2 ; current_object_3d_texture_filter

; 2826 : 		current_object_3d_texture_mipmap = D3DTFP_POINT;

  000cf	c7 05 00 00 00
	00 02 00 00 00	 mov	 DWORD PTR ?current_object_3d_texture_mipmap@@3HA, 2 ; current_object_3d_texture_mipmap

; 2827 : 
; 2828 : 		set_d3d_int_state ( D3DRENDERSTATE_SPECULARENABLE, FALSE );

  000d9	6a 00		 push	 0
  000db	6a 1d		 push	 29			; 0000001dH
  000dd	e8 00 00 00 00	 call	 ?set_d3d_int_state@@YGXW4_D3DRENDERSTATETYPE@@K@Z ; set_d3d_int_state

; 2829 : 		set_d3d_int_state ( D3DRENDERSTATE_SHADEMODE, D3DSHADE_GOURAUD );

  000e2	6a 02		 push	 2
  000e4	6a 09		 push	 9
  000e6	e8 00 00 00 00	 call	 ?set_d3d_int_state@@YGXW4_D3DRENDERSTATETYPE@@K@Z ; set_d3d_int_state

; 2830 : 
; 2831 : 		set_d3d_texture ( 0, current_object_3d_texture );

  000eb	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_texture@@3PAUSCREEN@@A ; current_object_3d_texture
  000f0	50		 push	 eax
  000f1	6a 00		 push	 0
  000f3	e8 00 00 00 00	 call	 ?set_d3d_texture@@YGXHPAUSCREEN@@@Z ; set_d3d_texture

; 2832 : 		set_d3d_texture_stage_state ( 0, D3DTSS_COLOROP, D3DTOP_MODULATE );

  000f8	6a 04		 push	 4
  000fa	6a 01		 push	 1
  000fc	6a 00		 push	 0
  000fe	e8 00 00 00 00	 call	 ?set_d3d_texture_stage_state@@YGXHHH@Z ; set_d3d_texture_stage_state

; 2833 : 
; 2834 : 		set_d3d_texture_stage_state ( 0, D3DTSS_ADDRESSU, current_object_3d_texture_u_address );

  00103	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_texture_u_address@@3HA ; current_object_3d_texture_u_address
  00108	50		 push	 eax
  00109	6a 0d		 push	 13			; 0000000dH
  0010b	6a 00		 push	 0
  0010d	e8 00 00 00 00	 call	 ?set_d3d_texture_stage_state@@YGXHHH@Z ; set_d3d_texture_stage_state

; 2835 : 		set_d3d_texture_stage_state ( 0, D3DTSS_ADDRESSV, current_object_3d_texture_v_address );

  00112	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_texture_v_address@@3HA ; current_object_3d_texture_v_address
  00117	50		 push	 eax
  00118	6a 0e		 push	 14			; 0000000eH
  0011a	6a 00		 push	 0
  0011c	e8 00 00 00 00	 call	 ?set_d3d_texture_stage_state@@YGXHHH@Z ; set_d3d_texture_stage_state

; 2836 : 		set_d3d_texture_stage_state ( 0, D3DTSS_MAGFILTER, current_object_3d_texture_filter );

  00121	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_texture_filter@@3HA ; current_object_3d_texture_filter
  00126	50		 push	 eax
  00127	6a 10		 push	 16			; 00000010H
  00129	6a 00		 push	 0
  0012b	e8 00 00 00 00	 call	 ?set_d3d_texture_stage_state@@YGXHHH@Z ; set_d3d_texture_stage_state

; 2837 : 		set_d3d_texture_stage_state ( 0, D3DTSS_MINFILTER, current_object_3d_texture_filter );

  00130	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_texture_filter@@3HA ; current_object_3d_texture_filter
  00135	50		 push	 eax
  00136	6a 11		 push	 17			; 00000011H
  00138	6a 00		 push	 0
  0013a	e8 00 00 00 00	 call	 ?set_d3d_texture_stage_state@@YGXHHH@Z ; set_d3d_texture_stage_state

; 2838 : 		set_d3d_texture_stage_state ( 0, D3DTSS_MIPFILTER, current_object_3d_texture_mipmap );

  0013f	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_texture_mipmap@@3HA ; current_object_3d_texture_mipmap
  00144	50		 push	 eax
  00145	6a 12		 push	 18			; 00000012H
  00147	6a 00		 push	 0
  00149	e8 00 00 00 00	 call	 ?set_d3d_texture_stage_state@@YGXHHH@Z ; set_d3d_texture_stage_state

; 2839 : 
; 2840 : 		if ( current_object_3d_surface->smoothed )

  0014e	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  00153	66 8b 08	 mov	 cx, WORD PTR [eax]
  00156	66 c1 e9 02	 shr	 cx, 2
  0015a	66 83 e1 01	 and	 cx, 1
  0015e	0f b7 d1	 movzx	 edx, cx
  00161	85 d2		 test	 edx, edx
  00163	0f 84 87 00 00
	00		 je	 $LN9@draw_3d_tr

; 2841 : 		{
; 2842 : 			for ( faces_left = current_object_3d_surface->number_of_faces; faces_left > 0; faces_left-- )

  00169	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  0016e	0f b7 48 08	 movzx	 ecx, WORD PTR [eax+8]
  00172	89 4d f8	 mov	 DWORD PTR _faces_left$[ebp], ecx
  00175	eb 09		 jmp	 SHORT $LN4@draw_3d_tr
$LN2@draw_3d_tr:
  00177	8b 45 f8	 mov	 eax, DWORD PTR _faces_left$[ebp]
  0017a	83 e8 01	 sub	 eax, 1
  0017d	89 45 f8	 mov	 DWORD PTR _faces_left$[ebp], eax
$LN4@draw_3d_tr:
  00180	83 7d f8 00	 cmp	 DWORD PTR _faces_left$[ebp], 0
  00184	7e 65		 jle	 SHORT $LN3@draw_3d_tr

; 2843 : 			{
; 2844 : 				if ( !outcode_3d_object_surface_polygon ( current_object_3d_faces->number_of_points, current_object_3d_object_base->points_base, &current_object_3d_outcode ) )

  00186	68 00 00 00 00	 push	 OFFSET ?current_object_3d_outcode@@3HA ; current_object_3d_outcode
  0018b	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_object_base@@3PAUOBJECT_3D_INFO@@A ; current_object_3d_object_base
  00190	8b 48 24	 mov	 ecx, DWORD PTR [eax+36]
  00193	51		 push	 ecx
  00194	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  0019a	0f b6 02	 movzx	 eax, BYTE PTR [edx]
  0019d	50		 push	 eax
  0019e	e8 00 00 00 00	 call	 ?outcode_3d_object_surface_polygon@@YGHHHPAH@Z ; outcode_3d_object_surface_polygon
  001a3	85 c0		 test	 eax, eax
  001a5	75 21		 jne	 SHORT $LN13@draw_3d_tr

; 2845 : 				{
; 2846 : 					if ( current_object_3d_outcode == 0 )

  001a7	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?current_object_3d_outcode@@3HA, 0 ; current_object_3d_outcode
  001ae	75 0d		 jne	 SHORT $LN12@draw_3d_tr

; 2847 : 					{
; 2848 : 						wrender_translucent_unclipped_3d_object_reflective_gouraud_polygon ( current_object_3d_faces );

  001b0	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  001b5	50		 push	 eax
  001b6	e8 00 00 00 00	 call	 ?wrender_translucent_unclipped_3d_object_reflective_gouraud_polygon@@YGXPAUOBJECT_3D_FACE@@@Z ; wrender_translucent_unclipped_3d_object_reflective_gouraud_polygon

; 2849 : 					}
; 2850 : 					else

  001bb	eb 0b		 jmp	 SHORT $LN13@draw_3d_tr
$LN12@draw_3d_tr:

; 2851 : 					{
; 2852 : 						wrender_translucent_clipped_3d_object_reflective_gouraud_polygon ( current_object_3d_faces );

  001bd	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  001c2	50		 push	 eax
  001c3	e8 00 00 00 00	 call	 ?wrender_translucent_clipped_3d_object_reflective_gouraud_polygon@@YGXPAUOBJECT_3D_FACE@@@Z ; wrender_translucent_clipped_3d_object_reflective_gouraud_polygon
$LN13@draw_3d_tr:

; 2853 : 					}
; 2854 : 				}
; 2855 : 				current_object_3d_point_list += current_object_3d_faces->number_of_points;

  001c8	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  001cd	0f b6 08	 movzx	 ecx, BYTE PTR [eax]
  001d0	03 0d 00 00 00
	00		 add	 ecx, DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A ; current_object_3d_point_list
  001d6	89 0d 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A, ecx ; current_object_3d_point_list

; 2856 : 				current_object_3d_faces++;

  001dc	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  001e1	83 c0 01	 add	 eax, 1
  001e4	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A, eax ; current_object_3d_faces

; 2857 : 			}

  001e9	eb 8c		 jmp	 SHORT $LN2@draw_3d_tr
$LN3@draw_3d_tr:

; 2858 : 		}
; 2859 : 		else

  001eb	e9 e3 00 00 00	 jmp	 $LN15@draw_3d_tr
$LN9@draw_3d_tr:

; 2860 : 		{
; 2861 : 			if ( current_object_3d_surface->polygons )

  001f0	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  001f5	66 8b 08	 mov	 cx, WORD PTR [eax]
  001f8	66 83 e1 01	 and	 cx, 1
  001fc	0f b7 d1	 movzx	 edx, cx
  001ff	85 d2		 test	 edx, edx
  00201	0f 84 94 00 00
	00		 je	 $LN14@draw_3d_tr

; 2862 : 			{
; 2863 : 				for ( faces_left = current_object_3d_surface->number_of_faces; faces_left > 0; faces_left-- )

  00207	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  0020c	0f b7 48 08	 movzx	 ecx, WORD PTR [eax+8]
  00210	89 4d f8	 mov	 DWORD PTR _faces_left$[ebp], ecx
  00213	eb 09		 jmp	 SHORT $LN7@draw_3d_tr
$LN5@draw_3d_tr:
  00215	8b 45 f8	 mov	 eax, DWORD PTR _faces_left$[ebp]
  00218	83 e8 01	 sub	 eax, 1
  0021b	89 45 f8	 mov	 DWORD PTR _faces_left$[ebp], eax
$LN7@draw_3d_tr:
  0021e	83 7d f8 00	 cmp	 DWORD PTR _faces_left$[ebp], 0
  00222	7e 75		 jle	 SHORT $LN6@draw_3d_tr

; 2864 : 				{
; 2865 : 					if ( !outcode_3d_object_surface_polygon ( current_object_3d_faces->number_of_points, current_object_3d_object_base->points_base, &current_object_3d_outcode ) )

  00224	68 00 00 00 00	 push	 OFFSET ?current_object_3d_outcode@@3HA ; current_object_3d_outcode
  00229	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_object_base@@3PAUOBJECT_3D_INFO@@A ; current_object_3d_object_base
  0022e	8b 48 24	 mov	 ecx, DWORD PTR [eax+36]
  00231	51		 push	 ecx
  00232	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  00238	0f b6 02	 movzx	 eax, BYTE PTR [edx]
  0023b	50		 push	 eax
  0023c	e8 00 00 00 00	 call	 ?outcode_3d_object_surface_polygon@@YGHHHPAH@Z ; outcode_3d_object_surface_polygon
  00241	85 c0		 test	 eax, eax
  00243	75 21		 jne	 SHORT $LN18@draw_3d_tr

; 2866 : 					{
; 2867 : 						if ( current_object_3d_outcode == 0 )

  00245	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?current_object_3d_outcode@@3HA, 0 ; current_object_3d_outcode
  0024c	75 0d		 jne	 SHORT $LN17@draw_3d_tr

; 2868 : 						{
; 2869 : 							wrender_translucent_unclipped_3d_object_reflective_polygon ( current_object_3d_faces );

  0024e	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  00253	50		 push	 eax
  00254	e8 00 00 00 00	 call	 ?wrender_translucent_unclipped_3d_object_reflective_polygon@@YGXPAUOBJECT_3D_FACE@@@Z ; wrender_translucent_unclipped_3d_object_reflective_polygon

; 2870 : 						}
; 2871 : 						else

  00259	eb 0b		 jmp	 SHORT $LN18@draw_3d_tr
$LN17@draw_3d_tr:

; 2872 : 						{
; 2873 : 							wrender_translucent_clipped_3d_object_reflective_polygon ( current_object_3d_faces );

  0025b	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  00260	50		 push	 eax
  00261	e8 00 00 00 00	 call	 ?wrender_translucent_clipped_3d_object_reflective_polygon@@YGXPAUOBJECT_3D_FACE@@@Z ; wrender_translucent_clipped_3d_object_reflective_polygon
$LN18@draw_3d_tr:

; 2874 : 						}
; 2875 : 					}
; 2876 : 					current_object_3d_face_normal_list++;

  00266	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_face_normal_list@@3PAUPOINT_3D_PLAIN_REFERENCE@@A ; current_object_3d_face_normal_list
  0026b	83 c0 02	 add	 eax, 2
  0026e	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_face_normal_list@@3PAUPOINT_3D_PLAIN_REFERENCE@@A, eax ; current_object_3d_face_normal_list

; 2877 : 					current_object_3d_point_list += current_object_3d_faces->number_of_points;

  00273	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  00278	0f b6 08	 movzx	 ecx, BYTE PTR [eax]
  0027b	03 0d 00 00 00
	00		 add	 ecx, DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A ; current_object_3d_point_list
  00281	89 0d 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A, ecx ; current_object_3d_point_list

; 2878 : 					current_object_3d_faces++;

  00287	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  0028c	83 c0 01	 add	 eax, 1
  0028f	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A, eax ; current_object_3d_faces

; 2879 : 				}

  00294	e9 7c ff ff ff	 jmp	 $LN5@draw_3d_tr
$LN6@draw_3d_tr:

; 2880 : 			}
; 2881 : 			else

  00299	eb 38		 jmp	 SHORT $LN15@draw_3d_tr
$LN14@draw_3d_tr:

; 2882 : 			{
; 2883 : 				ASSERT ( FALSE );

  0029b	b8 01 00 00 00	 mov	 eax, 1
  002a0	85 c0		 test	 eax, eax
  002a2	74 18		 je	 SHORT $LN19@draw_3d_tr
  002a4	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??draw_3d_translucent_surface_clipped_reflection_faces@@YGXPAUTRANSLUCENT_OBJECT_SURFACE@@@Z@4JA
  002a9	83 c0 51	 add	 eax, 81			; 00000051H
  002ac	50		 push	 eax
  002ad	68 00 00 00 00	 push	 OFFSET ??_C@_0DD@BBFCNKFB@c?3?2users?2nhv90?2projects?2eech?2mo@
  002b2	68 00 00 00 00	 push	 OFFSET ??_C@_05MAJJAKPI@FALSE@
  002b7	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN19@draw_3d_tr:

; 2884 : 				current_object_3d_point_list += 2 * current_object_3d_surface->number_of_faces;

  002bc	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  002c1	0f b7 48 08	 movzx	 ecx, WORD PTR [eax+8]
  002c5	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A ; current_object_3d_point_list
  002cb	8d 04 4a	 lea	 eax, DWORD PTR [edx+ecx*2]
  002ce	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A, eax ; current_object_3d_point_list
$LN15@draw_3d_tr:

; 2885 : 			}
; 2886 : 		}
; 2887 : 	}
; 2888 : }

  002d3	5f		 pop	 edi
  002d4	5e		 pop	 esi
  002d5	5b		 pop	 ebx
  002d6	8b e5		 mov	 esp, ebp
  002d8	5d		 pop	 ebp
  002d9	c2 04 00	 ret	 4
?draw_3d_translucent_surface_clipped_reflection_faces@@YGXPAUTRANSLUCENT_OBJECT_SURFACE@@@Z ENDP ; draw_3d_translucent_surface_clipped_reflection_faces
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\modules\3d\3dobjdrw.c
;	COMDAT ?draw_3d_translucent_surface_unclipped_faces@@YGXPAUTRANSLUCENT_OBJECT_SURFACE@@@Z
_TEXT	SEGMENT
tv72 = -80						; size = 8
tv153 = -76						; size = 4
tv147 = -76						; size = 4
tv141 = -76						; size = 4
tv135 = -76						; size = 4
tv76 = -76						; size = 4
_faces_left$ = -8					; size = 4
_number_of_surface_points$ = -4				; size = 4
_surface$ = 8						; size = 4
?draw_3d_translucent_surface_unclipped_faces@@YGXPAUTRANSLUCENT_OBJECT_SURFACE@@@Z PROC ; draw_3d_translucent_surface_unclipped_faces, COMDAT

; 2668 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 50	 sub	 esp, 80			; 00000050H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 2669 : 	int
; 2670 : 		number_of_surface_points,
; 2671 : 		faces_left;
; 2672 : 
; 2673 : 	number_of_surface_points = current_object_3d_surface->number_of_points;

  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  0000e	0f b6 48 03	 movzx	 ecx, BYTE PTR [eax+3]
  00012	89 4d fc	 mov	 DWORD PTR _number_of_surface_points$[ebp], ecx

; 2674 : 	if ( number_of_surface_points == 0 )

  00015	83 7d fc 00	 cmp	 DWORD PTR _number_of_surface_points$[ebp], 0
  00019	75 07		 jne	 SHORT $LN20@draw_3d_tr

; 2675 : 	{
; 2676 : 		number_of_surface_points = 256;

  0001b	c7 45 fc 00 01
	00 00		 mov	 DWORD PTR _number_of_surface_points$[ebp], 256 ; 00000100H
$LN20@draw_3d_tr:

; 2677 : 	}
; 2678 : 
; 2679 : 	zbuffer_constant = ( current_object_3d_surface->detail ) ? zbuffer_constant_elevated_bias: zbuffer_constant_normal_bias;

  00022	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  00027	66 8b 08	 mov	 cx, WORD PTR [eax]
  0002a	66 d1 e9	 shr	 cx, 1
  0002d	66 83 e1 01	 and	 cx, 1
  00031	0f b7 d1	 movzx	 edx, cx
  00034	85 d2		 test	 edx, edx
  00036	74 0f		 je	 SHORT $LN35@draw_3d_tr
  00038	f2 0f 10 05 00
	00 00 00	 movsd	 xmm0, QWORD PTR ?zbuffer_constant_elevated_bias@@3NA
  00040	f2 0f 11 45 b0	 movsd	 QWORD PTR tv72[ebp], xmm0
  00045	eb 0d		 jmp	 SHORT $LN36@draw_3d_tr
$LN35@draw_3d_tr:
  00047	f2 0f 10 05 00
	00 00 00	 movsd	 xmm0, QWORD PTR ?zbuffer_constant_normal_bias@@3NA
  0004f	f2 0f 11 45 b0	 movsd	 QWORD PTR tv72[ebp], xmm0
$LN36@draw_3d_tr:
  00054	f2 0f 10 45 b0	 movsd	 xmm0, QWORD PTR tv72[ebp]
  00059	f2 0f 11 05 00
	00 00 00	 movsd	 QWORD PTR ?zbuffer_constant@@3NA, xmm0

; 2680 : 	current_object_3d_specular = ( current_object_3d_surface->specularity )	?	specular_rendering_enabled : FALSE;

  00061	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  00066	0f b6 48 0b	 movzx	 ecx, BYTE PTR [eax+11]
  0006a	85 c9		 test	 ecx, ecx
  0006c	74 0b		 je	 SHORT $LN37@draw_3d_tr
  0006e	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?specular_rendering_enabled@@3HA ; specular_rendering_enabled
  00074	89 55 b4	 mov	 DWORD PTR tv76[ebp], edx
  00077	eb 07		 jmp	 SHORT $LN38@draw_3d_tr
$LN37@draw_3d_tr:
  00079	c7 45 b4 00 00
	00 00		 mov	 DWORD PTR tv76[ebp], 0
$LN38@draw_3d_tr:
  00080	8b 45 b4	 mov	 eax, DWORD PTR tv76[ebp]
  00083	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_specular@@3HA, eax ; current_object_3d_specular

; 2681 : 
; 2682 : 	if ( current_object_3d_surface->additive )

  00088	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  0008d	66 8b 08	 mov	 cx, WORD PTR [eax]
  00090	66 c1 e9 05	 shr	 cx, 5
  00094	66 83 e1 01	 and	 cx, 1
  00098	0f b7 d1	 movzx	 edx, cx
  0009b	85 d2		 test	 edx, edx
  0009d	74 14		 je	 SHORT $LN21@draw_3d_tr

; 2683 : 	{
; 2684 : 		set_d3d_int_state ( D3DRENDERSTATE_SRCBLEND, D3DBLEND_ONE );

  0009f	6a 02		 push	 2
  000a1	6a 13		 push	 19			; 00000013H
  000a3	e8 00 00 00 00	 call	 ?set_d3d_int_state@@YGXW4_D3DRENDERSTATETYPE@@K@Z ; set_d3d_int_state

; 2685 : 		set_d3d_int_state ( D3DRENDERSTATE_DESTBLEND, D3DBLEND_ONE );

  000a8	6a 02		 push	 2
  000aa	6a 14		 push	 20			; 00000014H
  000ac	e8 00 00 00 00	 call	 ?set_d3d_int_state@@YGXW4_D3DRENDERSTATETYPE@@K@Z ; set_d3d_int_state

; 2686 : 	}
; 2687 : 	else

  000b1	eb 12		 jmp	 SHORT $LN22@draw_3d_tr
$LN21@draw_3d_tr:

; 2688 : 	{
; 2689 : 		set_d3d_int_state ( D3DRENDERSTATE_SRCBLEND, D3DBLEND_SRCALPHA );

  000b3	6a 05		 push	 5
  000b5	6a 13		 push	 19			; 00000013H
  000b7	e8 00 00 00 00	 call	 ?set_d3d_int_state@@YGXW4_D3DRENDERSTATETYPE@@K@Z ; set_d3d_int_state

; 2690 : 		set_d3d_int_state ( D3DRENDERSTATE_DESTBLEND, D3DBLEND_INVSRCALPHA );

  000bc	6a 06		 push	 6
  000be	6a 14		 push	 20			; 00000014H
  000c0	e8 00 00 00 00	 call	 ?set_d3d_int_state@@YGXW4_D3DRENDERSTATETYPE@@K@Z ; set_d3d_int_state
$LN22@draw_3d_tr:

; 2691 : 	}
; 2692 : 
; 2693 : 	if ( current_object_3d_surface->textured )

  000c5	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  000ca	66 8b 08	 mov	 cx, WORD PTR [eax]
  000cd	66 c1 e9 03	 shr	 cx, 3
  000d1	66 83 e1 01	 and	 cx, 1
  000d5	0f b7 d1	 movzx	 edx, cx
  000d8	85 d2		 test	 edx, edx
  000da	0f 84 49 02 00
	00		 je	 $LN23@draw_3d_tr

; 2694 : 	{
; 2695 : 		current_object_3d_texture = system_textures[surface->texture_index];

  000e0	8b 45 08	 mov	 eax, DWORD PTR _surface$[ebp]
  000e3	8b 48 34	 mov	 ecx, DWORD PTR [eax+52]
  000e6	8b 14 8d 00 00
	00 00		 mov	 edx, DWORD PTR ?system_textures@@3PAPAUSCREEN@@A[ecx*4]
  000ed	89 15 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_texture@@3PAUSCREEN@@A, edx ; current_object_3d_texture

; 2696 : 		current_object_3d_texture_u_address = ( current_object_3d_surface->texture_wrapped_u ) ? D3DTADDRESS_WRAP: D3DTADDRESS_CLAMP;

  000f3	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  000f8	66 8b 08	 mov	 cx, WORD PTR [eax]
  000fb	66 c1 e9 0c	 shr	 cx, 12			; 0000000cH
  000ff	66 83 e1 01	 and	 cx, 1
  00103	0f b7 d1	 movzx	 edx, cx
  00106	85 d2		 test	 edx, edx
  00108	74 09		 je	 SHORT $LN39@draw_3d_tr
  0010a	c7 45 b4 01 00
	00 00		 mov	 DWORD PTR tv135[ebp], 1
  00111	eb 07		 jmp	 SHORT $LN40@draw_3d_tr
$LN39@draw_3d_tr:
  00113	c7 45 b4 03 00
	00 00		 mov	 DWORD PTR tv135[ebp], 3
$LN40@draw_3d_tr:
  0011a	8b 45 b4	 mov	 eax, DWORD PTR tv135[ebp]
  0011d	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_texture_u_address@@3HA, eax ; current_object_3d_texture_u_address

; 2697 : 		current_object_3d_texture_v_address = ( current_object_3d_surface->texture_wrapped_v ) ? D3DTADDRESS_WRAP: D3DTADDRESS_CLAMP;

  00122	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  00127	66 8b 08	 mov	 cx, WORD PTR [eax]
  0012a	66 c1 e9 0d	 shr	 cx, 13			; 0000000dH
  0012e	66 83 e1 01	 and	 cx, 1
  00132	0f b7 d1	 movzx	 edx, cx
  00135	85 d2		 test	 edx, edx
  00137	74 09		 je	 SHORT $LN41@draw_3d_tr
  00139	c7 45 b4 01 00
	00 00		 mov	 DWORD PTR tv141[ebp], 1
  00140	eb 07		 jmp	 SHORT $LN42@draw_3d_tr
$LN41@draw_3d_tr:
  00142	c7 45 b4 03 00
	00 00		 mov	 DWORD PTR tv141[ebp], 3
$LN42@draw_3d_tr:
  00149	8b 45 b4	 mov	 eax, DWORD PTR tv141[ebp]
  0014c	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_texture_v_address@@3HA, eax ; current_object_3d_texture_v_address

; 2698 : 		current_object_3d_texture_filter = ( current_object_3d_surface->texture_filtered ) ? D3DTFG_LINEAR : D3DTFG_POINT;

  00151	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  00156	66 8b 08	 mov	 cx, WORD PTR [eax]
  00159	66 c1 e9 0a	 shr	 cx, 10			; 0000000aH
  0015d	66 83 e1 01	 and	 cx, 1
  00161	0f b7 d1	 movzx	 edx, cx
  00164	85 d2		 test	 edx, edx
  00166	74 09		 je	 SHORT $LN43@draw_3d_tr
  00168	c7 45 b4 02 00
	00 00		 mov	 DWORD PTR tv147[ebp], 2
  0016f	eb 07		 jmp	 SHORT $LN44@draw_3d_tr
$LN43@draw_3d_tr:
  00171	c7 45 b4 01 00
	00 00		 mov	 DWORD PTR tv147[ebp], 1
$LN44@draw_3d_tr:
  00178	8b 45 b4	 mov	 eax, DWORD PTR tv147[ebp]
  0017b	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_texture_filter@@3HA, eax ; current_object_3d_texture_filter

; 2699 : 		current_object_3d_texture_mipmap = ( current_object_3d_surface->texture_mipmapped )	? D3DTFP_POINT : D3DTFP_NONE;

  00180	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  00185	66 8b 08	 mov	 cx, WORD PTR [eax]
  00188	66 c1 e9 0b	 shr	 cx, 11			; 0000000bH
  0018c	66 83 e1 01	 and	 cx, 1
  00190	0f b7 d1	 movzx	 edx, cx
  00193	85 d2		 test	 edx, edx
  00195	74 09		 je	 SHORT $LN45@draw_3d_tr
  00197	c7 45 b4 02 00
	00 00		 mov	 DWORD PTR tv153[ebp], 2
  0019e	eb 07		 jmp	 SHORT $LN46@draw_3d_tr
$LN45@draw_3d_tr:
  001a0	c7 45 b4 01 00
	00 00		 mov	 DWORD PTR tv153[ebp], 1
$LN46@draw_3d_tr:
  001a7	8b 45 b4	 mov	 eax, DWORD PTR tv153[ebp]
  001aa	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_texture_mipmap@@3HA, eax ; current_object_3d_texture_mipmap

; 2700 : 
; 2701 : #if ALWAYS_SPECULAR_RENDER
; 2702 : 		set_d3d_int_state ( D3DRENDERSTATE_SPECULARENABLE, TRUE );

  001af	6a 01		 push	 1
  001b1	6a 1d		 push	 29			; 0000001dH
  001b3	e8 00 00 00 00	 call	 ?set_d3d_int_state@@YGXW4_D3DRENDERSTATETYPE@@K@Z ; set_d3d_int_state

; 2703 : #else
; 2704 : 		set_d3d_int_state ( D3DRENDERSTATE_SPECULARENABLE, current_object_3d_specular );
; 2705 : #endif
; 2706 : 		set_d3d_int_state ( D3DRENDERSTATE_SHADEMODE, D3DSHADE_GOURAUD );

  001b8	6a 02		 push	 2
  001ba	6a 09		 push	 9
  001bc	e8 00 00 00 00	 call	 ?set_d3d_int_state@@YGXW4_D3DRENDERSTATETYPE@@K@Z ; set_d3d_int_state

; 2707 : 
; 2708 : 		set_d3d_texture ( 0, current_object_3d_texture );

  001c1	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_texture@@3PAUSCREEN@@A ; current_object_3d_texture
  001c6	50		 push	 eax
  001c7	6a 00		 push	 0
  001c9	e8 00 00 00 00	 call	 ?set_d3d_texture@@YGXHPAUSCREEN@@@Z ; set_d3d_texture

; 2709 : 		set_d3d_texture_stage_state ( 0, D3DTSS_COLOROP, D3DTOP_MODULATE );

  001ce	6a 04		 push	 4
  001d0	6a 01		 push	 1
  001d2	6a 00		 push	 0
  001d4	e8 00 00 00 00	 call	 ?set_d3d_texture_stage_state@@YGXHHH@Z ; set_d3d_texture_stage_state

; 2710 : 
; 2711 : 		set_d3d_texture_stage_state ( 0, D3DTSS_ADDRESSU, current_object_3d_texture_u_address );

  001d9	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_texture_u_address@@3HA ; current_object_3d_texture_u_address
  001de	50		 push	 eax
  001df	6a 0d		 push	 13			; 0000000dH
  001e1	6a 00		 push	 0
  001e3	e8 00 00 00 00	 call	 ?set_d3d_texture_stage_state@@YGXHHH@Z ; set_d3d_texture_stage_state

; 2712 : 		set_d3d_texture_stage_state ( 0, D3DTSS_ADDRESSV, current_object_3d_texture_v_address );

  001e8	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_texture_v_address@@3HA ; current_object_3d_texture_v_address
  001ed	50		 push	 eax
  001ee	6a 0e		 push	 14			; 0000000eH
  001f0	6a 00		 push	 0
  001f2	e8 00 00 00 00	 call	 ?set_d3d_texture_stage_state@@YGXHHH@Z ; set_d3d_texture_stage_state

; 2713 : 		set_d3d_texture_stage_state ( 0, D3DTSS_MAGFILTER, current_object_3d_texture_filter );

  001f7	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_texture_filter@@3HA ; current_object_3d_texture_filter
  001fc	50		 push	 eax
  001fd	6a 10		 push	 16			; 00000010H
  001ff	6a 00		 push	 0
  00201	e8 00 00 00 00	 call	 ?set_d3d_texture_stage_state@@YGXHHH@Z ; set_d3d_texture_stage_state

; 2714 : 		set_d3d_texture_stage_state ( 0, D3DTSS_MINFILTER, current_object_3d_texture_filter );

  00206	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_texture_filter@@3HA ; current_object_3d_texture_filter
  0020b	50		 push	 eax
  0020c	6a 11		 push	 17			; 00000011H
  0020e	6a 00		 push	 0
  00210	e8 00 00 00 00	 call	 ?set_d3d_texture_stage_state@@YGXHHH@Z ; set_d3d_texture_stage_state

; 2715 : 		set_d3d_texture_stage_state ( 0, D3DTSS_MIPFILTER, current_object_3d_texture_mipmap );

  00215	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_texture_mipmap@@3HA ; current_object_3d_texture_mipmap
  0021a	50		 push	 eax
  0021b	6a 12		 push	 18			; 00000012H
  0021d	6a 00		 push	 0
  0021f	e8 00 00 00 00	 call	 ?set_d3d_texture_stage_state@@YGXHHH@Z ; set_d3d_texture_stage_state

; 2716 : 
; 2717 : 		if ( current_object_3d_surface->smoothed )

  00224	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  00229	66 8b 08	 mov	 cx, WORD PTR [eax]
  0022c	66 c1 e9 02	 shr	 cx, 2
  00230	66 83 e1 01	 and	 cx, 1
  00234	0f b7 d1	 movzx	 edx, cx
  00237	85 d2		 test	 edx, edx
  00239	74 50		 je	 SHORT $LN25@draw_3d_tr

; 2718 : 		{
; 2719 : 			for ( faces_left = current_object_3d_surface->number_of_faces; faces_left > 0; faces_left-- )

  0023b	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  00240	0f b7 48 08	 movzx	 ecx, WORD PTR [eax+8]
  00244	89 4d f8	 mov	 DWORD PTR _faces_left$[ebp], ecx
  00247	eb 09		 jmp	 SHORT $LN4@draw_3d_tr
$LN2@draw_3d_tr:
  00249	8b 45 f8	 mov	 eax, DWORD PTR _faces_left$[ebp]
  0024c	83 e8 01	 sub	 eax, 1
  0024f	89 45 f8	 mov	 DWORD PTR _faces_left$[ebp], eax
$LN4@draw_3d_tr:
  00252	83 7d f8 00	 cmp	 DWORD PTR _faces_left$[ebp], 0
  00256	7e 2e		 jle	 SHORT $LN3@draw_3d_tr

; 2720 : 			{
; 2721 : 				wrender_translucent_unclipped_3d_object_gouraud_textured_polygon ( current_object_3d_faces );

  00258	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  0025d	50		 push	 eax
  0025e	e8 00 00 00 00	 call	 ?wrender_translucent_unclipped_3d_object_gouraud_textured_polygon@@YGXPAUOBJECT_3D_FACE@@@Z ; wrender_translucent_unclipped_3d_object_gouraud_textured_polygon

; 2722 : 				current_object_3d_point_list += current_object_3d_faces->number_of_points;

  00263	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  00268	0f b6 08	 movzx	 ecx, BYTE PTR [eax]
  0026b	03 0d 00 00 00
	00		 add	 ecx, DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A ; current_object_3d_point_list
  00271	89 0d 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A, ecx ; current_object_3d_point_list

; 2723 : 				current_object_3d_faces++;

  00277	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  0027c	83 c0 01	 add	 eax, 1
  0027f	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A, eax ; current_object_3d_faces

; 2724 : 			}

  00284	eb c3		 jmp	 SHORT $LN2@draw_3d_tr
$LN3@draw_3d_tr:

; 2725 : 		}
; 2726 : 		else

  00286	e9 99 00 00 00	 jmp	 $LN9@draw_3d_tr
$LN25@draw_3d_tr:

; 2727 : 		{
; 2728 : 			if ( current_object_3d_surface->polygons )

  0028b	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  00290	66 8b 08	 mov	 cx, WORD PTR [eax]
  00293	66 83 e1 01	 and	 cx, 1
  00297	0f b7 d1	 movzx	 edx, cx
  0029a	85 d2		 test	 edx, edx
  0029c	74 5a		 je	 SHORT $LN27@draw_3d_tr

; 2729 : 			{
; 2730 : 				for ( faces_left = current_object_3d_surface->number_of_faces; faces_left > 0; faces_left-- )

  0029e	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  002a3	0f b7 48 08	 movzx	 ecx, WORD PTR [eax+8]
  002a7	89 4d f8	 mov	 DWORD PTR _faces_left$[ebp], ecx
  002aa	eb 09		 jmp	 SHORT $LN7@draw_3d_tr
$LN5@draw_3d_tr:
  002ac	8b 45 f8	 mov	 eax, DWORD PTR _faces_left$[ebp]
  002af	83 e8 01	 sub	 eax, 1
  002b2	89 45 f8	 mov	 DWORD PTR _faces_left$[ebp], eax
$LN7@draw_3d_tr:
  002b5	83 7d f8 00	 cmp	 DWORD PTR _faces_left$[ebp], 0
  002b9	7e 3b		 jle	 SHORT $LN6@draw_3d_tr

; 2731 : 				{
; 2732 : 					wrender_translucent_unclipped_3d_object_textured_polygon ( current_object_3d_faces );

  002bb	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  002c0	50		 push	 eax
  002c1	e8 00 00 00 00	 call	 ?wrender_translucent_unclipped_3d_object_textured_polygon@@YGXPAUOBJECT_3D_FACE@@@Z ; wrender_translucent_unclipped_3d_object_textured_polygon

; 2733 : 					current_object_3d_face_normal_list++;

  002c6	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_face_normal_list@@3PAUPOINT_3D_PLAIN_REFERENCE@@A ; current_object_3d_face_normal_list
  002cb	83 c0 02	 add	 eax, 2
  002ce	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_face_normal_list@@3PAUPOINT_3D_PLAIN_REFERENCE@@A, eax ; current_object_3d_face_normal_list

; 2734 : 					current_object_3d_point_list += current_object_3d_faces->number_of_points;

  002d3	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  002d8	0f b6 08	 movzx	 ecx, BYTE PTR [eax]
  002db	03 0d 00 00 00
	00		 add	 ecx, DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A ; current_object_3d_point_list
  002e1	89 0d 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A, ecx ; current_object_3d_point_list

; 2735 : 					current_object_3d_faces++;

  002e7	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  002ec	83 c0 01	 add	 eax, 1
  002ef	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A, eax ; current_object_3d_faces

; 2736 : 				}

  002f4	eb b6		 jmp	 SHORT $LN5@draw_3d_tr
$LN6@draw_3d_tr:

; 2737 : 			}
; 2738 : 			else

  002f6	eb 2c		 jmp	 SHORT $LN9@draw_3d_tr
$LN27@draw_3d_tr:

; 2739 : 			{
; 2740 : 				for ( faces_left = current_object_3d_surface->number_of_faces; faces_left > 0; faces_left-- )

  002f8	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  002fd	0f b7 48 08	 movzx	 ecx, WORD PTR [eax+8]
  00301	89 4d f8	 mov	 DWORD PTR _faces_left$[ebp], ecx
  00304	eb 09		 jmp	 SHORT $LN10@draw_3d_tr
$LN8@draw_3d_tr:
  00306	8b 45 f8	 mov	 eax, DWORD PTR _faces_left$[ebp]
  00309	83 e8 01	 sub	 eax, 1
  0030c	89 45 f8	 mov	 DWORD PTR _faces_left$[ebp], eax
$LN10@draw_3d_tr:
  0030f	83 7d f8 00	 cmp	 DWORD PTR _faces_left$[ebp], 0
  00313	7e 0f		 jle	 SHORT $LN9@draw_3d_tr

; 2741 : 				{
; 2742 : 					if ( d3d_textured_lines )
; 2743 : 					{
; 2744 : //						wrender_translucent_unclipped_3d_object_textured_line ( current_object_3d_faces );
; 2745 : 					}
; 2746 : 					current_object_3d_point_list += 2;

  00315	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A ; current_object_3d_point_list
  0031a	83 c0 02	 add	 eax, 2
  0031d	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A, eax ; current_object_3d_point_list

; 2747 : 				}

  00322	eb e2		 jmp	 SHORT $LN8@draw_3d_tr
$LN9@draw_3d_tr:

; 2748 : 			}
; 2749 : 		}
; 2750 : 	}
; 2751 : 	else

  00324	e9 1d 01 00 00	 jmp	 $LN18@draw_3d_tr
$LN23@draw_3d_tr:

; 2752 : 	{
; 2753 : #if ALWAYS_SPECULAR_RENDER
; 2754 : 		set_d3d_int_state ( D3DRENDERSTATE_SPECULARENABLE, TRUE );

  00329	6a 01		 push	 1
  0032b	6a 1d		 push	 29			; 0000001dH
  0032d	e8 00 00 00 00	 call	 ?set_d3d_int_state@@YGXW4_D3DRENDERSTATETYPE@@K@Z ; set_d3d_int_state

; 2755 : #else
; 2756 : 		set_d3d_int_state ( D3DRENDERSTATE_SPECULARENABLE, current_object_3d_specular );
; 2757 : #endif
; 2758 : 		set_d3d_int_state ( D3DRENDERSTATE_SHADEMODE, D3DSHADE_GOURAUD );

  00332	6a 02		 push	 2
  00334	6a 09		 push	 9
  00336	e8 00 00 00 00	 call	 ?set_d3d_int_state@@YGXW4_D3DRENDERSTATETYPE@@K@Z ; set_d3d_int_state

; 2759 : 
; 2760 : 		set_d3d_texture_stage_state ( 0, D3DTSS_COLOROP, D3DTOP_DISABLE );

  0033b	6a 01		 push	 1
  0033d	6a 01		 push	 1
  0033f	6a 00		 push	 0
  00341	e8 00 00 00 00	 call	 ?set_d3d_texture_stage_state@@YGXHHH@Z ; set_d3d_texture_stage_state

; 2761 : 
; 2762 : 		if ( current_object_3d_surface->smoothed )

  00346	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  0034b	66 8b 08	 mov	 cx, WORD PTR [eax]
  0034e	66 c1 e9 02	 shr	 cx, 2
  00352	66 83 e1 01	 and	 cx, 1
  00356	0f b7 d1	 movzx	 edx, cx
  00359	85 d2		 test	 edx, edx
  0035b	74 50		 je	 SHORT $LN30@draw_3d_tr

; 2763 : 		{
; 2764 : 			for ( faces_left = current_object_3d_surface->number_of_faces; faces_left > 0; faces_left-- )

  0035d	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  00362	0f b7 48 08	 movzx	 ecx, WORD PTR [eax+8]
  00366	89 4d f8	 mov	 DWORD PTR _faces_left$[ebp], ecx
  00369	eb 09		 jmp	 SHORT $LN13@draw_3d_tr
$LN11@draw_3d_tr:
  0036b	8b 45 f8	 mov	 eax, DWORD PTR _faces_left$[ebp]
  0036e	83 e8 01	 sub	 eax, 1
  00371	89 45 f8	 mov	 DWORD PTR _faces_left$[ebp], eax
$LN13@draw_3d_tr:
  00374	83 7d f8 00	 cmp	 DWORD PTR _faces_left$[ebp], 0
  00378	7e 2e		 jle	 SHORT $LN12@draw_3d_tr

; 2765 : 			{
; 2766 : 				wrender_translucent_unclipped_3d_object_gouraud_polygon ( current_object_3d_faces );

  0037a	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  0037f	50		 push	 eax
  00380	e8 00 00 00 00	 call	 ?wrender_translucent_unclipped_3d_object_gouraud_polygon@@YGXPAUOBJECT_3D_FACE@@@Z ; wrender_translucent_unclipped_3d_object_gouraud_polygon

; 2767 : 				current_object_3d_point_list += current_object_3d_faces->number_of_points;

  00385	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  0038a	0f b6 08	 movzx	 ecx, BYTE PTR [eax]
  0038d	03 0d 00 00 00
	00		 add	 ecx, DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A ; current_object_3d_point_list
  00393	89 0d 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A, ecx ; current_object_3d_point_list

; 2768 : 				current_object_3d_faces++;

  00399	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  0039e	83 c0 01	 add	 eax, 1
  003a1	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A, eax ; current_object_3d_faces

; 2769 : 			}

  003a6	eb c3		 jmp	 SHORT $LN11@draw_3d_tr
$LN12@draw_3d_tr:

; 2770 : 		}
; 2771 : 		else

  003a8	e9 99 00 00 00	 jmp	 $LN18@draw_3d_tr
$LN30@draw_3d_tr:

; 2772 : 		{
; 2773 : 			if ( current_object_3d_surface->polygons )

  003ad	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  003b2	66 8b 08	 mov	 cx, WORD PTR [eax]
  003b5	66 83 e1 01	 and	 cx, 1
  003b9	0f b7 d1	 movzx	 edx, cx
  003bc	85 d2		 test	 edx, edx
  003be	74 5a		 je	 SHORT $LN32@draw_3d_tr

; 2774 : 			{
; 2775 : 				for ( faces_left = current_object_3d_surface->number_of_faces; faces_left > 0; faces_left-- )

  003c0	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  003c5	0f b7 48 08	 movzx	 ecx, WORD PTR [eax+8]
  003c9	89 4d f8	 mov	 DWORD PTR _faces_left$[ebp], ecx
  003cc	eb 09		 jmp	 SHORT $LN16@draw_3d_tr
$LN14@draw_3d_tr:
  003ce	8b 45 f8	 mov	 eax, DWORD PTR _faces_left$[ebp]
  003d1	83 e8 01	 sub	 eax, 1
  003d4	89 45 f8	 mov	 DWORD PTR _faces_left$[ebp], eax
$LN16@draw_3d_tr:
  003d7	83 7d f8 00	 cmp	 DWORD PTR _faces_left$[ebp], 0
  003db	7e 3b		 jle	 SHORT $LN15@draw_3d_tr

; 2776 : 
; 2777 : 				{
; 2778 : 					wrender_translucent_unclipped_3d_object_polygon ( current_object_3d_faces );

  003dd	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  003e2	50		 push	 eax
  003e3	e8 00 00 00 00	 call	 ?wrender_translucent_unclipped_3d_object_polygon@@YGXPAUOBJECT_3D_FACE@@@Z ; wrender_translucent_unclipped_3d_object_polygon

; 2779 : 					current_object_3d_face_normal_list++;

  003e8	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_face_normal_list@@3PAUPOINT_3D_PLAIN_REFERENCE@@A ; current_object_3d_face_normal_list
  003ed	83 c0 02	 add	 eax, 2
  003f0	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_face_normal_list@@3PAUPOINT_3D_PLAIN_REFERENCE@@A, eax ; current_object_3d_face_normal_list

; 2780 : 					current_object_3d_point_list += current_object_3d_faces->number_of_points;

  003f5	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  003fa	0f b6 08	 movzx	 ecx, BYTE PTR [eax]
  003fd	03 0d 00 00 00
	00		 add	 ecx, DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A ; current_object_3d_point_list
  00403	89 0d 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A, ecx ; current_object_3d_point_list

; 2781 : 					current_object_3d_faces++;

  00409	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  0040e	83 c0 01	 add	 eax, 1
  00411	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A, eax ; current_object_3d_faces

; 2782 : 				}

  00416	eb b6		 jmp	 SHORT $LN14@draw_3d_tr
$LN15@draw_3d_tr:

; 2783 : 			}
; 2784 : 			else

  00418	eb 2c		 jmp	 SHORT $LN18@draw_3d_tr
$LN32@draw_3d_tr:

; 2785 : 			{
; 2786 : 				for ( faces_left = current_object_3d_surface->number_of_faces; faces_left > 0; faces_left-- )

  0041a	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  0041f	0f b7 48 08	 movzx	 ecx, WORD PTR [eax+8]
  00423	89 4d f8	 mov	 DWORD PTR _faces_left$[ebp], ecx
  00426	eb 09		 jmp	 SHORT $LN19@draw_3d_tr
$LN17@draw_3d_tr:
  00428	8b 45 f8	 mov	 eax, DWORD PTR _faces_left$[ebp]
  0042b	83 e8 01	 sub	 eax, 1
  0042e	89 45 f8	 mov	 DWORD PTR _faces_left$[ebp], eax
$LN19@draw_3d_tr:
  00431	83 7d f8 00	 cmp	 DWORD PTR _faces_left$[ebp], 0
  00435	7e 0f		 jle	 SHORT $LN18@draw_3d_tr

; 2787 : 				{
; 2788 : //					wrender_translucent_unclipped_3d_object_plain_line ();
; 2789 : 					current_object_3d_point_list += 2;

  00437	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A ; current_object_3d_point_list
  0043c	83 c0 02	 add	 eax, 2
  0043f	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A, eax ; current_object_3d_point_list

; 2790 : 				}

  00444	eb e2		 jmp	 SHORT $LN17@draw_3d_tr
$LN18@draw_3d_tr:

; 2791 : 			}
; 2792 : 		}
; 2793 : 	}
; 2794 : }

  00446	5f		 pop	 edi
  00447	5e		 pop	 esi
  00448	5b		 pop	 ebx
  00449	8b e5		 mov	 esp, ebp
  0044b	5d		 pop	 ebp
  0044c	c2 04 00	 ret	 4
?draw_3d_translucent_surface_unclipped_faces@@YGXPAUTRANSLUCENT_OBJECT_SURFACE@@@Z ENDP ; draw_3d_translucent_surface_unclipped_faces
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\modules\3d\3dobjdrw.c
;	COMDAT ?draw_3d_translucent_surface_clipped_faces@@YGXPAUTRANSLUCENT_OBJECT_SURFACE@@@Z
_TEXT	SEGMENT
tv334 = -80						; size = 4
tv72 = -80						; size = 8
tv167 = -76						; size = 4
tv161 = -76						; size = 4
tv155 = -76						; size = 4
tv149 = -76						; size = 4
tv82 = -76						; size = 4
tv76 = -76						; size = 4
_faces_left$ = -8					; size = 4
_number_of_surface_points$ = -4				; size = 4
_surface$ = 8						; size = 4
?draw_3d_translucent_surface_clipped_faces@@YGXPAUTRANSLUCENT_OBJECT_SURFACE@@@Z PROC ; draw_3d_translucent_surface_clipped_faces, COMDAT

; 2470 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 50	 sub	 esp, 80			; 00000050H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 2471 : 	int
; 2472 : 		number_of_surface_points,
; 2473 : 		faces_left;
; 2474 : 
; 2475 : 	number_of_surface_points = current_object_3d_surface->number_of_points;

  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  0000e	0f b6 48 03	 movzx	 ecx, BYTE PTR [eax+3]
  00012	89 4d fc	 mov	 DWORD PTR _number_of_surface_points$[ebp], ecx

; 2476 : 	if ( number_of_surface_points == 0 )

  00015	83 7d fc 00	 cmp	 DWORD PTR _number_of_surface_points$[ebp], 0
  00019	75 07		 jne	 SHORT $LN20@draw_3d_tr

; 2477 : 	{
; 2478 : 		number_of_surface_points = 256;

  0001b	c7 45 fc 00 01
	00 00		 mov	 DWORD PTR _number_of_surface_points$[ebp], 256 ; 00000100H
$LN20@draw_3d_tr:

; 2479 : 	}
; 2480 : 
; 2481 : 	zbuffer_constant = ( current_object_3d_surface->detail ) ? zbuffer_constant_elevated_bias: zbuffer_constant_normal_bias;

  00022	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  00027	66 8b 08	 mov	 cx, WORD PTR [eax]
  0002a	66 d1 e9	 shr	 cx, 1
  0002d	66 83 e1 01	 and	 cx, 1
  00031	0f b7 d1	 movzx	 edx, cx
  00034	85 d2		 test	 edx, edx
  00036	74 0f		 je	 SHORT $LN55@draw_3d_tr
  00038	f2 0f 10 05 00
	00 00 00	 movsd	 xmm0, QWORD PTR ?zbuffer_constant_elevated_bias@@3NA
  00040	f2 0f 11 45 b0	 movsd	 QWORD PTR tv72[ebp], xmm0
  00045	eb 0d		 jmp	 SHORT $LN56@draw_3d_tr
$LN55@draw_3d_tr:
  00047	f2 0f 10 05 00
	00 00 00	 movsd	 xmm0, QWORD PTR ?zbuffer_constant_normal_bias@@3NA
  0004f	f2 0f 11 45 b0	 movsd	 QWORD PTR tv72[ebp], xmm0
$LN56@draw_3d_tr:
  00054	f2 0f 10 45 b0	 movsd	 xmm0, QWORD PTR tv72[ebp]
  00059	f2 0f 11 05 00
	00 00 00	 movsd	 QWORD PTR ?zbuffer_constant@@3NA, xmm0

; 2482 : 	current_object_3d_specular = ( current_object_3d_surface->specularity )	?	specular_rendering_enabled : FALSE;

  00061	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  00066	0f b6 48 0b	 movzx	 ecx, BYTE PTR [eax+11]
  0006a	85 c9		 test	 ecx, ecx
  0006c	74 0b		 je	 SHORT $LN57@draw_3d_tr
  0006e	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?specular_rendering_enabled@@3HA ; specular_rendering_enabled
  00074	89 55 b4	 mov	 DWORD PTR tv76[ebp], edx
  00077	eb 07		 jmp	 SHORT $LN58@draw_3d_tr
$LN57@draw_3d_tr:
  00079	c7 45 b4 00 00
	00 00		 mov	 DWORD PTR tv76[ebp], 0
$LN58@draw_3d_tr:
  00080	8b 45 b4	 mov	 eax, DWORD PTR tv76[ebp]
  00083	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_specular@@3HA, eax ; current_object_3d_specular

; 2483 : 
; 2484 : 	if ( !command_line_trees_fog || command_line_trees_fog == 2 && (1 / get_delta_time_average() < (20 + 10 * !fog)) ) // clipped trees fog

  00088	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?command_line_trees_fog@@3HA, 0 ; command_line_trees_fog
  0008f	74 47		 je	 SHORT $LN22@draw_3d_tr
  00091	83 3d 00 00 00
	00 02		 cmp	 DWORD PTR ?command_line_trees_fog@@3HA, 2 ; command_line_trees_fog
  00098	75 4b		 jne	 SHORT $LN21@draw_3d_tr
  0009a	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?fog@@3HA, 0	; fog
  000a1	75 09		 jne	 SHORT $LN59@draw_3d_tr
  000a3	c7 45 b4 01 00
	00 00		 mov	 DWORD PTR tv82[ebp], 1
  000aa	eb 07		 jmp	 SHORT $LN60@draw_3d_tr
$LN59@draw_3d_tr:
  000ac	c7 45 b4 00 00
	00 00		 mov	 DWORD PTR tv82[ebp], 0
$LN60@draw_3d_tr:
  000b3	e8 00 00 00 00	 call	 ?get_delta_time_average@@YGMXZ ; get_delta_time_average
  000b8	d9 5d b0	 fstp	 DWORD PTR tv334[ebp]
  000bb	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3f800000
  000c3	f3 0f 5e 45 b0	 divss	 xmm0, DWORD PTR tv334[ebp]
  000c8	6b 45 b4 0a	 imul	 eax, DWORD PTR tv82[ebp], 10
  000cc	83 c0 14	 add	 eax, 20			; 00000014H
  000cf	f3 0f 2a c8	 cvtsi2ss xmm1, eax
  000d3	0f 2f c8	 comiss	 xmm1, xmm0
  000d6	76 0d		 jbe	 SHORT $LN21@draw_3d_tr
$LN22@draw_3d_tr:

; 2485 : 		set_d3d_alpha_fog_zbuffer ( TRUE, FALSE, TRUE, FALSE );

  000d8	6a 00		 push	 0
  000da	6a 01		 push	 1
  000dc	6a 00		 push	 0
  000de	6a 01		 push	 1
  000e0	e8 00 00 00 00	 call	 ?set_d3d_alpha_fog_zbuffer@@YGXHHHH@Z ; set_d3d_alpha_fog_zbuffer
$LN21@draw_3d_tr:

; 2486 : 
; 2487 : 	if ( current_object_3d_surface->additive )

  000e5	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  000ea	66 8b 08	 mov	 cx, WORD PTR [eax]
  000ed	66 c1 e9 05	 shr	 cx, 5
  000f1	66 83 e1 01	 and	 cx, 1
  000f5	0f b7 d1	 movzx	 edx, cx
  000f8	85 d2		 test	 edx, edx
  000fa	74 14		 je	 SHORT $LN23@draw_3d_tr

; 2488 : 	{
; 2489 : 		set_d3d_int_state ( D3DRENDERSTATE_SRCBLEND, D3DBLEND_ONE );

  000fc	6a 02		 push	 2
  000fe	6a 13		 push	 19			; 00000013H
  00100	e8 00 00 00 00	 call	 ?set_d3d_int_state@@YGXW4_D3DRENDERSTATETYPE@@K@Z ; set_d3d_int_state

; 2490 : 		set_d3d_int_state ( D3DRENDERSTATE_DESTBLEND, D3DBLEND_ONE );

  00105	6a 02		 push	 2
  00107	6a 14		 push	 20			; 00000014H
  00109	e8 00 00 00 00	 call	 ?set_d3d_int_state@@YGXW4_D3DRENDERSTATETYPE@@K@Z ; set_d3d_int_state

; 2491 : 	}
; 2492 : 	else

  0010e	eb 12		 jmp	 SHORT $LN24@draw_3d_tr
$LN23@draw_3d_tr:

; 2493 : 	{
; 2494 : 		set_d3d_int_state ( D3DRENDERSTATE_SRCBLEND, D3DBLEND_SRCALPHA );

  00110	6a 05		 push	 5
  00112	6a 13		 push	 19			; 00000013H
  00114	e8 00 00 00 00	 call	 ?set_d3d_int_state@@YGXW4_D3DRENDERSTATETYPE@@K@Z ; set_d3d_int_state

; 2495 : 		set_d3d_int_state ( D3DRENDERSTATE_DESTBLEND, D3DBLEND_INVSRCALPHA );

  00119	6a 06		 push	 6
  0011b	6a 14		 push	 20			; 00000014H
  0011d	e8 00 00 00 00	 call	 ?set_d3d_int_state@@YGXW4_D3DRENDERSTATETYPE@@K@Z ; set_d3d_int_state
$LN24@draw_3d_tr:

; 2496 : 	}
; 2497 : 
; 2498 : 	if ( current_object_3d_surface->textured )

  00122	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  00127	66 8b 08	 mov	 cx, WORD PTR [eax]
  0012a	66 c1 e9 03	 shr	 cx, 3
  0012e	66 83 e1 01	 and	 cx, 1
  00132	0f b7 d1	 movzx	 edx, cx
  00135	85 d2		 test	 edx, edx
  00137	0f 84 f9 02 00
	00		 je	 $LN25@draw_3d_tr

; 2499 : 	{
; 2500 : 		current_object_3d_texture = system_textures[surface->texture_index];

  0013d	8b 45 08	 mov	 eax, DWORD PTR _surface$[ebp]
  00140	8b 48 34	 mov	 ecx, DWORD PTR [eax+52]
  00143	8b 14 8d 00 00
	00 00		 mov	 edx, DWORD PTR ?system_textures@@3PAPAUSCREEN@@A[ecx*4]
  0014a	89 15 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_texture@@3PAUSCREEN@@A, edx ; current_object_3d_texture

; 2501 : 		current_object_3d_texture_u_address = ( current_object_3d_surface->texture_wrapped_u ) ? D3DTADDRESS_WRAP: D3DTADDRESS_CLAMP;

  00150	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  00155	66 8b 08	 mov	 cx, WORD PTR [eax]
  00158	66 c1 e9 0c	 shr	 cx, 12			; 0000000cH
  0015c	66 83 e1 01	 and	 cx, 1
  00160	0f b7 d1	 movzx	 edx, cx
  00163	85 d2		 test	 edx, edx
  00165	74 09		 je	 SHORT $LN61@draw_3d_tr
  00167	c7 45 b4 01 00
	00 00		 mov	 DWORD PTR tv149[ebp], 1
  0016e	eb 07		 jmp	 SHORT $LN62@draw_3d_tr
$LN61@draw_3d_tr:
  00170	c7 45 b4 03 00
	00 00		 mov	 DWORD PTR tv149[ebp], 3
$LN62@draw_3d_tr:
  00177	8b 45 b4	 mov	 eax, DWORD PTR tv149[ebp]
  0017a	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_texture_u_address@@3HA, eax ; current_object_3d_texture_u_address

; 2502 : 		current_object_3d_texture_v_address = ( current_object_3d_surface->texture_wrapped_v ) ? D3DTADDRESS_WRAP: D3DTADDRESS_CLAMP;

  0017f	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  00184	66 8b 08	 mov	 cx, WORD PTR [eax]
  00187	66 c1 e9 0d	 shr	 cx, 13			; 0000000dH
  0018b	66 83 e1 01	 and	 cx, 1
  0018f	0f b7 d1	 movzx	 edx, cx
  00192	85 d2		 test	 edx, edx
  00194	74 09		 je	 SHORT $LN63@draw_3d_tr
  00196	c7 45 b4 01 00
	00 00		 mov	 DWORD PTR tv155[ebp], 1
  0019d	eb 07		 jmp	 SHORT $LN64@draw_3d_tr
$LN63@draw_3d_tr:
  0019f	c7 45 b4 03 00
	00 00		 mov	 DWORD PTR tv155[ebp], 3
$LN64@draw_3d_tr:
  001a6	8b 45 b4	 mov	 eax, DWORD PTR tv155[ebp]
  001a9	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_texture_v_address@@3HA, eax ; current_object_3d_texture_v_address

; 2503 : 		current_object_3d_texture_filter = ( current_object_3d_surface->texture_filtered ) ? D3DTFG_LINEAR : D3DTFG_POINT;

  001ae	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  001b3	66 8b 08	 mov	 cx, WORD PTR [eax]
  001b6	66 c1 e9 0a	 shr	 cx, 10			; 0000000aH
  001ba	66 83 e1 01	 and	 cx, 1
  001be	0f b7 d1	 movzx	 edx, cx
  001c1	85 d2		 test	 edx, edx
  001c3	74 09		 je	 SHORT $LN65@draw_3d_tr
  001c5	c7 45 b4 02 00
	00 00		 mov	 DWORD PTR tv161[ebp], 2
  001cc	eb 07		 jmp	 SHORT $LN66@draw_3d_tr
$LN65@draw_3d_tr:
  001ce	c7 45 b4 01 00
	00 00		 mov	 DWORD PTR tv161[ebp], 1
$LN66@draw_3d_tr:
  001d5	8b 45 b4	 mov	 eax, DWORD PTR tv161[ebp]
  001d8	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_texture_filter@@3HA, eax ; current_object_3d_texture_filter

; 2504 : 		current_object_3d_texture_mipmap = ( current_object_3d_surface->texture_mipmapped )	? D3DTFP_POINT : D3DTFP_NONE;

  001dd	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  001e2	66 8b 08	 mov	 cx, WORD PTR [eax]
  001e5	66 c1 e9 0b	 shr	 cx, 11			; 0000000bH
  001e9	66 83 e1 01	 and	 cx, 1
  001ed	0f b7 d1	 movzx	 edx, cx
  001f0	85 d2		 test	 edx, edx
  001f2	74 09		 je	 SHORT $LN67@draw_3d_tr
  001f4	c7 45 b4 02 00
	00 00		 mov	 DWORD PTR tv167[ebp], 2
  001fb	eb 07		 jmp	 SHORT $LN68@draw_3d_tr
$LN67@draw_3d_tr:
  001fd	c7 45 b4 01 00
	00 00		 mov	 DWORD PTR tv167[ebp], 1
$LN68@draw_3d_tr:
  00204	8b 45 b4	 mov	 eax, DWORD PTR tv167[ebp]
  00207	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_texture_mipmap@@3HA, eax ; current_object_3d_texture_mipmap

; 2505 : 
; 2506 : #if ALWAYS_SPECULAR_RENDER
; 2507 : 		set_d3d_int_state ( D3DRENDERSTATE_SPECULARENABLE, TRUE );

  0020c	6a 01		 push	 1
  0020e	6a 1d		 push	 29			; 0000001dH
  00210	e8 00 00 00 00	 call	 ?set_d3d_int_state@@YGXW4_D3DRENDERSTATETYPE@@K@Z ; set_d3d_int_state

; 2508 : #else
; 2509 : 		set_d3d_int_state ( D3DRENDERSTATE_SPECULARENABLE, current_object_3d_specular );
; 2510 : #endif
; 2511 : 		set_d3d_int_state ( D3DRENDERSTATE_SHADEMODE, D3DSHADE_GOURAUD );

  00215	6a 02		 push	 2
  00217	6a 09		 push	 9
  00219	e8 00 00 00 00	 call	 ?set_d3d_int_state@@YGXW4_D3DRENDERSTATETYPE@@K@Z ; set_d3d_int_state

; 2512 : 
; 2513 : 		set_d3d_texture ( 0, current_object_3d_texture );

  0021e	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_texture@@3PAUSCREEN@@A ; current_object_3d_texture
  00223	50		 push	 eax
  00224	6a 00		 push	 0
  00226	e8 00 00 00 00	 call	 ?set_d3d_texture@@YGXHPAUSCREEN@@@Z ; set_d3d_texture

; 2514 : 		set_d3d_texture_stage_state ( 0, D3DTSS_COLOROP, D3DTOP_MODULATE );

  0022b	6a 04		 push	 4
  0022d	6a 01		 push	 1
  0022f	6a 00		 push	 0
  00231	e8 00 00 00 00	 call	 ?set_d3d_texture_stage_state@@YGXHHH@Z ; set_d3d_texture_stage_state

; 2515 : 
; 2516 : 		set_d3d_texture_stage_state ( 0, D3DTSS_ADDRESSU, current_object_3d_texture_u_address );

  00236	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_texture_u_address@@3HA ; current_object_3d_texture_u_address
  0023b	50		 push	 eax
  0023c	6a 0d		 push	 13			; 0000000dH
  0023e	6a 00		 push	 0
  00240	e8 00 00 00 00	 call	 ?set_d3d_texture_stage_state@@YGXHHH@Z ; set_d3d_texture_stage_state

; 2517 : 		set_d3d_texture_stage_state ( 0, D3DTSS_ADDRESSV, current_object_3d_texture_v_address );

  00245	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_texture_v_address@@3HA ; current_object_3d_texture_v_address
  0024a	50		 push	 eax
  0024b	6a 0e		 push	 14			; 0000000eH
  0024d	6a 00		 push	 0
  0024f	e8 00 00 00 00	 call	 ?set_d3d_texture_stage_state@@YGXHHH@Z ; set_d3d_texture_stage_state

; 2518 : 		set_d3d_texture_stage_state ( 0, D3DTSS_MAGFILTER, current_object_3d_texture_filter );

  00254	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_texture_filter@@3HA ; current_object_3d_texture_filter
  00259	50		 push	 eax
  0025a	6a 10		 push	 16			; 00000010H
  0025c	6a 00		 push	 0
  0025e	e8 00 00 00 00	 call	 ?set_d3d_texture_stage_state@@YGXHHH@Z ; set_d3d_texture_stage_state

; 2519 : 		set_d3d_texture_stage_state ( 0, D3DTSS_MINFILTER, current_object_3d_texture_filter );

  00263	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_texture_filter@@3HA ; current_object_3d_texture_filter
  00268	50		 push	 eax
  00269	6a 11		 push	 17			; 00000011H
  0026b	6a 00		 push	 0
  0026d	e8 00 00 00 00	 call	 ?set_d3d_texture_stage_state@@YGXHHH@Z ; set_d3d_texture_stage_state

; 2520 : 		set_d3d_texture_stage_state ( 0, D3DTSS_MIPFILTER, current_object_3d_texture_mipmap );

  00272	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_texture_mipmap@@3HA ; current_object_3d_texture_mipmap
  00277	50		 push	 eax
  00278	6a 12		 push	 18			; 00000012H
  0027a	6a 00		 push	 0
  0027c	e8 00 00 00 00	 call	 ?set_d3d_texture_stage_state@@YGXHHH@Z ; set_d3d_texture_stage_state

; 2521 : 
; 2522 : 		if ( current_object_3d_surface->smoothed )

  00281	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  00286	66 8b 08	 mov	 cx, WORD PTR [eax]
  00289	66 c1 e9 02	 shr	 cx, 2
  0028d	66 83 e1 01	 and	 cx, 1
  00291	0f b7 d1	 movzx	 edx, cx
  00294	85 d2		 test	 edx, edx
  00296	0f 84 87 00 00
	00		 je	 $LN27@draw_3d_tr

; 2523 : 		{
; 2524 : 			for ( faces_left = current_object_3d_surface->number_of_faces; faces_left > 0; faces_left-- )

  0029c	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  002a1	0f b7 48 08	 movzx	 ecx, WORD PTR [eax+8]
  002a5	89 4d f8	 mov	 DWORD PTR _faces_left$[ebp], ecx
  002a8	eb 09		 jmp	 SHORT $LN4@draw_3d_tr
$LN2@draw_3d_tr:
  002aa	8b 45 f8	 mov	 eax, DWORD PTR _faces_left$[ebp]
  002ad	83 e8 01	 sub	 eax, 1
  002b0	89 45 f8	 mov	 DWORD PTR _faces_left$[ebp], eax
$LN4@draw_3d_tr:
  002b3	83 7d f8 00	 cmp	 DWORD PTR _faces_left$[ebp], 0
  002b7	7e 65		 jle	 SHORT $LN3@draw_3d_tr

; 2525 : 			{
; 2526 : 				if ( !outcode_3d_object_surface_polygon ( current_object_3d_faces->number_of_points, current_object_3d_object_base->points_base, &current_object_3d_outcode ) )

  002b9	68 00 00 00 00	 push	 OFFSET ?current_object_3d_outcode@@3HA ; current_object_3d_outcode
  002be	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_object_base@@3PAUOBJECT_3D_INFO@@A ; current_object_3d_object_base
  002c3	8b 48 24	 mov	 ecx, DWORD PTR [eax+36]
  002c6	51		 push	 ecx
  002c7	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  002cd	0f b6 02	 movzx	 eax, BYTE PTR [edx]
  002d0	50		 push	 eax
  002d1	e8 00 00 00 00	 call	 ?outcode_3d_object_surface_polygon@@YGHHHPAH@Z ; outcode_3d_object_surface_polygon
  002d6	85 c0		 test	 eax, eax
  002d8	75 21		 jne	 SHORT $LN31@draw_3d_tr

; 2527 : 				{
; 2528 : 					if ( current_object_3d_outcode == 0 )

  002da	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?current_object_3d_outcode@@3HA, 0 ; current_object_3d_outcode
  002e1	75 0d		 jne	 SHORT $LN30@draw_3d_tr

; 2529 : 					{
; 2530 : 						wrender_translucent_unclipped_3d_object_gouraud_textured_polygon ( current_object_3d_faces );

  002e3	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  002e8	50		 push	 eax
  002e9	e8 00 00 00 00	 call	 ?wrender_translucent_unclipped_3d_object_gouraud_textured_polygon@@YGXPAUOBJECT_3D_FACE@@@Z ; wrender_translucent_unclipped_3d_object_gouraud_textured_polygon

; 2531 : 					}
; 2532 : 					else

  002ee	eb 0b		 jmp	 SHORT $LN31@draw_3d_tr
$LN30@draw_3d_tr:

; 2533 : 					{
; 2534 : 						wrender_translucent_clipped_3d_object_gouraud_textured_polygon ( current_object_3d_faces );

  002f0	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  002f5	50		 push	 eax
  002f6	e8 00 00 00 00	 call	 ?wrender_translucent_clipped_3d_object_gouraud_textured_polygon@@YGXPAUOBJECT_3D_FACE@@@Z ; wrender_translucent_clipped_3d_object_gouraud_textured_polygon
$LN31@draw_3d_tr:

; 2535 : 					}
; 2536 : 				}
; 2537 : 
; 2538 : 				current_object_3d_point_list += current_object_3d_faces->number_of_points;

  002fb	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  00300	0f b6 08	 movzx	 ecx, BYTE PTR [eax]
  00303	03 0d 00 00 00
	00		 add	 ecx, DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A ; current_object_3d_point_list
  00309	89 0d 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A, ecx ; current_object_3d_point_list

; 2539 : 				current_object_3d_faces++;

  0030f	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  00314	83 c0 01	 add	 eax, 1
  00317	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A, eax ; current_object_3d_faces

; 2540 : 			}

  0031c	eb 8c		 jmp	 SHORT $LN2@draw_3d_tr
$LN3@draw_3d_tr:

; 2541 : 		}
; 2542 : 		else

  0031e	e9 0e 01 00 00	 jmp	 $LN9@draw_3d_tr
$LN27@draw_3d_tr:

; 2543 : 		{
; 2544 : 			if ( current_object_3d_surface->polygons )

  00323	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  00328	66 8b 08	 mov	 cx, WORD PTR [eax]
  0032b	66 83 e1 01	 and	 cx, 1
  0032f	0f b7 d1	 movzx	 edx, cx
  00332	85 d2		 test	 edx, edx
  00334	0f 84 94 00 00
	00		 je	 $LN32@draw_3d_tr

; 2545 : 			{
; 2546 : 				for ( faces_left = current_object_3d_surface->number_of_faces; faces_left > 0; faces_left-- )

  0033a	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  0033f	0f b7 48 08	 movzx	 ecx, WORD PTR [eax+8]
  00343	89 4d f8	 mov	 DWORD PTR _faces_left$[ebp], ecx
  00346	eb 09		 jmp	 SHORT $LN7@draw_3d_tr
$LN5@draw_3d_tr:
  00348	8b 45 f8	 mov	 eax, DWORD PTR _faces_left$[ebp]
  0034b	83 e8 01	 sub	 eax, 1
  0034e	89 45 f8	 mov	 DWORD PTR _faces_left$[ebp], eax
$LN7@draw_3d_tr:
  00351	83 7d f8 00	 cmp	 DWORD PTR _faces_left$[ebp], 0
  00355	7e 75		 jle	 SHORT $LN6@draw_3d_tr

; 2547 : 				{
; 2548 : 					if ( !outcode_3d_object_surface_polygon ( current_object_3d_faces->number_of_points, current_object_3d_object_base->points_base, &current_object_3d_outcode ) )

  00357	68 00 00 00 00	 push	 OFFSET ?current_object_3d_outcode@@3HA ; current_object_3d_outcode
  0035c	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_object_base@@3PAUOBJECT_3D_INFO@@A ; current_object_3d_object_base
  00361	8b 48 24	 mov	 ecx, DWORD PTR [eax+36]
  00364	51		 push	 ecx
  00365	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  0036b	0f b6 02	 movzx	 eax, BYTE PTR [edx]
  0036e	50		 push	 eax
  0036f	e8 00 00 00 00	 call	 ?outcode_3d_object_surface_polygon@@YGHHHPAH@Z ; outcode_3d_object_surface_polygon
  00374	85 c0		 test	 eax, eax
  00376	75 21		 jne	 SHORT $LN36@draw_3d_tr

; 2549 : 					{
; 2550 : 						if ( current_object_3d_outcode == 0 )

  00378	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?current_object_3d_outcode@@3HA, 0 ; current_object_3d_outcode
  0037f	75 0d		 jne	 SHORT $LN35@draw_3d_tr

; 2551 : 						{
; 2552 : 							wrender_translucent_unclipped_3d_object_textured_polygon ( current_object_3d_faces );

  00381	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  00386	50		 push	 eax
  00387	e8 00 00 00 00	 call	 ?wrender_translucent_unclipped_3d_object_textured_polygon@@YGXPAUOBJECT_3D_FACE@@@Z ; wrender_translucent_unclipped_3d_object_textured_polygon

; 2553 : 						}
; 2554 : 						else

  0038c	eb 0b		 jmp	 SHORT $LN36@draw_3d_tr
$LN35@draw_3d_tr:

; 2555 : 						{
; 2556 : 							wrender_translucent_clipped_3d_object_textured_polygon ( current_object_3d_faces );

  0038e	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  00393	50		 push	 eax
  00394	e8 00 00 00 00	 call	 ?wrender_translucent_clipped_3d_object_textured_polygon@@YGXPAUOBJECT_3D_FACE@@@Z ; wrender_translucent_clipped_3d_object_textured_polygon
$LN36@draw_3d_tr:

; 2557 : 						}
; 2558 : 					}
; 2559 : 					current_object_3d_face_normal_list++;

  00399	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_face_normal_list@@3PAUPOINT_3D_PLAIN_REFERENCE@@A ; current_object_3d_face_normal_list
  0039e	83 c0 02	 add	 eax, 2
  003a1	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_face_normal_list@@3PAUPOINT_3D_PLAIN_REFERENCE@@A, eax ; current_object_3d_face_normal_list

; 2560 : 					current_object_3d_point_list += current_object_3d_faces->number_of_points;

  003a6	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  003ab	0f b6 08	 movzx	 ecx, BYTE PTR [eax]
  003ae	03 0d 00 00 00
	00		 add	 ecx, DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A ; current_object_3d_point_list
  003b4	89 0d 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A, ecx ; current_object_3d_point_list

; 2561 : 					current_object_3d_faces++;

  003ba	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  003bf	83 c0 01	 add	 eax, 1
  003c2	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A, eax ; current_object_3d_faces

; 2562 : 				}

  003c7	e9 7c ff ff ff	 jmp	 $LN5@draw_3d_tr
$LN6@draw_3d_tr:

; 2563 : 			}
; 2564 : 			else

  003cc	eb 63		 jmp	 SHORT $LN9@draw_3d_tr
$LN32@draw_3d_tr:

; 2565 : 			{
; 2566 : 				for ( faces_left = current_object_3d_surface->number_of_faces; faces_left > 0; faces_left-- )

  003ce	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  003d3	0f b7 48 08	 movzx	 ecx, WORD PTR [eax+8]
  003d7	89 4d f8	 mov	 DWORD PTR _faces_left$[ebp], ecx
  003da	eb 09		 jmp	 SHORT $LN10@draw_3d_tr
$LN8@draw_3d_tr:
  003dc	8b 45 f8	 mov	 eax, DWORD PTR _faces_left$[ebp]
  003df	83 e8 01	 sub	 eax, 1
  003e2	89 45 f8	 mov	 DWORD PTR _faces_left$[ebp], eax
$LN10@draw_3d_tr:
  003e5	83 7d f8 00	 cmp	 DWORD PTR _faces_left$[ebp], 0
  003e9	7e 46		 jle	 SHORT $LN9@draw_3d_tr

; 2567 : 				{
; 2568 : 					if ( d3d_textured_lines )

  003eb	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?d3d_textured_lines@@3HA, 0 ; d3d_textured_lines
  003f2	74 2e		 je	 SHORT $LN40@draw_3d_tr

; 2569 : 					{
; 2570 : 						if ( !outcode_3d_object_surface_polygon ( 2, current_object_3d_object_base->points_base, &current_object_3d_outcode ) )

  003f4	68 00 00 00 00	 push	 OFFSET ?current_object_3d_outcode@@3HA ; current_object_3d_outcode
  003f9	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_object_base@@3PAUOBJECT_3D_INFO@@A ; current_object_3d_object_base
  003fe	8b 48 24	 mov	 ecx, DWORD PTR [eax+36]
  00401	51		 push	 ecx
  00402	6a 02		 push	 2
  00404	e8 00 00 00 00	 call	 ?outcode_3d_object_surface_polygon@@YGHHHPAH@Z ; outcode_3d_object_surface_polygon
  00409	85 c0		 test	 eax, eax
  0040b	75 15		 jne	 SHORT $LN40@draw_3d_tr

; 2571 : 						{
; 2572 : 							if ( current_object_3d_outcode == 0 )

  0040d	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?current_object_3d_outcode@@3HA, 0 ; current_object_3d_outcode
  00414	75 07		 jne	 SHORT $LN39@draw_3d_tr

; 2573 : 							{
; 2574 : 								wrender_unclipped_3d_object_textured_line ();

  00416	e8 00 00 00 00	 call	 ?wrender_unclipped_3d_object_textured_line@@YGXXZ ; wrender_unclipped_3d_object_textured_line

; 2575 : 							}
; 2576 : 							else

  0041b	eb 05		 jmp	 SHORT $LN40@draw_3d_tr
$LN39@draw_3d_tr:

; 2577 : 							{
; 2578 : 								wrender_clipped_3d_object_textured_line ();

  0041d	e8 00 00 00 00	 call	 ?wrender_clipped_3d_object_textured_line@@YGXXZ ; wrender_clipped_3d_object_textured_line
$LN40@draw_3d_tr:

; 2579 : 							}
; 2580 : 						}
; 2581 : 					}
; 2582 : 					current_object_3d_point_list += 2;

  00422	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A ; current_object_3d_point_list
  00427	83 c0 02	 add	 eax, 2
  0042a	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A, eax ; current_object_3d_point_list

; 2583 : 				}

  0042f	eb ab		 jmp	 SHORT $LN8@draw_3d_tr
$LN9@draw_3d_tr:

; 2584 : 			}
; 2585 : 		}
; 2586 : 	}
; 2587 : 	else

  00431	e9 c4 01 00 00	 jmp	 $LN18@draw_3d_tr
$LN25@draw_3d_tr:

; 2588 : 	{
; 2589 : #if ALWAYS_SPECULAR_RENDER
; 2590 : 		set_d3d_int_state ( D3DRENDERSTATE_SPECULARENABLE, TRUE );

  00436	6a 01		 push	 1
  00438	6a 1d		 push	 29			; 0000001dH
  0043a	e8 00 00 00 00	 call	 ?set_d3d_int_state@@YGXW4_D3DRENDERSTATETYPE@@K@Z ; set_d3d_int_state

; 2591 : #else
; 2592 : 		set_d3d_int_state ( D3DRENDERSTATE_SPECULARENABLE, current_object_3d_specular );
; 2593 : #endif
; 2594 : 		set_d3d_int_state ( D3DRENDERSTATE_SHADEMODE, D3DSHADE_GOURAUD );

  0043f	6a 02		 push	 2
  00441	6a 09		 push	 9
  00443	e8 00 00 00 00	 call	 ?set_d3d_int_state@@YGXW4_D3DRENDERSTATETYPE@@K@Z ; set_d3d_int_state

; 2595 : 
; 2596 : 		set_d3d_texture_stage_state ( 0, D3DTSS_COLOROP, D3DTOP_DISABLE );

  00448	6a 01		 push	 1
  0044a	6a 01		 push	 1
  0044c	6a 00		 push	 0
  0044e	e8 00 00 00 00	 call	 ?set_d3d_texture_stage_state@@YGXHHH@Z ; set_d3d_texture_stage_state

; 2597 : 
; 2598 : 		if ( current_object_3d_surface->smoothed )

  00453	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  00458	66 8b 08	 mov	 cx, WORD PTR [eax]
  0045b	66 c1 e9 02	 shr	 cx, 2
  0045f	66 83 e1 01	 and	 cx, 1
  00463	0f b7 d1	 movzx	 edx, cx
  00466	85 d2		 test	 edx, edx
  00468	0f 84 87 00 00
	00		 je	 $LN41@draw_3d_tr

; 2599 : 		{
; 2600 : 			for ( faces_left = current_object_3d_surface->number_of_faces; faces_left > 0; faces_left-- )

  0046e	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  00473	0f b7 48 08	 movzx	 ecx, WORD PTR [eax+8]
  00477	89 4d f8	 mov	 DWORD PTR _faces_left$[ebp], ecx
  0047a	eb 09		 jmp	 SHORT $LN13@draw_3d_tr
$LN11@draw_3d_tr:
  0047c	8b 45 f8	 mov	 eax, DWORD PTR _faces_left$[ebp]
  0047f	83 e8 01	 sub	 eax, 1
  00482	89 45 f8	 mov	 DWORD PTR _faces_left$[ebp], eax
$LN13@draw_3d_tr:
  00485	83 7d f8 00	 cmp	 DWORD PTR _faces_left$[ebp], 0
  00489	7e 65		 jle	 SHORT $LN12@draw_3d_tr

; 2601 : 			{
; 2602 : 				if ( !outcode_3d_object_surface_polygon ( current_object_3d_faces->number_of_points, current_object_3d_object_base->points_base, &current_object_3d_outcode ) )

  0048b	68 00 00 00 00	 push	 OFFSET ?current_object_3d_outcode@@3HA ; current_object_3d_outcode
  00490	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_object_base@@3PAUOBJECT_3D_INFO@@A ; current_object_3d_object_base
  00495	8b 48 24	 mov	 ecx, DWORD PTR [eax+36]
  00498	51		 push	 ecx
  00499	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  0049f	0f b6 02	 movzx	 eax, BYTE PTR [edx]
  004a2	50		 push	 eax
  004a3	e8 00 00 00 00	 call	 ?outcode_3d_object_surface_polygon@@YGHHHPAH@Z ; outcode_3d_object_surface_polygon
  004a8	85 c0		 test	 eax, eax
  004aa	75 21		 jne	 SHORT $LN45@draw_3d_tr

; 2603 : 				{
; 2604 : 					if ( current_object_3d_outcode == 0 )

  004ac	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?current_object_3d_outcode@@3HA, 0 ; current_object_3d_outcode
  004b3	75 0d		 jne	 SHORT $LN44@draw_3d_tr

; 2605 : 					{
; 2606 : 						wrender_translucent_unclipped_3d_object_gouraud_polygon ( current_object_3d_faces );

  004b5	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  004ba	50		 push	 eax
  004bb	e8 00 00 00 00	 call	 ?wrender_translucent_unclipped_3d_object_gouraud_polygon@@YGXPAUOBJECT_3D_FACE@@@Z ; wrender_translucent_unclipped_3d_object_gouraud_polygon

; 2607 : 					}
; 2608 : 					else

  004c0	eb 0b		 jmp	 SHORT $LN45@draw_3d_tr
$LN44@draw_3d_tr:

; 2609 : 					{
; 2610 : 						wrender_translucent_clipped_3d_object_gouraud_polygon ( current_object_3d_faces );

  004c2	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  004c7	50		 push	 eax
  004c8	e8 00 00 00 00	 call	 ?wrender_translucent_clipped_3d_object_gouraud_polygon@@YGXPAUOBJECT_3D_FACE@@@Z ; wrender_translucent_clipped_3d_object_gouraud_polygon
$LN45@draw_3d_tr:

; 2611 : 					}
; 2612 : 				}
; 2613 : 				current_object_3d_point_list += current_object_3d_faces->number_of_points;

  004cd	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  004d2	0f b6 08	 movzx	 ecx, BYTE PTR [eax]
  004d5	03 0d 00 00 00
	00		 add	 ecx, DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A ; current_object_3d_point_list
  004db	89 0d 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A, ecx ; current_object_3d_point_list

; 2614 : 				current_object_3d_faces++;

  004e1	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  004e6	83 c0 01	 add	 eax, 1
  004e9	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A, eax ; current_object_3d_faces

; 2615 : 			}

  004ee	eb 8c		 jmp	 SHORT $LN11@draw_3d_tr
$LN12@draw_3d_tr:

; 2616 : 		}
; 2617 : 		else

  004f0	e9 05 01 00 00	 jmp	 $LN18@draw_3d_tr
$LN41@draw_3d_tr:

; 2618 : 		{
; 2619 : 			if ( current_object_3d_surface->polygons )

  004f5	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  004fa	66 8b 08	 mov	 cx, WORD PTR [eax]
  004fd	66 83 e1 01	 and	 cx, 1
  00501	0f b7 d1	 movzx	 edx, cx
  00504	85 d2		 test	 edx, edx
  00506	0f 84 94 00 00
	00		 je	 $LN46@draw_3d_tr

; 2620 : 			{
; 2621 : 				for ( faces_left = current_object_3d_surface->number_of_faces; faces_left > 0; faces_left-- )

  0050c	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  00511	0f b7 48 08	 movzx	 ecx, WORD PTR [eax+8]
  00515	89 4d f8	 mov	 DWORD PTR _faces_left$[ebp], ecx
  00518	eb 09		 jmp	 SHORT $LN16@draw_3d_tr
$LN14@draw_3d_tr:
  0051a	8b 45 f8	 mov	 eax, DWORD PTR _faces_left$[ebp]
  0051d	83 e8 01	 sub	 eax, 1
  00520	89 45 f8	 mov	 DWORD PTR _faces_left$[ebp], eax
$LN16@draw_3d_tr:
  00523	83 7d f8 00	 cmp	 DWORD PTR _faces_left$[ebp], 0
  00527	7e 75		 jle	 SHORT $LN15@draw_3d_tr

; 2622 : 
; 2623 : 				{
; 2624 : 					if ( !outcode_3d_object_surface_polygon ( current_object_3d_faces->number_of_points, current_object_3d_object_base->points_base, &current_object_3d_outcode ) )

  00529	68 00 00 00 00	 push	 OFFSET ?current_object_3d_outcode@@3HA ; current_object_3d_outcode
  0052e	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_object_base@@3PAUOBJECT_3D_INFO@@A ; current_object_3d_object_base
  00533	8b 48 24	 mov	 ecx, DWORD PTR [eax+36]
  00536	51		 push	 ecx
  00537	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  0053d	0f b6 02	 movzx	 eax, BYTE PTR [edx]
  00540	50		 push	 eax
  00541	e8 00 00 00 00	 call	 ?outcode_3d_object_surface_polygon@@YGHHHPAH@Z ; outcode_3d_object_surface_polygon
  00546	85 c0		 test	 eax, eax
  00548	75 21		 jne	 SHORT $LN50@draw_3d_tr

; 2625 : 					{
; 2626 : 						if ( current_object_3d_outcode == 0 )

  0054a	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?current_object_3d_outcode@@3HA, 0 ; current_object_3d_outcode
  00551	75 0d		 jne	 SHORT $LN49@draw_3d_tr

; 2627 : 						{
; 2628 : 							wrender_translucent_unclipped_3d_object_polygon ( current_object_3d_faces );

  00553	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  00558	50		 push	 eax
  00559	e8 00 00 00 00	 call	 ?wrender_translucent_unclipped_3d_object_polygon@@YGXPAUOBJECT_3D_FACE@@@Z ; wrender_translucent_unclipped_3d_object_polygon

; 2629 : 						}
; 2630 : 						else

  0055e	eb 0b		 jmp	 SHORT $LN50@draw_3d_tr
$LN49@draw_3d_tr:

; 2631 : 						{
; 2632 : 							wrender_translucent_clipped_3d_object_polygon ( current_object_3d_faces );

  00560	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  00565	50		 push	 eax
  00566	e8 00 00 00 00	 call	 ?wrender_translucent_clipped_3d_object_polygon@@YGXPAUOBJECT_3D_FACE@@@Z ; wrender_translucent_clipped_3d_object_polygon
$LN50@draw_3d_tr:

; 2633 : 						}
; 2634 : 					}
; 2635 : 					current_object_3d_face_normal_list++;

  0056b	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_face_normal_list@@3PAUPOINT_3D_PLAIN_REFERENCE@@A ; current_object_3d_face_normal_list
  00570	83 c0 02	 add	 eax, 2
  00573	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_face_normal_list@@3PAUPOINT_3D_PLAIN_REFERENCE@@A, eax ; current_object_3d_face_normal_list

; 2636 : 					current_object_3d_point_list += current_object_3d_faces->number_of_points;

  00578	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  0057d	0f b6 08	 movzx	 ecx, BYTE PTR [eax]
  00580	03 0d 00 00 00
	00		 add	 ecx, DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A ; current_object_3d_point_list
  00586	89 0d 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A, ecx ; current_object_3d_point_list

; 2637 : 					current_object_3d_faces++;

  0058c	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  00591	83 c0 01	 add	 eax, 1
  00594	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A, eax ; current_object_3d_faces

; 2638 : 				}

  00599	e9 7c ff ff ff	 jmp	 $LN14@draw_3d_tr
$LN15@draw_3d_tr:

; 2639 : 			}
; 2640 : 			else

  0059e	eb 5a		 jmp	 SHORT $LN18@draw_3d_tr
$LN46@draw_3d_tr:

; 2641 : 			{
; 2642 : 				for ( faces_left = current_object_3d_surface->number_of_faces; faces_left > 0; faces_left-- )

  005a0	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  005a5	0f b7 48 08	 movzx	 ecx, WORD PTR [eax+8]
  005a9	89 4d f8	 mov	 DWORD PTR _faces_left$[ebp], ecx
  005ac	eb 09		 jmp	 SHORT $LN19@draw_3d_tr
$LN17@draw_3d_tr:
  005ae	8b 45 f8	 mov	 eax, DWORD PTR _faces_left$[ebp]
  005b1	83 e8 01	 sub	 eax, 1
  005b4	89 45 f8	 mov	 DWORD PTR _faces_left$[ebp], eax
$LN19@draw_3d_tr:
  005b7	83 7d f8 00	 cmp	 DWORD PTR _faces_left$[ebp], 0
  005bb	7e 3d		 jle	 SHORT $LN18@draw_3d_tr

; 2643 : 				{
; 2644 : 					if ( !outcode_3d_object_surface_polygon ( 2, current_object_3d_object_base->points_base, &current_object_3d_outcode ) )

  005bd	68 00 00 00 00	 push	 OFFSET ?current_object_3d_outcode@@3HA ; current_object_3d_outcode
  005c2	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_object_base@@3PAUOBJECT_3D_INFO@@A ; current_object_3d_object_base
  005c7	8b 48 24	 mov	 ecx, DWORD PTR [eax+36]
  005ca	51		 push	 ecx
  005cb	6a 02		 push	 2
  005cd	e8 00 00 00 00	 call	 ?outcode_3d_object_surface_polygon@@YGHHHPAH@Z ; outcode_3d_object_surface_polygon
  005d2	85 c0		 test	 eax, eax
  005d4	75 15		 jne	 SHORT $LN53@draw_3d_tr

; 2645 : 					{
; 2646 : 						if ( current_object_3d_outcode == 0 )

  005d6	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?current_object_3d_outcode@@3HA, 0 ; current_object_3d_outcode
  005dd	75 07		 jne	 SHORT $LN52@draw_3d_tr

; 2647 : 						{
; 2648 : 							wrender_unclipped_3d_object_plain_line ();

  005df	e8 00 00 00 00	 call	 ?wrender_unclipped_3d_object_plain_line@@YGXXZ ; wrender_unclipped_3d_object_plain_line

; 2649 : 						}
; 2650 : 						else

  005e4	eb 05		 jmp	 SHORT $LN53@draw_3d_tr
$LN52@draw_3d_tr:

; 2651 : 						{
; 2652 : 							wrender_clipped_3d_object_plain_line ();

  005e6	e8 00 00 00 00	 call	 ?wrender_clipped_3d_object_plain_line@@YGXXZ ; wrender_clipped_3d_object_plain_line
$LN53@draw_3d_tr:

; 2653 : 						}
; 2654 : 					}
; 2655 : 					current_object_3d_point_list += 2;

  005eb	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A ; current_object_3d_point_list
  005f0	83 c0 02	 add	 eax, 2
  005f3	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A, eax ; current_object_3d_point_list

; 2656 : 				}

  005f8	eb b4		 jmp	 SHORT $LN17@draw_3d_tr
$LN18@draw_3d_tr:

; 2657 : 			}
; 2658 : 		}
; 2659 : 	}
; 2660 : }

  005fa	5f		 pop	 edi
  005fb	5e		 pop	 esi
  005fc	5b		 pop	 ebx
  005fd	8b e5		 mov	 esp, ebp
  005ff	5d		 pop	 ebp
  00600	c2 04 00	 ret	 4
?draw_3d_translucent_surface_clipped_faces@@YGXPAUTRANSLUCENT_OBJECT_SURFACE@@@Z ENDP ; draw_3d_translucent_surface_clipped_faces
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\modules\3d\3dobjdrw.c
;	COMDAT ?add_transparent_surface@@YGXH@Z
_TEXT	SEGMENT
_frame$1 = -8						; size = 4
_faces_left$ = -4					; size = 4
_clipped$ = 8						; size = 4
?add_transparent_surface@@YGXH@Z PROC			; add_transparent_surface, COMDAT

; 2173 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 48	 sub	 esp, 72			; 00000048H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 2174 : 	int
; 2175 : 		faces_left;
; 2176 : 
; 2177 : 	ASSERT ( object_3d_transparent_surface_index < MAXIMUM_TRANLUCENT_SURFACES );

  00009	81 3d 00 00 00
	00 00 10 00 00	 cmp	 DWORD PTR ?object_3d_transparent_surface_index@@3HA, 4096 ; object_3d_transparent_surface_index, 00001000H
  00013	7c 18		 jl	 SHORT $LN5@add_transp
  00015	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??add_transparent_surface@@YGXH@Z@4JA
  0001a	83 c0 04	 add	 eax, 4
  0001d	50		 push	 eax
  0001e	68 00 00 00 00	 push	 OFFSET ??_C@_0DD@BBFCNKFB@c?3?2users?2nhv90?2projects?2eech?2mo@
  00023	68 00 00 00 00	 push	 OFFSET ??_C@_0EC@DPGMODHF@object_3d_transparent_surface_i@
  00028	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN5@add_transp:

; 2178 : 
; 2179 : 	if ( !current_object_3d_surface->polygons )

  0002d	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  00032	66 8b 08	 mov	 cx, WORD PTR [eax]
  00035	66 83 e1 01	 and	 cx, 1
  00039	0f b7 d1	 movzx	 edx, cx
  0003c	85 d2		 test	 edx, edx
  0003e	75 1c		 jne	 SHORT $LN6@add_transp

; 2180 : 	{
; 2181 : 		current_object_3d_point_list += ( 2 * current_object_3d_surface->number_of_faces );

  00040	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  00045	0f b7 48 08	 movzx	 ecx, WORD PTR [eax+8]
  00049	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A ; current_object_3d_point_list
  0004f	8d 04 4a	 lea	 eax, DWORD PTR [edx+ecx*2]
  00052	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A, eax ; current_object_3d_point_list

; 2182 : 	}
; 2183 : 	else

  00057	e9 0e 03 00 00	 jmp	 $LN1@add_transp
$LN6@add_transp:

; 2184 : 	{
; 2185 : 		//
; 2186 : 		// Setup the data in the translucent surface holder
; 2187 : 		//
; 2188 : 
; 2189 : 		memcpy ( object_3d_translucent_surfaces[object_3d_transparent_surface_index].vp.attitude, current_object_3d_object_base->object_vp->attitude, sizeof ( matrix3x3 ) );

  0005c	6a 24		 push	 36			; 00000024H
  0005e	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_object_base@@3PAUOBJECT_3D_INFO@@A ; current_object_3d_object_base
  00063	8b 48 28	 mov	 ecx, DWORD PTR [eax+40]
  00066	83 c1 0c	 add	 ecx, 12			; 0000000cH
  00069	51		 push	 ecx
  0006a	69 15 00 00 00
	00 84 00 00 00	 imul	 edx, DWORD PTR ?object_3d_transparent_surface_index@@3HA, 132 ; object_3d_transparent_surface_index
  00074	81 c2 10 00 00
	00		 add	 edx, OFFSET ?object_3d_translucent_surfaces@@3PAUTRANSLUCENT_OBJECT_SURFACE@@A+16
  0007a	52		 push	 edx
  0007b	e8 00 00 00 00	 call	 _memcpy
  00080	83 c4 0c	 add	 esp, 12			; 0000000cH

; 2190 : 		object_3d_translucent_surfaces[object_3d_transparent_surface_index].vp.position = current_object_3d_object_base->object_vp->position;

  00083	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_object_base@@3PAUOBJECT_3D_INFO@@A ; current_object_3d_object_base
  00088	69 0d 00 00 00
	00 84 00 00 00	 imul	 ecx, DWORD PTR ?object_3d_transparent_surface_index@@3HA, 132 ; object_3d_transparent_surface_index
  00092	81 c1 04 00 00
	00		 add	 ecx, OFFSET ?object_3d_translucent_surfaces@@3PAUTRANSLUCENT_OBJECT_SURFACE@@A+4
  00098	8b 50 28	 mov	 edx, DWORD PTR [eax+40]
  0009b	8b 02		 mov	 eax, DWORD PTR [edx]
  0009d	89 01		 mov	 DWORD PTR [ecx], eax
  0009f	8b 42 04	 mov	 eax, DWORD PTR [edx+4]
  000a2	89 41 04	 mov	 DWORD PTR [ecx+4], eax
  000a5	8b 52 08	 mov	 edx, DWORD PTR [edx+8]
  000a8	89 51 08	 mov	 DWORD PTR [ecx+8], edx

; 2191 : 		object_3d_translucent_surfaces[object_3d_transparent_surface_index].object_view_position = *current_object_3d_relative_position;

  000ab	69 05 00 00 00
	00 84 00 00 00	 imul	 eax, DWORD PTR ?object_3d_transparent_surface_index@@3HA, 132 ; object_3d_transparent_surface_index
  000b5	05 50 00 00 00	 add	 eax, OFFSET ?object_3d_translucent_surfaces@@3PAUTRANSLUCENT_OBJECT_SURFACE@@A+80
  000ba	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_object_3d_relative_position@@3PAUVEC3D@@A ; current_object_3d_relative_position
  000c0	8b 11		 mov	 edx, DWORD PTR [ecx]
  000c2	89 10		 mov	 DWORD PTR [eax], edx
  000c4	8b 51 04	 mov	 edx, DWORD PTR [ecx+4]
  000c7	89 50 04	 mov	 DWORD PTR [eax+4], edx
  000ca	8b 49 08	 mov	 ecx, DWORD PTR [ecx+8]
  000cd	89 48 08	 mov	 DWORD PTR [eax+8], ecx

; 2192 : 		object_3d_translucent_surfaces[object_3d_transparent_surface_index].object_unit_position = *current_object_3d_unit_position;

  000d0	69 05 00 00 00
	00 84 00 00 00	 imul	 eax, DWORD PTR ?object_3d_transparent_surface_index@@3HA, 132 ; object_3d_transparent_surface_index
  000da	05 5c 00 00 00	 add	 eax, OFFSET ?object_3d_translucent_surfaces@@3PAUTRANSLUCENT_OBJECT_SURFACE@@A+92
  000df	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_object_3d_unit_position@@3PAUVEC3D@@A ; current_object_3d_unit_position
  000e5	8b 11		 mov	 edx, DWORD PTR [ecx]
  000e7	89 10		 mov	 DWORD PTR [eax], edx
  000e9	8b 51 04	 mov	 edx, DWORD PTR [ecx+4]
  000ec	89 50 04	 mov	 DWORD PTR [eax+4], edx
  000ef	8b 49 08	 mov	 ecx, DWORD PTR [ecx+8]
  000f2	89 48 08	 mov	 DWORD PTR [eax+8], ecx

; 2193 : 		object_3d_translucent_surfaces[object_3d_transparent_surface_index].dissolve_value = current_object_3d_dissolve_value;

  000f5	0f b6 05 00 00
	00 00		 movzx	 eax, BYTE PTR ?current_object_3d_dissolve_value@@3EA ; current_object_3d_dissolve_value
  000fc	69 0d 00 00 00
	00 84 00 00 00	 imul	 ecx, DWORD PTR ?object_3d_transparent_surface_index@@3HA, 132 ; object_3d_transparent_surface_index
  00106	89 81 3c 00 00
	00		 mov	 DWORD PTR ?object_3d_translucent_surfaces@@3PAUTRANSLUCENT_OBJECT_SURFACE@@A[ecx+60], eax

; 2194 : 		object_3d_translucent_surfaces[object_3d_transparent_surface_index].object_3d_scale = object_3d_scale;

  0010c	69 05 00 00 00
	00 84 00 00 00	 imul	 eax, DWORD PTR ?object_3d_transparent_surface_index@@3HA, 132 ; object_3d_transparent_surface_index
  00116	05 44 00 00 00	 add	 eax, OFFSET ?object_3d_translucent_surfaces@@3PAUTRANSLUCENT_OBJECT_SURFACE@@A+68
  0011b	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?object_3d_scale@@3UVEC3D@@A
  00121	89 08		 mov	 DWORD PTR [eax], ecx
  00123	8b 15 04 00 00
	00		 mov	 edx, DWORD PTR ?object_3d_scale@@3UVEC3D@@A+4
  00129	89 50 04	 mov	 DWORD PTR [eax+4], edx
  0012c	8b 0d 08 00 00
	00		 mov	 ecx, DWORD PTR ?object_3d_scale@@3UVEC3D@@A+8
  00132	89 48 08	 mov	 DWORD PTR [eax+8], ecx

; 2195 : 		object_3d_translucent_surfaces[object_3d_transparent_surface_index].object_index = current_object_3d_object_base->object_number;

  00135	69 05 00 00 00
	00 84 00 00 00	 imul	 eax, DWORD PTR ?object_3d_transparent_surface_index@@3HA, 132 ; object_3d_transparent_surface_index
  0013f	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_object_3d_object_base@@3PAUOBJECT_3D_INFO@@A ; current_object_3d_object_base
  00145	8b 51 20	 mov	 edx, DWORD PTR [ecx+32]
  00148	89 90 38 00 00
	00		 mov	 DWORD PTR ?object_3d_translucent_surfaces@@3PAUTRANSLUCENT_OBJECT_SURFACE@@A[eax+56], edx

; 2196 : 		object_3d_translucent_surfaces[object_3d_transparent_surface_index].surface = current_object_3d_surface;

  0014e	69 05 00 00 00
	00 84 00 00 00	 imul	 eax, DWORD PTR ?object_3d_transparent_surface_index@@3HA, 132 ; object_3d_transparent_surface_index
  00158	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  0015e	89 88 00 00 00
	00		 mov	 DWORD PTR ?object_3d_translucent_surfaces@@3PAUTRANSLUCENT_OBJECT_SURFACE@@A[eax], ecx

; 2197 : 		object_3d_translucent_surfaces[object_3d_transparent_surface_index].faces = current_object_3d_faces;

  00164	69 05 00 00 00
	00 84 00 00 00	 imul	 eax, DWORD PTR ?object_3d_transparent_surface_index@@3HA, 132 ; object_3d_transparent_surface_index
  0016e	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  00174	89 88 68 00 00
	00		 mov	 DWORD PTR ?object_3d_translucent_surfaces@@3PAUTRANSLUCENT_OBJECT_SURFACE@@A[eax+104], ecx

; 2198 : 		object_3d_translucent_surfaces[object_3d_transparent_surface_index].surface_point_list = current_object_3d_surface_point_list;

  0017a	69 05 00 00 00
	00 84 00 00 00	 imul	 eax, DWORD PTR ?object_3d_transparent_surface_index@@3HA, 132 ; object_3d_transparent_surface_index
  00184	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_object_3d_surface_point_list@@3PAUPOINT_3D_PLAIN_REFERENCE@@A ; current_object_3d_surface_point_list
  0018a	89 88 6c 00 00
	00		 mov	 DWORD PTR ?object_3d_translucent_surfaces@@3PAUTRANSLUCENT_OBJECT_SURFACE@@A[eax+108], ecx

; 2199 : 		object_3d_translucent_surfaces[object_3d_transparent_surface_index].surface_point_normal_list = current_object_3d_surface_point_normal_list;

  00190	69 05 00 00 00
	00 84 00 00 00	 imul	 eax, DWORD PTR ?object_3d_transparent_surface_index@@3HA, 132 ; object_3d_transparent_surface_index
  0019a	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_object_3d_surface_point_normal_list@@3PAUPOINT_3D_PLAIN_REFERENCE@@A ; current_object_3d_surface_point_normal_list
  001a0	89 88 70 00 00
	00		 mov	 DWORD PTR ?object_3d_translucent_surfaces@@3PAUTRANSLUCENT_OBJECT_SURFACE@@A[eax+112], ecx

; 2200 : 		object_3d_translucent_surfaces[object_3d_transparent_surface_index].surface_point_texture_list = current_object_3d_surface_point_texture_list;

  001a6	69 05 00 00 00
	00 84 00 00 00	 imul	 eax, DWORD PTR ?object_3d_transparent_surface_index@@3HA, 132 ; object_3d_transparent_surface_index
  001b0	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_object_3d_surface_point_texture_list@@3PAUOBJECT_3D_SHORT_TEXTURED_POINT@@A ; current_object_3d_surface_point_texture_list
  001b6	89 88 74 00 00
	00		 mov	 DWORD PTR ?object_3d_translucent_surfaces@@3PAUTRANSLUCENT_OBJECT_SURFACE@@A[eax+116], ecx

; 2201 : 		object_3d_translucent_surfaces[object_3d_transparent_surface_index].faces_point_list = current_object_3d_point_list;

  001bc	69 05 00 00 00
	00 84 00 00 00	 imul	 eax, DWORD PTR ?object_3d_transparent_surface_index@@3HA, 132 ; object_3d_transparent_surface_index
  001c6	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A ; current_object_3d_point_list
  001cc	89 88 78 00 00
	00		 mov	 DWORD PTR ?object_3d_translucent_surfaces@@3PAUTRANSLUCENT_OBJECT_SURFACE@@A[eax+120], ecx

; 2202 : 		object_3d_translucent_surfaces[object_3d_transparent_surface_index].faces_normal_list = current_object_3d_face_normal_list;

  001d2	69 05 00 00 00
	00 84 00 00 00	 imul	 eax, DWORD PTR ?object_3d_transparent_surface_index@@3HA, 132 ; object_3d_transparent_surface_index
  001dc	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_object_3d_face_normal_list@@3PAUPOINT_3D_PLAIN_REFERENCE@@A ; current_object_3d_face_normal_list
  001e2	89 88 7c 00 00
	00		 mov	 DWORD PTR ?object_3d_translucent_surfaces@@3PAUTRANSLUCENT_OBJECT_SURFACE@@A[eax+124], ecx

; 2203 : 		object_3d_translucent_surfaces[object_3d_transparent_surface_index].clipped = clipped;

  001e8	69 05 00 00 00
	00 84 00 00 00	 imul	 eax, DWORD PTR ?object_3d_transparent_surface_index@@3HA, 132 ; object_3d_transparent_surface_index
  001f2	8b 4d 08	 mov	 ecx, DWORD PTR _clipped$[ebp]
  001f5	83 e1 01	 and	 ecx, 1
  001f8	8b 90 40 00 00
	00		 mov	 edx, DWORD PTR ?object_3d_translucent_surfaces@@3PAUTRANSLUCENT_OBJECT_SURFACE@@A[eax+64]
  001fe	83 e2 fe	 and	 edx, -2			; fffffffeH
  00201	0b d1		 or	 edx, ecx
  00203	69 05 00 00 00
	00 84 00 00 00	 imul	 eax, DWORD PTR ?object_3d_transparent_surface_index@@3HA, 132 ; object_3d_transparent_surface_index
  0020d	89 90 40 00 00
	00		 mov	 DWORD PTR ?object_3d_translucent_surfaces@@3PAUTRANSLUCENT_OBJECT_SURFACE@@A[eax+64], edx

; 2204 : 		object_3d_translucent_surfaces[object_3d_transparent_surface_index].lightmaps_enabled = current_object_3d_light_maps_enabled;

  00213	69 05 00 00 00
	00 84 00 00 00	 imul	 eax, DWORD PTR ?object_3d_transparent_surface_index@@3HA, 132 ; object_3d_transparent_surface_index
  0021d	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_object_3d_light_maps_enabled@@3HA ; current_object_3d_light_maps_enabled
  00223	83 e1 01	 and	 ecx, 1
  00226	d1 e1		 shl	 ecx, 1
  00228	8b 90 40 00 00
	00		 mov	 edx, DWORD PTR ?object_3d_translucent_surfaces@@3PAUTRANSLUCENT_OBJECT_SURFACE@@A[eax+64]
  0022e	83 e2 fd	 and	 edx, -3			; fffffffdH
  00231	0b d1		 or	 edx, ecx
  00233	69 05 00 00 00
	00 84 00 00 00	 imul	 eax, DWORD PTR ?object_3d_transparent_surface_index@@3HA, 132 ; object_3d_transparent_surface_index
  0023d	89 90 40 00 00
	00		 mov	 DWORD PTR ?object_3d_translucent_surfaces@@3PAUTRANSLUCENT_OBJECT_SURFACE@@A[eax+64], edx

; 2205 : 
; 2206 : 		if ( current_object_3d_surface->textured )

  00243	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  00248	66 8b 08	 mov	 cx, WORD PTR [eax]
  0024b	66 c1 e9 03	 shr	 cx, 3
  0024f	66 83 e1 01	 and	 cx, 1
  00253	0f b7 d1	 movzx	 edx, cx
  00256	85 d2		 test	 edx, edx
  00258	74 75		 je	 SHORT $LN8@add_transp

; 2207 : 		{
; 2208 : 			if ( current_object_3d_surface->texture_animation )

  0025a	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  0025f	66 8b 08	 mov	 cx, WORD PTR [eax]
  00262	66 c1 e9 09	 shr	 cx, 9
  00266	66 83 e1 01	 and	 cx, 1
  0026a	0f b7 d1	 movzx	 edx, cx
  0026d	85 d2		 test	 edx, edx
  0026f	74 45		 je	 SHORT $LN9@add_transp

; 2209 : 			{
; 2210 : 				int
; 2211 : 					frame;
; 2212 : 
; 2213 : 				frame = texture_animations[current_object_3d_surface->texture_index].current_frame;

  00271	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  00276	0f b7 48 04	 movzx	 ecx, WORD PTR [eax+4]
  0027a	6b d1 0c	 imul	 edx, ecx, 12
  0027d	a1 00 00 00 00	 mov	 eax, DWORD PTR ?texture_animations@@3PAUTEXTURE_ANIMATION_INFORMATION@@A ; texture_animations
  00282	8b 4c 10 04	 mov	 ecx, DWORD PTR [eax+edx+4]
  00286	89 4d f8	 mov	 DWORD PTR _frame$1[ebp], ecx

; 2214 : 				object_3d_translucent_surfaces[object_3d_transparent_surface_index].texture_index = texture_animations[current_object_3d_surface->texture_index].texture_indices[frame];

  00289	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  0028e	0f b7 48 04	 movzx	 ecx, WORD PTR [eax+4]
  00292	6b d1 0c	 imul	 edx, ecx, 12
  00295	a1 00 00 00 00	 mov	 eax, DWORD PTR ?texture_animations@@3PAUTEXTURE_ANIMATION_INFORMATION@@A ; texture_animations
  0029a	8b 4c 10 08	 mov	 ecx, DWORD PTR [eax+edx+8]
  0029e	69 15 00 00 00
	00 84 00 00 00	 imul	 edx, DWORD PTR ?object_3d_transparent_surface_index@@3HA, 132 ; object_3d_transparent_surface_index
  002a8	8b 45 f8	 mov	 eax, DWORD PTR _frame$1[ebp]
  002ab	8b 0c 81	 mov	 ecx, DWORD PTR [ecx+eax*4]
  002ae	89 8a 34 00 00
	00		 mov	 DWORD PTR ?object_3d_translucent_surfaces@@3PAUTRANSLUCENT_OBJECT_SURFACE@@A[edx+52], ecx

; 2215 : 			}
; 2216 : 			else

  002b4	eb 19		 jmp	 SHORT $LN8@add_transp
$LN9@add_transp:

; 2217 : 			{
; 2218 : 				object_3d_translucent_surfaces[object_3d_transparent_surface_index].texture_index = current_object_3d_surface->texture_index;

  002b6	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  002bb	0f b7 48 04	 movzx	 ecx, WORD PTR [eax+4]
  002bf	69 15 00 00 00
	00 84 00 00 00	 imul	 edx, DWORD PTR ?object_3d_transparent_surface_index@@3HA, 132 ; object_3d_transparent_surface_index
  002c9	89 8a 34 00 00
	00		 mov	 DWORD PTR ?object_3d_translucent_surfaces@@3PAUTRANSLUCENT_OBJECT_SURFACE@@A[edx+52], ecx
$LN8@add_transp:

; 2219 : 			}
; 2220 : 		}
; 2221 : 
; 2222 : 		//
; 2223 : 		// Attach this surface to the list of transparent surfaces
; 2224 : 		//
; 2225 : 
; 2226 : 		object_3d_translucent_surfaces[object_3d_transparent_surface_index].succ = current_object_3d_translucent_surfaces;

  002cf	69 05 00 00 00
	00 84 00 00 00	 imul	 eax, DWORD PTR ?object_3d_transparent_surface_index@@3HA, 132 ; object_3d_transparent_surface_index
  002d9	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_object_3d_translucent_surfaces@@3PAUTRANSLUCENT_OBJECT_SURFACE@@A ; current_object_3d_translucent_surfaces
  002df	89 88 80 00 00
	00		 mov	 DWORD PTR ?object_3d_translucent_surfaces@@3PAUTRANSLUCENT_OBJECT_SURFACE@@A[eax+128], ecx

; 2227 : 
; 2228 : 		current_object_3d_translucent_surfaces = &object_3d_translucent_surfaces[object_3d_transparent_surface_index];

  002e5	69 05 00 00 00
	00 84 00 00 00	 imul	 eax, DWORD PTR ?object_3d_transparent_surface_index@@3HA, 132 ; object_3d_transparent_surface_index
  002ef	05 00 00 00 00	 add	 eax, OFFSET ?object_3d_translucent_surfaces@@3PAUTRANSLUCENT_OBJECT_SURFACE@@A
  002f4	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_translucent_surfaces@@3PAUTRANSLUCENT_OBJECT_SURFACE@@A, eax ; current_object_3d_translucent_surfaces

; 2229 : 
; 2230 : 		object_3d_transparent_surface_index++;

  002f9	a1 00 00 00 00	 mov	 eax, DWORD PTR ?object_3d_transparent_surface_index@@3HA ; object_3d_transparent_surface_index
  002fe	83 c0 01	 add	 eax, 1
  00301	a3 00 00 00 00	 mov	 DWORD PTR ?object_3d_transparent_surface_index@@3HA, eax ; object_3d_transparent_surface_index

; 2231 : 
; 2232 : 		//
; 2233 : 		// Skip over the faces & increment the points ptr along
; 2234 : 		//
; 2235 : 
; 2236 : 		for ( faces_left = current_object_3d_surface->number_of_faces; faces_left > 0; faces_left-- )

  00306	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  0030b	0f b7 48 08	 movzx	 ecx, WORD PTR [eax+8]
  0030f	89 4d fc	 mov	 DWORD PTR _faces_left$[ebp], ecx
  00312	eb 09		 jmp	 SHORT $LN4@add_transp
$LN2@add_transp:
  00314	8b 45 fc	 mov	 eax, DWORD PTR _faces_left$[ebp]
  00317	83 e8 01	 sub	 eax, 1
  0031a	89 45 fc	 mov	 DWORD PTR _faces_left$[ebp], eax
$LN4@add_transp:
  0031d	83 7d fc 00	 cmp	 DWORD PTR _faces_left$[ebp], 0
  00321	7e 47		 jle	 SHORT $LN1@add_transp

; 2237 : 		{
; 2238 : 			if ( !current_object_3d_surface->smoothed )

  00323	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  00328	66 8b 08	 mov	 cx, WORD PTR [eax]
  0032b	66 c1 e9 02	 shr	 cx, 2
  0032f	66 83 e1 01	 and	 cx, 1
  00333	0f b7 d1	 movzx	 edx, cx
  00336	85 d2		 test	 edx, edx
  00338	75 0d		 jne	 SHORT $LN11@add_transp

; 2239 : 			{
; 2240 : 				current_object_3d_face_normal_list++;

  0033a	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_face_normal_list@@3PAUPOINT_3D_PLAIN_REFERENCE@@A ; current_object_3d_face_normal_list
  0033f	83 c0 02	 add	 eax, 2
  00342	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_face_normal_list@@3PAUPOINT_3D_PLAIN_REFERENCE@@A, eax ; current_object_3d_face_normal_list
$LN11@add_transp:

; 2241 : 			}
; 2242 : 			current_object_3d_point_list += current_object_3d_faces->number_of_points;

  00347	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  0034c	0f b6 08	 movzx	 ecx, BYTE PTR [eax]
  0034f	03 0d 00 00 00
	00		 add	 ecx, DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A ; current_object_3d_point_list
  00355	89 0d 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A, ecx ; current_object_3d_point_list

; 2243 : 			current_object_3d_faces++;

  0035b	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  00360	83 c0 01	 add	 eax, 1
  00363	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A, eax ; current_object_3d_faces

; 2244 : 		}

  00368	eb aa		 jmp	 SHORT $LN2@add_transp
$LN1@add_transp:

; 2245 : 	}
; 2246 : }

  0036a	5f		 pop	 edi
  0036b	5e		 pop	 esi
  0036c	5b		 pop	 ebx
  0036d	8b e5		 mov	 esp, ebp
  0036f	5d		 pop	 ebp
  00370	c2 04 00	 ret	 4
?add_transparent_surface@@YGXH@Z ENDP			; add_transparent_surface
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\modules\3d\3dobjdrw.c
;	COMDAT ?draw_sub_object@@YGXPAUOBJECT_3D_SUB_INSTANCE@@PAUOBJECT_3D_DATABASE_ENTRY@@PAUVIEWPOINT@@PAUVEC3D@@H@Z
_TEXT	SEGMENT
_itmp$1 = -292						; size = 4
_object_outcode$2 = -288				; size = 4
_z$3 = -284						; size = 4
_y$4 = -280						; size = 4
_x$5 = -276						; size = 4
_rel_pos$6 = -272					; size = 12
_itmp$7 = -260						; size = 4
_tmp$8 = -256						; size = 4
_vp$ = -252						; size = 48
_light$ = -204						; size = 4
_relative_roll$ = -200					; size = 4
_relative_pitch$ = -196					; size = 4
_relative_heading$ = -192				; size = 4
_old_current_object_3d_relative_position$ = -188	; size = 4
_relative_scale$ = -184					; size = 12
_relative_position$ = -172				; size = 12
_sub_pos$ = -160					; size = 12
_object_unit_pos$ = -148				; size = 12
_temp_scale$ = -136					; size = 12
_scaled_relative_position$ = -124			; size = 12
_object_camera_direction$ = -112			; size = 12
_object_camera_position$ = -100				; size = 12
_temp_matrix$ = -88					; size = 36
_relative_attitude$ = -52				; size = 36
_old_current_object_3d_dissolve_factor$ = -16		; size = 4
_relative_dissolve$ = -12				; size = 4
_object_number$ = -8					; size = 4
_count$ = -4						; size = 4
_obj$ = 8						; size = 4
_scene$ = 12						; size = 4
_parent_viewpoint$ = 16					; size = 4
_position$ = 20						; size = 4
_infrared_override$ = 24				; size = 4
?draw_sub_object@@YGXPAUOBJECT_3D_SUB_INSTANCE@@PAUOBJECT_3D_DATABASE_ENTRY@@PAUVIEWPOINT@@PAUVEC3D@@H@Z PROC ; draw_sub_object, COMDAT

; 617  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec 64 01 00
	00		 sub	 esp, 356		; 00000164H
  00009	53		 push	 ebx
  0000a	56		 push	 esi
  0000b	57		 push	 edi

; 618  : 
; 619  : 	int
; 620  : 		count,
; 621  : 		object_number,
; 622  : 		relative_dissolve;
; 623  : 
; 624  : 	float
; 625  : 		old_current_object_3d_dissolve_factor;
; 626  : 
; 627  : 	matrix3x3
; 628  : 		relative_attitude,
; 629  : 		temp_matrix;
; 630  : 
; 631  : 	vec3d
; 632  : 		object_camera_position,
; 633  : 		object_camera_direction,
; 634  : 		scaled_relative_position,
; 635  : 		temp_scale,
; 636  : 		object_unit_pos,
; 637  : 		sub_pos,
; 638  : 		relative_position,
; 639  : 		relative_scale,
; 640  : 		*old_current_object_3d_relative_position;
; 641  : 
; 642  : 	float
; 643  : 		relative_heading,
; 644  : 		relative_pitch,
; 645  : 		relative_roll;
; 646  : 
; 647  : 	light_3d_source
; 648  : 		*light;
; 649  : 
; 650  : 	viewpoint
; 651  : 		vp;
; 652  : 
; 653  : 	//
; 654  : 	// We no longer need the lights to be used for all the objects, so just reset the stats!
; 655  : 	//
; 656  : 
; 657  : 	object_3d_points_current_base = 0;

  0000c	c7 05 00 00 00
	00 00 00 00 00	 mov	 DWORD PTR ?object_3d_points_current_base@@3HA, 0 ; object_3d_points_current_base

; 658  : 
; 659  : 	object_3d_object_current_base = 0;

  00016	c7 05 00 00 00
	00 00 00 00 00	 mov	 DWORD PTR ?object_3d_object_current_base@@3HA, 0 ; object_3d_object_current_base

; 660  : 
; 661  : 	object_3d_light_3d_current_base = 0;

  00020	c7 05 00 00 00
	00 00 00 00 00	 mov	 DWORD PTR ?object_3d_light_3d_current_base@@3HA, 0 ; object_3d_light_3d_current_base

; 662  : 
; 663  : 	//
; 664  : 	// Get the positions & object number
; 665  : 	//
; 666  : 
; 667  : 	if ( obj )

  0002a	83 7d 08 00	 cmp	 DWORD PTR _obj$[ebp], 0
  0002e	0f 84 87 00 00
	00		 je	 $LN8@draw_sub_o

; 668  : 	{
; 669  : 
; 670  : 		relative_position = obj->relative_position;

  00034	8b 45 08	 mov	 eax, DWORD PTR _obj$[ebp]
  00037	83 c0 0c	 add	 eax, 12			; 0000000cH
  0003a	8b 08		 mov	 ecx, DWORD PTR [eax]
  0003c	89 8d 54 ff ff
	ff		 mov	 DWORD PTR _relative_position$[ebp], ecx
  00042	8b 50 04	 mov	 edx, DWORD PTR [eax+4]
  00045	89 95 58 ff ff
	ff		 mov	 DWORD PTR _relative_position$[ebp+4], edx
  0004b	8b 40 08	 mov	 eax, DWORD PTR [eax+8]
  0004e	89 85 5c ff ff
	ff		 mov	 DWORD PTR _relative_position$[ebp+8], eax

; 671  : 		relative_scale = obj->relative_scale;

  00054	8b 45 08	 mov	 eax, DWORD PTR _obj$[ebp]
  00057	83 c0 24	 add	 eax, 36			; 00000024H
  0005a	8b 08		 mov	 ecx, DWORD PTR [eax]
  0005c	89 8d 48 ff ff
	ff		 mov	 DWORD PTR _relative_scale$[ebp], ecx
  00062	8b 50 04	 mov	 edx, DWORD PTR [eax+4]
  00065	89 95 4c ff ff
	ff		 mov	 DWORD PTR _relative_scale$[ebp+4], edx
  0006b	8b 40 08	 mov	 eax, DWORD PTR [eax+8]
  0006e	89 85 50 ff ff
	ff		 mov	 DWORD PTR _relative_scale$[ebp+8], eax

; 672  : 		relative_heading = obj->relative_heading;

  00074	8b 45 08	 mov	 eax, DWORD PTR _obj$[ebp]
  00077	f3 0f 10 40 18	 movss	 xmm0, DWORD PTR [eax+24]
  0007c	f3 0f 11 85 40
	ff ff ff	 movss	 DWORD PTR _relative_heading$[ebp], xmm0

; 673  : 		relative_pitch = obj->relative_pitch;

  00084	8b 45 08	 mov	 eax, DWORD PTR _obj$[ebp]
  00087	f3 0f 10 40 1c	 movss	 xmm0, DWORD PTR [eax+28]
  0008c	f3 0f 11 85 3c
	ff ff ff	 movss	 DWORD PTR _relative_pitch$[ebp], xmm0

; 674  : 		relative_roll = obj->relative_roll;

  00094	8b 45 08	 mov	 eax, DWORD PTR _obj$[ebp]
  00097	f3 0f 10 40 20	 movss	 xmm0, DWORD PTR [eax+32]
  0009c	f3 0f 11 85 38
	ff ff ff	 movss	 DWORD PTR _relative_roll$[ebp], xmm0

; 675  : 		relative_dissolve = obj->object_dissolve_value;

  000a4	8b 45 08	 mov	 eax, DWORD PTR _obj$[ebp]
  000a7	8b 48 08	 mov	 ecx, DWORD PTR [eax+8]
  000aa	c1 e9 04	 shr	 ecx, 4
  000ad	81 e1 ff 00 00
	00		 and	 ecx, 255		; 000000ffH
  000b3	89 4d f4	 mov	 DWORD PTR _relative_dissolve$[ebp], ecx

; 676  : 	}
; 677  : 	else

  000b6	e9 13 01 00 00	 jmp	 $LN9@draw_sub_o
$LN8@draw_sub_o:

; 678  : 	{
; 679  : 
; 680  : 		relative_position.x = scene->keyframes[0].x;

  000bb	b8 38 00 00 00	 mov	 eax, 56			; 00000038H
  000c0	6b c8 00	 imul	 ecx, eax, 0
  000c3	8b 55 0c	 mov	 edx, DWORD PTR _scene$[ebp]
  000c6	8b 42 0c	 mov	 eax, DWORD PTR [edx+12]
  000c9	f3 0f 10 44 08
	08		 movss	 xmm0, DWORD PTR [eax+ecx+8]
  000cf	f3 0f 11 85 54
	ff ff ff	 movss	 DWORD PTR _relative_position$[ebp], xmm0

; 681  : 		relative_position.y = scene->keyframes[0].y;

  000d7	b8 38 00 00 00	 mov	 eax, 56			; 00000038H
  000dc	6b c8 00	 imul	 ecx, eax, 0
  000df	8b 55 0c	 mov	 edx, DWORD PTR _scene$[ebp]
  000e2	8b 42 0c	 mov	 eax, DWORD PTR [edx+12]
  000e5	f3 0f 10 44 08
	0c		 movss	 xmm0, DWORD PTR [eax+ecx+12]
  000eb	f3 0f 11 85 58
	ff ff ff	 movss	 DWORD PTR _relative_position$[ebp+4], xmm0

; 682  : 		relative_position.z = scene->keyframes[0].z;

  000f3	b8 38 00 00 00	 mov	 eax, 56			; 00000038H
  000f8	6b c8 00	 imul	 ecx, eax, 0
  000fb	8b 55 0c	 mov	 edx, DWORD PTR _scene$[ebp]
  000fe	8b 42 0c	 mov	 eax, DWORD PTR [edx+12]
  00101	f3 0f 10 44 08
	10		 movss	 xmm0, DWORD PTR [eax+ecx+16]
  00107	f3 0f 11 85 5c
	ff ff ff	 movss	 DWORD PTR _relative_position$[ebp+8], xmm0

; 683  : 		relative_scale.x = scene->keyframes[0].scale_x;

  0010f	b8 38 00 00 00	 mov	 eax, 56			; 00000038H
  00114	6b c8 00	 imul	 ecx, eax, 0
  00117	8b 55 0c	 mov	 edx, DWORD PTR _scene$[ebp]
  0011a	8b 42 0c	 mov	 eax, DWORD PTR [edx+12]
  0011d	f3 0f 10 44 08
	20		 movss	 xmm0, DWORD PTR [eax+ecx+32]
  00123	f3 0f 11 85 48
	ff ff ff	 movss	 DWORD PTR _relative_scale$[ebp], xmm0

; 684  : 		relative_scale.y = scene->keyframes[0].scale_y;

  0012b	b8 38 00 00 00	 mov	 eax, 56			; 00000038H
  00130	6b c8 00	 imul	 ecx, eax, 0
  00133	8b 55 0c	 mov	 edx, DWORD PTR _scene$[ebp]
  00136	8b 42 0c	 mov	 eax, DWORD PTR [edx+12]
  00139	f3 0f 10 44 08
	24		 movss	 xmm0, DWORD PTR [eax+ecx+36]
  0013f	f3 0f 11 85 4c
	ff ff ff	 movss	 DWORD PTR _relative_scale$[ebp+4], xmm0

; 685  : 		relative_scale.z = scene->keyframes[0].scale_z;

  00147	b8 38 00 00 00	 mov	 eax, 56			; 00000038H
  0014c	6b c8 00	 imul	 ecx, eax, 0
  0014f	8b 55 0c	 mov	 edx, DWORD PTR _scene$[ebp]
  00152	8b 42 0c	 mov	 eax, DWORD PTR [edx+12]
  00155	f3 0f 10 44 08
	28		 movss	 xmm0, DWORD PTR [eax+ecx+40]
  0015b	f3 0f 11 85 50
	ff ff ff	 movss	 DWORD PTR _relative_scale$[ebp+8], xmm0

; 686  : 		relative_heading = scene->keyframes[0].heading;

  00163	b8 38 00 00 00	 mov	 eax, 56			; 00000038H
  00168	6b c8 00	 imul	 ecx, eax, 0
  0016b	8b 55 0c	 mov	 edx, DWORD PTR _scene$[ebp]
  0016e	8b 42 0c	 mov	 eax, DWORD PTR [edx+12]
  00171	f3 0f 10 44 08
	14		 movss	 xmm0, DWORD PTR [eax+ecx+20]
  00177	f3 0f 11 85 40
	ff ff ff	 movss	 DWORD PTR _relative_heading$[ebp], xmm0

; 687  : 		relative_pitch = scene->keyframes[0].pitch;

  0017f	b8 38 00 00 00	 mov	 eax, 56			; 00000038H
  00184	6b c8 00	 imul	 ecx, eax, 0
  00187	8b 55 0c	 mov	 edx, DWORD PTR _scene$[ebp]
  0018a	8b 42 0c	 mov	 eax, DWORD PTR [edx+12]
  0018d	f3 0f 10 44 08
	18		 movss	 xmm0, DWORD PTR [eax+ecx+24]
  00193	f3 0f 11 85 3c
	ff ff ff	 movss	 DWORD PTR _relative_pitch$[ebp], xmm0

; 688  : 		relative_roll = scene->keyframes[0].roll;

  0019b	b8 38 00 00 00	 mov	 eax, 56			; 00000038H
  001a0	6b c8 00	 imul	 ecx, eax, 0
  001a3	8b 55 0c	 mov	 edx, DWORD PTR _scene$[ebp]
  001a6	8b 42 0c	 mov	 eax, DWORD PTR [edx+12]
  001a9	f3 0f 10 44 08
	1c		 movss	 xmm0, DWORD PTR [eax+ecx+28]
  001af	f3 0f 11 85 38
	ff ff ff	 movss	 DWORD PTR _relative_roll$[ebp], xmm0

; 689  : 		relative_dissolve = scene->object_dissolve * 255.0;

  001b7	8b 45 0c	 mov	 eax, DWORD PTR _scene$[ebp]
  001ba	f3 0f 5a 40 14	 cvtss2sd xmm0, DWORD PTR [eax+20]
  001bf	f2 0f 59 05 00
	00 00 00	 mulsd	 xmm0, QWORD PTR __real@406fe00000000000
  001c7	f2 0f 2c c8	 cvttsd2si ecx, xmm0
  001cb	89 4d f4	 mov	 DWORD PTR _relative_dissolve$[ebp], ecx
$LN9@draw_sub_o:

; 690  : 	}
; 691  : 
; 692  : 	object_number = scene->index;

  001ce	8b 45 0c	 mov	 eax, DWORD PTR _scene$[ebp]
  001d1	0f b7 08	 movzx	 ecx, WORD PTR [eax]
  001d4	89 4d f8	 mov	 DWORD PTR _object_number$[ebp], ecx

; 693  : 
; 694  : 	//
; 695  : 	// Set the object dissolve variables
; 696  : 	//
; 697  : 
; 698  : 	{
; 699  : 
; 700  : 		float
; 701  : 			tmp;
; 702  : 
; 703  : 		int
; 704  : 			itmp;
; 705  : 
; 706  : 		old_current_object_3d_dissolve_factor = current_object_3d_dissolve_factor;

  001d7	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR ?current_object_3d_dissolve_factor@@3MA
  001df	f3 0f 11 45 f0	 movss	 DWORD PTR _old_current_object_3d_dissolve_factor$[ebp], xmm0

; 707  : 
; 708  : 		current_object_3d_dissolve_value = relative_dissolve;	//obj->object_dissolve_value;

  001e4	8a 45 f4	 mov	 al, BYTE PTR _relative_dissolve$[ebp]
  001e7	a2 00 00 00 00	 mov	 BYTE PTR ?current_object_3d_dissolve_value@@3EA, al ; current_object_3d_dissolve_value

; 709  : 
; 710  : 		tmp = current_object_3d_dissolve_value;

  001ec	0f b6 05 00 00
	00 00		 movzx	 eax, BYTE PTR ?current_object_3d_dissolve_value@@3EA ; current_object_3d_dissolve_value
  001f3	f3 0f 2a c0	 cvtsi2ss xmm0, eax
  001f7	f3 0f 11 85 00
	ff ff ff	 movss	 DWORD PTR _tmp$8[ebp], xmm0

; 711  : 		tmp /= 255.0;

  001ff	f3 0f 5a 85 00
	ff ff ff	 cvtss2sd xmm0, DWORD PTR _tmp$8[ebp]
  00207	f2 0f 5e 05 00
	00 00 00	 divsd	 xmm0, QWORD PTR __real@406fe00000000000
  0020f	f2 0f 5a c0	 cvtsd2ss xmm0, xmm0
  00213	f3 0f 11 85 00
	ff ff ff	 movss	 DWORD PTR _tmp$8[ebp], xmm0

; 712  : 
; 713  : 		current_object_3d_dissolve_factor *= tmp;

  0021b	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR ?current_object_3d_dissolve_factor@@3MA
  00223	f3 0f 59 85 00
	ff ff ff	 mulss	 xmm0, DWORD PTR _tmp$8[ebp]
  0022b	f3 0f 11 05 00
	00 00 00	 movss	 DWORD PTR ?current_object_3d_dissolve_factor@@3MA, xmm0

; 714  : 
; 715  : 		asm_convert_float_to_int ( current_object_3d_dissolve_factor * 255.0, &itmp );

  00233	8d 85 fc fe ff
	ff		 lea	 eax, DWORD PTR _itmp$7[ebp]
  00239	50		 push	 eax
  0023a	f3 0f 5a 05 00
	00 00 00	 cvtss2sd xmm0, DWORD PTR ?current_object_3d_dissolve_factor@@3MA
  00242	f2 0f 59 05 00
	00 00 00	 mulsd	 xmm0, QWORD PTR __real@406fe00000000000
  0024a	f2 0f 5a c0	 cvtsd2ss xmm0, xmm0
  0024e	51		 push	 ecx
  0024f	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00254	e8 00 00 00 00	 call	 ?asm_convert_float_to_int@@YGXMPAH@Z ; asm_convert_float_to_int

; 716  : 
; 717  : 		current_object_3d_dissolve_value = itmp;

  00259	8a 85 fc fe ff
	ff		 mov	 al, BYTE PTR _itmp$7[ebp]
  0025f	a2 00 00 00 00	 mov	 BYTE PTR ?current_object_3d_dissolve_value@@3EA, al ; current_object_3d_dissolve_value

; 718  : 	}
; 719  : 
; 720  : 	//
; 721  : 	// Calculate the object's position relative to the viewer.
; 722  : 	//
; 723  : 	// NOTE:
; 724  : 	//		BECAUSE THIS USES THE ROTATION_3D MATRIX, IT TAKES INTO ACCOUNT THE PARENT'S SCALE
; 725  : 	//
; 726  : 
; 727  : 	sub_pos.x = ( ( relative_position.x * rotation_3d[0][0] ) +

  00264	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  00269	6b c8 00	 imul	 ecx, eax, 0
  0026c	ba 04 00 00 00	 mov	 edx, 4
  00271	6b c2 00	 imul	 eax, edx, 0
  00274	f3 0f 10 85 54
	ff ff ff	 movss	 xmm0, DWORD PTR _relative_position$[ebp]
  0027c	f3 0f 59 84 01
	00 00 00 00	 mulss	 xmm0, DWORD PTR ?rotation_3d@@3PAY02MA[ecx+eax]
  00285	b9 0c 00 00 00	 mov	 ecx, 12			; 0000000cH
  0028a	c1 e1 00	 shl	 ecx, 0
  0028d	ba 04 00 00 00	 mov	 edx, 4
  00292	6b c2 00	 imul	 eax, edx, 0
  00295	f3 0f 10 8d 58
	ff ff ff	 movss	 xmm1, DWORD PTR _relative_position$[ebp+4]
  0029d	f3 0f 59 8c 01
	00 00 00 00	 mulss	 xmm1, DWORD PTR ?rotation_3d@@3PAY02MA[ecx+eax]
  002a6	f3 0f 58 c1	 addss	 xmm0, xmm1
  002aa	b9 0c 00 00 00	 mov	 ecx, 12			; 0000000cH
  002af	d1 e1		 shl	 ecx, 1
  002b1	ba 04 00 00 00	 mov	 edx, 4
  002b6	6b c2 00	 imul	 eax, edx, 0
  002b9	f3 0f 10 8d 5c
	ff ff ff	 movss	 xmm1, DWORD PTR _relative_position$[ebp+8]
  002c1	f3 0f 59 8c 01
	00 00 00 00	 mulss	 xmm1, DWORD PTR ?rotation_3d@@3PAY02MA[ecx+eax]
  002ca	f3 0f 58 c1	 addss	 xmm0, xmm1
  002ce	f3 0f 11 85 60
	ff ff ff	 movss	 DWORD PTR _sub_pos$[ebp], xmm0

; 728  : 					  ( relative_position.y * rotation_3d[1][0] ) +
; 729  : 					  ( relative_position.z * rotation_3d[2][0] ) );
; 730  : 	sub_pos.y = ( ( relative_position.x * rotation_3d[0][1] ) +

  002d6	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  002db	6b c8 00	 imul	 ecx, eax, 0
  002de	ba 04 00 00 00	 mov	 edx, 4
  002e3	c1 e2 00	 shl	 edx, 0
  002e6	f3 0f 10 85 54
	ff ff ff	 movss	 xmm0, DWORD PTR _relative_position$[ebp]
  002ee	f3 0f 59 84 11
	00 00 00 00	 mulss	 xmm0, DWORD PTR ?rotation_3d@@3PAY02MA[ecx+edx]
  002f7	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  002fc	c1 e0 00	 shl	 eax, 0
  002ff	b9 04 00 00 00	 mov	 ecx, 4
  00304	c1 e1 00	 shl	 ecx, 0
  00307	f3 0f 10 8d 58
	ff ff ff	 movss	 xmm1, DWORD PTR _relative_position$[ebp+4]
  0030f	f3 0f 59 8c 08
	00 00 00 00	 mulss	 xmm1, DWORD PTR ?rotation_3d@@3PAY02MA[eax+ecx]
  00318	f3 0f 58 c1	 addss	 xmm0, xmm1
  0031c	ba 0c 00 00 00	 mov	 edx, 12			; 0000000cH
  00321	d1 e2		 shl	 edx, 1
  00323	b8 04 00 00 00	 mov	 eax, 4
  00328	c1 e0 00	 shl	 eax, 0
  0032b	f3 0f 10 8d 5c
	ff ff ff	 movss	 xmm1, DWORD PTR _relative_position$[ebp+8]
  00333	f3 0f 59 8c 02
	00 00 00 00	 mulss	 xmm1, DWORD PTR ?rotation_3d@@3PAY02MA[edx+eax]
  0033c	f3 0f 58 c1	 addss	 xmm0, xmm1
  00340	f3 0f 11 85 64
	ff ff ff	 movss	 DWORD PTR _sub_pos$[ebp+4], xmm0

; 731  : 					  ( relative_position.y * rotation_3d[1][1] ) +
; 732  : 					  ( relative_position.z * rotation_3d[2][1] ) );
; 733  : 	sub_pos.z = ( ( relative_position.x * rotation_3d[0][2] ) +

  00348	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  0034d	6b c8 00	 imul	 ecx, eax, 0
  00350	ba 04 00 00 00	 mov	 edx, 4
  00355	d1 e2		 shl	 edx, 1
  00357	f3 0f 10 85 54
	ff ff ff	 movss	 xmm0, DWORD PTR _relative_position$[ebp]
  0035f	f3 0f 59 84 11
	00 00 00 00	 mulss	 xmm0, DWORD PTR ?rotation_3d@@3PAY02MA[ecx+edx]
  00368	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  0036d	c1 e0 00	 shl	 eax, 0
  00370	b9 04 00 00 00	 mov	 ecx, 4
  00375	d1 e1		 shl	 ecx, 1
  00377	f3 0f 10 8d 58
	ff ff ff	 movss	 xmm1, DWORD PTR _relative_position$[ebp+4]
  0037f	f3 0f 59 8c 08
	00 00 00 00	 mulss	 xmm1, DWORD PTR ?rotation_3d@@3PAY02MA[eax+ecx]
  00388	f3 0f 58 c1	 addss	 xmm0, xmm1
  0038c	ba 0c 00 00 00	 mov	 edx, 12			; 0000000cH
  00391	d1 e2		 shl	 edx, 1
  00393	b8 04 00 00 00	 mov	 eax, 4
  00398	d1 e0		 shl	 eax, 1
  0039a	f3 0f 10 8d 5c
	ff ff ff	 movss	 xmm1, DWORD PTR _relative_position$[ebp+8]
  003a2	f3 0f 59 8c 02
	00 00 00 00	 mulss	 xmm1, DWORD PTR ?rotation_3d@@3PAY02MA[edx+eax]
  003ab	f3 0f 58 c1	 addss	 xmm0, xmm1
  003af	f3 0f 11 85 68
	ff ff ff	 movss	 DWORD PTR _sub_pos$[ebp+8], xmm0

; 734  : 					  ( relative_position.y * rotation_3d[1][2] ) +
; 735  : 					  ( relative_position.z * rotation_3d[2][2] ) );
; 736  : 
; 737  : 	sub_pos.x += position->x;

  003b7	8b 45 14	 mov	 eax, DWORD PTR _position$[ebp]
  003ba	f3 0f 10 85 60
	ff ff ff	 movss	 xmm0, DWORD PTR _sub_pos$[ebp]
  003c2	f3 0f 58 00	 addss	 xmm0, DWORD PTR [eax]
  003c6	f3 0f 11 85 60
	ff ff ff	 movss	 DWORD PTR _sub_pos$[ebp], xmm0

; 738  : 	sub_pos.y += position->y;

  003ce	8b 45 14	 mov	 eax, DWORD PTR _position$[ebp]
  003d1	f3 0f 10 85 64
	ff ff ff	 movss	 xmm0, DWORD PTR _sub_pos$[ebp+4]
  003d9	f3 0f 58 40 04	 addss	 xmm0, DWORD PTR [eax+4]
  003de	f3 0f 11 85 64
	ff ff ff	 movss	 DWORD PTR _sub_pos$[ebp+4], xmm0

; 739  : 	sub_pos.z += position->z;

  003e6	8b 45 14	 mov	 eax, DWORD PTR _position$[ebp]
  003e9	f3 0f 10 85 68
	ff ff ff	 movss	 xmm0, DWORD PTR _sub_pos$[ebp+8]
  003f1	f3 0f 58 40 08	 addss	 xmm0, DWORD PTR [eax+8]
  003f6	f3 0f 11 85 68
	ff ff ff	 movss	 DWORD PTR _sub_pos$[ebp+8], xmm0

; 740  : 
; 741  : 	old_current_object_3d_relative_position = current_object_3d_relative_position;

  003fe	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_relative_position@@3PAUVEC3D@@A ; current_object_3d_relative_position
  00403	89 85 44 ff ff
	ff		 mov	 DWORD PTR _old_current_object_3d_relative_position$[ebp], eax

; 742  : 
; 743  : 	current_object_3d_relative_position = &sub_pos;

  00409	8d 85 60 ff ff
	ff		 lea	 eax, DWORD PTR _sub_pos$[ebp]
  0040f	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_relative_position@@3PAUVEC3D@@A, eax ; current_object_3d_relative_position

; 744  : 
; 745  : 	//
; 746  : 	// Calculate the object's real world position
; 747  : 	//
; 748  : 
; 749  : 	scaled_relative_position.x = relative_position.x * object_3d_scale.x;

  00414	f3 0f 10 85 54
	ff ff ff	 movss	 xmm0, DWORD PTR _relative_position$[ebp]
  0041c	f3 0f 59 05 00
	00 00 00	 mulss	 xmm0, DWORD PTR ?object_3d_scale@@3UVEC3D@@A
  00424	f3 0f 11 45 84	 movss	 DWORD PTR _scaled_relative_position$[ebp], xmm0

; 750  : 	scaled_relative_position.y = relative_position.y * object_3d_scale.y;

  00429	f3 0f 10 85 58
	ff ff ff	 movss	 xmm0, DWORD PTR _relative_position$[ebp+4]
  00431	f3 0f 59 05 04
	00 00 00	 mulss	 xmm0, DWORD PTR ?object_3d_scale@@3UVEC3D@@A+4
  00439	f3 0f 11 45 88	 movss	 DWORD PTR _scaled_relative_position$[ebp+4], xmm0

; 751  : 	scaled_relative_position.z = relative_position.z * object_3d_scale.z;

  0043e	f3 0f 10 85 5c
	ff ff ff	 movss	 xmm0, DWORD PTR _relative_position$[ebp+8]
  00446	f3 0f 59 05 08
	00 00 00	 mulss	 xmm0, DWORD PTR ?object_3d_scale@@3UVEC3D@@A+8
  0044e	f3 0f 11 45 8c	 movss	 DWORD PTR _scaled_relative_position$[ebp+8], xmm0

; 752  : 
; 753  : 	vp.x = (	( scaled_relative_position.x * parent_viewpoint->xv.x ) +

  00453	8b 45 10	 mov	 eax, DWORD PTR _parent_viewpoint$[ebp]
  00456	f3 0f 10 45 84	 movss	 xmm0, DWORD PTR _scaled_relative_position$[ebp]
  0045b	f3 0f 59 40 0c	 mulss	 xmm0, DWORD PTR [eax+12]
  00460	8b 4d 10	 mov	 ecx, DWORD PTR _parent_viewpoint$[ebp]
  00463	f3 0f 10 4d 88	 movss	 xmm1, DWORD PTR _scaled_relative_position$[ebp+4]
  00468	f3 0f 59 49 18	 mulss	 xmm1, DWORD PTR [ecx+24]
  0046d	f3 0f 58 c1	 addss	 xmm0, xmm1
  00471	8b 55 10	 mov	 edx, DWORD PTR _parent_viewpoint$[ebp]
  00474	f3 0f 10 4d 8c	 movss	 xmm1, DWORD PTR _scaled_relative_position$[ebp+8]
  00479	f3 0f 59 4a 24	 mulss	 xmm1, DWORD PTR [edx+36]
  0047e	f3 0f 58 c1	 addss	 xmm0, xmm1
  00482	f3 0f 11 85 04
	ff ff ff	 movss	 DWORD PTR _vp$[ebp], xmm0

; 754  : 				( scaled_relative_position.y * parent_viewpoint->yv.x ) +
; 755  : 				( scaled_relative_position.z * parent_viewpoint->zv.x ) );
; 756  : 
; 757  : 	vp.y = (	( scaled_relative_position.x * parent_viewpoint->xv.y ) +

  0048a	8b 45 10	 mov	 eax, DWORD PTR _parent_viewpoint$[ebp]
  0048d	f3 0f 10 45 84	 movss	 xmm0, DWORD PTR _scaled_relative_position$[ebp]
  00492	f3 0f 59 40 10	 mulss	 xmm0, DWORD PTR [eax+16]
  00497	8b 4d 10	 mov	 ecx, DWORD PTR _parent_viewpoint$[ebp]
  0049a	f3 0f 10 4d 88	 movss	 xmm1, DWORD PTR _scaled_relative_position$[ebp+4]
  0049f	f3 0f 59 49 1c	 mulss	 xmm1, DWORD PTR [ecx+28]
  004a4	f3 0f 58 c1	 addss	 xmm0, xmm1
  004a8	8b 55 10	 mov	 edx, DWORD PTR _parent_viewpoint$[ebp]
  004ab	f3 0f 10 4d 8c	 movss	 xmm1, DWORD PTR _scaled_relative_position$[ebp+8]
  004b0	f3 0f 59 4a 28	 mulss	 xmm1, DWORD PTR [edx+40]
  004b5	f3 0f 58 c1	 addss	 xmm0, xmm1
  004b9	f3 0f 11 85 08
	ff ff ff	 movss	 DWORD PTR _vp$[ebp+4], xmm0

; 758  : 				( scaled_relative_position.y * parent_viewpoint->yv.y ) +
; 759  : 				( scaled_relative_position.z * parent_viewpoint->zv.y ) );
; 760  : 
; 761  : 	vp.z = (	( scaled_relative_position.x * parent_viewpoint->xv.z ) +

  004c1	8b 45 10	 mov	 eax, DWORD PTR _parent_viewpoint$[ebp]
  004c4	f3 0f 10 45 84	 movss	 xmm0, DWORD PTR _scaled_relative_position$[ebp]
  004c9	f3 0f 59 40 14	 mulss	 xmm0, DWORD PTR [eax+20]
  004ce	8b 4d 10	 mov	 ecx, DWORD PTR _parent_viewpoint$[ebp]
  004d1	f3 0f 10 4d 88	 movss	 xmm1, DWORD PTR _scaled_relative_position$[ebp+4]
  004d6	f3 0f 59 49 20	 mulss	 xmm1, DWORD PTR [ecx+32]
  004db	f3 0f 58 c1	 addss	 xmm0, xmm1
  004df	8b 55 10	 mov	 edx, DWORD PTR _parent_viewpoint$[ebp]
  004e2	f3 0f 10 4d 8c	 movss	 xmm1, DWORD PTR _scaled_relative_position$[ebp+8]
  004e7	f3 0f 59 4a 2c	 mulss	 xmm1, DWORD PTR [edx+44]
  004ec	f3 0f 58 c1	 addss	 xmm0, xmm1
  004f0	f3 0f 11 85 0c
	ff ff ff	 movss	 DWORD PTR _vp$[ebp+8], xmm0

; 762  : 				( scaled_relative_position.y * parent_viewpoint->yv.z ) +
; 763  : 				( scaled_relative_position.z * parent_viewpoint->zv.z ) );
; 764  : 
; 765  : 	vp.x += parent_viewpoint->x;

  004f8	8b 45 10	 mov	 eax, DWORD PTR _parent_viewpoint$[ebp]
  004fb	f3 0f 10 85 04
	ff ff ff	 movss	 xmm0, DWORD PTR _vp$[ebp]
  00503	f3 0f 58 00	 addss	 xmm0, DWORD PTR [eax]
  00507	f3 0f 11 85 04
	ff ff ff	 movss	 DWORD PTR _vp$[ebp], xmm0

; 766  : 	vp.y += parent_viewpoint->y;

  0050f	8b 45 10	 mov	 eax, DWORD PTR _parent_viewpoint$[ebp]
  00512	f3 0f 10 85 08
	ff ff ff	 movss	 xmm0, DWORD PTR _vp$[ebp+4]
  0051a	f3 0f 58 40 04	 addss	 xmm0, DWORD PTR [eax+4]
  0051f	f3 0f 11 85 08
	ff ff ff	 movss	 DWORD PTR _vp$[ebp+4], xmm0

; 767  : 	vp.z += parent_viewpoint->z;

  00527	8b 45 10	 mov	 eax, DWORD PTR _parent_viewpoint$[ebp]
  0052a	f3 0f 10 85 0c
	ff ff ff	 movss	 xmm0, DWORD PTR _vp$[ebp+8]
  00532	f3 0f 58 40 08	 addss	 xmm0, DWORD PTR [eax+8]
  00537	f3 0f 11 85 0c
	ff ff ff	 movss	 DWORD PTR _vp$[ebp+8], xmm0

; 768  : 
; 769  : 	//
; 770  : 	//	Store the rotation matrix, so when we go back to the parent, other sub objects can inherit the matrix safely
; 771  : 	//
; 772  : 
; 773  : 	memcpy ( temp_matrix, rotation_3d, sizeof ( matrix3x3 ) );

  0053f	6a 24		 push	 36			; 00000024H
  00541	68 00 00 00 00	 push	 OFFSET ?rotation_3d@@3PAY02MA ; rotation_3d
  00546	8d 45 a8	 lea	 eax, DWORD PTR _temp_matrix$[ebp]
  00549	50		 push	 eax
  0054a	e8 00 00 00 00	 call	 _memcpy
  0054f	83 c4 0c	 add	 esp, 12			; 0000000cH

; 774  : 
; 775  : 	//
; 776  : 	// Store the scaling before we trash it
; 777  : 	//
; 778  : 
; 779  : 	memcpy ( &temp_scale, &object_3d_scale, sizeof ( vec3d ) );

  00552	6a 0c		 push	 12			; 0000000cH
  00554	68 00 00 00 00	 push	 OFFSET ?object_3d_scale@@3UVEC3D@@A ; object_3d_scale
  00559	8d 85 78 ff ff
	ff		 lea	 eax, DWORD PTR _temp_scale$[ebp]
  0055f	50		 push	 eax
  00560	e8 00 00 00 00	 call	 _memcpy
  00565	83 c4 0c	 add	 esp, 12			; 0000000cH

; 780  : 
; 781  : 	//
; 782  : 	// Alter the scaling according to this object's scale
; 783  : 	//
; 784  : 
; 785  : 	object_3d_scale.x *= relative_scale.x;

  00568	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR ?object_3d_scale@@3UVEC3D@@A
  00570	f3 0f 59 85 48
	ff ff ff	 mulss	 xmm0, DWORD PTR _relative_scale$[ebp]
  00578	f3 0f 11 05 00
	00 00 00	 movss	 DWORD PTR ?object_3d_scale@@3UVEC3D@@A, xmm0

; 786  : 	object_3d_scale.y *= relative_scale.y;

  00580	f3 0f 10 05 04
	00 00 00	 movss	 xmm0, DWORD PTR ?object_3d_scale@@3UVEC3D@@A+4
  00588	f3 0f 59 85 4c
	ff ff ff	 mulss	 xmm0, DWORD PTR _relative_scale$[ebp+4]
  00590	f3 0f 11 05 04
	00 00 00	 movss	 DWORD PTR ?object_3d_scale@@3UVEC3D@@A+4, xmm0

; 787  : 	object_3d_scale.z *= relative_scale.z;

  00598	f3 0f 10 05 08
	00 00 00	 movss	 xmm0, DWORD PTR ?object_3d_scale@@3UVEC3D@@A+8
  005a0	f3 0f 59 85 50
	ff ff ff	 mulss	 xmm0, DWORD PTR _relative_scale$[ebp+8]
  005a8	f3 0f 11 05 08
	00 00 00	 movss	 DWORD PTR ?object_3d_scale@@3UVEC3D@@A+8, xmm0

; 788  : 
; 789  : 	//
; 790  : 	// Compute the sub object's relative attitude matrix
; 791  : 	//
; 792  : 
; 793  : 	get_3d_transformation_matrix ( relative_attitude, relative_heading, -relative_pitch, -relative_roll );

  005b0	f3 0f 10 85 38
	ff ff ff	 movss	 xmm0, DWORD PTR _relative_roll$[ebp]
  005b8	0f 57 05 00 00
	00 00		 xorps	 xmm0, DWORD PTR __xmm@80000000800000008000000080000000
  005bf	51		 push	 ecx
  005c0	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  005c5	f3 0f 10 85 3c
	ff ff ff	 movss	 xmm0, DWORD PTR _relative_pitch$[ebp]
  005cd	0f 57 05 00 00
	00 00		 xorps	 xmm0, DWORD PTR __xmm@80000000800000008000000080000000
  005d4	51		 push	 ecx
  005d5	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  005da	51		 push	 ecx
  005db	f3 0f 10 85 40
	ff ff ff	 movss	 xmm0, DWORD PTR _relative_heading$[ebp]
  005e3	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  005e8	8d 45 cc	 lea	 eax, DWORD PTR _relative_attitude$[ebp]
  005eb	50		 push	 eax
  005ec	e8 00 00 00 00	 call	 ?get_3d_transformation_matrix@@YGXQAY02MMMM@Z ; get_3d_transformation_matrix

; 794  : 
; 795  : 	//
; 796  : 	// Calculate the sub object's rotation matrix, to transform its 3d points relative to the parent object.
; 797  : 	//
; 798  : 
; 799  : 	vp.xv.x = ( ( relative_attitude[0][0] * parent_viewpoint->xv.x ) + ( relative_attitude[0][1] * parent_viewpoint->yv.x ) + ( relative_attitude[0][2] * parent_viewpoint->zv.x ) );

  005f1	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  005f6	6b c8 00	 imul	 ecx, eax, 0
  005f9	8d 54 0d cc	 lea	 edx, DWORD PTR _relative_attitude$[ebp+ecx]
  005fd	b8 04 00 00 00	 mov	 eax, 4
  00602	6b c8 00	 imul	 ecx, eax, 0
  00605	8b 45 10	 mov	 eax, DWORD PTR _parent_viewpoint$[ebp]
  00608	f3 0f 10 04 0a	 movss	 xmm0, DWORD PTR [edx+ecx]
  0060d	f3 0f 59 40 0c	 mulss	 xmm0, DWORD PTR [eax+12]
  00612	b9 0c 00 00 00	 mov	 ecx, 12			; 0000000cH
  00617	6b d1 00	 imul	 edx, ecx, 0
  0061a	8d 44 15 cc	 lea	 eax, DWORD PTR _relative_attitude$[ebp+edx]
  0061e	b9 04 00 00 00	 mov	 ecx, 4
  00623	c1 e1 00	 shl	 ecx, 0
  00626	8b 55 10	 mov	 edx, DWORD PTR _parent_viewpoint$[ebp]
  00629	f3 0f 10 0c 08	 movss	 xmm1, DWORD PTR [eax+ecx]
  0062e	f3 0f 59 4a 18	 mulss	 xmm1, DWORD PTR [edx+24]
  00633	f3 0f 58 c1	 addss	 xmm0, xmm1
  00637	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  0063c	6b c8 00	 imul	 ecx, eax, 0
  0063f	8d 54 0d cc	 lea	 edx, DWORD PTR _relative_attitude$[ebp+ecx]
  00643	b8 04 00 00 00	 mov	 eax, 4
  00648	d1 e0		 shl	 eax, 1
  0064a	8b 4d 10	 mov	 ecx, DWORD PTR _parent_viewpoint$[ebp]
  0064d	f3 0f 10 0c 02	 movss	 xmm1, DWORD PTR [edx+eax]
  00652	f3 0f 59 49 24	 mulss	 xmm1, DWORD PTR [ecx+36]
  00657	f3 0f 58 c1	 addss	 xmm0, xmm1
  0065b	f3 0f 11 85 10
	ff ff ff	 movss	 DWORD PTR _vp$[ebp+12], xmm0

; 800  : 	vp.xv.y = ( ( relative_attitude[0][0] * parent_viewpoint->xv.y ) + ( relative_attitude[0][1] * parent_viewpoint->yv.y ) + ( relative_attitude[0][2] * parent_viewpoint->zv.y ) );

  00663	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  00668	6b c8 00	 imul	 ecx, eax, 0
  0066b	8d 54 0d cc	 lea	 edx, DWORD PTR _relative_attitude$[ebp+ecx]
  0066f	b8 04 00 00 00	 mov	 eax, 4
  00674	6b c8 00	 imul	 ecx, eax, 0
  00677	8b 45 10	 mov	 eax, DWORD PTR _parent_viewpoint$[ebp]
  0067a	f3 0f 10 04 0a	 movss	 xmm0, DWORD PTR [edx+ecx]
  0067f	f3 0f 59 40 10	 mulss	 xmm0, DWORD PTR [eax+16]
  00684	b9 0c 00 00 00	 mov	 ecx, 12			; 0000000cH
  00689	6b d1 00	 imul	 edx, ecx, 0
  0068c	8d 44 15 cc	 lea	 eax, DWORD PTR _relative_attitude$[ebp+edx]
  00690	b9 04 00 00 00	 mov	 ecx, 4
  00695	c1 e1 00	 shl	 ecx, 0
  00698	8b 55 10	 mov	 edx, DWORD PTR _parent_viewpoint$[ebp]
  0069b	f3 0f 10 0c 08	 movss	 xmm1, DWORD PTR [eax+ecx]
  006a0	f3 0f 59 4a 1c	 mulss	 xmm1, DWORD PTR [edx+28]
  006a5	f3 0f 58 c1	 addss	 xmm0, xmm1
  006a9	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  006ae	6b c8 00	 imul	 ecx, eax, 0
  006b1	8d 54 0d cc	 lea	 edx, DWORD PTR _relative_attitude$[ebp+ecx]
  006b5	b8 04 00 00 00	 mov	 eax, 4
  006ba	d1 e0		 shl	 eax, 1
  006bc	8b 4d 10	 mov	 ecx, DWORD PTR _parent_viewpoint$[ebp]
  006bf	f3 0f 10 0c 02	 movss	 xmm1, DWORD PTR [edx+eax]
  006c4	f3 0f 59 49 28	 mulss	 xmm1, DWORD PTR [ecx+40]
  006c9	f3 0f 58 c1	 addss	 xmm0, xmm1
  006cd	f3 0f 11 85 14
	ff ff ff	 movss	 DWORD PTR _vp$[ebp+16], xmm0

; 801  : 	vp.xv.z = ( ( relative_attitude[0][0] * parent_viewpoint->xv.z ) + ( relative_attitude[0][1] * parent_viewpoint->yv.z ) + ( relative_attitude[0][2] * parent_viewpoint->zv.z ) );

  006d5	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  006da	6b c8 00	 imul	 ecx, eax, 0
  006dd	8d 54 0d cc	 lea	 edx, DWORD PTR _relative_attitude$[ebp+ecx]
  006e1	b8 04 00 00 00	 mov	 eax, 4
  006e6	6b c8 00	 imul	 ecx, eax, 0
  006e9	8b 45 10	 mov	 eax, DWORD PTR _parent_viewpoint$[ebp]
  006ec	f3 0f 10 04 0a	 movss	 xmm0, DWORD PTR [edx+ecx]
  006f1	f3 0f 59 40 14	 mulss	 xmm0, DWORD PTR [eax+20]
  006f6	b9 0c 00 00 00	 mov	 ecx, 12			; 0000000cH
  006fb	6b d1 00	 imul	 edx, ecx, 0
  006fe	8d 44 15 cc	 lea	 eax, DWORD PTR _relative_attitude$[ebp+edx]
  00702	b9 04 00 00 00	 mov	 ecx, 4
  00707	c1 e1 00	 shl	 ecx, 0
  0070a	8b 55 10	 mov	 edx, DWORD PTR _parent_viewpoint$[ebp]
  0070d	f3 0f 10 0c 08	 movss	 xmm1, DWORD PTR [eax+ecx]
  00712	f3 0f 59 4a 20	 mulss	 xmm1, DWORD PTR [edx+32]
  00717	f3 0f 58 c1	 addss	 xmm0, xmm1
  0071b	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  00720	6b c8 00	 imul	 ecx, eax, 0
  00723	8d 54 0d cc	 lea	 edx, DWORD PTR _relative_attitude$[ebp+ecx]
  00727	b8 04 00 00 00	 mov	 eax, 4
  0072c	d1 e0		 shl	 eax, 1
  0072e	8b 4d 10	 mov	 ecx, DWORD PTR _parent_viewpoint$[ebp]
  00731	f3 0f 10 0c 02	 movss	 xmm1, DWORD PTR [edx+eax]
  00736	f3 0f 59 49 2c	 mulss	 xmm1, DWORD PTR [ecx+44]
  0073b	f3 0f 58 c1	 addss	 xmm0, xmm1
  0073f	f3 0f 11 85 18
	ff ff ff	 movss	 DWORD PTR _vp$[ebp+20], xmm0

; 802  : 
; 803  : 	vp.yv.x = ( ( relative_attitude[1][0] * parent_viewpoint->xv.x ) + ( relative_attitude[1][1] * parent_viewpoint->yv.x ) + ( relative_attitude[1][2] * parent_viewpoint->zv.x ) );

  00747	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  0074c	c1 e0 00	 shl	 eax, 0
  0074f	8d 4c 05 cc	 lea	 ecx, DWORD PTR _relative_attitude$[ebp+eax]
  00753	ba 04 00 00 00	 mov	 edx, 4
  00758	6b c2 00	 imul	 eax, edx, 0
  0075b	8b 55 10	 mov	 edx, DWORD PTR _parent_viewpoint$[ebp]
  0075e	f3 0f 10 04 01	 movss	 xmm0, DWORD PTR [ecx+eax]
  00763	f3 0f 59 42 0c	 mulss	 xmm0, DWORD PTR [edx+12]
  00768	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  0076d	c1 e0 00	 shl	 eax, 0
  00770	8d 4c 05 cc	 lea	 ecx, DWORD PTR _relative_attitude$[ebp+eax]
  00774	ba 04 00 00 00	 mov	 edx, 4
  00779	c1 e2 00	 shl	 edx, 0
  0077c	8b 45 10	 mov	 eax, DWORD PTR _parent_viewpoint$[ebp]
  0077f	f3 0f 10 0c 11	 movss	 xmm1, DWORD PTR [ecx+edx]
  00784	f3 0f 59 48 18	 mulss	 xmm1, DWORD PTR [eax+24]
  00789	f3 0f 58 c1	 addss	 xmm0, xmm1
  0078d	b9 0c 00 00 00	 mov	 ecx, 12			; 0000000cH
  00792	c1 e1 00	 shl	 ecx, 0
  00795	8d 54 0d cc	 lea	 edx, DWORD PTR _relative_attitude$[ebp+ecx]
  00799	b8 04 00 00 00	 mov	 eax, 4
  0079e	d1 e0		 shl	 eax, 1
  007a0	8b 4d 10	 mov	 ecx, DWORD PTR _parent_viewpoint$[ebp]
  007a3	f3 0f 10 0c 02	 movss	 xmm1, DWORD PTR [edx+eax]
  007a8	f3 0f 59 49 24	 mulss	 xmm1, DWORD PTR [ecx+36]
  007ad	f3 0f 58 c1	 addss	 xmm0, xmm1
  007b1	f3 0f 11 85 1c
	ff ff ff	 movss	 DWORD PTR _vp$[ebp+24], xmm0

; 804  : 	vp.yv.y = ( ( relative_attitude[1][0] * parent_viewpoint->xv.y ) + ( relative_attitude[1][1] * parent_viewpoint->yv.y ) + ( relative_attitude[1][2] * parent_viewpoint->zv.y ) );

  007b9	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  007be	c1 e0 00	 shl	 eax, 0
  007c1	8d 4c 05 cc	 lea	 ecx, DWORD PTR _relative_attitude$[ebp+eax]
  007c5	ba 04 00 00 00	 mov	 edx, 4
  007ca	6b c2 00	 imul	 eax, edx, 0
  007cd	8b 55 10	 mov	 edx, DWORD PTR _parent_viewpoint$[ebp]
  007d0	f3 0f 10 04 01	 movss	 xmm0, DWORD PTR [ecx+eax]
  007d5	f3 0f 59 42 10	 mulss	 xmm0, DWORD PTR [edx+16]
  007da	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  007df	c1 e0 00	 shl	 eax, 0
  007e2	8d 4c 05 cc	 lea	 ecx, DWORD PTR _relative_attitude$[ebp+eax]
  007e6	ba 04 00 00 00	 mov	 edx, 4
  007eb	c1 e2 00	 shl	 edx, 0
  007ee	8b 45 10	 mov	 eax, DWORD PTR _parent_viewpoint$[ebp]
  007f1	f3 0f 10 0c 11	 movss	 xmm1, DWORD PTR [ecx+edx]
  007f6	f3 0f 59 48 1c	 mulss	 xmm1, DWORD PTR [eax+28]
  007fb	f3 0f 58 c1	 addss	 xmm0, xmm1
  007ff	b9 0c 00 00 00	 mov	 ecx, 12			; 0000000cH
  00804	c1 e1 00	 shl	 ecx, 0
  00807	8d 54 0d cc	 lea	 edx, DWORD PTR _relative_attitude$[ebp+ecx]
  0080b	b8 04 00 00 00	 mov	 eax, 4
  00810	d1 e0		 shl	 eax, 1
  00812	8b 4d 10	 mov	 ecx, DWORD PTR _parent_viewpoint$[ebp]
  00815	f3 0f 10 0c 02	 movss	 xmm1, DWORD PTR [edx+eax]
  0081a	f3 0f 59 49 28	 mulss	 xmm1, DWORD PTR [ecx+40]
  0081f	f3 0f 58 c1	 addss	 xmm0, xmm1
  00823	f3 0f 11 85 20
	ff ff ff	 movss	 DWORD PTR _vp$[ebp+28], xmm0

; 805  : 	vp.yv.z = ( ( relative_attitude[1][0] * parent_viewpoint->xv.z ) + ( relative_attitude[1][1] * parent_viewpoint->yv.z ) + ( relative_attitude[1][2] * parent_viewpoint->zv.z ) );

  0082b	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  00830	c1 e0 00	 shl	 eax, 0
  00833	8d 4c 05 cc	 lea	 ecx, DWORD PTR _relative_attitude$[ebp+eax]
  00837	ba 04 00 00 00	 mov	 edx, 4
  0083c	6b c2 00	 imul	 eax, edx, 0
  0083f	8b 55 10	 mov	 edx, DWORD PTR _parent_viewpoint$[ebp]
  00842	f3 0f 10 04 01	 movss	 xmm0, DWORD PTR [ecx+eax]
  00847	f3 0f 59 42 14	 mulss	 xmm0, DWORD PTR [edx+20]
  0084c	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  00851	c1 e0 00	 shl	 eax, 0
  00854	8d 4c 05 cc	 lea	 ecx, DWORD PTR _relative_attitude$[ebp+eax]
  00858	ba 04 00 00 00	 mov	 edx, 4
  0085d	c1 e2 00	 shl	 edx, 0
  00860	8b 45 10	 mov	 eax, DWORD PTR _parent_viewpoint$[ebp]
  00863	f3 0f 10 0c 11	 movss	 xmm1, DWORD PTR [ecx+edx]
  00868	f3 0f 59 48 20	 mulss	 xmm1, DWORD PTR [eax+32]
  0086d	f3 0f 58 c1	 addss	 xmm0, xmm1
  00871	b9 0c 00 00 00	 mov	 ecx, 12			; 0000000cH
  00876	c1 e1 00	 shl	 ecx, 0
  00879	8d 54 0d cc	 lea	 edx, DWORD PTR _relative_attitude$[ebp+ecx]
  0087d	b8 04 00 00 00	 mov	 eax, 4
  00882	d1 e0		 shl	 eax, 1
  00884	8b 4d 10	 mov	 ecx, DWORD PTR _parent_viewpoint$[ebp]
  00887	f3 0f 10 0c 02	 movss	 xmm1, DWORD PTR [edx+eax]
  0088c	f3 0f 59 49 2c	 mulss	 xmm1, DWORD PTR [ecx+44]
  00891	f3 0f 58 c1	 addss	 xmm0, xmm1
  00895	f3 0f 11 85 24
	ff ff ff	 movss	 DWORD PTR _vp$[ebp+32], xmm0

; 806  : 
; 807  : 	vp.zv.x = ( ( relative_attitude[2][0] * parent_viewpoint->xv.x ) + ( relative_attitude[2][1] * parent_viewpoint->yv.x ) + ( relative_attitude[2][2] * parent_viewpoint->zv.x ) );

  0089d	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  008a2	d1 e0		 shl	 eax, 1
  008a4	8d 4c 05 cc	 lea	 ecx, DWORD PTR _relative_attitude$[ebp+eax]
  008a8	ba 04 00 00 00	 mov	 edx, 4
  008ad	6b c2 00	 imul	 eax, edx, 0
  008b0	8b 55 10	 mov	 edx, DWORD PTR _parent_viewpoint$[ebp]
  008b3	f3 0f 10 04 01	 movss	 xmm0, DWORD PTR [ecx+eax]
  008b8	f3 0f 59 42 0c	 mulss	 xmm0, DWORD PTR [edx+12]
  008bd	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  008c2	d1 e0		 shl	 eax, 1
  008c4	8d 4c 05 cc	 lea	 ecx, DWORD PTR _relative_attitude$[ebp+eax]
  008c8	ba 04 00 00 00	 mov	 edx, 4
  008cd	c1 e2 00	 shl	 edx, 0
  008d0	8b 45 10	 mov	 eax, DWORD PTR _parent_viewpoint$[ebp]
  008d3	f3 0f 10 0c 11	 movss	 xmm1, DWORD PTR [ecx+edx]
  008d8	f3 0f 59 48 18	 mulss	 xmm1, DWORD PTR [eax+24]
  008dd	f3 0f 58 c1	 addss	 xmm0, xmm1
  008e1	b9 0c 00 00 00	 mov	 ecx, 12			; 0000000cH
  008e6	d1 e1		 shl	 ecx, 1
  008e8	8d 54 0d cc	 lea	 edx, DWORD PTR _relative_attitude$[ebp+ecx]
  008ec	b8 04 00 00 00	 mov	 eax, 4
  008f1	d1 e0		 shl	 eax, 1
  008f3	8b 4d 10	 mov	 ecx, DWORD PTR _parent_viewpoint$[ebp]
  008f6	f3 0f 10 0c 02	 movss	 xmm1, DWORD PTR [edx+eax]
  008fb	f3 0f 59 49 24	 mulss	 xmm1, DWORD PTR [ecx+36]
  00900	f3 0f 58 c1	 addss	 xmm0, xmm1
  00904	f3 0f 11 85 28
	ff ff ff	 movss	 DWORD PTR _vp$[ebp+36], xmm0

; 808  : 	vp.zv.y = ( ( relative_attitude[2][0] * parent_viewpoint->xv.y ) + ( relative_attitude[2][1] * parent_viewpoint->yv.y ) + ( relative_attitude[2][2] * parent_viewpoint->zv.y ) );

  0090c	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  00911	d1 e0		 shl	 eax, 1
  00913	8d 4c 05 cc	 lea	 ecx, DWORD PTR _relative_attitude$[ebp+eax]
  00917	ba 04 00 00 00	 mov	 edx, 4
  0091c	6b c2 00	 imul	 eax, edx, 0
  0091f	8b 55 10	 mov	 edx, DWORD PTR _parent_viewpoint$[ebp]
  00922	f3 0f 10 04 01	 movss	 xmm0, DWORD PTR [ecx+eax]
  00927	f3 0f 59 42 10	 mulss	 xmm0, DWORD PTR [edx+16]
  0092c	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  00931	d1 e0		 shl	 eax, 1
  00933	8d 4c 05 cc	 lea	 ecx, DWORD PTR _relative_attitude$[ebp+eax]
  00937	ba 04 00 00 00	 mov	 edx, 4
  0093c	c1 e2 00	 shl	 edx, 0
  0093f	8b 45 10	 mov	 eax, DWORD PTR _parent_viewpoint$[ebp]
  00942	f3 0f 10 0c 11	 movss	 xmm1, DWORD PTR [ecx+edx]
  00947	f3 0f 59 48 1c	 mulss	 xmm1, DWORD PTR [eax+28]
  0094c	f3 0f 58 c1	 addss	 xmm0, xmm1
  00950	b9 0c 00 00 00	 mov	 ecx, 12			; 0000000cH
  00955	d1 e1		 shl	 ecx, 1
  00957	8d 54 0d cc	 lea	 edx, DWORD PTR _relative_attitude$[ebp+ecx]
  0095b	b8 04 00 00 00	 mov	 eax, 4
  00960	d1 e0		 shl	 eax, 1
  00962	8b 4d 10	 mov	 ecx, DWORD PTR _parent_viewpoint$[ebp]
  00965	f3 0f 10 0c 02	 movss	 xmm1, DWORD PTR [edx+eax]
  0096a	f3 0f 59 49 28	 mulss	 xmm1, DWORD PTR [ecx+40]
  0096f	f3 0f 58 c1	 addss	 xmm0, xmm1
  00973	f3 0f 11 85 2c
	ff ff ff	 movss	 DWORD PTR _vp$[ebp+40], xmm0

; 809  : 	vp.zv.z = ( ( relative_attitude[2][0] * parent_viewpoint->xv.z ) + ( relative_attitude[2][1] * parent_viewpoint->yv.z ) + ( relative_attitude[2][2] * parent_viewpoint->zv.z ) );

  0097b	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  00980	d1 e0		 shl	 eax, 1
  00982	8d 4c 05 cc	 lea	 ecx, DWORD PTR _relative_attitude$[ebp+eax]
  00986	ba 04 00 00 00	 mov	 edx, 4
  0098b	6b c2 00	 imul	 eax, edx, 0
  0098e	8b 55 10	 mov	 edx, DWORD PTR _parent_viewpoint$[ebp]
  00991	f3 0f 10 04 01	 movss	 xmm0, DWORD PTR [ecx+eax]
  00996	f3 0f 59 42 14	 mulss	 xmm0, DWORD PTR [edx+20]
  0099b	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  009a0	d1 e0		 shl	 eax, 1
  009a2	8d 4c 05 cc	 lea	 ecx, DWORD PTR _relative_attitude$[ebp+eax]
  009a6	ba 04 00 00 00	 mov	 edx, 4
  009ab	c1 e2 00	 shl	 edx, 0
  009ae	8b 45 10	 mov	 eax, DWORD PTR _parent_viewpoint$[ebp]
  009b1	f3 0f 10 0c 11	 movss	 xmm1, DWORD PTR [ecx+edx]
  009b6	f3 0f 59 48 20	 mulss	 xmm1, DWORD PTR [eax+32]
  009bb	f3 0f 58 c1	 addss	 xmm0, xmm1
  009bf	b9 0c 00 00 00	 mov	 ecx, 12			; 0000000cH
  009c4	d1 e1		 shl	 ecx, 1
  009c6	8d 54 0d cc	 lea	 edx, DWORD PTR _relative_attitude$[ebp+ecx]
  009ca	b8 04 00 00 00	 mov	 eax, 4
  009cf	d1 e0		 shl	 eax, 1
  009d1	8b 4d 10	 mov	 ecx, DWORD PTR _parent_viewpoint$[ebp]
  009d4	f3 0f 10 0c 02	 movss	 xmm1, DWORD PTR [edx+eax]
  009d9	f3 0f 59 49 2c	 mulss	 xmm1, DWORD PTR [ecx+44]
  009de	f3 0f 58 c1	 addss	 xmm0, xmm1
  009e2	f3 0f 11 85 30
	ff ff ff	 movss	 DWORD PTR _vp$[ebp+44], xmm0

; 810  : 
; 811  : 	//
; 812  : 	// Calculate the main matrix to transform the points to the screen
; 813  : 	//
; 814  : 
; 815  : 	rotation_3d[0][0] = ( ( vp.xv.x * visual_3d_vp->xv.x ) + ( vp.xv.y * visual_3d_vp->xv.y ) + ( vp.xv.z * visual_3d_vp->xv.z ) );

  009ea	a1 00 00 00 00	 mov	 eax, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  009ef	f3 0f 10 85 10
	ff ff ff	 movss	 xmm0, DWORD PTR _vp$[ebp+12]
  009f7	f3 0f 59 40 0c	 mulss	 xmm0, DWORD PTR [eax+12]
  009fc	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  00a02	f3 0f 10 8d 14
	ff ff ff	 movss	 xmm1, DWORD PTR _vp$[ebp+16]
  00a0a	f3 0f 59 49 10	 mulss	 xmm1, DWORD PTR [ecx+16]
  00a0f	f3 0f 58 c1	 addss	 xmm0, xmm1
  00a13	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  00a19	f3 0f 10 8d 18
	ff ff ff	 movss	 xmm1, DWORD PTR _vp$[ebp+20]
  00a21	f3 0f 59 4a 14	 mulss	 xmm1, DWORD PTR [edx+20]
  00a26	f3 0f 58 c1	 addss	 xmm0, xmm1
  00a2a	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  00a2f	6b c8 00	 imul	 ecx, eax, 0
  00a32	ba 04 00 00 00	 mov	 edx, 4
  00a37	6b c2 00	 imul	 eax, edx, 0
  00a3a	f3 0f 11 84 01
	00 00 00 00	 movss	 DWORD PTR ?rotation_3d@@3PAY02MA[ecx+eax], xmm0

; 816  : 	rotation_3d[0][1] = ( ( vp.xv.x * visual_3d_vp->yv.x ) + ( vp.xv.y * visual_3d_vp->yv.y ) + ( vp.xv.z * visual_3d_vp->yv.z ) );

  00a43	a1 00 00 00 00	 mov	 eax, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  00a48	f3 0f 10 85 10
	ff ff ff	 movss	 xmm0, DWORD PTR _vp$[ebp+12]
  00a50	f3 0f 59 40 18	 mulss	 xmm0, DWORD PTR [eax+24]
  00a55	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  00a5b	f3 0f 10 8d 14
	ff ff ff	 movss	 xmm1, DWORD PTR _vp$[ebp+16]
  00a63	f3 0f 59 49 1c	 mulss	 xmm1, DWORD PTR [ecx+28]
  00a68	f3 0f 58 c1	 addss	 xmm0, xmm1
  00a6c	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  00a72	f3 0f 10 8d 18
	ff ff ff	 movss	 xmm1, DWORD PTR _vp$[ebp+20]
  00a7a	f3 0f 59 4a 20	 mulss	 xmm1, DWORD PTR [edx+32]
  00a7f	f3 0f 58 c1	 addss	 xmm0, xmm1
  00a83	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  00a88	6b c8 00	 imul	 ecx, eax, 0
  00a8b	ba 04 00 00 00	 mov	 edx, 4
  00a90	c1 e2 00	 shl	 edx, 0
  00a93	f3 0f 11 84 11
	00 00 00 00	 movss	 DWORD PTR ?rotation_3d@@3PAY02MA[ecx+edx], xmm0

; 817  : 	rotation_3d[0][2] = ( ( vp.xv.x * visual_3d_vp->zv.x ) + ( vp.xv.y * visual_3d_vp->zv.y ) + ( vp.xv.z * visual_3d_vp->zv.z ) );

  00a9c	a1 00 00 00 00	 mov	 eax, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  00aa1	f3 0f 10 85 10
	ff ff ff	 movss	 xmm0, DWORD PTR _vp$[ebp+12]
  00aa9	f3 0f 59 40 24	 mulss	 xmm0, DWORD PTR [eax+36]
  00aae	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  00ab4	f3 0f 10 8d 14
	ff ff ff	 movss	 xmm1, DWORD PTR _vp$[ebp+16]
  00abc	f3 0f 59 49 28	 mulss	 xmm1, DWORD PTR [ecx+40]
  00ac1	f3 0f 58 c1	 addss	 xmm0, xmm1
  00ac5	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  00acb	f3 0f 10 8d 18
	ff ff ff	 movss	 xmm1, DWORD PTR _vp$[ebp+20]
  00ad3	f3 0f 59 4a 2c	 mulss	 xmm1, DWORD PTR [edx+44]
  00ad8	f3 0f 58 c1	 addss	 xmm0, xmm1
  00adc	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  00ae1	6b c8 00	 imul	 ecx, eax, 0
  00ae4	ba 04 00 00 00	 mov	 edx, 4
  00ae9	d1 e2		 shl	 edx, 1
  00aeb	f3 0f 11 84 11
	00 00 00 00	 movss	 DWORD PTR ?rotation_3d@@3PAY02MA[ecx+edx], xmm0

; 818  : 
; 819  : 	rotation_3d[1][0] = ( ( vp.yv.x * visual_3d_vp->xv.x ) + ( vp.yv.y * visual_3d_vp->xv.y ) + ( vp.yv.z * visual_3d_vp->xv.z ) );

  00af4	a1 00 00 00 00	 mov	 eax, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  00af9	f3 0f 10 85 1c
	ff ff ff	 movss	 xmm0, DWORD PTR _vp$[ebp+24]
  00b01	f3 0f 59 40 0c	 mulss	 xmm0, DWORD PTR [eax+12]
  00b06	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  00b0c	f3 0f 10 8d 20
	ff ff ff	 movss	 xmm1, DWORD PTR _vp$[ebp+28]
  00b14	f3 0f 59 49 10	 mulss	 xmm1, DWORD PTR [ecx+16]
  00b19	f3 0f 58 c1	 addss	 xmm0, xmm1
  00b1d	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  00b23	f3 0f 10 8d 24
	ff ff ff	 movss	 xmm1, DWORD PTR _vp$[ebp+32]
  00b2b	f3 0f 59 4a 14	 mulss	 xmm1, DWORD PTR [edx+20]
  00b30	f3 0f 58 c1	 addss	 xmm0, xmm1
  00b34	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  00b39	c1 e0 00	 shl	 eax, 0
  00b3c	b9 04 00 00 00	 mov	 ecx, 4
  00b41	6b d1 00	 imul	 edx, ecx, 0
  00b44	f3 0f 11 84 10
	00 00 00 00	 movss	 DWORD PTR ?rotation_3d@@3PAY02MA[eax+edx], xmm0

; 820  : 	rotation_3d[1][1] = ( ( vp.yv.x * visual_3d_vp->yv.x ) + ( vp.yv.y * visual_3d_vp->yv.y ) + ( vp.yv.z * visual_3d_vp->yv.z ) );

  00b4d	a1 00 00 00 00	 mov	 eax, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  00b52	f3 0f 10 85 1c
	ff ff ff	 movss	 xmm0, DWORD PTR _vp$[ebp+24]
  00b5a	f3 0f 59 40 18	 mulss	 xmm0, DWORD PTR [eax+24]
  00b5f	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  00b65	f3 0f 10 8d 20
	ff ff ff	 movss	 xmm1, DWORD PTR _vp$[ebp+28]
  00b6d	f3 0f 59 49 1c	 mulss	 xmm1, DWORD PTR [ecx+28]
  00b72	f3 0f 58 c1	 addss	 xmm0, xmm1
  00b76	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  00b7c	f3 0f 10 8d 24
	ff ff ff	 movss	 xmm1, DWORD PTR _vp$[ebp+32]
  00b84	f3 0f 59 4a 20	 mulss	 xmm1, DWORD PTR [edx+32]
  00b89	f3 0f 58 c1	 addss	 xmm0, xmm1
  00b8d	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  00b92	c1 e0 00	 shl	 eax, 0
  00b95	b9 04 00 00 00	 mov	 ecx, 4
  00b9a	c1 e1 00	 shl	 ecx, 0
  00b9d	f3 0f 11 84 08
	00 00 00 00	 movss	 DWORD PTR ?rotation_3d@@3PAY02MA[eax+ecx], xmm0

; 821  : 	rotation_3d[1][2] = ( ( vp.yv.x * visual_3d_vp->zv.x ) + ( vp.yv.y * visual_3d_vp->zv.y ) + ( vp.yv.z * visual_3d_vp->zv.z ) );

  00ba6	a1 00 00 00 00	 mov	 eax, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  00bab	f3 0f 10 85 1c
	ff ff ff	 movss	 xmm0, DWORD PTR _vp$[ebp+24]
  00bb3	f3 0f 59 40 24	 mulss	 xmm0, DWORD PTR [eax+36]
  00bb8	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  00bbe	f3 0f 10 8d 20
	ff ff ff	 movss	 xmm1, DWORD PTR _vp$[ebp+28]
  00bc6	f3 0f 59 49 28	 mulss	 xmm1, DWORD PTR [ecx+40]
  00bcb	f3 0f 58 c1	 addss	 xmm0, xmm1
  00bcf	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  00bd5	f3 0f 10 8d 24
	ff ff ff	 movss	 xmm1, DWORD PTR _vp$[ebp+32]
  00bdd	f3 0f 59 4a 2c	 mulss	 xmm1, DWORD PTR [edx+44]
  00be2	f3 0f 58 c1	 addss	 xmm0, xmm1
  00be6	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  00beb	c1 e0 00	 shl	 eax, 0
  00bee	b9 04 00 00 00	 mov	 ecx, 4
  00bf3	d1 e1		 shl	 ecx, 1
  00bf5	f3 0f 11 84 08
	00 00 00 00	 movss	 DWORD PTR ?rotation_3d@@3PAY02MA[eax+ecx], xmm0

; 822  : 
; 823  : 	rotation_3d[2][0] = ( ( vp.zv.x * visual_3d_vp->xv.x ) + ( vp.zv.y * visual_3d_vp->xv.y ) + ( vp.zv.z * visual_3d_vp->xv.z ) );

  00bfe	a1 00 00 00 00	 mov	 eax, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  00c03	f3 0f 10 85 28
	ff ff ff	 movss	 xmm0, DWORD PTR _vp$[ebp+36]
  00c0b	f3 0f 59 40 0c	 mulss	 xmm0, DWORD PTR [eax+12]
  00c10	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  00c16	f3 0f 10 8d 2c
	ff ff ff	 movss	 xmm1, DWORD PTR _vp$[ebp+40]
  00c1e	f3 0f 59 49 10	 mulss	 xmm1, DWORD PTR [ecx+16]
  00c23	f3 0f 58 c1	 addss	 xmm0, xmm1
  00c27	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  00c2d	f3 0f 10 8d 30
	ff ff ff	 movss	 xmm1, DWORD PTR _vp$[ebp+44]
  00c35	f3 0f 59 4a 14	 mulss	 xmm1, DWORD PTR [edx+20]
  00c3a	f3 0f 58 c1	 addss	 xmm0, xmm1
  00c3e	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  00c43	d1 e0		 shl	 eax, 1
  00c45	b9 04 00 00 00	 mov	 ecx, 4
  00c4a	6b d1 00	 imul	 edx, ecx, 0
  00c4d	f3 0f 11 84 10
	00 00 00 00	 movss	 DWORD PTR ?rotation_3d@@3PAY02MA[eax+edx], xmm0

; 824  : 	rotation_3d[2][1] = ( ( vp.zv.x * visual_3d_vp->yv.x ) + ( vp.zv.y * visual_3d_vp->yv.y ) + ( vp.zv.z * visual_3d_vp->yv.z ) );

  00c56	a1 00 00 00 00	 mov	 eax, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  00c5b	f3 0f 10 85 28
	ff ff ff	 movss	 xmm0, DWORD PTR _vp$[ebp+36]
  00c63	f3 0f 59 40 18	 mulss	 xmm0, DWORD PTR [eax+24]
  00c68	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  00c6e	f3 0f 10 8d 2c
	ff ff ff	 movss	 xmm1, DWORD PTR _vp$[ebp+40]
  00c76	f3 0f 59 49 1c	 mulss	 xmm1, DWORD PTR [ecx+28]
  00c7b	f3 0f 58 c1	 addss	 xmm0, xmm1
  00c7f	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  00c85	f3 0f 10 8d 30
	ff ff ff	 movss	 xmm1, DWORD PTR _vp$[ebp+44]
  00c8d	f3 0f 59 4a 20	 mulss	 xmm1, DWORD PTR [edx+32]
  00c92	f3 0f 58 c1	 addss	 xmm0, xmm1
  00c96	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  00c9b	d1 e0		 shl	 eax, 1
  00c9d	b9 04 00 00 00	 mov	 ecx, 4
  00ca2	c1 e1 00	 shl	 ecx, 0
  00ca5	f3 0f 11 84 08
	00 00 00 00	 movss	 DWORD PTR ?rotation_3d@@3PAY02MA[eax+ecx], xmm0

; 825  : 	rotation_3d[2][2] = ( ( vp.zv.x * visual_3d_vp->zv.x ) + ( vp.zv.y * visual_3d_vp->zv.y ) + ( vp.zv.z * visual_3d_vp->zv.z ) );

  00cae	a1 00 00 00 00	 mov	 eax, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  00cb3	f3 0f 10 85 28
	ff ff ff	 movss	 xmm0, DWORD PTR _vp$[ebp+36]
  00cbb	f3 0f 59 40 24	 mulss	 xmm0, DWORD PTR [eax+36]
  00cc0	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  00cc6	f3 0f 10 8d 2c
	ff ff ff	 movss	 xmm1, DWORD PTR _vp$[ebp+40]
  00cce	f3 0f 59 49 28	 mulss	 xmm1, DWORD PTR [ecx+40]
  00cd3	f3 0f 58 c1	 addss	 xmm0, xmm1
  00cd7	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  00cdd	f3 0f 10 8d 30
	ff ff ff	 movss	 xmm1, DWORD PTR _vp$[ebp+44]
  00ce5	f3 0f 59 4a 2c	 mulss	 xmm1, DWORD PTR [edx+44]
  00cea	f3 0f 58 c1	 addss	 xmm0, xmm1
  00cee	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  00cf3	d1 e0		 shl	 eax, 1
  00cf5	b9 04 00 00 00	 mov	 ecx, 4
  00cfa	d1 e1		 shl	 ecx, 1
  00cfc	f3 0f 11 84 08
	00 00 00 00	 movss	 DWORD PTR ?rotation_3d@@3PAY02MA[eax+ecx], xmm0

; 826  : 
; 827  : 	//
; 828  : 	// Scale the rotation matrix
; 829  : 	//
; 830  : 
; 831  : 	rotation_3d[0][0] *= object_3d_scale.x;

  00d05	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  00d0a	6b c8 00	 imul	 ecx, eax, 0
  00d0d	ba 04 00 00 00	 mov	 edx, 4
  00d12	6b c2 00	 imul	 eax, edx, 0
  00d15	f3 0f 10 84 01
	00 00 00 00	 movss	 xmm0, DWORD PTR ?rotation_3d@@3PAY02MA[ecx+eax]
  00d1e	f3 0f 59 05 00
	00 00 00	 mulss	 xmm0, DWORD PTR ?object_3d_scale@@3UVEC3D@@A
  00d26	b9 04 00 00 00	 mov	 ecx, 4
  00d2b	6b d1 00	 imul	 edx, ecx, 0
  00d2e	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  00d33	6b c8 00	 imul	 ecx, eax, 0
  00d36	f3 0f 11 84 11
	00 00 00 00	 movss	 DWORD PTR ?rotation_3d@@3PAY02MA[ecx+edx], xmm0

; 832  : 	rotation_3d[1][0] *= object_3d_scale.y;

  00d3f	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  00d44	c1 e0 00	 shl	 eax, 0
  00d47	b9 04 00 00 00	 mov	 ecx, 4
  00d4c	6b d1 00	 imul	 edx, ecx, 0
  00d4f	f3 0f 10 84 10
	00 00 00 00	 movss	 xmm0, DWORD PTR ?rotation_3d@@3PAY02MA[eax+edx]
  00d58	f3 0f 59 05 04
	00 00 00	 mulss	 xmm0, DWORD PTR ?object_3d_scale@@3UVEC3D@@A+4
  00d60	b8 04 00 00 00	 mov	 eax, 4
  00d65	6b c8 00	 imul	 ecx, eax, 0
  00d68	ba 0c 00 00 00	 mov	 edx, 12			; 0000000cH
  00d6d	c1 e2 00	 shl	 edx, 0
  00d70	f3 0f 11 84 0a
	00 00 00 00	 movss	 DWORD PTR ?rotation_3d@@3PAY02MA[edx+ecx], xmm0

; 833  : 	rotation_3d[2][0] *= object_3d_scale.z;

  00d79	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  00d7e	d1 e0		 shl	 eax, 1
  00d80	b9 04 00 00 00	 mov	 ecx, 4
  00d85	6b d1 00	 imul	 edx, ecx, 0
  00d88	f3 0f 10 84 10
	00 00 00 00	 movss	 xmm0, DWORD PTR ?rotation_3d@@3PAY02MA[eax+edx]
  00d91	f3 0f 59 05 08
	00 00 00	 mulss	 xmm0, DWORD PTR ?object_3d_scale@@3UVEC3D@@A+8
  00d99	b8 04 00 00 00	 mov	 eax, 4
  00d9e	6b c8 00	 imul	 ecx, eax, 0
  00da1	ba 0c 00 00 00	 mov	 edx, 12			; 0000000cH
  00da6	d1 e2		 shl	 edx, 1
  00da8	f3 0f 11 84 0a
	00 00 00 00	 movss	 DWORD PTR ?rotation_3d@@3PAY02MA[edx+ecx], xmm0

; 834  : 
; 835  : 	rotation_3d[0][1] *= object_3d_scale.x;

  00db1	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  00db6	6b c8 00	 imul	 ecx, eax, 0
  00db9	ba 04 00 00 00	 mov	 edx, 4
  00dbe	c1 e2 00	 shl	 edx, 0
  00dc1	f3 0f 10 84 11
	00 00 00 00	 movss	 xmm0, DWORD PTR ?rotation_3d@@3PAY02MA[ecx+edx]
  00dca	f3 0f 59 05 00
	00 00 00	 mulss	 xmm0, DWORD PTR ?object_3d_scale@@3UVEC3D@@A
  00dd2	b8 04 00 00 00	 mov	 eax, 4
  00dd7	c1 e0 00	 shl	 eax, 0
  00dda	b9 0c 00 00 00	 mov	 ecx, 12			; 0000000cH
  00ddf	6b d1 00	 imul	 edx, ecx, 0
  00de2	f3 0f 11 84 02
	00 00 00 00	 movss	 DWORD PTR ?rotation_3d@@3PAY02MA[edx+eax], xmm0

; 836  : 	rotation_3d[1][1] *= object_3d_scale.y;

  00deb	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  00df0	c1 e0 00	 shl	 eax, 0
  00df3	b9 04 00 00 00	 mov	 ecx, 4
  00df8	c1 e1 00	 shl	 ecx, 0
  00dfb	f3 0f 10 84 08
	00 00 00 00	 movss	 xmm0, DWORD PTR ?rotation_3d@@3PAY02MA[eax+ecx]
  00e04	f3 0f 59 05 04
	00 00 00	 mulss	 xmm0, DWORD PTR ?object_3d_scale@@3UVEC3D@@A+4
  00e0c	ba 04 00 00 00	 mov	 edx, 4
  00e11	c1 e2 00	 shl	 edx, 0
  00e14	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  00e19	c1 e0 00	 shl	 eax, 0
  00e1c	f3 0f 11 84 10
	00 00 00 00	 movss	 DWORD PTR ?rotation_3d@@3PAY02MA[eax+edx], xmm0

; 837  : 	rotation_3d[2][1] *= object_3d_scale.z;

  00e25	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  00e2a	d1 e0		 shl	 eax, 1
  00e2c	b9 04 00 00 00	 mov	 ecx, 4
  00e31	c1 e1 00	 shl	 ecx, 0
  00e34	f3 0f 10 84 08
	00 00 00 00	 movss	 xmm0, DWORD PTR ?rotation_3d@@3PAY02MA[eax+ecx]
  00e3d	f3 0f 59 05 08
	00 00 00	 mulss	 xmm0, DWORD PTR ?object_3d_scale@@3UVEC3D@@A+8
  00e45	ba 04 00 00 00	 mov	 edx, 4
  00e4a	c1 e2 00	 shl	 edx, 0
  00e4d	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  00e52	d1 e0		 shl	 eax, 1
  00e54	f3 0f 11 84 10
	00 00 00 00	 movss	 DWORD PTR ?rotation_3d@@3PAY02MA[eax+edx], xmm0

; 838  : 
; 839  : 	rotation_3d[0][2] *= object_3d_scale.x;

  00e5d	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  00e62	6b c8 00	 imul	 ecx, eax, 0
  00e65	ba 04 00 00 00	 mov	 edx, 4
  00e6a	d1 e2		 shl	 edx, 1
  00e6c	f3 0f 10 84 11
	00 00 00 00	 movss	 xmm0, DWORD PTR ?rotation_3d@@3PAY02MA[ecx+edx]
  00e75	f3 0f 59 05 00
	00 00 00	 mulss	 xmm0, DWORD PTR ?object_3d_scale@@3UVEC3D@@A
  00e7d	b8 04 00 00 00	 mov	 eax, 4
  00e82	d1 e0		 shl	 eax, 1
  00e84	b9 0c 00 00 00	 mov	 ecx, 12			; 0000000cH
  00e89	6b d1 00	 imul	 edx, ecx, 0
  00e8c	f3 0f 11 84 02
	00 00 00 00	 movss	 DWORD PTR ?rotation_3d@@3PAY02MA[edx+eax], xmm0

; 840  : 	rotation_3d[1][2] *= object_3d_scale.y;

  00e95	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  00e9a	c1 e0 00	 shl	 eax, 0
  00e9d	b9 04 00 00 00	 mov	 ecx, 4
  00ea2	d1 e1		 shl	 ecx, 1
  00ea4	f3 0f 10 84 08
	00 00 00 00	 movss	 xmm0, DWORD PTR ?rotation_3d@@3PAY02MA[eax+ecx]
  00ead	f3 0f 59 05 04
	00 00 00	 mulss	 xmm0, DWORD PTR ?object_3d_scale@@3UVEC3D@@A+4
  00eb5	ba 04 00 00 00	 mov	 edx, 4
  00eba	d1 e2		 shl	 edx, 1
  00ebc	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  00ec1	c1 e0 00	 shl	 eax, 0
  00ec4	f3 0f 11 84 10
	00 00 00 00	 movss	 DWORD PTR ?rotation_3d@@3PAY02MA[eax+edx], xmm0

; 841  : 	rotation_3d[2][2] *= object_3d_scale.z;

  00ecd	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  00ed2	d1 e0		 shl	 eax, 1
  00ed4	b9 04 00 00 00	 mov	 ecx, 4
  00ed9	d1 e1		 shl	 ecx, 1
  00edb	f3 0f 10 84 08
	00 00 00 00	 movss	 xmm0, DWORD PTR ?rotation_3d@@3PAY02MA[eax+ecx]
  00ee4	f3 0f 59 05 08
	00 00 00	 mulss	 xmm0, DWORD PTR ?object_3d_scale@@3UVEC3D@@A+8
  00eec	ba 04 00 00 00	 mov	 edx, 4
  00ef1	d1 e2		 shl	 edx, 1
  00ef3	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  00ef8	d1 e0		 shl	 eax, 1
  00efa	f3 0f 11 84 10
	00 00 00 00	 movss	 DWORD PTR ?rotation_3d@@3PAY02MA[eax+edx], xmm0

; 842  : 
; 843  : 	if ( object_number )

  00f03	83 7d f8 00	 cmp	 DWORD PTR _object_number$[ebp], 0
  00f07	0f 84 2f 07 00
	00		 je	 $LN25@draw_sub_o

; 844  : 	{
; 845  : 
; 846  : 		//
; 847  : 		// Calculate the relative camera position in the object viewspace
; 848  : 		//
; 849  : 
; 850  : 		{
; 851  : 
; 852  : 			vec3d
; 853  : 				rel_pos;
; 854  : 
; 855  : 			rel_pos.x = visual_3d_vp->x - vp.x;

  00f0d	a1 00 00 00 00	 mov	 eax, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  00f12	f3 0f 10 00	 movss	 xmm0, DWORD PTR [eax]
  00f16	f3 0f 5c 85 04
	ff ff ff	 subss	 xmm0, DWORD PTR _vp$[ebp]
  00f1e	f3 0f 11 85 f0
	fe ff ff	 movss	 DWORD PTR _rel_pos$6[ebp], xmm0

; 856  : 			rel_pos.y = visual_3d_vp->y - vp.y;

  00f26	a1 00 00 00 00	 mov	 eax, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  00f2b	f3 0f 10 40 04	 movss	 xmm0, DWORD PTR [eax+4]
  00f30	f3 0f 5c 85 08
	ff ff ff	 subss	 xmm0, DWORD PTR _vp$[ebp+4]
  00f38	f3 0f 11 85 f4
	fe ff ff	 movss	 DWORD PTR _rel_pos$6[ebp+4], xmm0

; 857  : 			rel_pos.z = visual_3d_vp->z - vp.z;

  00f40	a1 00 00 00 00	 mov	 eax, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  00f45	f3 0f 10 40 08	 movss	 xmm0, DWORD PTR [eax+8]
  00f4a	f3 0f 5c 85 0c
	ff ff ff	 subss	 xmm0, DWORD PTR _vp$[ebp+8]
  00f52	f3 0f 11 85 f8
	fe ff ff	 movss	 DWORD PTR _rel_pos$6[ebp+8], xmm0

; 858  : 
; 859  : 			object_camera_position.x = ( rel_pos.x * vp.attitude[0][0] + rel_pos.y * vp.attitude[0][1] + rel_pos.z * vp.attitude[0][2] );

  00f5a	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  00f5f	6b c8 00	 imul	 ecx, eax, 0
  00f62	8d 94 0d 10 ff
	ff ff		 lea	 edx, DWORD PTR _vp$[ebp+ecx+12]
  00f69	b8 04 00 00 00	 mov	 eax, 4
  00f6e	6b c8 00	 imul	 ecx, eax, 0
  00f71	f3 0f 10 85 f0
	fe ff ff	 movss	 xmm0, DWORD PTR _rel_pos$6[ebp]
  00f79	f3 0f 59 04 0a	 mulss	 xmm0, DWORD PTR [edx+ecx]
  00f7e	ba 0c 00 00 00	 mov	 edx, 12			; 0000000cH
  00f83	6b c2 00	 imul	 eax, edx, 0
  00f86	8d 8c 05 10 ff
	ff ff		 lea	 ecx, DWORD PTR _vp$[ebp+eax+12]
  00f8d	ba 04 00 00 00	 mov	 edx, 4
  00f92	c1 e2 00	 shl	 edx, 0
  00f95	f3 0f 10 8d f4
	fe ff ff	 movss	 xmm1, DWORD PTR _rel_pos$6[ebp+4]
  00f9d	f3 0f 59 0c 11	 mulss	 xmm1, DWORD PTR [ecx+edx]
  00fa2	f3 0f 58 c1	 addss	 xmm0, xmm1
  00fa6	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  00fab	6b c8 00	 imul	 ecx, eax, 0
  00fae	8d 94 0d 10 ff
	ff ff		 lea	 edx, DWORD PTR _vp$[ebp+ecx+12]
  00fb5	b8 04 00 00 00	 mov	 eax, 4
  00fba	d1 e0		 shl	 eax, 1
  00fbc	f3 0f 10 8d f8
	fe ff ff	 movss	 xmm1, DWORD PTR _rel_pos$6[ebp+8]
  00fc4	f3 0f 59 0c 02	 mulss	 xmm1, DWORD PTR [edx+eax]
  00fc9	f3 0f 58 c1	 addss	 xmm0, xmm1
  00fcd	f3 0f 11 45 9c	 movss	 DWORD PTR _object_camera_position$[ebp], xmm0

; 860  : 			object_camera_position.y = ( rel_pos.x * vp.attitude[1][0] + rel_pos.y * vp.attitude[1][1] + rel_pos.z * vp.attitude[1][2] );

  00fd2	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  00fd7	c1 e0 00	 shl	 eax, 0
  00fda	8d 8c 05 10 ff
	ff ff		 lea	 ecx, DWORD PTR _vp$[ebp+eax+12]
  00fe1	ba 04 00 00 00	 mov	 edx, 4
  00fe6	6b c2 00	 imul	 eax, edx, 0
  00fe9	f3 0f 10 85 f0
	fe ff ff	 movss	 xmm0, DWORD PTR _rel_pos$6[ebp]
  00ff1	f3 0f 59 04 01	 mulss	 xmm0, DWORD PTR [ecx+eax]
  00ff6	b9 0c 00 00 00	 mov	 ecx, 12			; 0000000cH
  00ffb	c1 e1 00	 shl	 ecx, 0
  00ffe	8d 94 0d 10 ff
	ff ff		 lea	 edx, DWORD PTR _vp$[ebp+ecx+12]
  01005	b8 04 00 00 00	 mov	 eax, 4
  0100a	c1 e0 00	 shl	 eax, 0
  0100d	f3 0f 10 8d f4
	fe ff ff	 movss	 xmm1, DWORD PTR _rel_pos$6[ebp+4]
  01015	f3 0f 59 0c 02	 mulss	 xmm1, DWORD PTR [edx+eax]
  0101a	f3 0f 58 c1	 addss	 xmm0, xmm1
  0101e	b9 0c 00 00 00	 mov	 ecx, 12			; 0000000cH
  01023	c1 e1 00	 shl	 ecx, 0
  01026	8d 94 0d 10 ff
	ff ff		 lea	 edx, DWORD PTR _vp$[ebp+ecx+12]
  0102d	b8 04 00 00 00	 mov	 eax, 4
  01032	d1 e0		 shl	 eax, 1
  01034	f3 0f 10 8d f8
	fe ff ff	 movss	 xmm1, DWORD PTR _rel_pos$6[ebp+8]
  0103c	f3 0f 59 0c 02	 mulss	 xmm1, DWORD PTR [edx+eax]
  01041	f3 0f 58 c1	 addss	 xmm0, xmm1
  01045	f3 0f 11 45 a0	 movss	 DWORD PTR _object_camera_position$[ebp+4], xmm0

; 861  : 			object_camera_position.z = ( rel_pos.x * vp.attitude[2][0] + rel_pos.y * vp.attitude[2][1] + rel_pos.z * vp.attitude[2][2] );

  0104a	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  0104f	d1 e0		 shl	 eax, 1
  01051	8d 8c 05 10 ff
	ff ff		 lea	 ecx, DWORD PTR _vp$[ebp+eax+12]
  01058	ba 04 00 00 00	 mov	 edx, 4
  0105d	6b c2 00	 imul	 eax, edx, 0
  01060	f3 0f 10 85 f0
	fe ff ff	 movss	 xmm0, DWORD PTR _rel_pos$6[ebp]
  01068	f3 0f 59 04 01	 mulss	 xmm0, DWORD PTR [ecx+eax]
  0106d	b9 0c 00 00 00	 mov	 ecx, 12			; 0000000cH
  01072	d1 e1		 shl	 ecx, 1
  01074	8d 94 0d 10 ff
	ff ff		 lea	 edx, DWORD PTR _vp$[ebp+ecx+12]
  0107b	b8 04 00 00 00	 mov	 eax, 4
  01080	c1 e0 00	 shl	 eax, 0
  01083	f3 0f 10 8d f4
	fe ff ff	 movss	 xmm1, DWORD PTR _rel_pos$6[ebp+4]
  0108b	f3 0f 59 0c 02	 mulss	 xmm1, DWORD PTR [edx+eax]
  01090	f3 0f 58 c1	 addss	 xmm0, xmm1
  01094	b9 0c 00 00 00	 mov	 ecx, 12			; 0000000cH
  01099	d1 e1		 shl	 ecx, 1
  0109b	8d 94 0d 10 ff
	ff ff		 lea	 edx, DWORD PTR _vp$[ebp+ecx+12]
  010a2	b8 04 00 00 00	 mov	 eax, 4
  010a7	d1 e0		 shl	 eax, 1
  010a9	f3 0f 10 8d f8
	fe ff ff	 movss	 xmm1, DWORD PTR _rel_pos$6[ebp+8]
  010b1	f3 0f 59 0c 02	 mulss	 xmm1, DWORD PTR [edx+eax]
  010b6	f3 0f 58 c1	 addss	 xmm0, xmm1
  010ba	f3 0f 11 45 a4	 movss	 DWORD PTR _object_camera_position$[ebp+8], xmm0

; 862  : 
; 863  : 			object_camera_direction.x = ( visual_3d_vp->zv.x * vp.attitude[0][0] + visual_3d_vp->zv.y * vp.attitude[1][0] + visual_3d_vp->zv.z * vp.attitude[2][0] );

  010bf	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  010c4	6b c8 00	 imul	 ecx, eax, 0
  010c7	8d 94 0d 10 ff
	ff ff		 lea	 edx, DWORD PTR _vp$[ebp+ecx+12]
  010ce	b8 04 00 00 00	 mov	 eax, 4
  010d3	6b c8 00	 imul	 ecx, eax, 0
  010d6	a1 00 00 00 00	 mov	 eax, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  010db	f3 0f 10 40 24	 movss	 xmm0, DWORD PTR [eax+36]
  010e0	f3 0f 59 04 0a	 mulss	 xmm0, DWORD PTR [edx+ecx]
  010e5	b9 0c 00 00 00	 mov	 ecx, 12			; 0000000cH
  010ea	c1 e1 00	 shl	 ecx, 0
  010ed	8d 94 0d 10 ff
	ff ff		 lea	 edx, DWORD PTR _vp$[ebp+ecx+12]
  010f4	b8 04 00 00 00	 mov	 eax, 4
  010f9	6b c8 00	 imul	 ecx, eax, 0
  010fc	a1 00 00 00 00	 mov	 eax, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  01101	f3 0f 10 48 28	 movss	 xmm1, DWORD PTR [eax+40]
  01106	f3 0f 59 0c 0a	 mulss	 xmm1, DWORD PTR [edx+ecx]
  0110b	f3 0f 58 c1	 addss	 xmm0, xmm1
  0110f	b9 0c 00 00 00	 mov	 ecx, 12			; 0000000cH
  01114	d1 e1		 shl	 ecx, 1
  01116	8d 94 0d 10 ff
	ff ff		 lea	 edx, DWORD PTR _vp$[ebp+ecx+12]
  0111d	b8 04 00 00 00	 mov	 eax, 4
  01122	6b c8 00	 imul	 ecx, eax, 0
  01125	a1 00 00 00 00	 mov	 eax, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  0112a	f3 0f 10 48 2c	 movss	 xmm1, DWORD PTR [eax+44]
  0112f	f3 0f 59 0c 0a	 mulss	 xmm1, DWORD PTR [edx+ecx]
  01134	f3 0f 58 c1	 addss	 xmm0, xmm1
  01138	f3 0f 11 45 90	 movss	 DWORD PTR _object_camera_direction$[ebp], xmm0

; 864  : 			object_camera_direction.y = ( visual_3d_vp->zv.x * vp.attitude[0][1] + visual_3d_vp->zv.y * vp.attitude[1][1] + visual_3d_vp->zv.z * vp.attitude[2][1] );

  0113d	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  01142	6b c8 00	 imul	 ecx, eax, 0
  01145	8d 94 0d 10 ff
	ff ff		 lea	 edx, DWORD PTR _vp$[ebp+ecx+12]
  0114c	b8 04 00 00 00	 mov	 eax, 4
  01151	c1 e0 00	 shl	 eax, 0
  01154	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  0115a	f3 0f 10 41 24	 movss	 xmm0, DWORD PTR [ecx+36]
  0115f	f3 0f 59 04 02	 mulss	 xmm0, DWORD PTR [edx+eax]
  01164	ba 0c 00 00 00	 mov	 edx, 12			; 0000000cH
  01169	c1 e2 00	 shl	 edx, 0
  0116c	8d 84 15 10 ff
	ff ff		 lea	 eax, DWORD PTR _vp$[ebp+edx+12]
  01173	b9 04 00 00 00	 mov	 ecx, 4
  01178	c1 e1 00	 shl	 ecx, 0
  0117b	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  01181	f3 0f 10 4a 28	 movss	 xmm1, DWORD PTR [edx+40]
  01186	f3 0f 59 0c 08	 mulss	 xmm1, DWORD PTR [eax+ecx]
  0118b	f3 0f 58 c1	 addss	 xmm0, xmm1
  0118f	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  01194	d1 e0		 shl	 eax, 1
  01196	8d 8c 05 10 ff
	ff ff		 lea	 ecx, DWORD PTR _vp$[ebp+eax+12]
  0119d	ba 04 00 00 00	 mov	 edx, 4
  011a2	c1 e2 00	 shl	 edx, 0
  011a5	a1 00 00 00 00	 mov	 eax, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  011aa	f3 0f 10 48 2c	 movss	 xmm1, DWORD PTR [eax+44]
  011af	f3 0f 59 0c 11	 mulss	 xmm1, DWORD PTR [ecx+edx]
  011b4	f3 0f 58 c1	 addss	 xmm0, xmm1
  011b8	f3 0f 11 45 94	 movss	 DWORD PTR _object_camera_direction$[ebp+4], xmm0

; 865  : 			object_camera_direction.z = ( visual_3d_vp->zv.x * vp.attitude[0][2] + visual_3d_vp->zv.y * vp.attitude[1][2] + visual_3d_vp->zv.z * vp.attitude[2][2] );

  011bd	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  011c2	6b c8 00	 imul	 ecx, eax, 0
  011c5	8d 94 0d 10 ff
	ff ff		 lea	 edx, DWORD PTR _vp$[ebp+ecx+12]
  011cc	b8 04 00 00 00	 mov	 eax, 4
  011d1	d1 e0		 shl	 eax, 1
  011d3	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  011d9	f3 0f 10 41 24	 movss	 xmm0, DWORD PTR [ecx+36]
  011de	f3 0f 59 04 02	 mulss	 xmm0, DWORD PTR [edx+eax]
  011e3	ba 0c 00 00 00	 mov	 edx, 12			; 0000000cH
  011e8	c1 e2 00	 shl	 edx, 0
  011eb	8d 84 15 10 ff
	ff ff		 lea	 eax, DWORD PTR _vp$[ebp+edx+12]
  011f2	b9 04 00 00 00	 mov	 ecx, 4
  011f7	d1 e1		 shl	 ecx, 1
  011f9	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  011ff	f3 0f 10 4a 28	 movss	 xmm1, DWORD PTR [edx+40]
  01204	f3 0f 59 0c 08	 mulss	 xmm1, DWORD PTR [eax+ecx]
  01209	f3 0f 58 c1	 addss	 xmm0, xmm1
  0120d	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  01212	d1 e0		 shl	 eax, 1
  01214	8d 8c 05 10 ff
	ff ff		 lea	 ecx, DWORD PTR _vp$[ebp+eax+12]
  0121b	ba 04 00 00 00	 mov	 edx, 4
  01220	d1 e2		 shl	 edx, 1
  01222	a1 00 00 00 00	 mov	 eax, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  01227	f3 0f 10 48 2c	 movss	 xmm1, DWORD PTR [eax+44]
  0122c	f3 0f 59 0c 11	 mulss	 xmm1, DWORD PTR [ecx+edx]
  01231	f3 0f 58 c1	 addss	 xmm0, xmm1
  01235	f3 0f 11 45 98	 movss	 DWORD PTR _object_camera_direction$[ebp+8], xmm0

; 866  : 		}
; 867  : 
; 868  : 		//
; 869  : 		// Calculate the vector from the object to the viewpoint, in the object's view system
; 870  : 		//
; 871  : 
; 872  : 		{
; 873  : 
; 874  : 			float
; 875  : 				x,
; 876  : 				y,
; 877  : 				z;
; 878  : 
; 879  : 			x = ( ( visual_3d_vp->x - vp.x ) * vp.xv.x );

  0123a	a1 00 00 00 00	 mov	 eax, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  0123f	f3 0f 10 00	 movss	 xmm0, DWORD PTR [eax]
  01243	f3 0f 5c 85 04
	ff ff ff	 subss	 xmm0, DWORD PTR _vp$[ebp]
  0124b	f3 0f 59 85 10
	ff ff ff	 mulss	 xmm0, DWORD PTR _vp$[ebp+12]
  01253	f3 0f 11 85 ec
	fe ff ff	 movss	 DWORD PTR _x$5[ebp], xmm0

; 880  : 			x += ( ( visual_3d_vp->y - vp.y ) *  vp.xv.y );

  0125b	a1 00 00 00 00	 mov	 eax, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  01260	f3 0f 10 40 04	 movss	 xmm0, DWORD PTR [eax+4]
  01265	f3 0f 5c 85 08
	ff ff ff	 subss	 xmm0, DWORD PTR _vp$[ebp+4]
  0126d	f3 0f 59 85 14
	ff ff ff	 mulss	 xmm0, DWORD PTR _vp$[ebp+16]
  01275	f3 0f 58 85 ec
	fe ff ff	 addss	 xmm0, DWORD PTR _x$5[ebp]
  0127d	f3 0f 11 85 ec
	fe ff ff	 movss	 DWORD PTR _x$5[ebp], xmm0

; 881  : 			x += ( ( visual_3d_vp->z - vp.z ) *  vp.xv.z );

  01285	a1 00 00 00 00	 mov	 eax, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  0128a	f3 0f 10 40 08	 movss	 xmm0, DWORD PTR [eax+8]
  0128f	f3 0f 5c 85 0c
	ff ff ff	 subss	 xmm0, DWORD PTR _vp$[ebp+8]
  01297	f3 0f 59 85 18
	ff ff ff	 mulss	 xmm0, DWORD PTR _vp$[ebp+20]
  0129f	f3 0f 58 85 ec
	fe ff ff	 addss	 xmm0, DWORD PTR _x$5[ebp]
  012a7	f3 0f 11 85 ec
	fe ff ff	 movss	 DWORD PTR _x$5[ebp], xmm0

; 882  : 
; 883  : 			y = ( ( visual_3d_vp->x - vp.x ) * vp.yv.x );

  012af	a1 00 00 00 00	 mov	 eax, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  012b4	f3 0f 10 00	 movss	 xmm0, DWORD PTR [eax]
  012b8	f3 0f 5c 85 04
	ff ff ff	 subss	 xmm0, DWORD PTR _vp$[ebp]
  012c0	f3 0f 59 85 1c
	ff ff ff	 mulss	 xmm0, DWORD PTR _vp$[ebp+24]
  012c8	f3 0f 11 85 e8
	fe ff ff	 movss	 DWORD PTR _y$4[ebp], xmm0

; 884  : 			y += ( ( visual_3d_vp->y - vp.y ) *  vp.yv.y );

  012d0	a1 00 00 00 00	 mov	 eax, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  012d5	f3 0f 10 40 04	 movss	 xmm0, DWORD PTR [eax+4]
  012da	f3 0f 5c 85 08
	ff ff ff	 subss	 xmm0, DWORD PTR _vp$[ebp+4]
  012e2	f3 0f 59 85 20
	ff ff ff	 mulss	 xmm0, DWORD PTR _vp$[ebp+28]
  012ea	f3 0f 58 85 e8
	fe ff ff	 addss	 xmm0, DWORD PTR _y$4[ebp]
  012f2	f3 0f 11 85 e8
	fe ff ff	 movss	 DWORD PTR _y$4[ebp], xmm0

; 885  : 			y += ( ( visual_3d_vp->z - vp.z ) *  vp.yv.z );

  012fa	a1 00 00 00 00	 mov	 eax, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  012ff	f3 0f 10 40 08	 movss	 xmm0, DWORD PTR [eax+8]
  01304	f3 0f 5c 85 0c
	ff ff ff	 subss	 xmm0, DWORD PTR _vp$[ebp+8]
  0130c	f3 0f 59 85 24
	ff ff ff	 mulss	 xmm0, DWORD PTR _vp$[ebp+32]
  01314	f3 0f 58 85 e8
	fe ff ff	 addss	 xmm0, DWORD PTR _y$4[ebp]
  0131c	f3 0f 11 85 e8
	fe ff ff	 movss	 DWORD PTR _y$4[ebp], xmm0

; 886  : 
; 887  : 			z = ( ( visual_3d_vp->x - vp.x ) * vp.zv.x );

  01324	a1 00 00 00 00	 mov	 eax, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  01329	f3 0f 10 00	 movss	 xmm0, DWORD PTR [eax]
  0132d	f3 0f 5c 85 04
	ff ff ff	 subss	 xmm0, DWORD PTR _vp$[ebp]
  01335	f3 0f 59 85 28
	ff ff ff	 mulss	 xmm0, DWORD PTR _vp$[ebp+36]
  0133d	f3 0f 11 85 e4
	fe ff ff	 movss	 DWORD PTR _z$3[ebp], xmm0

; 888  : 			z += ( ( visual_3d_vp->y - vp.y ) *  vp.zv.y );

  01345	a1 00 00 00 00	 mov	 eax, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  0134a	f3 0f 10 40 04	 movss	 xmm0, DWORD PTR [eax+4]
  0134f	f3 0f 5c 85 08
	ff ff ff	 subss	 xmm0, DWORD PTR _vp$[ebp+4]
  01357	f3 0f 59 85 2c
	ff ff ff	 mulss	 xmm0, DWORD PTR _vp$[ebp+40]
  0135f	f3 0f 58 85 e4
	fe ff ff	 addss	 xmm0, DWORD PTR _z$3[ebp]
  01367	f3 0f 11 85 e4
	fe ff ff	 movss	 DWORD PTR _z$3[ebp], xmm0

; 889  : 			z += ( ( visual_3d_vp->z - vp.z ) *  vp.zv.z );

  0136f	a1 00 00 00 00	 mov	 eax, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  01374	f3 0f 10 40 08	 movss	 xmm0, DWORD PTR [eax+8]
  01379	f3 0f 5c 85 0c
	ff ff ff	 subss	 xmm0, DWORD PTR _vp$[ebp+8]
  01381	f3 0f 59 85 30
	ff ff ff	 mulss	 xmm0, DWORD PTR _vp$[ebp+44]
  01389	f3 0f 58 85 e4
	fe ff ff	 addss	 xmm0, DWORD PTR _z$3[ebp]
  01391	f3 0f 11 85 e4
	fe ff ff	 movss	 DWORD PTR _z$3[ebp], xmm0

; 890  : 
; 891  : 			object_unit_pos.x = -x;

  01399	f3 0f 10 85 ec
	fe ff ff	 movss	 xmm0, DWORD PTR _x$5[ebp]
  013a1	0f 57 05 00 00
	00 00		 xorps	 xmm0, DWORD PTR __xmm@80000000800000008000000080000000
  013a8	f3 0f 11 85 6c
	ff ff ff	 movss	 DWORD PTR _object_unit_pos$[ebp], xmm0

; 892  : 			object_unit_pos.y = -y;

  013b0	f3 0f 10 85 e8
	fe ff ff	 movss	 xmm0, DWORD PTR _y$4[ebp]
  013b8	0f 57 05 00 00
	00 00		 xorps	 xmm0, DWORD PTR __xmm@80000000800000008000000080000000
  013bf	f3 0f 11 85 70
	ff ff ff	 movss	 DWORD PTR _object_unit_pos$[ebp+4], xmm0

; 893  : 			object_unit_pos.z = -z;

  013c7	f3 0f 10 85 e4
	fe ff ff	 movss	 xmm0, DWORD PTR _z$3[ebp]
  013cf	0f 57 05 00 00
	00 00		 xorps	 xmm0, DWORD PTR __xmm@80000000800000008000000080000000
  013d6	f3 0f 11 85 74
	ff ff ff	 movss	 DWORD PTR _object_unit_pos$[ebp+8], xmm0

; 894  : 
; 895  : 			normalise_any_3d_vector ( &object_unit_pos );

  013de	8d 85 6c ff ff
	ff		 lea	 eax, DWORD PTR _object_unit_pos$[ebp]
  013e4	50		 push	 eax
  013e5	e8 00 00 00 00	 call	 ?normalise_any_3d_vector@@YGMPAUVEC3D@@@Z ; normalise_any_3d_vector
  013ea	dd d8		 fstp	 ST(0)

; 896  : 
; 897  : 			current_object_3d_unit_position = &object_unit_pos;

  013ec	8d 85 6c ff ff
	ff		 lea	 eax, DWORD PTR _object_unit_pos$[ebp]
  013f2	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_unit_position@@3PAUVEC3D@@A, eax ; current_object_3d_unit_position

; 898  : 		}
; 899  : 
; 900  : 		//
; 901  : 		// Rotate the light source vector to be relative to the object.
; 902  : 		//
; 903  : 
; 904  : 		light = generate_relative_lights ( &vp, current_object_3d_unit_position, current_3d_lights );

  013f7	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_3d_lights@@3PAULIGHT_3D_SOURCE@@A ; current_3d_lights
  013fc	50		 push	 eax
  013fd	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_object_3d_unit_position@@3PAUVEC3D@@A ; current_object_3d_unit_position
  01403	51		 push	 ecx
  01404	8d 95 04 ff ff
	ff		 lea	 edx, DWORD PTR _vp$[ebp]
  0140a	52		 push	 edx
  0140b	e8 00 00 00 00	 call	 ?generate_relative_lights@@YGPAULIGHT_3D_SOURCE@@PAUVIEWPOINT@@PAUVEC3D@@PAU1@@Z ; generate_relative_lights
  01410	89 85 34 ff ff
	ff		 mov	 DWORD PTR _light$[ebp], eax

; 905  : 
; 906  : 		object_3d_object_base[object_3d_object_current_base].lights = light;

  01416	6b 05 00 00 00
	00 2c		 imul	 eax, DWORD PTR ?object_3d_object_current_base@@3HA, 44 ; object_3d_object_current_base
  0141d	8b 8d 34 ff ff
	ff		 mov	 ecx, DWORD PTR _light$[ebp]
  01423	89 88 04 00 00
	00		 mov	 DWORD PTR ?object_3d_object_base@@3PAUOBJECT_3D_INFO@@A[eax+4], ecx

; 907  : 
; 908  : 		//
; 909  : 		//	Set up this objects' object info structure
; 910  : 		//
; 911  : 
; 912  : 		object_3d_object_base[object_3d_object_current_base].points_base = object_3d_points_current_base;

  01429	6b 05 00 00 00
	00 2c		 imul	 eax, DWORD PTR ?object_3d_object_current_base@@3HA, 44 ; object_3d_object_current_base
  01430	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?object_3d_points_current_base@@3HA ; object_3d_points_current_base
  01436	89 88 24 00 00
	00		 mov	 DWORD PTR ?object_3d_object_base@@3PAUOBJECT_3D_INFO@@A[eax+36], ecx

; 913  : 		object_3d_object_base[object_3d_object_current_base].camera_position = object_camera_position;

  0143c	6b 05 00 00 00
	00 2c		 imul	 eax, DWORD PTR ?object_3d_object_current_base@@3HA, 44 ; object_3d_object_current_base
  01443	05 08 00 00 00	 add	 eax, OFFSET ?object_3d_object_base@@3PAUOBJECT_3D_INFO@@A+8
  01448	8b 4d 9c	 mov	 ecx, DWORD PTR _object_camera_position$[ebp]
  0144b	89 08		 mov	 DWORD PTR [eax], ecx
  0144d	8b 55 a0	 mov	 edx, DWORD PTR _object_camera_position$[ebp+4]
  01450	89 50 04	 mov	 DWORD PTR [eax+4], edx
  01453	8b 4d a4	 mov	 ecx, DWORD PTR _object_camera_position$[ebp+8]
  01456	89 48 08	 mov	 DWORD PTR [eax+8], ecx

; 914  : 		object_3d_object_base[object_3d_object_current_base].camera_direction = object_camera_direction;

  01459	6b 05 00 00 00
	00 2c		 imul	 eax, DWORD PTR ?object_3d_object_current_base@@3HA, 44 ; object_3d_object_current_base
  01460	05 14 00 00 00	 add	 eax, OFFSET ?object_3d_object_base@@3PAUOBJECT_3D_INFO@@A+20
  01465	8b 4d 90	 mov	 ecx, DWORD PTR _object_camera_direction$[ebp]
  01468	89 08		 mov	 DWORD PTR [eax], ecx
  0146a	8b 55 94	 mov	 edx, DWORD PTR _object_camera_direction$[ebp+4]
  0146d	89 50 04	 mov	 DWORD PTR [eax+4], edx
  01470	8b 4d 98	 mov	 ecx, DWORD PTR _object_camera_direction$[ebp+8]
  01473	89 48 08	 mov	 DWORD PTR [eax+8], ecx

; 915  : 		object_3d_object_base[object_3d_object_current_base].object_vp = &vp;

  01476	6b 05 00 00 00
	00 2c		 imul	 eax, DWORD PTR ?object_3d_object_current_base@@3HA, 44 ; object_3d_object_current_base
  0147d	8d 8d 04 ff ff
	ff		 lea	 ecx, DWORD PTR _vp$[ebp]
  01483	89 88 28 00 00
	00		 mov	 DWORD PTR ?object_3d_object_base@@3PAUOBJECT_3D_INFO@@A[eax+40], ecx

; 916  : 		object_3d_object_base[object_3d_object_current_base].object_number = object_number;

  01489	6b 05 00 00 00
	00 2c		 imul	 eax, DWORD PTR ?object_3d_object_current_base@@3HA, 44 ; object_3d_object_current_base
  01490	8b 4d f8	 mov	 ecx, DWORD PTR _object_number$[ebp]
  01493	89 88 20 00 00
	00		 mov	 DWORD PTR ?object_3d_object_base@@3PAUOBJECT_3D_INFO@@A[eax+32], ecx

; 917  : 
; 918  : 		current_object_3d_object_base = &object_3d_object_base[object_3d_object_current_base];

  01499	6b 05 00 00 00
	00 2c		 imul	 eax, DWORD PTR ?object_3d_object_current_base@@3HA, 44 ; object_3d_object_current_base
  014a0	05 00 00 00 00	 add	 eax, OFFSET ?object_3d_object_base@@3PAUOBJECT_3D_INFO@@A ; object_3d_object_base
  014a5	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_object_base@@3PAUOBJECT_3D_INFO@@A, eax ; current_object_3d_object_base

; 919  : 
; 920  : 		if ( objects_3d_data[object_number].number_of_points )

  014aa	6b 45 f8 68	 imul	 eax, DWORD PTR _object_number$[ebp], 104
  014ae	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?objects_3d_data@@3PAUOBJECT_3D@@A ; objects_3d_data
  014b4	0f b7 14 01	 movzx	 edx, WORD PTR [ecx+eax]
  014b8	85 d2		 test	 edx, edx
  014ba	0f 84 7c 01 00
	00		 je	 $LN25@draw_sub_o

; 921  : 		{
; 922  : 
; 923  : 			int
; 924  : 				object_outcode;
; 925  : 
; 926  : 			//
; 927  : 			// Setup the objects scaling information
; 928  : 			//
; 929  : 
; 930  : 			if ( !get_object_3d_outcode ( object_number, current_object_3d_relative_position, &object_outcode ) )

  014c0	8d 85 e0 fe ff
	ff		 lea	 eax, DWORD PTR _object_outcode$2[ebp]
  014c6	50		 push	 eax
  014c7	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_object_3d_relative_position@@3PAUVEC3D@@A ; current_object_3d_relative_position
  014cd	51		 push	 ecx
  014ce	8b 55 f8	 mov	 edx, DWORD PTR _object_number$[ebp]
  014d1	52		 push	 edx
  014d2	e8 00 00 00 00	 call	 ?get_object_3d_outcode@@YGHHPAUVEC3D@@PAH@Z ; get_object_3d_outcode
  014d7	85 c0		 test	 eax, eax
  014d9	0f 85 5d 01 00
	00		 jne	 $LN25@draw_sub_o

; 931  : 			{
; 932  : 
; 933  : 				illuminate_3d_object ( &objects_3d_data[object_number], current_object_3d_relative_position, object_3d_object_base[object_3d_object_current_base].lights, &object_camera_position, object_3d_points_current_base );

  014df	a1 00 00 00 00	 mov	 eax, DWORD PTR ?object_3d_points_current_base@@3HA ; object_3d_points_current_base
  014e4	50		 push	 eax
  014e5	8d 4d 9c	 lea	 ecx, DWORD PTR _object_camera_position$[ebp]
  014e8	51		 push	 ecx
  014e9	6b 15 00 00 00
	00 2c		 imul	 edx, DWORD PTR ?object_3d_object_current_base@@3HA, 44 ; object_3d_object_current_base
  014f0	8b 82 04 00 00
	00		 mov	 eax, DWORD PTR ?object_3d_object_base@@3PAUOBJECT_3D_INFO@@A[edx+4]
  014f6	50		 push	 eax
  014f7	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_object_3d_relative_position@@3PAUVEC3D@@A ; current_object_3d_relative_position
  014fd	51		 push	 ecx
  014fe	6b 55 f8 68	 imul	 edx, DWORD PTR _object_number$[ebp], 104
  01502	03 15 00 00 00
	00		 add	 edx, DWORD PTR ?objects_3d_data@@3PAUOBJECT_3D@@A ; objects_3d_data
  01508	52		 push	 edx
  01509	e8 00 00 00 00	 call	 ?illuminate_3d_object@@YGXPAUOBJECT_3D@@PAUVEC3D@@PAULIGHT_3D_SOURCE@@1H@Z ; illuminate_3d_object

; 934  : 
; 935  : 				if ( object_outcode )

  0150e	83 bd e0 fe ff
	ff 00		 cmp	 DWORD PTR _object_outcode$2[ebp], 0
  01515	74 6b		 je	 SHORT $LN13@draw_sub_o

; 936  : 				{
; 937  : 
; 938  : 					if ( current_3d_object_is_flat )

  01517	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?current_3d_object_is_flat@@3HA, 0 ; current_3d_object_is_flat
  0151e	74 31		 je	 SHORT $LN15@draw_sub_o

; 939  : 					{
; 940  : 
; 941  : 						transform_flat_3d_object ( &objects_3d_data[object_number], current_object_3d_relative_position, object_3d_object_base[object_3d_object_current_base].lights, &object_camera_position, object_3d_points_current_base );

  01520	a1 00 00 00 00	 mov	 eax, DWORD PTR ?object_3d_points_current_base@@3HA ; object_3d_points_current_base
  01525	50		 push	 eax
  01526	8d 4d 9c	 lea	 ecx, DWORD PTR _object_camera_position$[ebp]
  01529	51		 push	 ecx
  0152a	6b 15 00 00 00
	00 2c		 imul	 edx, DWORD PTR ?object_3d_object_current_base@@3HA, 44 ; object_3d_object_current_base
  01531	8b 82 04 00 00
	00		 mov	 eax, DWORD PTR ?object_3d_object_base@@3PAUOBJECT_3D_INFO@@A[edx+4]
  01537	50		 push	 eax
  01538	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_object_3d_relative_position@@3PAUVEC3D@@A ; current_object_3d_relative_position
  0153e	51		 push	 ecx
  0153f	6b 55 f8 68	 imul	 edx, DWORD PTR _object_number$[ebp], 104
  01543	03 15 00 00 00
	00		 add	 edx, DWORD PTR ?objects_3d_data@@3PAUOBJECT_3D@@A ; objects_3d_data
  01549	52		 push	 edx
  0154a	e8 00 00 00 00	 call	 ?transform_flat_3d_object@@YGXPAUOBJECT_3D@@PAUVEC3D@@PAULIGHT_3D_SOURCE@@1H@Z ; transform_flat_3d_object

; 942  : 					}
; 943  : 					else

  0154f	eb 2f		 jmp	 SHORT $LN16@draw_sub_o
$LN15@draw_sub_o:

; 944  : 					{
; 945  : 
; 946  : 						transform_3d_object ( &objects_3d_data[object_number], current_object_3d_relative_position, object_3d_object_base[object_3d_object_current_base].lights, &object_camera_position, object_3d_points_current_base );

  01551	a1 00 00 00 00	 mov	 eax, DWORD PTR ?object_3d_points_current_base@@3HA ; object_3d_points_current_base
  01556	50		 push	 eax
  01557	8d 4d 9c	 lea	 ecx, DWORD PTR _object_camera_position$[ebp]
  0155a	51		 push	 ecx
  0155b	6b 15 00 00 00
	00 2c		 imul	 edx, DWORD PTR ?object_3d_object_current_base@@3HA, 44 ; object_3d_object_current_base
  01562	8b 82 04 00 00
	00		 mov	 eax, DWORD PTR ?object_3d_object_base@@3PAUOBJECT_3D_INFO@@A[edx+4]
  01568	50		 push	 eax
  01569	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_object_3d_relative_position@@3PAUVEC3D@@A ; current_object_3d_relative_position
  0156f	51		 push	 ecx
  01570	6b 55 f8 68	 imul	 edx, DWORD PTR _object_number$[ebp], 104
  01574	03 15 00 00 00
	00		 add	 edx, DWORD PTR ?objects_3d_data@@3PAUOBJECT_3D@@A ; objects_3d_data
  0157a	52		 push	 edx
  0157b	e8 00 00 00 00	 call	 ?transform_3d_object@@YGXPAUOBJECT_3D@@PAUVEC3D@@PAULIGHT_3D_SOURCE@@1H@Z ; transform_3d_object
$LN16@draw_sub_o:

; 947  : 					}
; 948  : 				}
; 949  : 				else

  01580	eb 69		 jmp	 SHORT $LN18@draw_sub_o
$LN13@draw_sub_o:

; 950  : 				{
; 951  : 
; 952  : 					if ( current_3d_object_is_flat )

  01582	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?current_3d_object_is_flat@@3HA, 0 ; current_3d_object_is_flat
  01589	74 31		 je	 SHORT $LN17@draw_sub_o

; 953  : 					{
; 954  : 
; 955  : 						transform_unclipped_flat_3d_object ( &objects_3d_data[object_number], current_object_3d_relative_position, object_3d_object_base[object_3d_object_current_base].lights, &object_camera_position, object_3d_points_current_base );

  0158b	a1 00 00 00 00	 mov	 eax, DWORD PTR ?object_3d_points_current_base@@3HA ; object_3d_points_current_base
  01590	50		 push	 eax
  01591	8d 4d 9c	 lea	 ecx, DWORD PTR _object_camera_position$[ebp]
  01594	51		 push	 ecx
  01595	6b 15 00 00 00
	00 2c		 imul	 edx, DWORD PTR ?object_3d_object_current_base@@3HA, 44 ; object_3d_object_current_base
  0159c	8b 82 04 00 00
	00		 mov	 eax, DWORD PTR ?object_3d_object_base@@3PAUOBJECT_3D_INFO@@A[edx+4]
  015a2	50		 push	 eax
  015a3	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_object_3d_relative_position@@3PAUVEC3D@@A ; current_object_3d_relative_position
  015a9	51		 push	 ecx
  015aa	6b 55 f8 68	 imul	 edx, DWORD PTR _object_number$[ebp], 104
  015ae	03 15 00 00 00
	00		 add	 edx, DWORD PTR ?objects_3d_data@@3PAUOBJECT_3D@@A ; objects_3d_data
  015b4	52		 push	 edx
  015b5	e8 00 00 00 00	 call	 ?transform_unclipped_flat_3d_object@@YGXPAUOBJECT_3D@@PAUVEC3D@@PAULIGHT_3D_SOURCE@@1H@Z ; transform_unclipped_flat_3d_object

; 956  : 					}
; 957  : 					else

  015ba	eb 2f		 jmp	 SHORT $LN18@draw_sub_o
$LN17@draw_sub_o:

; 958  : 					{
; 959  : 
; 960  : 						transform_unclipped_3d_object ( &objects_3d_data[object_number], current_object_3d_relative_position, object_3d_object_base[object_3d_object_current_base].lights, &object_camera_position, object_3d_points_current_base );

  015bc	a1 00 00 00 00	 mov	 eax, DWORD PTR ?object_3d_points_current_base@@3HA ; object_3d_points_current_base
  015c1	50		 push	 eax
  015c2	8d 4d 9c	 lea	 ecx, DWORD PTR _object_camera_position$[ebp]
  015c5	51		 push	 ecx
  015c6	6b 15 00 00 00
	00 2c		 imul	 edx, DWORD PTR ?object_3d_object_current_base@@3HA, 44 ; object_3d_object_current_base
  015cd	8b 82 04 00 00
	00		 mov	 eax, DWORD PTR ?object_3d_object_base@@3PAUOBJECT_3D_INFO@@A[edx+4]
  015d3	50		 push	 eax
  015d4	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_object_3d_relative_position@@3PAUVEC3D@@A ; current_object_3d_relative_position
  015da	51		 push	 ecx
  015db	6b 55 f8 68	 imul	 edx, DWORD PTR _object_number$[ebp], 104
  015df	03 15 00 00 00
	00		 add	 edx, DWORD PTR ?objects_3d_data@@3PAUOBJECT_3D@@A ; objects_3d_data
  015e5	52		 push	 edx
  015e6	e8 00 00 00 00	 call	 ?transform_unclipped_3d_object@@YGXPAUOBJECT_3D@@PAUVEC3D@@PAULIGHT_3D_SOURCE@@1H@Z ; transform_unclipped_3d_object
$LN18@draw_sub_o:

; 961  : 					}
; 962  : 				}
; 963  : 
; 964  : 				//
; 965  : 				// Render the faces now.
; 966  : 				//
; 967  : 
; 968  : 				if ( object_outcode )

  015eb	83 bd e0 fe ff
	ff 00		 cmp	 DWORD PTR _object_outcode$2[ebp], 0
  015f2	74 25		 je	 SHORT $LN19@draw_sub_o

; 969  : 				{
; 970  : 
; 971  : 					if ( ( textured_object_rendering_enabled ) || ( infrared_override ) )

  015f4	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?textured_object_rendering_enabled@@3HA, 0 ; textured_object_rendering_enabled
  015fb	75 06		 jne	 SHORT $LN23@draw_sub_o
  015fd	83 7d 18 00	 cmp	 DWORD PTR _infrared_override$[ebp], 0
  01601	74 0b		 je	 SHORT $LN21@draw_sub_o
$LN23@draw_sub_o:

; 972  : 					{
; 973  : 
; 974  : 						draw_3d_object_clipped_faces ( object_number );

  01603	8b 45 f8	 mov	 eax, DWORD PTR _object_number$[ebp]
  01606	50		 push	 eax
  01607	e8 00 00 00 00	 call	 ?draw_3d_object_clipped_faces@@YGXH@Z ; draw_3d_object_clipped_faces

; 975  : 					}
; 976  : 					else

  0160c	eb 09		 jmp	 SHORT $LN22@draw_sub_o
$LN21@draw_sub_o:

; 977  : 					{
; 978  : 
; 979  : 						draw_3d_object_untextured_clipped_faces ( object_number );

  0160e	8b 45 f8	 mov	 eax, DWORD PTR _object_number$[ebp]
  01611	50		 push	 eax
  01612	e8 00 00 00 00	 call	 ?draw_3d_object_untextured_clipped_faces@@YGXH@Z ; draw_3d_object_untextured_clipped_faces
$LN22@draw_sub_o:

; 980  : 					}
; 981  : 				}
; 982  : 				else

  01617	eb 23		 jmp	 SHORT $LN25@draw_sub_o
$LN19@draw_sub_o:

; 983  : 				{
; 984  : 
; 985  : 					if ( ( textured_object_rendering_enabled ) || ( infrared_override ) )

  01619	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?textured_object_rendering_enabled@@3HA, 0 ; textured_object_rendering_enabled
  01620	75 06		 jne	 SHORT $LN26@draw_sub_o
  01622	83 7d 18 00	 cmp	 DWORD PTR _infrared_override$[ebp], 0
  01626	74 0b		 je	 SHORT $LN24@draw_sub_o
$LN26@draw_sub_o:

; 986  : 					{
; 987  : 
; 988  : 						draw_3d_object_unclipped_faces ( object_number );

  01628	8b 45 f8	 mov	 eax, DWORD PTR _object_number$[ebp]
  0162b	50		 push	 eax
  0162c	e8 00 00 00 00	 call	 ?draw_3d_object_unclipped_faces@@YGXH@Z ; draw_3d_object_unclipped_faces

; 989  : 					}
; 990  : 					else

  01631	eb 09		 jmp	 SHORT $LN25@draw_sub_o
$LN24@draw_sub_o:

; 991  : 					{
; 992  : 
; 993  : 						draw_3d_object_untextured_unclipped_faces ( object_number );

  01633	8b 45 f8	 mov	 eax, DWORD PTR _object_number$[ebp]
  01636	50		 push	 eax
  01637	e8 00 00 00 00	 call	 ?draw_3d_object_untextured_unclipped_faces@@YGXH@Z ; draw_3d_object_untextured_unclipped_faces
$LN25@draw_sub_o:

; 994  : 					}
; 995  : 				}
; 996  : 			}
; 997  : 		}
; 998  : 	}
; 999  : 
; 1000 : 	//
; 1001 : 	// Recurse down any sub objects
; 1002 : 	//
; 1003 : 
; 1004 : 	if ( scene->number_of_sub_objects )

  0163c	8b 45 0c	 mov	 eax, DWORD PTR _scene$[ebp]
  0163f	0f b6 48 02	 movzx	 ecx, BYTE PTR [eax+2]
  01643	85 c9		 test	 ecx, ecx
  01645	0f 84 36 01 00
	00		 je	 $LN6@draw_sub_o

; 1005 : 	{
; 1006 : 
; 1007 : 		if ( ( obj ) && ( obj->sub_objects ) )

  0164b	83 7d 08 00	 cmp	 DWORD PTR _obj$[ebp], 0
  0164f	0f 84 a0 00 00
	00		 je	 $LN28@draw_sub_o
  01655	8b 45 08	 mov	 eax, DWORD PTR _obj$[ebp]
  01658	83 78 04 00	 cmp	 DWORD PTR [eax+4], 0
  0165c	0f 84 93 00 00
	00		 je	 $LN28@draw_sub_o

; 1008 : 		{
; 1009 : 
; 1010 : 			for ( count = ( scene->number_of_sub_objects -1 ); count >= 0; count-- )

  01662	8b 45 0c	 mov	 eax, DWORD PTR _scene$[ebp]
  01665	0f b6 48 02	 movzx	 ecx, BYTE PTR [eax+2]
  01669	83 e9 01	 sub	 ecx, 1
  0166c	89 4d fc	 mov	 DWORD PTR _count$[ebp], ecx
  0166f	eb 09		 jmp	 SHORT $LN4@draw_sub_o
$LN2@draw_sub_o:
  01671	8b 45 fc	 mov	 eax, DWORD PTR _count$[ebp]
  01674	83 e8 01	 sub	 eax, 1
  01677	89 45 fc	 mov	 DWORD PTR _count$[ebp], eax
$LN4@draw_sub_o:
  0167a	83 7d fc 00	 cmp	 DWORD PTR _count$[ebp], 0
  0167e	7c 70		 jl	 SHORT $LN3@draw_sub_o

; 1011 : 			{
; 1012 : 
; 1013 : 				if (	( obj->sub_objects[count].visible_object ) &&
; 1014 : 						( scene->sub_objects[count].sub_object_approximation_in_level <= object_3d_approximation_level ) &&

  01680	6b 45 fc 30	 imul	 eax, DWORD PTR _count$[ebp], 48
  01684	8b 4d 08	 mov	 ecx, DWORD PTR _obj$[ebp]
  01687	8b 51 04	 mov	 edx, DWORD PTR [ecx+4]
  0168a	8b 44 02 08	 mov	 eax, DWORD PTR [edx+eax+8]
  0168e	83 e0 01	 and	 eax, 1
  01691	74 5b		 je	 SHORT $LN30@draw_sub_o
  01693	6b 45 fc 38	 imul	 eax, DWORD PTR _count$[ebp], 56
  01697	8b 4d 0c	 mov	 ecx, DWORD PTR _scene$[ebp]
  0169a	8b 51 34	 mov	 edx, DWORD PTR [ecx+52]
  0169d	0f b6 44 02 05	 movzx	 eax, BYTE PTR [edx+eax+5]
  016a2	3b 05 00 00 00
	00		 cmp	 eax, DWORD PTR ?object_3d_approximation_level@@3HA ; object_3d_approximation_level
  016a8	7f 44		 jg	 SHORT $LN30@draw_sub_o
  016aa	6b 45 fc 38	 imul	 eax, DWORD PTR _count$[ebp], 56
  016ae	8b 4d 0c	 mov	 ecx, DWORD PTR _scene$[ebp]
  016b1	8b 51 34	 mov	 edx, DWORD PTR [ecx+52]
  016b4	0f b6 44 02 06	 movzx	 eax, BYTE PTR [edx+eax+6]
  016b9	3b 05 00 00 00
	00		 cmp	 eax, DWORD PTR ?object_3d_approximation_level@@3HA ; object_3d_approximation_level
  016bf	7c 2d		 jl	 SHORT $LN30@draw_sub_o

; 1015 : 						( scene->sub_objects[count].sub_object_approximation_out_level >= object_3d_approximation_level ) )
; 1016 : 				{
; 1017 : 
; 1018 : 					draw_sub_object ( &obj->sub_objects[count], &scene->sub_objects[count], &vp, current_object_3d_relative_position, infrared_override );

  016c1	8b 45 18	 mov	 eax, DWORD PTR _infrared_override$[ebp]
  016c4	50		 push	 eax
  016c5	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_object_3d_relative_position@@3PAUVEC3D@@A ; current_object_3d_relative_position
  016cb	51		 push	 ecx
  016cc	8d 95 04 ff ff
	ff		 lea	 edx, DWORD PTR _vp$[ebp]
  016d2	52		 push	 edx
  016d3	6b 45 fc 38	 imul	 eax, DWORD PTR _count$[ebp], 56
  016d7	8b 4d 0c	 mov	 ecx, DWORD PTR _scene$[ebp]
  016da	03 41 34	 add	 eax, DWORD PTR [ecx+52]
  016dd	50		 push	 eax
  016de	6b 55 fc 30	 imul	 edx, DWORD PTR _count$[ebp], 48
  016e2	8b 45 08	 mov	 eax, DWORD PTR _obj$[ebp]
  016e5	03 50 04	 add	 edx, DWORD PTR [eax+4]
  016e8	52		 push	 edx
  016e9	e8 00 00 00 00	 call	 ?draw_sub_object@@YGXPAUOBJECT_3D_SUB_INSTANCE@@PAUOBJECT_3D_DATABASE_ENTRY@@PAUVIEWPOINT@@PAUVEC3D@@H@Z ; draw_sub_object
$LN30@draw_sub_o:

; 1019 : 				}
; 1020 : 			}

  016ee	eb 81		 jmp	 SHORT $LN2@draw_sub_o
$LN3@draw_sub_o:

; 1021 : 		}
; 1022 : 		else

  016f0	e9 8c 00 00 00	 jmp	 $LN6@draw_sub_o
$LN28@draw_sub_o:

; 1023 : 		{
; 1024 : 
; 1025 : 			for ( count = ( scene->number_of_sub_objects -1 ); count >= 0; count-- )

  016f5	8b 45 0c	 mov	 eax, DWORD PTR _scene$[ebp]
  016f8	0f b6 48 02	 movzx	 ecx, BYTE PTR [eax+2]
  016fc	83 e9 01	 sub	 ecx, 1
  016ff	89 4d fc	 mov	 DWORD PTR _count$[ebp], ecx
  01702	eb 09		 jmp	 SHORT $LN7@draw_sub_o
$LN5@draw_sub_o:
  01704	8b 45 fc	 mov	 eax, DWORD PTR _count$[ebp]
  01707	83 e8 01	 sub	 eax, 1
  0170a	89 45 fc	 mov	 DWORD PTR _count$[ebp], eax
$LN7@draw_sub_o:
  0170d	83 7d fc 00	 cmp	 DWORD PTR _count$[ebp], 0
  01711	7c 6e		 jl	 SHORT $LN6@draw_sub_o

; 1026 : 			{
; 1027 : 
; 1028 : 				if (	( scene->sub_objects[count].default_visibility ) &&
; 1029 : 						( scene->sub_objects[count].sub_object_approximation_in_level <= object_3d_approximation_level ) &&

  01713	6b 45 fc 38	 imul	 eax, DWORD PTR _count$[ebp], 56
  01717	8b 4d 0c	 mov	 ecx, DWORD PTR _scene$[ebp]
  0171a	8b 51 34	 mov	 edx, DWORD PTR [ecx+52]
  0171d	8a 44 02 07	 mov	 al, BYTE PTR [edx+eax+7]
  01721	c0 e8 06	 shr	 al, 6
  01724	24 01		 and	 al, 1
  01726	0f b6 c8	 movzx	 ecx, al
  01729	85 c9		 test	 ecx, ecx
  0172b	74 52		 je	 SHORT $LN31@draw_sub_o
  0172d	6b 45 fc 38	 imul	 eax, DWORD PTR _count$[ebp], 56
  01731	8b 4d 0c	 mov	 ecx, DWORD PTR _scene$[ebp]
  01734	8b 51 34	 mov	 edx, DWORD PTR [ecx+52]
  01737	0f b6 44 02 05	 movzx	 eax, BYTE PTR [edx+eax+5]
  0173c	3b 05 00 00 00
	00		 cmp	 eax, DWORD PTR ?object_3d_approximation_level@@3HA ; object_3d_approximation_level
  01742	7f 3b		 jg	 SHORT $LN31@draw_sub_o
  01744	6b 45 fc 38	 imul	 eax, DWORD PTR _count$[ebp], 56
  01748	8b 4d 0c	 mov	 ecx, DWORD PTR _scene$[ebp]
  0174b	8b 51 34	 mov	 edx, DWORD PTR [ecx+52]
  0174e	0f b6 44 02 06	 movzx	 eax, BYTE PTR [edx+eax+6]
  01753	3b 05 00 00 00
	00		 cmp	 eax, DWORD PTR ?object_3d_approximation_level@@3HA ; object_3d_approximation_level
  01759	7c 24		 jl	 SHORT $LN31@draw_sub_o

; 1030 : 						( scene->sub_objects[count].sub_object_approximation_out_level >= object_3d_approximation_level ) )
; 1031 : 				{
; 1032 : 
; 1033 : 					draw_sub_object ( NULL, &scene->sub_objects[count], &vp, current_object_3d_relative_position, infrared_override );

  0175b	8b 45 18	 mov	 eax, DWORD PTR _infrared_override$[ebp]
  0175e	50		 push	 eax
  0175f	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_object_3d_relative_position@@3PAUVEC3D@@A ; current_object_3d_relative_position
  01765	51		 push	 ecx
  01766	8d 95 04 ff ff
	ff		 lea	 edx, DWORD PTR _vp$[ebp]
  0176c	52		 push	 edx
  0176d	6b 45 fc 38	 imul	 eax, DWORD PTR _count$[ebp], 56
  01771	8b 4d 0c	 mov	 ecx, DWORD PTR _scene$[ebp]
  01774	03 41 34	 add	 eax, DWORD PTR [ecx+52]
  01777	50		 push	 eax
  01778	6a 00		 push	 0
  0177a	e8 00 00 00 00	 call	 ?draw_sub_object@@YGXPAUOBJECT_3D_SUB_INSTANCE@@PAUOBJECT_3D_DATABASE_ENTRY@@PAUVIEWPOINT@@PAUVEC3D@@H@Z ; draw_sub_object
$LN31@draw_sub_o:

; 1034 : 				}
; 1035 : 			}

  0177f	eb 83		 jmp	 SHORT $LN5@draw_sub_o
$LN6@draw_sub_o:

; 1036 : 		}
; 1037 : 	}
; 1038 : 
; 1039 : 	//
; 1040 : 	// Restore object dissolve
; 1041 : 	//
; 1042 : 
; 1043 : 	{
; 1044 : 
; 1045 : 		int
; 1046 : 			itmp;
; 1047 : 
; 1048 : 		current_object_3d_dissolve_factor = old_current_object_3d_dissolve_factor;

  01781	f3 0f 10 45 f0	 movss	 xmm0, DWORD PTR _old_current_object_3d_dissolve_factor$[ebp]
  01786	f3 0f 11 05 00
	00 00 00	 movss	 DWORD PTR ?current_object_3d_dissolve_factor@@3MA, xmm0

; 1049 : 
; 1050 : 		asm_convert_float_to_int ( current_object_3d_dissolve_factor * 255, &itmp );

  0178e	8d 85 dc fe ff
	ff		 lea	 eax, DWORD PTR _itmp$1[ebp]
  01794	50		 push	 eax
  01795	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR ?current_object_3d_dissolve_factor@@3MA
  0179d	f3 0f 59 05 00
	00 00 00	 mulss	 xmm0, DWORD PTR __real@437f0000
  017a5	51		 push	 ecx
  017a6	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  017ab	e8 00 00 00 00	 call	 ?asm_convert_float_to_int@@YGXMPAH@Z ; asm_convert_float_to_int

; 1051 : 
; 1052 : 		current_object_3d_dissolve_value = itmp;

  017b0	8a 85 dc fe ff
	ff		 mov	 al, BYTE PTR _itmp$1[ebp]
  017b6	a2 00 00 00 00	 mov	 BYTE PTR ?current_object_3d_dissolve_value@@3EA, al ; current_object_3d_dissolve_value

; 1053 : 	}
; 1054 : 
; 1055 : 	//
; 1056 : 	// Restore the object rotation matrix
; 1057 : 	//
; 1058 : 
; 1059 : 	memcpy ( rotation_3d, temp_matrix, sizeof ( matrix3x3 ) );

  017bb	6a 24		 push	 36			; 00000024H
  017bd	8d 45 a8	 lea	 eax, DWORD PTR _temp_matrix$[ebp]
  017c0	50		 push	 eax
  017c1	68 00 00 00 00	 push	 OFFSET ?rotation_3d@@3PAY02MA ; rotation_3d
  017c6	e8 00 00 00 00	 call	 _memcpy
  017cb	83 c4 0c	 add	 esp, 12			; 0000000cH

; 1060 : 
; 1061 : 	memcpy ( &object_3d_scale, &temp_scale, sizeof ( vec3d ) );

  017ce	6a 0c		 push	 12			; 0000000cH
  017d0	8d 85 78 ff ff
	ff		 lea	 eax, DWORD PTR _temp_scale$[ebp]
  017d6	50		 push	 eax
  017d7	68 00 00 00 00	 push	 OFFSET ?object_3d_scale@@3UVEC3D@@A ; object_3d_scale
  017dc	e8 00 00 00 00	 call	 _memcpy
  017e1	83 c4 0c	 add	 esp, 12			; 0000000cH

; 1062 : 
; 1063 : 	current_object_3d_relative_position = old_current_object_3d_relative_position;

  017e4	8b 85 44 ff ff
	ff		 mov	 eax, DWORD PTR _old_current_object_3d_relative_position$[ebp]
  017ea	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_relative_position@@3PAUVEC3D@@A, eax ; current_object_3d_relative_position

; 1064 : }

  017ef	5f		 pop	 edi
  017f0	5e		 pop	 esi
  017f1	5b		 pop	 ebx
  017f2	8b e5		 mov	 esp, ebp
  017f4	5d		 pop	 ebp
  017f5	c2 14 00	 ret	 20			; 00000014H
?draw_sub_object@@YGXPAUOBJECT_3D_SUB_INSTANCE@@PAUOBJECT_3D_DATABASE_ENTRY@@PAUVIEWPOINT@@PAUVEC3D@@H@Z ENDP ; draw_sub_object
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\modules\3d\3dobjdrw.c
;	COMDAT ?draw_3d_translucent_object@@YGXPAUTRANSLUCENT_OBJECT_SURFACE@@@Z
_TEXT	SEGMENT
_illuminated_surface$1 = -52				; size = 4
_rel_pos$2 = -48					; size = 12
_surface$ = -36						; size = 4
_object_camera_direction$ = -32				; size = 12
_object_camera_position$ = -20				; size = 12
_light$ = -8						; size = 4
_object_number$ = -4					; size = 4
_translucent_surfaces$ = 8				; size = 4
?draw_3d_translucent_object@@YGXPAUTRANSLUCENT_OBJECT_SURFACE@@@Z PROC ; draw_3d_translucent_object, COMDAT

; 2253 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 74	 sub	 esp, 116		; 00000074H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 2254 : 
; 2255 : 	int
; 2256 : 		object_number;
; 2257 : 
; 2258 : 	light_3d_source
; 2259 : 		*light;
; 2260 : 
; 2261 : 	vec3d
; 2262 : 		object_camera_position,
; 2263 : 		object_camera_direction;
; 2264 : 
; 2265 : 	translucent_object_surface
; 2266 : 		*surface;
; 2267 : 
; 2268 : 	reset_deferred_state_changes ();

  00009	e8 00 00 00 00	 call	 ?reset_deferred_state_changes@@YGXXZ ; reset_deferred_state_changes

; 2269 : 
; 2270 : 	surface = translucent_surfaces;

  0000e	8b 45 08	 mov	 eax, DWORD PTR _translucent_surfaces$[ebp]
  00011	89 45 dc	 mov	 DWORD PTR _surface$[ebp], eax
$LN2@draw_3d_tr:

; 2271 : 
; 2272 : 	while ( surface )

  00014	83 7d dc 00	 cmp	 DWORD PTR _surface$[ebp], 0
  00018	0f 84 dd 0b 00
	00		 je	 $LN3@draw_3d_tr

; 2273 : 	{
; 2274 : 
; 2275 : 		if ( surface->surface->polygons )

  0001e	8b 45 dc	 mov	 eax, DWORD PTR _surface$[ebp]
  00021	8b 08		 mov	 ecx, DWORD PTR [eax]
  00023	66 8b 11	 mov	 dx, WORD PTR [ecx]
  00026	66 83 e2 01	 and	 dx, 1
  0002a	0f b7 c2	 movzx	 eax, dx
  0002d	85 c0		 test	 eax, eax
  0002f	0f 84 b5 0b 00
	00		 je	 $LN10@draw_3d_tr

; 2276 : 		{
; 2277 : 
; 2278 : 			//
; 2279 : 			// Set up the object drawing global variables
; 2280 : 			//
; 2281 : 
; 2282 : 			object_3d_points_current_base = 0;

  00035	c7 05 00 00 00
	00 00 00 00 00	 mov	 DWORD PTR ?object_3d_points_current_base@@3HA, 0 ; object_3d_points_current_base

; 2283 : 			object_3d_object_current_base = 0;

  0003f	c7 05 00 00 00
	00 00 00 00 00	 mov	 DWORD PTR ?object_3d_object_current_base@@3HA, 0 ; object_3d_object_current_base

; 2284 : 			object_3d_light_3d_current_base = 0;

  00049	c7 05 00 00 00
	00 00 00 00 00	 mov	 DWORD PTR ?object_3d_light_3d_current_base@@3HA, 0 ; object_3d_light_3d_current_base

; 2285 : 
; 2286 : 			current_object_3d_light_maps_enabled = surface->lightmaps_enabled;

  00053	8b 45 dc	 mov	 eax, DWORD PTR _surface$[ebp]
  00056	8b 48 40	 mov	 ecx, DWORD PTR [eax+64]
  00059	d1 e9		 shr	 ecx, 1
  0005b	83 e1 01	 and	 ecx, 1
  0005e	89 0d 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_light_maps_enabled@@3HA, ecx ; current_object_3d_light_maps_enabled

; 2287 : 
; 2288 : 			//
; 2289 : 			// Get the object's position relative to the camera
; 2290 : 			//
; 2291 : 
; 2292 : 			current_object_3d_relative_position = &surface->object_view_position;

  00064	8b 45 dc	 mov	 eax, DWORD PTR _surface$[ebp]
  00067	83 c0 50	 add	 eax, 80			; 00000050H
  0006a	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_relative_position@@3PAUVEC3D@@A, eax ; current_object_3d_relative_position

; 2293 : 
; 2294 : 			//
; 2295 : 			// Set the main objects' scaling values
; 2296 : 			//
; 2297 : 
; 2298 : 			object_3d_scale = surface->object_3d_scale;

  0006f	8b 45 dc	 mov	 eax, DWORD PTR _surface$[ebp]
  00072	83 c0 44	 add	 eax, 68			; 00000044H
  00075	8b 08		 mov	 ecx, DWORD PTR [eax]
  00077	89 0d 00 00 00
	00		 mov	 DWORD PTR ?object_3d_scale@@3UVEC3D@@A, ecx
  0007d	8b 50 04	 mov	 edx, DWORD PTR [eax+4]
  00080	89 15 04 00 00
	00		 mov	 DWORD PTR ?object_3d_scale@@3UVEC3D@@A+4, edx
  00086	8b 40 08	 mov	 eax, DWORD PTR [eax+8]
  00089	a3 08 00 00 00	 mov	 DWORD PTR ?object_3d_scale@@3UVEC3D@@A+8, eax

; 2299 : 
; 2300 : 			//
; 2301 : 			// Set the object dissolve variables
; 2302 : 			//
; 2303 : 
; 2304 : 			current_object_3d_dissolve_value = surface->dissolve_value;

  0008e	8b 45 dc	 mov	 eax, DWORD PTR _surface$[ebp]
  00091	8a 48 3c	 mov	 cl, BYTE PTR [eax+60]
  00094	88 0d 00 00 00
	00		 mov	 BYTE PTR ?current_object_3d_dissolve_value@@3EA, cl ; current_object_3d_dissolve_value

; 2305 : 			current_object_3d_dissolve_factor = current_object_3d_dissolve_value;

  0009a	0f b6 05 00 00
	00 00		 movzx	 eax, BYTE PTR ?current_object_3d_dissolve_value@@3EA ; current_object_3d_dissolve_value
  000a1	f3 0f 2a c0	 cvtsi2ss xmm0, eax
  000a5	f3 0f 11 05 00
	00 00 00	 movss	 DWORD PTR ?current_object_3d_dissolve_factor@@3MA, xmm0

; 2306 : 			current_object_3d_dissolve_factor /= 255.0;

  000ad	f3 0f 5a 05 00
	00 00 00	 cvtss2sd xmm0, DWORD PTR ?current_object_3d_dissolve_factor@@3MA
  000b5	f2 0f 5e 05 00
	00 00 00	 divsd	 xmm0, QWORD PTR __real@406fe00000000000
  000bd	f2 0f 5a c0	 cvtsd2ss xmm0, xmm0
  000c1	f3 0f 11 05 00
	00 00 00	 movss	 DWORD PTR ?current_object_3d_dissolve_factor@@3MA, xmm0

; 2307 : 
; 2308 : 			//
; 2309 : 			// Calculate the object's rotation matrix, to transform its 3d points relative to the view.
; 2310 : 			//
; 2311 : 
; 2312 : 			rotation_3d[0][0] = ( surface->vp.xv.x * visual_3d_vp->xv.x + surface->vp.xv.y * visual_3d_vp->xv.y + surface->vp.xv.z * visual_3d_vp->xv.z );

  000c9	8b 45 dc	 mov	 eax, DWORD PTR _surface$[ebp]
  000cc	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  000d2	f3 0f 10 40 10	 movss	 xmm0, DWORD PTR [eax+16]
  000d7	f3 0f 59 41 0c	 mulss	 xmm0, DWORD PTR [ecx+12]
  000dc	8b 55 dc	 mov	 edx, DWORD PTR _surface$[ebp]
  000df	a1 00 00 00 00	 mov	 eax, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  000e4	f3 0f 10 4a 14	 movss	 xmm1, DWORD PTR [edx+20]
  000e9	f3 0f 59 48 10	 mulss	 xmm1, DWORD PTR [eax+16]
  000ee	f3 0f 58 c1	 addss	 xmm0, xmm1
  000f2	8b 4d dc	 mov	 ecx, DWORD PTR _surface$[ebp]
  000f5	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  000fb	f3 0f 10 49 18	 movss	 xmm1, DWORD PTR [ecx+24]
  00100	f3 0f 59 4a 14	 mulss	 xmm1, DWORD PTR [edx+20]
  00105	f3 0f 58 c1	 addss	 xmm0, xmm1
  00109	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  0010e	6b c8 00	 imul	 ecx, eax, 0
  00111	ba 04 00 00 00	 mov	 edx, 4
  00116	6b c2 00	 imul	 eax, edx, 0
  00119	f3 0f 11 84 01
	00 00 00 00	 movss	 DWORD PTR ?rotation_3d@@3PAY02MA[ecx+eax], xmm0

; 2313 : 			rotation_3d[0][1] = ( surface->vp.xv.x * visual_3d_vp->yv.x + surface->vp.xv.y * visual_3d_vp->yv.y + surface->vp.xv.z * visual_3d_vp->yv.z );

  00122	8b 45 dc	 mov	 eax, DWORD PTR _surface$[ebp]
  00125	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  0012b	f3 0f 10 40 10	 movss	 xmm0, DWORD PTR [eax+16]
  00130	f3 0f 59 41 18	 mulss	 xmm0, DWORD PTR [ecx+24]
  00135	8b 55 dc	 mov	 edx, DWORD PTR _surface$[ebp]
  00138	a1 00 00 00 00	 mov	 eax, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  0013d	f3 0f 10 4a 14	 movss	 xmm1, DWORD PTR [edx+20]
  00142	f3 0f 59 48 1c	 mulss	 xmm1, DWORD PTR [eax+28]
  00147	f3 0f 58 c1	 addss	 xmm0, xmm1
  0014b	8b 4d dc	 mov	 ecx, DWORD PTR _surface$[ebp]
  0014e	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  00154	f3 0f 10 49 18	 movss	 xmm1, DWORD PTR [ecx+24]
  00159	f3 0f 59 4a 20	 mulss	 xmm1, DWORD PTR [edx+32]
  0015e	f3 0f 58 c1	 addss	 xmm0, xmm1
  00162	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  00167	6b c8 00	 imul	 ecx, eax, 0
  0016a	ba 04 00 00 00	 mov	 edx, 4
  0016f	c1 e2 00	 shl	 edx, 0
  00172	f3 0f 11 84 11
	00 00 00 00	 movss	 DWORD PTR ?rotation_3d@@3PAY02MA[ecx+edx], xmm0

; 2314 : 			rotation_3d[0][2] = ( surface->vp.xv.x * visual_3d_vp->zv.x + surface->vp.xv.y * visual_3d_vp->zv.y + surface->vp.xv.z * visual_3d_vp->zv.z );

  0017b	8b 45 dc	 mov	 eax, DWORD PTR _surface$[ebp]
  0017e	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  00184	f3 0f 10 40 10	 movss	 xmm0, DWORD PTR [eax+16]
  00189	f3 0f 59 41 24	 mulss	 xmm0, DWORD PTR [ecx+36]
  0018e	8b 55 dc	 mov	 edx, DWORD PTR _surface$[ebp]
  00191	a1 00 00 00 00	 mov	 eax, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  00196	f3 0f 10 4a 14	 movss	 xmm1, DWORD PTR [edx+20]
  0019b	f3 0f 59 48 28	 mulss	 xmm1, DWORD PTR [eax+40]
  001a0	f3 0f 58 c1	 addss	 xmm0, xmm1
  001a4	8b 4d dc	 mov	 ecx, DWORD PTR _surface$[ebp]
  001a7	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  001ad	f3 0f 10 49 18	 movss	 xmm1, DWORD PTR [ecx+24]
  001b2	f3 0f 59 4a 2c	 mulss	 xmm1, DWORD PTR [edx+44]
  001b7	f3 0f 58 c1	 addss	 xmm0, xmm1
  001bb	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  001c0	6b c8 00	 imul	 ecx, eax, 0
  001c3	ba 04 00 00 00	 mov	 edx, 4
  001c8	d1 e2		 shl	 edx, 1
  001ca	f3 0f 11 84 11
	00 00 00 00	 movss	 DWORD PTR ?rotation_3d@@3PAY02MA[ecx+edx], xmm0

; 2315 : 
; 2316 : 			rotation_3d[1][0] = ( surface->vp.yv.x * visual_3d_vp->xv.x + surface->vp.yv.y * visual_3d_vp->xv.y + surface->vp.yv.z * visual_3d_vp->xv.z );

  001d3	8b 45 dc	 mov	 eax, DWORD PTR _surface$[ebp]
  001d6	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  001dc	f3 0f 10 40 1c	 movss	 xmm0, DWORD PTR [eax+28]
  001e1	f3 0f 59 41 0c	 mulss	 xmm0, DWORD PTR [ecx+12]
  001e6	8b 55 dc	 mov	 edx, DWORD PTR _surface$[ebp]
  001e9	a1 00 00 00 00	 mov	 eax, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  001ee	f3 0f 10 4a 20	 movss	 xmm1, DWORD PTR [edx+32]
  001f3	f3 0f 59 48 10	 mulss	 xmm1, DWORD PTR [eax+16]
  001f8	f3 0f 58 c1	 addss	 xmm0, xmm1
  001fc	8b 4d dc	 mov	 ecx, DWORD PTR _surface$[ebp]
  001ff	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  00205	f3 0f 10 49 24	 movss	 xmm1, DWORD PTR [ecx+36]
  0020a	f3 0f 59 4a 14	 mulss	 xmm1, DWORD PTR [edx+20]
  0020f	f3 0f 58 c1	 addss	 xmm0, xmm1
  00213	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  00218	c1 e0 00	 shl	 eax, 0
  0021b	b9 04 00 00 00	 mov	 ecx, 4
  00220	6b d1 00	 imul	 edx, ecx, 0
  00223	f3 0f 11 84 10
	00 00 00 00	 movss	 DWORD PTR ?rotation_3d@@3PAY02MA[eax+edx], xmm0

; 2317 : 			rotation_3d[1][1] = ( surface->vp.yv.x * visual_3d_vp->yv.x + surface->vp.yv.y * visual_3d_vp->yv.y + surface->vp.yv.z * visual_3d_vp->yv.z );

  0022c	8b 45 dc	 mov	 eax, DWORD PTR _surface$[ebp]
  0022f	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  00235	f3 0f 10 40 1c	 movss	 xmm0, DWORD PTR [eax+28]
  0023a	f3 0f 59 41 18	 mulss	 xmm0, DWORD PTR [ecx+24]
  0023f	8b 55 dc	 mov	 edx, DWORD PTR _surface$[ebp]
  00242	a1 00 00 00 00	 mov	 eax, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  00247	f3 0f 10 4a 20	 movss	 xmm1, DWORD PTR [edx+32]
  0024c	f3 0f 59 48 1c	 mulss	 xmm1, DWORD PTR [eax+28]
  00251	f3 0f 58 c1	 addss	 xmm0, xmm1
  00255	8b 4d dc	 mov	 ecx, DWORD PTR _surface$[ebp]
  00258	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  0025e	f3 0f 10 49 24	 movss	 xmm1, DWORD PTR [ecx+36]
  00263	f3 0f 59 4a 20	 mulss	 xmm1, DWORD PTR [edx+32]
  00268	f3 0f 58 c1	 addss	 xmm0, xmm1
  0026c	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  00271	c1 e0 00	 shl	 eax, 0
  00274	b9 04 00 00 00	 mov	 ecx, 4
  00279	c1 e1 00	 shl	 ecx, 0
  0027c	f3 0f 11 84 08
	00 00 00 00	 movss	 DWORD PTR ?rotation_3d@@3PAY02MA[eax+ecx], xmm0

; 2318 : 			rotation_3d[1][2] = ( surface->vp.yv.x * visual_3d_vp->zv.x + surface->vp.yv.y * visual_3d_vp->zv.y + surface->vp.yv.z * visual_3d_vp->zv.z );

  00285	8b 45 dc	 mov	 eax, DWORD PTR _surface$[ebp]
  00288	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  0028e	f3 0f 10 40 1c	 movss	 xmm0, DWORD PTR [eax+28]
  00293	f3 0f 59 41 24	 mulss	 xmm0, DWORD PTR [ecx+36]
  00298	8b 55 dc	 mov	 edx, DWORD PTR _surface$[ebp]
  0029b	a1 00 00 00 00	 mov	 eax, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  002a0	f3 0f 10 4a 20	 movss	 xmm1, DWORD PTR [edx+32]
  002a5	f3 0f 59 48 28	 mulss	 xmm1, DWORD PTR [eax+40]
  002aa	f3 0f 58 c1	 addss	 xmm0, xmm1
  002ae	8b 4d dc	 mov	 ecx, DWORD PTR _surface$[ebp]
  002b1	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  002b7	f3 0f 10 49 24	 movss	 xmm1, DWORD PTR [ecx+36]
  002bc	f3 0f 59 4a 2c	 mulss	 xmm1, DWORD PTR [edx+44]
  002c1	f3 0f 58 c1	 addss	 xmm0, xmm1
  002c5	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  002ca	c1 e0 00	 shl	 eax, 0
  002cd	b9 04 00 00 00	 mov	 ecx, 4
  002d2	d1 e1		 shl	 ecx, 1
  002d4	f3 0f 11 84 08
	00 00 00 00	 movss	 DWORD PTR ?rotation_3d@@3PAY02MA[eax+ecx], xmm0

; 2319 : 
; 2320 : 			rotation_3d[2][0] = ( surface->vp.zv.x * visual_3d_vp->xv.x + surface->vp.zv.y * visual_3d_vp->xv.y + surface->vp.zv.z * visual_3d_vp->xv.z );

  002dd	8b 45 dc	 mov	 eax, DWORD PTR _surface$[ebp]
  002e0	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  002e6	f3 0f 10 40 28	 movss	 xmm0, DWORD PTR [eax+40]
  002eb	f3 0f 59 41 0c	 mulss	 xmm0, DWORD PTR [ecx+12]
  002f0	8b 55 dc	 mov	 edx, DWORD PTR _surface$[ebp]
  002f3	a1 00 00 00 00	 mov	 eax, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  002f8	f3 0f 10 4a 2c	 movss	 xmm1, DWORD PTR [edx+44]
  002fd	f3 0f 59 48 10	 mulss	 xmm1, DWORD PTR [eax+16]
  00302	f3 0f 58 c1	 addss	 xmm0, xmm1
  00306	8b 4d dc	 mov	 ecx, DWORD PTR _surface$[ebp]
  00309	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  0030f	f3 0f 10 49 30	 movss	 xmm1, DWORD PTR [ecx+48]
  00314	f3 0f 59 4a 14	 mulss	 xmm1, DWORD PTR [edx+20]
  00319	f3 0f 58 c1	 addss	 xmm0, xmm1
  0031d	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  00322	d1 e0		 shl	 eax, 1
  00324	b9 04 00 00 00	 mov	 ecx, 4
  00329	6b d1 00	 imul	 edx, ecx, 0
  0032c	f3 0f 11 84 10
	00 00 00 00	 movss	 DWORD PTR ?rotation_3d@@3PAY02MA[eax+edx], xmm0

; 2321 : 			rotation_3d[2][1] = ( surface->vp.zv.x * visual_3d_vp->yv.x + surface->vp.zv.y * visual_3d_vp->yv.y + surface->vp.zv.z * visual_3d_vp->yv.z );

  00335	8b 45 dc	 mov	 eax, DWORD PTR _surface$[ebp]
  00338	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  0033e	f3 0f 10 40 28	 movss	 xmm0, DWORD PTR [eax+40]
  00343	f3 0f 59 41 18	 mulss	 xmm0, DWORD PTR [ecx+24]
  00348	8b 55 dc	 mov	 edx, DWORD PTR _surface$[ebp]
  0034b	a1 00 00 00 00	 mov	 eax, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  00350	f3 0f 10 4a 2c	 movss	 xmm1, DWORD PTR [edx+44]
  00355	f3 0f 59 48 1c	 mulss	 xmm1, DWORD PTR [eax+28]
  0035a	f3 0f 58 c1	 addss	 xmm0, xmm1
  0035e	8b 4d dc	 mov	 ecx, DWORD PTR _surface$[ebp]
  00361	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  00367	f3 0f 10 49 30	 movss	 xmm1, DWORD PTR [ecx+48]
  0036c	f3 0f 59 4a 20	 mulss	 xmm1, DWORD PTR [edx+32]
  00371	f3 0f 58 c1	 addss	 xmm0, xmm1
  00375	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  0037a	d1 e0		 shl	 eax, 1
  0037c	b9 04 00 00 00	 mov	 ecx, 4
  00381	c1 e1 00	 shl	 ecx, 0
  00384	f3 0f 11 84 08
	00 00 00 00	 movss	 DWORD PTR ?rotation_3d@@3PAY02MA[eax+ecx], xmm0

; 2322 : 			rotation_3d[2][2] = ( surface->vp.zv.x * visual_3d_vp->zv.x + surface->vp.zv.y * visual_3d_vp->zv.y + surface->vp.zv.z * visual_3d_vp->zv.z );

  0038d	8b 45 dc	 mov	 eax, DWORD PTR _surface$[ebp]
  00390	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  00396	f3 0f 10 40 28	 movss	 xmm0, DWORD PTR [eax+40]
  0039b	f3 0f 59 41 24	 mulss	 xmm0, DWORD PTR [ecx+36]
  003a0	8b 55 dc	 mov	 edx, DWORD PTR _surface$[ebp]
  003a3	a1 00 00 00 00	 mov	 eax, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  003a8	f3 0f 10 4a 2c	 movss	 xmm1, DWORD PTR [edx+44]
  003ad	f3 0f 59 48 28	 mulss	 xmm1, DWORD PTR [eax+40]
  003b2	f3 0f 58 c1	 addss	 xmm0, xmm1
  003b6	8b 4d dc	 mov	 ecx, DWORD PTR _surface$[ebp]
  003b9	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  003bf	f3 0f 10 49 30	 movss	 xmm1, DWORD PTR [ecx+48]
  003c4	f3 0f 59 4a 2c	 mulss	 xmm1, DWORD PTR [edx+44]
  003c9	f3 0f 58 c1	 addss	 xmm0, xmm1
  003cd	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  003d2	d1 e0		 shl	 eax, 1
  003d4	b9 04 00 00 00	 mov	 ecx, 4
  003d9	d1 e1		 shl	 ecx, 1
  003db	f3 0f 11 84 08
	00 00 00 00	 movss	 DWORD PTR ?rotation_3d@@3PAY02MA[eax+ecx], xmm0

; 2323 : 
; 2324 : 			memcpy ( object_to_eye_attitude, rotation_3d, sizeof ( matrix3x3 ) );

  003e4	6a 24		 push	 36			; 00000024H
  003e6	68 00 00 00 00	 push	 OFFSET ?rotation_3d@@3PAY02MA ; rotation_3d
  003eb	68 00 00 00 00	 push	 OFFSET ?object_to_eye_attitude@@3PAY02MA ; object_to_eye_attitude
  003f0	e8 00 00 00 00	 call	 _memcpy
  003f5	83 c4 0c	 add	 esp, 12			; 0000000cH

; 2325 : 
; 2326 : 			rotation_3d[0][0] *= surface->object_3d_scale.x;

  003f8	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  003fd	6b c8 00	 imul	 ecx, eax, 0
  00400	ba 04 00 00 00	 mov	 edx, 4
  00405	6b c2 00	 imul	 eax, edx, 0
  00408	8b 55 dc	 mov	 edx, DWORD PTR _surface$[ebp]
  0040b	f3 0f 10 84 01
	00 00 00 00	 movss	 xmm0, DWORD PTR ?rotation_3d@@3PAY02MA[ecx+eax]
  00414	f3 0f 59 42 44	 mulss	 xmm0, DWORD PTR [edx+68]
  00419	b8 04 00 00 00	 mov	 eax, 4
  0041e	6b c8 00	 imul	 ecx, eax, 0
  00421	ba 0c 00 00 00	 mov	 edx, 12			; 0000000cH
  00426	6b c2 00	 imul	 eax, edx, 0
  00429	f3 0f 11 84 08
	00 00 00 00	 movss	 DWORD PTR ?rotation_3d@@3PAY02MA[eax+ecx], xmm0

; 2327 : 			rotation_3d[1][0] *= surface->object_3d_scale.y;

  00432	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  00437	c1 e0 00	 shl	 eax, 0
  0043a	b9 04 00 00 00	 mov	 ecx, 4
  0043f	6b d1 00	 imul	 edx, ecx, 0
  00442	8b 4d dc	 mov	 ecx, DWORD PTR _surface$[ebp]
  00445	f3 0f 10 84 10
	00 00 00 00	 movss	 xmm0, DWORD PTR ?rotation_3d@@3PAY02MA[eax+edx]
  0044e	f3 0f 59 41 48	 mulss	 xmm0, DWORD PTR [ecx+72]
  00453	ba 04 00 00 00	 mov	 edx, 4
  00458	6b c2 00	 imul	 eax, edx, 0
  0045b	b9 0c 00 00 00	 mov	 ecx, 12			; 0000000cH
  00460	c1 e1 00	 shl	 ecx, 0
  00463	f3 0f 11 84 01
	00 00 00 00	 movss	 DWORD PTR ?rotation_3d@@3PAY02MA[ecx+eax], xmm0

; 2328 : 			rotation_3d[2][0] *= surface->object_3d_scale.z;

  0046c	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  00471	d1 e0		 shl	 eax, 1
  00473	b9 04 00 00 00	 mov	 ecx, 4
  00478	6b d1 00	 imul	 edx, ecx, 0
  0047b	8b 4d dc	 mov	 ecx, DWORD PTR _surface$[ebp]
  0047e	f3 0f 10 84 10
	00 00 00 00	 movss	 xmm0, DWORD PTR ?rotation_3d@@3PAY02MA[eax+edx]
  00487	f3 0f 59 41 4c	 mulss	 xmm0, DWORD PTR [ecx+76]
  0048c	ba 04 00 00 00	 mov	 edx, 4
  00491	6b c2 00	 imul	 eax, edx, 0
  00494	b9 0c 00 00 00	 mov	 ecx, 12			; 0000000cH
  00499	d1 e1		 shl	 ecx, 1
  0049b	f3 0f 11 84 01
	00 00 00 00	 movss	 DWORD PTR ?rotation_3d@@3PAY02MA[ecx+eax], xmm0

; 2329 : 
; 2330 : 			rotation_3d[0][1] *= surface->object_3d_scale.x;

  004a4	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  004a9	6b c8 00	 imul	 ecx, eax, 0
  004ac	ba 04 00 00 00	 mov	 edx, 4
  004b1	c1 e2 00	 shl	 edx, 0
  004b4	8b 45 dc	 mov	 eax, DWORD PTR _surface$[ebp]
  004b7	f3 0f 10 84 11
	00 00 00 00	 movss	 xmm0, DWORD PTR ?rotation_3d@@3PAY02MA[ecx+edx]
  004c0	f3 0f 59 40 44	 mulss	 xmm0, DWORD PTR [eax+68]
  004c5	b9 04 00 00 00	 mov	 ecx, 4
  004ca	c1 e1 00	 shl	 ecx, 0
  004cd	ba 0c 00 00 00	 mov	 edx, 12			; 0000000cH
  004d2	6b c2 00	 imul	 eax, edx, 0
  004d5	f3 0f 11 84 08
	00 00 00 00	 movss	 DWORD PTR ?rotation_3d@@3PAY02MA[eax+ecx], xmm0

; 2331 : 			rotation_3d[1][1] *= surface->object_3d_scale.y;

  004de	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  004e3	c1 e0 00	 shl	 eax, 0
  004e6	b9 04 00 00 00	 mov	 ecx, 4
  004eb	c1 e1 00	 shl	 ecx, 0
  004ee	8b 55 dc	 mov	 edx, DWORD PTR _surface$[ebp]
  004f1	f3 0f 10 84 08
	00 00 00 00	 movss	 xmm0, DWORD PTR ?rotation_3d@@3PAY02MA[eax+ecx]
  004fa	f3 0f 59 42 48	 mulss	 xmm0, DWORD PTR [edx+72]
  004ff	b8 04 00 00 00	 mov	 eax, 4
  00504	c1 e0 00	 shl	 eax, 0
  00507	b9 0c 00 00 00	 mov	 ecx, 12			; 0000000cH
  0050c	c1 e1 00	 shl	 ecx, 0
  0050f	f3 0f 11 84 01
	00 00 00 00	 movss	 DWORD PTR ?rotation_3d@@3PAY02MA[ecx+eax], xmm0

; 2332 : 			rotation_3d[2][1] *= surface->object_3d_scale.z;

  00518	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  0051d	d1 e0		 shl	 eax, 1
  0051f	b9 04 00 00 00	 mov	 ecx, 4
  00524	c1 e1 00	 shl	 ecx, 0
  00527	8b 55 dc	 mov	 edx, DWORD PTR _surface$[ebp]
  0052a	f3 0f 10 84 08
	00 00 00 00	 movss	 xmm0, DWORD PTR ?rotation_3d@@3PAY02MA[eax+ecx]
  00533	f3 0f 59 42 4c	 mulss	 xmm0, DWORD PTR [edx+76]
  00538	b8 04 00 00 00	 mov	 eax, 4
  0053d	c1 e0 00	 shl	 eax, 0
  00540	b9 0c 00 00 00	 mov	 ecx, 12			; 0000000cH
  00545	d1 e1		 shl	 ecx, 1
  00547	f3 0f 11 84 01
	00 00 00 00	 movss	 DWORD PTR ?rotation_3d@@3PAY02MA[ecx+eax], xmm0

; 2333 : 
; 2334 : 			rotation_3d[0][2] *= surface->object_3d_scale.x;

  00550	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  00555	6b c8 00	 imul	 ecx, eax, 0
  00558	ba 04 00 00 00	 mov	 edx, 4
  0055d	d1 e2		 shl	 edx, 1
  0055f	8b 45 dc	 mov	 eax, DWORD PTR _surface$[ebp]
  00562	f3 0f 10 84 11
	00 00 00 00	 movss	 xmm0, DWORD PTR ?rotation_3d@@3PAY02MA[ecx+edx]
  0056b	f3 0f 59 40 44	 mulss	 xmm0, DWORD PTR [eax+68]
  00570	b9 04 00 00 00	 mov	 ecx, 4
  00575	d1 e1		 shl	 ecx, 1
  00577	ba 0c 00 00 00	 mov	 edx, 12			; 0000000cH
  0057c	6b c2 00	 imul	 eax, edx, 0
  0057f	f3 0f 11 84 08
	00 00 00 00	 movss	 DWORD PTR ?rotation_3d@@3PAY02MA[eax+ecx], xmm0

; 2335 : 			rotation_3d[1][2] *= surface->object_3d_scale.y;

  00588	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  0058d	c1 e0 00	 shl	 eax, 0
  00590	b9 04 00 00 00	 mov	 ecx, 4
  00595	d1 e1		 shl	 ecx, 1
  00597	8b 55 dc	 mov	 edx, DWORD PTR _surface$[ebp]
  0059a	f3 0f 10 84 08
	00 00 00 00	 movss	 xmm0, DWORD PTR ?rotation_3d@@3PAY02MA[eax+ecx]
  005a3	f3 0f 59 42 48	 mulss	 xmm0, DWORD PTR [edx+72]
  005a8	b8 04 00 00 00	 mov	 eax, 4
  005ad	d1 e0		 shl	 eax, 1
  005af	b9 0c 00 00 00	 mov	 ecx, 12			; 0000000cH
  005b4	c1 e1 00	 shl	 ecx, 0
  005b7	f3 0f 11 84 01
	00 00 00 00	 movss	 DWORD PTR ?rotation_3d@@3PAY02MA[ecx+eax], xmm0

; 2336 : 			rotation_3d[2][2] *= surface->object_3d_scale.z;

  005c0	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  005c5	d1 e0		 shl	 eax, 1
  005c7	b9 04 00 00 00	 mov	 ecx, 4
  005cc	d1 e1		 shl	 ecx, 1
  005ce	8b 55 dc	 mov	 edx, DWORD PTR _surface$[ebp]
  005d1	f3 0f 10 84 08
	00 00 00 00	 movss	 xmm0, DWORD PTR ?rotation_3d@@3PAY02MA[eax+ecx]
  005da	f3 0f 59 42 4c	 mulss	 xmm0, DWORD PTR [edx+76]
  005df	b8 04 00 00 00	 mov	 eax, 4
  005e4	d1 e0		 shl	 eax, 1
  005e6	b9 0c 00 00 00	 mov	 ecx, 12			; 0000000cH
  005eb	d1 e1		 shl	 ecx, 1
  005ed	f3 0f 11 84 01
	00 00 00 00	 movss	 DWORD PTR ?rotation_3d@@3PAY02MA[ecx+eax], xmm0

; 2337 : 
; 2338 : 			//
; 2339 : 			// Get the object number
; 2340 : 			//
; 2341 : 
; 2342 : 			object_number = surface->object_index;

  005f6	8b 45 dc	 mov	 eax, DWORD PTR _surface$[ebp]
  005f9	8b 48 38	 mov	 ecx, DWORD PTR [eax+56]
  005fc	89 4d fc	 mov	 DWORD PTR _object_number$[ebp], ecx

; 2343 : 
; 2344 : 			//
; 2345 : 			// Rotate the light source vector to be relative to the object.
; 2346 : 			//
; 2347 : 
; 2348 : 			light = generate_relative_lights ( &surface->vp, &surface->object_unit_position, current_3d_lights );

  005ff	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_3d_lights@@3PAULIGHT_3D_SOURCE@@A ; current_3d_lights
  00604	50		 push	 eax
  00605	8b 4d dc	 mov	 ecx, DWORD PTR _surface$[ebp]
  00608	83 c1 5c	 add	 ecx, 92			; 0000005cH
  0060b	51		 push	 ecx
  0060c	8b 55 dc	 mov	 edx, DWORD PTR _surface$[ebp]
  0060f	83 c2 04	 add	 edx, 4
  00612	52		 push	 edx
  00613	e8 00 00 00 00	 call	 ?generate_relative_lights@@YGPAULIGHT_3D_SOURCE@@PAUVIEWPOINT@@PAUVEC3D@@PAU1@@Z ; generate_relative_lights
  00618	89 45 f8	 mov	 DWORD PTR _light$[ebp], eax

; 2349 : 
; 2350 : 			{
; 2351 : 
; 2352 : 				vec3d
; 2353 : 					rel_pos;
; 2354 : 
; 2355 : 				//
; 2356 : 				// Calculate the relative camera position in the object viewspace
; 2357 : 				//
; 2358 : 
; 2359 : 				rel_pos.x = visual_3d_vp->x - surface->vp.x;

  0061b	a1 00 00 00 00	 mov	 eax, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  00620	8b 4d dc	 mov	 ecx, DWORD PTR _surface$[ebp]
  00623	f3 0f 10 00	 movss	 xmm0, DWORD PTR [eax]
  00627	f3 0f 5c 41 04	 subss	 xmm0, DWORD PTR [ecx+4]
  0062c	f3 0f 11 45 d0	 movss	 DWORD PTR _rel_pos$2[ebp], xmm0

; 2360 : 				rel_pos.y = visual_3d_vp->y - surface->vp.y;

  00631	a1 00 00 00 00	 mov	 eax, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  00636	8b 4d dc	 mov	 ecx, DWORD PTR _surface$[ebp]
  00639	f3 0f 10 40 04	 movss	 xmm0, DWORD PTR [eax+4]
  0063e	f3 0f 5c 41 08	 subss	 xmm0, DWORD PTR [ecx+8]
  00643	f3 0f 11 45 d4	 movss	 DWORD PTR _rel_pos$2[ebp+4], xmm0

; 2361 : 				rel_pos.z = visual_3d_vp->z - surface->vp.z;

  00648	a1 00 00 00 00	 mov	 eax, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  0064d	8b 4d dc	 mov	 ecx, DWORD PTR _surface$[ebp]
  00650	f3 0f 10 40 08	 movss	 xmm0, DWORD PTR [eax+8]
  00655	f3 0f 5c 41 0c	 subss	 xmm0, DWORD PTR [ecx+12]
  0065a	f3 0f 11 45 d8	 movss	 DWORD PTR _rel_pos$2[ebp+8], xmm0

; 2362 : 
; 2363 : 				object_camera_position.x = ( rel_pos.x * surface->vp.attitude[0][0] + rel_pos.y * surface->vp.attitude[0][1] + rel_pos.z * surface->vp.attitude[0][2] );

  0065f	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  00664	6b c8 00	 imul	 ecx, eax, 0
  00667	8b 55 dc	 mov	 edx, DWORD PTR _surface$[ebp]
  0066a	8d 44 0a 10	 lea	 eax, DWORD PTR [edx+ecx+16]
  0066e	b9 04 00 00 00	 mov	 ecx, 4
  00673	6b d1 00	 imul	 edx, ecx, 0
  00676	f3 0f 10 45 d0	 movss	 xmm0, DWORD PTR _rel_pos$2[ebp]
  0067b	f3 0f 59 04 10	 mulss	 xmm0, DWORD PTR [eax+edx]
  00680	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  00685	6b c8 00	 imul	 ecx, eax, 0
  00688	8b 55 dc	 mov	 edx, DWORD PTR _surface$[ebp]
  0068b	8d 44 0a 10	 lea	 eax, DWORD PTR [edx+ecx+16]
  0068f	b9 04 00 00 00	 mov	 ecx, 4
  00694	c1 e1 00	 shl	 ecx, 0
  00697	f3 0f 10 4d d4	 movss	 xmm1, DWORD PTR _rel_pos$2[ebp+4]
  0069c	f3 0f 59 0c 08	 mulss	 xmm1, DWORD PTR [eax+ecx]
  006a1	f3 0f 58 c1	 addss	 xmm0, xmm1
  006a5	ba 0c 00 00 00	 mov	 edx, 12			; 0000000cH
  006aa	6b c2 00	 imul	 eax, edx, 0
  006ad	8b 4d dc	 mov	 ecx, DWORD PTR _surface$[ebp]
  006b0	8d 54 01 10	 lea	 edx, DWORD PTR [ecx+eax+16]
  006b4	b8 04 00 00 00	 mov	 eax, 4
  006b9	d1 e0		 shl	 eax, 1
  006bb	f3 0f 10 4d d8	 movss	 xmm1, DWORD PTR _rel_pos$2[ebp+8]
  006c0	f3 0f 59 0c 02	 mulss	 xmm1, DWORD PTR [edx+eax]
  006c5	f3 0f 58 c1	 addss	 xmm0, xmm1
  006c9	f3 0f 11 45 ec	 movss	 DWORD PTR _object_camera_position$[ebp], xmm0

; 2364 : 				object_camera_position.y = ( rel_pos.x * surface->vp.attitude[1][0] + rel_pos.y * surface->vp.attitude[1][1] + rel_pos.z * surface->vp.attitude[1][2] );

  006ce	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  006d3	c1 e0 00	 shl	 eax, 0
  006d6	8b 4d dc	 mov	 ecx, DWORD PTR _surface$[ebp]
  006d9	8d 54 01 10	 lea	 edx, DWORD PTR [ecx+eax+16]
  006dd	b8 04 00 00 00	 mov	 eax, 4
  006e2	6b c8 00	 imul	 ecx, eax, 0
  006e5	f3 0f 10 45 d0	 movss	 xmm0, DWORD PTR _rel_pos$2[ebp]
  006ea	f3 0f 59 04 0a	 mulss	 xmm0, DWORD PTR [edx+ecx]
  006ef	ba 0c 00 00 00	 mov	 edx, 12			; 0000000cH
  006f4	c1 e2 00	 shl	 edx, 0
  006f7	8b 45 dc	 mov	 eax, DWORD PTR _surface$[ebp]
  006fa	8d 4c 10 10	 lea	 ecx, DWORD PTR [eax+edx+16]
  006fe	ba 04 00 00 00	 mov	 edx, 4
  00703	c1 e2 00	 shl	 edx, 0
  00706	f3 0f 10 4d d4	 movss	 xmm1, DWORD PTR _rel_pos$2[ebp+4]
  0070b	f3 0f 59 0c 11	 mulss	 xmm1, DWORD PTR [ecx+edx]
  00710	f3 0f 58 c1	 addss	 xmm0, xmm1
  00714	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  00719	c1 e0 00	 shl	 eax, 0
  0071c	8b 4d dc	 mov	 ecx, DWORD PTR _surface$[ebp]
  0071f	8d 54 01 10	 lea	 edx, DWORD PTR [ecx+eax+16]
  00723	b8 04 00 00 00	 mov	 eax, 4
  00728	d1 e0		 shl	 eax, 1
  0072a	f3 0f 10 4d d8	 movss	 xmm1, DWORD PTR _rel_pos$2[ebp+8]
  0072f	f3 0f 59 0c 02	 mulss	 xmm1, DWORD PTR [edx+eax]
  00734	f3 0f 58 c1	 addss	 xmm0, xmm1
  00738	f3 0f 11 45 f0	 movss	 DWORD PTR _object_camera_position$[ebp+4], xmm0

; 2365 : 				object_camera_position.z = ( rel_pos.x * surface->vp.attitude[2][0] + rel_pos.y * surface->vp.attitude[2][1] + rel_pos.z * surface->vp.attitude[2][2] );

  0073d	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  00742	d1 e0		 shl	 eax, 1
  00744	8b 4d dc	 mov	 ecx, DWORD PTR _surface$[ebp]
  00747	8d 54 01 10	 lea	 edx, DWORD PTR [ecx+eax+16]
  0074b	b8 04 00 00 00	 mov	 eax, 4
  00750	6b c8 00	 imul	 ecx, eax, 0
  00753	f3 0f 10 45 d0	 movss	 xmm0, DWORD PTR _rel_pos$2[ebp]
  00758	f3 0f 59 04 0a	 mulss	 xmm0, DWORD PTR [edx+ecx]
  0075d	ba 0c 00 00 00	 mov	 edx, 12			; 0000000cH
  00762	d1 e2		 shl	 edx, 1
  00764	8b 45 dc	 mov	 eax, DWORD PTR _surface$[ebp]
  00767	8d 4c 10 10	 lea	 ecx, DWORD PTR [eax+edx+16]
  0076b	ba 04 00 00 00	 mov	 edx, 4
  00770	c1 e2 00	 shl	 edx, 0
  00773	f3 0f 10 4d d4	 movss	 xmm1, DWORD PTR _rel_pos$2[ebp+4]
  00778	f3 0f 59 0c 11	 mulss	 xmm1, DWORD PTR [ecx+edx]
  0077d	f3 0f 58 c1	 addss	 xmm0, xmm1
  00781	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  00786	d1 e0		 shl	 eax, 1
  00788	8b 4d dc	 mov	 ecx, DWORD PTR _surface$[ebp]
  0078b	8d 54 01 10	 lea	 edx, DWORD PTR [ecx+eax+16]
  0078f	b8 04 00 00 00	 mov	 eax, 4
  00794	d1 e0		 shl	 eax, 1
  00796	f3 0f 10 4d d8	 movss	 xmm1, DWORD PTR _rel_pos$2[ebp+8]
  0079b	f3 0f 59 0c 02	 mulss	 xmm1, DWORD PTR [edx+eax]
  007a0	f3 0f 58 c1	 addss	 xmm0, xmm1
  007a4	f3 0f 11 45 f4	 movss	 DWORD PTR _object_camera_position$[ebp+8], xmm0

; 2366 : 
; 2367 : 				object_camera_direction.x = ( visual_3d_vp->zv.x * surface->vp.attitude[0][0] + visual_3d_vp->zv.y * surface->vp.attitude[1][0] + visual_3d_vp->zv.z * surface->vp.attitude[2][0] );

  007a9	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  007ae	6b c8 00	 imul	 ecx, eax, 0
  007b1	8b 55 dc	 mov	 edx, DWORD PTR _surface$[ebp]
  007b4	8d 44 0a 10	 lea	 eax, DWORD PTR [edx+ecx+16]
  007b8	b9 04 00 00 00	 mov	 ecx, 4
  007bd	6b d1 00	 imul	 edx, ecx, 0
  007c0	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  007c6	f3 0f 10 41 24	 movss	 xmm0, DWORD PTR [ecx+36]
  007cb	f3 0f 59 04 10	 mulss	 xmm0, DWORD PTR [eax+edx]
  007d0	ba 0c 00 00 00	 mov	 edx, 12			; 0000000cH
  007d5	c1 e2 00	 shl	 edx, 0
  007d8	8b 45 dc	 mov	 eax, DWORD PTR _surface$[ebp]
  007db	8d 4c 10 10	 lea	 ecx, DWORD PTR [eax+edx+16]
  007df	ba 04 00 00 00	 mov	 edx, 4
  007e4	6b c2 00	 imul	 eax, edx, 0
  007e7	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  007ed	f3 0f 10 4a 28	 movss	 xmm1, DWORD PTR [edx+40]
  007f2	f3 0f 59 0c 01	 mulss	 xmm1, DWORD PTR [ecx+eax]
  007f7	f3 0f 58 c1	 addss	 xmm0, xmm1
  007fb	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  00800	d1 e0		 shl	 eax, 1
  00802	8b 4d dc	 mov	 ecx, DWORD PTR _surface$[ebp]
  00805	8d 54 01 10	 lea	 edx, DWORD PTR [ecx+eax+16]
  00809	b8 04 00 00 00	 mov	 eax, 4
  0080e	6b c8 00	 imul	 ecx, eax, 0
  00811	a1 00 00 00 00	 mov	 eax, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  00816	f3 0f 10 48 2c	 movss	 xmm1, DWORD PTR [eax+44]
  0081b	f3 0f 59 0c 0a	 mulss	 xmm1, DWORD PTR [edx+ecx]
  00820	f3 0f 58 c1	 addss	 xmm0, xmm1
  00824	f3 0f 11 45 e0	 movss	 DWORD PTR _object_camera_direction$[ebp], xmm0

; 2368 : 				object_camera_direction.y = ( visual_3d_vp->zv.x * surface->vp.attitude[0][1] + visual_3d_vp->zv.y * surface->vp.attitude[1][1] + visual_3d_vp->zv.z * surface->vp.attitude[2][1] );

  00829	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  0082e	6b c8 00	 imul	 ecx, eax, 0
  00831	8b 55 dc	 mov	 edx, DWORD PTR _surface$[ebp]
  00834	8d 44 0a 10	 lea	 eax, DWORD PTR [edx+ecx+16]
  00838	b9 04 00 00 00	 mov	 ecx, 4
  0083d	c1 e1 00	 shl	 ecx, 0
  00840	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  00846	f3 0f 10 42 24	 movss	 xmm0, DWORD PTR [edx+36]
  0084b	f3 0f 59 04 08	 mulss	 xmm0, DWORD PTR [eax+ecx]
  00850	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  00855	c1 e0 00	 shl	 eax, 0
  00858	8b 4d dc	 mov	 ecx, DWORD PTR _surface$[ebp]
  0085b	8d 54 01 10	 lea	 edx, DWORD PTR [ecx+eax+16]
  0085f	b8 04 00 00 00	 mov	 eax, 4
  00864	c1 e0 00	 shl	 eax, 0
  00867	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  0086d	f3 0f 10 49 28	 movss	 xmm1, DWORD PTR [ecx+40]
  00872	f3 0f 59 0c 02	 mulss	 xmm1, DWORD PTR [edx+eax]
  00877	f3 0f 58 c1	 addss	 xmm0, xmm1
  0087b	ba 0c 00 00 00	 mov	 edx, 12			; 0000000cH
  00880	d1 e2		 shl	 edx, 1
  00882	8b 45 dc	 mov	 eax, DWORD PTR _surface$[ebp]
  00885	8d 4c 10 10	 lea	 ecx, DWORD PTR [eax+edx+16]
  00889	ba 04 00 00 00	 mov	 edx, 4
  0088e	c1 e2 00	 shl	 edx, 0
  00891	a1 00 00 00 00	 mov	 eax, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  00896	f3 0f 10 48 2c	 movss	 xmm1, DWORD PTR [eax+44]
  0089b	f3 0f 59 0c 11	 mulss	 xmm1, DWORD PTR [ecx+edx]
  008a0	f3 0f 58 c1	 addss	 xmm0, xmm1
  008a4	f3 0f 11 45 e4	 movss	 DWORD PTR _object_camera_direction$[ebp+4], xmm0

; 2369 : 				object_camera_direction.z = ( visual_3d_vp->zv.x * surface->vp.attitude[0][2] + visual_3d_vp->zv.y * surface->vp.attitude[1][2] + visual_3d_vp->zv.z * surface->vp.attitude[2][2] );

  008a9	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  008ae	6b c8 00	 imul	 ecx, eax, 0
  008b1	8b 55 dc	 mov	 edx, DWORD PTR _surface$[ebp]
  008b4	8d 44 0a 10	 lea	 eax, DWORD PTR [edx+ecx+16]
  008b8	b9 04 00 00 00	 mov	 ecx, 4
  008bd	d1 e1		 shl	 ecx, 1
  008bf	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  008c5	f3 0f 10 42 24	 movss	 xmm0, DWORD PTR [edx+36]
  008ca	f3 0f 59 04 08	 mulss	 xmm0, DWORD PTR [eax+ecx]
  008cf	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  008d4	c1 e0 00	 shl	 eax, 0
  008d7	8b 4d dc	 mov	 ecx, DWORD PTR _surface$[ebp]
  008da	8d 54 01 10	 lea	 edx, DWORD PTR [ecx+eax+16]
  008de	b8 04 00 00 00	 mov	 eax, 4
  008e3	d1 e0		 shl	 eax, 1
  008e5	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  008eb	f3 0f 10 49 28	 movss	 xmm1, DWORD PTR [ecx+40]
  008f0	f3 0f 59 0c 02	 mulss	 xmm1, DWORD PTR [edx+eax]
  008f5	f3 0f 58 c1	 addss	 xmm0, xmm1
  008f9	ba 0c 00 00 00	 mov	 edx, 12			; 0000000cH
  008fe	d1 e2		 shl	 edx, 1
  00900	8b 45 dc	 mov	 eax, DWORD PTR _surface$[ebp]
  00903	8d 4c 10 10	 lea	 ecx, DWORD PTR [eax+edx+16]
  00907	ba 04 00 00 00	 mov	 edx, 4
  0090c	d1 e2		 shl	 edx, 1
  0090e	a1 00 00 00 00	 mov	 eax, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  00913	f3 0f 10 48 2c	 movss	 xmm1, DWORD PTR [eax+44]
  00918	f3 0f 59 0c 11	 mulss	 xmm1, DWORD PTR [ecx+edx]
  0091d	f3 0f 58 c1	 addss	 xmm0, xmm1
  00921	f3 0f 11 45 e8	 movss	 DWORD PTR _object_camera_direction$[ebp+8], xmm0

; 2370 : 			}
; 2371 : 
; 2372 : 
; 2373 : 			//
; 2374 : 			//	Set up this objects' object info structure
; 2375 : 			//
; 2376 : 
; 2377 : 			object_3d_object_base[object_3d_object_current_base].lights = light;

  00926	6b 05 00 00 00
	00 2c		 imul	 eax, DWORD PTR ?object_3d_object_current_base@@3HA, 44 ; object_3d_object_current_base
  0092d	8b 4d f8	 mov	 ecx, DWORD PTR _light$[ebp]
  00930	89 88 04 00 00
	00		 mov	 DWORD PTR ?object_3d_object_base@@3PAUOBJECT_3D_INFO@@A[eax+4], ecx

; 2378 : 			object_3d_object_base[object_3d_object_current_base].camera_position = object_camera_position;

  00936	6b 05 00 00 00
	00 2c		 imul	 eax, DWORD PTR ?object_3d_object_current_base@@3HA, 44 ; object_3d_object_current_base
  0093d	05 08 00 00 00	 add	 eax, OFFSET ?object_3d_object_base@@3PAUOBJECT_3D_INFO@@A+8
  00942	8b 4d ec	 mov	 ecx, DWORD PTR _object_camera_position$[ebp]
  00945	89 08		 mov	 DWORD PTR [eax], ecx
  00947	8b 55 f0	 mov	 edx, DWORD PTR _object_camera_position$[ebp+4]
  0094a	89 50 04	 mov	 DWORD PTR [eax+4], edx
  0094d	8b 4d f4	 mov	 ecx, DWORD PTR _object_camera_position$[ebp+8]
  00950	89 48 08	 mov	 DWORD PTR [eax+8], ecx

; 2379 : 			object_3d_object_base[object_3d_object_current_base].camera_direction = object_camera_direction;

  00953	6b 05 00 00 00
	00 2c		 imul	 eax, DWORD PTR ?object_3d_object_current_base@@3HA, 44 ; object_3d_object_current_base
  0095a	05 14 00 00 00	 add	 eax, OFFSET ?object_3d_object_base@@3PAUOBJECT_3D_INFO@@A+20
  0095f	8b 4d e0	 mov	 ecx, DWORD PTR _object_camera_direction$[ebp]
  00962	89 08		 mov	 DWORD PTR [eax], ecx
  00964	8b 55 e4	 mov	 edx, DWORD PTR _object_camera_direction$[ebp+4]
  00967	89 50 04	 mov	 DWORD PTR [eax+4], edx
  0096a	8b 4d e8	 mov	 ecx, DWORD PTR _object_camera_direction$[ebp+8]
  0096d	89 48 08	 mov	 DWORD PTR [eax+8], ecx

; 2380 : 			object_3d_object_base[object_3d_object_current_base].points_base = object_3d_points_current_base;

  00970	6b 05 00 00 00
	00 2c		 imul	 eax, DWORD PTR ?object_3d_object_current_base@@3HA, 44 ; object_3d_object_current_base
  00977	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?object_3d_points_current_base@@3HA ; object_3d_points_current_base
  0097d	89 88 24 00 00
	00		 mov	 DWORD PTR ?object_3d_object_base@@3PAUOBJECT_3D_INFO@@A[eax+36], ecx

; 2381 : 			object_3d_object_base[object_3d_object_current_base].object_number = object_number;

  00983	6b 05 00 00 00
	00 2c		 imul	 eax, DWORD PTR ?object_3d_object_current_base@@3HA, 44 ; object_3d_object_current_base
  0098a	8b 4d fc	 mov	 ecx, DWORD PTR _object_number$[ebp]
  0098d	89 88 20 00 00
	00		 mov	 DWORD PTR ?object_3d_object_base@@3PAUOBJECT_3D_INFO@@A[eax+32], ecx

; 2382 : 			object_3d_object_base[object_3d_object_current_base].object_vp = &surface->vp;

  00993	8b 45 dc	 mov	 eax, DWORD PTR _surface$[ebp]
  00996	83 c0 04	 add	 eax, 4
  00999	6b 0d 00 00 00
	00 2c		 imul	 ecx, DWORD PTR ?object_3d_object_current_base@@3HA, 44 ; object_3d_object_current_base
  009a0	89 81 28 00 00
	00		 mov	 DWORD PTR ?object_3d_object_base@@3PAUOBJECT_3D_INFO@@A[ecx+40], eax

; 2383 : 
; 2384 : 			current_object_3d_object_base = &object_3d_object_base[object_3d_object_current_base];

  009a6	6b 05 00 00 00
	00 2c		 imul	 eax, DWORD PTR ?object_3d_object_current_base@@3HA, 44 ; object_3d_object_current_base
  009ad	05 00 00 00 00	 add	 eax, OFFSET ?object_3d_object_base@@3PAUOBJECT_3D_INFO@@A ; object_3d_object_base
  009b2	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_object_base@@3PAUOBJECT_3D_INFO@@A, eax ; current_object_3d_object_base

; 2385 : 
; 2386 : 			//
; 2387 : 			// Now start transforming etc
; 2388 : 			//
; 2389 : 
; 2390 : 			current_object_3d_surface = surface->surface;

  009b7	8b 45 dc	 mov	 eax, DWORD PTR _surface$[ebp]
  009ba	8b 08		 mov	 ecx, DWORD PTR [eax]
  009bc	89 0d 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A, ecx ; current_object_3d_surface

; 2391 : 			current_object_3d_faces = surface->faces;

  009c2	8b 45 dc	 mov	 eax, DWORD PTR _surface$[ebp]
  009c5	8b 48 68	 mov	 ecx, DWORD PTR [eax+104]
  009c8	89 0d 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A, ecx ; current_object_3d_faces

; 2392 : 			current_object_3d_surface_point_list = surface->surface_point_list;

  009ce	8b 45 dc	 mov	 eax, DWORD PTR _surface$[ebp]
  009d1	8b 48 6c	 mov	 ecx, DWORD PTR [eax+108]
  009d4	89 0d 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_surface_point_list@@3PAUPOINT_3D_PLAIN_REFERENCE@@A, ecx ; current_object_3d_surface_point_list

; 2393 : 			current_object_3d_surface_point_normal_list = surface->surface_point_normal_list;

  009da	8b 45 dc	 mov	 eax, DWORD PTR _surface$[ebp]
  009dd	8b 48 70	 mov	 ecx, DWORD PTR [eax+112]
  009e0	89 0d 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_surface_point_normal_list@@3PAUPOINT_3D_PLAIN_REFERENCE@@A, ecx ; current_object_3d_surface_point_normal_list

; 2394 : 			current_object_3d_surface_point_texture_list = surface->surface_point_texture_list;

  009e6	8b 45 dc	 mov	 eax, DWORD PTR _surface$[ebp]
  009e9	8b 48 74	 mov	 ecx, DWORD PTR [eax+116]
  009ec	89 0d 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_surface_point_texture_list@@3PAUOBJECT_3D_SHORT_TEXTURED_POINT@@A, ecx ; current_object_3d_surface_point_texture_list

; 2395 : 			current_object_3d_point_list = surface->faces_point_list;

  009f2	8b 45 dc	 mov	 eax, DWORD PTR _surface$[ebp]
  009f5	8b 48 78	 mov	 ecx, DWORD PTR [eax+120]
  009f8	89 0d 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A, ecx ; current_object_3d_point_list

; 2396 : 			current_object_3d_face_normal_list = surface->faces_normal_list;

  009fe	8b 45 dc	 mov	 eax, DWORD PTR _surface$[ebp]
  00a01	8b 48 7c	 mov	 ecx, DWORD PTR [eax+124]
  00a04	89 0d 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_face_normal_list@@3PAUPOINT_3D_PLAIN_REFERENCE@@A, ecx ; current_object_3d_face_normal_list

; 2397 : 			current_object_3d_light_maps_enabled = surface->lightmaps_enabled;

  00a0a	8b 45 dc	 mov	 eax, DWORD PTR _surface$[ebp]
  00a0d	8b 48 40	 mov	 ecx, DWORD PTR [eax+64]
  00a10	d1 e9		 shr	 ecx, 1
  00a12	83 e1 01	 and	 ecx, 1
  00a15	89 0d 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_light_maps_enabled@@3HA, ecx ; current_object_3d_light_maps_enabled

; 2398 : 
; 2399 : 			if ( objects_3d_data[object_number].number_of_points )

  00a1b	6b 45 fc 68	 imul	 eax, DWORD PTR _object_number$[ebp], 104
  00a1f	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?objects_3d_data@@3PAUOBJECT_3D@@A ; objects_3d_data
  00a25	0f b7 14 01	 movzx	 edx, WORD PTR [ecx+eax]
  00a29	85 d2		 test	 edx, edx
  00a2b	0f 84 b9 01 00
	00		 je	 $LN10@draw_3d_tr

; 2400 : 			{
; 2401 : 
; 2402 : 				int
; 2403 : 					illuminated_surface;
; 2404 : 
; 2405 : 				illuminated_surface = TRUE;

  00a31	c7 45 cc 01 00
	00 00		 mov	 DWORD PTR _illuminated_surface$1[ebp], 1

; 2406 : 
; 2407 : 				if ( illuminated_surface )

  00a38	83 7d cc 00	 cmp	 DWORD PTR _illuminated_surface$1[ebp], 0
  00a3c	74 24		 je	 SHORT $LN6@draw_3d_tr

; 2408 : 				{
; 2409 : 
; 2410 : 		//			illuminate_3d_object ( &objects_3d_data[object_number], current_object_3d_relative_position, object_3d_object_base[object_3d_object_current_base].lights, &object_camera_position, object_3d_points_current_base );
; 2411 : 					illuminate_3d_object_surface ( &objects_3d_data[object_number], current_object_3d_relative_position, light, &object_camera_position, object_3d_points_current_base );

  00a3e	a1 00 00 00 00	 mov	 eax, DWORD PTR ?object_3d_points_current_base@@3HA ; object_3d_points_current_base
  00a43	50		 push	 eax
  00a44	8d 4d ec	 lea	 ecx, DWORD PTR _object_camera_position$[ebp]
  00a47	51		 push	 ecx
  00a48	8b 55 f8	 mov	 edx, DWORD PTR _light$[ebp]
  00a4b	52		 push	 edx
  00a4c	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_relative_position@@3PAUVEC3D@@A ; current_object_3d_relative_position
  00a51	50		 push	 eax
  00a52	6b 4d fc 68	 imul	 ecx, DWORD PTR _object_number$[ebp], 104
  00a56	03 0d 00 00 00
	00		 add	 ecx, DWORD PTR ?objects_3d_data@@3PAUOBJECT_3D@@A ; objects_3d_data
  00a5c	51		 push	 ecx
  00a5d	e8 00 00 00 00	 call	 ?illuminate_3d_object_surface@@YGXPAUOBJECT_3D@@PAUVEC3D@@PAULIGHT_3D_SOURCE@@1H@Z ; illuminate_3d_object_surface
$LN6@draw_3d_tr:

; 2412 : 				}
; 2413 : 
; 2414 : 				if ( surface->clipped )

  00a62	8b 45 dc	 mov	 eax, DWORD PTR _surface$[ebp]
  00a65	8b 48 40	 mov	 ecx, DWORD PTR [eax+64]
  00a68	83 e1 01	 and	 ecx, 1
  00a6b	0f 84 bf 00 00
	00		 je	 $LN7@draw_3d_tr

; 2415 : 				{
; 2416 : 
; 2417 : 					transform_3d_object_surface ( &objects_3d_data[object_number], current_object_3d_relative_position, light, &object_camera_position, object_3d_points_current_base );

  00a71	a1 00 00 00 00	 mov	 eax, DWORD PTR ?object_3d_points_current_base@@3HA ; object_3d_points_current_base
  00a76	50		 push	 eax
  00a77	8d 4d ec	 lea	 ecx, DWORD PTR _object_camera_position$[ebp]
  00a7a	51		 push	 ecx
  00a7b	8b 55 f8	 mov	 edx, DWORD PTR _light$[ebp]
  00a7e	52		 push	 edx
  00a7f	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_relative_position@@3PAUVEC3D@@A ; current_object_3d_relative_position
  00a84	50		 push	 eax
  00a85	6b 4d fc 68	 imul	 ecx, DWORD PTR _object_number$[ebp], 104
  00a89	03 0d 00 00 00
	00		 add	 ecx, DWORD PTR ?objects_3d_data@@3PAUOBJECT_3D@@A ; objects_3d_data
  00a8f	51		 push	 ecx
  00a90	e8 00 00 00 00	 call	 ?transform_3d_object_surface@@YGXPAUOBJECT_3D@@PAUVEC3D@@PAULIGHT_3D_SOURCE@@1H@Z ; transform_3d_object_surface

; 2418 : 
; 2419 : 					draw_3d_translucent_surface_clipped_faces ( surface );

  00a95	8b 45 dc	 mov	 eax, DWORD PTR _surface$[ebp]
  00a98	50		 push	 eax
  00a99	e8 00 00 00 00	 call	 ?draw_3d_translucent_surface_clipped_faces@@YGXPAUTRANSLUCENT_OBJECT_SURFACE@@@Z ; draw_3d_translucent_surface_clipped_faces

; 2420 : 
; 2421 : 					if ( ( surface->surface->polygons ) && ( surface->surface->reflectivity != 0 ) )

  00a9e	8b 45 dc	 mov	 eax, DWORD PTR _surface$[ebp]
  00aa1	8b 08		 mov	 ecx, DWORD PTR [eax]
  00aa3	66 8b 11	 mov	 dx, WORD PTR [ecx]
  00aa6	66 83 e2 01	 and	 dx, 1
  00aaa	0f b7 c2	 movzx	 eax, dx
  00aad	85 c0		 test	 eax, eax
  00aaf	74 7a		 je	 SHORT $LN9@draw_3d_tr
  00ab1	8b 45 dc	 mov	 eax, DWORD PTR _surface$[ebp]
  00ab4	8b 08		 mov	 ecx, DWORD PTR [eax]
  00ab6	0f b6 51 0a	 movzx	 edx, BYTE PTR [ecx+10]
  00aba	85 d2		 test	 edx, edx
  00abc	74 6d		 je	 SHORT $LN9@draw_3d_tr

; 2422 : 					{
; 2423 : 
; 2424 : 						current_object_3d_surface = surface->surface;

  00abe	8b 45 dc	 mov	 eax, DWORD PTR _surface$[ebp]
  00ac1	8b 08		 mov	 ecx, DWORD PTR [eax]
  00ac3	89 0d 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A, ecx ; current_object_3d_surface

; 2425 : 						current_object_3d_faces = surface->faces;

  00ac9	8b 45 dc	 mov	 eax, DWORD PTR _surface$[ebp]
  00acc	8b 48 68	 mov	 ecx, DWORD PTR [eax+104]
  00acf	89 0d 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A, ecx ; current_object_3d_faces

; 2426 : 						current_object_3d_surface_point_list = surface->surface_point_list;

  00ad5	8b 45 dc	 mov	 eax, DWORD PTR _surface$[ebp]
  00ad8	8b 48 6c	 mov	 ecx, DWORD PTR [eax+108]
  00adb	89 0d 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_surface_point_list@@3PAUPOINT_3D_PLAIN_REFERENCE@@A, ecx ; current_object_3d_surface_point_list

; 2427 : 						current_object_3d_surface_point_normal_list = surface->surface_point_normal_list;

  00ae1	8b 45 dc	 mov	 eax, DWORD PTR _surface$[ebp]
  00ae4	8b 48 70	 mov	 ecx, DWORD PTR [eax+112]
  00ae7	89 0d 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_surface_point_normal_list@@3PAUPOINT_3D_PLAIN_REFERENCE@@A, ecx ; current_object_3d_surface_point_normal_list

; 2428 : 						current_object_3d_surface_point_texture_list = surface->surface_point_texture_list;

  00aed	8b 45 dc	 mov	 eax, DWORD PTR _surface$[ebp]
  00af0	8b 48 74	 mov	 ecx, DWORD PTR [eax+116]
  00af3	89 0d 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_surface_point_texture_list@@3PAUOBJECT_3D_SHORT_TEXTURED_POINT@@A, ecx ; current_object_3d_surface_point_texture_list

; 2429 : 						current_object_3d_point_list = surface->faces_point_list;

  00af9	8b 45 dc	 mov	 eax, DWORD PTR _surface$[ebp]
  00afc	8b 48 78	 mov	 ecx, DWORD PTR [eax+120]
  00aff	89 0d 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A, ecx ; current_object_3d_point_list

; 2430 : 						current_object_3d_face_normal_list = surface->faces_normal_list;

  00b05	8b 45 dc	 mov	 eax, DWORD PTR _surface$[ebp]
  00b08	8b 48 7c	 mov	 ecx, DWORD PTR [eax+124]
  00b0b	89 0d 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_face_normal_list@@3PAUPOINT_3D_PLAIN_REFERENCE@@A, ecx ; current_object_3d_face_normal_list

; 2431 : 						current_object_3d_light_maps_enabled = surface->lightmaps_enabled;

  00b11	8b 45 dc	 mov	 eax, DWORD PTR _surface$[ebp]
  00b14	8b 48 40	 mov	 ecx, DWORD PTR [eax+64]
  00b17	d1 e9		 shr	 ecx, 1
  00b19	83 e1 01	 and	 ecx, 1
  00b1c	89 0d 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_light_maps_enabled@@3HA, ecx ; current_object_3d_light_maps_enabled

; 2432 : 
; 2433 : 						draw_3d_translucent_surface_clipped_reflection_faces ( surface );

  00b22	8b 45 dc	 mov	 eax, DWORD PTR _surface$[ebp]
  00b25	50		 push	 eax
  00b26	e8 00 00 00 00	 call	 ?draw_3d_translucent_surface_clipped_reflection_faces@@YGXPAUTRANSLUCENT_OBJECT_SURFACE@@@Z ; draw_3d_translucent_surface_clipped_reflection_faces
$LN9@draw_3d_tr:

; 2434 : 					}
; 2435 : 				}
; 2436 : 				else

  00b2b	e9 ba 00 00 00	 jmp	 $LN10@draw_3d_tr
$LN7@draw_3d_tr:

; 2437 : 				{
; 2438 : 
; 2439 : 					transform_unclipped_3d_object_surface ( &objects_3d_data[object_number], current_object_3d_relative_position, light, &object_camera_position, object_3d_points_current_base );

  00b30	a1 00 00 00 00	 mov	 eax, DWORD PTR ?object_3d_points_current_base@@3HA ; object_3d_points_current_base
  00b35	50		 push	 eax
  00b36	8d 4d ec	 lea	 ecx, DWORD PTR _object_camera_position$[ebp]
  00b39	51		 push	 ecx
  00b3a	8b 55 f8	 mov	 edx, DWORD PTR _light$[ebp]
  00b3d	52		 push	 edx
  00b3e	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_relative_position@@3PAUVEC3D@@A ; current_object_3d_relative_position
  00b43	50		 push	 eax
  00b44	6b 4d fc 68	 imul	 ecx, DWORD PTR _object_number$[ebp], 104
  00b48	03 0d 00 00 00
	00		 add	 ecx, DWORD PTR ?objects_3d_data@@3PAUOBJECT_3D@@A ; objects_3d_data
  00b4e	51		 push	 ecx
  00b4f	e8 00 00 00 00	 call	 ?transform_unclipped_3d_object_surface@@YGXPAUOBJECT_3D@@PAUVEC3D@@PAULIGHT_3D_SOURCE@@1H@Z ; transform_unclipped_3d_object_surface

; 2440 : 
; 2441 : 					draw_3d_translucent_surface_unclipped_faces ( surface );

  00b54	8b 45 dc	 mov	 eax, DWORD PTR _surface$[ebp]
  00b57	50		 push	 eax
  00b58	e8 00 00 00 00	 call	 ?draw_3d_translucent_surface_unclipped_faces@@YGXPAUTRANSLUCENT_OBJECT_SURFACE@@@Z ; draw_3d_translucent_surface_unclipped_faces

; 2442 : 
; 2443 : 					if ( ( surface->surface->polygons ) && ( surface->surface->reflectivity != 0 ) )

  00b5d	8b 45 dc	 mov	 eax, DWORD PTR _surface$[ebp]
  00b60	8b 08		 mov	 ecx, DWORD PTR [eax]
  00b62	66 8b 11	 mov	 dx, WORD PTR [ecx]
  00b65	66 83 e2 01	 and	 dx, 1
  00b69	0f b7 c2	 movzx	 eax, dx
  00b6c	85 c0		 test	 eax, eax
  00b6e	74 7a		 je	 SHORT $LN10@draw_3d_tr
  00b70	8b 45 dc	 mov	 eax, DWORD PTR _surface$[ebp]
  00b73	8b 08		 mov	 ecx, DWORD PTR [eax]
  00b75	0f b6 51 0a	 movzx	 edx, BYTE PTR [ecx+10]
  00b79	85 d2		 test	 edx, edx
  00b7b	74 6d		 je	 SHORT $LN10@draw_3d_tr

; 2444 : 					{
; 2445 : 
; 2446 : 						current_object_3d_surface = surface->surface;

  00b7d	8b 45 dc	 mov	 eax, DWORD PTR _surface$[ebp]
  00b80	8b 08		 mov	 ecx, DWORD PTR [eax]
  00b82	89 0d 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A, ecx ; current_object_3d_surface

; 2447 : 						current_object_3d_faces = surface->faces;

  00b88	8b 45 dc	 mov	 eax, DWORD PTR _surface$[ebp]
  00b8b	8b 48 68	 mov	 ecx, DWORD PTR [eax+104]
  00b8e	89 0d 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A, ecx ; current_object_3d_faces

; 2448 : 						current_object_3d_surface_point_list = surface->surface_point_list;

  00b94	8b 45 dc	 mov	 eax, DWORD PTR _surface$[ebp]
  00b97	8b 48 6c	 mov	 ecx, DWORD PTR [eax+108]
  00b9a	89 0d 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_surface_point_list@@3PAUPOINT_3D_PLAIN_REFERENCE@@A, ecx ; current_object_3d_surface_point_list

; 2449 : 						current_object_3d_surface_point_normal_list = surface->surface_point_normal_list;

  00ba0	8b 45 dc	 mov	 eax, DWORD PTR _surface$[ebp]
  00ba3	8b 48 70	 mov	 ecx, DWORD PTR [eax+112]
  00ba6	89 0d 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_surface_point_normal_list@@3PAUPOINT_3D_PLAIN_REFERENCE@@A, ecx ; current_object_3d_surface_point_normal_list

; 2450 : 						current_object_3d_surface_point_texture_list = surface->surface_point_texture_list;

  00bac	8b 45 dc	 mov	 eax, DWORD PTR _surface$[ebp]
  00baf	8b 48 74	 mov	 ecx, DWORD PTR [eax+116]
  00bb2	89 0d 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_surface_point_texture_list@@3PAUOBJECT_3D_SHORT_TEXTURED_POINT@@A, ecx ; current_object_3d_surface_point_texture_list

; 2451 : 						current_object_3d_point_list = surface->faces_point_list;

  00bb8	8b 45 dc	 mov	 eax, DWORD PTR _surface$[ebp]
  00bbb	8b 48 78	 mov	 ecx, DWORD PTR [eax+120]
  00bbe	89 0d 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A, ecx ; current_object_3d_point_list

; 2452 : 						current_object_3d_face_normal_list = surface->faces_normal_list;

  00bc4	8b 45 dc	 mov	 eax, DWORD PTR _surface$[ebp]
  00bc7	8b 48 7c	 mov	 ecx, DWORD PTR [eax+124]
  00bca	89 0d 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_face_normal_list@@3PAUPOINT_3D_PLAIN_REFERENCE@@A, ecx ; current_object_3d_face_normal_list

; 2453 : 						current_object_3d_light_maps_enabled = surface->lightmaps_enabled;

  00bd0	8b 45 dc	 mov	 eax, DWORD PTR _surface$[ebp]
  00bd3	8b 48 40	 mov	 ecx, DWORD PTR [eax+64]
  00bd6	d1 e9		 shr	 ecx, 1
  00bd8	83 e1 01	 and	 ecx, 1
  00bdb	89 0d 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_light_maps_enabled@@3HA, ecx ; current_object_3d_light_maps_enabled

; 2454 : 
; 2455 : 						draw_3d_translucent_surface_unclipped_reflection_faces ( surface );

  00be1	8b 45 dc	 mov	 eax, DWORD PTR _surface$[ebp]
  00be4	50		 push	 eax
  00be5	e8 00 00 00 00	 call	 ?draw_3d_translucent_surface_unclipped_reflection_faces@@YGXPAUTRANSLUCENT_OBJECT_SURFACE@@@Z ; draw_3d_translucent_surface_unclipped_reflection_faces
$LN10@draw_3d_tr:

; 2456 : 					}
; 2457 : 				}
; 2458 : 			}
; 2459 : 		}
; 2460 : 
; 2461 : 		surface = surface->succ;

  00bea	8b 45 dc	 mov	 eax, DWORD PTR _surface$[ebp]
  00bed	8b 88 80 00 00
	00		 mov	 ecx, DWORD PTR [eax+128]
  00bf3	89 4d dc	 mov	 DWORD PTR _surface$[ebp], ecx

; 2462 : 	}

  00bf6	e9 19 f4 ff ff	 jmp	 $LN2@draw_3d_tr
$LN3@draw_3d_tr:

; 2463 : }

  00bfb	5f		 pop	 edi
  00bfc	5e		 pop	 esi
  00bfd	5b		 pop	 ebx
  00bfe	8b e5		 mov	 esp, ebp
  00c00	5d		 pop	 ebp
  00c01	c2 04 00	 ret	 4
?draw_3d_translucent_object@@YGXPAUTRANSLUCENT_OBJECT_SURFACE@@@Z ENDP ; draw_3d_translucent_object
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\modules\3d\3dobjdrw.c
;	COMDAT ?draw_3d_object_untextured_unclipped_faces@@YGXH@Z
_TEXT	SEGMENT
tv176 = -92						; size = 8
tv213 = -88						; size = 4
tv207 = -88						; size = 4
tv201 = -88						; size = 4
tv195 = -88						; size = 4
tv180 = -88						; size = 4
_frame$1 = -20						; size = 4
_skip_surface$2 = -16					; size = 4
_surfaces_left$ = -12					; size = 4
_faces_left$ = -8					; size = 4
_number_of_surface_points$ = -4				; size = 4
_object_number$ = 8					; size = 4
?draw_3d_object_untextured_unclipped_faces@@YGXH@Z PROC	; draw_3d_object_untextured_unclipped_faces, COMDAT

; 1984 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 5c	 sub	 esp, 92			; 0000005cH
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 1985 : 	int
; 1986 : 		number_of_surface_points,
; 1987 : 		faces_left,
; 1988 : 		surfaces_left;
; 1989 : 
; 1990 : 	surfaces_left = objects_3d_data[object_number].number_of_surfaces;

  00009	6b 45 08 68	 imul	 eax, DWORD PTR _object_number$[ebp], 104
  0000d	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?objects_3d_data@@3PAUOBJECT_3D@@A ; objects_3d_data
  00013	0f b7 54 01 06	 movzx	 edx, WORD PTR [ecx+eax+6]
  00018	89 55 f4	 mov	 DWORD PTR _surfaces_left$[ebp], edx

; 1991 : 
; 1992 : 	current_object_3d_faces = objects_3d_data[object_number].faces;

  0001b	6b 45 08 68	 imul	 eax, DWORD PTR _object_number$[ebp], 104
  0001f	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?objects_3d_data@@3PAUOBJECT_3D@@A ; objects_3d_data
  00025	8b 54 01 44	 mov	 edx, DWORD PTR [ecx+eax+68]
  00029	89 15 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A, edx ; current_object_3d_faces

; 1993 : 	current_object_3d_surface = objects_3d_data[object_number].surfaces;

  0002f	6b 45 08 68	 imul	 eax, DWORD PTR _object_number$[ebp], 104
  00033	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?objects_3d_data@@3PAUOBJECT_3D@@A ; objects_3d_data
  00039	8b 54 01 50	 mov	 edx, DWORD PTR [ecx+eax+80]
  0003d	89 15 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A, edx ; current_object_3d_surface

; 1994 : 	current_object_3d_point_list = objects_3d_data[object_number].object_faces_point_plain_list;

  00043	6b 45 08 68	 imul	 eax, DWORD PTR _object_number$[ebp], 104
  00047	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?objects_3d_data@@3PAUOBJECT_3D@@A ; objects_3d_data
  0004d	8b 54 01 4c	 mov	 edx, DWORD PTR [ecx+eax+76]
  00051	89 15 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A, edx ; current_object_3d_point_list

; 1995 : 	current_object_3d_face_normal_list = objects_3d_data[object_number].object_face_normal_references;

  00057	6b 45 08 68	 imul	 eax, DWORD PTR _object_number$[ebp], 104
  0005b	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?objects_3d_data@@3PAUOBJECT_3D@@A ; objects_3d_data
  00061	8b 54 01 54	 mov	 edx, DWORD PTR [ecx+eax+84]
  00065	89 15 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_face_normal_list@@3PAUPOINT_3D_PLAIN_REFERENCE@@A, edx ; current_object_3d_face_normal_list

; 1996 : 	current_object_3d_transformed_normals = &transformed_3d_normals[object_3d_points_current_base];

  0006b	a1 00 00 00 00	 mov	 eax, DWORD PTR ?object_3d_points_current_base@@3HA ; object_3d_points_current_base
  00070	8d 0c c5 00 00
	00 00		 lea	 ecx, DWORD PTR ?transformed_3d_normals@@3PAUOBJECT_3D_TRANSFORMED_POINT_NORMAL@@A[eax*8]
  00077	89 0d 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_transformed_normals@@3PAUOBJECT_3D_TRANSFORMED_POINT_NORMAL@@A, ecx ; current_object_3d_transformed_normals

; 1997 : 
; 1998 : 	current_object_3d_surface_point_list = objects_3d_data[object_number].surface_points;

  0007d	6b 45 08 68	 imul	 eax, DWORD PTR _object_number$[ebp], 104
  00081	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?objects_3d_data@@3PAUOBJECT_3D@@A ; objects_3d_data
  00087	8b 54 01 5c	 mov	 edx, DWORD PTR [ecx+eax+92]
  0008b	89 15 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_surface_point_list@@3PAUPOINT_3D_PLAIN_REFERENCE@@A, edx ; current_object_3d_surface_point_list

; 1999 : 	current_object_3d_surface_point_texture_list = objects_3d_data[object_number].surface_texture_points;

  00091	6b 45 08 68	 imul	 eax, DWORD PTR _object_number$[ebp], 104
  00095	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?objects_3d_data@@3PAUOBJECT_3D@@A ; objects_3d_data
  0009b	8b 54 01 58	 mov	 edx, DWORD PTR [ecx+eax+88]
  0009f	89 15 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_surface_point_texture_list@@3PAUOBJECT_3D_SHORT_TEXTURED_POINT@@A, edx ; current_object_3d_surface_point_texture_list

; 2000 : 	current_object_3d_surface_point_normal_list = objects_3d_data[object_number].surface_point_normals;

  000a5	6b 45 08 68	 imul	 eax, DWORD PTR _object_number$[ebp], 104
  000a9	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?objects_3d_data@@3PAUOBJECT_3D@@A ; objects_3d_data
  000af	8b 54 01 60	 mov	 edx, DWORD PTR [ecx+eax+96]
  000b3	89 15 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_surface_point_normal_list@@3PAUPOINT_3D_PLAIN_REFERENCE@@A, edx ; current_object_3d_surface_point_normal_list

; 2001 : 
; 2002 : 	for ( surfaces_left = objects_3d_data[object_number].number_of_surfaces; surfaces_left > 0; surfaces_left-- )

  000b9	6b 45 08 68	 imul	 eax, DWORD PTR _object_number$[ebp], 104
  000bd	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?objects_3d_data@@3PAUOBJECT_3D@@A ; objects_3d_data
  000c3	0f b7 54 01 06	 movzx	 edx, WORD PTR [ecx+eax+6]
  000c8	89 55 f4	 mov	 DWORD PTR _surfaces_left$[ebp], edx
  000cb	eb 09		 jmp	 SHORT $LN4@draw_3d_ob
$LN2@draw_3d_ob:
  000cd	8b 45 f4	 mov	 eax, DWORD PTR _surfaces_left$[ebp]
  000d0	83 e8 01	 sub	 eax, 1
  000d3	89 45 f4	 mov	 DWORD PTR _surfaces_left$[ebp], eax
$LN4@draw_3d_ob:
  000d6	83 7d f4 00	 cmp	 DWORD PTR _surfaces_left$[ebp], 0
  000da	0f 8e 87 05 00
	00		 jle	 $LN3@draw_3d_ob

; 2003 : 	{
; 2004 : 		int
; 2005 : 			skip_surface;
; 2006 : 
; 2007 : 		number_of_surface_points = current_object_3d_surface->number_of_points;

  000e0	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  000e5	0f b6 48 03	 movzx	 ecx, BYTE PTR [eax+3]
  000e9	89 4d fc	 mov	 DWORD PTR _number_of_surface_points$[ebp], ecx

; 2008 : 		if ( number_of_surface_points == 0 )

  000ec	83 7d fc 00	 cmp	 DWORD PTR _number_of_surface_points$[ebp], 0
  000f0	75 07		 jne	 SHORT $LN20@draw_3d_ob

; 2009 : 		{
; 2010 : 			number_of_surface_points = 256;

  000f2	c7 45 fc 00 01
	00 00		 mov	 DWORD PTR _number_of_surface_points$[ebp], 256 ; 00000100H
$LN20@draw_3d_ob:

; 2011 : 		}
; 2012 : 
; 2013 : 		skip_surface = FALSE;

  000f9	c7 45 f0 00 00
	00 00		 mov	 DWORD PTR _skip_surface$2[ebp], 0

; 2014 : 
; 2015 : 		if ( current_object_3d_surface->translucent )

  00100	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  00105	66 8b 08	 mov	 cx, WORD PTR [eax]
  00108	66 c1 e9 06	 shr	 cx, 6
  0010c	66 83 e1 01	 and	 cx, 1
  00110	0f b7 d1	 movzx	 edx, cx
  00113	85 d2		 test	 edx, edx
  00115	74 07		 je	 SHORT $LN21@draw_3d_ob

; 2016 : 		{
; 2017 : 			skip_surface = TRUE;

  00117	c7 45 f0 01 00
	00 00		 mov	 DWORD PTR _skip_surface$2[ebp], 1
$LN21@draw_3d_ob:

; 2018 : 		}
; 2019 : 
; 2020 : 		if ( current_object_3d_surface->textured )

  0011e	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  00123	66 8b 08	 mov	 cx, WORD PTR [eax]
  00126	66 c1 e9 03	 shr	 cx, 3
  0012a	66 83 e1 01	 and	 cx, 1
  0012e	0f b7 d1	 movzx	 edx, cx
  00131	85 d2		 test	 edx, edx
  00133	0f 84 8e 00 00
	00		 je	 $LN25@draw_3d_ob

; 2021 : 		{
; 2022 : 			if ( current_object_3d_surface->texture_animation )

  00139	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  0013e	66 8b 08	 mov	 cx, WORD PTR [eax]
  00141	66 c1 e9 09	 shr	 cx, 9
  00145	66 83 e1 01	 and	 cx, 1
  00149	0f b7 d1	 movzx	 edx, cx
  0014c	85 d2		 test	 edx, edx
  0014e	74 42		 je	 SHORT $LN23@draw_3d_ob

; 2023 : 			{
; 2024 : 				int
; 2025 : 					frame;
; 2026 : 
; 2027 : 				frame = texture_animations[current_object_3d_surface->texture_index].current_frame;

  00150	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  00155	0f b7 48 04	 movzx	 ecx, WORD PTR [eax+4]
  00159	6b d1 0c	 imul	 edx, ecx, 12
  0015c	a1 00 00 00 00	 mov	 eax, DWORD PTR ?texture_animations@@3PAUTEXTURE_ANIMATION_INFORMATION@@A ; texture_animations
  00161	8b 4c 10 04	 mov	 ecx, DWORD PTR [eax+edx+4]
  00165	89 4d ec	 mov	 DWORD PTR _frame$1[ebp], ecx

; 2028 : 				current_object_3d_texture = system_textures[ texture_animations[current_object_3d_surface->texture_index].texture_indices[frame] ];

  00168	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  0016d	0f b7 48 04	 movzx	 ecx, WORD PTR [eax+4]
  00171	6b d1 0c	 imul	 edx, ecx, 12
  00174	a1 00 00 00 00	 mov	 eax, DWORD PTR ?texture_animations@@3PAUTEXTURE_ANIMATION_INFORMATION@@A ; texture_animations
  00179	8b 4c 10 08	 mov	 ecx, DWORD PTR [eax+edx+8]
  0017d	8b 55 ec	 mov	 edx, DWORD PTR _frame$1[ebp]
  00180	8b 04 91	 mov	 eax, DWORD PTR [ecx+edx*4]
  00183	8b 0c 85 00 00
	00 00		 mov	 ecx, DWORD PTR ?system_textures@@3PAPAUSCREEN@@A[eax*4]
  0018a	89 0d 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_texture@@3PAUSCREEN@@A, ecx ; current_object_3d_texture

; 2029 : 			}
; 2030 : 			else

  00190	eb 16		 jmp	 SHORT $LN24@draw_3d_ob
$LN23@draw_3d_ob:

; 2031 : 			{
; 2032 : 				current_object_3d_texture = system_textures[current_object_3d_surface->texture_index];

  00192	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  00197	0f b7 48 04	 movzx	 ecx, WORD PTR [eax+4]
  0019b	8b 14 8d 00 00
	00 00		 mov	 edx, DWORD PTR ?system_textures@@3PAPAUSCREEN@@A[ecx*4]
  001a2	89 15 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_texture@@3PAUSCREEN@@A, edx ; current_object_3d_texture
$LN24@draw_3d_ob:

; 2033 : 			}
; 2034 : 
; 2035 : 			if ( current_object_3d_texture->contains_alpha )

  001a8	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_texture@@3PAUSCREEN@@A ; current_object_3d_texture
  001ad	66 8b 48 0a	 mov	 cx, WORD PTR [eax+10]
  001b1	66 c1 e9 07	 shr	 cx, 7
  001b5	66 83 e1 01	 and	 cx, 1
  001b9	0f b7 d1	 movzx	 edx, cx
  001bc	85 d2		 test	 edx, edx
  001be	74 07		 je	 SHORT $LN25@draw_3d_ob

; 2036 : 			{
; 2037 : 				skip_surface = TRUE;

  001c0	c7 45 f0 01 00
	00 00		 mov	 DWORD PTR _skip_surface$2[ebp], 1
$LN25@draw_3d_ob:

; 2038 : 			}
; 2039 : 		}
; 2040 : 
; 2041 : 		if ( !skip_surface )

  001c7	83 7d f0 00	 cmp	 DWORD PTR _skip_surface$2[ebp], 0
  001cb	0f 85 67 03 00
	00		 jne	 $LN26@draw_3d_ob

; 2042 : 		{
; 2043 : 			reset_deferred_state_changes ();

  001d1	e8 00 00 00 00	 call	 ?reset_deferred_state_changes@@YGXXZ ; reset_deferred_state_changes

; 2044 : 
; 2045 : 			zbuffer_constant = ( current_object_3d_surface->detail ) ? zbuffer_constant_elevated_bias: zbuffer_constant_normal_bias;

  001d6	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  001db	66 8b 08	 mov	 cx, WORD PTR [eax]
  001de	66 d1 e9	 shr	 cx, 1
  001e1	66 83 e1 01	 and	 cx, 1
  001e5	0f b7 d1	 movzx	 edx, cx
  001e8	85 d2		 test	 edx, edx
  001ea	74 0f		 je	 SHORT $LN43@draw_3d_ob
  001ec	f2 0f 10 05 00
	00 00 00	 movsd	 xmm0, QWORD PTR ?zbuffer_constant_elevated_bias@@3NA
  001f4	f2 0f 11 45 a4	 movsd	 QWORD PTR tv176[ebp], xmm0
  001f9	eb 0d		 jmp	 SHORT $LN44@draw_3d_ob
$LN43@draw_3d_ob:
  001fb	f2 0f 10 05 00
	00 00 00	 movsd	 xmm0, QWORD PTR ?zbuffer_constant_normal_bias@@3NA
  00203	f2 0f 11 45 a4	 movsd	 QWORD PTR tv176[ebp], xmm0
$LN44@draw_3d_ob:
  00208	f2 0f 10 45 a4	 movsd	 xmm0, QWORD PTR tv176[ebp]
  0020d	f2 0f 11 05 00
	00 00 00	 movsd	 QWORD PTR ?zbuffer_constant@@3NA, xmm0

; 2046 : 			current_object_3d_specular = ( current_object_3d_surface->specularity )	?	specular_rendering_enabled : FALSE;

  00215	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  0021a	0f b6 48 0b	 movzx	 ecx, BYTE PTR [eax+11]
  0021e	85 c9		 test	 ecx, ecx
  00220	74 0b		 je	 SHORT $LN45@draw_3d_ob
  00222	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?specular_rendering_enabled@@3HA ; specular_rendering_enabled
  00228	89 55 a8	 mov	 DWORD PTR tv180[ebp], edx
  0022b	eb 07		 jmp	 SHORT $LN46@draw_3d_ob
$LN45@draw_3d_ob:
  0022d	c7 45 a8 00 00
	00 00		 mov	 DWORD PTR tv180[ebp], 0
$LN46@draw_3d_ob:
  00234	8b 45 a8	 mov	 eax, DWORD PTR tv180[ebp]
  00237	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_specular@@3HA, eax ; current_object_3d_specular

; 2047 : 
; 2048 : #if ALWAYS_SPECULAR_RENDER
; 2049 : 			set_deferred_d3d_int_state ( D3DRENDERSTATE_SPECULARENABLE, TRUE );

  0023c	6a 01		 push	 1
  0023e	6a 1d		 push	 29			; 0000001dH
  00240	e8 00 00 00 00	 call	 ?set_deferred_d3d_int_state@@YGXW4_D3DRENDERSTATETYPE@@K@Z ; set_deferred_d3d_int_state

; 2050 : #else
; 2051 : 			set_deferred_d3d_int_state ( D3DRENDERSTATE_SPECULARENABLE, current_object_3d_specular );
; 2052 : #endif
; 2053 : 			set_deferred_d3d_int_state ( D3DRENDERSTATE_SHADEMODE, D3DSHADE_GOURAUD );

  00245	6a 02		 push	 2
  00247	6a 09		 push	 9
  00249	e8 00 00 00 00	 call	 ?set_deferred_d3d_int_state@@YGXW4_D3DRENDERSTATETYPE@@K@Z ; set_deferred_d3d_int_state

; 2054 : 
; 2055 : 			if ( current_object_3d_surface->additive )

  0024e	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  00253	66 8b 08	 mov	 cx, WORD PTR [eax]
  00256	66 c1 e9 05	 shr	 cx, 5
  0025a	66 83 e1 01	 and	 cx, 1
  0025e	0f b7 d1	 movzx	 edx, cx
  00261	85 d2		 test	 edx, edx
  00263	0f 84 3c 01 00
	00		 je	 $LN28@draw_3d_ob

; 2056 : 			{
; 2057 : 				current_object_3d_texture_u_address = ( current_object_3d_surface->texture_wrapped_u ) ? D3DTADDRESS_WRAP: D3DTADDRESS_CLAMP;

  00269	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  0026e	66 8b 08	 mov	 cx, WORD PTR [eax]
  00271	66 c1 e9 0c	 shr	 cx, 12			; 0000000cH
  00275	66 83 e1 01	 and	 cx, 1
  00279	0f b7 d1	 movzx	 edx, cx
  0027c	85 d2		 test	 edx, edx
  0027e	74 09		 je	 SHORT $LN47@draw_3d_ob
  00280	c7 45 a8 01 00
	00 00		 mov	 DWORD PTR tv195[ebp], 1
  00287	eb 07		 jmp	 SHORT $LN48@draw_3d_ob
$LN47@draw_3d_ob:
  00289	c7 45 a8 03 00
	00 00		 mov	 DWORD PTR tv195[ebp], 3
$LN48@draw_3d_ob:
  00290	8b 45 a8	 mov	 eax, DWORD PTR tv195[ebp]
  00293	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_texture_u_address@@3HA, eax ; current_object_3d_texture_u_address

; 2058 : 				current_object_3d_texture_v_address = ( current_object_3d_surface->texture_wrapped_v ) ? D3DTADDRESS_WRAP: D3DTADDRESS_CLAMP;

  00298	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  0029d	66 8b 08	 mov	 cx, WORD PTR [eax]
  002a0	66 c1 e9 0d	 shr	 cx, 13			; 0000000dH
  002a4	66 83 e1 01	 and	 cx, 1
  002a8	0f b7 d1	 movzx	 edx, cx
  002ab	85 d2		 test	 edx, edx
  002ad	74 09		 je	 SHORT $LN49@draw_3d_ob
  002af	c7 45 a8 01 00
	00 00		 mov	 DWORD PTR tv201[ebp], 1
  002b6	eb 07		 jmp	 SHORT $LN50@draw_3d_ob
$LN49@draw_3d_ob:
  002b8	c7 45 a8 03 00
	00 00		 mov	 DWORD PTR tv201[ebp], 3
$LN50@draw_3d_ob:
  002bf	8b 45 a8	 mov	 eax, DWORD PTR tv201[ebp]
  002c2	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_texture_v_address@@3HA, eax ; current_object_3d_texture_v_address

; 2059 : 				current_object_3d_texture_filter = ( current_object_3d_surface->texture_filtered ) ? D3DTFG_LINEAR : D3DTFG_POINT;

  002c7	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  002cc	66 8b 08	 mov	 cx, WORD PTR [eax]
  002cf	66 c1 e9 0a	 shr	 cx, 10			; 0000000aH
  002d3	66 83 e1 01	 and	 cx, 1
  002d7	0f b7 d1	 movzx	 edx, cx
  002da	85 d2		 test	 edx, edx
  002dc	74 09		 je	 SHORT $LN51@draw_3d_ob
  002de	c7 45 a8 02 00
	00 00		 mov	 DWORD PTR tv207[ebp], 2
  002e5	eb 07		 jmp	 SHORT $LN52@draw_3d_ob
$LN51@draw_3d_ob:
  002e7	c7 45 a8 01 00
	00 00		 mov	 DWORD PTR tv207[ebp], 1
$LN52@draw_3d_ob:
  002ee	8b 45 a8	 mov	 eax, DWORD PTR tv207[ebp]
  002f1	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_texture_filter@@3HA, eax ; current_object_3d_texture_filter

; 2060 : 				current_object_3d_texture_mipmap = ( current_object_3d_surface->texture_mipmapped )	? D3DTFP_POINT : D3DTFP_NONE;

  002f6	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  002fb	66 8b 08	 mov	 cx, WORD PTR [eax]
  002fe	66 c1 e9 0b	 shr	 cx, 11			; 0000000bH
  00302	66 83 e1 01	 and	 cx, 1
  00306	0f b7 d1	 movzx	 edx, cx
  00309	85 d2		 test	 edx, edx
  0030b	74 09		 je	 SHORT $LN53@draw_3d_ob
  0030d	c7 45 a8 02 00
	00 00		 mov	 DWORD PTR tv213[ebp], 2
  00314	eb 07		 jmp	 SHORT $LN54@draw_3d_ob
$LN53@draw_3d_ob:
  00316	c7 45 a8 01 00
	00 00		 mov	 DWORD PTR tv213[ebp], 1
$LN54@draw_3d_ob:
  0031d	8b 45 a8	 mov	 eax, DWORD PTR tv213[ebp]
  00320	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_texture_mipmap@@3HA, eax ; current_object_3d_texture_mipmap

; 2061 : 
; 2062 : 				set_deferred_d3d_texture ( 0, current_object_3d_texture );

  00325	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_texture@@3PAUSCREEN@@A ; current_object_3d_texture
  0032a	50		 push	 eax
  0032b	6a 00		 push	 0
  0032d	e8 00 00 00 00	 call	 ?set_deferred_d3d_texture@@YGXHPAUSCREEN@@@Z ; set_deferred_d3d_texture

; 2063 : 				set_deferred_d3d_texture_stage_state ( 0, D3DTSS_COLOROP, D3DTOP_MODULATE );

  00332	6a 04		 push	 4
  00334	6a 01		 push	 1
  00336	6a 00		 push	 0
  00338	e8 00 00 00 00	 call	 ?set_deferred_d3d_texture_stage_state@@YGXHHH@Z ; set_deferred_d3d_texture_stage_state

; 2064 : 
; 2065 : 				set_deferred_d3d_texture_stage_state ( 0, D3DTSS_ADDRESSU, current_object_3d_texture_u_address );

  0033d	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_texture_u_address@@3HA ; current_object_3d_texture_u_address
  00342	50		 push	 eax
  00343	6a 0d		 push	 13			; 0000000dH
  00345	6a 00		 push	 0
  00347	e8 00 00 00 00	 call	 ?set_deferred_d3d_texture_stage_state@@YGXHHH@Z ; set_deferred_d3d_texture_stage_state

; 2066 : 				set_deferred_d3d_texture_stage_state ( 0, D3DTSS_ADDRESSV, current_object_3d_texture_v_address );

  0034c	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_texture_v_address@@3HA ; current_object_3d_texture_v_address
  00351	50		 push	 eax
  00352	6a 0e		 push	 14			; 0000000eH
  00354	6a 00		 push	 0
  00356	e8 00 00 00 00	 call	 ?set_deferred_d3d_texture_stage_state@@YGXHHH@Z ; set_deferred_d3d_texture_stage_state

; 2067 : 				set_deferred_d3d_texture_stage_state ( 0, D3DTSS_MAGFILTER, current_object_3d_texture_filter );

  0035b	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_texture_filter@@3HA ; current_object_3d_texture_filter
  00360	50		 push	 eax
  00361	6a 10		 push	 16			; 00000010H
  00363	6a 00		 push	 0
  00365	e8 00 00 00 00	 call	 ?set_deferred_d3d_texture_stage_state@@YGXHHH@Z ; set_deferred_d3d_texture_stage_state

; 2068 : 				set_deferred_d3d_texture_stage_state ( 0, D3DTSS_MINFILTER, current_object_3d_texture_filter );

  0036a	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_texture_filter@@3HA ; current_object_3d_texture_filter
  0036f	50		 push	 eax
  00370	6a 11		 push	 17			; 00000011H
  00372	6a 00		 push	 0
  00374	e8 00 00 00 00	 call	 ?set_deferred_d3d_texture_stage_state@@YGXHHH@Z ; set_deferred_d3d_texture_stage_state

; 2069 : 				set_deferred_d3d_texture_stage_state ( 0, D3DTSS_MIPFILTER, current_object_3d_texture_mipmap );

  00379	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_texture_mipmap@@3HA ; current_object_3d_texture_mipmap
  0037e	50		 push	 eax
  0037f	6a 12		 push	 18			; 00000012H
  00381	6a 00		 push	 0
  00383	e8 00 00 00 00	 call	 ?set_deferred_d3d_texture_stage_state@@YGXHHH@Z ; set_deferred_d3d_texture_stage_state

; 2070 : 
; 2071 : 				set_deferred_d3d_int_state ( D3DRENDERSTATE_ALPHABLENDENABLE, TRUE );

  00388	6a 01		 push	 1
  0038a	6a 1b		 push	 27			; 0000001bH
  0038c	e8 00 00 00 00	 call	 ?set_deferred_d3d_int_state@@YGXW4_D3DRENDERSTATETYPE@@K@Z ; set_deferred_d3d_int_state

; 2072 : 				set_deferred_d3d_int_state ( D3DRENDERSTATE_SRCBLEND, D3DBLEND_ONE );

  00391	6a 02		 push	 2
  00393	6a 13		 push	 19			; 00000013H
  00395	e8 00 00 00 00	 call	 ?set_deferred_d3d_int_state@@YGXW4_D3DRENDERSTATETYPE@@K@Z ; set_deferred_d3d_int_state

; 2073 : 				set_deferred_d3d_int_state ( D3DRENDERSTATE_DESTBLEND, D3DBLEND_ONE );

  0039a	6a 02		 push	 2
  0039c	6a 14		 push	 20			; 00000014H
  0039e	e8 00 00 00 00	 call	 ?set_deferred_d3d_int_state@@YGXW4_D3DRENDERSTATETYPE@@K@Z ; set_deferred_d3d_int_state

; 2074 : 			}
; 2075 : 			else

  003a3	eb 14		 jmp	 SHORT $LN29@draw_3d_ob
$LN28@draw_3d_ob:

; 2076 : 			{
; 2077 : 				set_deferred_d3d_int_state ( D3DRENDERSTATE_ALPHABLENDENABLE, FALSE );

  003a5	6a 00		 push	 0
  003a7	6a 1b		 push	 27			; 0000001bH
  003a9	e8 00 00 00 00	 call	 ?set_deferred_d3d_int_state@@YGXW4_D3DRENDERSTATETYPE@@K@Z ; set_deferred_d3d_int_state

; 2078 : 				set_deferred_d3d_texture_stage_state ( 0, D3DTSS_COLOROP, D3DTOP_DISABLE );

  003ae	6a 01		 push	 1
  003b0	6a 01		 push	 1
  003b2	6a 00		 push	 0
  003b4	e8 00 00 00 00	 call	 ?set_deferred_d3d_texture_stage_state@@YGXHHH@Z ; set_deferred_d3d_texture_stage_state
$LN29@draw_3d_ob:

; 2079 : 			}
; 2080 : 
; 2081 : 			if ( current_object_3d_surface->smoothed )

  003b9	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  003be	66 8b 08	 mov	 cx, WORD PTR [eax]
  003c1	66 c1 e9 02	 shr	 cx, 2
  003c5	66 83 e1 01	 and	 cx, 1
  003c9	0f b7 d1	 movzx	 edx, cx
  003cc	85 d2		 test	 edx, edx
  003ce	74 50		 je	 SHORT $LN30@draw_3d_ob

; 2082 : 			{
; 2083 : 				for ( faces_left = current_object_3d_surface->number_of_faces; faces_left > 0; faces_left-- )

  003d0	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  003d5	0f b7 48 08	 movzx	 ecx, WORD PTR [eax+8]
  003d9	89 4d f8	 mov	 DWORD PTR _faces_left$[ebp], ecx
  003dc	eb 09		 jmp	 SHORT $LN7@draw_3d_ob
$LN5@draw_3d_ob:
  003de	8b 45 f8	 mov	 eax, DWORD PTR _faces_left$[ebp]
  003e1	83 e8 01	 sub	 eax, 1
  003e4	89 45 f8	 mov	 DWORD PTR _faces_left$[ebp], eax
$LN7@draw_3d_ob:
  003e7	83 7d f8 00	 cmp	 DWORD PTR _faces_left$[ebp], 0
  003eb	7e 2e		 jle	 SHORT $LN6@draw_3d_ob

; 2084 : 				{
; 2085 : 					wrender_unclipped_3d_object_gouraud_white_polygon ( current_object_3d_faces );

  003ed	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  003f2	50		 push	 eax
  003f3	e8 00 00 00 00	 call	 ?wrender_unclipped_3d_object_gouraud_white_polygon@@YGXPAUOBJECT_3D_FACE@@@Z ; wrender_unclipped_3d_object_gouraud_white_polygon

; 2086 : 					current_object_3d_point_list += current_object_3d_faces->number_of_points;

  003f8	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  003fd	0f b6 08	 movzx	 ecx, BYTE PTR [eax]
  00400	03 0d 00 00 00
	00		 add	 ecx, DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A ; current_object_3d_point_list
  00406	89 0d 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A, ecx ; current_object_3d_point_list

; 2087 : 					current_object_3d_faces++;

  0040c	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  00411	83 c0 01	 add	 eax, 1
  00414	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A, eax ; current_object_3d_faces

; 2088 : 				}

  00419	eb c3		 jmp	 SHORT $LN5@draw_3d_ob
$LN6@draw_3d_ob:

; 2089 : 			}
; 2090 : 			else

  0041b	e9 13 01 00 00	 jmp	 $LN15@draw_3d_ob
$LN30@draw_3d_ob:

; 2091 : 			{
; 2092 : 				if ( current_object_3d_surface->polygons )

  00420	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  00425	66 8b 08	 mov	 cx, WORD PTR [eax]
  00428	66 83 e1 01	 and	 cx, 1
  0042c	0f b7 d1	 movzx	 edx, cx
  0042f	85 d2		 test	 edx, edx
  00431	0f 84 cb 00 00
	00		 je	 $LN32@draw_3d_ob

; 2093 : 				{
; 2094 : 					if ( current_object_3d_surface->additive )

  00437	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  0043c	66 8b 08	 mov	 cx, WORD PTR [eax]
  0043f	66 c1 e9 05	 shr	 cx, 5
  00443	66 83 e1 01	 and	 cx, 1
  00447	0f b7 d1	 movzx	 edx, cx
  0044a	85 d2		 test	 edx, edx
  0044c	74 5a		 je	 SHORT $LN34@draw_3d_ob

; 2095 : 					{
; 2096 : 						for ( faces_left = current_object_3d_surface->number_of_faces; faces_left > 0; faces_left-- )

  0044e	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  00453	0f b7 48 08	 movzx	 ecx, WORD PTR [eax+8]
  00457	89 4d f8	 mov	 DWORD PTR _faces_left$[ebp], ecx
  0045a	eb 09		 jmp	 SHORT $LN10@draw_3d_ob
$LN8@draw_3d_ob:
  0045c	8b 45 f8	 mov	 eax, DWORD PTR _faces_left$[ebp]
  0045f	83 e8 01	 sub	 eax, 1
  00462	89 45 f8	 mov	 DWORD PTR _faces_left$[ebp], eax
$LN10@draw_3d_ob:
  00465	83 7d f8 00	 cmp	 DWORD PTR _faces_left$[ebp], 0
  00469	7e 3b		 jle	 SHORT $LN9@draw_3d_ob

; 2097 : 						{
; 2098 : 							wrender_unclipped_3d_object_white_textured_polygon ( current_object_3d_faces );

  0046b	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  00470	50		 push	 eax
  00471	e8 00 00 00 00	 call	 ?wrender_unclipped_3d_object_white_textured_polygon@@YGXPAUOBJECT_3D_FACE@@@Z ; wrender_unclipped_3d_object_white_textured_polygon

; 2099 : 							current_object_3d_face_normal_list++;

  00476	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_face_normal_list@@3PAUPOINT_3D_PLAIN_REFERENCE@@A ; current_object_3d_face_normal_list
  0047b	83 c0 02	 add	 eax, 2
  0047e	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_face_normal_list@@3PAUPOINT_3D_PLAIN_REFERENCE@@A, eax ; current_object_3d_face_normal_list

; 2100 : 							current_object_3d_point_list += current_object_3d_faces->number_of_points;

  00483	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  00488	0f b6 08	 movzx	 ecx, BYTE PTR [eax]
  0048b	03 0d 00 00 00
	00		 add	 ecx, DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A ; current_object_3d_point_list
  00491	89 0d 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A, ecx ; current_object_3d_point_list

; 2101 : 							current_object_3d_faces++;

  00497	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  0049c	83 c0 01	 add	 eax, 1
  0049f	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A, eax ; current_object_3d_faces

; 2102 : 						}

  004a4	eb b6		 jmp	 SHORT $LN8@draw_3d_ob
$LN9@draw_3d_ob:

; 2103 : 					}
; 2104 : 					else

  004a6	eb 58		 jmp	 SHORT $LN12@draw_3d_ob
$LN34@draw_3d_ob:

; 2105 : 					{
; 2106 : 						for ( faces_left = current_object_3d_surface->number_of_faces; faces_left > 0; faces_left-- )

  004a8	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  004ad	0f b7 48 08	 movzx	 ecx, WORD PTR [eax+8]
  004b1	89 4d f8	 mov	 DWORD PTR _faces_left$[ebp], ecx
  004b4	eb 09		 jmp	 SHORT $LN13@draw_3d_ob
$LN11@draw_3d_ob:
  004b6	8b 45 f8	 mov	 eax, DWORD PTR _faces_left$[ebp]
  004b9	83 e8 01	 sub	 eax, 1
  004bc	89 45 f8	 mov	 DWORD PTR _faces_left$[ebp], eax
$LN13@draw_3d_ob:
  004bf	83 7d f8 00	 cmp	 DWORD PTR _faces_left$[ebp], 0
  004c3	7e 3b		 jle	 SHORT $LN12@draw_3d_ob

; 2107 : 						{
; 2108 : 							wrender_unclipped_3d_object_white_polygon ( current_object_3d_faces );

  004c5	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  004ca	50		 push	 eax
  004cb	e8 00 00 00 00	 call	 ?wrender_unclipped_3d_object_white_polygon@@YGXPAUOBJECT_3D_FACE@@@Z ; wrender_unclipped_3d_object_white_polygon

; 2109 : 							current_object_3d_face_normal_list++;

  004d0	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_face_normal_list@@3PAUPOINT_3D_PLAIN_REFERENCE@@A ; current_object_3d_face_normal_list
  004d5	83 c0 02	 add	 eax, 2
  004d8	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_face_normal_list@@3PAUPOINT_3D_PLAIN_REFERENCE@@A, eax ; current_object_3d_face_normal_list

; 2110 : 							current_object_3d_point_list += current_object_3d_faces->number_of_points;

  004dd	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  004e2	0f b6 08	 movzx	 ecx, BYTE PTR [eax]
  004e5	03 0d 00 00 00
	00		 add	 ecx, DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A ; current_object_3d_point_list
  004eb	89 0d 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A, ecx ; current_object_3d_point_list

; 2111 : 							current_object_3d_faces++;

  004f1	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  004f6	83 c0 01	 add	 eax, 1
  004f9	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A, eax ; current_object_3d_faces

; 2112 : 						}

  004fe	eb b6		 jmp	 SHORT $LN11@draw_3d_ob
$LN12@draw_3d_ob:

; 2113 : 					}
; 2114 : 				}
; 2115 : 				else

  00500	eb 31		 jmp	 SHORT $LN15@draw_3d_ob
$LN32@draw_3d_ob:

; 2116 : 				{
; 2117 : 					for ( faces_left = current_object_3d_surface->number_of_faces; faces_left > 0; faces_left-- )

  00502	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  00507	0f b7 48 08	 movzx	 ecx, WORD PTR [eax+8]
  0050b	89 4d f8	 mov	 DWORD PTR _faces_left$[ebp], ecx
  0050e	eb 09		 jmp	 SHORT $LN16@draw_3d_ob
$LN14@draw_3d_ob:
  00510	8b 45 f8	 mov	 eax, DWORD PTR _faces_left$[ebp]
  00513	83 e8 01	 sub	 eax, 1
  00516	89 45 f8	 mov	 DWORD PTR _faces_left$[ebp], eax
$LN16@draw_3d_ob:
  00519	83 7d f8 00	 cmp	 DWORD PTR _faces_left$[ebp], 0
  0051d	7e 14		 jle	 SHORT $LN15@draw_3d_ob

; 2118 : 					{
; 2119 : 						wrender_unclipped_3d_object_plain_white_line ();

  0051f	e8 00 00 00 00	 call	 ?wrender_unclipped_3d_object_plain_white_line@@YGXXZ ; wrender_unclipped_3d_object_plain_white_line

; 2120 : 						current_object_3d_point_list += 2;

  00524	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A ; current_object_3d_point_list
  00529	83 c0 02	 add	 eax, 2
  0052c	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A, eax ; current_object_3d_point_list

; 2121 : 					}

  00531	eb dd		 jmp	 SHORT $LN14@draw_3d_ob
$LN15@draw_3d_ob:

; 2122 : 				}
; 2123 : 			}
; 2124 : 		}
; 2125 : 		else

  00533	e9 90 00 00 00	 jmp	 $LN37@draw_3d_ob
$LN26@draw_3d_ob:

; 2126 : 		{
; 2127 : 			//
; 2128 : 			// Move on through the point list & normals list
; 2129 : 			//
; 2130 : 
; 2131 : 			if ( current_object_3d_surface->polygons )

  00538	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  0053d	66 8b 08	 mov	 cx, WORD PTR [eax]
  00540	66 83 e1 01	 and	 cx, 1
  00544	0f b7 d1	 movzx	 edx, cx
  00547	85 d2		 test	 edx, edx
  00549	74 66		 je	 SHORT $LN36@draw_3d_ob

; 2132 : 			{
; 2133 : 				for ( faces_left = current_object_3d_surface->number_of_faces; faces_left > 0; faces_left-- )

  0054b	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  00550	0f b7 48 08	 movzx	 ecx, WORD PTR [eax+8]
  00554	89 4d f8	 mov	 DWORD PTR _faces_left$[ebp], ecx
  00557	eb 09		 jmp	 SHORT $LN19@draw_3d_ob
$LN17@draw_3d_ob:
  00559	8b 45 f8	 mov	 eax, DWORD PTR _faces_left$[ebp]
  0055c	83 e8 01	 sub	 eax, 1
  0055f	89 45 f8	 mov	 DWORD PTR _faces_left$[ebp], eax
$LN19@draw_3d_ob:
  00562	83 7d f8 00	 cmp	 DWORD PTR _faces_left$[ebp], 0
  00566	7e 47		 jle	 SHORT $LN18@draw_3d_ob

; 2134 : 				{
; 2135 : 					if ( !current_object_3d_surface->smoothed )

  00568	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  0056d	66 8b 08	 mov	 cx, WORD PTR [eax]
  00570	66 c1 e9 02	 shr	 cx, 2
  00574	66 83 e1 01	 and	 cx, 1
  00578	0f b7 d1	 movzx	 edx, cx
  0057b	85 d2		 test	 edx, edx
  0057d	75 0d		 jne	 SHORT $LN38@draw_3d_ob

; 2136 : 					{
; 2137 : 						current_object_3d_face_normal_list++;

  0057f	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_face_normal_list@@3PAUPOINT_3D_PLAIN_REFERENCE@@A ; current_object_3d_face_normal_list
  00584	83 c0 02	 add	 eax, 2
  00587	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_face_normal_list@@3PAUPOINT_3D_PLAIN_REFERENCE@@A, eax ; current_object_3d_face_normal_list
$LN38@draw_3d_ob:

; 2138 : 					}
; 2139 : 
; 2140 : 					current_object_3d_point_list += current_object_3d_faces->number_of_points;

  0058c	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  00591	0f b6 08	 movzx	 ecx, BYTE PTR [eax]
  00594	03 0d 00 00 00
	00		 add	 ecx, DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A ; current_object_3d_point_list
  0059a	89 0d 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A, ecx ; current_object_3d_point_list

; 2141 : 					current_object_3d_faces++;

  005a0	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  005a5	83 c0 01	 add	 eax, 1
  005a8	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A, eax ; current_object_3d_faces

; 2142 : 				}

  005ad	eb aa		 jmp	 SHORT $LN17@draw_3d_ob
$LN18@draw_3d_ob:

; 2143 : 			}
; 2144 : 			else

  005af	eb 17		 jmp	 SHORT $LN37@draw_3d_ob
$LN36@draw_3d_ob:

; 2145 : 			{
; 2146 : 				current_object_3d_point_list += 2 * current_object_3d_surface->number_of_faces;

  005b1	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  005b6	0f b7 48 08	 movzx	 ecx, WORD PTR [eax+8]
  005ba	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A ; current_object_3d_point_list
  005c0	8d 04 4a	 lea	 eax, DWORD PTR [edx+ecx*2]
  005c3	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A, eax ; current_object_3d_point_list
$LN37@draw_3d_ob:

; 2147 : 			}
; 2148 : 		}
; 2149 : 
; 2150 : 		current_object_3d_surface_point_list += number_of_surface_points;

  005c8	8b 45 fc	 mov	 eax, DWORD PTR _number_of_surface_points$[ebp]
  005cb	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_object_3d_surface_point_list@@3PAUPOINT_3D_PLAIN_REFERENCE@@A ; current_object_3d_surface_point_list
  005d1	8d 14 41	 lea	 edx, DWORD PTR [ecx+eax*2]
  005d4	89 15 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_surface_point_list@@3PAUPOINT_3D_PLAIN_REFERENCE@@A, edx ; current_object_3d_surface_point_list

; 2151 : 		if ( current_object_3d_surface->smoothed )

  005da	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  005df	66 8b 08	 mov	 cx, WORD PTR [eax]
  005e2	66 c1 e9 02	 shr	 cx, 2
  005e6	66 83 e1 01	 and	 cx, 1
  005ea	0f b7 d1	 movzx	 edx, cx
  005ed	85 d2		 test	 edx, edx
  005ef	74 12		 je	 SHORT $LN39@draw_3d_ob

; 2152 : 		{
; 2153 : 			current_object_3d_surface_point_normal_list += number_of_surface_points;

  005f1	8b 45 fc	 mov	 eax, DWORD PTR _number_of_surface_points$[ebp]
  005f4	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_object_3d_surface_point_normal_list@@3PAUPOINT_3D_PLAIN_REFERENCE@@A ; current_object_3d_surface_point_normal_list
  005fa	8d 14 41	 lea	 edx, DWORD PTR [ecx+eax*2]
  005fd	89 15 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_surface_point_normal_list@@3PAUPOINT_3D_PLAIN_REFERENCE@@A, edx ; current_object_3d_surface_point_normal_list
$LN39@draw_3d_ob:

; 2154 : 		}
; 2155 : 		if ( current_object_3d_surface->textured )

  00603	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  00608	66 8b 08	 mov	 cx, WORD PTR [eax]
  0060b	66 c1 e9 03	 shr	 cx, 3
  0060f	66 83 e1 01	 and	 cx, 1
  00613	0f b7 d1	 movzx	 edx, cx
  00616	85 d2		 test	 edx, edx
  00618	74 12		 je	 SHORT $LN40@draw_3d_ob

; 2156 : 		{
; 2157 : 			current_object_3d_surface_point_texture_list += number_of_surface_points;

  0061a	8b 45 fc	 mov	 eax, DWORD PTR _number_of_surface_points$[ebp]
  0061d	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_object_3d_surface_point_texture_list@@3PAUOBJECT_3D_SHORT_TEXTURED_POINT@@A ; current_object_3d_surface_point_texture_list
  00623	8d 14 c1	 lea	 edx, DWORD PTR [ecx+eax*8]
  00626	89 15 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_surface_point_texture_list@@3PAUOBJECT_3D_SHORT_TEXTURED_POINT@@A, edx ; current_object_3d_surface_point_texture_list
$LN40@draw_3d_ob:

; 2158 : 		}
; 2159 : 		if ( current_object_3d_surface->has_luminosity_texture )

  0062c	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  00631	66 8b 08	 mov	 cx, WORD PTR [eax]
  00634	66 c1 e9 04	 shr	 cx, 4
  00638	66 83 e1 01	 and	 cx, 1
  0063c	0f b7 d1	 movzx	 edx, cx
  0063f	85 d2		 test	 edx, edx
  00641	74 12		 je	 SHORT $LN41@draw_3d_ob

; 2160 : 		{
; 2161 : 			current_object_3d_surface_point_texture_list += number_of_surface_points;

  00643	8b 45 fc	 mov	 eax, DWORD PTR _number_of_surface_points$[ebp]
  00646	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_object_3d_surface_point_texture_list@@3PAUOBJECT_3D_SHORT_TEXTURED_POINT@@A ; current_object_3d_surface_point_texture_list
  0064c	8d 14 c1	 lea	 edx, DWORD PTR [ecx+eax*8]
  0064f	89 15 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_surface_point_texture_list@@3PAUOBJECT_3D_SHORT_TEXTURED_POINT@@A, edx ; current_object_3d_surface_point_texture_list
$LN41@draw_3d_ob:

; 2162 : 		}
; 2163 : 		current_object_3d_surface++;

  00655	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  0065a	83 c0 10	 add	 eax, 16			; 00000010H
  0065d	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A, eax ; current_object_3d_surface

; 2164 : 	}

  00662	e9 66 fa ff ff	 jmp	 $LN2@draw_3d_ob
$LN3@draw_3d_ob:

; 2165 : }

  00667	5f		 pop	 edi
  00668	5e		 pop	 esi
  00669	5b		 pop	 ebx
  0066a	8b e5		 mov	 esp, ebp
  0066c	5d		 pop	 ebp
  0066d	c2 04 00	 ret	 4
?draw_3d_object_untextured_unclipped_faces@@YGXH@Z ENDP	; draw_3d_object_untextured_unclipped_faces
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\modules\3d\3dobjdrw.c
;	COMDAT ?draw_3d_object_untextured_clipped_faces@@YGXH@Z
_TEXT	SEGMENT
tv176 = -92						; size = 8
tv213 = -88						; size = 4
tv207 = -88						; size = 4
tv201 = -88						; size = 4
tv195 = -88						; size = 4
tv180 = -88						; size = 4
_frame$1 = -20						; size = 4
_skip_surface$2 = -16					; size = 4
_surfaces_left$ = -12					; size = 4
_faces_left$ = -8					; size = 4
_number_of_surface_points$ = -4				; size = 4
_object_number$ = 8					; size = 4
?draw_3d_object_untextured_clipped_faces@@YGXH@Z PROC	; draw_3d_object_untextured_clipped_faces, COMDAT

; 1755 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 5c	 sub	 esp, 92			; 0000005cH
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 1756 : 	int
; 1757 : 		number_of_surface_points,
; 1758 : 		faces_left,
; 1759 : 		surfaces_left;
; 1760 : 
; 1761 : 	surfaces_left = objects_3d_data[object_number].number_of_surfaces;

  00009	6b 45 08 68	 imul	 eax, DWORD PTR _object_number$[ebp], 104
  0000d	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?objects_3d_data@@3PAUOBJECT_3D@@A ; objects_3d_data
  00013	0f b7 54 01 06	 movzx	 edx, WORD PTR [ecx+eax+6]
  00018	89 55 f4	 mov	 DWORD PTR _surfaces_left$[ebp], edx

; 1762 : 
; 1763 : 	current_object_3d_faces = objects_3d_data[object_number].faces;

  0001b	6b 45 08 68	 imul	 eax, DWORD PTR _object_number$[ebp], 104
  0001f	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?objects_3d_data@@3PAUOBJECT_3D@@A ; objects_3d_data
  00025	8b 54 01 44	 mov	 edx, DWORD PTR [ecx+eax+68]
  00029	89 15 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A, edx ; current_object_3d_faces

; 1764 : 	current_object_3d_surface = objects_3d_data[object_number].surfaces;

  0002f	6b 45 08 68	 imul	 eax, DWORD PTR _object_number$[ebp], 104
  00033	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?objects_3d_data@@3PAUOBJECT_3D@@A ; objects_3d_data
  00039	8b 54 01 50	 mov	 edx, DWORD PTR [ecx+eax+80]
  0003d	89 15 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A, edx ; current_object_3d_surface

; 1765 : 	current_object_3d_point_list = objects_3d_data[object_number].object_faces_point_plain_list;

  00043	6b 45 08 68	 imul	 eax, DWORD PTR _object_number$[ebp], 104
  00047	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?objects_3d_data@@3PAUOBJECT_3D@@A ; objects_3d_data
  0004d	8b 54 01 4c	 mov	 edx, DWORD PTR [ecx+eax+76]
  00051	89 15 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A, edx ; current_object_3d_point_list

; 1766 : 	current_object_3d_face_normal_list = objects_3d_data[object_number].object_face_normal_references;

  00057	6b 45 08 68	 imul	 eax, DWORD PTR _object_number$[ebp], 104
  0005b	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?objects_3d_data@@3PAUOBJECT_3D@@A ; objects_3d_data
  00061	8b 54 01 54	 mov	 edx, DWORD PTR [ecx+eax+84]
  00065	89 15 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_face_normal_list@@3PAUPOINT_3D_PLAIN_REFERENCE@@A, edx ; current_object_3d_face_normal_list

; 1767 : 	current_object_3d_transformed_normals = &transformed_3d_normals[object_3d_points_current_base];

  0006b	a1 00 00 00 00	 mov	 eax, DWORD PTR ?object_3d_points_current_base@@3HA ; object_3d_points_current_base
  00070	8d 0c c5 00 00
	00 00		 lea	 ecx, DWORD PTR ?transformed_3d_normals@@3PAUOBJECT_3D_TRANSFORMED_POINT_NORMAL@@A[eax*8]
  00077	89 0d 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_transformed_normals@@3PAUOBJECT_3D_TRANSFORMED_POINT_NORMAL@@A, ecx ; current_object_3d_transformed_normals

; 1768 : 
; 1769 : 	current_object_3d_surface_point_list = objects_3d_data[object_number].surface_points;

  0007d	6b 45 08 68	 imul	 eax, DWORD PTR _object_number$[ebp], 104
  00081	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?objects_3d_data@@3PAUOBJECT_3D@@A ; objects_3d_data
  00087	8b 54 01 5c	 mov	 edx, DWORD PTR [ecx+eax+92]
  0008b	89 15 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_surface_point_list@@3PAUPOINT_3D_PLAIN_REFERENCE@@A, edx ; current_object_3d_surface_point_list

; 1770 : 	current_object_3d_surface_point_texture_list = objects_3d_data[object_number].surface_texture_points;

  00091	6b 45 08 68	 imul	 eax, DWORD PTR _object_number$[ebp], 104
  00095	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?objects_3d_data@@3PAUOBJECT_3D@@A ; objects_3d_data
  0009b	8b 54 01 58	 mov	 edx, DWORD PTR [ecx+eax+88]
  0009f	89 15 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_surface_point_texture_list@@3PAUOBJECT_3D_SHORT_TEXTURED_POINT@@A, edx ; current_object_3d_surface_point_texture_list

; 1771 : 	current_object_3d_surface_point_normal_list = objects_3d_data[object_number].surface_point_normals;

  000a5	6b 45 08 68	 imul	 eax, DWORD PTR _object_number$[ebp], 104
  000a9	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?objects_3d_data@@3PAUOBJECT_3D@@A ; objects_3d_data
  000af	8b 54 01 60	 mov	 edx, DWORD PTR [ecx+eax+96]
  000b3	89 15 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_surface_point_normal_list@@3PAUPOINT_3D_PLAIN_REFERENCE@@A, edx ; current_object_3d_surface_point_normal_list

; 1772 : 
; 1773 : 	for ( surfaces_left = objects_3d_data[object_number].number_of_surfaces; surfaces_left > 0; surfaces_left-- )

  000b9	6b 45 08 68	 imul	 eax, DWORD PTR _object_number$[ebp], 104
  000bd	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?objects_3d_data@@3PAUOBJECT_3D@@A ; objects_3d_data
  000c3	0f b7 54 01 06	 movzx	 edx, WORD PTR [ecx+eax+6]
  000c8	89 55 f4	 mov	 DWORD PTR _surfaces_left$[ebp], edx
  000cb	eb 09		 jmp	 SHORT $LN4@draw_3d_ob
$LN2@draw_3d_ob:
  000cd	8b 45 f4	 mov	 eax, DWORD PTR _surfaces_left$[ebp]
  000d0	83 e8 01	 sub	 eax, 1
  000d3	89 45 f4	 mov	 DWORD PTR _surfaces_left$[ebp], eax
$LN4@draw_3d_ob:
  000d6	83 7d f4 00	 cmp	 DWORD PTR _surfaces_left$[ebp], 0
  000da	0f 8e 66 06 00
	00		 jle	 $LN3@draw_3d_ob

; 1774 : 	{
; 1775 : 		int
; 1776 : 			skip_surface;
; 1777 : 
; 1778 : 		number_of_surface_points = current_object_3d_surface->number_of_points;

  000e0	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  000e5	0f b6 48 03	 movzx	 ecx, BYTE PTR [eax+3]
  000e9	89 4d fc	 mov	 DWORD PTR _number_of_surface_points$[ebp], ecx

; 1779 : 		if ( number_of_surface_points == 0 )

  000ec	83 7d fc 00	 cmp	 DWORD PTR _number_of_surface_points$[ebp], 0
  000f0	75 07		 jne	 SHORT $LN20@draw_3d_ob

; 1780 : 		{
; 1781 : 			number_of_surface_points = 256;

  000f2	c7 45 fc 00 01
	00 00		 mov	 DWORD PTR _number_of_surface_points$[ebp], 256 ; 00000100H
$LN20@draw_3d_ob:

; 1782 : 		}
; 1783 : 
; 1784 : 		skip_surface = FALSE;

  000f9	c7 45 f0 00 00
	00 00		 mov	 DWORD PTR _skip_surface$2[ebp], 0

; 1785 : 
; 1786 : 		if ( current_object_3d_surface->translucent )

  00100	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  00105	66 8b 08	 mov	 cx, WORD PTR [eax]
  00108	66 c1 e9 06	 shr	 cx, 6
  0010c	66 83 e1 01	 and	 cx, 1
  00110	0f b7 d1	 movzx	 edx, cx
  00113	85 d2		 test	 edx, edx
  00115	74 07		 je	 SHORT $LN21@draw_3d_ob

; 1787 : 		{
; 1788 : 			skip_surface = TRUE;

  00117	c7 45 f0 01 00
	00 00		 mov	 DWORD PTR _skip_surface$2[ebp], 1
$LN21@draw_3d_ob:

; 1789 : 		}
; 1790 : 
; 1791 : 		if ( current_object_3d_surface->textured )

  0011e	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  00123	66 8b 08	 mov	 cx, WORD PTR [eax]
  00126	66 c1 e9 03	 shr	 cx, 3
  0012a	66 83 e1 01	 and	 cx, 1
  0012e	0f b7 d1	 movzx	 edx, cx
  00131	85 d2		 test	 edx, edx
  00133	0f 84 8e 00 00
	00		 je	 $LN25@draw_3d_ob

; 1792 : 		{
; 1793 : 			if ( current_object_3d_surface->texture_animation )

  00139	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  0013e	66 8b 08	 mov	 cx, WORD PTR [eax]
  00141	66 c1 e9 09	 shr	 cx, 9
  00145	66 83 e1 01	 and	 cx, 1
  00149	0f b7 d1	 movzx	 edx, cx
  0014c	85 d2		 test	 edx, edx
  0014e	74 42		 je	 SHORT $LN23@draw_3d_ob

; 1794 : 			{
; 1795 : 				int
; 1796 : 					frame;
; 1797 : 
; 1798 : 				frame = texture_animations[current_object_3d_surface->texture_index].current_frame;

  00150	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  00155	0f b7 48 04	 movzx	 ecx, WORD PTR [eax+4]
  00159	6b d1 0c	 imul	 edx, ecx, 12
  0015c	a1 00 00 00 00	 mov	 eax, DWORD PTR ?texture_animations@@3PAUTEXTURE_ANIMATION_INFORMATION@@A ; texture_animations
  00161	8b 4c 10 04	 mov	 ecx, DWORD PTR [eax+edx+4]
  00165	89 4d ec	 mov	 DWORD PTR _frame$1[ebp], ecx

; 1799 : 				current_object_3d_texture = system_textures[ texture_animations[current_object_3d_surface->texture_index].texture_indices[frame] ];

  00168	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  0016d	0f b7 48 04	 movzx	 ecx, WORD PTR [eax+4]
  00171	6b d1 0c	 imul	 edx, ecx, 12
  00174	a1 00 00 00 00	 mov	 eax, DWORD PTR ?texture_animations@@3PAUTEXTURE_ANIMATION_INFORMATION@@A ; texture_animations
  00179	8b 4c 10 08	 mov	 ecx, DWORD PTR [eax+edx+8]
  0017d	8b 55 ec	 mov	 edx, DWORD PTR _frame$1[ebp]
  00180	8b 04 91	 mov	 eax, DWORD PTR [ecx+edx*4]
  00183	8b 0c 85 00 00
	00 00		 mov	 ecx, DWORD PTR ?system_textures@@3PAPAUSCREEN@@A[eax*4]
  0018a	89 0d 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_texture@@3PAUSCREEN@@A, ecx ; current_object_3d_texture

; 1800 : 			}
; 1801 : 			else

  00190	eb 16		 jmp	 SHORT $LN24@draw_3d_ob
$LN23@draw_3d_ob:

; 1802 : 			{
; 1803 : 				current_object_3d_texture = system_textures[current_object_3d_surface->texture_index];

  00192	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  00197	0f b7 48 04	 movzx	 ecx, WORD PTR [eax+4]
  0019b	8b 14 8d 00 00
	00 00		 mov	 edx, DWORD PTR ?system_textures@@3PAPAUSCREEN@@A[ecx*4]
  001a2	89 15 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_texture@@3PAUSCREEN@@A, edx ; current_object_3d_texture
$LN24@draw_3d_ob:

; 1804 : 			}
; 1805 : 
; 1806 : 			if ( current_object_3d_texture->contains_alpha )

  001a8	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_texture@@3PAUSCREEN@@A ; current_object_3d_texture
  001ad	66 8b 48 0a	 mov	 cx, WORD PTR [eax+10]
  001b1	66 c1 e9 07	 shr	 cx, 7
  001b5	66 83 e1 01	 and	 cx, 1
  001b9	0f b7 d1	 movzx	 edx, cx
  001bc	85 d2		 test	 edx, edx
  001be	74 07		 je	 SHORT $LN25@draw_3d_ob

; 1807 : 			{
; 1808 : 				skip_surface = TRUE;

  001c0	c7 45 f0 01 00
	00 00		 mov	 DWORD PTR _skip_surface$2[ebp], 1
$LN25@draw_3d_ob:

; 1809 : 			}
; 1810 : 		}
; 1811 : 
; 1812 : 		if ( !skip_surface )

  001c7	83 7d f0 00	 cmp	 DWORD PTR _skip_surface$2[ebp], 0
  001cb	0f 85 46 04 00
	00		 jne	 $LN26@draw_3d_ob

; 1813 : 		{
; 1814 : 			reset_deferred_state_changes ();

  001d1	e8 00 00 00 00	 call	 ?reset_deferred_state_changes@@YGXXZ ; reset_deferred_state_changes

; 1815 : 
; 1816 : 			zbuffer_constant = ( current_object_3d_surface->detail ) ? zbuffer_constant_elevated_bias: zbuffer_constant_normal_bias;

  001d6	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  001db	66 8b 08	 mov	 cx, WORD PTR [eax]
  001de	66 d1 e9	 shr	 cx, 1
  001e1	66 83 e1 01	 and	 cx, 1
  001e5	0f b7 d1	 movzx	 edx, cx
  001e8	85 d2		 test	 edx, edx
  001ea	74 0f		 je	 SHORT $LN55@draw_3d_ob
  001ec	f2 0f 10 05 00
	00 00 00	 movsd	 xmm0, QWORD PTR ?zbuffer_constant_elevated_bias@@3NA
  001f4	f2 0f 11 45 a4	 movsd	 QWORD PTR tv176[ebp], xmm0
  001f9	eb 0d		 jmp	 SHORT $LN56@draw_3d_ob
$LN55@draw_3d_ob:
  001fb	f2 0f 10 05 00
	00 00 00	 movsd	 xmm0, QWORD PTR ?zbuffer_constant_normal_bias@@3NA
  00203	f2 0f 11 45 a4	 movsd	 QWORD PTR tv176[ebp], xmm0
$LN56@draw_3d_ob:
  00208	f2 0f 10 45 a4	 movsd	 xmm0, QWORD PTR tv176[ebp]
  0020d	f2 0f 11 05 00
	00 00 00	 movsd	 QWORD PTR ?zbuffer_constant@@3NA, xmm0

; 1817 : 			current_object_3d_specular = ( current_object_3d_surface->specularity )	?	specular_rendering_enabled : FALSE;

  00215	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  0021a	0f b6 48 0b	 movzx	 ecx, BYTE PTR [eax+11]
  0021e	85 c9		 test	 ecx, ecx
  00220	74 0b		 je	 SHORT $LN57@draw_3d_ob
  00222	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?specular_rendering_enabled@@3HA ; specular_rendering_enabled
  00228	89 55 a8	 mov	 DWORD PTR tv180[ebp], edx
  0022b	eb 07		 jmp	 SHORT $LN58@draw_3d_ob
$LN57@draw_3d_ob:
  0022d	c7 45 a8 00 00
	00 00		 mov	 DWORD PTR tv180[ebp], 0
$LN58@draw_3d_ob:
  00234	8b 45 a8	 mov	 eax, DWORD PTR tv180[ebp]
  00237	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_specular@@3HA, eax ; current_object_3d_specular

; 1818 : 
; 1819 : #if ALWAYS_SPECULAR_RENDER
; 1820 : 			set_deferred_d3d_int_state ( D3DRENDERSTATE_SPECULARENABLE, TRUE );

  0023c	6a 01		 push	 1
  0023e	6a 1d		 push	 29			; 0000001dH
  00240	e8 00 00 00 00	 call	 ?set_deferred_d3d_int_state@@YGXW4_D3DRENDERSTATETYPE@@K@Z ; set_deferred_d3d_int_state

; 1821 : #else
; 1822 : 			set_deferred_d3d_int_state ( D3DRENDERSTATE_SPECULARENABLE, current_object_3d_specular );
; 1823 : #endif
; 1824 : 			set_deferred_d3d_int_state ( D3DRENDERSTATE_SHADEMODE, D3DSHADE_GOURAUD );

  00245	6a 02		 push	 2
  00247	6a 09		 push	 9
  00249	e8 00 00 00 00	 call	 ?set_deferred_d3d_int_state@@YGXW4_D3DRENDERSTATETYPE@@K@Z ; set_deferred_d3d_int_state

; 1825 : 
; 1826 : 			if ( current_object_3d_surface->additive )

  0024e	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  00253	66 8b 08	 mov	 cx, WORD PTR [eax]
  00256	66 c1 e9 05	 shr	 cx, 5
  0025a	66 83 e1 01	 and	 cx, 1
  0025e	0f b7 d1	 movzx	 edx, cx
  00261	85 d2		 test	 edx, edx
  00263	0f 84 3c 01 00
	00		 je	 $LN28@draw_3d_ob

; 1827 : 			{
; 1828 : 				current_object_3d_texture_u_address = ( current_object_3d_surface->texture_wrapped_u ) ? D3DTADDRESS_WRAP: D3DTADDRESS_CLAMP;

  00269	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  0026e	66 8b 08	 mov	 cx, WORD PTR [eax]
  00271	66 c1 e9 0c	 shr	 cx, 12			; 0000000cH
  00275	66 83 e1 01	 and	 cx, 1
  00279	0f b7 d1	 movzx	 edx, cx
  0027c	85 d2		 test	 edx, edx
  0027e	74 09		 je	 SHORT $LN59@draw_3d_ob
  00280	c7 45 a8 01 00
	00 00		 mov	 DWORD PTR tv195[ebp], 1
  00287	eb 07		 jmp	 SHORT $LN60@draw_3d_ob
$LN59@draw_3d_ob:
  00289	c7 45 a8 03 00
	00 00		 mov	 DWORD PTR tv195[ebp], 3
$LN60@draw_3d_ob:
  00290	8b 45 a8	 mov	 eax, DWORD PTR tv195[ebp]
  00293	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_texture_u_address@@3HA, eax ; current_object_3d_texture_u_address

; 1829 : 				current_object_3d_texture_v_address = ( current_object_3d_surface->texture_wrapped_v ) ? D3DTADDRESS_WRAP: D3DTADDRESS_CLAMP;

  00298	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  0029d	66 8b 08	 mov	 cx, WORD PTR [eax]
  002a0	66 c1 e9 0d	 shr	 cx, 13			; 0000000dH
  002a4	66 83 e1 01	 and	 cx, 1
  002a8	0f b7 d1	 movzx	 edx, cx
  002ab	85 d2		 test	 edx, edx
  002ad	74 09		 je	 SHORT $LN61@draw_3d_ob
  002af	c7 45 a8 01 00
	00 00		 mov	 DWORD PTR tv201[ebp], 1
  002b6	eb 07		 jmp	 SHORT $LN62@draw_3d_ob
$LN61@draw_3d_ob:
  002b8	c7 45 a8 03 00
	00 00		 mov	 DWORD PTR tv201[ebp], 3
$LN62@draw_3d_ob:
  002bf	8b 45 a8	 mov	 eax, DWORD PTR tv201[ebp]
  002c2	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_texture_v_address@@3HA, eax ; current_object_3d_texture_v_address

; 1830 : 				current_object_3d_texture_filter = ( current_object_3d_surface->texture_filtered ) ? D3DTFG_LINEAR : D3DTFG_POINT;

  002c7	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  002cc	66 8b 08	 mov	 cx, WORD PTR [eax]
  002cf	66 c1 e9 0a	 shr	 cx, 10			; 0000000aH
  002d3	66 83 e1 01	 and	 cx, 1
  002d7	0f b7 d1	 movzx	 edx, cx
  002da	85 d2		 test	 edx, edx
  002dc	74 09		 je	 SHORT $LN63@draw_3d_ob
  002de	c7 45 a8 02 00
	00 00		 mov	 DWORD PTR tv207[ebp], 2
  002e5	eb 07		 jmp	 SHORT $LN64@draw_3d_ob
$LN63@draw_3d_ob:
  002e7	c7 45 a8 01 00
	00 00		 mov	 DWORD PTR tv207[ebp], 1
$LN64@draw_3d_ob:
  002ee	8b 45 a8	 mov	 eax, DWORD PTR tv207[ebp]
  002f1	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_texture_filter@@3HA, eax ; current_object_3d_texture_filter

; 1831 : 				current_object_3d_texture_mipmap = ( current_object_3d_surface->texture_mipmapped )	? D3DTFP_POINT : D3DTFP_NONE;

  002f6	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  002fb	66 8b 08	 mov	 cx, WORD PTR [eax]
  002fe	66 c1 e9 0b	 shr	 cx, 11			; 0000000bH
  00302	66 83 e1 01	 and	 cx, 1
  00306	0f b7 d1	 movzx	 edx, cx
  00309	85 d2		 test	 edx, edx
  0030b	74 09		 je	 SHORT $LN65@draw_3d_ob
  0030d	c7 45 a8 02 00
	00 00		 mov	 DWORD PTR tv213[ebp], 2
  00314	eb 07		 jmp	 SHORT $LN66@draw_3d_ob
$LN65@draw_3d_ob:
  00316	c7 45 a8 01 00
	00 00		 mov	 DWORD PTR tv213[ebp], 1
$LN66@draw_3d_ob:
  0031d	8b 45 a8	 mov	 eax, DWORD PTR tv213[ebp]
  00320	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_texture_mipmap@@3HA, eax ; current_object_3d_texture_mipmap

; 1832 : 
; 1833 : 				set_deferred_d3d_texture ( 0, current_object_3d_texture );

  00325	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_texture@@3PAUSCREEN@@A ; current_object_3d_texture
  0032a	50		 push	 eax
  0032b	6a 00		 push	 0
  0032d	e8 00 00 00 00	 call	 ?set_deferred_d3d_texture@@YGXHPAUSCREEN@@@Z ; set_deferred_d3d_texture

; 1834 : 				set_deferred_d3d_texture_stage_state ( 0, D3DTSS_COLOROP, D3DTOP_MODULATE );

  00332	6a 04		 push	 4
  00334	6a 01		 push	 1
  00336	6a 00		 push	 0
  00338	e8 00 00 00 00	 call	 ?set_deferred_d3d_texture_stage_state@@YGXHHH@Z ; set_deferred_d3d_texture_stage_state

; 1835 : 
; 1836 : 				set_deferred_d3d_texture_stage_state ( 0, D3DTSS_ADDRESSU, current_object_3d_texture_u_address );

  0033d	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_texture_u_address@@3HA ; current_object_3d_texture_u_address
  00342	50		 push	 eax
  00343	6a 0d		 push	 13			; 0000000dH
  00345	6a 00		 push	 0
  00347	e8 00 00 00 00	 call	 ?set_deferred_d3d_texture_stage_state@@YGXHHH@Z ; set_deferred_d3d_texture_stage_state

; 1837 : 				set_deferred_d3d_texture_stage_state ( 0, D3DTSS_ADDRESSV, current_object_3d_texture_v_address );

  0034c	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_texture_v_address@@3HA ; current_object_3d_texture_v_address
  00351	50		 push	 eax
  00352	6a 0e		 push	 14			; 0000000eH
  00354	6a 00		 push	 0
  00356	e8 00 00 00 00	 call	 ?set_deferred_d3d_texture_stage_state@@YGXHHH@Z ; set_deferred_d3d_texture_stage_state

; 1838 : 				set_deferred_d3d_texture_stage_state ( 0, D3DTSS_MAGFILTER, current_object_3d_texture_filter );

  0035b	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_texture_filter@@3HA ; current_object_3d_texture_filter
  00360	50		 push	 eax
  00361	6a 10		 push	 16			; 00000010H
  00363	6a 00		 push	 0
  00365	e8 00 00 00 00	 call	 ?set_deferred_d3d_texture_stage_state@@YGXHHH@Z ; set_deferred_d3d_texture_stage_state

; 1839 : 				set_deferred_d3d_texture_stage_state ( 0, D3DTSS_MINFILTER, current_object_3d_texture_filter );

  0036a	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_texture_filter@@3HA ; current_object_3d_texture_filter
  0036f	50		 push	 eax
  00370	6a 11		 push	 17			; 00000011H
  00372	6a 00		 push	 0
  00374	e8 00 00 00 00	 call	 ?set_deferred_d3d_texture_stage_state@@YGXHHH@Z ; set_deferred_d3d_texture_stage_state

; 1840 : 				set_deferred_d3d_texture_stage_state ( 0, D3DTSS_MIPFILTER, current_object_3d_texture_mipmap );

  00379	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_texture_mipmap@@3HA ; current_object_3d_texture_mipmap
  0037e	50		 push	 eax
  0037f	6a 12		 push	 18			; 00000012H
  00381	6a 00		 push	 0
  00383	e8 00 00 00 00	 call	 ?set_deferred_d3d_texture_stage_state@@YGXHHH@Z ; set_deferred_d3d_texture_stage_state

; 1841 : 
; 1842 : 				set_deferred_d3d_int_state ( D3DRENDERSTATE_ALPHABLENDENABLE, TRUE );

  00388	6a 01		 push	 1
  0038a	6a 1b		 push	 27			; 0000001bH
  0038c	e8 00 00 00 00	 call	 ?set_deferred_d3d_int_state@@YGXW4_D3DRENDERSTATETYPE@@K@Z ; set_deferred_d3d_int_state

; 1843 : 				set_deferred_d3d_int_state ( D3DRENDERSTATE_SRCBLEND, D3DBLEND_ONE );

  00391	6a 02		 push	 2
  00393	6a 13		 push	 19			; 00000013H
  00395	e8 00 00 00 00	 call	 ?set_deferred_d3d_int_state@@YGXW4_D3DRENDERSTATETYPE@@K@Z ; set_deferred_d3d_int_state

; 1844 : 				set_deferred_d3d_int_state ( D3DRENDERSTATE_DESTBLEND, D3DBLEND_ONE );

  0039a	6a 02		 push	 2
  0039c	6a 14		 push	 20			; 00000014H
  0039e	e8 00 00 00 00	 call	 ?set_deferred_d3d_int_state@@YGXW4_D3DRENDERSTATETYPE@@K@Z ; set_deferred_d3d_int_state

; 1845 : 			}
; 1846 : 			else

  003a3	eb 14		 jmp	 SHORT $LN29@draw_3d_ob
$LN28@draw_3d_ob:

; 1847 : 			{
; 1848 : 				set_deferred_d3d_int_state ( D3DRENDERSTATE_ALPHABLENDENABLE, FALSE );

  003a5	6a 00		 push	 0
  003a7	6a 1b		 push	 27			; 0000001bH
  003a9	e8 00 00 00 00	 call	 ?set_deferred_d3d_int_state@@YGXW4_D3DRENDERSTATETYPE@@K@Z ; set_deferred_d3d_int_state

; 1849 : 				set_deferred_d3d_texture_stage_state ( 0, D3DTSS_COLOROP, D3DTOP_DISABLE );

  003ae	6a 01		 push	 1
  003b0	6a 01		 push	 1
  003b2	6a 00		 push	 0
  003b4	e8 00 00 00 00	 call	 ?set_deferred_d3d_texture_stage_state@@YGXHHH@Z ; set_deferred_d3d_texture_stage_state
$LN29@draw_3d_ob:

; 1850 : 			}
; 1851 : 
; 1852 : 			if ( current_object_3d_surface->smoothed )

  003b9	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  003be	66 8b 08	 mov	 cx, WORD PTR [eax]
  003c1	66 c1 e9 02	 shr	 cx, 2
  003c5	66 83 e1 01	 and	 cx, 1
  003c9	0f b7 d1	 movzx	 edx, cx
  003cc	85 d2		 test	 edx, edx
  003ce	0f 84 87 00 00
	00		 je	 $LN30@draw_3d_ob

; 1853 : 			{
; 1854 : 				for ( faces_left = current_object_3d_surface->number_of_faces; faces_left > 0; faces_left-- )

  003d4	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  003d9	0f b7 48 08	 movzx	 ecx, WORD PTR [eax+8]
  003dd	89 4d f8	 mov	 DWORD PTR _faces_left$[ebp], ecx
  003e0	eb 09		 jmp	 SHORT $LN7@draw_3d_ob
$LN5@draw_3d_ob:
  003e2	8b 45 f8	 mov	 eax, DWORD PTR _faces_left$[ebp]
  003e5	83 e8 01	 sub	 eax, 1
  003e8	89 45 f8	 mov	 DWORD PTR _faces_left$[ebp], eax
$LN7@draw_3d_ob:
  003eb	83 7d f8 00	 cmp	 DWORD PTR _faces_left$[ebp], 0
  003ef	7e 65		 jle	 SHORT $LN6@draw_3d_ob

; 1855 : 				{
; 1856 : 					if ( !outcode_3d_object_surface_polygon ( current_object_3d_faces->number_of_points, current_object_3d_object_base->points_base, &current_object_3d_outcode ) )

  003f1	68 00 00 00 00	 push	 OFFSET ?current_object_3d_outcode@@3HA ; current_object_3d_outcode
  003f6	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_object_base@@3PAUOBJECT_3D_INFO@@A ; current_object_3d_object_base
  003fb	8b 48 24	 mov	 ecx, DWORD PTR [eax+36]
  003fe	51		 push	 ecx
  003ff	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  00405	0f b6 02	 movzx	 eax, BYTE PTR [edx]
  00408	50		 push	 eax
  00409	e8 00 00 00 00	 call	 ?outcode_3d_object_surface_polygon@@YGHHHPAH@Z ; outcode_3d_object_surface_polygon
  0040e	85 c0		 test	 eax, eax
  00410	75 21		 jne	 SHORT $LN34@draw_3d_ob

; 1857 : 					{
; 1858 : 						if ( current_object_3d_outcode == 0 )

  00412	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?current_object_3d_outcode@@3HA, 0 ; current_object_3d_outcode
  00419	75 0d		 jne	 SHORT $LN33@draw_3d_ob

; 1859 : 						{
; 1860 : 							wrender_unclipped_3d_object_gouraud_white_polygon ( current_object_3d_faces );

  0041b	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  00420	50		 push	 eax
  00421	e8 00 00 00 00	 call	 ?wrender_unclipped_3d_object_gouraud_white_polygon@@YGXPAUOBJECT_3D_FACE@@@Z ; wrender_unclipped_3d_object_gouraud_white_polygon

; 1861 : 						}
; 1862 : 						else

  00426	eb 0b		 jmp	 SHORT $LN34@draw_3d_ob
$LN33@draw_3d_ob:

; 1863 : 						{
; 1864 : 							wrender_clipped_3d_object_gouraud_white_polygon ( current_object_3d_faces );

  00428	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  0042d	50		 push	 eax
  0042e	e8 00 00 00 00	 call	 ?wrender_clipped_3d_object_gouraud_white_polygon@@YGXPAUOBJECT_3D_FACE@@@Z ; wrender_clipped_3d_object_gouraud_white_polygon
$LN34@draw_3d_ob:

; 1865 : 						}
; 1866 : 					}
; 1867 : 					current_object_3d_point_list += current_object_3d_faces->number_of_points;

  00433	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  00438	0f b6 08	 movzx	 ecx, BYTE PTR [eax]
  0043b	03 0d 00 00 00
	00		 add	 ecx, DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A ; current_object_3d_point_list
  00441	89 0d 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A, ecx ; current_object_3d_point_list

; 1868 : 					current_object_3d_faces++;

  00447	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  0044c	83 c0 01	 add	 eax, 1
  0044f	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A, eax ; current_object_3d_faces

; 1869 : 				}

  00454	eb 8c		 jmp	 SHORT $LN5@draw_3d_ob
$LN6@draw_3d_ob:

; 1870 : 			}
; 1871 : 			else

  00456	e9 b7 01 00 00	 jmp	 $LN15@draw_3d_ob
$LN30@draw_3d_ob:

; 1872 : 			{
; 1873 : 				if ( current_object_3d_surface->polygons )

  0045b	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  00460	66 8b 08	 mov	 cx, WORD PTR [eax]
  00463	66 83 e1 01	 and	 cx, 1
  00467	0f b7 d1	 movzx	 edx, cx
  0046a	85 d2		 test	 edx, edx
  0046c	0f 84 46 01 00
	00		 je	 $LN35@draw_3d_ob

; 1874 : 				{
; 1875 : 					if ( current_object_3d_surface->additive )

  00472	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  00477	66 8b 08	 mov	 cx, WORD PTR [eax]
  0047a	66 c1 e9 05	 shr	 cx, 5
  0047e	66 83 e1 01	 and	 cx, 1
  00482	0f b7 d1	 movzx	 edx, cx
  00485	85 d2		 test	 edx, edx
  00487	0f 84 97 00 00
	00		 je	 $LN37@draw_3d_ob

; 1876 : 					{
; 1877 : 						for ( faces_left = current_object_3d_surface->number_of_faces; faces_left > 0; faces_left-- )

  0048d	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  00492	0f b7 48 08	 movzx	 ecx, WORD PTR [eax+8]
  00496	89 4d f8	 mov	 DWORD PTR _faces_left$[ebp], ecx
  00499	eb 09		 jmp	 SHORT $LN10@draw_3d_ob
$LN8@draw_3d_ob:
  0049b	8b 45 f8	 mov	 eax, DWORD PTR _faces_left$[ebp]
  0049e	83 e8 01	 sub	 eax, 1
  004a1	89 45 f8	 mov	 DWORD PTR _faces_left$[ebp], eax
$LN10@draw_3d_ob:
  004a4	83 7d f8 00	 cmp	 DWORD PTR _faces_left$[ebp], 0
  004a8	7e 75		 jle	 SHORT $LN9@draw_3d_ob

; 1878 : 						{
; 1879 : 							if ( !outcode_3d_object_surface_polygon ( current_object_3d_faces->number_of_points, current_object_3d_object_base->points_base, &current_object_3d_outcode ) )

  004aa	68 00 00 00 00	 push	 OFFSET ?current_object_3d_outcode@@3HA ; current_object_3d_outcode
  004af	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_object_base@@3PAUOBJECT_3D_INFO@@A ; current_object_3d_object_base
  004b4	8b 48 24	 mov	 ecx, DWORD PTR [eax+36]
  004b7	51		 push	 ecx
  004b8	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  004be	0f b6 02	 movzx	 eax, BYTE PTR [edx]
  004c1	50		 push	 eax
  004c2	e8 00 00 00 00	 call	 ?outcode_3d_object_surface_polygon@@YGHHHPAH@Z ; outcode_3d_object_surface_polygon
  004c7	85 c0		 test	 eax, eax
  004c9	75 21		 jne	 SHORT $LN41@draw_3d_ob

; 1880 : 							{
; 1881 : 								if ( current_object_3d_outcode == 0 )

  004cb	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?current_object_3d_outcode@@3HA, 0 ; current_object_3d_outcode
  004d2	75 0d		 jne	 SHORT $LN40@draw_3d_ob

; 1882 : 								{
; 1883 : 									wrender_unclipped_3d_object_white_textured_polygon ( current_object_3d_faces );

  004d4	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  004d9	50		 push	 eax
  004da	e8 00 00 00 00	 call	 ?wrender_unclipped_3d_object_white_textured_polygon@@YGXPAUOBJECT_3D_FACE@@@Z ; wrender_unclipped_3d_object_white_textured_polygon

; 1884 : 								}
; 1885 : 								else

  004df	eb 0b		 jmp	 SHORT $LN41@draw_3d_ob
$LN40@draw_3d_ob:

; 1886 : 								{
; 1887 : 									wrender_clipped_3d_object_white_textured_polygon ( current_object_3d_faces );

  004e1	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  004e6	50		 push	 eax
  004e7	e8 00 00 00 00	 call	 ?wrender_clipped_3d_object_white_textured_polygon@@YGXPAUOBJECT_3D_FACE@@@Z ; wrender_clipped_3d_object_white_textured_polygon
$LN41@draw_3d_ob:

; 1888 : 								}
; 1889 : 							}
; 1890 : 
; 1891 : 							current_object_3d_face_normal_list++;

  004ec	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_face_normal_list@@3PAUPOINT_3D_PLAIN_REFERENCE@@A ; current_object_3d_face_normal_list
  004f1	83 c0 02	 add	 eax, 2
  004f4	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_face_normal_list@@3PAUPOINT_3D_PLAIN_REFERENCE@@A, eax ; current_object_3d_face_normal_list

; 1892 : 							current_object_3d_point_list += current_object_3d_faces->number_of_points;

  004f9	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  004fe	0f b6 08	 movzx	 ecx, BYTE PTR [eax]
  00501	03 0d 00 00 00
	00		 add	 ecx, DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A ; current_object_3d_point_list
  00507	89 0d 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A, ecx ; current_object_3d_point_list

; 1893 : 							current_object_3d_faces++;

  0050d	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  00512	83 c0 01	 add	 eax, 1
  00515	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A, eax ; current_object_3d_faces

; 1894 : 						}

  0051a	e9 7c ff ff ff	 jmp	 $LN8@draw_3d_ob
$LN9@draw_3d_ob:

; 1895 : 					}
; 1896 : 					else

  0051f	e9 92 00 00 00	 jmp	 $LN12@draw_3d_ob
$LN37@draw_3d_ob:

; 1897 : 					{
; 1898 : 						for ( faces_left = current_object_3d_surface->number_of_faces; faces_left > 0; faces_left-- )

  00524	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  00529	0f b7 48 08	 movzx	 ecx, WORD PTR [eax+8]
  0052d	89 4d f8	 mov	 DWORD PTR _faces_left$[ebp], ecx
  00530	eb 09		 jmp	 SHORT $LN13@draw_3d_ob
$LN11@draw_3d_ob:
  00532	8b 45 f8	 mov	 eax, DWORD PTR _faces_left$[ebp]
  00535	83 e8 01	 sub	 eax, 1
  00538	89 45 f8	 mov	 DWORD PTR _faces_left$[ebp], eax
$LN13@draw_3d_ob:
  0053b	83 7d f8 00	 cmp	 DWORD PTR _faces_left$[ebp], 0
  0053f	7e 75		 jle	 SHORT $LN12@draw_3d_ob

; 1899 : 						{
; 1900 : 							if ( !outcode_3d_object_surface_polygon ( current_object_3d_faces->number_of_points, current_object_3d_object_base->points_base, &current_object_3d_outcode ) )

  00541	68 00 00 00 00	 push	 OFFSET ?current_object_3d_outcode@@3HA ; current_object_3d_outcode
  00546	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_object_base@@3PAUOBJECT_3D_INFO@@A ; current_object_3d_object_base
  0054b	8b 48 24	 mov	 ecx, DWORD PTR [eax+36]
  0054e	51		 push	 ecx
  0054f	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  00555	0f b6 02	 movzx	 eax, BYTE PTR [edx]
  00558	50		 push	 eax
  00559	e8 00 00 00 00	 call	 ?outcode_3d_object_surface_polygon@@YGHHHPAH@Z ; outcode_3d_object_surface_polygon
  0055e	85 c0		 test	 eax, eax
  00560	75 21		 jne	 SHORT $LN44@draw_3d_ob

; 1901 : 							{
; 1902 : 								if ( current_object_3d_outcode == 0 )

  00562	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?current_object_3d_outcode@@3HA, 0 ; current_object_3d_outcode
  00569	75 0d		 jne	 SHORT $LN43@draw_3d_ob

; 1903 : 								{
; 1904 : 									wrender_unclipped_3d_object_white_polygon ( current_object_3d_faces );

  0056b	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  00570	50		 push	 eax
  00571	e8 00 00 00 00	 call	 ?wrender_unclipped_3d_object_white_polygon@@YGXPAUOBJECT_3D_FACE@@@Z ; wrender_unclipped_3d_object_white_polygon

; 1905 : 								}
; 1906 : 								else

  00576	eb 0b		 jmp	 SHORT $LN44@draw_3d_ob
$LN43@draw_3d_ob:

; 1907 : 								{
; 1908 : 									wrender_clipped_3d_object_white_polygon ( current_object_3d_faces );

  00578	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  0057d	50		 push	 eax
  0057e	e8 00 00 00 00	 call	 ?wrender_clipped_3d_object_white_polygon@@YGXPAUOBJECT_3D_FACE@@@Z ; wrender_clipped_3d_object_white_polygon
$LN44@draw_3d_ob:

; 1909 : 								}
; 1910 : 							}
; 1911 : 
; 1912 : 							current_object_3d_face_normal_list++;

  00583	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_face_normal_list@@3PAUPOINT_3D_PLAIN_REFERENCE@@A ; current_object_3d_face_normal_list
  00588	83 c0 02	 add	 eax, 2
  0058b	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_face_normal_list@@3PAUPOINT_3D_PLAIN_REFERENCE@@A, eax ; current_object_3d_face_normal_list

; 1913 : 							current_object_3d_point_list += current_object_3d_faces->number_of_points;

  00590	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  00595	0f b6 08	 movzx	 ecx, BYTE PTR [eax]
  00598	03 0d 00 00 00
	00		 add	 ecx, DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A ; current_object_3d_point_list
  0059e	89 0d 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A, ecx ; current_object_3d_point_list

; 1914 : 							current_object_3d_faces++;

  005a4	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  005a9	83 c0 01	 add	 eax, 1
  005ac	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A, eax ; current_object_3d_faces

; 1915 : 						}

  005b1	e9 7c ff ff ff	 jmp	 $LN11@draw_3d_ob
$LN12@draw_3d_ob:

; 1916 : 					}
; 1917 : 				}
; 1918 : 				else

  005b6	eb 5a		 jmp	 SHORT $LN15@draw_3d_ob
$LN35@draw_3d_ob:

; 1919 : 				{
; 1920 : 					for ( faces_left = current_object_3d_surface->number_of_faces; faces_left > 0; faces_left-- )

  005b8	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  005bd	0f b7 48 08	 movzx	 ecx, WORD PTR [eax+8]
  005c1	89 4d f8	 mov	 DWORD PTR _faces_left$[ebp], ecx
  005c4	eb 09		 jmp	 SHORT $LN16@draw_3d_ob
$LN14@draw_3d_ob:
  005c6	8b 45 f8	 mov	 eax, DWORD PTR _faces_left$[ebp]
  005c9	83 e8 01	 sub	 eax, 1
  005cc	89 45 f8	 mov	 DWORD PTR _faces_left$[ebp], eax
$LN16@draw_3d_ob:
  005cf	83 7d f8 00	 cmp	 DWORD PTR _faces_left$[ebp], 0
  005d3	7e 3d		 jle	 SHORT $LN15@draw_3d_ob

; 1921 : 					{
; 1922 : 						if ( !outcode_3d_object_surface_polygon ( 2, current_object_3d_object_base->points_base, &current_object_3d_outcode ) )

  005d5	68 00 00 00 00	 push	 OFFSET ?current_object_3d_outcode@@3HA ; current_object_3d_outcode
  005da	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_object_base@@3PAUOBJECT_3D_INFO@@A ; current_object_3d_object_base
  005df	8b 48 24	 mov	 ecx, DWORD PTR [eax+36]
  005e2	51		 push	 ecx
  005e3	6a 02		 push	 2
  005e5	e8 00 00 00 00	 call	 ?outcode_3d_object_surface_polygon@@YGHHHPAH@Z ; outcode_3d_object_surface_polygon
  005ea	85 c0		 test	 eax, eax
  005ec	75 15		 jne	 SHORT $LN47@draw_3d_ob

; 1923 : 						{
; 1924 : 							if ( current_object_3d_outcode == 0 )

  005ee	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?current_object_3d_outcode@@3HA, 0 ; current_object_3d_outcode
  005f5	75 07		 jne	 SHORT $LN46@draw_3d_ob

; 1925 : 							{
; 1926 : 								wrender_unclipped_3d_object_plain_white_line ();

  005f7	e8 00 00 00 00	 call	 ?wrender_unclipped_3d_object_plain_white_line@@YGXXZ ; wrender_unclipped_3d_object_plain_white_line

; 1927 : 							}
; 1928 : 							else

  005fc	eb 05		 jmp	 SHORT $LN47@draw_3d_ob
$LN46@draw_3d_ob:

; 1929 : 							{
; 1930 : 								wrender_clipped_3d_object_plain_white_line ();

  005fe	e8 00 00 00 00	 call	 ?wrender_clipped_3d_object_plain_white_line@@YGXXZ ; wrender_clipped_3d_object_plain_white_line
$LN47@draw_3d_ob:

; 1931 : 							}
; 1932 : 						}
; 1933 : 						current_object_3d_point_list += 2;

  00603	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A ; current_object_3d_point_list
  00608	83 c0 02	 add	 eax, 2
  0060b	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A, eax ; current_object_3d_point_list

; 1934 : 					}

  00610	eb b4		 jmp	 SHORT $LN14@draw_3d_ob
$LN15@draw_3d_ob:

; 1935 : 				}
; 1936 : 			}
; 1937 : 		}
; 1938 : 		else

  00612	e9 90 00 00 00	 jmp	 $LN49@draw_3d_ob
$LN26@draw_3d_ob:

; 1939 : 		{
; 1940 : 			//
; 1941 : 			// Move on through the point list & normals list
; 1942 : 			//
; 1943 : 
; 1944 : 			if ( current_object_3d_surface->polygons )

  00617	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  0061c	66 8b 08	 mov	 cx, WORD PTR [eax]
  0061f	66 83 e1 01	 and	 cx, 1
  00623	0f b7 d1	 movzx	 edx, cx
  00626	85 d2		 test	 edx, edx
  00628	74 66		 je	 SHORT $LN48@draw_3d_ob

; 1945 : 			{
; 1946 : 				for ( faces_left = current_object_3d_surface->number_of_faces; faces_left > 0; faces_left-- )

  0062a	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  0062f	0f b7 48 08	 movzx	 ecx, WORD PTR [eax+8]
  00633	89 4d f8	 mov	 DWORD PTR _faces_left$[ebp], ecx
  00636	eb 09		 jmp	 SHORT $LN19@draw_3d_ob
$LN17@draw_3d_ob:
  00638	8b 45 f8	 mov	 eax, DWORD PTR _faces_left$[ebp]
  0063b	83 e8 01	 sub	 eax, 1
  0063e	89 45 f8	 mov	 DWORD PTR _faces_left$[ebp], eax
$LN19@draw_3d_ob:
  00641	83 7d f8 00	 cmp	 DWORD PTR _faces_left$[ebp], 0
  00645	7e 47		 jle	 SHORT $LN18@draw_3d_ob

; 1947 : 				{
; 1948 : 					if ( !current_object_3d_surface->smoothed )

  00647	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  0064c	66 8b 08	 mov	 cx, WORD PTR [eax]
  0064f	66 c1 e9 02	 shr	 cx, 2
  00653	66 83 e1 01	 and	 cx, 1
  00657	0f b7 d1	 movzx	 edx, cx
  0065a	85 d2		 test	 edx, edx
  0065c	75 0d		 jne	 SHORT $LN50@draw_3d_ob

; 1949 : 					{
; 1950 : 						current_object_3d_face_normal_list++;

  0065e	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_face_normal_list@@3PAUPOINT_3D_PLAIN_REFERENCE@@A ; current_object_3d_face_normal_list
  00663	83 c0 02	 add	 eax, 2
  00666	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_face_normal_list@@3PAUPOINT_3D_PLAIN_REFERENCE@@A, eax ; current_object_3d_face_normal_list
$LN50@draw_3d_ob:

; 1951 : 					}
; 1952 : 					current_object_3d_point_list += current_object_3d_faces->number_of_points;

  0066b	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  00670	0f b6 08	 movzx	 ecx, BYTE PTR [eax]
  00673	03 0d 00 00 00
	00		 add	 ecx, DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A ; current_object_3d_point_list
  00679	89 0d 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A, ecx ; current_object_3d_point_list

; 1953 : 					current_object_3d_faces++;

  0067f	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  00684	83 c0 01	 add	 eax, 1
  00687	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A, eax ; current_object_3d_faces

; 1954 : 				}

  0068c	eb aa		 jmp	 SHORT $LN17@draw_3d_ob
$LN18@draw_3d_ob:

; 1955 : 			}
; 1956 : 			else

  0068e	eb 17		 jmp	 SHORT $LN49@draw_3d_ob
$LN48@draw_3d_ob:

; 1957 : 			{
; 1958 : 				current_object_3d_point_list += 2 * current_object_3d_surface->number_of_faces;

  00690	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  00695	0f b7 48 08	 movzx	 ecx, WORD PTR [eax+8]
  00699	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A ; current_object_3d_point_list
  0069f	8d 04 4a	 lea	 eax, DWORD PTR [edx+ecx*2]
  006a2	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A, eax ; current_object_3d_point_list
$LN49@draw_3d_ob:

; 1959 : 			}
; 1960 : 		}
; 1961 : 
; 1962 : 		current_object_3d_surface_point_list += number_of_surface_points;

  006a7	8b 45 fc	 mov	 eax, DWORD PTR _number_of_surface_points$[ebp]
  006aa	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_object_3d_surface_point_list@@3PAUPOINT_3D_PLAIN_REFERENCE@@A ; current_object_3d_surface_point_list
  006b0	8d 14 41	 lea	 edx, DWORD PTR [ecx+eax*2]
  006b3	89 15 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_surface_point_list@@3PAUPOINT_3D_PLAIN_REFERENCE@@A, edx ; current_object_3d_surface_point_list

; 1963 : 		if ( current_object_3d_surface->smoothed )

  006b9	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  006be	66 8b 08	 mov	 cx, WORD PTR [eax]
  006c1	66 c1 e9 02	 shr	 cx, 2
  006c5	66 83 e1 01	 and	 cx, 1
  006c9	0f b7 d1	 movzx	 edx, cx
  006cc	85 d2		 test	 edx, edx
  006ce	74 12		 je	 SHORT $LN51@draw_3d_ob

; 1964 : 		{
; 1965 : 			current_object_3d_surface_point_normal_list += number_of_surface_points;

  006d0	8b 45 fc	 mov	 eax, DWORD PTR _number_of_surface_points$[ebp]
  006d3	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_object_3d_surface_point_normal_list@@3PAUPOINT_3D_PLAIN_REFERENCE@@A ; current_object_3d_surface_point_normal_list
  006d9	8d 14 41	 lea	 edx, DWORD PTR [ecx+eax*2]
  006dc	89 15 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_surface_point_normal_list@@3PAUPOINT_3D_PLAIN_REFERENCE@@A, edx ; current_object_3d_surface_point_normal_list
$LN51@draw_3d_ob:

; 1966 : 		}
; 1967 : 		if ( current_object_3d_surface->textured )

  006e2	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  006e7	66 8b 08	 mov	 cx, WORD PTR [eax]
  006ea	66 c1 e9 03	 shr	 cx, 3
  006ee	66 83 e1 01	 and	 cx, 1
  006f2	0f b7 d1	 movzx	 edx, cx
  006f5	85 d2		 test	 edx, edx
  006f7	74 12		 je	 SHORT $LN52@draw_3d_ob

; 1968 : 		{
; 1969 : 			current_object_3d_surface_point_texture_list += number_of_surface_points;

  006f9	8b 45 fc	 mov	 eax, DWORD PTR _number_of_surface_points$[ebp]
  006fc	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_object_3d_surface_point_texture_list@@3PAUOBJECT_3D_SHORT_TEXTURED_POINT@@A ; current_object_3d_surface_point_texture_list
  00702	8d 14 c1	 lea	 edx, DWORD PTR [ecx+eax*8]
  00705	89 15 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_surface_point_texture_list@@3PAUOBJECT_3D_SHORT_TEXTURED_POINT@@A, edx ; current_object_3d_surface_point_texture_list
$LN52@draw_3d_ob:

; 1970 : 		}
; 1971 : 		if ( current_object_3d_surface->has_luminosity_texture )

  0070b	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  00710	66 8b 08	 mov	 cx, WORD PTR [eax]
  00713	66 c1 e9 04	 shr	 cx, 4
  00717	66 83 e1 01	 and	 cx, 1
  0071b	0f b7 d1	 movzx	 edx, cx
  0071e	85 d2		 test	 edx, edx
  00720	74 12		 je	 SHORT $LN53@draw_3d_ob

; 1972 : 		{
; 1973 : 			current_object_3d_surface_point_texture_list += number_of_surface_points;

  00722	8b 45 fc	 mov	 eax, DWORD PTR _number_of_surface_points$[ebp]
  00725	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_object_3d_surface_point_texture_list@@3PAUOBJECT_3D_SHORT_TEXTURED_POINT@@A ; current_object_3d_surface_point_texture_list
  0072b	8d 14 c1	 lea	 edx, DWORD PTR [ecx+eax*8]
  0072e	89 15 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_surface_point_texture_list@@3PAUOBJECT_3D_SHORT_TEXTURED_POINT@@A, edx ; current_object_3d_surface_point_texture_list
$LN53@draw_3d_ob:

; 1974 : 		}
; 1975 : 		current_object_3d_surface++;

  00734	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  00739	83 c0 10	 add	 eax, 16			; 00000010H
  0073c	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A, eax ; current_object_3d_surface

; 1976 : 	}

  00741	e9 87 f9 ff ff	 jmp	 $LN2@draw_3d_ob
$LN3@draw_3d_ob:

; 1977 : }

  00746	5f		 pop	 edi
  00747	5e		 pop	 esi
  00748	5b		 pop	 ebx
  00749	8b e5		 mov	 esp, ebp
  0074b	5d		 pop	 ebp
  0074c	c2 04 00	 ret	 4
?draw_3d_object_untextured_clipped_faces@@YGXH@Z ENDP	; draw_3d_object_untextured_clipped_faces
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\modules\3d\3dobjdrw.c
;	COMDAT ?draw_3d_object_unclipped_faces@@YGXH@Z
_TEXT	SEGMENT
tv148 = -128						; size = 8
tv210 = -124						; size = 4
tv204 = -124						; size = 4
tv198 = -124						; size = 4
tv192 = -124						; size = 4
tv152 = -124						; size = 4
_index$1 = -56						; size = 4
_point_index$2 = -52					; size = 4
_specular_colour$3 = -48				; size = 4
_colour$4 = -44						; size = 4
_index$5 = -40						; size = 4
_point_index$6 = -36					; size = 4
_specular_colour$7 = -32				; size = 4
_colour$8 = -28						; size = 4
_frame$9 = -24						; size = 4
_frame$10 = -20						; size = 4
_vertices_used$ = -16					; size = 4
_surfaces_left$ = -12					; size = 4
_faces_left$ = -8					; size = 4
_number_of_surface_points$ = -4				; size = 4
_object_number$ = 8					; size = 4
?draw_3d_object_unclipped_faces@@YGXH@Z PROC		; draw_3d_object_unclipped_faces, COMDAT

; 1429 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec 80 00 00
	00		 sub	 esp, 128		; 00000080H
  00009	53		 push	 ebx
  0000a	56		 push	 esi
  0000b	57		 push	 edi

; 1430 : 	int
; 1431 : 		number_of_surface_points,
; 1432 : 		faces_left,
; 1433 : 		surfaces_left,
; 1434 : 		vertices_used;
; 1435 : 
; 1436 : 	surfaces_left = objects_3d_data[object_number].number_of_surfaces;

  0000c	6b 45 08 68	 imul	 eax, DWORD PTR _object_number$[ebp], 104
  00010	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?objects_3d_data@@3PAUOBJECT_3D@@A ; objects_3d_data
  00016	0f b7 54 01 06	 movzx	 edx, WORD PTR [ecx+eax+6]
  0001b	89 55 f4	 mov	 DWORD PTR _surfaces_left$[ebp], edx

; 1437 : 
; 1438 : 	current_object_3d_faces = objects_3d_data[object_number].faces;

  0001e	6b 45 08 68	 imul	 eax, DWORD PTR _object_number$[ebp], 104
  00022	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?objects_3d_data@@3PAUOBJECT_3D@@A ; objects_3d_data
  00028	8b 54 01 44	 mov	 edx, DWORD PTR [ecx+eax+68]
  0002c	89 15 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A, edx ; current_object_3d_faces

; 1439 : 	current_object_3d_surface = objects_3d_data[object_number].surfaces;

  00032	6b 45 08 68	 imul	 eax, DWORD PTR _object_number$[ebp], 104
  00036	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?objects_3d_data@@3PAUOBJECT_3D@@A ; objects_3d_data
  0003c	8b 54 01 50	 mov	 edx, DWORD PTR [ecx+eax+80]
  00040	89 15 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A, edx ; current_object_3d_surface

; 1440 : 	current_object_3d_point_list = objects_3d_data[object_number].object_faces_point_plain_list;

  00046	6b 45 08 68	 imul	 eax, DWORD PTR _object_number$[ebp], 104
  0004a	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?objects_3d_data@@3PAUOBJECT_3D@@A ; objects_3d_data
  00050	8b 54 01 4c	 mov	 edx, DWORD PTR [ecx+eax+76]
  00054	89 15 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A, edx ; current_object_3d_point_list

; 1441 : 	current_object_3d_face_normal_list = objects_3d_data[object_number].object_face_normal_references;

  0005a	6b 45 08 68	 imul	 eax, DWORD PTR _object_number$[ebp], 104
  0005e	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?objects_3d_data@@3PAUOBJECT_3D@@A ; objects_3d_data
  00064	8b 54 01 54	 mov	 edx, DWORD PTR [ecx+eax+84]
  00068	89 15 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_face_normal_list@@3PAUPOINT_3D_PLAIN_REFERENCE@@A, edx ; current_object_3d_face_normal_list

; 1442 : 	current_object_3d_transformed_normals = &transformed_3d_normals[object_3d_points_current_base];

  0006e	a1 00 00 00 00	 mov	 eax, DWORD PTR ?object_3d_points_current_base@@3HA ; object_3d_points_current_base
  00073	8d 0c c5 00 00
	00 00		 lea	 ecx, DWORD PTR ?transformed_3d_normals@@3PAUOBJECT_3D_TRANSFORMED_POINT_NORMAL@@A[eax*8]
  0007a	89 0d 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_transformed_normals@@3PAUOBJECT_3D_TRANSFORMED_POINT_NORMAL@@A, ecx ; current_object_3d_transformed_normals

; 1443 : 
; 1444 : 	current_object_3d_surface_point_list = objects_3d_data[object_number].surface_points;

  00080	6b 45 08 68	 imul	 eax, DWORD PTR _object_number$[ebp], 104
  00084	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?objects_3d_data@@3PAUOBJECT_3D@@A ; objects_3d_data
  0008a	8b 54 01 5c	 mov	 edx, DWORD PTR [ecx+eax+92]
  0008e	89 15 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_surface_point_list@@3PAUPOINT_3D_PLAIN_REFERENCE@@A, edx ; current_object_3d_surface_point_list

; 1445 : 	current_object_3d_surface_point_texture_list = objects_3d_data[object_number].surface_texture_points;

  00094	6b 45 08 68	 imul	 eax, DWORD PTR _object_number$[ebp], 104
  00098	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?objects_3d_data@@3PAUOBJECT_3D@@A ; objects_3d_data
  0009e	8b 54 01 58	 mov	 edx, DWORD PTR [ecx+eax+88]
  000a2	89 15 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_surface_point_texture_list@@3PAUOBJECT_3D_SHORT_TEXTURED_POINT@@A, edx ; current_object_3d_surface_point_texture_list

; 1446 : 	current_object_3d_surface_point_normal_list = objects_3d_data[object_number].surface_point_normals;

  000a8	6b 45 08 68	 imul	 eax, DWORD PTR _object_number$[ebp], 104
  000ac	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?objects_3d_data@@3PAUOBJECT_3D@@A ; objects_3d_data
  000b2	8b 54 01 60	 mov	 edx, DWORD PTR [ecx+eax+96]
  000b6	89 15 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_surface_point_normal_list@@3PAUPOINT_3D_PLAIN_REFERENCE@@A, edx ; current_object_3d_surface_point_normal_list

; 1447 : 
; 1448 : 	for ( surfaces_left = objects_3d_data[object_number].number_of_surfaces; surfaces_left > 0; surfaces_left-- )

  000bc	6b 45 08 68	 imul	 eax, DWORD PTR _object_number$[ebp], 104
  000c0	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?objects_3d_data@@3PAUOBJECT_3D@@A ; objects_3d_data
  000c6	0f b7 54 01 06	 movzx	 edx, WORD PTR [ecx+eax+6]
  000cb	89 55 f4	 mov	 DWORD PTR _surfaces_left$[ebp], edx
  000ce	eb 09		 jmp	 SHORT $LN4@draw_3d_ob
$LN2@draw_3d_ob:
  000d0	8b 45 f4	 mov	 eax, DWORD PTR _surfaces_left$[ebp]
  000d3	83 e8 01	 sub	 eax, 1
  000d6	89 45 f4	 mov	 DWORD PTR _surfaces_left$[ebp], eax
$LN4@draw_3d_ob:
  000d9	83 7d f4 00	 cmp	 DWORD PTR _surfaces_left$[ebp], 0
  000dd	0f 8e 6c 09 00
	00		 jle	 $LN3@draw_3d_ob

; 1449 : 	{
; 1450 : 		number_of_surface_points = current_object_3d_surface->number_of_points;

  000e3	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  000e8	0f b6 48 03	 movzx	 ecx, BYTE PTR [eax+3]
  000ec	89 4d fc	 mov	 DWORD PTR _number_of_surface_points$[ebp], ecx

; 1451 : 		if ( number_of_surface_points == 0 )

  000ef	83 7d fc 00	 cmp	 DWORD PTR _number_of_surface_points$[ebp], 0
  000f3	75 07		 jne	 SHORT $LN38@draw_3d_ob

; 1452 : 		{
; 1453 : 			number_of_surface_points = 256;

  000f5	c7 45 fc 00 01
	00 00		 mov	 DWORD PTR _number_of_surface_points$[ebp], 256 ; 00000100H
$LN38@draw_3d_ob:

; 1454 : 		}
; 1455 : 
; 1456 : 		if ( ( current_object_3d_surface->additive ) || ( current_object_3d_surface->translucent ) )

  000fc	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  00101	66 8b 08	 mov	 cx, WORD PTR [eax]
  00104	66 c1 e9 05	 shr	 cx, 5
  00108	66 83 e1 01	 and	 cx, 1
  0010c	0f b7 d1	 movzx	 edx, cx
  0010f	85 d2		 test	 edx, edx
  00111	75 17		 jne	 SHORT $LN41@draw_3d_ob
  00113	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  00118	66 8b 08	 mov	 cx, WORD PTR [eax]
  0011b	66 c1 e9 06	 shr	 cx, 6
  0011f	66 83 e1 01	 and	 cx, 1
  00123	0f b7 d1	 movzx	 edx, cx
  00126	85 d2		 test	 edx, edx
  00128	74 0c		 je	 SHORT $LN39@draw_3d_ob
$LN41@draw_3d_ob:

; 1457 : 		{
; 1458 : 			add_transparent_surface ( FALSE );

  0012a	6a 00		 push	 0
  0012c	e8 00 00 00 00	 call	 ?add_transparent_surface@@YGXH@Z ; add_transparent_surface

; 1459 : 		}
; 1460 : 		else

  00131	e9 7a 08 00 00	 jmp	 $LN36@draw_3d_ob
$LN39@draw_3d_ob:

; 1461 : 		{
; 1462 : 			zbuffer_constant = ( current_object_3d_surface->detail ) ? zbuffer_constant_elevated_bias: zbuffer_constant_normal_bias;

  00136	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  0013b	66 8b 08	 mov	 cx, WORD PTR [eax]
  0013e	66 d1 e9	 shr	 cx, 1
  00141	66 83 e1 01	 and	 cx, 1
  00145	0f b7 d1	 movzx	 edx, cx
  00148	85 d2		 test	 edx, edx
  0014a	74 0f		 je	 SHORT $LN80@draw_3d_ob
  0014c	f2 0f 10 05 00
	00 00 00	 movsd	 xmm0, QWORD PTR ?zbuffer_constant_elevated_bias@@3NA
  00154	f2 0f 11 45 80	 movsd	 QWORD PTR tv148[ebp], xmm0
  00159	eb 0d		 jmp	 SHORT $LN81@draw_3d_ob
$LN80@draw_3d_ob:
  0015b	f2 0f 10 05 00
	00 00 00	 movsd	 xmm0, QWORD PTR ?zbuffer_constant_normal_bias@@3NA
  00163	f2 0f 11 45 80	 movsd	 QWORD PTR tv148[ebp], xmm0
$LN81@draw_3d_ob:
  00168	f2 0f 10 45 80	 movsd	 xmm0, QWORD PTR tv148[ebp]
  0016d	f2 0f 11 05 00
	00 00 00	 movsd	 QWORD PTR ?zbuffer_constant@@3NA, xmm0

; 1463 : 			current_object_3d_specular = ( current_object_3d_surface->specularity )	?	specular_rendering_enabled : FALSE;

  00175	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  0017a	0f b6 48 0b	 movzx	 ecx, BYTE PTR [eax+11]
  0017e	85 c9		 test	 ecx, ecx
  00180	74 0b		 je	 SHORT $LN82@draw_3d_ob
  00182	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?specular_rendering_enabled@@3HA ; specular_rendering_enabled
  00188	89 55 84	 mov	 DWORD PTR tv152[ebp], edx
  0018b	eb 07		 jmp	 SHORT $LN83@draw_3d_ob
$LN82@draw_3d_ob:
  0018d	c7 45 84 00 00
	00 00		 mov	 DWORD PTR tv152[ebp], 0
$LN83@draw_3d_ob:
  00194	8b 45 84	 mov	 eax, DWORD PTR tv152[ebp]
  00197	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_specular@@3HA, eax ; current_object_3d_specular

; 1464 : 
; 1465 : 			if ( current_object_3d_surface->textured )

  0019c	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  001a1	66 8b 08	 mov	 cx, WORD PTR [eax]
  001a4	66 c1 e9 03	 shr	 cx, 3
  001a8	66 83 e1 01	 and	 cx, 1
  001ac	0f b7 d1	 movzx	 edx, cx
  001af	85 d2		 test	 edx, edx
  001b1	0f 84 ff 05 00
	00		 je	 $LN42@draw_3d_ob

; 1466 : 			{
; 1467 : 				if ( current_object_3d_surface->texture_animation )

  001b7	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  001bc	66 8b 08	 mov	 cx, WORD PTR [eax]
  001bf	66 c1 e9 09	 shr	 cx, 9
  001c3	66 83 e1 01	 and	 cx, 1
  001c7	0f b7 d1	 movzx	 edx, cx
  001ca	85 d2		 test	 edx, edx
  001cc	74 42		 je	 SHORT $LN44@draw_3d_ob

; 1468 : 				{
; 1469 : 					int
; 1470 : 						frame;
; 1471 : 
; 1472 : 					frame = texture_animations[current_object_3d_surface->texture_index].current_frame;

  001ce	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  001d3	0f b7 48 04	 movzx	 ecx, WORD PTR [eax+4]
  001d7	6b d1 0c	 imul	 edx, ecx, 12
  001da	a1 00 00 00 00	 mov	 eax, DWORD PTR ?texture_animations@@3PAUTEXTURE_ANIMATION_INFORMATION@@A ; texture_animations
  001df	8b 4c 10 04	 mov	 ecx, DWORD PTR [eax+edx+4]
  001e3	89 4d ec	 mov	 DWORD PTR _frame$10[ebp], ecx

; 1473 : 
; 1474 : 					current_object_3d_texture = system_textures[ texture_animations[current_object_3d_surface->texture_index].texture_indices[frame] ];

  001e6	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  001eb	0f b7 48 04	 movzx	 ecx, WORD PTR [eax+4]
  001ef	6b d1 0c	 imul	 edx, ecx, 12
  001f2	a1 00 00 00 00	 mov	 eax, DWORD PTR ?texture_animations@@3PAUTEXTURE_ANIMATION_INFORMATION@@A ; texture_animations
  001f7	8b 4c 10 08	 mov	 ecx, DWORD PTR [eax+edx+8]
  001fb	8b 55 ec	 mov	 edx, DWORD PTR _frame$10[ebp]
  001fe	8b 04 91	 mov	 eax, DWORD PTR [ecx+edx*4]
  00201	8b 0c 85 00 00
	00 00		 mov	 ecx, DWORD PTR ?system_textures@@3PAPAUSCREEN@@A[eax*4]
  00208	89 0d 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_texture@@3PAUSCREEN@@A, ecx ; current_object_3d_texture

; 1475 : 				}
; 1476 : 				else

  0020e	eb 16		 jmp	 SHORT $LN45@draw_3d_ob
$LN44@draw_3d_ob:

; 1477 : 				{
; 1478 : 					current_object_3d_texture = system_textures[current_object_3d_surface->texture_index];

  00210	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  00215	0f b7 48 04	 movzx	 ecx, WORD PTR [eax+4]
  00219	8b 14 8d 00 00
	00 00		 mov	 edx, DWORD PTR ?system_textures@@3PAPAUSCREEN@@A[ecx*4]
  00220	89 15 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_texture@@3PAUSCREEN@@A, edx ; current_object_3d_texture
$LN45@draw_3d_ob:

; 1479 : 				}
; 1480 : 
; 1481 : 				if ( current_object_3d_texture->contains_alpha )

  00226	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_texture@@3PAUSCREEN@@A ; current_object_3d_texture
  0022b	66 8b 48 0a	 mov	 cx, WORD PTR [eax+10]
  0022f	66 c1 e9 07	 shr	 cx, 7
  00233	66 83 e1 01	 and	 cx, 1
  00237	0f b7 d1	 movzx	 edx, cx
  0023a	85 d2		 test	 edx, edx
  0023c	74 0c		 je	 SHORT $LN46@draw_3d_ob

; 1482 : 				{
; 1483 : 					add_transparent_surface ( FALSE );

  0023e	6a 00		 push	 0
  00240	e8 00 00 00 00	 call	 ?add_transparent_surface@@YGXH@Z ; add_transparent_surface

; 1484 : 				}
; 1485 : 				else

  00245	e9 67 05 00 00	 jmp	 $LN24@draw_3d_ob
$LN46@draw_3d_ob:

; 1486 : 				{
; 1487 : 					current_object_3d_texture_u_address = ( current_object_3d_surface->texture_wrapped_u ) ? D3DTADDRESS_WRAP: D3DTADDRESS_CLAMP;

  0024a	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  0024f	66 8b 08	 mov	 cx, WORD PTR [eax]
  00252	66 c1 e9 0c	 shr	 cx, 12			; 0000000cH
  00256	66 83 e1 01	 and	 cx, 1
  0025a	0f b7 d1	 movzx	 edx, cx
  0025d	85 d2		 test	 edx, edx
  0025f	74 09		 je	 SHORT $LN84@draw_3d_ob
  00261	c7 45 84 01 00
	00 00		 mov	 DWORD PTR tv192[ebp], 1
  00268	eb 07		 jmp	 SHORT $LN85@draw_3d_ob
$LN84@draw_3d_ob:
  0026a	c7 45 84 03 00
	00 00		 mov	 DWORD PTR tv192[ebp], 3
$LN85@draw_3d_ob:
  00271	8b 45 84	 mov	 eax, DWORD PTR tv192[ebp]
  00274	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_texture_u_address@@3HA, eax ; current_object_3d_texture_u_address

; 1488 : 					current_object_3d_texture_v_address = ( current_object_3d_surface->texture_wrapped_v ) ? D3DTADDRESS_WRAP: D3DTADDRESS_CLAMP;

  00279	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  0027e	66 8b 08	 mov	 cx, WORD PTR [eax]
  00281	66 c1 e9 0d	 shr	 cx, 13			; 0000000dH
  00285	66 83 e1 01	 and	 cx, 1
  00289	0f b7 d1	 movzx	 edx, cx
  0028c	85 d2		 test	 edx, edx
  0028e	74 09		 je	 SHORT $LN86@draw_3d_ob
  00290	c7 45 84 01 00
	00 00		 mov	 DWORD PTR tv198[ebp], 1
  00297	eb 07		 jmp	 SHORT $LN87@draw_3d_ob
$LN86@draw_3d_ob:
  00299	c7 45 84 03 00
	00 00		 mov	 DWORD PTR tv198[ebp], 3
$LN87@draw_3d_ob:
  002a0	8b 45 84	 mov	 eax, DWORD PTR tv198[ebp]
  002a3	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_texture_v_address@@3HA, eax ; current_object_3d_texture_v_address

; 1489 : 					current_object_3d_texture_filter = ( current_object_3d_surface->texture_filtered ) ? D3DTFG_LINEAR : D3DTFG_POINT;

  002a8	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  002ad	66 8b 08	 mov	 cx, WORD PTR [eax]
  002b0	66 c1 e9 0a	 shr	 cx, 10			; 0000000aH
  002b4	66 83 e1 01	 and	 cx, 1
  002b8	0f b7 d1	 movzx	 edx, cx
  002bb	85 d2		 test	 edx, edx
  002bd	74 09		 je	 SHORT $LN88@draw_3d_ob
  002bf	c7 45 84 02 00
	00 00		 mov	 DWORD PTR tv204[ebp], 2
  002c6	eb 07		 jmp	 SHORT $LN89@draw_3d_ob
$LN88@draw_3d_ob:
  002c8	c7 45 84 01 00
	00 00		 mov	 DWORD PTR tv204[ebp], 1
$LN89@draw_3d_ob:
  002cf	8b 45 84	 mov	 eax, DWORD PTR tv204[ebp]
  002d2	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_texture_filter@@3HA, eax ; current_object_3d_texture_filter

; 1490 : 					current_object_3d_texture_mipmap = ( current_object_3d_surface->texture_mipmapped )	? D3DTFP_POINT : D3DTFP_NONE;

  002d7	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  002dc	66 8b 08	 mov	 cx, WORD PTR [eax]
  002df	66 c1 e9 0b	 shr	 cx, 11			; 0000000bH
  002e3	66 83 e1 01	 and	 cx, 1
  002e7	0f b7 d1	 movzx	 edx, cx
  002ea	85 d2		 test	 edx, edx
  002ec	74 09		 je	 SHORT $LN90@draw_3d_ob
  002ee	c7 45 84 02 00
	00 00		 mov	 DWORD PTR tv210[ebp], 2
  002f5	eb 07		 jmp	 SHORT $LN91@draw_3d_ob
$LN90@draw_3d_ob:
  002f7	c7 45 84 01 00
	00 00		 mov	 DWORD PTR tv210[ebp], 1
$LN91@draw_3d_ob:
  002fe	8b 45 84	 mov	 eax, DWORD PTR tv210[ebp]
  00301	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_texture_mipmap@@3HA, eax ; current_object_3d_texture_mipmap

; 1491 : 
; 1492 : 					reset_deferred_state_changes ();

  00306	e8 00 00 00 00	 call	 ?reset_deferred_state_changes@@YGXXZ ; reset_deferred_state_changes

; 1493 : 
; 1494 : #if ALWAYS_SPECULAR_RENDER
; 1495 : 					set_deferred_d3d_int_state ( D3DRENDERSTATE_SPECULARENABLE, TRUE );

  0030b	6a 01		 push	 1
  0030d	6a 1d		 push	 29			; 0000001dH
  0030f	e8 00 00 00 00	 call	 ?set_deferred_d3d_int_state@@YGXW4_D3DRENDERSTATETYPE@@K@Z ; set_deferred_d3d_int_state

; 1496 : #else
; 1497 : 					set_deferred_d3d_int_state ( D3DRENDERSTATE_SPECULARENABLE, current_object_3d_specular );
; 1498 : #endif
; 1499 : 
; 1500 : 					set_deferred_d3d_int_state ( D3DRENDERSTATE_SHADEMODE, D3DSHADE_GOURAUD );

  00314	6a 02		 push	 2
  00316	6a 09		 push	 9
  00318	e8 00 00 00 00	 call	 ?set_deferred_d3d_int_state@@YGXW4_D3DRENDERSTATETYPE@@K@Z ; set_deferred_d3d_int_state

; 1501 : 
; 1502 : 					set_deferred_d3d_texture ( 0, current_object_3d_texture );

  0031d	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_texture@@3PAUSCREEN@@A ; current_object_3d_texture
  00322	50		 push	 eax
  00323	6a 00		 push	 0
  00325	e8 00 00 00 00	 call	 ?set_deferred_d3d_texture@@YGXHPAUSCREEN@@@Z ; set_deferred_d3d_texture

; 1503 : 					set_deferred_d3d_texture_stage_state ( 0, D3DTSS_COLOROP, D3DTOP_MODULATE );

  0032a	6a 04		 push	 4
  0032c	6a 01		 push	 1
  0032e	6a 00		 push	 0
  00330	e8 00 00 00 00	 call	 ?set_deferred_d3d_texture_stage_state@@YGXHHH@Z ; set_deferred_d3d_texture_stage_state

; 1504 : 
; 1505 : 					set_deferred_d3d_texture_stage_state ( 0, D3DTSS_ADDRESSU, current_object_3d_texture_u_address );

  00335	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_texture_u_address@@3HA ; current_object_3d_texture_u_address
  0033a	50		 push	 eax
  0033b	6a 0d		 push	 13			; 0000000dH
  0033d	6a 00		 push	 0
  0033f	e8 00 00 00 00	 call	 ?set_deferred_d3d_texture_stage_state@@YGXHHH@Z ; set_deferred_d3d_texture_stage_state

; 1506 : 					set_deferred_d3d_texture_stage_state ( 0, D3DTSS_ADDRESSV, current_object_3d_texture_v_address );

  00344	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_texture_v_address@@3HA ; current_object_3d_texture_v_address
  00349	50		 push	 eax
  0034a	6a 0e		 push	 14			; 0000000eH
  0034c	6a 00		 push	 0
  0034e	e8 00 00 00 00	 call	 ?set_deferred_d3d_texture_stage_state@@YGXHHH@Z ; set_deferred_d3d_texture_stage_state

; 1507 : 					set_deferred_d3d_texture_stage_state ( 0, D3DTSS_MAGFILTER, current_object_3d_texture_filter );

  00353	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_texture_filter@@3HA ; current_object_3d_texture_filter
  00358	50		 push	 eax
  00359	6a 10		 push	 16			; 00000010H
  0035b	6a 00		 push	 0
  0035d	e8 00 00 00 00	 call	 ?set_deferred_d3d_texture_stage_state@@YGXHHH@Z ; set_deferred_d3d_texture_stage_state

; 1508 : 					set_deferred_d3d_texture_stage_state ( 0, D3DTSS_MINFILTER, current_object_3d_texture_filter );

  00362	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_texture_filter@@3HA ; current_object_3d_texture_filter
  00367	50		 push	 eax
  00368	6a 11		 push	 17			; 00000011H
  0036a	6a 00		 push	 0
  0036c	e8 00 00 00 00	 call	 ?set_deferred_d3d_texture_stage_state@@YGXHHH@Z ; set_deferred_d3d_texture_stage_state

; 1509 : 					set_deferred_d3d_texture_stage_state ( 0, D3DTSS_MIPFILTER, current_object_3d_texture_mipmap );

  00371	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_texture_mipmap@@3HA ; current_object_3d_texture_mipmap
  00376	50		 push	 eax
  00377	6a 12		 push	 18			; 00000012H
  00379	6a 00		 push	 0
  0037b	e8 00 00 00 00	 call	 ?set_deferred_d3d_texture_stage_state@@YGXHHH@Z ; set_deferred_d3d_texture_stage_state

; 1510 : 
; 1511 : 					if ( current_object_3d_surface->has_luminosity_texture )

  00380	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  00385	66 8b 08	 mov	 cx, WORD PTR [eax]
  00388	66 c1 e9 04	 shr	 cx, 4
  0038c	66 83 e1 01	 and	 cx, 1
  00390	0f b7 d1	 movzx	 edx, cx
  00393	85 d2		 test	 edx, edx
  00395	0f 84 28 02 00
	00		 je	 $LN48@draw_3d_ob

; 1512 : 					{
; 1513 : 						if ( current_object_3d_surface->luminosity_texture_animation )

  0039b	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  003a0	8a 48 02	 mov	 cl, BYTE PTR [eax+2]
  003a3	80 e1 01	 and	 cl, 1
  003a6	0f b6 d1	 movzx	 edx, cl
  003a9	85 d2		 test	 edx, edx
  003ab	74 42		 je	 SHORT $LN50@draw_3d_ob

; 1514 : 						{
; 1515 : 							int
; 1516 : 								frame;
; 1517 : 
; 1518 : 							frame = texture_animations[current_object_3d_surface->luminosity_texture_index].current_frame;

  003ad	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  003b2	0f b7 48 06	 movzx	 ecx, WORD PTR [eax+6]
  003b6	6b d1 0c	 imul	 edx, ecx, 12
  003b9	a1 00 00 00 00	 mov	 eax, DWORD PTR ?texture_animations@@3PAUTEXTURE_ANIMATION_INFORMATION@@A ; texture_animations
  003be	8b 4c 10 04	 mov	 ecx, DWORD PTR [eax+edx+4]
  003c2	89 4d e8	 mov	 DWORD PTR _frame$9[ebp], ecx

; 1519 : 							current_object_3d_luminosity_texture = system_textures[ texture_animations[current_object_3d_surface->luminosity_texture_index].texture_indices[frame] ];

  003c5	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  003ca	0f b7 48 06	 movzx	 ecx, WORD PTR [eax+6]
  003ce	6b d1 0c	 imul	 edx, ecx, 12
  003d1	a1 00 00 00 00	 mov	 eax, DWORD PTR ?texture_animations@@3PAUTEXTURE_ANIMATION_INFORMATION@@A ; texture_animations
  003d6	8b 4c 10 08	 mov	 ecx, DWORD PTR [eax+edx+8]
  003da	8b 55 e8	 mov	 edx, DWORD PTR _frame$9[ebp]
  003dd	8b 04 91	 mov	 eax, DWORD PTR [ecx+edx*4]
  003e0	8b 0c 85 00 00
	00 00		 mov	 ecx, DWORD PTR ?system_textures@@3PAPAUSCREEN@@A[eax*4]
  003e7	89 0d 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_luminosity_texture@@3PAUSCREEN@@A, ecx ; current_object_3d_luminosity_texture

; 1520 : 						}
; 1521 : 						else

  003ed	eb 16		 jmp	 SHORT $LN51@draw_3d_ob
$LN50@draw_3d_ob:

; 1522 : 						{
; 1523 : 							current_object_3d_luminosity_texture = system_textures[current_object_3d_surface->luminosity_texture_index];

  003ef	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  003f4	0f b7 48 06	 movzx	 ecx, WORD PTR [eax+6]
  003f8	8b 14 8d 00 00
	00 00		 mov	 edx, DWORD PTR ?system_textures@@3PAPAUSCREEN@@A[ecx*4]
  003ff	89 15 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_luminosity_texture@@3PAUSCREEN@@A, edx ; current_object_3d_luminosity_texture
$LN51@draw_3d_ob:

; 1524 : 						}
; 1525 : 
; 1526 : 						if ( current_object_3d_surface->luminosity_texture_wrapped_u )	{ current_object_3d_luminosity_texture_u_address = D3DTADDRESS_WRAP; }

  00405	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  0040a	8a 48 02	 mov	 cl, BYTE PTR [eax+2]
  0040d	c0 e9 03	 shr	 cl, 3
  00410	80 e1 01	 and	 cl, 1
  00413	0f b6 d1	 movzx	 edx, cl
  00416	85 d2		 test	 edx, edx
  00418	74 0c		 je	 SHORT $LN52@draw_3d_ob
  0041a	c7 05 00 00 00
	00 01 00 00 00	 mov	 DWORD PTR ?current_object_3d_luminosity_texture_u_address@@3HA, 1 ; current_object_3d_luminosity_texture_u_address
  00424	eb 0a		 jmp	 SHORT $LN53@draw_3d_ob
$LN52@draw_3d_ob:

; 1527 : 						else																				{ current_object_3d_luminosity_texture_u_address = D3DTADDRESS_CLAMP; }

  00426	c7 05 00 00 00
	00 03 00 00 00	 mov	 DWORD PTR ?current_object_3d_luminosity_texture_u_address@@3HA, 3 ; current_object_3d_luminosity_texture_u_address
$LN53@draw_3d_ob:

; 1528 : 
; 1529 : 						if ( current_object_3d_surface->luminosity_texture_wrapped_v )	{ current_object_3d_luminosity_texture_v_address = D3DTADDRESS_WRAP; }

  00430	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  00435	8a 48 02	 mov	 cl, BYTE PTR [eax+2]
  00438	c0 e9 04	 shr	 cl, 4
  0043b	80 e1 01	 and	 cl, 1
  0043e	0f b6 d1	 movzx	 edx, cl
  00441	85 d2		 test	 edx, edx
  00443	74 0c		 je	 SHORT $LN54@draw_3d_ob
  00445	c7 05 00 00 00
	00 01 00 00 00	 mov	 DWORD PTR ?current_object_3d_luminosity_texture_v_address@@3HA, 1 ; current_object_3d_luminosity_texture_v_address
  0044f	eb 0a		 jmp	 SHORT $LN55@draw_3d_ob
$LN54@draw_3d_ob:

; 1530 : 						else																				{ current_object_3d_luminosity_texture_v_address = D3DTADDRESS_CLAMP; }

  00451	c7 05 00 00 00
	00 03 00 00 00	 mov	 DWORD PTR ?current_object_3d_luminosity_texture_v_address@@3HA, 3 ; current_object_3d_luminosity_texture_v_address
$LN55@draw_3d_ob:

; 1531 : 
; 1532 : 						if ( current_object_3d_surface->luminosity_texture_filtered )	{ current_object_3d_luminosity_texture_filter = D3DTFG_LINEAR; }

  0045b	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  00460	8a 48 02	 mov	 cl, BYTE PTR [eax+2]
  00463	d0 e9		 shr	 cl, 1
  00465	80 e1 01	 and	 cl, 1
  00468	0f b6 d1	 movzx	 edx, cl
  0046b	85 d2		 test	 edx, edx
  0046d	74 0c		 je	 SHORT $LN56@draw_3d_ob
  0046f	c7 05 00 00 00
	00 02 00 00 00	 mov	 DWORD PTR ?current_object_3d_luminosity_texture_filter@@3HA, 2 ; current_object_3d_luminosity_texture_filter
  00479	eb 0a		 jmp	 SHORT $LN57@draw_3d_ob
$LN56@draw_3d_ob:

; 1533 : 						else																				{ current_object_3d_luminosity_texture_filter = D3DTFG_POINT; }

  0047b	c7 05 00 00 00
	00 01 00 00 00	 mov	 DWORD PTR ?current_object_3d_luminosity_texture_filter@@3HA, 1 ; current_object_3d_luminosity_texture_filter
$LN57@draw_3d_ob:

; 1534 : 
; 1535 : #if ( FORCE_LIGHTMAP_MIPMAPPING )
; 1536 : 						if ( current_object_3d_surface->luminosity_texture_mipmapped )	{ current_object_3d_luminosity_texture_mipmap = D3DTFP_POINT; }

  00485	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  0048a	8a 48 02	 mov	 cl, BYTE PTR [eax+2]
  0048d	c0 e9 02	 shr	 cl, 2
  00490	80 e1 01	 and	 cl, 1
  00493	0f b6 d1	 movzx	 edx, cl
  00496	85 d2		 test	 edx, edx
  00498	74 0c		 je	 SHORT $LN58@draw_3d_ob
  0049a	c7 05 00 00 00
	00 02 00 00 00	 mov	 DWORD PTR ?current_object_3d_luminosity_texture_mipmap@@3HA, 2 ; current_object_3d_luminosity_texture_mipmap
  004a4	eb 0a		 jmp	 SHORT $LN59@draw_3d_ob
$LN58@draw_3d_ob:

; 1537 : 						else																				{ current_object_3d_luminosity_texture_mipmap = D3DTFP_POINT; }

  004a6	c7 05 00 00 00
	00 02 00 00 00	 mov	 DWORD PTR ?current_object_3d_luminosity_texture_mipmap@@3HA, 2 ; current_object_3d_luminosity_texture_mipmap
$LN59@draw_3d_ob:

; 1538 : #else
; 1539 : 						if ( current_object_3d_surface->luminosity_texture_mipmapped )	{ current_object_3d_luminosity_texture_mipmap = D3DTFP_POINT; }
; 1540 : 						else																				{ current_object_3d_luminosity_texture_mipmap = D3DTFP_NONE; }
; 1541 : #endif
; 1542 : 
; 1543 : 						if ( current_object_3d_surface->smoothed )

  004b0	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  004b5	66 8b 08	 mov	 cx, WORD PTR [eax]
  004b8	66 c1 e9 02	 shr	 cx, 2
  004bc	66 83 e1 01	 and	 cx, 1
  004c0	0f b7 d1	 movzx	 edx, cx
  004c3	85 d2		 test	 edx, edx
  004c5	74 50		 je	 SHORT $LN60@draw_3d_ob

; 1544 : 						{
; 1545 : 							for ( faces_left = current_object_3d_surface->number_of_faces; faces_left > 0; faces_left-- )

  004c7	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  004cc	0f b7 48 08	 movzx	 ecx, WORD PTR [eax+8]
  004d0	89 4d f8	 mov	 DWORD PTR _faces_left$[ebp], ecx
  004d3	eb 09		 jmp	 SHORT $LN7@draw_3d_ob
$LN5@draw_3d_ob:
  004d5	8b 45 f8	 mov	 eax, DWORD PTR _faces_left$[ebp]
  004d8	83 e8 01	 sub	 eax, 1
  004db	89 45 f8	 mov	 DWORD PTR _faces_left$[ebp], eax
$LN7@draw_3d_ob:
  004de	83 7d f8 00	 cmp	 DWORD PTR _faces_left$[ebp], 0
  004e2	7e 2e		 jle	 SHORT $LN6@draw_3d_ob

; 1546 : 							{
; 1547 : 								wrender_unclipped_3d_object_gouraud_textured_lightmap_polygon ( current_object_3d_faces );

  004e4	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  004e9	50		 push	 eax
  004ea	e8 00 00 00 00	 call	 ?wrender_unclipped_3d_object_gouraud_textured_lightmap_polygon@@YGXPAUOBJECT_3D_FACE@@@Z ; wrender_unclipped_3d_object_gouraud_textured_lightmap_polygon

; 1548 : 								current_object_3d_point_list += current_object_3d_faces->number_of_points;

  004ef	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  004f4	0f b6 08	 movzx	 ecx, BYTE PTR [eax]
  004f7	03 0d 00 00 00
	00		 add	 ecx, DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A ; current_object_3d_point_list
  004fd	89 0d 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A, ecx ; current_object_3d_point_list

; 1549 : 								current_object_3d_faces++;

  00503	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  00508	83 c0 01	 add	 eax, 1
  0050b	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A, eax ; current_object_3d_faces

; 1550 : 							}

  00510	eb c3		 jmp	 SHORT $LN5@draw_3d_ob
$LN6@draw_3d_ob:

; 1551 : 						}
; 1552 : 						else

  00512	e9 a7 00 00 00	 jmp	 $LN12@draw_3d_ob
$LN60@draw_3d_ob:

; 1553 : 						{
; 1554 : 							if ( current_object_3d_surface->polygons )

  00517	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  0051c	66 8b 08	 mov	 cx, WORD PTR [eax]
  0051f	66 83 e1 01	 and	 cx, 1
  00523	0f b7 d1	 movzx	 edx, cx
  00526	85 d2		 test	 edx, edx
  00528	74 5a		 je	 SHORT $LN62@draw_3d_ob

; 1555 : 							{
; 1556 : 								for ( faces_left = current_object_3d_surface->number_of_faces; faces_left > 0; faces_left-- )

  0052a	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  0052f	0f b7 48 08	 movzx	 ecx, WORD PTR [eax+8]
  00533	89 4d f8	 mov	 DWORD PTR _faces_left$[ebp], ecx
  00536	eb 09		 jmp	 SHORT $LN10@draw_3d_ob
$LN8@draw_3d_ob:
  00538	8b 45 f8	 mov	 eax, DWORD PTR _faces_left$[ebp]
  0053b	83 e8 01	 sub	 eax, 1
  0053e	89 45 f8	 mov	 DWORD PTR _faces_left$[ebp], eax
$LN10@draw_3d_ob:
  00541	83 7d f8 00	 cmp	 DWORD PTR _faces_left$[ebp], 0
  00545	7e 3b		 jle	 SHORT $LN9@draw_3d_ob

; 1557 : 								{
; 1558 : 									wrender_unclipped_3d_object_textured_lightmap_polygon ( current_object_3d_faces );

  00547	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  0054c	50		 push	 eax
  0054d	e8 00 00 00 00	 call	 ?wrender_unclipped_3d_object_textured_lightmap_polygon@@YGXPAUOBJECT_3D_FACE@@@Z ; wrender_unclipped_3d_object_textured_lightmap_polygon

; 1559 : 									current_object_3d_face_normal_list++;

  00552	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_face_normal_list@@3PAUPOINT_3D_PLAIN_REFERENCE@@A ; current_object_3d_face_normal_list
  00557	83 c0 02	 add	 eax, 2
  0055a	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_face_normal_list@@3PAUPOINT_3D_PLAIN_REFERENCE@@A, eax ; current_object_3d_face_normal_list

; 1560 : 									current_object_3d_point_list += current_object_3d_faces->number_of_points;

  0055f	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  00564	0f b6 08	 movzx	 ecx, BYTE PTR [eax]
  00567	03 0d 00 00 00
	00		 add	 ecx, DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A ; current_object_3d_point_list
  0056d	89 0d 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A, ecx ; current_object_3d_point_list

; 1561 : 									current_object_3d_faces++;

  00573	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  00578	83 c0 01	 add	 eax, 1
  0057b	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A, eax ; current_object_3d_faces

; 1562 : 								}

  00580	eb b6		 jmp	 SHORT $LN8@draw_3d_ob
$LN9@draw_3d_ob:

; 1563 : 							}
; 1564 : 							else

  00582	eb 3a		 jmp	 SHORT $LN12@draw_3d_ob
$LN62@draw_3d_ob:

; 1565 : 							{
; 1566 : 								for ( faces_left = current_object_3d_surface->number_of_faces; faces_left > 0; faces_left-- )

  00584	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  00589	0f b7 48 08	 movzx	 ecx, WORD PTR [eax+8]
  0058d	89 4d f8	 mov	 DWORD PTR _faces_left$[ebp], ecx
  00590	eb 09		 jmp	 SHORT $LN13@draw_3d_ob
$LN11@draw_3d_ob:
  00592	8b 45 f8	 mov	 eax, DWORD PTR _faces_left$[ebp]
  00595	83 e8 01	 sub	 eax, 1
  00598	89 45 f8	 mov	 DWORD PTR _faces_left$[ebp], eax
$LN13@draw_3d_ob:
  0059b	83 7d f8 00	 cmp	 DWORD PTR _faces_left$[ebp], 0
  0059f	7e 1d		 jle	 SHORT $LN12@draw_3d_ob

; 1567 : 								{
; 1568 : 									if ( d3d_textured_lines )

  005a1	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?d3d_textured_lines@@3HA, 0 ; d3d_textured_lines
  005a8	74 05		 je	 SHORT $LN64@draw_3d_ob

; 1569 : 									{
; 1570 : 										wrender_unclipped_3d_object_textured_line ();

  005aa	e8 00 00 00 00	 call	 ?wrender_unclipped_3d_object_textured_line@@YGXXZ ; wrender_unclipped_3d_object_textured_line
$LN64@draw_3d_ob:

; 1571 : 									}
; 1572 : 									current_object_3d_point_list += 2;

  005af	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A ; current_object_3d_point_list
  005b4	83 c0 02	 add	 eax, 2
  005b7	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A, eax ; current_object_3d_point_list

; 1573 : 								}

  005bc	eb d4		 jmp	 SHORT $LN11@draw_3d_ob
$LN12@draw_3d_ob:

; 1574 : 							}
; 1575 : 						}
; 1576 : 					}
; 1577 : 					else

  005be	e9 ee 01 00 00	 jmp	 $LN24@draw_3d_ob
$LN48@draw_3d_ob:

; 1578 : 					{
; 1579 : 						commit_deferred_state_changes ();

  005c3	e8 00 00 00 00	 call	 ?commit_deferred_state_changes@@YGXXZ ; commit_deferred_state_changes

; 1580 : 
; 1581 : 						current_object_3d_surface_vertices = get_d3d_new_vertices_points_address ( number_of_surface_points, &current_object_3d_surface_point_index );

  005c8	68 00 00 00 00	 push	 OFFSET ?current_object_3d_surface_point_index@@3HA ; current_object_3d_surface_point_index
  005cd	8b 45 fc	 mov	 eax, DWORD PTR _number_of_surface_points$[ebp]
  005d0	50		 push	 eax
  005d1	e8 00 00 00 00	 call	 ?get_d3d_new_vertices_points_address@@YGPAU_D3DTLVERTEX@@HPAH@Z ; get_d3d_new_vertices_points_address
  005d6	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_surface_vertices@@3PAU_D3DTLVERTEX@@A, eax ; current_object_3d_surface_vertices

; 1582 : 
; 1583 : 						memset ( current_object_3d_surface_vertices_used, 0, number_of_surface_points );

  005db	8b 45 fc	 mov	 eax, DWORD PTR _number_of_surface_points$[ebp]
  005de	50		 push	 eax
  005df	6a 00		 push	 0
  005e1	68 00 00 00 00	 push	 OFFSET ?current_object_3d_surface_vertices_used@@3PAEA ; current_object_3d_surface_vertices_used
  005e6	e8 00 00 00 00	 call	 _memset
  005eb	83 c4 0c	 add	 esp, 12			; 0000000cH

; 1584 : 
; 1585 : 						if ( current_object_3d_surface->smoothed )

  005ee	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  005f3	66 8b 08	 mov	 cx, WORD PTR [eax]
  005f6	66 c1 e9 02	 shr	 cx, 2
  005fa	66 83 e1 01	 and	 cx, 1
  005fe	0f b7 d1	 movzx	 edx, cx
  00601	85 d2		 test	 edx, edx
  00603	74 7e		 je	 SHORT $LN65@draw_3d_ob

; 1586 : 						{
; 1587 : 							for ( faces_left = current_object_3d_surface->number_of_faces; faces_left > 0; faces_left-- )

  00605	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  0060a	0f b7 48 08	 movzx	 ecx, WORD PTR [eax+8]
  0060e	89 4d f8	 mov	 DWORD PTR _faces_left$[ebp], ecx
  00611	eb 09		 jmp	 SHORT $LN16@draw_3d_ob
$LN14@draw_3d_ob:
  00613	8b 45 f8	 mov	 eax, DWORD PTR _faces_left$[ebp]
  00616	83 e8 01	 sub	 eax, 1
  00619	89 45 f8	 mov	 DWORD PTR _faces_left$[ebp], eax
$LN16@draw_3d_ob:
  0061c	83 7d f8 00	 cmp	 DWORD PTR _faces_left$[ebp], 0
  00620	7e 3f		 jle	 SHORT $LN15@draw_3d_ob

; 1588 : 							{
; 1589 : 								add_triangle_fan_primitive_to_buffer ( current_object_3d_faces->number_of_points, current_object_3d_surface_point_index, ( unsigned char * ) current_object_3d_point_list );

  00622	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A ; current_object_3d_point_list
  00627	50		 push	 eax
  00628	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_object_3d_surface_point_index@@3HA ; current_object_3d_surface_point_index
  0062e	51		 push	 ecx
  0062f	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  00635	0f b6 02	 movzx	 eax, BYTE PTR [edx]
  00638	50		 push	 eax
  00639	e8 00 00 00 00	 call	 ?add_triangle_fan_primitive_to_buffer@@YGXHHPAE@Z ; add_triangle_fan_primitive_to_buffer

; 1590 : 
; 1591 : 								current_object_3d_point_list += current_object_3d_faces->number_of_points;

  0063e	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  00643	0f b6 08	 movzx	 ecx, BYTE PTR [eax]
  00646	03 0d 00 00 00
	00		 add	 ecx, DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A ; current_object_3d_point_list
  0064c	89 0d 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A, ecx ; current_object_3d_point_list

; 1592 : 								current_object_3d_faces++;

  00652	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  00657	83 c0 01	 add	 eax, 1
  0065a	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A, eax ; current_object_3d_faces

; 1593 : 							}

  0065f	eb b2		 jmp	 SHORT $LN14@draw_3d_ob
$LN15@draw_3d_ob:

; 1594 : 
; 1595 : 							if ( current_object_3d_specular )

  00661	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?current_object_3d_specular@@3HA, 0 ; current_object_3d_specular
  00668	74 0b		 je	 SHORT $LN67@draw_3d_ob

; 1596 : 							{
; 1597 : 								wrender_3d_object_gouraud_textured_surface ( number_of_surface_points );

  0066a	8b 45 fc	 mov	 eax, DWORD PTR _number_of_surface_points$[ebp]
  0066d	50		 push	 eax
  0066e	e8 00 00 00 00	 call	 ?wrender_3d_object_gouraud_textured_surface@@YGXH@Z ; wrender_3d_object_gouraud_textured_surface

; 1598 : 							}
; 1599 : 							else

  00673	eb 09		 jmp	 SHORT $LN68@draw_3d_ob
$LN67@draw_3d_ob:

; 1600 : 							{
; 1601 : 								wrender_3d_object_gouraud_textured_nospecular_surface ( number_of_surface_points );

  00675	8b 45 fc	 mov	 eax, DWORD PTR _number_of_surface_points$[ebp]
  00678	50		 push	 eax
  00679	e8 00 00 00 00	 call	 ?wrender_3d_object_gouraud_textured_nospecular_surface@@YGXH@Z ; wrender_3d_object_gouraud_textured_nospecular_surface
$LN68@draw_3d_ob:

; 1602 : 							}
; 1603 : 						}
; 1604 : 						else

  0067e	e9 2e 01 00 00	 jmp	 $LN24@draw_3d_ob
$LN65@draw_3d_ob:

; 1605 : 						{
; 1606 : 							if ( current_object_3d_surface->polygons )

  00683	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  00688	66 8b 08	 mov	 cx, WORD PTR [eax]
  0068b	66 83 e1 01	 and	 cx, 1
  0068f	0f b7 d1	 movzx	 edx, cx
  00692	85 d2		 test	 edx, edx
  00694	0f 84 dd 00 00
	00		 je	 $LN69@draw_3d_ob

; 1607 : 							{
; 1608 : 								for ( faces_left = current_object_3d_surface->number_of_faces; faces_left > 0; faces_left-- )

  0069a	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  0069f	0f b7 48 08	 movzx	 ecx, WORD PTR [eax+8]
  006a3	89 4d f8	 mov	 DWORD PTR _faces_left$[ebp], ecx
  006a6	eb 09		 jmp	 SHORT $LN19@draw_3d_ob
$LN17@draw_3d_ob:
  006a8	8b 45 f8	 mov	 eax, DWORD PTR _faces_left$[ebp]
  006ab	83 e8 01	 sub	 eax, 1
  006ae	89 45 f8	 mov	 DWORD PTR _faces_left$[ebp], eax
$LN19@draw_3d_ob:
  006b1	83 7d f8 00	 cmp	 DWORD PTR _faces_left$[ebp], 0
  006b5	0f 8e b1 00 00
	00		 jle	 $LN18@draw_3d_ob

; 1609 : 								{
; 1610 : 									real_colour
; 1611 : 										colour,
; 1612 : 										specular_colour;
; 1613 : 
; 1614 : 									int
; 1615 : 										point_index;
; 1616 : 
; 1617 : 									get_textured_surface_face_colour ( &colour, &specular_colour );

  006bb	8d 45 e0	 lea	 eax, DWORD PTR _specular_colour$7[ebp]
  006be	50		 push	 eax
  006bf	8d 4d e4	 lea	 ecx, DWORD PTR _colour$8[ebp]
  006c2	51		 push	 ecx
  006c3	e8 00 00 00 00	 call	 ?get_textured_surface_face_colour@@YGXPAUREAL_COLOUR@@0@Z ; get_textured_surface_face_colour

; 1618 : 									add_triangle_fan_primitive_to_buffer ( current_object_3d_faces->number_of_points, current_object_3d_surface_point_index, ( unsigned char * ) current_object_3d_point_list );

  006c8	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A ; current_object_3d_point_list
  006cd	50		 push	 eax
  006ce	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_object_3d_surface_point_index@@3HA ; current_object_3d_surface_point_index
  006d4	51		 push	 ecx
  006d5	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  006db	0f b6 02	 movzx	 eax, BYTE PTR [edx]
  006de	50		 push	 eax
  006df	e8 00 00 00 00	 call	 ?add_triangle_fan_primitive_to_buffer@@YGXHHPAE@Z ; add_triangle_fan_primitive_to_buffer

; 1619 : 									for ( point_index = 0; point_index < current_object_3d_faces->number_of_points; point_index++ )

  006e4	c7 45 dc 00 00
	00 00		 mov	 DWORD PTR _point_index$6[ebp], 0
  006eb	eb 09		 jmp	 SHORT $LN22@draw_3d_ob
$LN20@draw_3d_ob:
  006ed	8b 45 dc	 mov	 eax, DWORD PTR _point_index$6[ebp]
  006f0	83 c0 01	 add	 eax, 1
  006f3	89 45 dc	 mov	 DWORD PTR _point_index$6[ebp], eax
$LN22@draw_3d_ob:
  006f6	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  006fb	0f b6 08	 movzx	 ecx, BYTE PTR [eax]
  006fe	39 4d dc	 cmp	 DWORD PTR _point_index$6[ebp], ecx
  00701	7d 36		 jge	 SHORT $LN21@draw_3d_ob

; 1620 : 									{
; 1621 : 										int
; 1622 : 											index;
; 1623 : 
; 1624 : 										index = current_object_3d_point_list[point_index].point;

  00703	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A ; current_object_3d_point_list
  00708	03 45 dc	 add	 eax, DWORD PTR _point_index$6[ebp]
  0070b	0f b6 08	 movzx	 ecx, BYTE PTR [eax]
  0070e	89 4d d8	 mov	 DWORD PTR _index$5[ebp], ecx

; 1625 : 										current_object_3d_surface_vertices[index].color = colour.colour;

  00711	8b 45 d8	 mov	 eax, DWORD PTR _index$5[ebp]
  00714	c1 e0 05	 shl	 eax, 5
  00717	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_object_3d_surface_vertices@@3PAU_D3DTLVERTEX@@A ; current_object_3d_surface_vertices
  0071d	8b 55 e4	 mov	 edx, DWORD PTR _colour$8[ebp]
  00720	89 54 01 10	 mov	 DWORD PTR [ecx+eax+16], edx

; 1626 : 										current_object_3d_surface_vertices[index].specular = specular_colour.colour;

  00724	8b 45 d8	 mov	 eax, DWORD PTR _index$5[ebp]
  00727	c1 e0 05	 shl	 eax, 5
  0072a	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_object_3d_surface_vertices@@3PAU_D3DTLVERTEX@@A ; current_object_3d_surface_vertices
  00730	8b 55 e0	 mov	 edx, DWORD PTR _specular_colour$7[ebp]
  00733	89 54 01 14	 mov	 DWORD PTR [ecx+eax+20], edx

; 1627 : 									}

  00737	eb b4		 jmp	 SHORT $LN20@draw_3d_ob
$LN21@draw_3d_ob:

; 1628 : 									current_object_3d_face_normal_list++;

  00739	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_face_normal_list@@3PAUPOINT_3D_PLAIN_REFERENCE@@A ; current_object_3d_face_normal_list
  0073e	83 c0 02	 add	 eax, 2
  00741	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_face_normal_list@@3PAUPOINT_3D_PLAIN_REFERENCE@@A, eax ; current_object_3d_face_normal_list

; 1629 : 									current_object_3d_point_list += current_object_3d_faces->number_of_points;

  00746	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  0074b	0f b6 08	 movzx	 ecx, BYTE PTR [eax]
  0074e	03 0d 00 00 00
	00		 add	 ecx, DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A ; current_object_3d_point_list
  00754	89 0d 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A, ecx ; current_object_3d_point_list

; 1630 : 									current_object_3d_faces++;

  0075a	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  0075f	83 c0 01	 add	 eax, 1
  00762	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A, eax ; current_object_3d_faces

; 1631 : 								}

  00767	e9 3c ff ff ff	 jmp	 $LN17@draw_3d_ob
$LN18@draw_3d_ob:

; 1632 : 
; 1633 : 								wrender_3d_object_textured_surface ( number_of_surface_points );

  0076c	8b 45 fc	 mov	 eax, DWORD PTR _number_of_surface_points$[ebp]
  0076f	50		 push	 eax
  00770	e8 00 00 00 00	 call	 ?wrender_3d_object_textured_surface@@YGXH@Z ; wrender_3d_object_textured_surface

; 1634 : 							}
; 1635 : 							else

  00775	eb 3a		 jmp	 SHORT $LN24@draw_3d_ob
$LN69@draw_3d_ob:

; 1636 : 							{
; 1637 : 								for ( faces_left = current_object_3d_surface->number_of_faces; faces_left > 0; faces_left-- )

  00777	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  0077c	0f b7 48 08	 movzx	 ecx, WORD PTR [eax+8]
  00780	89 4d f8	 mov	 DWORD PTR _faces_left$[ebp], ecx
  00783	eb 09		 jmp	 SHORT $LN25@draw_3d_ob
$LN23@draw_3d_ob:
  00785	8b 45 f8	 mov	 eax, DWORD PTR _faces_left$[ebp]
  00788	83 e8 01	 sub	 eax, 1
  0078b	89 45 f8	 mov	 DWORD PTR _faces_left$[ebp], eax
$LN25@draw_3d_ob:
  0078e	83 7d f8 00	 cmp	 DWORD PTR _faces_left$[ebp], 0
  00792	7e 1d		 jle	 SHORT $LN24@draw_3d_ob

; 1638 : 								{
; 1639 : 									if ( d3d_textured_lines )

  00794	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?d3d_textured_lines@@3HA, 0 ; d3d_textured_lines
  0079b	74 05		 je	 SHORT $LN71@draw_3d_ob

; 1640 : 									{
; 1641 : 										wrender_unclipped_3d_object_textured_line ();

  0079d	e8 00 00 00 00	 call	 ?wrender_unclipped_3d_object_textured_line@@YGXXZ ; wrender_unclipped_3d_object_textured_line
$LN71@draw_3d_ob:

; 1642 : 									}
; 1643 : 									current_object_3d_point_list += 2;

  007a2	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A ; current_object_3d_point_list
  007a7	83 c0 02	 add	 eax, 2
  007aa	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A, eax ; current_object_3d_point_list

; 1644 : 								}

  007af	eb d4		 jmp	 SHORT $LN23@draw_3d_ob
$LN24@draw_3d_ob:

; 1645 : 							}
; 1646 : 						}
; 1647 : 					}
; 1648 : 				}
; 1649 : 			}
; 1650 : 			else

  007b1	e9 fa 01 00 00	 jmp	 $LN36@draw_3d_ob
$LN42@draw_3d_ob:

; 1651 : 			{
; 1652 : 
; 1653 : 				reset_deferred_state_changes ();

  007b6	e8 00 00 00 00	 call	 ?reset_deferred_state_changes@@YGXXZ ; reset_deferred_state_changes

; 1654 : 
; 1655 : #if ALWAYS_SPECULAR_RENDER
; 1656 : 				set_deferred_d3d_int_state ( D3DRENDERSTATE_SPECULARENABLE, TRUE );

  007bb	6a 01		 push	 1
  007bd	6a 1d		 push	 29			; 0000001dH
  007bf	e8 00 00 00 00	 call	 ?set_deferred_d3d_int_state@@YGXW4_D3DRENDERSTATETYPE@@K@Z ; set_deferred_d3d_int_state

; 1657 : #else
; 1658 : 				set_deferred_d3d_int_state ( D3DRENDERSTATE_SPECULARENABLE, current_object_3d_specular );
; 1659 : #endif
; 1660 : 				set_deferred_d3d_int_state ( D3DRENDERSTATE_SHADEMODE, D3DSHADE_GOURAUD );

  007c4	6a 02		 push	 2
  007c6	6a 09		 push	 9
  007c8	e8 00 00 00 00	 call	 ?set_deferred_d3d_int_state@@YGXW4_D3DRENDERSTATETYPE@@K@Z ; set_deferred_d3d_int_state

; 1661 : 
; 1662 : 				set_deferred_d3d_texture_stage_state ( 0, D3DTSS_COLOROP, D3DTOP_DISABLE );

  007cd	6a 01		 push	 1
  007cf	6a 01		 push	 1
  007d1	6a 00		 push	 0
  007d3	e8 00 00 00 00	 call	 ?set_deferred_d3d_texture_stage_state@@YGXHHH@Z ; set_deferred_d3d_texture_stage_state

; 1663 : 
; 1664 : 				//
; 1665 : 				// Set up the vertex buffer for this set of triangles / vertices
; 1666 : 				//
; 1667 : 
; 1668 : 				commit_deferred_state_changes ();

  007d8	e8 00 00 00 00	 call	 ?commit_deferred_state_changes@@YGXXZ ; commit_deferred_state_changes

; 1669 : 
; 1670 : 				current_object_3d_surface_vertices = get_d3d_new_vertices_points_address ( number_of_surface_points, &current_object_3d_surface_point_index );

  007dd	68 00 00 00 00	 push	 OFFSET ?current_object_3d_surface_point_index@@3HA ; current_object_3d_surface_point_index
  007e2	8b 45 fc	 mov	 eax, DWORD PTR _number_of_surface_points$[ebp]
  007e5	50		 push	 eax
  007e6	e8 00 00 00 00	 call	 ?get_d3d_new_vertices_points_address@@YGPAU_D3DTLVERTEX@@HPAH@Z ; get_d3d_new_vertices_points_address
  007eb	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_surface_vertices@@3PAU_D3DTLVERTEX@@A, eax ; current_object_3d_surface_vertices

; 1671 : 
; 1672 : 				memset ( current_object_3d_surface_vertices_used, 0, number_of_surface_points );

  007f0	8b 45 fc	 mov	 eax, DWORD PTR _number_of_surface_points$[ebp]
  007f3	50		 push	 eax
  007f4	6a 00		 push	 0
  007f6	68 00 00 00 00	 push	 OFFSET ?current_object_3d_surface_vertices_used@@3PAEA ; current_object_3d_surface_vertices_used
  007fb	e8 00 00 00 00	 call	 _memset
  00800	83 c4 0c	 add	 esp, 12			; 0000000cH

; 1673 : 
; 1674 : 				vertices_used = FALSE;

  00803	c7 45 f0 00 00
	00 00		 mov	 DWORD PTR _vertices_used$[ebp], 0

; 1675 : 
; 1676 : 				if ( current_object_3d_surface->smoothed )

  0080a	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  0080f	66 8b 08	 mov	 cx, WORD PTR [eax]
  00812	66 c1 e9 02	 shr	 cx, 2
  00816	66 83 e1 01	 and	 cx, 1
  0081a	0f b7 d1	 movzx	 edx, cx
  0081d	85 d2		 test	 edx, edx
  0081f	74 6a		 je	 SHORT $LN72@draw_3d_ob

; 1677 : 				{
; 1678 : 					for ( faces_left = current_object_3d_surface->number_of_faces; faces_left > 0; faces_left-- )

  00821	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  00826	0f b7 48 08	 movzx	 ecx, WORD PTR [eax+8]
  0082a	89 4d f8	 mov	 DWORD PTR _faces_left$[ebp], ecx
  0082d	eb 09		 jmp	 SHORT $LN28@draw_3d_ob
$LN26@draw_3d_ob:
  0082f	8b 45 f8	 mov	 eax, DWORD PTR _faces_left$[ebp]
  00832	83 e8 01	 sub	 eax, 1
  00835	89 45 f8	 mov	 DWORD PTR _faces_left$[ebp], eax
$LN28@draw_3d_ob:
  00838	83 7d f8 00	 cmp	 DWORD PTR _faces_left$[ebp], 0
  0083c	7e 3f		 jle	 SHORT $LN27@draw_3d_ob

; 1679 : 					{
; 1680 : 						add_triangle_fan_primitive_to_buffer ( current_object_3d_faces->number_of_points, current_object_3d_surface_point_index, ( unsigned char * ) current_object_3d_point_list );

  0083e	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A ; current_object_3d_point_list
  00843	50		 push	 eax
  00844	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_object_3d_surface_point_index@@3HA ; current_object_3d_surface_point_index
  0084a	51		 push	 ecx
  0084b	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  00851	0f b6 02	 movzx	 eax, BYTE PTR [edx]
  00854	50		 push	 eax
  00855	e8 00 00 00 00	 call	 ?add_triangle_fan_primitive_to_buffer@@YGXHHPAE@Z ; add_triangle_fan_primitive_to_buffer

; 1681 : 						current_object_3d_point_list += current_object_3d_faces->number_of_points;

  0085a	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  0085f	0f b6 08	 movzx	 ecx, BYTE PTR [eax]
  00862	03 0d 00 00 00
	00		 add	 ecx, DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A ; current_object_3d_point_list
  00868	89 0d 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A, ecx ; current_object_3d_point_list

; 1682 : 						current_object_3d_faces++;

  0086e	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  00873	83 c0 01	 add	 eax, 1
  00876	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A, eax ; current_object_3d_faces

; 1683 : 					}

  0087b	eb b2		 jmp	 SHORT $LN26@draw_3d_ob
$LN27@draw_3d_ob:

; 1684 : 					wrender_3d_object_gouraud_surface ( number_of_surface_points );

  0087d	8b 45 fc	 mov	 eax, DWORD PTR _number_of_surface_points$[ebp]
  00880	50		 push	 eax
  00881	e8 00 00 00 00	 call	 ?wrender_3d_object_gouraud_surface@@YGXH@Z ; wrender_3d_object_gouraud_surface

; 1685 : 				}
; 1686 : 				else

  00886	e9 25 01 00 00	 jmp	 $LN36@draw_3d_ob
$LN72@draw_3d_ob:

; 1687 : 				{
; 1688 : 					if ( current_object_3d_surface->polygons )

  0088b	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  00890	66 8b 08	 mov	 cx, WORD PTR [eax]
  00893	66 83 e1 01	 and	 cx, 1
  00897	0f b7 d1	 movzx	 edx, cx
  0089a	85 d2		 test	 edx, edx
  0089c	0f 84 dd 00 00
	00		 je	 $LN74@draw_3d_ob

; 1689 : 					{
; 1690 : 						for ( faces_left = current_object_3d_surface->number_of_faces; faces_left > 0; faces_left-- )

  008a2	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  008a7	0f b7 48 08	 movzx	 ecx, WORD PTR [eax+8]
  008ab	89 4d f8	 mov	 DWORD PTR _faces_left$[ebp], ecx
  008ae	eb 09		 jmp	 SHORT $LN31@draw_3d_ob
$LN29@draw_3d_ob:
  008b0	8b 45 f8	 mov	 eax, DWORD PTR _faces_left$[ebp]
  008b3	83 e8 01	 sub	 eax, 1
  008b6	89 45 f8	 mov	 DWORD PTR _faces_left$[ebp], eax
$LN31@draw_3d_ob:
  008b9	83 7d f8 00	 cmp	 DWORD PTR _faces_left$[ebp], 0
  008bd	0f 8e b1 00 00
	00		 jle	 $LN30@draw_3d_ob

; 1691 : 						{
; 1692 : 							real_colour
; 1693 : 								colour,
; 1694 : 								specular_colour;
; 1695 : 
; 1696 : 							int
; 1697 : 								point_index;
; 1698 : 
; 1699 : 							get_surface_face_colour ( &colour, &specular_colour );

  008c3	8d 45 d0	 lea	 eax, DWORD PTR _specular_colour$3[ebp]
  008c6	50		 push	 eax
  008c7	8d 4d d4	 lea	 ecx, DWORD PTR _colour$4[ebp]
  008ca	51		 push	 ecx
  008cb	e8 00 00 00 00	 call	 ?get_surface_face_colour@@YGXPAUREAL_COLOUR@@0@Z ; get_surface_face_colour

; 1700 : 							add_triangle_fan_primitive_to_buffer ( current_object_3d_faces->number_of_points, current_object_3d_surface_point_index, ( unsigned char * ) current_object_3d_point_list );

  008d0	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A ; current_object_3d_point_list
  008d5	50		 push	 eax
  008d6	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_object_3d_surface_point_index@@3HA ; current_object_3d_surface_point_index
  008dc	51		 push	 ecx
  008dd	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  008e3	0f b6 02	 movzx	 eax, BYTE PTR [edx]
  008e6	50		 push	 eax
  008e7	e8 00 00 00 00	 call	 ?add_triangle_fan_primitive_to_buffer@@YGXHHPAE@Z ; add_triangle_fan_primitive_to_buffer

; 1701 : 							for ( point_index = 0; point_index < current_object_3d_faces->number_of_points; point_index++ )

  008ec	c7 45 cc 00 00
	00 00		 mov	 DWORD PTR _point_index$2[ebp], 0
  008f3	eb 09		 jmp	 SHORT $LN34@draw_3d_ob
$LN32@draw_3d_ob:
  008f5	8b 45 cc	 mov	 eax, DWORD PTR _point_index$2[ebp]
  008f8	83 c0 01	 add	 eax, 1
  008fb	89 45 cc	 mov	 DWORD PTR _point_index$2[ebp], eax
$LN34@draw_3d_ob:
  008fe	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  00903	0f b6 08	 movzx	 ecx, BYTE PTR [eax]
  00906	39 4d cc	 cmp	 DWORD PTR _point_index$2[ebp], ecx
  00909	7d 36		 jge	 SHORT $LN33@draw_3d_ob

; 1702 : 							{
; 1703 : 								int
; 1704 : 									index;
; 1705 : 
; 1706 : 								index = current_object_3d_point_list[point_index].point;

  0090b	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A ; current_object_3d_point_list
  00910	03 45 cc	 add	 eax, DWORD PTR _point_index$2[ebp]
  00913	0f b6 08	 movzx	 ecx, BYTE PTR [eax]
  00916	89 4d c8	 mov	 DWORD PTR _index$1[ebp], ecx

; 1707 : 								current_object_3d_surface_vertices[index].color = colour.colour;

  00919	8b 45 c8	 mov	 eax, DWORD PTR _index$1[ebp]
  0091c	c1 e0 05	 shl	 eax, 5
  0091f	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_object_3d_surface_vertices@@3PAU_D3DTLVERTEX@@A ; current_object_3d_surface_vertices
  00925	8b 55 d4	 mov	 edx, DWORD PTR _colour$4[ebp]
  00928	89 54 01 10	 mov	 DWORD PTR [ecx+eax+16], edx

; 1708 : 								current_object_3d_surface_vertices[index].specular = specular_colour.colour;

  0092c	8b 45 c8	 mov	 eax, DWORD PTR _index$1[ebp]
  0092f	c1 e0 05	 shl	 eax, 5
  00932	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_object_3d_surface_vertices@@3PAU_D3DTLVERTEX@@A ; current_object_3d_surface_vertices
  00938	8b 55 d0	 mov	 edx, DWORD PTR _specular_colour$3[ebp]
  0093b	89 54 01 14	 mov	 DWORD PTR [ecx+eax+20], edx

; 1709 : 							}

  0093f	eb b4		 jmp	 SHORT $LN32@draw_3d_ob
$LN33@draw_3d_ob:

; 1710 : 
; 1711 : 							current_object_3d_face_normal_list++;

  00941	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_face_normal_list@@3PAUPOINT_3D_PLAIN_REFERENCE@@A ; current_object_3d_face_normal_list
  00946	83 c0 02	 add	 eax, 2
  00949	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_face_normal_list@@3PAUPOINT_3D_PLAIN_REFERENCE@@A, eax ; current_object_3d_face_normal_list

; 1712 : 							current_object_3d_point_list += current_object_3d_faces->number_of_points;

  0094e	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  00953	0f b6 08	 movzx	 ecx, BYTE PTR [eax]
  00956	03 0d 00 00 00
	00		 add	 ecx, DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A ; current_object_3d_point_list
  0095c	89 0d 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A, ecx ; current_object_3d_point_list

; 1713 : 							current_object_3d_faces++;

  00962	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  00967	83 c0 01	 add	 eax, 1
  0096a	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A, eax ; current_object_3d_faces

; 1714 : 						}

  0096f	e9 3c ff ff ff	 jmp	 $LN29@draw_3d_ob
$LN30@draw_3d_ob:

; 1715 : 						wrender_3d_object_surface ( number_of_surface_points );

  00974	8b 45 fc	 mov	 eax, DWORD PTR _number_of_surface_points$[ebp]
  00977	50		 push	 eax
  00978	e8 00 00 00 00	 call	 ?wrender_3d_object_surface@@YGXH@Z ; wrender_3d_object_surface

; 1716 : 					}
; 1717 : 					else

  0097d	eb 31		 jmp	 SHORT $LN36@draw_3d_ob
$LN74@draw_3d_ob:

; 1718 : 					{
; 1719 : 						for ( faces_left = current_object_3d_surface->number_of_faces; faces_left > 0; faces_left-- )

  0097f	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  00984	0f b7 48 08	 movzx	 ecx, WORD PTR [eax+8]
  00988	89 4d f8	 mov	 DWORD PTR _faces_left$[ebp], ecx
  0098b	eb 09		 jmp	 SHORT $LN37@draw_3d_ob
$LN35@draw_3d_ob:
  0098d	8b 45 f8	 mov	 eax, DWORD PTR _faces_left$[ebp]
  00990	83 e8 01	 sub	 eax, 1
  00993	89 45 f8	 mov	 DWORD PTR _faces_left$[ebp], eax
$LN37@draw_3d_ob:
  00996	83 7d f8 00	 cmp	 DWORD PTR _faces_left$[ebp], 0
  0099a	7e 14		 jle	 SHORT $LN36@draw_3d_ob

; 1720 : 						{
; 1721 : 							wrender_unclipped_3d_object_plain_line ();

  0099c	e8 00 00 00 00	 call	 ?wrender_unclipped_3d_object_plain_line@@YGXXZ ; wrender_unclipped_3d_object_plain_line

; 1722 : 							current_object_3d_point_list += 2;

  009a1	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A ; current_object_3d_point_list
  009a6	83 c0 02	 add	 eax, 2
  009a9	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A, eax ; current_object_3d_point_list

; 1723 : 						}

  009ae	eb dd		 jmp	 SHORT $LN35@draw_3d_ob
$LN36@draw_3d_ob:

; 1724 : 					}
; 1725 : 				}
; 1726 : 			}
; 1727 : 		}
; 1728 : 
; 1729 : 		current_object_3d_surface_point_list += number_of_surface_points;

  009b0	8b 45 fc	 mov	 eax, DWORD PTR _number_of_surface_points$[ebp]
  009b3	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_object_3d_surface_point_list@@3PAUPOINT_3D_PLAIN_REFERENCE@@A ; current_object_3d_surface_point_list
  009b9	8d 14 41	 lea	 edx, DWORD PTR [ecx+eax*2]
  009bc	89 15 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_surface_point_list@@3PAUPOINT_3D_PLAIN_REFERENCE@@A, edx ; current_object_3d_surface_point_list

; 1730 : 
; 1731 : 		if ( current_object_3d_surface->smoothed )

  009c2	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  009c7	66 8b 08	 mov	 cx, WORD PTR [eax]
  009ca	66 c1 e9 02	 shr	 cx, 2
  009ce	66 83 e1 01	 and	 cx, 1
  009d2	0f b7 d1	 movzx	 edx, cx
  009d5	85 d2		 test	 edx, edx
  009d7	74 12		 je	 SHORT $LN76@draw_3d_ob

; 1732 : 		{
; 1733 : 			current_object_3d_surface_point_normal_list += number_of_surface_points;

  009d9	8b 45 fc	 mov	 eax, DWORD PTR _number_of_surface_points$[ebp]
  009dc	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_object_3d_surface_point_normal_list@@3PAUPOINT_3D_PLAIN_REFERENCE@@A ; current_object_3d_surface_point_normal_list
  009e2	8d 14 41	 lea	 edx, DWORD PTR [ecx+eax*2]
  009e5	89 15 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_surface_point_normal_list@@3PAUPOINT_3D_PLAIN_REFERENCE@@A, edx ; current_object_3d_surface_point_normal_list
$LN76@draw_3d_ob:

; 1734 : 		}
; 1735 : 
; 1736 : 		if ( current_object_3d_surface->textured )

  009eb	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  009f0	66 8b 08	 mov	 cx, WORD PTR [eax]
  009f3	66 c1 e9 03	 shr	 cx, 3
  009f7	66 83 e1 01	 and	 cx, 1
  009fb	0f b7 d1	 movzx	 edx, cx
  009fe	85 d2		 test	 edx, edx
  00a00	74 12		 je	 SHORT $LN77@draw_3d_ob

; 1737 : 		{
; 1738 : 			current_object_3d_surface_point_texture_list += number_of_surface_points;

  00a02	8b 45 fc	 mov	 eax, DWORD PTR _number_of_surface_points$[ebp]
  00a05	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_object_3d_surface_point_texture_list@@3PAUOBJECT_3D_SHORT_TEXTURED_POINT@@A ; current_object_3d_surface_point_texture_list
  00a0b	8d 14 c1	 lea	 edx, DWORD PTR [ecx+eax*8]
  00a0e	89 15 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_surface_point_texture_list@@3PAUOBJECT_3D_SHORT_TEXTURED_POINT@@A, edx ; current_object_3d_surface_point_texture_list
$LN77@draw_3d_ob:

; 1739 : 		}
; 1740 : 
; 1741 : 		if ( current_object_3d_surface->has_luminosity_texture )

  00a14	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  00a19	66 8b 08	 mov	 cx, WORD PTR [eax]
  00a1c	66 c1 e9 04	 shr	 cx, 4
  00a20	66 83 e1 01	 and	 cx, 1
  00a24	0f b7 d1	 movzx	 edx, cx
  00a27	85 d2		 test	 edx, edx
  00a29	74 12		 je	 SHORT $LN78@draw_3d_ob

; 1742 : 		{
; 1743 : 			current_object_3d_surface_point_texture_list += number_of_surface_points;

  00a2b	8b 45 fc	 mov	 eax, DWORD PTR _number_of_surface_points$[ebp]
  00a2e	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_object_3d_surface_point_texture_list@@3PAUOBJECT_3D_SHORT_TEXTURED_POINT@@A ; current_object_3d_surface_point_texture_list
  00a34	8d 14 c1	 lea	 edx, DWORD PTR [ecx+eax*8]
  00a37	89 15 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_surface_point_texture_list@@3PAUOBJECT_3D_SHORT_TEXTURED_POINT@@A, edx ; current_object_3d_surface_point_texture_list
$LN78@draw_3d_ob:

; 1744 : 		}
; 1745 : 
; 1746 : 		current_object_3d_surface++;

  00a3d	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  00a42	83 c0 10	 add	 eax, 16			; 00000010H
  00a45	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A, eax ; current_object_3d_surface

; 1747 : 	}

  00a4a	e9 81 f6 ff ff	 jmp	 $LN2@draw_3d_ob
$LN3@draw_3d_ob:

; 1748 : }

  00a4f	5f		 pop	 edi
  00a50	5e		 pop	 esi
  00a51	5b		 pop	 ebx
  00a52	8b e5		 mov	 esp, ebp
  00a54	5d		 pop	 ebp
  00a55	c2 04 00	 ret	 4
?draw_3d_object_unclipped_faces@@YGXH@Z ENDP		; draw_3d_object_unclipped_faces
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\modules\3d\3dobjdrw.c
;	COMDAT ?draw_3d_object_clipped_faces@@YGXH@Z
_TEXT	SEGMENT
tv148 = -92						; size = 8
tv210 = -88						; size = 4
tv204 = -88						; size = 4
tv198 = -88						; size = 4
tv192 = -88						; size = 4
tv152 = -88						; size = 4
_frame$1 = -20						; size = 4
_frame$2 = -16						; size = 4
_surfaces_left$ = -12					; size = 4
_faces_left$ = -8					; size = 4
_number_of_surface_points$ = -4				; size = 4
_object_number$ = 8					; size = 4
?draw_3d_object_clipped_faces@@YGXH@Z PROC		; draw_3d_object_clipped_faces, COMDAT

; 1071 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 5c	 sub	 esp, 92			; 0000005cH
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 1072 : 	int
; 1073 : 		number_of_surface_points,
; 1074 : 		faces_left,
; 1075 : 		surfaces_left;
; 1076 : 
; 1077 : 	surfaces_left = objects_3d_data[object_number].number_of_surfaces;

  00009	6b 45 08 68	 imul	 eax, DWORD PTR _object_number$[ebp], 104
  0000d	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?objects_3d_data@@3PAUOBJECT_3D@@A ; objects_3d_data
  00013	0f b7 54 01 06	 movzx	 edx, WORD PTR [ecx+eax+6]
  00018	89 55 f4	 mov	 DWORD PTR _surfaces_left$[ebp], edx

; 1078 : 
; 1079 : 	current_object_3d_faces = objects_3d_data[object_number].faces;

  0001b	6b 45 08 68	 imul	 eax, DWORD PTR _object_number$[ebp], 104
  0001f	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?objects_3d_data@@3PAUOBJECT_3D@@A ; objects_3d_data
  00025	8b 54 01 44	 mov	 edx, DWORD PTR [ecx+eax+68]
  00029	89 15 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A, edx ; current_object_3d_faces

; 1080 : 	current_object_3d_surface = objects_3d_data[object_number].surfaces;

  0002f	6b 45 08 68	 imul	 eax, DWORD PTR _object_number$[ebp], 104
  00033	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?objects_3d_data@@3PAUOBJECT_3D@@A ; objects_3d_data
  00039	8b 54 01 50	 mov	 edx, DWORD PTR [ecx+eax+80]
  0003d	89 15 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A, edx ; current_object_3d_surface

; 1081 : 	current_object_3d_point_list = objects_3d_data[object_number].object_faces_point_plain_list;

  00043	6b 45 08 68	 imul	 eax, DWORD PTR _object_number$[ebp], 104
  00047	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?objects_3d_data@@3PAUOBJECT_3D@@A ; objects_3d_data
  0004d	8b 54 01 4c	 mov	 edx, DWORD PTR [ecx+eax+76]
  00051	89 15 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A, edx ; current_object_3d_point_list

; 1082 : 	current_object_3d_face_normal_list = objects_3d_data[object_number].object_face_normal_references;

  00057	6b 45 08 68	 imul	 eax, DWORD PTR _object_number$[ebp], 104
  0005b	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?objects_3d_data@@3PAUOBJECT_3D@@A ; objects_3d_data
  00061	8b 54 01 54	 mov	 edx, DWORD PTR [ecx+eax+84]
  00065	89 15 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_face_normal_list@@3PAUPOINT_3D_PLAIN_REFERENCE@@A, edx ; current_object_3d_face_normal_list

; 1083 : 	current_object_3d_transformed_normals = &transformed_3d_normals[object_3d_points_current_base];

  0006b	a1 00 00 00 00	 mov	 eax, DWORD PTR ?object_3d_points_current_base@@3HA ; object_3d_points_current_base
  00070	8d 0c c5 00 00
	00 00		 lea	 ecx, DWORD PTR ?transformed_3d_normals@@3PAUOBJECT_3D_TRANSFORMED_POINT_NORMAL@@A[eax*8]
  00077	89 0d 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_transformed_normals@@3PAUOBJECT_3D_TRANSFORMED_POINT_NORMAL@@A, ecx ; current_object_3d_transformed_normals

; 1084 : 
; 1085 : 	current_object_3d_surface_point_list = objects_3d_data[object_number].surface_points;

  0007d	6b 45 08 68	 imul	 eax, DWORD PTR _object_number$[ebp], 104
  00081	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?objects_3d_data@@3PAUOBJECT_3D@@A ; objects_3d_data
  00087	8b 54 01 5c	 mov	 edx, DWORD PTR [ecx+eax+92]
  0008b	89 15 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_surface_point_list@@3PAUPOINT_3D_PLAIN_REFERENCE@@A, edx ; current_object_3d_surface_point_list

; 1086 : 	current_object_3d_surface_point_texture_list = objects_3d_data[object_number].surface_texture_points;

  00091	6b 45 08 68	 imul	 eax, DWORD PTR _object_number$[ebp], 104
  00095	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?objects_3d_data@@3PAUOBJECT_3D@@A ; objects_3d_data
  0009b	8b 54 01 58	 mov	 edx, DWORD PTR [ecx+eax+88]
  0009f	89 15 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_surface_point_texture_list@@3PAUOBJECT_3D_SHORT_TEXTURED_POINT@@A, edx ; current_object_3d_surface_point_texture_list

; 1087 : 	current_object_3d_surface_point_normal_list = objects_3d_data[object_number].surface_point_normals;

  000a5	6b 45 08 68	 imul	 eax, DWORD PTR _object_number$[ebp], 104
  000a9	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?objects_3d_data@@3PAUOBJECT_3D@@A ; objects_3d_data
  000af	8b 54 01 60	 mov	 edx, DWORD PTR [ecx+eax+96]
  000b3	89 15 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_surface_point_normal_list@@3PAUPOINT_3D_PLAIN_REFERENCE@@A, edx ; current_object_3d_surface_point_normal_list

; 1088 : 
; 1089 : 	for ( surfaces_left = objects_3d_data[object_number].number_of_surfaces; surfaces_left > 0; surfaces_left-- )

  000b9	6b 45 08 68	 imul	 eax, DWORD PTR _object_number$[ebp], 104
  000bd	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?objects_3d_data@@3PAUOBJECT_3D@@A ; objects_3d_data
  000c3	0f b7 54 01 06	 movzx	 edx, WORD PTR [ecx+eax+6]
  000c8	89 55 f4	 mov	 DWORD PTR _surfaces_left$[ebp], edx
  000cb	eb 09		 jmp	 SHORT $LN4@draw_3d_ob
$LN2@draw_3d_ob:
  000cd	8b 45 f4	 mov	 eax, DWORD PTR _surfaces_left$[ebp]
  000d0	83 e8 01	 sub	 eax, 1
  000d3	89 45 f4	 mov	 DWORD PTR _surfaces_left$[ebp], eax
$LN4@draw_3d_ob:
  000d6	83 7d f4 00	 cmp	 DWORD PTR _surfaces_left$[ebp], 0
  000da	0f 8e ac 09 00
	00		 jle	 $LN3@draw_3d_ob

; 1090 : 	{
; 1091 : 		number_of_surface_points = current_object_3d_surface->number_of_points;

  000e0	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  000e5	0f b6 48 03	 movzx	 ecx, BYTE PTR [eax+3]
  000e9	89 4d fc	 mov	 DWORD PTR _number_of_surface_points$[ebp], ecx

; 1092 : 		if ( number_of_surface_points == 0 )

  000ec	83 7d fc 00	 cmp	 DWORD PTR _number_of_surface_points$[ebp], 0
  000f0	75 07		 jne	 SHORT $LN32@draw_3d_ob

; 1093 : 		{
; 1094 : 			number_of_surface_points = 256;

  000f2	c7 45 fc 00 01
	00 00		 mov	 DWORD PTR _number_of_surface_points$[ebp], 256 ; 00000100H
$LN32@draw_3d_ob:

; 1095 : 		}
; 1096 : 
; 1097 : 		if ( ( current_object_3d_surface->additive ) || ( current_object_3d_surface->translucent ) )

  000f9	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  000fe	66 8b 08	 mov	 cx, WORD PTR [eax]
  00101	66 c1 e9 05	 shr	 cx, 5
  00105	66 83 e1 01	 and	 cx, 1
  00109	0f b7 d1	 movzx	 edx, cx
  0010c	85 d2		 test	 edx, edx
  0010e	75 17		 jne	 SHORT $LN35@draw_3d_ob
  00110	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  00115	66 8b 08	 mov	 cx, WORD PTR [eax]
  00118	66 c1 e9 06	 shr	 cx, 6
  0011c	66 83 e1 01	 and	 cx, 1
  00120	0f b7 d1	 movzx	 edx, cx
  00123	85 d2		 test	 edx, edx
  00125	74 0c		 je	 SHORT $LN33@draw_3d_ob
$LN35@draw_3d_ob:

; 1098 : 		{
; 1099 : 			add_transparent_surface ( TRUE );

  00127	6a 01		 push	 1
  00129	e8 00 00 00 00	 call	 ?add_transparent_surface@@YGXH@Z ; add_transparent_surface

; 1100 : 		}
; 1101 : 		else

  0012e	e9 ba 08 00 00	 jmp	 $LN30@draw_3d_ob
$LN33@draw_3d_ob:

; 1102 : 		{
; 1103 : 			zbuffer_constant = ( current_object_3d_surface->detail ) ? zbuffer_constant_elevated_bias: zbuffer_constant_normal_bias;

  00133	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  00138	66 8b 08	 mov	 cx, WORD PTR [eax]
  0013b	66 d1 e9	 shr	 cx, 1
  0013e	66 83 e1 01	 and	 cx, 1
  00142	0f b7 d1	 movzx	 edx, cx
  00145	85 d2		 test	 edx, edx
  00147	74 0f		 je	 SHORT $LN101@draw_3d_ob
  00149	f2 0f 10 05 00
	00 00 00	 movsd	 xmm0, QWORD PTR ?zbuffer_constant_elevated_bias@@3NA
  00151	f2 0f 11 45 a4	 movsd	 QWORD PTR tv148[ebp], xmm0
  00156	eb 0d		 jmp	 SHORT $LN102@draw_3d_ob
$LN101@draw_3d_ob:
  00158	f2 0f 10 05 00
	00 00 00	 movsd	 xmm0, QWORD PTR ?zbuffer_constant_normal_bias@@3NA
  00160	f2 0f 11 45 a4	 movsd	 QWORD PTR tv148[ebp], xmm0
$LN102@draw_3d_ob:
  00165	f2 0f 10 45 a4	 movsd	 xmm0, QWORD PTR tv148[ebp]
  0016a	f2 0f 11 05 00
	00 00 00	 movsd	 QWORD PTR ?zbuffer_constant@@3NA, xmm0

; 1104 : 			current_object_3d_specular = ( current_object_3d_surface->specularity )	?	specular_rendering_enabled : FALSE;

  00172	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  00177	0f b6 48 0b	 movzx	 ecx, BYTE PTR [eax+11]
  0017b	85 c9		 test	 ecx, ecx
  0017d	74 0b		 je	 SHORT $LN103@draw_3d_ob
  0017f	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?specular_rendering_enabled@@3HA ; specular_rendering_enabled
  00185	89 55 a8	 mov	 DWORD PTR tv152[ebp], edx
  00188	eb 07		 jmp	 SHORT $LN104@draw_3d_ob
$LN103@draw_3d_ob:
  0018a	c7 45 a8 00 00
	00 00		 mov	 DWORD PTR tv152[ebp], 0
$LN104@draw_3d_ob:
  00191	8b 45 a8	 mov	 eax, DWORD PTR tv152[ebp]
  00194	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_specular@@3HA, eax ; current_object_3d_specular

; 1105 : 
; 1106 : 			if ( current_object_3d_surface->textured )

  00199	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  0019e	66 8b 08	 mov	 cx, WORD PTR [eax]
  001a1	66 c1 e9 03	 shr	 cx, 3
  001a5	66 83 e1 01	 and	 cx, 1
  001a9	0f b7 d1	 movzx	 edx, cx
  001ac	85 d2		 test	 edx, edx
  001ae	0f 84 70 06 00
	00		 je	 $LN36@draw_3d_ob

; 1107 : 			{
; 1108 : 				if ( current_object_3d_surface->texture_animation )

  001b4	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  001b9	66 8b 08	 mov	 cx, WORD PTR [eax]
  001bc	66 c1 e9 09	 shr	 cx, 9
  001c0	66 83 e1 01	 and	 cx, 1
  001c4	0f b7 d1	 movzx	 edx, cx
  001c7	85 d2		 test	 edx, edx
  001c9	74 42		 je	 SHORT $LN38@draw_3d_ob

; 1109 : 				{
; 1110 : 					int
; 1111 : 						frame;
; 1112 : 
; 1113 : 					frame = texture_animations[current_object_3d_surface->texture_index].current_frame;

  001cb	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  001d0	0f b7 48 04	 movzx	 ecx, WORD PTR [eax+4]
  001d4	6b d1 0c	 imul	 edx, ecx, 12
  001d7	a1 00 00 00 00	 mov	 eax, DWORD PTR ?texture_animations@@3PAUTEXTURE_ANIMATION_INFORMATION@@A ; texture_animations
  001dc	8b 4c 10 04	 mov	 ecx, DWORD PTR [eax+edx+4]
  001e0	89 4d f0	 mov	 DWORD PTR _frame$2[ebp], ecx

; 1114 : 					current_object_3d_texture = system_textures[ texture_animations[current_object_3d_surface->texture_index].texture_indices[frame] ];

  001e3	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  001e8	0f b7 48 04	 movzx	 ecx, WORD PTR [eax+4]
  001ec	6b d1 0c	 imul	 edx, ecx, 12
  001ef	a1 00 00 00 00	 mov	 eax, DWORD PTR ?texture_animations@@3PAUTEXTURE_ANIMATION_INFORMATION@@A ; texture_animations
  001f4	8b 4c 10 08	 mov	 ecx, DWORD PTR [eax+edx+8]
  001f8	8b 55 f0	 mov	 edx, DWORD PTR _frame$2[ebp]
  001fb	8b 04 91	 mov	 eax, DWORD PTR [ecx+edx*4]
  001fe	8b 0c 85 00 00
	00 00		 mov	 ecx, DWORD PTR ?system_textures@@3PAPAUSCREEN@@A[eax*4]
  00205	89 0d 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_texture@@3PAUSCREEN@@A, ecx ; current_object_3d_texture

; 1115 : 				}
; 1116 : 				else

  0020b	eb 16		 jmp	 SHORT $LN39@draw_3d_ob
$LN38@draw_3d_ob:

; 1117 : 				{
; 1118 : 					current_object_3d_texture = system_textures[current_object_3d_surface->texture_index];

  0020d	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  00212	0f b7 48 04	 movzx	 ecx, WORD PTR [eax+4]
  00216	8b 14 8d 00 00
	00 00		 mov	 edx, DWORD PTR ?system_textures@@3PAPAUSCREEN@@A[ecx*4]
  0021d	89 15 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_texture@@3PAUSCREEN@@A, edx ; current_object_3d_texture
$LN39@draw_3d_ob:

; 1119 : 				}
; 1120 : 				if ( current_object_3d_texture->contains_alpha )

  00223	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_texture@@3PAUSCREEN@@A ; current_object_3d_texture
  00228	66 8b 48 0a	 mov	 cx, WORD PTR [eax+10]
  0022c	66 c1 e9 07	 shr	 cx, 7
  00230	66 83 e1 01	 and	 cx, 1
  00234	0f b7 d1	 movzx	 edx, cx
  00237	85 d2		 test	 edx, edx
  00239	74 0c		 je	 SHORT $LN40@draw_3d_ob

; 1121 : 				{
; 1122 : 					add_transparent_surface ( TRUE );

  0023b	6a 01		 push	 1
  0023d	e8 00 00 00 00	 call	 ?add_transparent_surface@@YGXH@Z ; add_transparent_surface

; 1123 : 				}
; 1124 : 				else

  00242	e9 d8 05 00 00	 jmp	 $LN21@draw_3d_ob
$LN40@draw_3d_ob:

; 1125 : 				{
; 1126 : 					current_object_3d_texture_u_address = ( current_object_3d_surface->texture_wrapped_u ) ? D3DTADDRESS_WRAP: D3DTADDRESS_CLAMP;

  00247	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  0024c	66 8b 08	 mov	 cx, WORD PTR [eax]
  0024f	66 c1 e9 0c	 shr	 cx, 12			; 0000000cH
  00253	66 83 e1 01	 and	 cx, 1
  00257	0f b7 d1	 movzx	 edx, cx
  0025a	85 d2		 test	 edx, edx
  0025c	74 09		 je	 SHORT $LN105@draw_3d_ob
  0025e	c7 45 a8 01 00
	00 00		 mov	 DWORD PTR tv192[ebp], 1
  00265	eb 07		 jmp	 SHORT $LN106@draw_3d_ob
$LN105@draw_3d_ob:
  00267	c7 45 a8 03 00
	00 00		 mov	 DWORD PTR tv192[ebp], 3
$LN106@draw_3d_ob:
  0026e	8b 45 a8	 mov	 eax, DWORD PTR tv192[ebp]
  00271	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_texture_u_address@@3HA, eax ; current_object_3d_texture_u_address

; 1127 : 					current_object_3d_texture_v_address = ( current_object_3d_surface->texture_wrapped_v ) ? D3DTADDRESS_WRAP: D3DTADDRESS_CLAMP;

  00276	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  0027b	66 8b 08	 mov	 cx, WORD PTR [eax]
  0027e	66 c1 e9 0d	 shr	 cx, 13			; 0000000dH
  00282	66 83 e1 01	 and	 cx, 1
  00286	0f b7 d1	 movzx	 edx, cx
  00289	85 d2		 test	 edx, edx
  0028b	74 09		 je	 SHORT $LN107@draw_3d_ob
  0028d	c7 45 a8 01 00
	00 00		 mov	 DWORD PTR tv198[ebp], 1
  00294	eb 07		 jmp	 SHORT $LN108@draw_3d_ob
$LN107@draw_3d_ob:
  00296	c7 45 a8 03 00
	00 00		 mov	 DWORD PTR tv198[ebp], 3
$LN108@draw_3d_ob:
  0029d	8b 45 a8	 mov	 eax, DWORD PTR tv198[ebp]
  002a0	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_texture_v_address@@3HA, eax ; current_object_3d_texture_v_address

; 1128 : 					current_object_3d_texture_filter = ( current_object_3d_surface->texture_filtered ) ? D3DTFG_LINEAR : D3DTFG_POINT;

  002a5	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  002aa	66 8b 08	 mov	 cx, WORD PTR [eax]
  002ad	66 c1 e9 0a	 shr	 cx, 10			; 0000000aH
  002b1	66 83 e1 01	 and	 cx, 1
  002b5	0f b7 d1	 movzx	 edx, cx
  002b8	85 d2		 test	 edx, edx
  002ba	74 09		 je	 SHORT $LN109@draw_3d_ob
  002bc	c7 45 a8 02 00
	00 00		 mov	 DWORD PTR tv204[ebp], 2
  002c3	eb 07		 jmp	 SHORT $LN110@draw_3d_ob
$LN109@draw_3d_ob:
  002c5	c7 45 a8 01 00
	00 00		 mov	 DWORD PTR tv204[ebp], 1
$LN110@draw_3d_ob:
  002cc	8b 45 a8	 mov	 eax, DWORD PTR tv204[ebp]
  002cf	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_texture_filter@@3HA, eax ; current_object_3d_texture_filter

; 1129 : 					current_object_3d_texture_mipmap = ( current_object_3d_surface->texture_mipmapped )	? D3DTFP_POINT : D3DTFP_NONE;

  002d4	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  002d9	66 8b 08	 mov	 cx, WORD PTR [eax]
  002dc	66 c1 e9 0b	 shr	 cx, 11			; 0000000bH
  002e0	66 83 e1 01	 and	 cx, 1
  002e4	0f b7 d1	 movzx	 edx, cx
  002e7	85 d2		 test	 edx, edx
  002e9	74 09		 je	 SHORT $LN111@draw_3d_ob
  002eb	c7 45 a8 02 00
	00 00		 mov	 DWORD PTR tv210[ebp], 2
  002f2	eb 07		 jmp	 SHORT $LN112@draw_3d_ob
$LN111@draw_3d_ob:
  002f4	c7 45 a8 01 00
	00 00		 mov	 DWORD PTR tv210[ebp], 1
$LN112@draw_3d_ob:
  002fb	8b 45 a8	 mov	 eax, DWORD PTR tv210[ebp]
  002fe	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_texture_mipmap@@3HA, eax ; current_object_3d_texture_mipmap

; 1130 : 
; 1131 : 					reset_deferred_state_changes ();

  00303	e8 00 00 00 00	 call	 ?reset_deferred_state_changes@@YGXXZ ; reset_deferred_state_changes

; 1132 : 
; 1133 : #if ALWAYS_SPECULAR_RENDER
; 1134 : 					set_deferred_d3d_int_state ( D3DRENDERSTATE_SPECULARENABLE, TRUE );

  00308	6a 01		 push	 1
  0030a	6a 1d		 push	 29			; 0000001dH
  0030c	e8 00 00 00 00	 call	 ?set_deferred_d3d_int_state@@YGXW4_D3DRENDERSTATETYPE@@K@Z ; set_deferred_d3d_int_state

; 1135 : #else
; 1136 : 					set_deferred_d3d_int_state ( D3DRENDERSTATE_SPECULARENABLE, current_object_3d_specular );
; 1137 : #endif
; 1138 : 
; 1139 : 					set_deferred_d3d_int_state ( D3DRENDERSTATE_SHADEMODE, D3DSHADE_GOURAUD );

  00311	6a 02		 push	 2
  00313	6a 09		 push	 9
  00315	e8 00 00 00 00	 call	 ?set_deferred_d3d_int_state@@YGXW4_D3DRENDERSTATETYPE@@K@Z ; set_deferred_d3d_int_state

; 1140 : 
; 1141 : 					set_deferred_d3d_texture ( 0, current_object_3d_texture );

  0031a	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_texture@@3PAUSCREEN@@A ; current_object_3d_texture
  0031f	50		 push	 eax
  00320	6a 00		 push	 0
  00322	e8 00 00 00 00	 call	 ?set_deferred_d3d_texture@@YGXHPAUSCREEN@@@Z ; set_deferred_d3d_texture

; 1142 : 					set_deferred_d3d_texture_stage_state ( 0, D3DTSS_COLOROP, D3DTOP_MODULATE );

  00327	6a 04		 push	 4
  00329	6a 01		 push	 1
  0032b	6a 00		 push	 0
  0032d	e8 00 00 00 00	 call	 ?set_deferred_d3d_texture_stage_state@@YGXHHH@Z ; set_deferred_d3d_texture_stage_state

; 1143 : 
; 1144 : 					set_deferred_d3d_texture_stage_state ( 0, D3DTSS_ADDRESSU, current_object_3d_texture_u_address );

  00332	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_texture_u_address@@3HA ; current_object_3d_texture_u_address
  00337	50		 push	 eax
  00338	6a 0d		 push	 13			; 0000000dH
  0033a	6a 00		 push	 0
  0033c	e8 00 00 00 00	 call	 ?set_deferred_d3d_texture_stage_state@@YGXHHH@Z ; set_deferred_d3d_texture_stage_state

; 1145 : 					set_deferred_d3d_texture_stage_state ( 0, D3DTSS_ADDRESSV, current_object_3d_texture_v_address );

  00341	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_texture_v_address@@3HA ; current_object_3d_texture_v_address
  00346	50		 push	 eax
  00347	6a 0e		 push	 14			; 0000000eH
  00349	6a 00		 push	 0
  0034b	e8 00 00 00 00	 call	 ?set_deferred_d3d_texture_stage_state@@YGXHHH@Z ; set_deferred_d3d_texture_stage_state

; 1146 : 					set_deferred_d3d_texture_stage_state ( 0, D3DTSS_MAGFILTER, current_object_3d_texture_filter );

  00350	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_texture_filter@@3HA ; current_object_3d_texture_filter
  00355	50		 push	 eax
  00356	6a 10		 push	 16			; 00000010H
  00358	6a 00		 push	 0
  0035a	e8 00 00 00 00	 call	 ?set_deferred_d3d_texture_stage_state@@YGXHHH@Z ; set_deferred_d3d_texture_stage_state

; 1147 : 					set_deferred_d3d_texture_stage_state ( 0, D3DTSS_MINFILTER, current_object_3d_texture_filter );

  0035f	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_texture_filter@@3HA ; current_object_3d_texture_filter
  00364	50		 push	 eax
  00365	6a 11		 push	 17			; 00000011H
  00367	6a 00		 push	 0
  00369	e8 00 00 00 00	 call	 ?set_deferred_d3d_texture_stage_state@@YGXHHH@Z ; set_deferred_d3d_texture_stage_state

; 1148 : 					set_deferred_d3d_texture_stage_state ( 0, D3DTSS_MIPFILTER, current_object_3d_texture_mipmap );

  0036e	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_texture_mipmap@@3HA ; current_object_3d_texture_mipmap
  00373	50		 push	 eax
  00374	6a 12		 push	 18			; 00000012H
  00376	6a 00		 push	 0
  00378	e8 00 00 00 00	 call	 ?set_deferred_d3d_texture_stage_state@@YGXHHH@Z ; set_deferred_d3d_texture_stage_state

; 1149 : 
; 1150 : 					if ( current_object_3d_surface->has_luminosity_texture )

  0037d	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  00382	66 8b 08	 mov	 cx, WORD PTR [eax]
  00385	66 c1 e9 04	 shr	 cx, 4
  00389	66 83 e1 01	 and	 cx, 1
  0038d	0f b7 d1	 movzx	 edx, cx
  00390	85 d2		 test	 edx, edx
  00392	0f 84 be 02 00
	00		 je	 $LN42@draw_3d_ob

; 1151 : 					{
; 1152 : 						if ( current_object_3d_surface->luminosity_texture_animation )

  00398	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  0039d	8a 48 02	 mov	 cl, BYTE PTR [eax+2]
  003a0	80 e1 01	 and	 cl, 1
  003a3	0f b6 d1	 movzx	 edx, cl
  003a6	85 d2		 test	 edx, edx
  003a8	74 42		 je	 SHORT $LN44@draw_3d_ob

; 1153 : 						{
; 1154 : 							int
; 1155 : 								frame;
; 1156 : 
; 1157 : 							frame = texture_animations[current_object_3d_surface->luminosity_texture_index].current_frame;

  003aa	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  003af	0f b7 48 06	 movzx	 ecx, WORD PTR [eax+6]
  003b3	6b d1 0c	 imul	 edx, ecx, 12
  003b6	a1 00 00 00 00	 mov	 eax, DWORD PTR ?texture_animations@@3PAUTEXTURE_ANIMATION_INFORMATION@@A ; texture_animations
  003bb	8b 4c 10 04	 mov	 ecx, DWORD PTR [eax+edx+4]
  003bf	89 4d ec	 mov	 DWORD PTR _frame$1[ebp], ecx

; 1158 : 							current_object_3d_luminosity_texture = system_textures[ texture_animations[current_object_3d_surface->luminosity_texture_index].texture_indices[frame] ];

  003c2	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  003c7	0f b7 48 06	 movzx	 ecx, WORD PTR [eax+6]
  003cb	6b d1 0c	 imul	 edx, ecx, 12
  003ce	a1 00 00 00 00	 mov	 eax, DWORD PTR ?texture_animations@@3PAUTEXTURE_ANIMATION_INFORMATION@@A ; texture_animations
  003d3	8b 4c 10 08	 mov	 ecx, DWORD PTR [eax+edx+8]
  003d7	8b 55 ec	 mov	 edx, DWORD PTR _frame$1[ebp]
  003da	8b 04 91	 mov	 eax, DWORD PTR [ecx+edx*4]
  003dd	8b 0c 85 00 00
	00 00		 mov	 ecx, DWORD PTR ?system_textures@@3PAPAUSCREEN@@A[eax*4]
  003e4	89 0d 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_luminosity_texture@@3PAUSCREEN@@A, ecx ; current_object_3d_luminosity_texture

; 1159 : 						}
; 1160 : 						else

  003ea	eb 16		 jmp	 SHORT $LN45@draw_3d_ob
$LN44@draw_3d_ob:

; 1161 : 						{
; 1162 : 							current_object_3d_luminosity_texture = system_textures[current_object_3d_surface->luminosity_texture_index];

  003ec	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  003f1	0f b7 48 06	 movzx	 ecx, WORD PTR [eax+6]
  003f5	8b 14 8d 00 00
	00 00		 mov	 edx, DWORD PTR ?system_textures@@3PAPAUSCREEN@@A[ecx*4]
  003fc	89 15 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_luminosity_texture@@3PAUSCREEN@@A, edx ; current_object_3d_luminosity_texture
$LN45@draw_3d_ob:

; 1163 : 						}
; 1164 : 
; 1165 : 						if ( current_object_3d_surface->luminosity_texture_wrapped_u )	{ current_object_3d_luminosity_texture_u_address = D3DTADDRESS_WRAP; }

  00402	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  00407	8a 48 02	 mov	 cl, BYTE PTR [eax+2]
  0040a	c0 e9 03	 shr	 cl, 3
  0040d	80 e1 01	 and	 cl, 1
  00410	0f b6 d1	 movzx	 edx, cl
  00413	85 d2		 test	 edx, edx
  00415	74 0c		 je	 SHORT $LN46@draw_3d_ob
  00417	c7 05 00 00 00
	00 01 00 00 00	 mov	 DWORD PTR ?current_object_3d_luminosity_texture_u_address@@3HA, 1 ; current_object_3d_luminosity_texture_u_address
  00421	eb 0a		 jmp	 SHORT $LN47@draw_3d_ob
$LN46@draw_3d_ob:

; 1166 : 						else																				{ current_object_3d_luminosity_texture_u_address = D3DTADDRESS_CLAMP; }

  00423	c7 05 00 00 00
	00 03 00 00 00	 mov	 DWORD PTR ?current_object_3d_luminosity_texture_u_address@@3HA, 3 ; current_object_3d_luminosity_texture_u_address
$LN47@draw_3d_ob:

; 1167 : 
; 1168 : 						if ( current_object_3d_surface->luminosity_texture_wrapped_v )	{ current_object_3d_luminosity_texture_v_address = D3DTADDRESS_WRAP; }

  0042d	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  00432	8a 48 02	 mov	 cl, BYTE PTR [eax+2]
  00435	c0 e9 04	 shr	 cl, 4
  00438	80 e1 01	 and	 cl, 1
  0043b	0f b6 d1	 movzx	 edx, cl
  0043e	85 d2		 test	 edx, edx
  00440	74 0c		 je	 SHORT $LN48@draw_3d_ob
  00442	c7 05 00 00 00
	00 01 00 00 00	 mov	 DWORD PTR ?current_object_3d_luminosity_texture_v_address@@3HA, 1 ; current_object_3d_luminosity_texture_v_address
  0044c	eb 0a		 jmp	 SHORT $LN49@draw_3d_ob
$LN48@draw_3d_ob:

; 1169 : 						else																				{ current_object_3d_luminosity_texture_v_address = D3DTADDRESS_CLAMP; }

  0044e	c7 05 00 00 00
	00 03 00 00 00	 mov	 DWORD PTR ?current_object_3d_luminosity_texture_v_address@@3HA, 3 ; current_object_3d_luminosity_texture_v_address
$LN49@draw_3d_ob:

; 1170 : 
; 1171 : 						if ( current_object_3d_surface->luminosity_texture_filtered )	{ current_object_3d_luminosity_texture_filter = D3DTFG_LINEAR; }

  00458	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  0045d	8a 48 02	 mov	 cl, BYTE PTR [eax+2]
  00460	d0 e9		 shr	 cl, 1
  00462	80 e1 01	 and	 cl, 1
  00465	0f b6 d1	 movzx	 edx, cl
  00468	85 d2		 test	 edx, edx
  0046a	74 0c		 je	 SHORT $LN50@draw_3d_ob
  0046c	c7 05 00 00 00
	00 02 00 00 00	 mov	 DWORD PTR ?current_object_3d_luminosity_texture_filter@@3HA, 2 ; current_object_3d_luminosity_texture_filter
  00476	eb 0a		 jmp	 SHORT $LN51@draw_3d_ob
$LN50@draw_3d_ob:

; 1172 : 						else																				{ current_object_3d_luminosity_texture_filter = D3DTFG_POINT; }

  00478	c7 05 00 00 00
	00 01 00 00 00	 mov	 DWORD PTR ?current_object_3d_luminosity_texture_filter@@3HA, 1 ; current_object_3d_luminosity_texture_filter
$LN51@draw_3d_ob:

; 1173 : 
; 1174 : 		#if ( FORCE_LIGHTMAP_MIPMAPPING )
; 1175 : 						if ( current_object_3d_surface->luminosity_texture_mipmapped )	{ current_object_3d_luminosity_texture_mipmap = D3DTFP_POINT; }

  00482	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  00487	8a 48 02	 mov	 cl, BYTE PTR [eax+2]
  0048a	c0 e9 02	 shr	 cl, 2
  0048d	80 e1 01	 and	 cl, 1
  00490	0f b6 d1	 movzx	 edx, cl
  00493	85 d2		 test	 edx, edx
  00495	74 0c		 je	 SHORT $LN52@draw_3d_ob
  00497	c7 05 00 00 00
	00 02 00 00 00	 mov	 DWORD PTR ?current_object_3d_luminosity_texture_mipmap@@3HA, 2 ; current_object_3d_luminosity_texture_mipmap
  004a1	eb 0a		 jmp	 SHORT $LN53@draw_3d_ob
$LN52@draw_3d_ob:

; 1176 : 						else																				{ current_object_3d_luminosity_texture_mipmap = D3DTFP_POINT; }

  004a3	c7 05 00 00 00
	00 02 00 00 00	 mov	 DWORD PTR ?current_object_3d_luminosity_texture_mipmap@@3HA, 2 ; current_object_3d_luminosity_texture_mipmap
$LN53@draw_3d_ob:

; 1177 : 		#else
; 1178 : 						if ( current_object_3d_surface->luminosity_texture_mipmapped )	{ current_object_3d_luminosity_texture_mipmap = D3DTFP_POINT; }
; 1179 : 						else																				{ current_object_3d_luminosity_texture_mipmap = D3DTFP_NONE; }
; 1180 : 		#endif
; 1181 : 
; 1182 : 						if ( current_object_3d_surface->smoothed )

  004ad	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  004b2	66 8b 08	 mov	 cx, WORD PTR [eax]
  004b5	66 c1 e9 02	 shr	 cx, 2
  004b9	66 83 e1 01	 and	 cx, 1
  004bd	0f b7 d1	 movzx	 edx, cx
  004c0	85 d2		 test	 edx, edx
  004c2	74 7f		 je	 SHORT $LN54@draw_3d_ob

; 1183 : 						{
; 1184 : 							for ( faces_left = current_object_3d_surface->number_of_faces; faces_left > 0; faces_left-- )

  004c4	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  004c9	0f b7 48 08	 movzx	 ecx, WORD PTR [eax+8]
  004cd	89 4d f8	 mov	 DWORD PTR _faces_left$[ebp], ecx
  004d0	eb 09		 jmp	 SHORT $LN7@draw_3d_ob
$LN5@draw_3d_ob:
  004d2	8b 45 f8	 mov	 eax, DWORD PTR _faces_left$[ebp]
  004d5	83 e8 01	 sub	 eax, 1
  004d8	89 45 f8	 mov	 DWORD PTR _faces_left$[ebp], eax
$LN7@draw_3d_ob:
  004db	83 7d f8 00	 cmp	 DWORD PTR _faces_left$[ebp], 0
  004df	7e 5d		 jle	 SHORT $LN6@draw_3d_ob

; 1185 : 							{
; 1186 : 								if ( !outcode_3d_object_surface_polygon ( current_object_3d_faces->number_of_points, 0, &current_object_3d_outcode ) )

  004e1	68 00 00 00 00	 push	 OFFSET ?current_object_3d_outcode@@3HA ; current_object_3d_outcode
  004e6	6a 00		 push	 0
  004e8	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  004ed	0f b6 08	 movzx	 ecx, BYTE PTR [eax]
  004f0	51		 push	 ecx
  004f1	e8 00 00 00 00	 call	 ?outcode_3d_object_surface_polygon@@YGHHHPAH@Z ; outcode_3d_object_surface_polygon
  004f6	85 c0		 test	 eax, eax
  004f8	75 21		 jne	 SHORT $LN58@draw_3d_ob

; 1187 : 								{
; 1188 : 									if ( current_object_3d_outcode == 0 )

  004fa	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?current_object_3d_outcode@@3HA, 0 ; current_object_3d_outcode
  00501	75 0d		 jne	 SHORT $LN57@draw_3d_ob

; 1189 : 									{
; 1190 : 										wrender_unclipped_3d_object_gouraud_textured_lightmap_polygon ( current_object_3d_faces );

  00503	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  00508	50		 push	 eax
  00509	e8 00 00 00 00	 call	 ?wrender_unclipped_3d_object_gouraud_textured_lightmap_polygon@@YGXPAUOBJECT_3D_FACE@@@Z ; wrender_unclipped_3d_object_gouraud_textured_lightmap_polygon

; 1191 : 									}
; 1192 : 									else

  0050e	eb 0b		 jmp	 SHORT $LN58@draw_3d_ob
$LN57@draw_3d_ob:

; 1193 : 									{
; 1194 : 										wrender_clipped_3d_object_gouraud_textured_lightmap_polygon ( current_object_3d_faces );

  00510	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  00515	50		 push	 eax
  00516	e8 00 00 00 00	 call	 ?wrender_clipped_3d_object_gouraud_textured_lightmap_polygon@@YGXPAUOBJECT_3D_FACE@@@Z ; wrender_clipped_3d_object_gouraud_textured_lightmap_polygon
$LN58@draw_3d_ob:

; 1195 : 									}
; 1196 : 								}
; 1197 : 
; 1198 : 								current_object_3d_point_list += current_object_3d_faces->number_of_points;

  0051b	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  00520	0f b6 08	 movzx	 ecx, BYTE PTR [eax]
  00523	03 0d 00 00 00
	00		 add	 ecx, DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A ; current_object_3d_point_list
  00529	89 0d 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A, ecx ; current_object_3d_point_list

; 1199 : 								current_object_3d_faces++;

  0052f	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  00534	83 c0 01	 add	 eax, 1
  00537	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A, eax ; current_object_3d_faces

; 1200 : 							}

  0053c	eb 94		 jmp	 SHORT $LN5@draw_3d_ob
$LN6@draw_3d_ob:

; 1201 : 						}
; 1202 : 						else

  0053e	e9 0e 01 00 00	 jmp	 $LN12@draw_3d_ob
$LN54@draw_3d_ob:

; 1203 : 						{
; 1204 : 							if ( current_object_3d_surface->polygons )

  00543	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  00548	66 8b 08	 mov	 cx, WORD PTR [eax]
  0054b	66 83 e1 01	 and	 cx, 1
  0054f	0f b7 d1	 movzx	 edx, cx
  00552	85 d2		 test	 edx, edx
  00554	0f 84 94 00 00
	00		 je	 $LN59@draw_3d_ob

; 1205 : 							{
; 1206 : 								for ( faces_left = current_object_3d_surface->number_of_faces; faces_left > 0; faces_left-- )

  0055a	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  0055f	0f b7 48 08	 movzx	 ecx, WORD PTR [eax+8]
  00563	89 4d f8	 mov	 DWORD PTR _faces_left$[ebp], ecx
  00566	eb 09		 jmp	 SHORT $LN10@draw_3d_ob
$LN8@draw_3d_ob:
  00568	8b 45 f8	 mov	 eax, DWORD PTR _faces_left$[ebp]
  0056b	83 e8 01	 sub	 eax, 1
  0056e	89 45 f8	 mov	 DWORD PTR _faces_left$[ebp], eax
$LN10@draw_3d_ob:
  00571	83 7d f8 00	 cmp	 DWORD PTR _faces_left$[ebp], 0
  00575	7e 75		 jle	 SHORT $LN9@draw_3d_ob

; 1207 : 								{
; 1208 : 									if ( !outcode_3d_object_surface_polygon ( current_object_3d_faces->number_of_points, current_object_3d_object_base->points_base, &current_object_3d_outcode ) )

  00577	68 00 00 00 00	 push	 OFFSET ?current_object_3d_outcode@@3HA ; current_object_3d_outcode
  0057c	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_object_base@@3PAUOBJECT_3D_INFO@@A ; current_object_3d_object_base
  00581	8b 48 24	 mov	 ecx, DWORD PTR [eax+36]
  00584	51		 push	 ecx
  00585	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  0058b	0f b6 02	 movzx	 eax, BYTE PTR [edx]
  0058e	50		 push	 eax
  0058f	e8 00 00 00 00	 call	 ?outcode_3d_object_surface_polygon@@YGHHHPAH@Z ; outcode_3d_object_surface_polygon
  00594	85 c0		 test	 eax, eax
  00596	75 21		 jne	 SHORT $LN63@draw_3d_ob

; 1209 : 									{
; 1210 : 										if ( current_object_3d_outcode == 0 )

  00598	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?current_object_3d_outcode@@3HA, 0 ; current_object_3d_outcode
  0059f	75 0d		 jne	 SHORT $LN62@draw_3d_ob

; 1211 : 										{
; 1212 : 											wrender_unclipped_3d_object_textured_lightmap_polygon ( current_object_3d_faces );

  005a1	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  005a6	50		 push	 eax
  005a7	e8 00 00 00 00	 call	 ?wrender_unclipped_3d_object_textured_lightmap_polygon@@YGXPAUOBJECT_3D_FACE@@@Z ; wrender_unclipped_3d_object_textured_lightmap_polygon

; 1213 : 										}
; 1214 : 										else

  005ac	eb 0b		 jmp	 SHORT $LN63@draw_3d_ob
$LN62@draw_3d_ob:

; 1215 : 										{
; 1216 : 											wrender_clipped_3d_object_textured_lightmap_polygon ( current_object_3d_faces );

  005ae	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  005b3	50		 push	 eax
  005b4	e8 00 00 00 00	 call	 ?wrender_clipped_3d_object_textured_lightmap_polygon@@YGXPAUOBJECT_3D_FACE@@@Z ; wrender_clipped_3d_object_textured_lightmap_polygon
$LN63@draw_3d_ob:

; 1217 : 										}
; 1218 : 									}
; 1219 : 
; 1220 : 									current_object_3d_face_normal_list++;

  005b9	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_face_normal_list@@3PAUPOINT_3D_PLAIN_REFERENCE@@A ; current_object_3d_face_normal_list
  005be	83 c0 02	 add	 eax, 2
  005c1	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_face_normal_list@@3PAUPOINT_3D_PLAIN_REFERENCE@@A, eax ; current_object_3d_face_normal_list

; 1221 : 									current_object_3d_point_list += current_object_3d_faces->number_of_points;

  005c6	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  005cb	0f b6 08	 movzx	 ecx, BYTE PTR [eax]
  005ce	03 0d 00 00 00
	00		 add	 ecx, DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A ; current_object_3d_point_list
  005d4	89 0d 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A, ecx ; current_object_3d_point_list

; 1222 : 									current_object_3d_faces++;

  005da	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  005df	83 c0 01	 add	 eax, 1
  005e2	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A, eax ; current_object_3d_faces

; 1223 : 								}

  005e7	e9 7c ff ff ff	 jmp	 $LN8@draw_3d_ob
$LN9@draw_3d_ob:

; 1224 : 							}
; 1225 : 							else

  005ec	eb 63		 jmp	 SHORT $LN12@draw_3d_ob
$LN59@draw_3d_ob:

; 1226 : 							{
; 1227 : 								for ( faces_left = current_object_3d_surface->number_of_faces; faces_left > 0; faces_left-- )

  005ee	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  005f3	0f b7 48 08	 movzx	 ecx, WORD PTR [eax+8]
  005f7	89 4d f8	 mov	 DWORD PTR _faces_left$[ebp], ecx
  005fa	eb 09		 jmp	 SHORT $LN13@draw_3d_ob
$LN11@draw_3d_ob:
  005fc	8b 45 f8	 mov	 eax, DWORD PTR _faces_left$[ebp]
  005ff	83 e8 01	 sub	 eax, 1
  00602	89 45 f8	 mov	 DWORD PTR _faces_left$[ebp], eax
$LN13@draw_3d_ob:
  00605	83 7d f8 00	 cmp	 DWORD PTR _faces_left$[ebp], 0
  00609	7e 46		 jle	 SHORT $LN12@draw_3d_ob

; 1228 : 								{
; 1229 : 									if ( d3d_textured_lines )

  0060b	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?d3d_textured_lines@@3HA, 0 ; d3d_textured_lines
  00612	74 2e		 je	 SHORT $LN67@draw_3d_ob

; 1230 : 									{
; 1231 : 										if ( !outcode_3d_object_surface_polygon ( 2, current_object_3d_object_base->points_base, &current_object_3d_outcode ) )

  00614	68 00 00 00 00	 push	 OFFSET ?current_object_3d_outcode@@3HA ; current_object_3d_outcode
  00619	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_object_base@@3PAUOBJECT_3D_INFO@@A ; current_object_3d_object_base
  0061e	8b 48 24	 mov	 ecx, DWORD PTR [eax+36]
  00621	51		 push	 ecx
  00622	6a 02		 push	 2
  00624	e8 00 00 00 00	 call	 ?outcode_3d_object_surface_polygon@@YGHHHPAH@Z ; outcode_3d_object_surface_polygon
  00629	85 c0		 test	 eax, eax
  0062b	75 15		 jne	 SHORT $LN67@draw_3d_ob

; 1232 : 										{
; 1233 : 											if ( current_object_3d_outcode == 0 )

  0062d	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?current_object_3d_outcode@@3HA, 0 ; current_object_3d_outcode
  00634	75 07		 jne	 SHORT $LN66@draw_3d_ob

; 1234 : 											{
; 1235 : 												wrender_unclipped_3d_object_textured_line ();

  00636	e8 00 00 00 00	 call	 ?wrender_unclipped_3d_object_textured_line@@YGXXZ ; wrender_unclipped_3d_object_textured_line

; 1236 : 											}
; 1237 : 											else

  0063b	eb 05		 jmp	 SHORT $LN67@draw_3d_ob
$LN66@draw_3d_ob:

; 1238 : 											{
; 1239 : 												wrender_clipped_3d_object_textured_line ();

  0063d	e8 00 00 00 00	 call	 ?wrender_clipped_3d_object_textured_line@@YGXXZ ; wrender_clipped_3d_object_textured_line
$LN67@draw_3d_ob:

; 1240 : 											}
; 1241 : 										}
; 1242 : 									}
; 1243 : 									current_object_3d_point_list += 2;

  00642	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A ; current_object_3d_point_list
  00647	83 c0 02	 add	 eax, 2
  0064a	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A, eax ; current_object_3d_point_list

; 1244 : 								}

  0064f	eb ab		 jmp	 SHORT $LN11@draw_3d_ob
$LN12@draw_3d_ob:

; 1245 : 							}
; 1246 : 						}
; 1247 : 					}
; 1248 : 					else

  00651	e9 c9 01 00 00	 jmp	 $LN21@draw_3d_ob
$LN42@draw_3d_ob:

; 1249 : 					{
; 1250 : 						if ( current_object_3d_surface->smoothed )

  00656	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  0065b	66 8b 08	 mov	 cx, WORD PTR [eax]
  0065e	66 c1 e9 02	 shr	 cx, 2
  00662	66 83 e1 01	 and	 cx, 1
  00666	0f b7 d1	 movzx	 edx, cx
  00669	85 d2		 test	 edx, edx
  0066b	0f 84 a0 00 00
	00		 je	 $LN68@draw_3d_ob

; 1251 : 						{
; 1252 : 							for ( faces_left = current_object_3d_surface->number_of_faces; faces_left > 0; faces_left-- )

  00671	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  00676	0f b7 48 08	 movzx	 ecx, WORD PTR [eax+8]
  0067a	89 4d f8	 mov	 DWORD PTR _faces_left$[ebp], ecx
  0067d	eb 09		 jmp	 SHORT $LN16@draw_3d_ob
$LN14@draw_3d_ob:
  0067f	8b 45 f8	 mov	 eax, DWORD PTR _faces_left$[ebp]
  00682	83 e8 01	 sub	 eax, 1
  00685	89 45 f8	 mov	 DWORD PTR _faces_left$[ebp], eax
$LN16@draw_3d_ob:
  00688	83 7d f8 00	 cmp	 DWORD PTR _faces_left$[ebp], 0
  0068c	7e 7e		 jle	 SHORT $LN15@draw_3d_ob

; 1253 : 							{
; 1254 : 								if ( !outcode_3d_object_surface_polygon ( current_object_3d_faces->number_of_points, current_object_3d_object_base->points_base, &current_object_3d_outcode ) )

  0068e	68 00 00 00 00	 push	 OFFSET ?current_object_3d_outcode@@3HA ; current_object_3d_outcode
  00693	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_object_base@@3PAUOBJECT_3D_INFO@@A ; current_object_3d_object_base
  00698	8b 48 24	 mov	 ecx, DWORD PTR [eax+36]
  0069b	51		 push	 ecx
  0069c	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  006a2	0f b6 02	 movzx	 eax, BYTE PTR [edx]
  006a5	50		 push	 eax
  006a6	e8 00 00 00 00	 call	 ?outcode_3d_object_surface_polygon@@YGHHHPAH@Z ; outcode_3d_object_surface_polygon
  006ab	85 c0		 test	 eax, eax
  006ad	75 37		 jne	 SHORT $LN72@draw_3d_ob

; 1255 : 								{
; 1256 : 									if ( current_object_3d_outcode == 0 )

  006af	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?current_object_3d_outcode@@3HA, 0 ; current_object_3d_outcode
  006b6	75 23		 jne	 SHORT $LN71@draw_3d_ob

; 1257 : 									{
; 1258 : 										if ( current_object_3d_specular )

  006b8	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?current_object_3d_specular@@3HA, 0 ; current_object_3d_specular
  006bf	74 0d		 je	 SHORT $LN73@draw_3d_ob

; 1259 : 										{
; 1260 : 											wrender_unclipped_3d_object_gouraud_textured_polygon ( current_object_3d_faces );

  006c1	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  006c6	50		 push	 eax
  006c7	e8 00 00 00 00	 call	 ?wrender_unclipped_3d_object_gouraud_textured_polygon@@YGXPAUOBJECT_3D_FACE@@@Z ; wrender_unclipped_3d_object_gouraud_textured_polygon

; 1261 : 										}
; 1262 : 										else

  006cc	eb 0b		 jmp	 SHORT $LN74@draw_3d_ob
$LN73@draw_3d_ob:

; 1263 : 										{
; 1264 : 											wrender_unclipped_3d_object_gouraud_textured_nospecular_polygon ( current_object_3d_faces );

  006ce	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  006d3	50		 push	 eax
  006d4	e8 00 00 00 00	 call	 ?wrender_unclipped_3d_object_gouraud_textured_nospecular_polygon@@YGXPAUOBJECT_3D_FACE@@@Z ; wrender_unclipped_3d_object_gouraud_textured_nospecular_polygon
$LN74@draw_3d_ob:

; 1265 : 										}
; 1266 : 									}
; 1267 : 									else

  006d9	eb 0b		 jmp	 SHORT $LN72@draw_3d_ob
$LN71@draw_3d_ob:

; 1268 : 									{
; 1269 : 										wrender_clipped_3d_object_gouraud_textured_polygon ( current_object_3d_faces );

  006db	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  006e0	50		 push	 eax
  006e1	e8 00 00 00 00	 call	 ?wrender_clipped_3d_object_gouraud_textured_polygon@@YGXPAUOBJECT_3D_FACE@@@Z ; wrender_clipped_3d_object_gouraud_textured_polygon
$LN72@draw_3d_ob:

; 1270 : 									}
; 1271 : 								}
; 1272 : 
; 1273 : 								current_object_3d_point_list += current_object_3d_faces->number_of_points;

  006e6	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  006eb	0f b6 08	 movzx	 ecx, BYTE PTR [eax]
  006ee	03 0d 00 00 00
	00		 add	 ecx, DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A ; current_object_3d_point_list
  006f4	89 0d 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A, ecx ; current_object_3d_point_list

; 1274 : 								current_object_3d_faces++;

  006fa	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  006ff	83 c0 01	 add	 eax, 1
  00702	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A, eax ; current_object_3d_faces

; 1275 : 							}

  00707	e9 73 ff ff ff	 jmp	 $LN14@draw_3d_ob
$LN15@draw_3d_ob:

; 1276 : 						}
; 1277 : 						else

  0070c	e9 0e 01 00 00	 jmp	 $LN21@draw_3d_ob
$LN68@draw_3d_ob:

; 1278 : 						{
; 1279 : 							if ( current_object_3d_surface->polygons )

  00711	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  00716	66 8b 08	 mov	 cx, WORD PTR [eax]
  00719	66 83 e1 01	 and	 cx, 1
  0071d	0f b7 d1	 movzx	 edx, cx
  00720	85 d2		 test	 edx, edx
  00722	0f 84 94 00 00
	00		 je	 $LN75@draw_3d_ob

; 1280 : 							{
; 1281 : 								for ( faces_left = current_object_3d_surface->number_of_faces; faces_left > 0; faces_left-- )

  00728	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  0072d	0f b7 48 08	 movzx	 ecx, WORD PTR [eax+8]
  00731	89 4d f8	 mov	 DWORD PTR _faces_left$[ebp], ecx
  00734	eb 09		 jmp	 SHORT $LN19@draw_3d_ob
$LN17@draw_3d_ob:
  00736	8b 45 f8	 mov	 eax, DWORD PTR _faces_left$[ebp]
  00739	83 e8 01	 sub	 eax, 1
  0073c	89 45 f8	 mov	 DWORD PTR _faces_left$[ebp], eax
$LN19@draw_3d_ob:
  0073f	83 7d f8 00	 cmp	 DWORD PTR _faces_left$[ebp], 0
  00743	7e 75		 jle	 SHORT $LN18@draw_3d_ob

; 1282 : 								{
; 1283 : 									if ( !outcode_3d_object_surface_polygon ( current_object_3d_faces->number_of_points, current_object_3d_object_base->points_base, &current_object_3d_outcode ) )

  00745	68 00 00 00 00	 push	 OFFSET ?current_object_3d_outcode@@3HA ; current_object_3d_outcode
  0074a	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_object_base@@3PAUOBJECT_3D_INFO@@A ; current_object_3d_object_base
  0074f	8b 48 24	 mov	 ecx, DWORD PTR [eax+36]
  00752	51		 push	 ecx
  00753	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  00759	0f b6 02	 movzx	 eax, BYTE PTR [edx]
  0075c	50		 push	 eax
  0075d	e8 00 00 00 00	 call	 ?outcode_3d_object_surface_polygon@@YGHHHPAH@Z ; outcode_3d_object_surface_polygon
  00762	85 c0		 test	 eax, eax
  00764	75 21		 jne	 SHORT $LN79@draw_3d_ob

; 1284 : 									{
; 1285 : 										if ( current_object_3d_outcode == 0 )

  00766	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?current_object_3d_outcode@@3HA, 0 ; current_object_3d_outcode
  0076d	75 0d		 jne	 SHORT $LN78@draw_3d_ob

; 1286 : 										{
; 1287 : 											wrender_unclipped_3d_object_textured_polygon ( current_object_3d_faces );

  0076f	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  00774	50		 push	 eax
  00775	e8 00 00 00 00	 call	 ?wrender_unclipped_3d_object_textured_polygon@@YGXPAUOBJECT_3D_FACE@@@Z ; wrender_unclipped_3d_object_textured_polygon

; 1288 : 										}
; 1289 : 										else

  0077a	eb 0b		 jmp	 SHORT $LN79@draw_3d_ob
$LN78@draw_3d_ob:

; 1290 : 										{
; 1291 : 											wrender_clipped_3d_object_textured_polygon ( current_object_3d_faces );

  0077c	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  00781	50		 push	 eax
  00782	e8 00 00 00 00	 call	 ?wrender_clipped_3d_object_textured_polygon@@YGXPAUOBJECT_3D_FACE@@@Z ; wrender_clipped_3d_object_textured_polygon
$LN79@draw_3d_ob:

; 1292 : 										}
; 1293 : 									}
; 1294 : 									current_object_3d_face_normal_list++;

  00787	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_face_normal_list@@3PAUPOINT_3D_PLAIN_REFERENCE@@A ; current_object_3d_face_normal_list
  0078c	83 c0 02	 add	 eax, 2
  0078f	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_face_normal_list@@3PAUPOINT_3D_PLAIN_REFERENCE@@A, eax ; current_object_3d_face_normal_list

; 1295 : 									current_object_3d_point_list += current_object_3d_faces->number_of_points;

  00794	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  00799	0f b6 08	 movzx	 ecx, BYTE PTR [eax]
  0079c	03 0d 00 00 00
	00		 add	 ecx, DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A ; current_object_3d_point_list
  007a2	89 0d 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A, ecx ; current_object_3d_point_list

; 1296 : 									current_object_3d_faces++;

  007a8	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  007ad	83 c0 01	 add	 eax, 1
  007b0	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A, eax ; current_object_3d_faces

; 1297 : 								}

  007b5	e9 7c ff ff ff	 jmp	 $LN17@draw_3d_ob
$LN18@draw_3d_ob:

; 1298 : 							}
; 1299 : 							else

  007ba	eb 63		 jmp	 SHORT $LN21@draw_3d_ob
$LN75@draw_3d_ob:

; 1300 : 							{
; 1301 : 								for ( faces_left = current_object_3d_surface->number_of_faces; faces_left > 0; faces_left-- )

  007bc	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  007c1	0f b7 48 08	 movzx	 ecx, WORD PTR [eax+8]
  007c5	89 4d f8	 mov	 DWORD PTR _faces_left$[ebp], ecx
  007c8	eb 09		 jmp	 SHORT $LN22@draw_3d_ob
$LN20@draw_3d_ob:
  007ca	8b 45 f8	 mov	 eax, DWORD PTR _faces_left$[ebp]
  007cd	83 e8 01	 sub	 eax, 1
  007d0	89 45 f8	 mov	 DWORD PTR _faces_left$[ebp], eax
$LN22@draw_3d_ob:
  007d3	83 7d f8 00	 cmp	 DWORD PTR _faces_left$[ebp], 0
  007d7	7e 46		 jle	 SHORT $LN21@draw_3d_ob

; 1302 : 								{
; 1303 : 									if ( d3d_textured_lines )

  007d9	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?d3d_textured_lines@@3HA, 0 ; d3d_textured_lines
  007e0	74 2e		 je	 SHORT $LN83@draw_3d_ob

; 1304 : 									{
; 1305 : 										if ( !outcode_3d_object_surface_polygon ( 2, current_object_3d_object_base->points_base, &current_object_3d_outcode ) )

  007e2	68 00 00 00 00	 push	 OFFSET ?current_object_3d_outcode@@3HA ; current_object_3d_outcode
  007e7	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_object_base@@3PAUOBJECT_3D_INFO@@A ; current_object_3d_object_base
  007ec	8b 48 24	 mov	 ecx, DWORD PTR [eax+36]
  007ef	51		 push	 ecx
  007f0	6a 02		 push	 2
  007f2	e8 00 00 00 00	 call	 ?outcode_3d_object_surface_polygon@@YGHHHPAH@Z ; outcode_3d_object_surface_polygon
  007f7	85 c0		 test	 eax, eax
  007f9	75 15		 jne	 SHORT $LN83@draw_3d_ob

; 1306 : 										{
; 1307 : 											if ( current_object_3d_outcode == 0 )

  007fb	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?current_object_3d_outcode@@3HA, 0 ; current_object_3d_outcode
  00802	75 07		 jne	 SHORT $LN82@draw_3d_ob

; 1308 : 											{
; 1309 : 												wrender_unclipped_3d_object_textured_line ();

  00804	e8 00 00 00 00	 call	 ?wrender_unclipped_3d_object_textured_line@@YGXXZ ; wrender_unclipped_3d_object_textured_line

; 1310 : 											}
; 1311 : 											else

  00809	eb 05		 jmp	 SHORT $LN83@draw_3d_ob
$LN82@draw_3d_ob:

; 1312 : 											{
; 1313 : 												wrender_clipped_3d_object_textured_line ();

  0080b	e8 00 00 00 00	 call	 ?wrender_clipped_3d_object_textured_line@@YGXXZ ; wrender_clipped_3d_object_textured_line
$LN83@draw_3d_ob:

; 1314 : 											}
; 1315 : 										}
; 1316 : 									}
; 1317 : 									current_object_3d_point_list += 2;

  00810	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A ; current_object_3d_point_list
  00815	83 c0 02	 add	 eax, 2
  00818	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A, eax ; current_object_3d_point_list

; 1318 : 								}

  0081d	eb ab		 jmp	 SHORT $LN20@draw_3d_ob
$LN21@draw_3d_ob:

; 1319 : 							}
; 1320 : 						}
; 1321 : 					}
; 1322 : 				}
; 1323 : 			}
; 1324 : 			else

  0081f	e9 c9 01 00 00	 jmp	 $LN30@draw_3d_ob
$LN36@draw_3d_ob:

; 1325 : 			{
; 1326 : 				reset_deferred_state_changes ();

  00824	e8 00 00 00 00	 call	 ?reset_deferred_state_changes@@YGXXZ ; reset_deferred_state_changes

; 1327 : 
; 1328 : #if ALWAYS_SPECULAR_RENDER
; 1329 : 				set_deferred_d3d_int_state ( D3DRENDERSTATE_SPECULARENABLE, TRUE );

  00829	6a 01		 push	 1
  0082b	6a 1d		 push	 29			; 0000001dH
  0082d	e8 00 00 00 00	 call	 ?set_deferred_d3d_int_state@@YGXW4_D3DRENDERSTATETYPE@@K@Z ; set_deferred_d3d_int_state

; 1330 : #else
; 1331 : 				set_deferred_d3d_int_state ( D3DRENDERSTATE_SPECULARENABLE, current_object_3d_specular );
; 1332 : #endif
; 1333 : 
; 1334 : 				set_deferred_d3d_int_state ( D3DRENDERSTATE_SHADEMODE, D3DSHADE_GOURAUD );

  00832	6a 02		 push	 2
  00834	6a 09		 push	 9
  00836	e8 00 00 00 00	 call	 ?set_deferred_d3d_int_state@@YGXW4_D3DRENDERSTATETYPE@@K@Z ; set_deferred_d3d_int_state

; 1335 : 
; 1336 : 				set_deferred_d3d_texture_stage_state ( 0, D3DTSS_COLOROP, D3DTOP_DISABLE );

  0083b	6a 01		 push	 1
  0083d	6a 01		 push	 1
  0083f	6a 00		 push	 0
  00841	e8 00 00 00 00	 call	 ?set_deferred_d3d_texture_stage_state@@YGXHHH@Z ; set_deferred_d3d_texture_stage_state

; 1337 : 
; 1338 : 				if ( current_object_3d_surface->smoothed )

  00846	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  0084b	66 8b 08	 mov	 cx, WORD PTR [eax]
  0084e	66 c1 e9 02	 shr	 cx, 2
  00852	66 83 e1 01	 and	 cx, 1
  00856	0f b7 d1	 movzx	 edx, cx
  00859	85 d2		 test	 edx, edx
  0085b	0f 84 87 00 00
	00		 je	 $LN84@draw_3d_ob

; 1339 : 				{
; 1340 : 					for ( faces_left = current_object_3d_surface->number_of_faces; faces_left > 0; faces_left-- )

  00861	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  00866	0f b7 48 08	 movzx	 ecx, WORD PTR [eax+8]
  0086a	89 4d f8	 mov	 DWORD PTR _faces_left$[ebp], ecx
  0086d	eb 09		 jmp	 SHORT $LN25@draw_3d_ob
$LN23@draw_3d_ob:
  0086f	8b 45 f8	 mov	 eax, DWORD PTR _faces_left$[ebp]
  00872	83 e8 01	 sub	 eax, 1
  00875	89 45 f8	 mov	 DWORD PTR _faces_left$[ebp], eax
$LN25@draw_3d_ob:
  00878	83 7d f8 00	 cmp	 DWORD PTR _faces_left$[ebp], 0
  0087c	7e 65		 jle	 SHORT $LN24@draw_3d_ob

; 1341 : 					{
; 1342 : 						if ( !outcode_3d_object_surface_polygon ( current_object_3d_faces->number_of_points, current_object_3d_object_base->points_base, &current_object_3d_outcode ) )

  0087e	68 00 00 00 00	 push	 OFFSET ?current_object_3d_outcode@@3HA ; current_object_3d_outcode
  00883	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_object_base@@3PAUOBJECT_3D_INFO@@A ; current_object_3d_object_base
  00888	8b 48 24	 mov	 ecx, DWORD PTR [eax+36]
  0088b	51		 push	 ecx
  0088c	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  00892	0f b6 02	 movzx	 eax, BYTE PTR [edx]
  00895	50		 push	 eax
  00896	e8 00 00 00 00	 call	 ?outcode_3d_object_surface_polygon@@YGHHHPAH@Z ; outcode_3d_object_surface_polygon
  0089b	85 c0		 test	 eax, eax
  0089d	75 21		 jne	 SHORT $LN88@draw_3d_ob

; 1343 : 						{
; 1344 : 							if ( current_object_3d_outcode == 0 )

  0089f	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?current_object_3d_outcode@@3HA, 0 ; current_object_3d_outcode
  008a6	75 0d		 jne	 SHORT $LN87@draw_3d_ob

; 1345 : 							{
; 1346 : 								wrender_unclipped_3d_object_gouraud_polygon ( current_object_3d_faces );

  008a8	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  008ad	50		 push	 eax
  008ae	e8 00 00 00 00	 call	 ?wrender_unclipped_3d_object_gouraud_polygon@@YGXPAUOBJECT_3D_FACE@@@Z ; wrender_unclipped_3d_object_gouraud_polygon

; 1347 : 							}
; 1348 : 							else

  008b3	eb 0b		 jmp	 SHORT $LN88@draw_3d_ob
$LN87@draw_3d_ob:

; 1349 : 							{
; 1350 : 								wrender_clipped_3d_object_gouraud_polygon ( current_object_3d_faces );

  008b5	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  008ba	50		 push	 eax
  008bb	e8 00 00 00 00	 call	 ?wrender_clipped_3d_object_gouraud_polygon@@YGXPAUOBJECT_3D_FACE@@@Z ; wrender_clipped_3d_object_gouraud_polygon
$LN88@draw_3d_ob:

; 1351 : 							}
; 1352 : 						}
; 1353 : 
; 1354 : 						current_object_3d_point_list += current_object_3d_faces->number_of_points;

  008c0	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  008c5	0f b6 08	 movzx	 ecx, BYTE PTR [eax]
  008c8	03 0d 00 00 00
	00		 add	 ecx, DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A ; current_object_3d_point_list
  008ce	89 0d 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A, ecx ; current_object_3d_point_list

; 1355 : 						current_object_3d_faces++;

  008d4	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  008d9	83 c0 01	 add	 eax, 1
  008dc	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A, eax ; current_object_3d_faces

; 1356 : 					}

  008e1	eb 8c		 jmp	 SHORT $LN23@draw_3d_ob
$LN24@draw_3d_ob:

; 1357 : 				}
; 1358 : 				else

  008e3	e9 05 01 00 00	 jmp	 $LN30@draw_3d_ob
$LN84@draw_3d_ob:

; 1359 : 				{
; 1360 : 					if ( current_object_3d_surface->polygons )

  008e8	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  008ed	66 8b 08	 mov	 cx, WORD PTR [eax]
  008f0	66 83 e1 01	 and	 cx, 1
  008f4	0f b7 d1	 movzx	 edx, cx
  008f7	85 d2		 test	 edx, edx
  008f9	0f 84 94 00 00
	00		 je	 $LN89@draw_3d_ob

; 1361 : 					{
; 1362 : 						for ( faces_left = current_object_3d_surface->number_of_faces; faces_left > 0; faces_left-- )

  008ff	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  00904	0f b7 48 08	 movzx	 ecx, WORD PTR [eax+8]
  00908	89 4d f8	 mov	 DWORD PTR _faces_left$[ebp], ecx
  0090b	eb 09		 jmp	 SHORT $LN28@draw_3d_ob
$LN26@draw_3d_ob:
  0090d	8b 45 f8	 mov	 eax, DWORD PTR _faces_left$[ebp]
  00910	83 e8 01	 sub	 eax, 1
  00913	89 45 f8	 mov	 DWORD PTR _faces_left$[ebp], eax
$LN28@draw_3d_ob:
  00916	83 7d f8 00	 cmp	 DWORD PTR _faces_left$[ebp], 0
  0091a	7e 75		 jle	 SHORT $LN27@draw_3d_ob

; 1363 : 						{
; 1364 : 							if ( !outcode_3d_object_surface_polygon ( current_object_3d_faces->number_of_points, current_object_3d_object_base->points_base, &current_object_3d_outcode ) )

  0091c	68 00 00 00 00	 push	 OFFSET ?current_object_3d_outcode@@3HA ; current_object_3d_outcode
  00921	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_object_base@@3PAUOBJECT_3D_INFO@@A ; current_object_3d_object_base
  00926	8b 48 24	 mov	 ecx, DWORD PTR [eax+36]
  00929	51		 push	 ecx
  0092a	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  00930	0f b6 02	 movzx	 eax, BYTE PTR [edx]
  00933	50		 push	 eax
  00934	e8 00 00 00 00	 call	 ?outcode_3d_object_surface_polygon@@YGHHHPAH@Z ; outcode_3d_object_surface_polygon
  00939	85 c0		 test	 eax, eax
  0093b	75 21		 jne	 SHORT $LN93@draw_3d_ob

; 1365 : 							{
; 1366 : 								if ( current_object_3d_outcode == 0 )

  0093d	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?current_object_3d_outcode@@3HA, 0 ; current_object_3d_outcode
  00944	75 0d		 jne	 SHORT $LN92@draw_3d_ob

; 1367 : 								{
; 1368 : 									wrender_unclipped_3d_object_polygon ( current_object_3d_faces );

  00946	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  0094b	50		 push	 eax
  0094c	e8 00 00 00 00	 call	 ?wrender_unclipped_3d_object_polygon@@YGXPAUOBJECT_3D_FACE@@@Z ; wrender_unclipped_3d_object_polygon

; 1369 : 								}
; 1370 : 								else

  00951	eb 0b		 jmp	 SHORT $LN93@draw_3d_ob
$LN92@draw_3d_ob:

; 1371 : 								{
; 1372 : 									wrender_clipped_3d_object_polygon ( current_object_3d_faces );

  00953	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  00958	50		 push	 eax
  00959	e8 00 00 00 00	 call	 ?wrender_clipped_3d_object_polygon@@YGXPAUOBJECT_3D_FACE@@@Z ; wrender_clipped_3d_object_polygon
$LN93@draw_3d_ob:

; 1373 : 								}
; 1374 : 							}
; 1375 : 
; 1376 : 							current_object_3d_face_normal_list++;

  0095e	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_face_normal_list@@3PAUPOINT_3D_PLAIN_REFERENCE@@A ; current_object_3d_face_normal_list
  00963	83 c0 02	 add	 eax, 2
  00966	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_face_normal_list@@3PAUPOINT_3D_PLAIN_REFERENCE@@A, eax ; current_object_3d_face_normal_list

; 1377 : 							current_object_3d_point_list += current_object_3d_faces->number_of_points;

  0096b	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  00970	0f b6 08	 movzx	 ecx, BYTE PTR [eax]
  00973	03 0d 00 00 00
	00		 add	 ecx, DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A ; current_object_3d_point_list
  00979	89 0d 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A, ecx ; current_object_3d_point_list

; 1378 : 							current_object_3d_faces++;

  0097f	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A ; current_object_3d_faces
  00984	83 c0 01	 add	 eax, 1
  00987	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_faces@@3PAUOBJECT_3D_FACE@@A, eax ; current_object_3d_faces

; 1379 : 						}

  0098c	e9 7c ff ff ff	 jmp	 $LN26@draw_3d_ob
$LN27@draw_3d_ob:

; 1380 : 					}
; 1381 : 					else

  00991	eb 5a		 jmp	 SHORT $LN30@draw_3d_ob
$LN89@draw_3d_ob:

; 1382 : 					{
; 1383 : 						for ( faces_left = current_object_3d_surface->number_of_faces; faces_left > 0; faces_left-- )

  00993	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  00998	0f b7 48 08	 movzx	 ecx, WORD PTR [eax+8]
  0099c	89 4d f8	 mov	 DWORD PTR _faces_left$[ebp], ecx
  0099f	eb 09		 jmp	 SHORT $LN31@draw_3d_ob
$LN29@draw_3d_ob:
  009a1	8b 45 f8	 mov	 eax, DWORD PTR _faces_left$[ebp]
  009a4	83 e8 01	 sub	 eax, 1
  009a7	89 45 f8	 mov	 DWORD PTR _faces_left$[ebp], eax
$LN31@draw_3d_ob:
  009aa	83 7d f8 00	 cmp	 DWORD PTR _faces_left$[ebp], 0
  009ae	7e 3d		 jle	 SHORT $LN30@draw_3d_ob

; 1384 : 						{
; 1385 : 							if ( !outcode_3d_object_surface_polygon ( 2, current_object_3d_object_base->points_base, &current_object_3d_outcode ) )

  009b0	68 00 00 00 00	 push	 OFFSET ?current_object_3d_outcode@@3HA ; current_object_3d_outcode
  009b5	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_object_base@@3PAUOBJECT_3D_INFO@@A ; current_object_3d_object_base
  009ba	8b 48 24	 mov	 ecx, DWORD PTR [eax+36]
  009bd	51		 push	 ecx
  009be	6a 02		 push	 2
  009c0	e8 00 00 00 00	 call	 ?outcode_3d_object_surface_polygon@@YGHHHPAH@Z ; outcode_3d_object_surface_polygon
  009c5	85 c0		 test	 eax, eax
  009c7	75 15		 jne	 SHORT $LN96@draw_3d_ob

; 1386 : 							{
; 1387 : 								if ( current_object_3d_outcode == 0 )

  009c9	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?current_object_3d_outcode@@3HA, 0 ; current_object_3d_outcode
  009d0	75 07		 jne	 SHORT $LN95@draw_3d_ob

; 1388 : 								{
; 1389 : 									wrender_unclipped_3d_object_plain_line ();

  009d2	e8 00 00 00 00	 call	 ?wrender_unclipped_3d_object_plain_line@@YGXXZ ; wrender_unclipped_3d_object_plain_line

; 1390 : 								}
; 1391 : 								else

  009d7	eb 05		 jmp	 SHORT $LN96@draw_3d_ob
$LN95@draw_3d_ob:

; 1392 : 								{
; 1393 : 									wrender_clipped_3d_object_plain_line ();

  009d9	e8 00 00 00 00	 call	 ?wrender_clipped_3d_object_plain_line@@YGXXZ ; wrender_clipped_3d_object_plain_line
$LN96@draw_3d_ob:

; 1394 : 								}
; 1395 : 							}
; 1396 : 							current_object_3d_point_list += 2;

  009de	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A ; current_object_3d_point_list
  009e3	83 c0 02	 add	 eax, 2
  009e6	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_point_list@@3PAUPOINT_3D_SHORT_REFERENCE@@A, eax ; current_object_3d_point_list

; 1397 : 						}

  009eb	eb b4		 jmp	 SHORT $LN29@draw_3d_ob
$LN30@draw_3d_ob:

; 1398 : 					}
; 1399 : 				}
; 1400 : 			}
; 1401 : 		}
; 1402 : 
; 1403 : 		current_object_3d_surface_point_list += number_of_surface_points;

  009ed	8b 45 fc	 mov	 eax, DWORD PTR _number_of_surface_points$[ebp]
  009f0	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_object_3d_surface_point_list@@3PAUPOINT_3D_PLAIN_REFERENCE@@A ; current_object_3d_surface_point_list
  009f6	8d 14 41	 lea	 edx, DWORD PTR [ecx+eax*2]
  009f9	89 15 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_surface_point_list@@3PAUPOINT_3D_PLAIN_REFERENCE@@A, edx ; current_object_3d_surface_point_list

; 1404 : 
; 1405 : 		if ( current_object_3d_surface->smoothed )

  009ff	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  00a04	66 8b 08	 mov	 cx, WORD PTR [eax]
  00a07	66 c1 e9 02	 shr	 cx, 2
  00a0b	66 83 e1 01	 and	 cx, 1
  00a0f	0f b7 d1	 movzx	 edx, cx
  00a12	85 d2		 test	 edx, edx
  00a14	74 12		 je	 SHORT $LN97@draw_3d_ob

; 1406 : 		{
; 1407 : 			current_object_3d_surface_point_normal_list += number_of_surface_points;

  00a16	8b 45 fc	 mov	 eax, DWORD PTR _number_of_surface_points$[ebp]
  00a19	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_object_3d_surface_point_normal_list@@3PAUPOINT_3D_PLAIN_REFERENCE@@A ; current_object_3d_surface_point_normal_list
  00a1f	8d 14 41	 lea	 edx, DWORD PTR [ecx+eax*2]
  00a22	89 15 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_surface_point_normal_list@@3PAUPOINT_3D_PLAIN_REFERENCE@@A, edx ; current_object_3d_surface_point_normal_list
$LN97@draw_3d_ob:

; 1408 : 		}
; 1409 : 
; 1410 : 		if ( current_object_3d_surface->textured )

  00a28	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  00a2d	66 8b 08	 mov	 cx, WORD PTR [eax]
  00a30	66 c1 e9 03	 shr	 cx, 3
  00a34	66 83 e1 01	 and	 cx, 1
  00a38	0f b7 d1	 movzx	 edx, cx
  00a3b	85 d2		 test	 edx, edx
  00a3d	74 12		 je	 SHORT $LN98@draw_3d_ob

; 1411 : 		{
; 1412 : 			current_object_3d_surface_point_texture_list += number_of_surface_points;

  00a3f	8b 45 fc	 mov	 eax, DWORD PTR _number_of_surface_points$[ebp]
  00a42	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_object_3d_surface_point_texture_list@@3PAUOBJECT_3D_SHORT_TEXTURED_POINT@@A ; current_object_3d_surface_point_texture_list
  00a48	8d 14 c1	 lea	 edx, DWORD PTR [ecx+eax*8]
  00a4b	89 15 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_surface_point_texture_list@@3PAUOBJECT_3D_SHORT_TEXTURED_POINT@@A, edx ; current_object_3d_surface_point_texture_list
$LN98@draw_3d_ob:

; 1413 : 		}
; 1414 : 
; 1415 : 		if ( current_object_3d_surface->has_luminosity_texture )

  00a51	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  00a56	66 8b 08	 mov	 cx, WORD PTR [eax]
  00a59	66 c1 e9 04	 shr	 cx, 4
  00a5d	66 83 e1 01	 and	 cx, 1
  00a61	0f b7 d1	 movzx	 edx, cx
  00a64	85 d2		 test	 edx, edx
  00a66	74 12		 je	 SHORT $LN99@draw_3d_ob

; 1416 : 		{
; 1417 : 			current_object_3d_surface_point_texture_list += number_of_surface_points;

  00a68	8b 45 fc	 mov	 eax, DWORD PTR _number_of_surface_points$[ebp]
  00a6b	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_object_3d_surface_point_texture_list@@3PAUOBJECT_3D_SHORT_TEXTURED_POINT@@A ; current_object_3d_surface_point_texture_list
  00a71	8d 14 c1	 lea	 edx, DWORD PTR [ecx+eax*8]
  00a74	89 15 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_surface_point_texture_list@@3PAUOBJECT_3D_SHORT_TEXTURED_POINT@@A, edx ; current_object_3d_surface_point_texture_list
$LN99@draw_3d_ob:

; 1418 : 		}
; 1419 : 
; 1420 : 		current_object_3d_surface++;

  00a7a	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A ; current_object_3d_surface
  00a7f	83 c0 10	 add	 eax, 16			; 00000010H
  00a82	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_surface@@3PAUFACE_SURFACE_DESCRIPTION@@A, eax ; current_object_3d_surface

; 1421 : 	}

  00a87	e9 41 f6 ff ff	 jmp	 $LN2@draw_3d_ob
$LN3@draw_3d_ob:

; 1422 : }

  00a8c	5f		 pop	 edi
  00a8d	5e		 pop	 esi
  00a8e	5b		 pop	 ebx
  00a8f	8b e5		 mov	 esp, ebp
  00a91	5d		 pop	 ebp
  00a92	c2 04 00	 ret	 4
?draw_3d_object_clipped_faces@@YGXH@Z ENDP		; draw_3d_object_clipped_faces
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\modules\3d\3dobjdrw.c
;	COMDAT ?draw_wbuffered_3d_object@@YGXPAUOBJECT_3D_INSTANCE@@HH@Z
_TEXT	SEGMENT
_position$1 = -140					; size = 12
_count$2 = -128						; size = 4
_sprite$3 = -124					; size = 32
_buffer$4 = -92						; size = 4
_count$5 = -88						; size = 4
_object_outcode$6 = -84					; size = 4
_rel_pos$7 = -80					; size = 12
_z$8 = -68						; size = 4
_y$9 = -64						; size = 4
_x$10 = -60						; size = 4
_ifog_intensity$11 = -56				; size = 4
_fog_intensity$12 = -52					; size = 4
_scene$ = -48						; size = 4
_object_unit_pos$ = -44					; size = 12
_object_camera_direction$ = -32				; size = 12
_object_camera_position$ = -20				; size = 12
_light$ = -8						; size = 4
_object_number$ = -4					; size = 4
_obj$ = 8						; size = 4
_object_is_flat$ = 12					; size = 4
_infrared_override$ = 16				; size = 4
?draw_wbuffered_3d_object@@YGXPAUOBJECT_3D_INSTANCE@@HH@Z PROC ; draw_wbuffered_3d_object, COMDAT

; 123  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec cc 00 00
	00		 sub	 esp, 204		; 000000ccH
  00009	53		 push	 ebx
  0000a	56		 push	 esi
  0000b	57		 push	 edi

; 124  : 
; 125  : 	int
; 126  : 		object_number;
; 127  : 
; 128  : 	light_3d_source
; 129  : 		*light;
; 130  : 
; 131  : 	vec3d
; 132  : 		object_camera_position,
; 133  : 		object_camera_direction,
; 134  : 		object_unit_pos;
; 135  : 
; 136  : 	object_3d_scene_database_entry
; 137  : 		*scene;
; 138  : 
; 139  : 	set_d3d_texture_batching ( TRUE );

  0000c	6a 01		 push	 1
  0000e	e8 00 00 00 00	 call	 ?set_d3d_texture_batching@@YGXH@Z ; set_d3d_texture_batching

; 140  : 
; 141  : 	set_d3d_int_state ( D3DRENDERSTATE_CULLMODE, D3DCULL_CCW );

  00013	6a 03		 push	 3
  00015	6a 16		 push	 22			; 00000016H
  00017	e8 00 00 00 00	 call	 ?set_d3d_int_state@@YGXW4_D3DRENDERSTATETYPE@@K@Z ; set_d3d_int_state

; 142  : 
; 143  : 	//
; 144  : 	// Set the scene pointer
; 145  : 	//
; 146  : 
; 147  : 	scene = &objects_3d_scene_database[obj->object_number];

  0001c	8b 45 08	 mov	 eax, DWORD PTR _obj$[ebp]
  0001f	69 48 04 e0 00
	00 00		 imul	 ecx, DWORD PTR [eax+4], 224
  00026	03 0d 00 00 00
	00		 add	 ecx, DWORD PTR ?objects_3d_scene_database@@3PAUOBJECT_3D_SCENE_DATABASE_ENTRY@@A ; objects_3d_scene_database
  0002c	89 4d d0	 mov	 DWORD PTR _scene$[ebp], ecx

; 148  : 
; 149  : 	//
; 150  : 	// Set up the texture animations for this object.
; 151  : 	//
; 152  : 
; 153  : 	initialise_object_texture_animations ( obj );

  0002f	8b 45 08	 mov	 eax, DWORD PTR _obj$[ebp]
  00032	50		 push	 eax
  00033	e8 00 00 00 00	 call	 ?initialise_object_texture_animations@@YGXPAUOBJECT_3D_INSTANCE@@@Z ; initialise_object_texture_animations

; 154  : 
; 155  : 	//
; 156  : 	// Set up the object drawing global variables
; 157  : 	//
; 158  : 
; 159  : 	object_3d_points_current_base = 0;

  00038	c7 05 00 00 00
	00 00 00 00 00	 mov	 DWORD PTR ?object_3d_points_current_base@@3HA, 0 ; object_3d_points_current_base

; 160  : 	object_3d_object_current_base = 0;

  00042	c7 05 00 00 00
	00 00 00 00 00	 mov	 DWORD PTR ?object_3d_object_current_base@@3HA, 0 ; object_3d_object_current_base

; 161  : 	object_3d_light_3d_current_base = 0;

  0004c	c7 05 00 00 00
	00 00 00 00 00	 mov	 DWORD PTR ?object_3d_light_3d_current_base@@3HA, 0 ; object_3d_light_3d_current_base

; 162  : 
; 163  : 	current_3d_object_is_flat = object_is_flat;

  00056	8b 45 0c	 mov	 eax, DWORD PTR _object_is_flat$[ebp]
  00059	a3 00 00 00 00	 mov	 DWORD PTR ?current_3d_object_is_flat@@3HA, eax ; current_3d_object_is_flat

; 164  : 
; 165  : 	current_object_3d_light_maps_enabled = obj->object_internal_lighting;

  0005e	8b 45 08	 mov	 eax, DWORD PTR _obj$[ebp]
  00061	8b 48 50	 mov	 ecx, DWORD PTR [eax+80]
  00064	c1 e9 03	 shr	 ecx, 3
  00067	83 e1 01	 and	 ecx, 1
  0006a	89 0d 00 00 00
	00		 mov	 DWORD PTR ?current_object_3d_light_maps_enabled@@3HA, ecx ; current_object_3d_light_maps_enabled

; 166  : 
; 167  : 	//
; 168  : 	// Get the object's position relative to the camera
; 169  : 	//
; 170  : 
; 171  : 	current_object_3d_relative_position = &obj->view_position;

  00070	8b 45 08	 mov	 eax, DWORD PTR _obj$[ebp]
  00073	83 c0 38	 add	 eax, 56			; 00000038H
  00076	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_relative_position@@3PAUVEC3D@@A, eax ; current_object_3d_relative_position

; 172  : 
; 173  : 	{
; 174  : 
; 175  : 		float
; 176  : 			fog_intensity;
; 177  : 
; 178  : 		int
; 179  : 			ifog_intensity;
; 180  : 
; 181  : 		fog_intensity = get_fog_distance_value ( current_object_3d_relative_position->z );

  0007b	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_relative_position@@3PAUVEC3D@@A ; current_object_3d_relative_position
  00080	51		 push	 ecx
  00081	f3 0f 10 40 08	 movss	 xmm0, DWORD PTR [eax+8]
  00086	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  0008b	e8 00 00 00 00	 call	 ?get_fog_distance_value@@YGMM@Z ; get_fog_distance_value
  00090	d9 5d cc	 fstp	 DWORD PTR _fog_intensity$12[ebp]

; 182  : 
; 183  : 		asm_convert_float_to_int ( fog_intensity, &ifog_intensity );

  00093	8d 45 c8	 lea	 eax, DWORD PTR _ifog_intensity$11[ebp]
  00096	50		 push	 eax
  00097	51		 push	 ecx
  00098	f3 0f 10 45 cc	 movss	 xmm0, DWORD PTR _fog_intensity$12[ebp]
  0009d	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  000a2	e8 00 00 00 00	 call	 ?asm_convert_float_to_int@@YGXMPAH@Z ; asm_convert_float_to_int

; 184  : 
; 185  : 		set_d3d_fog_face_intensity ( ifog_intensity );

  000a7	8b 45 c8	 mov	 eax, DWORD PTR _ifog_intensity$11[ebp]
  000aa	50		 push	 eax
  000ab	e8 00 00 00 00	 call	 ?set_d3d_fog_face_intensity@@YGXH@Z ; set_d3d_fog_face_intensity

; 186  : 	}
; 187  : 
; 188  : 	//
; 189  : 	// Set the main objects' scaling values
; 190  : 	//
; 191  : 
; 192  : 	object_3d_scale.x = obj->relative_scale.x;

  000b0	8b 45 08	 mov	 eax, DWORD PTR _obj$[ebp]
  000b3	f3 0f 10 40 44	 movss	 xmm0, DWORD PTR [eax+68]
  000b8	f3 0f 11 05 00
	00 00 00	 movss	 DWORD PTR ?object_3d_scale@@3UVEC3D@@A, xmm0

; 193  : 	object_3d_scale.y = obj->relative_scale.y;

  000c0	8b 45 08	 mov	 eax, DWORD PTR _obj$[ebp]
  000c3	f3 0f 10 40 48	 movss	 xmm0, DWORD PTR [eax+72]
  000c8	f3 0f 11 05 04
	00 00 00	 movss	 DWORD PTR ?object_3d_scale@@3UVEC3D@@A+4, xmm0

; 194  : 	object_3d_scale.z = obj->relative_scale.z;

  000d0	8b 45 08	 mov	 eax, DWORD PTR _obj$[ebp]
  000d3	f3 0f 10 40 4c	 movss	 xmm0, DWORD PTR [eax+76]
  000d8	f3 0f 11 05 08
	00 00 00	 movss	 DWORD PTR ?object_3d_scale@@3UVEC3D@@A+8, xmm0

; 195  : 
; 196  : 	//
; 197  : 	// Set the object dissolve variables
; 198  : 	//
; 199  : 
; 200  : 	current_object_3d_dissolve_value = obj->object_dissolve_value;

  000e0	8b 45 08	 mov	 eax, DWORD PTR _obj$[ebp]
  000e3	8b 48 50	 mov	 ecx, DWORD PTR [eax+80]
  000e6	c1 e9 04	 shr	 ecx, 4
  000e9	81 e1 ff 00 00
	00		 and	 ecx, 255		; 000000ffH
  000ef	88 0d 00 00 00
	00		 mov	 BYTE PTR ?current_object_3d_dissolve_value@@3EA, cl ; current_object_3d_dissolve_value

; 201  : 	current_object_3d_dissolve_factor = current_object_3d_dissolve_value;

  000f5	0f b6 05 00 00
	00 00		 movzx	 eax, BYTE PTR ?current_object_3d_dissolve_value@@3EA ; current_object_3d_dissolve_value
  000fc	f3 0f 2a c0	 cvtsi2ss xmm0, eax
  00100	f3 0f 11 05 00
	00 00 00	 movss	 DWORD PTR ?current_object_3d_dissolve_factor@@3MA, xmm0

; 202  : 	current_object_3d_dissolve_factor /= 255.0;

  00108	f3 0f 5a 05 00
	00 00 00	 cvtss2sd xmm0, DWORD PTR ?current_object_3d_dissolve_factor@@3MA
  00110	f2 0f 5e 05 00
	00 00 00	 divsd	 xmm0, QWORD PTR __real@406fe00000000000
  00118	f2 0f 5a c0	 cvtsd2ss xmm0, xmm0
  0011c	f3 0f 11 05 00
	00 00 00	 movss	 DWORD PTR ?current_object_3d_dissolve_factor@@3MA, xmm0

; 203  : 
; 204  : 	//
; 205  : 	// Calculate the object's rotation matrix, to transform its 3d points relative to the view.
; 206  : 	//
; 207  : 
; 208  : 	rotation_3d[0][0] = ( obj->vp.xv.x * visual_3d_vp->xv.x + obj->vp.xv.y * visual_3d_vp->xv.y + obj->vp.xv.z * visual_3d_vp->xv.z );

  00124	8b 45 08	 mov	 eax, DWORD PTR _obj$[ebp]
  00127	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  0012d	f3 0f 10 40 14	 movss	 xmm0, DWORD PTR [eax+20]
  00132	f3 0f 59 41 0c	 mulss	 xmm0, DWORD PTR [ecx+12]
  00137	8b 55 08	 mov	 edx, DWORD PTR _obj$[ebp]
  0013a	a1 00 00 00 00	 mov	 eax, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  0013f	f3 0f 10 4a 18	 movss	 xmm1, DWORD PTR [edx+24]
  00144	f3 0f 59 48 10	 mulss	 xmm1, DWORD PTR [eax+16]
  00149	f3 0f 58 c1	 addss	 xmm0, xmm1
  0014d	8b 4d 08	 mov	 ecx, DWORD PTR _obj$[ebp]
  00150	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  00156	f3 0f 10 49 1c	 movss	 xmm1, DWORD PTR [ecx+28]
  0015b	f3 0f 59 4a 14	 mulss	 xmm1, DWORD PTR [edx+20]
  00160	f3 0f 58 c1	 addss	 xmm0, xmm1
  00164	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  00169	6b c8 00	 imul	 ecx, eax, 0
  0016c	ba 04 00 00 00	 mov	 edx, 4
  00171	6b c2 00	 imul	 eax, edx, 0
  00174	f3 0f 11 84 01
	00 00 00 00	 movss	 DWORD PTR ?rotation_3d@@3PAY02MA[ecx+eax], xmm0

; 209  : 	rotation_3d[0][1] = ( obj->vp.xv.x * visual_3d_vp->yv.x + obj->vp.xv.y * visual_3d_vp->yv.y + obj->vp.xv.z * visual_3d_vp->yv.z );

  0017d	8b 45 08	 mov	 eax, DWORD PTR _obj$[ebp]
  00180	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  00186	f3 0f 10 40 14	 movss	 xmm0, DWORD PTR [eax+20]
  0018b	f3 0f 59 41 18	 mulss	 xmm0, DWORD PTR [ecx+24]
  00190	8b 55 08	 mov	 edx, DWORD PTR _obj$[ebp]
  00193	a1 00 00 00 00	 mov	 eax, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  00198	f3 0f 10 4a 18	 movss	 xmm1, DWORD PTR [edx+24]
  0019d	f3 0f 59 48 1c	 mulss	 xmm1, DWORD PTR [eax+28]
  001a2	f3 0f 58 c1	 addss	 xmm0, xmm1
  001a6	8b 4d 08	 mov	 ecx, DWORD PTR _obj$[ebp]
  001a9	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  001af	f3 0f 10 49 1c	 movss	 xmm1, DWORD PTR [ecx+28]
  001b4	f3 0f 59 4a 20	 mulss	 xmm1, DWORD PTR [edx+32]
  001b9	f3 0f 58 c1	 addss	 xmm0, xmm1
  001bd	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  001c2	6b c8 00	 imul	 ecx, eax, 0
  001c5	ba 04 00 00 00	 mov	 edx, 4
  001ca	c1 e2 00	 shl	 edx, 0
  001cd	f3 0f 11 84 11
	00 00 00 00	 movss	 DWORD PTR ?rotation_3d@@3PAY02MA[ecx+edx], xmm0

; 210  : 	rotation_3d[0][2] = ( obj->vp.xv.x * visual_3d_vp->zv.x + obj->vp.xv.y * visual_3d_vp->zv.y + obj->vp.xv.z * visual_3d_vp->zv.z );

  001d6	8b 45 08	 mov	 eax, DWORD PTR _obj$[ebp]
  001d9	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  001df	f3 0f 10 40 14	 movss	 xmm0, DWORD PTR [eax+20]
  001e4	f3 0f 59 41 24	 mulss	 xmm0, DWORD PTR [ecx+36]
  001e9	8b 55 08	 mov	 edx, DWORD PTR _obj$[ebp]
  001ec	a1 00 00 00 00	 mov	 eax, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  001f1	f3 0f 10 4a 18	 movss	 xmm1, DWORD PTR [edx+24]
  001f6	f3 0f 59 48 28	 mulss	 xmm1, DWORD PTR [eax+40]
  001fb	f3 0f 58 c1	 addss	 xmm0, xmm1
  001ff	8b 4d 08	 mov	 ecx, DWORD PTR _obj$[ebp]
  00202	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  00208	f3 0f 10 49 1c	 movss	 xmm1, DWORD PTR [ecx+28]
  0020d	f3 0f 59 4a 2c	 mulss	 xmm1, DWORD PTR [edx+44]
  00212	f3 0f 58 c1	 addss	 xmm0, xmm1
  00216	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  0021b	6b c8 00	 imul	 ecx, eax, 0
  0021e	ba 04 00 00 00	 mov	 edx, 4
  00223	d1 e2		 shl	 edx, 1
  00225	f3 0f 11 84 11
	00 00 00 00	 movss	 DWORD PTR ?rotation_3d@@3PAY02MA[ecx+edx], xmm0

; 211  : 
; 212  : 	rotation_3d[1][0] = ( obj->vp.yv.x * visual_3d_vp->xv.x + obj->vp.yv.y * visual_3d_vp->xv.y + obj->vp.yv.z * visual_3d_vp->xv.z );

  0022e	8b 45 08	 mov	 eax, DWORD PTR _obj$[ebp]
  00231	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  00237	f3 0f 10 40 20	 movss	 xmm0, DWORD PTR [eax+32]
  0023c	f3 0f 59 41 0c	 mulss	 xmm0, DWORD PTR [ecx+12]
  00241	8b 55 08	 mov	 edx, DWORD PTR _obj$[ebp]
  00244	a1 00 00 00 00	 mov	 eax, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  00249	f3 0f 10 4a 24	 movss	 xmm1, DWORD PTR [edx+36]
  0024e	f3 0f 59 48 10	 mulss	 xmm1, DWORD PTR [eax+16]
  00253	f3 0f 58 c1	 addss	 xmm0, xmm1
  00257	8b 4d 08	 mov	 ecx, DWORD PTR _obj$[ebp]
  0025a	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  00260	f3 0f 10 49 28	 movss	 xmm1, DWORD PTR [ecx+40]
  00265	f3 0f 59 4a 14	 mulss	 xmm1, DWORD PTR [edx+20]
  0026a	f3 0f 58 c1	 addss	 xmm0, xmm1
  0026e	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  00273	c1 e0 00	 shl	 eax, 0
  00276	b9 04 00 00 00	 mov	 ecx, 4
  0027b	6b d1 00	 imul	 edx, ecx, 0
  0027e	f3 0f 11 84 10
	00 00 00 00	 movss	 DWORD PTR ?rotation_3d@@3PAY02MA[eax+edx], xmm0

; 213  : 	rotation_3d[1][1] = ( obj->vp.yv.x * visual_3d_vp->yv.x + obj->vp.yv.y * visual_3d_vp->yv.y + obj->vp.yv.z * visual_3d_vp->yv.z );

  00287	8b 45 08	 mov	 eax, DWORD PTR _obj$[ebp]
  0028a	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  00290	f3 0f 10 40 20	 movss	 xmm0, DWORD PTR [eax+32]
  00295	f3 0f 59 41 18	 mulss	 xmm0, DWORD PTR [ecx+24]
  0029a	8b 55 08	 mov	 edx, DWORD PTR _obj$[ebp]
  0029d	a1 00 00 00 00	 mov	 eax, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  002a2	f3 0f 10 4a 24	 movss	 xmm1, DWORD PTR [edx+36]
  002a7	f3 0f 59 48 1c	 mulss	 xmm1, DWORD PTR [eax+28]
  002ac	f3 0f 58 c1	 addss	 xmm0, xmm1
  002b0	8b 4d 08	 mov	 ecx, DWORD PTR _obj$[ebp]
  002b3	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  002b9	f3 0f 10 49 28	 movss	 xmm1, DWORD PTR [ecx+40]
  002be	f3 0f 59 4a 20	 mulss	 xmm1, DWORD PTR [edx+32]
  002c3	f3 0f 58 c1	 addss	 xmm0, xmm1
  002c7	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  002cc	c1 e0 00	 shl	 eax, 0
  002cf	b9 04 00 00 00	 mov	 ecx, 4
  002d4	c1 e1 00	 shl	 ecx, 0
  002d7	f3 0f 11 84 08
	00 00 00 00	 movss	 DWORD PTR ?rotation_3d@@3PAY02MA[eax+ecx], xmm0

; 214  : 	rotation_3d[1][2] = ( obj->vp.yv.x * visual_3d_vp->zv.x + obj->vp.yv.y * visual_3d_vp->zv.y + obj->vp.yv.z * visual_3d_vp->zv.z );

  002e0	8b 45 08	 mov	 eax, DWORD PTR _obj$[ebp]
  002e3	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  002e9	f3 0f 10 40 20	 movss	 xmm0, DWORD PTR [eax+32]
  002ee	f3 0f 59 41 24	 mulss	 xmm0, DWORD PTR [ecx+36]
  002f3	8b 55 08	 mov	 edx, DWORD PTR _obj$[ebp]
  002f6	a1 00 00 00 00	 mov	 eax, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  002fb	f3 0f 10 4a 24	 movss	 xmm1, DWORD PTR [edx+36]
  00300	f3 0f 59 48 28	 mulss	 xmm1, DWORD PTR [eax+40]
  00305	f3 0f 58 c1	 addss	 xmm0, xmm1
  00309	8b 4d 08	 mov	 ecx, DWORD PTR _obj$[ebp]
  0030c	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  00312	f3 0f 10 49 28	 movss	 xmm1, DWORD PTR [ecx+40]
  00317	f3 0f 59 4a 2c	 mulss	 xmm1, DWORD PTR [edx+44]
  0031c	f3 0f 58 c1	 addss	 xmm0, xmm1
  00320	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  00325	c1 e0 00	 shl	 eax, 0
  00328	b9 04 00 00 00	 mov	 ecx, 4
  0032d	d1 e1		 shl	 ecx, 1
  0032f	f3 0f 11 84 08
	00 00 00 00	 movss	 DWORD PTR ?rotation_3d@@3PAY02MA[eax+ecx], xmm0

; 215  : 
; 216  : 	rotation_3d[2][0] = ( obj->vp.zv.x * visual_3d_vp->xv.x + obj->vp.zv.y * visual_3d_vp->xv.y + obj->vp.zv.z * visual_3d_vp->xv.z );

  00338	8b 45 08	 mov	 eax, DWORD PTR _obj$[ebp]
  0033b	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  00341	f3 0f 10 40 2c	 movss	 xmm0, DWORD PTR [eax+44]
  00346	f3 0f 59 41 0c	 mulss	 xmm0, DWORD PTR [ecx+12]
  0034b	8b 55 08	 mov	 edx, DWORD PTR _obj$[ebp]
  0034e	a1 00 00 00 00	 mov	 eax, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  00353	f3 0f 10 4a 30	 movss	 xmm1, DWORD PTR [edx+48]
  00358	f3 0f 59 48 10	 mulss	 xmm1, DWORD PTR [eax+16]
  0035d	f3 0f 58 c1	 addss	 xmm0, xmm1
  00361	8b 4d 08	 mov	 ecx, DWORD PTR _obj$[ebp]
  00364	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  0036a	f3 0f 10 49 34	 movss	 xmm1, DWORD PTR [ecx+52]
  0036f	f3 0f 59 4a 14	 mulss	 xmm1, DWORD PTR [edx+20]
  00374	f3 0f 58 c1	 addss	 xmm0, xmm1
  00378	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  0037d	d1 e0		 shl	 eax, 1
  0037f	b9 04 00 00 00	 mov	 ecx, 4
  00384	6b d1 00	 imul	 edx, ecx, 0
  00387	f3 0f 11 84 10
	00 00 00 00	 movss	 DWORD PTR ?rotation_3d@@3PAY02MA[eax+edx], xmm0

; 217  : 	rotation_3d[2][1] = ( obj->vp.zv.x * visual_3d_vp->yv.x + obj->vp.zv.y * visual_3d_vp->yv.y + obj->vp.zv.z * visual_3d_vp->yv.z );

  00390	8b 45 08	 mov	 eax, DWORD PTR _obj$[ebp]
  00393	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  00399	f3 0f 10 40 2c	 movss	 xmm0, DWORD PTR [eax+44]
  0039e	f3 0f 59 41 18	 mulss	 xmm0, DWORD PTR [ecx+24]
  003a3	8b 55 08	 mov	 edx, DWORD PTR _obj$[ebp]
  003a6	a1 00 00 00 00	 mov	 eax, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  003ab	f3 0f 10 4a 30	 movss	 xmm1, DWORD PTR [edx+48]
  003b0	f3 0f 59 48 1c	 mulss	 xmm1, DWORD PTR [eax+28]
  003b5	f3 0f 58 c1	 addss	 xmm0, xmm1
  003b9	8b 4d 08	 mov	 ecx, DWORD PTR _obj$[ebp]
  003bc	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  003c2	f3 0f 10 49 34	 movss	 xmm1, DWORD PTR [ecx+52]
  003c7	f3 0f 59 4a 20	 mulss	 xmm1, DWORD PTR [edx+32]
  003cc	f3 0f 58 c1	 addss	 xmm0, xmm1
  003d0	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  003d5	d1 e0		 shl	 eax, 1
  003d7	b9 04 00 00 00	 mov	 ecx, 4
  003dc	c1 e1 00	 shl	 ecx, 0
  003df	f3 0f 11 84 08
	00 00 00 00	 movss	 DWORD PTR ?rotation_3d@@3PAY02MA[eax+ecx], xmm0

; 218  : 	rotation_3d[2][2] = ( obj->vp.zv.x * visual_3d_vp->zv.x + obj->vp.zv.y * visual_3d_vp->zv.y + obj->vp.zv.z * visual_3d_vp->zv.z );

  003e8	8b 45 08	 mov	 eax, DWORD PTR _obj$[ebp]
  003eb	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  003f1	f3 0f 10 40 2c	 movss	 xmm0, DWORD PTR [eax+44]
  003f6	f3 0f 59 41 24	 mulss	 xmm0, DWORD PTR [ecx+36]
  003fb	8b 55 08	 mov	 edx, DWORD PTR _obj$[ebp]
  003fe	a1 00 00 00 00	 mov	 eax, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  00403	f3 0f 10 4a 30	 movss	 xmm1, DWORD PTR [edx+48]
  00408	f3 0f 59 48 28	 mulss	 xmm1, DWORD PTR [eax+40]
  0040d	f3 0f 58 c1	 addss	 xmm0, xmm1
  00411	8b 4d 08	 mov	 ecx, DWORD PTR _obj$[ebp]
  00414	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  0041a	f3 0f 10 49 34	 movss	 xmm1, DWORD PTR [ecx+52]
  0041f	f3 0f 59 4a 2c	 mulss	 xmm1, DWORD PTR [edx+44]
  00424	f3 0f 58 c1	 addss	 xmm0, xmm1
  00428	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  0042d	d1 e0		 shl	 eax, 1
  0042f	b9 04 00 00 00	 mov	 ecx, 4
  00434	d1 e1		 shl	 ecx, 1
  00436	f3 0f 11 84 08
	00 00 00 00	 movss	 DWORD PTR ?rotation_3d@@3PAY02MA[eax+ecx], xmm0

; 219  : 
; 220  : 	rotation_3d[0][0] *= object_3d_scale.x;

  0043f	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  00444	6b c8 00	 imul	 ecx, eax, 0
  00447	ba 04 00 00 00	 mov	 edx, 4
  0044c	6b c2 00	 imul	 eax, edx, 0
  0044f	f3 0f 10 84 01
	00 00 00 00	 movss	 xmm0, DWORD PTR ?rotation_3d@@3PAY02MA[ecx+eax]
  00458	f3 0f 59 05 00
	00 00 00	 mulss	 xmm0, DWORD PTR ?object_3d_scale@@3UVEC3D@@A
  00460	b9 04 00 00 00	 mov	 ecx, 4
  00465	6b d1 00	 imul	 edx, ecx, 0
  00468	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  0046d	6b c8 00	 imul	 ecx, eax, 0
  00470	f3 0f 11 84 11
	00 00 00 00	 movss	 DWORD PTR ?rotation_3d@@3PAY02MA[ecx+edx], xmm0

; 221  : 	rotation_3d[1][0] *= object_3d_scale.y;

  00479	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  0047e	c1 e0 00	 shl	 eax, 0
  00481	b9 04 00 00 00	 mov	 ecx, 4
  00486	6b d1 00	 imul	 edx, ecx, 0
  00489	f3 0f 10 84 10
	00 00 00 00	 movss	 xmm0, DWORD PTR ?rotation_3d@@3PAY02MA[eax+edx]
  00492	f3 0f 59 05 04
	00 00 00	 mulss	 xmm0, DWORD PTR ?object_3d_scale@@3UVEC3D@@A+4
  0049a	b8 04 00 00 00	 mov	 eax, 4
  0049f	6b c8 00	 imul	 ecx, eax, 0
  004a2	ba 0c 00 00 00	 mov	 edx, 12			; 0000000cH
  004a7	c1 e2 00	 shl	 edx, 0
  004aa	f3 0f 11 84 0a
	00 00 00 00	 movss	 DWORD PTR ?rotation_3d@@3PAY02MA[edx+ecx], xmm0

; 222  : 	rotation_3d[2][0] *= object_3d_scale.z;

  004b3	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  004b8	d1 e0		 shl	 eax, 1
  004ba	b9 04 00 00 00	 mov	 ecx, 4
  004bf	6b d1 00	 imul	 edx, ecx, 0
  004c2	f3 0f 10 84 10
	00 00 00 00	 movss	 xmm0, DWORD PTR ?rotation_3d@@3PAY02MA[eax+edx]
  004cb	f3 0f 59 05 08
	00 00 00	 mulss	 xmm0, DWORD PTR ?object_3d_scale@@3UVEC3D@@A+8
  004d3	b8 04 00 00 00	 mov	 eax, 4
  004d8	6b c8 00	 imul	 ecx, eax, 0
  004db	ba 0c 00 00 00	 mov	 edx, 12			; 0000000cH
  004e0	d1 e2		 shl	 edx, 1
  004e2	f3 0f 11 84 0a
	00 00 00 00	 movss	 DWORD PTR ?rotation_3d@@3PAY02MA[edx+ecx], xmm0

; 223  : 
; 224  : 	rotation_3d[0][1] *= object_3d_scale.x;

  004eb	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  004f0	6b c8 00	 imul	 ecx, eax, 0
  004f3	ba 04 00 00 00	 mov	 edx, 4
  004f8	c1 e2 00	 shl	 edx, 0
  004fb	f3 0f 10 84 11
	00 00 00 00	 movss	 xmm0, DWORD PTR ?rotation_3d@@3PAY02MA[ecx+edx]
  00504	f3 0f 59 05 00
	00 00 00	 mulss	 xmm0, DWORD PTR ?object_3d_scale@@3UVEC3D@@A
  0050c	b8 04 00 00 00	 mov	 eax, 4
  00511	c1 e0 00	 shl	 eax, 0
  00514	b9 0c 00 00 00	 mov	 ecx, 12			; 0000000cH
  00519	6b d1 00	 imul	 edx, ecx, 0
  0051c	f3 0f 11 84 02
	00 00 00 00	 movss	 DWORD PTR ?rotation_3d@@3PAY02MA[edx+eax], xmm0

; 225  : 	rotation_3d[1][1] *= object_3d_scale.y;

  00525	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  0052a	c1 e0 00	 shl	 eax, 0
  0052d	b9 04 00 00 00	 mov	 ecx, 4
  00532	c1 e1 00	 shl	 ecx, 0
  00535	f3 0f 10 84 08
	00 00 00 00	 movss	 xmm0, DWORD PTR ?rotation_3d@@3PAY02MA[eax+ecx]
  0053e	f3 0f 59 05 04
	00 00 00	 mulss	 xmm0, DWORD PTR ?object_3d_scale@@3UVEC3D@@A+4
  00546	ba 04 00 00 00	 mov	 edx, 4
  0054b	c1 e2 00	 shl	 edx, 0
  0054e	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  00553	c1 e0 00	 shl	 eax, 0
  00556	f3 0f 11 84 10
	00 00 00 00	 movss	 DWORD PTR ?rotation_3d@@3PAY02MA[eax+edx], xmm0

; 226  : 	rotation_3d[2][1] *= object_3d_scale.z;

  0055f	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  00564	d1 e0		 shl	 eax, 1
  00566	b9 04 00 00 00	 mov	 ecx, 4
  0056b	c1 e1 00	 shl	 ecx, 0
  0056e	f3 0f 10 84 08
	00 00 00 00	 movss	 xmm0, DWORD PTR ?rotation_3d@@3PAY02MA[eax+ecx]
  00577	f3 0f 59 05 08
	00 00 00	 mulss	 xmm0, DWORD PTR ?object_3d_scale@@3UVEC3D@@A+8
  0057f	ba 04 00 00 00	 mov	 edx, 4
  00584	c1 e2 00	 shl	 edx, 0
  00587	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  0058c	d1 e0		 shl	 eax, 1
  0058e	f3 0f 11 84 10
	00 00 00 00	 movss	 DWORD PTR ?rotation_3d@@3PAY02MA[eax+edx], xmm0

; 227  : 
; 228  : 	rotation_3d[0][2] *= object_3d_scale.x;

  00597	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  0059c	6b c8 00	 imul	 ecx, eax, 0
  0059f	ba 04 00 00 00	 mov	 edx, 4
  005a4	d1 e2		 shl	 edx, 1
  005a6	f3 0f 10 84 11
	00 00 00 00	 movss	 xmm0, DWORD PTR ?rotation_3d@@3PAY02MA[ecx+edx]
  005af	f3 0f 59 05 00
	00 00 00	 mulss	 xmm0, DWORD PTR ?object_3d_scale@@3UVEC3D@@A
  005b7	b8 04 00 00 00	 mov	 eax, 4
  005bc	d1 e0		 shl	 eax, 1
  005be	b9 0c 00 00 00	 mov	 ecx, 12			; 0000000cH
  005c3	6b d1 00	 imul	 edx, ecx, 0
  005c6	f3 0f 11 84 02
	00 00 00 00	 movss	 DWORD PTR ?rotation_3d@@3PAY02MA[edx+eax], xmm0

; 229  : 	rotation_3d[1][2] *= object_3d_scale.y;

  005cf	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  005d4	c1 e0 00	 shl	 eax, 0
  005d7	b9 04 00 00 00	 mov	 ecx, 4
  005dc	d1 e1		 shl	 ecx, 1
  005de	f3 0f 10 84 08
	00 00 00 00	 movss	 xmm0, DWORD PTR ?rotation_3d@@3PAY02MA[eax+ecx]
  005e7	f3 0f 59 05 04
	00 00 00	 mulss	 xmm0, DWORD PTR ?object_3d_scale@@3UVEC3D@@A+4
  005ef	ba 04 00 00 00	 mov	 edx, 4
  005f4	d1 e2		 shl	 edx, 1
  005f6	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  005fb	c1 e0 00	 shl	 eax, 0
  005fe	f3 0f 11 84 10
	00 00 00 00	 movss	 DWORD PTR ?rotation_3d@@3PAY02MA[eax+edx], xmm0

; 230  : 	rotation_3d[2][2] *= object_3d_scale.z;

  00607	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  0060c	d1 e0		 shl	 eax, 1
  0060e	b9 04 00 00 00	 mov	 ecx, 4
  00613	d1 e1		 shl	 ecx, 1
  00615	f3 0f 10 84 08
	00 00 00 00	 movss	 xmm0, DWORD PTR ?rotation_3d@@3PAY02MA[eax+ecx]
  0061e	f3 0f 59 05 08
	00 00 00	 mulss	 xmm0, DWORD PTR ?object_3d_scale@@3UVEC3D@@A+8
  00626	ba 04 00 00 00	 mov	 edx, 4
  0062b	d1 e2		 shl	 edx, 1
  0062d	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  00632	d1 e0		 shl	 eax, 1
  00634	f3 0f 11 84 10
	00 00 00 00	 movss	 DWORD PTR ?rotation_3d@@3PAY02MA[eax+edx], xmm0

; 231  : 
; 232  : 	//
; 233  : 	// Calculate the vector from the object to the viewpoint, in the object's view system
; 234  : 	//
; 235  : 
; 236  : 	{
; 237  : 
; 238  : 		float
; 239  : 			x,
; 240  : 			y,
; 241  : 			z;
; 242  : 
; 243  : 		x = ( ( visual_3d_vp->x - obj->vp.x ) * obj->vp.xv.x );

  0063d	a1 00 00 00 00	 mov	 eax, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  00642	8b 4d 08	 mov	 ecx, DWORD PTR _obj$[ebp]
  00645	f3 0f 10 00	 movss	 xmm0, DWORD PTR [eax]
  00649	f3 0f 5c 41 08	 subss	 xmm0, DWORD PTR [ecx+8]
  0064e	8b 55 08	 mov	 edx, DWORD PTR _obj$[ebp]
  00651	f3 0f 59 42 14	 mulss	 xmm0, DWORD PTR [edx+20]
  00656	f3 0f 11 45 c4	 movss	 DWORD PTR _x$10[ebp], xmm0

; 244  : 		x += ( ( visual_3d_vp->y - obj->vp.y ) *  obj->vp.xv.y );

  0065b	a1 00 00 00 00	 mov	 eax, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  00660	8b 4d 08	 mov	 ecx, DWORD PTR _obj$[ebp]
  00663	f3 0f 10 40 04	 movss	 xmm0, DWORD PTR [eax+4]
  00668	f3 0f 5c 41 0c	 subss	 xmm0, DWORD PTR [ecx+12]
  0066d	8b 55 08	 mov	 edx, DWORD PTR _obj$[ebp]
  00670	f3 0f 59 42 18	 mulss	 xmm0, DWORD PTR [edx+24]
  00675	f3 0f 58 45 c4	 addss	 xmm0, DWORD PTR _x$10[ebp]
  0067a	f3 0f 11 45 c4	 movss	 DWORD PTR _x$10[ebp], xmm0

; 245  : 		x += ( ( visual_3d_vp->z - obj->vp.z ) *  obj->vp.xv.z );

  0067f	a1 00 00 00 00	 mov	 eax, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  00684	8b 4d 08	 mov	 ecx, DWORD PTR _obj$[ebp]
  00687	f3 0f 10 40 08	 movss	 xmm0, DWORD PTR [eax+8]
  0068c	f3 0f 5c 41 10	 subss	 xmm0, DWORD PTR [ecx+16]
  00691	8b 55 08	 mov	 edx, DWORD PTR _obj$[ebp]
  00694	f3 0f 59 42 1c	 mulss	 xmm0, DWORD PTR [edx+28]
  00699	f3 0f 58 45 c4	 addss	 xmm0, DWORD PTR _x$10[ebp]
  0069e	f3 0f 11 45 c4	 movss	 DWORD PTR _x$10[ebp], xmm0

; 246  : 
; 247  : 		y = ( ( visual_3d_vp->x - obj->vp.x ) * obj->vp.yv.x );

  006a3	a1 00 00 00 00	 mov	 eax, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  006a8	8b 4d 08	 mov	 ecx, DWORD PTR _obj$[ebp]
  006ab	f3 0f 10 00	 movss	 xmm0, DWORD PTR [eax]
  006af	f3 0f 5c 41 08	 subss	 xmm0, DWORD PTR [ecx+8]
  006b4	8b 55 08	 mov	 edx, DWORD PTR _obj$[ebp]
  006b7	f3 0f 59 42 20	 mulss	 xmm0, DWORD PTR [edx+32]
  006bc	f3 0f 11 45 c0	 movss	 DWORD PTR _y$9[ebp], xmm0

; 248  : 		y += ( ( visual_3d_vp->y - obj->vp.y ) *  obj->vp.yv.y );

  006c1	a1 00 00 00 00	 mov	 eax, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  006c6	8b 4d 08	 mov	 ecx, DWORD PTR _obj$[ebp]
  006c9	f3 0f 10 40 04	 movss	 xmm0, DWORD PTR [eax+4]
  006ce	f3 0f 5c 41 0c	 subss	 xmm0, DWORD PTR [ecx+12]
  006d3	8b 55 08	 mov	 edx, DWORD PTR _obj$[ebp]
  006d6	f3 0f 59 42 24	 mulss	 xmm0, DWORD PTR [edx+36]
  006db	f3 0f 58 45 c0	 addss	 xmm0, DWORD PTR _y$9[ebp]
  006e0	f3 0f 11 45 c0	 movss	 DWORD PTR _y$9[ebp], xmm0

; 249  : 		y += ( ( visual_3d_vp->z - obj->vp.z ) *  obj->vp.yv.z );

  006e5	a1 00 00 00 00	 mov	 eax, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  006ea	8b 4d 08	 mov	 ecx, DWORD PTR _obj$[ebp]
  006ed	f3 0f 10 40 08	 movss	 xmm0, DWORD PTR [eax+8]
  006f2	f3 0f 5c 41 10	 subss	 xmm0, DWORD PTR [ecx+16]
  006f7	8b 55 08	 mov	 edx, DWORD PTR _obj$[ebp]
  006fa	f3 0f 59 42 28	 mulss	 xmm0, DWORD PTR [edx+40]
  006ff	f3 0f 58 45 c0	 addss	 xmm0, DWORD PTR _y$9[ebp]
  00704	f3 0f 11 45 c0	 movss	 DWORD PTR _y$9[ebp], xmm0

; 250  : 
; 251  : 		z = ( ( visual_3d_vp->x - obj->vp.x ) * obj->vp.zv.x );

  00709	a1 00 00 00 00	 mov	 eax, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  0070e	8b 4d 08	 mov	 ecx, DWORD PTR _obj$[ebp]
  00711	f3 0f 10 00	 movss	 xmm0, DWORD PTR [eax]
  00715	f3 0f 5c 41 08	 subss	 xmm0, DWORD PTR [ecx+8]
  0071a	8b 55 08	 mov	 edx, DWORD PTR _obj$[ebp]
  0071d	f3 0f 59 42 2c	 mulss	 xmm0, DWORD PTR [edx+44]
  00722	f3 0f 11 45 bc	 movss	 DWORD PTR _z$8[ebp], xmm0

; 252  : 		z += ( ( visual_3d_vp->y - obj->vp.y ) *  obj->vp.zv.y );

  00727	a1 00 00 00 00	 mov	 eax, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  0072c	8b 4d 08	 mov	 ecx, DWORD PTR _obj$[ebp]
  0072f	f3 0f 10 40 04	 movss	 xmm0, DWORD PTR [eax+4]
  00734	f3 0f 5c 41 0c	 subss	 xmm0, DWORD PTR [ecx+12]
  00739	8b 55 08	 mov	 edx, DWORD PTR _obj$[ebp]
  0073c	f3 0f 59 42 30	 mulss	 xmm0, DWORD PTR [edx+48]
  00741	f3 0f 58 45 bc	 addss	 xmm0, DWORD PTR _z$8[ebp]
  00746	f3 0f 11 45 bc	 movss	 DWORD PTR _z$8[ebp], xmm0

; 253  : 		z += ( ( visual_3d_vp->z - obj->vp.z ) *  obj->vp.zv.z );

  0074b	a1 00 00 00 00	 mov	 eax, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  00750	8b 4d 08	 mov	 ecx, DWORD PTR _obj$[ebp]
  00753	f3 0f 10 40 08	 movss	 xmm0, DWORD PTR [eax+8]
  00758	f3 0f 5c 41 10	 subss	 xmm0, DWORD PTR [ecx+16]
  0075d	8b 55 08	 mov	 edx, DWORD PTR _obj$[ebp]
  00760	f3 0f 59 42 34	 mulss	 xmm0, DWORD PTR [edx+52]
  00765	f3 0f 58 45 bc	 addss	 xmm0, DWORD PTR _z$8[ebp]
  0076a	f3 0f 11 45 bc	 movss	 DWORD PTR _z$8[ebp], xmm0

; 254  : 
; 255  : 		object_unit_pos.x = -x;

  0076f	f3 0f 10 45 c4	 movss	 xmm0, DWORD PTR _x$10[ebp]
  00774	0f 57 05 00 00
	00 00		 xorps	 xmm0, DWORD PTR __xmm@80000000800000008000000080000000
  0077b	f3 0f 11 45 d4	 movss	 DWORD PTR _object_unit_pos$[ebp], xmm0

; 256  : 		object_unit_pos.y = -y;

  00780	f3 0f 10 45 c0	 movss	 xmm0, DWORD PTR _y$9[ebp]
  00785	0f 57 05 00 00
	00 00		 xorps	 xmm0, DWORD PTR __xmm@80000000800000008000000080000000
  0078c	f3 0f 11 45 d8	 movss	 DWORD PTR _object_unit_pos$[ebp+4], xmm0

; 257  : 		object_unit_pos.z = -z;

  00791	f3 0f 10 45 bc	 movss	 xmm0, DWORD PTR _z$8[ebp]
  00796	0f 57 05 00 00
	00 00		 xorps	 xmm0, DWORD PTR __xmm@80000000800000008000000080000000
  0079d	f3 0f 11 45 dc	 movss	 DWORD PTR _object_unit_pos$[ebp+8], xmm0

; 258  : 
; 259  : 		normalise_any_3d_vector ( &object_unit_pos );

  007a2	8d 45 d4	 lea	 eax, DWORD PTR _object_unit_pos$[ebp]
  007a5	50		 push	 eax
  007a6	e8 00 00 00 00	 call	 ?normalise_any_3d_vector@@YGMPAUVEC3D@@@Z ; normalise_any_3d_vector
  007ab	dd d8		 fstp	 ST(0)

; 260  : 
; 261  : 		current_object_3d_unit_position = &object_unit_pos;

  007ad	8d 45 d4	 lea	 eax, DWORD PTR _object_unit_pos$[ebp]
  007b0	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_unit_position@@3PAUVEC3D@@A, eax ; current_object_3d_unit_position

; 262  : 	}
; 263  : 
; 264  : 	//
; 265  : 	// Get the object number
; 266  : 	//
; 267  : 
; 268  : #if DEBUG_MANUAL_VIEWS
; 269  : 
; 270  : 	object_number = get_object_approximation_number ( obj->object_number, 0, &object_3d_approximation_level );
; 271  : 
; 272  : #else
; 273  : 
; 274  : 	if ( object_3d_perform_lod_calculations )

  007b5	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?object_3d_perform_lod_calculations@@3HA, 0 ; object_3d_perform_lod_calculations
  007bc	74 26		 je	 SHORT $LN11@draw_wbuff

; 275  : 	{
; 276  : 
; 277  : 		object_number = get_object_approximation_number ( obj->object_number, current_object_3d_relative_position->z, &object_3d_approximation_level );

  007be	68 00 00 00 00	 push	 OFFSET ?object_3d_approximation_level@@3HA ; object_3d_approximation_level
  007c3	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_relative_position@@3PAUVEC3D@@A ; current_object_3d_relative_position
  007c8	51		 push	 ecx
  007c9	f3 0f 10 40 08	 movss	 xmm0, DWORD PTR [eax+8]
  007ce	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  007d3	8b 4d 08	 mov	 ecx, DWORD PTR _obj$[ebp]
  007d6	8b 51 04	 mov	 edx, DWORD PTR [ecx+4]
  007d9	52		 push	 edx
  007da	e8 00 00 00 00	 call	 ?get_object_approximation_number@@YGHHMPAH@Z ; get_object_approximation_number
  007df	89 45 fc	 mov	 DWORD PTR _object_number$[ebp], eax

; 278  : 	}
; 279  : 	else

  007e2	eb 1d		 jmp	 SHORT $LN12@draw_wbuff
$LN11@draw_wbuff:

; 280  : 	{
; 281  : 
; 282  : 		object_number = get_object_approximation_number ( obj->object_number, 0, &object_3d_approximation_level );

  007e4	68 00 00 00 00	 push	 OFFSET ?object_3d_approximation_level@@3HA ; object_3d_approximation_level
  007e9	51		 push	 ecx
  007ea	0f 57 c0	 xorps	 xmm0, xmm0
  007ed	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  007f2	8b 45 08	 mov	 eax, DWORD PTR _obj$[ebp]
  007f5	8b 48 04	 mov	 ecx, DWORD PTR [eax+4]
  007f8	51		 push	 ecx
  007f9	e8 00 00 00 00	 call	 ?get_object_approximation_number@@YGHHMPAH@Z ; get_object_approximation_number
  007fe	89 45 fc	 mov	 DWORD PTR _object_number$[ebp], eax
$LN12@draw_wbuff:

; 283  : 	}
; 284  : 
; 285  : #endif
; 286  : 
; 287  : 	//
; 288  : 	// Rotate the light source vector to be relative to the object.
; 289  : 	//
; 290  : 
; 291  : 	light = generate_relative_lights ( &obj->vp, current_object_3d_unit_position, current_3d_lights );

  00801	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_3d_lights@@3PAULIGHT_3D_SOURCE@@A ; current_3d_lights
  00806	50		 push	 eax
  00807	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_object_3d_unit_position@@3PAUVEC3D@@A ; current_object_3d_unit_position
  0080d	51		 push	 ecx
  0080e	8b 55 08	 mov	 edx, DWORD PTR _obj$[ebp]
  00811	83 c2 08	 add	 edx, 8
  00814	52		 push	 edx
  00815	e8 00 00 00 00	 call	 ?generate_relative_lights@@YGPAULIGHT_3D_SOURCE@@PAUVIEWPOINT@@PAUVEC3D@@PAU1@@Z ; generate_relative_lights
  0081a	89 45 f8	 mov	 DWORD PTR _light$[ebp], eax

; 292  : 
; 293  : 	{
; 294  : 
; 295  : 		vec3d
; 296  : 			rel_pos;
; 297  : 
; 298  : 		//
; 299  : 		// Calculate the relative camera position in the object viewspace
; 300  : 		//
; 301  : 
; 302  : 		rel_pos.x = visual_3d_vp->x - obj->vp.x;

  0081d	a1 00 00 00 00	 mov	 eax, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  00822	8b 4d 08	 mov	 ecx, DWORD PTR _obj$[ebp]
  00825	f3 0f 10 00	 movss	 xmm0, DWORD PTR [eax]
  00829	f3 0f 5c 41 08	 subss	 xmm0, DWORD PTR [ecx+8]
  0082e	f3 0f 11 45 b0	 movss	 DWORD PTR _rel_pos$7[ebp], xmm0

; 303  : 		rel_pos.y = visual_3d_vp->y - obj->vp.y;

  00833	a1 00 00 00 00	 mov	 eax, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  00838	8b 4d 08	 mov	 ecx, DWORD PTR _obj$[ebp]
  0083b	f3 0f 10 40 04	 movss	 xmm0, DWORD PTR [eax+4]
  00840	f3 0f 5c 41 0c	 subss	 xmm0, DWORD PTR [ecx+12]
  00845	f3 0f 11 45 b4	 movss	 DWORD PTR _rel_pos$7[ebp+4], xmm0

; 304  : 		rel_pos.z = visual_3d_vp->z - obj->vp.z;

  0084a	a1 00 00 00 00	 mov	 eax, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  0084f	8b 4d 08	 mov	 ecx, DWORD PTR _obj$[ebp]
  00852	f3 0f 10 40 08	 movss	 xmm0, DWORD PTR [eax+8]
  00857	f3 0f 5c 41 10	 subss	 xmm0, DWORD PTR [ecx+16]
  0085c	f3 0f 11 45 b8	 movss	 DWORD PTR _rel_pos$7[ebp+8], xmm0

; 305  : 
; 306  : 		object_camera_position.x = ( rel_pos.x * obj->vp.attitude[0][0] + rel_pos.y * obj->vp.attitude[0][1] + rel_pos.z * obj->vp.attitude[0][2] );

  00861	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  00866	6b c8 00	 imul	 ecx, eax, 0
  00869	8b 55 08	 mov	 edx, DWORD PTR _obj$[ebp]
  0086c	8d 44 0a 14	 lea	 eax, DWORD PTR [edx+ecx+20]
  00870	b9 04 00 00 00	 mov	 ecx, 4
  00875	6b d1 00	 imul	 edx, ecx, 0
  00878	f3 0f 10 45 b0	 movss	 xmm0, DWORD PTR _rel_pos$7[ebp]
  0087d	f3 0f 59 04 10	 mulss	 xmm0, DWORD PTR [eax+edx]
  00882	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  00887	6b c8 00	 imul	 ecx, eax, 0
  0088a	8b 55 08	 mov	 edx, DWORD PTR _obj$[ebp]
  0088d	8d 44 0a 14	 lea	 eax, DWORD PTR [edx+ecx+20]
  00891	b9 04 00 00 00	 mov	 ecx, 4
  00896	c1 e1 00	 shl	 ecx, 0
  00899	f3 0f 10 4d b4	 movss	 xmm1, DWORD PTR _rel_pos$7[ebp+4]
  0089e	f3 0f 59 0c 08	 mulss	 xmm1, DWORD PTR [eax+ecx]
  008a3	f3 0f 58 c1	 addss	 xmm0, xmm1
  008a7	ba 0c 00 00 00	 mov	 edx, 12			; 0000000cH
  008ac	6b c2 00	 imul	 eax, edx, 0
  008af	8b 4d 08	 mov	 ecx, DWORD PTR _obj$[ebp]
  008b2	8d 54 01 14	 lea	 edx, DWORD PTR [ecx+eax+20]
  008b6	b8 04 00 00 00	 mov	 eax, 4
  008bb	d1 e0		 shl	 eax, 1
  008bd	f3 0f 10 4d b8	 movss	 xmm1, DWORD PTR _rel_pos$7[ebp+8]
  008c2	f3 0f 59 0c 02	 mulss	 xmm1, DWORD PTR [edx+eax]
  008c7	f3 0f 58 c1	 addss	 xmm0, xmm1
  008cb	f3 0f 11 45 ec	 movss	 DWORD PTR _object_camera_position$[ebp], xmm0

; 307  : 		object_camera_position.y = ( rel_pos.x * obj->vp.attitude[1][0] + rel_pos.y * obj->vp.attitude[1][1] + rel_pos.z * obj->vp.attitude[1][2] );

  008d0	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  008d5	c1 e0 00	 shl	 eax, 0
  008d8	8b 4d 08	 mov	 ecx, DWORD PTR _obj$[ebp]
  008db	8d 54 01 14	 lea	 edx, DWORD PTR [ecx+eax+20]
  008df	b8 04 00 00 00	 mov	 eax, 4
  008e4	6b c8 00	 imul	 ecx, eax, 0
  008e7	f3 0f 10 45 b0	 movss	 xmm0, DWORD PTR _rel_pos$7[ebp]
  008ec	f3 0f 59 04 0a	 mulss	 xmm0, DWORD PTR [edx+ecx]
  008f1	ba 0c 00 00 00	 mov	 edx, 12			; 0000000cH
  008f6	c1 e2 00	 shl	 edx, 0
  008f9	8b 45 08	 mov	 eax, DWORD PTR _obj$[ebp]
  008fc	8d 4c 10 14	 lea	 ecx, DWORD PTR [eax+edx+20]
  00900	ba 04 00 00 00	 mov	 edx, 4
  00905	c1 e2 00	 shl	 edx, 0
  00908	f3 0f 10 4d b4	 movss	 xmm1, DWORD PTR _rel_pos$7[ebp+4]
  0090d	f3 0f 59 0c 11	 mulss	 xmm1, DWORD PTR [ecx+edx]
  00912	f3 0f 58 c1	 addss	 xmm0, xmm1
  00916	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  0091b	c1 e0 00	 shl	 eax, 0
  0091e	8b 4d 08	 mov	 ecx, DWORD PTR _obj$[ebp]
  00921	8d 54 01 14	 lea	 edx, DWORD PTR [ecx+eax+20]
  00925	b8 04 00 00 00	 mov	 eax, 4
  0092a	d1 e0		 shl	 eax, 1
  0092c	f3 0f 10 4d b8	 movss	 xmm1, DWORD PTR _rel_pos$7[ebp+8]
  00931	f3 0f 59 0c 02	 mulss	 xmm1, DWORD PTR [edx+eax]
  00936	f3 0f 58 c1	 addss	 xmm0, xmm1
  0093a	f3 0f 11 45 f0	 movss	 DWORD PTR _object_camera_position$[ebp+4], xmm0

; 308  : 		object_camera_position.z = ( rel_pos.x * obj->vp.attitude[2][0] + rel_pos.y * obj->vp.attitude[2][1] + rel_pos.z * obj->vp.attitude[2][2] );

  0093f	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  00944	d1 e0		 shl	 eax, 1
  00946	8b 4d 08	 mov	 ecx, DWORD PTR _obj$[ebp]
  00949	8d 54 01 14	 lea	 edx, DWORD PTR [ecx+eax+20]
  0094d	b8 04 00 00 00	 mov	 eax, 4
  00952	6b c8 00	 imul	 ecx, eax, 0
  00955	f3 0f 10 45 b0	 movss	 xmm0, DWORD PTR _rel_pos$7[ebp]
  0095a	f3 0f 59 04 0a	 mulss	 xmm0, DWORD PTR [edx+ecx]
  0095f	ba 0c 00 00 00	 mov	 edx, 12			; 0000000cH
  00964	d1 e2		 shl	 edx, 1
  00966	8b 45 08	 mov	 eax, DWORD PTR _obj$[ebp]
  00969	8d 4c 10 14	 lea	 ecx, DWORD PTR [eax+edx+20]
  0096d	ba 04 00 00 00	 mov	 edx, 4
  00972	c1 e2 00	 shl	 edx, 0
  00975	f3 0f 10 4d b4	 movss	 xmm1, DWORD PTR _rel_pos$7[ebp+4]
  0097a	f3 0f 59 0c 11	 mulss	 xmm1, DWORD PTR [ecx+edx]
  0097f	f3 0f 58 c1	 addss	 xmm0, xmm1
  00983	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  00988	d1 e0		 shl	 eax, 1
  0098a	8b 4d 08	 mov	 ecx, DWORD PTR _obj$[ebp]
  0098d	8d 54 01 14	 lea	 edx, DWORD PTR [ecx+eax+20]
  00991	b8 04 00 00 00	 mov	 eax, 4
  00996	d1 e0		 shl	 eax, 1
  00998	f3 0f 10 4d b8	 movss	 xmm1, DWORD PTR _rel_pos$7[ebp+8]
  0099d	f3 0f 59 0c 02	 mulss	 xmm1, DWORD PTR [edx+eax]
  009a2	f3 0f 58 c1	 addss	 xmm0, xmm1
  009a6	f3 0f 11 45 f4	 movss	 DWORD PTR _object_camera_position$[ebp+8], xmm0

; 309  : 
; 310  : 		object_camera_direction.x = ( visual_3d_vp->zv.x * obj->vp.attitude[0][0] + visual_3d_vp->zv.y * obj->vp.attitude[1][0] + visual_3d_vp->zv.z * obj->vp.attitude[2][0] );

  009ab	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  009b0	6b c8 00	 imul	 ecx, eax, 0
  009b3	8b 55 08	 mov	 edx, DWORD PTR _obj$[ebp]
  009b6	8d 44 0a 14	 lea	 eax, DWORD PTR [edx+ecx+20]
  009ba	b9 04 00 00 00	 mov	 ecx, 4
  009bf	6b d1 00	 imul	 edx, ecx, 0
  009c2	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  009c8	f3 0f 10 41 24	 movss	 xmm0, DWORD PTR [ecx+36]
  009cd	f3 0f 59 04 10	 mulss	 xmm0, DWORD PTR [eax+edx]
  009d2	ba 0c 00 00 00	 mov	 edx, 12			; 0000000cH
  009d7	c1 e2 00	 shl	 edx, 0
  009da	8b 45 08	 mov	 eax, DWORD PTR _obj$[ebp]
  009dd	8d 4c 10 14	 lea	 ecx, DWORD PTR [eax+edx+20]
  009e1	ba 04 00 00 00	 mov	 edx, 4
  009e6	6b c2 00	 imul	 eax, edx, 0
  009e9	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  009ef	f3 0f 10 4a 28	 movss	 xmm1, DWORD PTR [edx+40]
  009f4	f3 0f 59 0c 01	 mulss	 xmm1, DWORD PTR [ecx+eax]
  009f9	f3 0f 58 c1	 addss	 xmm0, xmm1
  009fd	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  00a02	d1 e0		 shl	 eax, 1
  00a04	8b 4d 08	 mov	 ecx, DWORD PTR _obj$[ebp]
  00a07	8d 54 01 14	 lea	 edx, DWORD PTR [ecx+eax+20]
  00a0b	b8 04 00 00 00	 mov	 eax, 4
  00a10	6b c8 00	 imul	 ecx, eax, 0
  00a13	a1 00 00 00 00	 mov	 eax, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  00a18	f3 0f 10 48 2c	 movss	 xmm1, DWORD PTR [eax+44]
  00a1d	f3 0f 59 0c 0a	 mulss	 xmm1, DWORD PTR [edx+ecx]
  00a22	f3 0f 58 c1	 addss	 xmm0, xmm1
  00a26	f3 0f 11 45 e0	 movss	 DWORD PTR _object_camera_direction$[ebp], xmm0

; 311  : 		object_camera_direction.y = ( visual_3d_vp->zv.x * obj->vp.attitude[0][1] + visual_3d_vp->zv.y * obj->vp.attitude[1][1] + visual_3d_vp->zv.z * obj->vp.attitude[2][1] );

  00a2b	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  00a30	6b c8 00	 imul	 ecx, eax, 0
  00a33	8b 55 08	 mov	 edx, DWORD PTR _obj$[ebp]
  00a36	8d 44 0a 14	 lea	 eax, DWORD PTR [edx+ecx+20]
  00a3a	b9 04 00 00 00	 mov	 ecx, 4
  00a3f	c1 e1 00	 shl	 ecx, 0
  00a42	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  00a48	f3 0f 10 42 24	 movss	 xmm0, DWORD PTR [edx+36]
  00a4d	f3 0f 59 04 08	 mulss	 xmm0, DWORD PTR [eax+ecx]
  00a52	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  00a57	c1 e0 00	 shl	 eax, 0
  00a5a	8b 4d 08	 mov	 ecx, DWORD PTR _obj$[ebp]
  00a5d	8d 54 01 14	 lea	 edx, DWORD PTR [ecx+eax+20]
  00a61	b8 04 00 00 00	 mov	 eax, 4
  00a66	c1 e0 00	 shl	 eax, 0
  00a69	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  00a6f	f3 0f 10 49 28	 movss	 xmm1, DWORD PTR [ecx+40]
  00a74	f3 0f 59 0c 02	 mulss	 xmm1, DWORD PTR [edx+eax]
  00a79	f3 0f 58 c1	 addss	 xmm0, xmm1
  00a7d	ba 0c 00 00 00	 mov	 edx, 12			; 0000000cH
  00a82	d1 e2		 shl	 edx, 1
  00a84	8b 45 08	 mov	 eax, DWORD PTR _obj$[ebp]
  00a87	8d 4c 10 14	 lea	 ecx, DWORD PTR [eax+edx+20]
  00a8b	ba 04 00 00 00	 mov	 edx, 4
  00a90	c1 e2 00	 shl	 edx, 0
  00a93	a1 00 00 00 00	 mov	 eax, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  00a98	f3 0f 10 48 2c	 movss	 xmm1, DWORD PTR [eax+44]
  00a9d	f3 0f 59 0c 11	 mulss	 xmm1, DWORD PTR [ecx+edx]
  00aa2	f3 0f 58 c1	 addss	 xmm0, xmm1
  00aa6	f3 0f 11 45 e4	 movss	 DWORD PTR _object_camera_direction$[ebp+4], xmm0

; 312  : 		object_camera_direction.z = ( visual_3d_vp->zv.x * obj->vp.attitude[0][2] + visual_3d_vp->zv.y * obj->vp.attitude[1][2] + visual_3d_vp->zv.z * obj->vp.attitude[2][2] );

  00aab	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  00ab0	6b c8 00	 imul	 ecx, eax, 0
  00ab3	8b 55 08	 mov	 edx, DWORD PTR _obj$[ebp]
  00ab6	8d 44 0a 14	 lea	 eax, DWORD PTR [edx+ecx+20]
  00aba	b9 04 00 00 00	 mov	 ecx, 4
  00abf	d1 e1		 shl	 ecx, 1
  00ac1	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  00ac7	f3 0f 10 42 24	 movss	 xmm0, DWORD PTR [edx+36]
  00acc	f3 0f 59 04 08	 mulss	 xmm0, DWORD PTR [eax+ecx]
  00ad1	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  00ad6	c1 e0 00	 shl	 eax, 0
  00ad9	8b 4d 08	 mov	 ecx, DWORD PTR _obj$[ebp]
  00adc	8d 54 01 14	 lea	 edx, DWORD PTR [ecx+eax+20]
  00ae0	b8 04 00 00 00	 mov	 eax, 4
  00ae5	d1 e0		 shl	 eax, 1
  00ae7	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  00aed	f3 0f 10 49 28	 movss	 xmm1, DWORD PTR [ecx+40]
  00af2	f3 0f 59 0c 02	 mulss	 xmm1, DWORD PTR [edx+eax]
  00af7	f3 0f 58 c1	 addss	 xmm0, xmm1
  00afb	ba 0c 00 00 00	 mov	 edx, 12			; 0000000cH
  00b00	d1 e2		 shl	 edx, 1
  00b02	8b 45 08	 mov	 eax, DWORD PTR _obj$[ebp]
  00b05	8d 4c 10 14	 lea	 ecx, DWORD PTR [eax+edx+20]
  00b09	ba 04 00 00 00	 mov	 edx, 4
  00b0e	d1 e2		 shl	 edx, 1
  00b10	a1 00 00 00 00	 mov	 eax, DWORD PTR ?visual_3d_vp@@3PAUVIEWPOINT@@A ; visual_3d_vp
  00b15	f3 0f 10 48 2c	 movss	 xmm1, DWORD PTR [eax+44]
  00b1a	f3 0f 59 0c 11	 mulss	 xmm1, DWORD PTR [ecx+edx]
  00b1f	f3 0f 58 c1	 addss	 xmm0, xmm1
  00b23	f3 0f 11 45 e8	 movss	 DWORD PTR _object_camera_direction$[ebp+8], xmm0

; 313  : 	}
; 314  : 
; 315  : 
; 316  : 	//
; 317  : 	//	Set up this objects' object info structure
; 318  : 	//
; 319  : 
; 320  : 	object_3d_object_base[object_3d_object_current_base].lights = light;

  00b28	6b 05 00 00 00
	00 2c		 imul	 eax, DWORD PTR ?object_3d_object_current_base@@3HA, 44 ; object_3d_object_current_base
  00b2f	8b 4d f8	 mov	 ecx, DWORD PTR _light$[ebp]
  00b32	89 88 04 00 00
	00		 mov	 DWORD PTR ?object_3d_object_base@@3PAUOBJECT_3D_INFO@@A[eax+4], ecx

; 321  : 
; 322  : 	object_3d_object_base[object_3d_object_current_base].camera_position = object_camera_position;

  00b38	6b 05 00 00 00
	00 2c		 imul	 eax, DWORD PTR ?object_3d_object_current_base@@3HA, 44 ; object_3d_object_current_base
  00b3f	05 08 00 00 00	 add	 eax, OFFSET ?object_3d_object_base@@3PAUOBJECT_3D_INFO@@A+8
  00b44	8b 4d ec	 mov	 ecx, DWORD PTR _object_camera_position$[ebp]
  00b47	89 08		 mov	 DWORD PTR [eax], ecx
  00b49	8b 55 f0	 mov	 edx, DWORD PTR _object_camera_position$[ebp+4]
  00b4c	89 50 04	 mov	 DWORD PTR [eax+4], edx
  00b4f	8b 4d f4	 mov	 ecx, DWORD PTR _object_camera_position$[ebp+8]
  00b52	89 48 08	 mov	 DWORD PTR [eax+8], ecx

; 323  : 
; 324  : 	object_3d_object_base[object_3d_object_current_base].camera_direction = object_camera_direction;

  00b55	6b 05 00 00 00
	00 2c		 imul	 eax, DWORD PTR ?object_3d_object_current_base@@3HA, 44 ; object_3d_object_current_base
  00b5c	05 14 00 00 00	 add	 eax, OFFSET ?object_3d_object_base@@3PAUOBJECT_3D_INFO@@A+20
  00b61	8b 4d e0	 mov	 ecx, DWORD PTR _object_camera_direction$[ebp]
  00b64	89 08		 mov	 DWORD PTR [eax], ecx
  00b66	8b 55 e4	 mov	 edx, DWORD PTR _object_camera_direction$[ebp+4]
  00b69	89 50 04	 mov	 DWORD PTR [eax+4], edx
  00b6c	8b 4d e8	 mov	 ecx, DWORD PTR _object_camera_direction$[ebp+8]
  00b6f	89 48 08	 mov	 DWORD PTR [eax+8], ecx

; 325  : 
; 326  : 	object_3d_object_base[object_3d_object_current_base].points_base = object_3d_points_current_base;

  00b72	6b 05 00 00 00
	00 2c		 imul	 eax, DWORD PTR ?object_3d_object_current_base@@3HA, 44 ; object_3d_object_current_base
  00b79	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?object_3d_points_current_base@@3HA ; object_3d_points_current_base
  00b7f	89 88 24 00 00
	00		 mov	 DWORD PTR ?object_3d_object_base@@3PAUOBJECT_3D_INFO@@A[eax+36], ecx

; 327  : 
; 328  : 	object_3d_object_base[object_3d_object_current_base].object_number = object_number;

  00b85	6b 05 00 00 00
	00 2c		 imul	 eax, DWORD PTR ?object_3d_object_current_base@@3HA, 44 ; object_3d_object_current_base
  00b8c	8b 4d fc	 mov	 ecx, DWORD PTR _object_number$[ebp]
  00b8f	89 88 20 00 00
	00		 mov	 DWORD PTR ?object_3d_object_base@@3PAUOBJECT_3D_INFO@@A[eax+32], ecx

; 329  : 
; 330  : 	object_3d_object_base[object_3d_object_current_base].object_vp = &obj->vp;

  00b95	8b 45 08	 mov	 eax, DWORD PTR _obj$[ebp]
  00b98	83 c0 08	 add	 eax, 8
  00b9b	6b 0d 00 00 00
	00 2c		 imul	 ecx, DWORD PTR ?object_3d_object_current_base@@3HA, 44 ; object_3d_object_current_base
  00ba2	89 81 28 00 00
	00		 mov	 DWORD PTR ?object_3d_object_base@@3PAUOBJECT_3D_INFO@@A[ecx+40], eax

; 331  : 
; 332  : 	current_object_3d_object_base = &object_3d_object_base[object_3d_object_current_base];

  00ba8	6b 05 00 00 00
	00 2c		 imul	 eax, DWORD PTR ?object_3d_object_current_base@@3HA, 44 ; object_3d_object_current_base
  00baf	05 00 00 00 00	 add	 eax, OFFSET ?object_3d_object_base@@3PAUOBJECT_3D_INFO@@A ; object_3d_object_base
  00bb4	a3 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_object_base@@3PAUOBJECT_3D_INFO@@A, eax ; current_object_3d_object_base

; 333  : 
; 334  : 	//
; 335  : 	// Set up the face sorting variables
; 336  : 	//
; 337  : 
; 338  : 	current_object_3d_translucent_surfaces = NULL;

  00bb9	c7 05 00 00 00
	00 00 00 00 00	 mov	 DWORD PTR ?current_object_3d_translucent_surfaces@@3PAUTRANSLUCENT_OBJECT_SURFACE@@A, 0 ; current_object_3d_translucent_surfaces

; 339  : 
; 340  : 	previous_object_3d_transparent_surface_index = object_3d_transparent_surface_index;

  00bc3	a1 00 00 00 00	 mov	 eax, DWORD PTR ?object_3d_transparent_surface_index@@3HA ; object_3d_transparent_surface_index
  00bc8	a3 00 00 00 00	 mov	 DWORD PTR ?previous_object_3d_transparent_surface_index@@3HA, eax ; previous_object_3d_transparent_surface_index

; 341  : 
; 342  : 	//
; 343  : 	// Reset the temporary buffered faces
; 344  : 	//
; 345  : 
; 346  : 	reset_temporary_buffered_translucent_polygons ();

  00bcd	e8 00 00 00 00	 call	 ?reset_temporary_buffered_translucent_polygons@@YGXXZ ; reset_temporary_buffered_translucent_polygons

; 347  : 
; 348  : 	//
; 349  : 	// Now start transforming etc
; 350  : 	//
; 351  : 
; 352  : 	if ( objects_3d_data[object_number].number_of_points )

  00bd2	6b 45 fc 68	 imul	 eax, DWORD PTR _object_number$[ebp], 104
  00bd6	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?objects_3d_data@@3PAUOBJECT_3D@@A ; objects_3d_data
  00bdc	0f b7 14 01	 movzx	 edx, WORD PTR [ecx+eax]
  00be0	85 d2		 test	 edx, edx
  00be2	0f 84 3c 01 00
	00		 je	 $LN27@draw_wbuff

; 353  : 	{
; 354  : 
; 355  : 		int
; 356  : 			object_outcode;
; 357  : 
; 358  : 		if ( !get_object_3d_outcode ( object_number, current_object_3d_relative_position, &object_outcode ) )

  00be8	8d 45 ac	 lea	 eax, DWORD PTR _object_outcode$6[ebp]
  00beb	50		 push	 eax
  00bec	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_object_3d_relative_position@@3PAUVEC3D@@A ; current_object_3d_relative_position
  00bf2	51		 push	 ecx
  00bf3	8b 55 fc	 mov	 edx, DWORD PTR _object_number$[ebp]
  00bf6	52		 push	 edx
  00bf7	e8 00 00 00 00	 call	 ?get_object_3d_outcode@@YGHHPAUVEC3D@@PAH@Z ; get_object_3d_outcode
  00bfc	85 c0		 test	 eax, eax
  00bfe	0f 85 20 01 00
	00		 jne	 $LN27@draw_wbuff

; 359  : 		{
; 360  : 
; 361  : 			illuminate_3d_object ( &objects_3d_data[object_number], current_object_3d_relative_position, light, &object_camera_position, object_3d_points_current_base );

  00c04	a1 00 00 00 00	 mov	 eax, DWORD PTR ?object_3d_points_current_base@@3HA ; object_3d_points_current_base
  00c09	50		 push	 eax
  00c0a	8d 4d ec	 lea	 ecx, DWORD PTR _object_camera_position$[ebp]
  00c0d	51		 push	 ecx
  00c0e	8b 55 f8	 mov	 edx, DWORD PTR _light$[ebp]
  00c11	52		 push	 edx
  00c12	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_relative_position@@3PAUVEC3D@@A ; current_object_3d_relative_position
  00c17	50		 push	 eax
  00c18	6b 4d fc 68	 imul	 ecx, DWORD PTR _object_number$[ebp], 104
  00c1c	03 0d 00 00 00
	00		 add	 ecx, DWORD PTR ?objects_3d_data@@3PAUOBJECT_3D@@A ; objects_3d_data
  00c22	51		 push	 ecx
  00c23	e8 00 00 00 00	 call	 ?illuminate_3d_object@@YGXPAUOBJECT_3D@@PAUVEC3D@@PAULIGHT_3D_SOURCE@@1H@Z ; illuminate_3d_object

; 362  : 
; 363  : 			if ( object_outcode )

  00c28	83 7d ac 00	 cmp	 DWORD PTR _object_outcode$6[ebp], 0
  00c2c	74 55		 je	 SHORT $LN15@draw_wbuff

; 364  : 			{
; 365  : 
; 366  : 				if ( current_3d_object_is_flat )

  00c2e	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?current_3d_object_is_flat@@3HA, 0 ; current_3d_object_is_flat
  00c35	74 26		 je	 SHORT $LN17@draw_wbuff

; 367  : 				{
; 368  : 
; 369  : 
; 370  : 					transform_flat_3d_object ( &objects_3d_data[object_number], current_object_3d_relative_position, light, &object_camera_position, object_3d_points_current_base );

  00c37	a1 00 00 00 00	 mov	 eax, DWORD PTR ?object_3d_points_current_base@@3HA ; object_3d_points_current_base
  00c3c	50		 push	 eax
  00c3d	8d 4d ec	 lea	 ecx, DWORD PTR _object_camera_position$[ebp]
  00c40	51		 push	 ecx
  00c41	8b 55 f8	 mov	 edx, DWORD PTR _light$[ebp]
  00c44	52		 push	 edx
  00c45	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_relative_position@@3PAUVEC3D@@A ; current_object_3d_relative_position
  00c4a	50		 push	 eax
  00c4b	6b 4d fc 68	 imul	 ecx, DWORD PTR _object_number$[ebp], 104
  00c4f	03 0d 00 00 00
	00		 add	 ecx, DWORD PTR ?objects_3d_data@@3PAUOBJECT_3D@@A ; objects_3d_data
  00c55	51		 push	 ecx
  00c56	e8 00 00 00 00	 call	 ?transform_flat_3d_object@@YGXPAUOBJECT_3D@@PAUVEC3D@@PAULIGHT_3D_SOURCE@@1H@Z ; transform_flat_3d_object

; 371  : 				}
; 372  : 				else

  00c5b	eb 24		 jmp	 SHORT $LN18@draw_wbuff
$LN17@draw_wbuff:

; 373  : 				{
; 374  : 
; 375  : 					transform_3d_object ( &objects_3d_data[object_number], current_object_3d_relative_position, light, &object_camera_position, object_3d_points_current_base );

  00c5d	a1 00 00 00 00	 mov	 eax, DWORD PTR ?object_3d_points_current_base@@3HA ; object_3d_points_current_base
  00c62	50		 push	 eax
  00c63	8d 4d ec	 lea	 ecx, DWORD PTR _object_camera_position$[ebp]
  00c66	51		 push	 ecx
  00c67	8b 55 f8	 mov	 edx, DWORD PTR _light$[ebp]
  00c6a	52		 push	 edx
  00c6b	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_relative_position@@3PAUVEC3D@@A ; current_object_3d_relative_position
  00c70	50		 push	 eax
  00c71	6b 4d fc 68	 imul	 ecx, DWORD PTR _object_number$[ebp], 104
  00c75	03 0d 00 00 00
	00		 add	 ecx, DWORD PTR ?objects_3d_data@@3PAUOBJECT_3D@@A ; objects_3d_data
  00c7b	51		 push	 ecx
  00c7c	e8 00 00 00 00	 call	 ?transform_3d_object@@YGXPAUOBJECT_3D@@PAUVEC3D@@PAULIGHT_3D_SOURCE@@1H@Z ; transform_3d_object
$LN18@draw_wbuff:

; 376  : 				}
; 377  : 			}
; 378  : 			else

  00c81	eb 53		 jmp	 SHORT $LN20@draw_wbuff
$LN15@draw_wbuff:

; 379  : 			{
; 380  : 
; 381  : 				if ( current_3d_object_is_flat )

  00c83	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?current_3d_object_is_flat@@3HA, 0 ; current_3d_object_is_flat
  00c8a	74 26		 je	 SHORT $LN19@draw_wbuff

; 382  : 				{
; 383  : 
; 384  : 					transform_unclipped_flat_3d_object ( &objects_3d_data[object_number], current_object_3d_relative_position, light, &object_camera_position, object_3d_points_current_base );

  00c8c	a1 00 00 00 00	 mov	 eax, DWORD PTR ?object_3d_points_current_base@@3HA ; object_3d_points_current_base
  00c91	50		 push	 eax
  00c92	8d 4d ec	 lea	 ecx, DWORD PTR _object_camera_position$[ebp]
  00c95	51		 push	 ecx
  00c96	8b 55 f8	 mov	 edx, DWORD PTR _light$[ebp]
  00c99	52		 push	 edx
  00c9a	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_relative_position@@3PAUVEC3D@@A ; current_object_3d_relative_position
  00c9f	50		 push	 eax
  00ca0	6b 4d fc 68	 imul	 ecx, DWORD PTR _object_number$[ebp], 104
  00ca4	03 0d 00 00 00
	00		 add	 ecx, DWORD PTR ?objects_3d_data@@3PAUOBJECT_3D@@A ; objects_3d_data
  00caa	51		 push	 ecx
  00cab	e8 00 00 00 00	 call	 ?transform_unclipped_flat_3d_object@@YGXPAUOBJECT_3D@@PAUVEC3D@@PAULIGHT_3D_SOURCE@@1H@Z ; transform_unclipped_flat_3d_object

; 385  : 				}
; 386  : 				else

  00cb0	eb 24		 jmp	 SHORT $LN20@draw_wbuff
$LN19@draw_wbuff:

; 387  : 				{
; 388  : 
; 389  : 					transform_unclipped_3d_object ( &objects_3d_data[object_number], current_object_3d_relative_position, light, &object_camera_position, object_3d_points_current_base );

  00cb2	a1 00 00 00 00	 mov	 eax, DWORD PTR ?object_3d_points_current_base@@3HA ; object_3d_points_current_base
  00cb7	50		 push	 eax
  00cb8	8d 4d ec	 lea	 ecx, DWORD PTR _object_camera_position$[ebp]
  00cbb	51		 push	 ecx
  00cbc	8b 55 f8	 mov	 edx, DWORD PTR _light$[ebp]
  00cbf	52		 push	 edx
  00cc0	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_relative_position@@3PAUVEC3D@@A ; current_object_3d_relative_position
  00cc5	50		 push	 eax
  00cc6	6b 4d fc 68	 imul	 ecx, DWORD PTR _object_number$[ebp], 104
  00cca	03 0d 00 00 00
	00		 add	 ecx, DWORD PTR ?objects_3d_data@@3PAUOBJECT_3D@@A ; objects_3d_data
  00cd0	51		 push	 ecx
  00cd1	e8 00 00 00 00	 call	 ?transform_unclipped_3d_object@@YGXPAUOBJECT_3D@@PAUVEC3D@@PAULIGHT_3D_SOURCE@@1H@Z ; transform_unclipped_3d_object
$LN20@draw_wbuff:

; 390  : 				}
; 391  : 			}
; 392  : 
; 393  : 			if ( object_outcode )

  00cd6	83 7d ac 00	 cmp	 DWORD PTR _object_outcode$6[ebp], 0
  00cda	74 25		 je	 SHORT $LN21@draw_wbuff

; 394  : 			{
; 395  : 
; 396  : 				if ( ( textured_object_rendering_enabled ) || ( infrared_override ) )

  00cdc	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?textured_object_rendering_enabled@@3HA, 0 ; textured_object_rendering_enabled
  00ce3	75 06		 jne	 SHORT $LN25@draw_wbuff
  00ce5	83 7d 10 00	 cmp	 DWORD PTR _infrared_override$[ebp], 0
  00ce9	74 0b		 je	 SHORT $LN23@draw_wbuff
$LN25@draw_wbuff:

; 397  : 				{
; 398  : 
; 399  : 					draw_3d_object_clipped_faces ( object_number );

  00ceb	8b 45 fc	 mov	 eax, DWORD PTR _object_number$[ebp]
  00cee	50		 push	 eax
  00cef	e8 00 00 00 00	 call	 ?draw_3d_object_clipped_faces@@YGXH@Z ; draw_3d_object_clipped_faces

; 400  : 				}
; 401  : 				else

  00cf4	eb 09		 jmp	 SHORT $LN24@draw_wbuff
$LN23@draw_wbuff:

; 402  : 				{
; 403  : 
; 404  : 					draw_3d_object_untextured_clipped_faces ( object_number );

  00cf6	8b 45 fc	 mov	 eax, DWORD PTR _object_number$[ebp]
  00cf9	50		 push	 eax
  00cfa	e8 00 00 00 00	 call	 ?draw_3d_object_untextured_clipped_faces@@YGXH@Z ; draw_3d_object_untextured_clipped_faces
$LN24@draw_wbuff:

; 405  : 				}
; 406  : 			}
; 407  : 			else

  00cff	eb 23		 jmp	 SHORT $LN27@draw_wbuff
$LN21@draw_wbuff:

; 408  : 			{
; 409  : 
; 410  : 				if ( ( textured_object_rendering_enabled ) || ( infrared_override ) )

  00d01	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?textured_object_rendering_enabled@@3HA, 0 ; textured_object_rendering_enabled
  00d08	75 06		 jne	 SHORT $LN28@draw_wbuff
  00d0a	83 7d 10 00	 cmp	 DWORD PTR _infrared_override$[ebp], 0
  00d0e	74 0b		 je	 SHORT $LN26@draw_wbuff
$LN28@draw_wbuff:

; 411  : 				{
; 412  : 
; 413  : 					draw_3d_object_unclipped_faces ( object_number );

  00d10	8b 45 fc	 mov	 eax, DWORD PTR _object_number$[ebp]
  00d13	50		 push	 eax
  00d14	e8 00 00 00 00	 call	 ?draw_3d_object_unclipped_faces@@YGXH@Z ; draw_3d_object_unclipped_faces

; 414  : 				}
; 415  : 				else

  00d19	eb 09		 jmp	 SHORT $LN27@draw_wbuff
$LN26@draw_wbuff:

; 416  : 				{
; 417  : 
; 418  : 					draw_3d_object_untextured_unclipped_faces ( object_number );

  00d1b	8b 45 fc	 mov	 eax, DWORD PTR _object_number$[ebp]
  00d1e	50		 push	 eax
  00d1f	e8 00 00 00 00	 call	 ?draw_3d_object_untextured_unclipped_faces@@YGXH@Z ; draw_3d_object_untextured_unclipped_faces
$LN27@draw_wbuff:

; 419  : 				}
; 420  : 			}
; 421  : 		}
; 422  : 	}
; 423  : 
; 424  : 	//
; 425  : 	// Recurse down any sub objects
; 426  : 	//
; 427  : 
; 428  : 	if ( scene->number_of_sub_objects )

  00d24	8b 45 d0	 mov	 eax, DWORD PTR _scene$[ebp]
  00d27	83 b8 b0 00 00
	00 00		 cmp	 DWORD PTR [eax+176], 0
  00d2e	0f 84 4b 01 00
	00		 je	 $LN6@draw_wbuff

; 429  : 	{
; 430  : 
; 431  : 		int
; 432  : 			count;
; 433  : 
; 434  : 		if ( obj->sub_objects )

  00d34	8b 45 08	 mov	 eax, DWORD PTR _obj$[ebp]
  00d37	83 78 58 00	 cmp	 DWORD PTR [eax+88], 0
  00d3b	0f 84 a1 00 00
	00		 je	 $LN30@draw_wbuff

; 435  : 		{
; 436  : 
; 437  : 			for ( count = ( scene->number_of_sub_objects -1 ); count >= 0; count-- )

  00d41	8b 45 d0	 mov	 eax, DWORD PTR _scene$[ebp]
  00d44	8b 88 b0 00 00
	00		 mov	 ecx, DWORD PTR [eax+176]
  00d4a	83 e9 01	 sub	 ecx, 1
  00d4d	89 4d a8	 mov	 DWORD PTR _count$5[ebp], ecx
  00d50	eb 09		 jmp	 SHORT $LN4@draw_wbuff
$LN2@draw_wbuff:
  00d52	8b 45 a8	 mov	 eax, DWORD PTR _count$5[ebp]
  00d55	83 e8 01	 sub	 eax, 1
  00d58	89 45 a8	 mov	 DWORD PTR _count$5[ebp], eax
$LN4@draw_wbuff:
  00d5b	83 7d a8 00	 cmp	 DWORD PTR _count$5[ebp], 0
  00d5f	7c 7c		 jl	 SHORT $LN3@draw_wbuff

; 438  : 			{
; 439  : 
; 440  : 				if (	( obj->sub_objects[count].visible_object ) &&
; 441  : 						( scene->sub_objects[count].sub_object_approximation_in_level <= object_3d_approximation_level ) &&

  00d61	6b 45 a8 30	 imul	 eax, DWORD PTR _count$5[ebp], 48
  00d65	8b 4d 08	 mov	 ecx, DWORD PTR _obj$[ebp]
  00d68	8b 51 58	 mov	 edx, DWORD PTR [ecx+88]
  00d6b	8b 44 02 08	 mov	 eax, DWORD PTR [edx+eax+8]
  00d6f	83 e0 01	 and	 eax, 1
  00d72	74 64		 je	 SHORT $LN32@draw_wbuff
  00d74	6b 45 a8 38	 imul	 eax, DWORD PTR _count$5[ebp], 56
  00d78	8b 4d d0	 mov	 ecx, DWORD PTR _scene$[ebp]
  00d7b	8b 91 d8 00 00
	00		 mov	 edx, DWORD PTR [ecx+216]
  00d81	0f b6 44 02 05	 movzx	 eax, BYTE PTR [edx+eax+5]
  00d86	3b 05 00 00 00
	00		 cmp	 eax, DWORD PTR ?object_3d_approximation_level@@3HA ; object_3d_approximation_level
  00d8c	7f 4a		 jg	 SHORT $LN32@draw_wbuff
  00d8e	6b 45 a8 38	 imul	 eax, DWORD PTR _count$5[ebp], 56
  00d92	8b 4d d0	 mov	 ecx, DWORD PTR _scene$[ebp]
  00d95	8b 91 d8 00 00
	00		 mov	 edx, DWORD PTR [ecx+216]
  00d9b	0f b6 44 02 06	 movzx	 eax, BYTE PTR [edx+eax+6]
  00da0	3b 05 00 00 00
	00		 cmp	 eax, DWORD PTR ?object_3d_approximation_level@@3HA ; object_3d_approximation_level
  00da6	7c 30		 jl	 SHORT $LN32@draw_wbuff

; 442  : 						( scene->sub_objects[count].sub_object_approximation_out_level >= object_3d_approximation_level ) )
; 443  : 				{
; 444  : 
; 445  : 					draw_sub_object ( &obj->sub_objects[count], &scene->sub_objects[count], &obj->vp, current_object_3d_relative_position, infrared_override );

  00da8	8b 45 10	 mov	 eax, DWORD PTR _infrared_override$[ebp]
  00dab	50		 push	 eax
  00dac	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_object_3d_relative_position@@3PAUVEC3D@@A ; current_object_3d_relative_position
  00db2	51		 push	 ecx
  00db3	8b 55 08	 mov	 edx, DWORD PTR _obj$[ebp]
  00db6	83 c2 08	 add	 edx, 8
  00db9	52		 push	 edx
  00dba	6b 45 a8 38	 imul	 eax, DWORD PTR _count$5[ebp], 56
  00dbe	8b 4d d0	 mov	 ecx, DWORD PTR _scene$[ebp]
  00dc1	03 81 d8 00 00
	00		 add	 eax, DWORD PTR [ecx+216]
  00dc7	50		 push	 eax
  00dc8	6b 55 a8 30	 imul	 edx, DWORD PTR _count$5[ebp], 48
  00dcc	8b 45 08	 mov	 eax, DWORD PTR _obj$[ebp]
  00dcf	03 50 58	 add	 edx, DWORD PTR [eax+88]
  00dd2	52		 push	 edx
  00dd3	e8 00 00 00 00	 call	 ?draw_sub_object@@YGXPAUOBJECT_3D_SUB_INSTANCE@@PAUOBJECT_3D_DATABASE_ENTRY@@PAUVIEWPOINT@@PAUVEC3D@@H@Z ; draw_sub_object
$LN32@draw_wbuff:

; 446  : 				}
; 447  : 			}

  00dd8	e9 75 ff ff ff	 jmp	 $LN2@draw_wbuff
$LN3@draw_wbuff:

; 448  : 		}
; 449  : 		else

  00ddd	e9 9d 00 00 00	 jmp	 $LN6@draw_wbuff
$LN30@draw_wbuff:

; 450  : 		{
; 451  : 
; 452  : 			for ( count = ( scene->number_of_sub_objects -1 ); count >= 0; count-- )

  00de2	8b 45 d0	 mov	 eax, DWORD PTR _scene$[ebp]
  00de5	8b 88 b0 00 00
	00		 mov	 ecx, DWORD PTR [eax+176]
  00deb	83 e9 01	 sub	 ecx, 1
  00dee	89 4d a8	 mov	 DWORD PTR _count$5[ebp], ecx
  00df1	eb 09		 jmp	 SHORT $LN7@draw_wbuff
$LN5@draw_wbuff:
  00df3	8b 45 a8	 mov	 eax, DWORD PTR _count$5[ebp]
  00df6	83 e8 01	 sub	 eax, 1
  00df9	89 45 a8	 mov	 DWORD PTR _count$5[ebp], eax
$LN7@draw_wbuff:
  00dfc	83 7d a8 00	 cmp	 DWORD PTR _count$5[ebp], 0
  00e00	7c 7d		 jl	 SHORT $LN6@draw_wbuff

; 453  : 			{
; 454  : 
; 455  : 				if (	( scene->sub_objects[count].default_visibility ) &&
; 456  : 						( scene->sub_objects[count].sub_object_approximation_in_level <= object_3d_approximation_level ) &&

  00e02	6b 45 a8 38	 imul	 eax, DWORD PTR _count$5[ebp], 56
  00e06	8b 4d d0	 mov	 ecx, DWORD PTR _scene$[ebp]
  00e09	8b 91 d8 00 00
	00		 mov	 edx, DWORD PTR [ecx+216]
  00e0f	8a 44 02 07	 mov	 al, BYTE PTR [edx+eax+7]
  00e13	c0 e8 06	 shr	 al, 6
  00e16	24 01		 and	 al, 1
  00e18	0f b6 c8	 movzx	 ecx, al
  00e1b	85 c9		 test	 ecx, ecx
  00e1d	74 5b		 je	 SHORT $LN33@draw_wbuff
  00e1f	6b 45 a8 38	 imul	 eax, DWORD PTR _count$5[ebp], 56
  00e23	8b 4d d0	 mov	 ecx, DWORD PTR _scene$[ebp]
  00e26	8b 91 d8 00 00
	00		 mov	 edx, DWORD PTR [ecx+216]
  00e2c	0f b6 44 02 05	 movzx	 eax, BYTE PTR [edx+eax+5]
  00e31	3b 05 00 00 00
	00		 cmp	 eax, DWORD PTR ?object_3d_approximation_level@@3HA ; object_3d_approximation_level
  00e37	7f 41		 jg	 SHORT $LN33@draw_wbuff
  00e39	6b 45 a8 38	 imul	 eax, DWORD PTR _count$5[ebp], 56
  00e3d	8b 4d d0	 mov	 ecx, DWORD PTR _scene$[ebp]
  00e40	8b 91 d8 00 00
	00		 mov	 edx, DWORD PTR [ecx+216]
  00e46	0f b6 44 02 06	 movzx	 eax, BYTE PTR [edx+eax+6]
  00e4b	3b 05 00 00 00
	00		 cmp	 eax, DWORD PTR ?object_3d_approximation_level@@3HA ; object_3d_approximation_level
  00e51	7c 27		 jl	 SHORT $LN33@draw_wbuff

; 457  : 						( scene->sub_objects[count].sub_object_approximation_out_level >= object_3d_approximation_level ) )
; 458  : 				{
; 459  : 
; 460  : 					draw_sub_object ( NULL, &scene->sub_objects[count], &obj->vp, current_object_3d_relative_position, infrared_override );

  00e53	8b 45 10	 mov	 eax, DWORD PTR _infrared_override$[ebp]
  00e56	50		 push	 eax
  00e57	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_object_3d_relative_position@@3PAUVEC3D@@A ; current_object_3d_relative_position
  00e5d	51		 push	 ecx
  00e5e	8b 55 08	 mov	 edx, DWORD PTR _obj$[ebp]
  00e61	83 c2 08	 add	 edx, 8
  00e64	52		 push	 edx
  00e65	6b 45 a8 38	 imul	 eax, DWORD PTR _count$5[ebp], 56
  00e69	8b 4d d0	 mov	 ecx, DWORD PTR _scene$[ebp]
  00e6c	03 81 d8 00 00
	00		 add	 eax, DWORD PTR [ecx+216]
  00e72	50		 push	 eax
  00e73	6a 00		 push	 0
  00e75	e8 00 00 00 00	 call	 ?draw_sub_object@@YGXPAUOBJECT_3D_SUB_INSTANCE@@PAUOBJECT_3D_DATABASE_ENTRY@@PAUVIEWPOINT@@PAUVEC3D@@H@Z ; draw_sub_object
$LN33@draw_wbuff:

; 461  : 				}
; 462  : 			}

  00e7a	e9 74 ff ff ff	 jmp	 $LN5@draw_wbuff
$LN6@draw_wbuff:

; 463  : 		}
; 464  : 	}
; 465  : 
; 466  : 	//
; 467  : 	// If there are any temporary tranlucent polygons, draw them now
; 468  : 	//
; 469  : 
; 470  : 	if ( get_number_of_temporary_translucent_polygons () )

  00e7f	e8 00 00 00 00	 call	 ?get_number_of_temporary_translucent_polygons@@YGHXZ ; get_number_of_temporary_translucent_polygons
  00e84	85 c0		 test	 eax, eax
  00e86	74 49		 je	 SHORT $LN38@draw_wbuff

; 471  : 	{
; 472  : 
; 473  : 		//
; 474  : 		// Set the translucent rendering mode - and turn off specular highlighting
; 475  : 		//
; 476  : 
; 477  : #if !ALWAYS_SPECULAR_RENDER
; 478  : 		set_d3d_int_state ( D3DRENDERSTATE_SPECULARENABLE, FALSE );
; 479  : #endif
; 480  : 
; 481  : 		if ( d3d_transparency_enabled )

  00e88	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?d3d_transparency_enabled@@3HA, 0 ; d3d_transparency_enabled
  00e8f	74 07		 je	 SHORT $LN35@draw_wbuff

; 482  : 		{
; 483  : 
; 484  : 			draw_temporary_translucent_polygons ();

  00e91	e8 00 00 00 00	 call	 ?draw_temporary_translucent_polygons@@YGXXZ ; draw_temporary_translucent_polygons

; 485  : 		}
; 486  : 		else

  00e96	eb 39		 jmp	 SHORT $LN38@draw_wbuff
$LN35@draw_wbuff:

; 487  : 		{
; 488  : 
; 489  : 			set_d3d_alpha_fog_zbuffer ( TRUE, FALSE, TRUE, FALSE );

  00e98	6a 00		 push	 0
  00e9a	6a 01		 push	 1
  00e9c	6a 00		 push	 0
  00e9e	6a 01		 push	 1
  00ea0	e8 00 00 00 00	 call	 ?set_d3d_alpha_fog_zbuffer@@YGXHHHH@Z ; set_d3d_alpha_fog_zbuffer

; 490  : 
; 491  : 			draw_temporary_translucent_polygons ();

  00ea5	e8 00 00 00 00	 call	 ?draw_temporary_translucent_polygons@@YGXXZ ; draw_temporary_translucent_polygons

; 492  : 
; 493  : 			if ( active_3d_environment->fogmode == FOGMODE_OFF )

  00eaa	a1 00 00 00 00	 mov	 eax, DWORD PTR ?active_3d_environment@@3PAUENV_3D@@A ; active_3d_environment
  00eaf	83 78 44 03	 cmp	 DWORD PTR [eax+68], 3
  00eb3	75 0f		 jne	 SHORT $LN37@draw_wbuff

; 494  : 			{
; 495  : 
; 496  : 				set_d3d_alpha_fog_zbuffer ( FALSE, FALSE, TRUE, TRUE );

  00eb5	6a 01		 push	 1
  00eb7	6a 01		 push	 1
  00eb9	6a 00		 push	 0
  00ebb	6a 00		 push	 0
  00ebd	e8 00 00 00 00	 call	 ?set_d3d_alpha_fog_zbuffer@@YGXHHHH@Z ; set_d3d_alpha_fog_zbuffer

; 497  : 			}
; 498  : 			else

  00ec2	eb 0d		 jmp	 SHORT $LN38@draw_wbuff
$LN37@draw_wbuff:

; 499  : 			{
; 500  : 
; 501  : 				set_d3d_alpha_fog_zbuffer ( FALSE, TRUE, TRUE, TRUE );

  00ec4	6a 01		 push	 1
  00ec6	6a 01		 push	 1
  00ec8	6a 01		 push	 1
  00eca	6a 00		 push	 0
  00ecc	e8 00 00 00 00	 call	 ?set_d3d_alpha_fog_zbuffer@@YGXHHHH@Z ; set_d3d_alpha_fog_zbuffer
$LN38@draw_wbuff:

; 502  : 			}
; 503  : 		}
; 504  : 	}
; 505  : 
; 506  : 	if ( current_object_3d_translucent_surfaces )

  00ed1	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?current_object_3d_translucent_surfaces@@3PAUTRANSLUCENT_OBJECT_SURFACE@@A, 0 ; current_object_3d_translucent_surfaces
  00ed8	0f 84 a7 00 00
	00		 je	 $LN46@draw_wbuff

; 507  : 	{
; 508  : 
; 509  : 		if ( obj->requires_immediate_render )

  00ede	8b 45 08	 mov	 eax, DWORD PTR _obj$[ebp]
  00ee1	8b 48 50	 mov	 ecx, DWORD PTR [eax+80]
  00ee4	d1 e9		 shr	 ecx, 1
  00ee6	83 e1 01	 and	 ecx, 1
  00ee9	74 61		 je	 SHORT $LN40@draw_wbuff

; 510  : 		{
; 511  : 
; 512  : 			if ( d3d_transparency_enabled )

  00eeb	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?d3d_transparency_enabled@@3HA, 0 ; d3d_transparency_enabled
  00ef2	74 0d		 je	 SHORT $LN42@draw_wbuff

; 513  : 			{
; 514  : 
; 515  : 				draw_3d_translucent_object ( current_object_3d_translucent_surfaces );

  00ef4	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_translucent_surfaces@@3PAUTRANSLUCENT_OBJECT_SURFACE@@A ; current_object_3d_translucent_surfaces
  00ef9	50		 push	 eax
  00efa	e8 00 00 00 00	 call	 ?draw_3d_translucent_object@@YGXPAUTRANSLUCENT_OBJECT_SURFACE@@@Z ; draw_3d_translucent_object

; 516  : 			}
; 517  : 			else

  00eff	eb 3f		 jmp	 SHORT $LN45@draw_wbuff
$LN42@draw_wbuff:

; 518  : 			{
; 519  : 
; 520  : 				set_d3d_alpha_fog_zbuffer ( TRUE, FALSE, TRUE, FALSE );

  00f01	6a 00		 push	 0
  00f03	6a 01		 push	 1
  00f05	6a 00		 push	 0
  00f07	6a 01		 push	 1
  00f09	e8 00 00 00 00	 call	 ?set_d3d_alpha_fog_zbuffer@@YGXHHHH@Z ; set_d3d_alpha_fog_zbuffer

; 521  : 				
; 522  : 				draw_3d_translucent_object ( current_object_3d_translucent_surfaces );

  00f0e	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_object_3d_translucent_surfaces@@3PAUTRANSLUCENT_OBJECT_SURFACE@@A ; current_object_3d_translucent_surfaces
  00f13	50		 push	 eax
  00f14	e8 00 00 00 00	 call	 ?draw_3d_translucent_object@@YGXPAUTRANSLUCENT_OBJECT_SURFACE@@@Z ; draw_3d_translucent_object

; 523  : 
; 524  : 				if ( active_3d_environment->fogmode == FOGMODE_OFF )

  00f19	a1 00 00 00 00	 mov	 eax, DWORD PTR ?active_3d_environment@@3PAUENV_3D@@A ; active_3d_environment
  00f1e	83 78 44 03	 cmp	 DWORD PTR [eax+68], 3
  00f22	75 0f		 jne	 SHORT $LN44@draw_wbuff

; 525  : 				{
; 526  : 
; 527  : 				set_d3d_alpha_fog_zbuffer ( FALSE, FALSE, TRUE, TRUE );

  00f24	6a 01		 push	 1
  00f26	6a 01		 push	 1
  00f28	6a 00		 push	 0
  00f2a	6a 00		 push	 0
  00f2c	e8 00 00 00 00	 call	 ?set_d3d_alpha_fog_zbuffer@@YGXHHHH@Z ; set_d3d_alpha_fog_zbuffer

; 528  : 				}
; 529  : 				else

  00f31	eb 0d		 jmp	 SHORT $LN45@draw_wbuff
$LN44@draw_wbuff:

; 530  : 				{
; 531  : 
; 532  : 				set_d3d_alpha_fog_zbuffer ( FALSE, TRUE, TRUE, TRUE );

  00f33	6a 01		 push	 1
  00f35	6a 01		 push	 1
  00f37	6a 01		 push	 1
  00f39	6a 00		 push	 0
  00f3b	e8 00 00 00 00	 call	 ?set_d3d_alpha_fog_zbuffer@@YGXHHHH@Z ; set_d3d_alpha_fog_zbuffer
$LN45@draw_wbuff:

; 533  : 				}
; 534  : 			}
; 535  : 
; 536  : 			object_3d_transparent_surface_index = previous_object_3d_transparent_surface_index;

  00f40	a1 00 00 00 00	 mov	 eax, DWORD PTR ?previous_object_3d_transparent_surface_index@@3HA ; previous_object_3d_transparent_surface_index
  00f45	a3 00 00 00 00	 mov	 DWORD PTR ?object_3d_transparent_surface_index@@3HA, eax ; object_3d_transparent_surface_index

; 537  : 		}
; 538  : 		else

  00f4a	eb 39		 jmp	 SHORT $LN46@draw_wbuff
$LN40@draw_wbuff:

; 539  : 		{
; 540  : 
; 541  : 			scene_slot_drawing_list
; 542  : 				*buffer;
; 543  : 
; 544  : 			//
; 545  : 			// Insert surface list into renderer
; 546  : 			//
; 547  : 
; 548  : 			buffer = get_3d_scene_slot ();

  00f4c	e8 00 00 00 00	 call	 ?get_3d_scene_slot@@YGPAUSCENE_SLOT_DRAWING_LIST@@XZ ; get_3d_scene_slot
  00f51	89 45 a4	 mov	 DWORD PTR _buffer$4[ebp], eax

; 549  : 
; 550  : 			if ( buffer )

  00f54	83 7d a4 00	 cmp	 DWORD PTR _buffer$4[ebp], 0
  00f58	74 2b		 je	 SHORT $LN46@draw_wbuff

; 551  : 			{
; 552  : 
; 553  : 				buffer->type = OBJECT_3D_DRAW_TYPE_TRANSLUCENT_OBJECT;

  00f5a	8b 45 a4	 mov	 eax, DWORD PTR _buffer$4[ebp]
  00f5d	c7 40 08 15 00
	00 00		 mov	 DWORD PTR [eax+8], 21	; 00000015H

; 554  : 
; 555  : 				buffer->z = *( ( int * ) &obj->view_position );

  00f64	8b 45 a4	 mov	 eax, DWORD PTR _buffer$4[ebp]
  00f67	8b 4d 08	 mov	 ecx, DWORD PTR _obj$[ebp]
  00f6a	8b 51 38	 mov	 edx, DWORD PTR [ecx+56]
  00f6d	89 50 0c	 mov	 DWORD PTR [eax+12], edx

; 556  : 
; 557  : 				buffer->translucent_surfaces = current_object_3d_translucent_surfaces;

  00f70	8b 45 a4	 mov	 eax, DWORD PTR _buffer$4[ebp]
  00f73	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_object_3d_translucent_surfaces@@3PAUTRANSLUCENT_OBJECT_SURFACE@@A ; current_object_3d_translucent_surfaces
  00f79	89 48 10	 mov	 DWORD PTR [eax+16], ecx

; 558  : 
; 559  : 				insert_transparent_buffer_into_3d_scene ( buffer );

  00f7c	8b 45 a4	 mov	 eax, DWORD PTR _buffer$4[ebp]
  00f7f	50		 push	 eax
  00f80	e8 00 00 00 00	 call	 ?insert_transparent_buffer_into_3d_scene@@YGXPAUSCENE_SLOT_DRAWING_LIST@@@Z ; insert_transparent_buffer_into_3d_scene
$LN46@draw_wbuff:

; 560  : 			}
; 561  : 		}
; 562  : 	}
; 563  : 
; 564  : 	//
; 565  : 	// Now finish sorting the translucent polygons.
; 566  : 	//
; 567  : 
; 568  : 	if ( ( obj->object_sprite_lights ) && ( scene->number_of_sprite_lights ) && ( object_3d_sprite_flare_texture ) )

  00f85	8b 45 08	 mov	 eax, DWORD PTR _obj$[ebp]
  00f88	8b 48 50	 mov	 ecx, DWORD PTR [eax+80]
  00f8b	c1 e9 0c	 shr	 ecx, 12			; 0000000cH
  00f8e	83 e1 01	 and	 ecx, 1
  00f91	0f 84 c9 02 00
	00		 je	 $LN9@draw_wbuff
  00f97	8b 45 d0	 mov	 eax, DWORD PTR _scene$[ebp]
  00f9a	83 78 30 00	 cmp	 DWORD PTR [eax+48], 0
  00f9e	0f 84 bc 02 00
	00		 je	 $LN9@draw_wbuff
  00fa4	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?object_3d_sprite_flare_texture@@3PAUSCREEN@@A, 0 ; object_3d_sprite_flare_texture
  00fab	0f 84 af 02 00
	00		 je	 $LN9@draw_wbuff

; 569  : 	{
; 570  : 
; 571  : 		object_3d_sprite
; 572  : 			sprite;
; 573  : 
; 574  : 		int
; 575  : 			count;
; 576  : 
; 577  : 		for ( count = 0; count < scene->number_of_sprite_lights; count++ )

  00fb1	c7 45 80 00 00
	00 00		 mov	 DWORD PTR _count$2[ebp], 0
  00fb8	eb 09		 jmp	 SHORT $LN10@draw_wbuff
$LN8@draw_wbuff:
  00fba	8b 45 80	 mov	 eax, DWORD PTR _count$2[ebp]
  00fbd	83 c0 01	 add	 eax, 1
  00fc0	89 45 80	 mov	 DWORD PTR _count$2[ebp], eax
$LN10@draw_wbuff:
  00fc3	8b 45 d0	 mov	 eax, DWORD PTR _scene$[ebp]
  00fc6	8b 4d 80	 mov	 ecx, DWORD PTR _count$2[ebp]
  00fc9	3b 48 30	 cmp	 ecx, DWORD PTR [eax+48]
  00fcc	0f 8d 8e 02 00
	00		 jge	 $LN9@draw_wbuff

; 578  : 		{
; 579  : 
; 580  : 			vec3d
; 581  : 				position;
; 582  : 
; 583  : 			position.x = scene->sprite_lights[count].position.x * obj->vp.attitude[0][0] +

  00fd2	6b 45 80 1c	 imul	 eax, DWORD PTR _count$2[ebp], 28
  00fd6	8b 4d d0	 mov	 ecx, DWORD PTR _scene$[ebp]
  00fd9	8b 51 58	 mov	 edx, DWORD PTR [ecx+88]
  00fdc	b9 0c 00 00 00	 mov	 ecx, 12			; 0000000cH
  00fe1	6b c9 00	 imul	 ecx, ecx, 0
  00fe4	8b 75 08	 mov	 esi, DWORD PTR _obj$[ebp]
  00fe7	8d 4c 0e 14	 lea	 ecx, DWORD PTR [esi+ecx+20]
  00feb	be 04 00 00 00	 mov	 esi, 4
  00ff0	6b f6 00	 imul	 esi, esi, 0
  00ff3	f3 0f 10 04 02	 movss	 xmm0, DWORD PTR [edx+eax]
  00ff8	f3 0f 59 04 31	 mulss	 xmm0, DWORD PTR [ecx+esi]
  00ffd	6b 55 80 1c	 imul	 edx, DWORD PTR _count$2[ebp], 28
  01001	8b 45 d0	 mov	 eax, DWORD PTR _scene$[ebp]
  01004	8b 48 58	 mov	 ecx, DWORD PTR [eax+88]
  01007	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  0100c	c1 e0 00	 shl	 eax, 0
  0100f	8b 75 08	 mov	 esi, DWORD PTR _obj$[ebp]
  01012	8d 44 06 14	 lea	 eax, DWORD PTR [esi+eax+20]
  01016	be 04 00 00 00	 mov	 esi, 4
  0101b	6b f6 00	 imul	 esi, esi, 0
  0101e	f3 0f 10 4c 11
	04		 movss	 xmm1, DWORD PTR [ecx+edx+4]
  01024	f3 0f 59 0c 30	 mulss	 xmm1, DWORD PTR [eax+esi]
  01029	f3 0f 58 c1	 addss	 xmm0, xmm1
  0102d	6b 4d 80 1c	 imul	 ecx, DWORD PTR _count$2[ebp], 28
  01031	8b 55 d0	 mov	 edx, DWORD PTR _scene$[ebp]
  01034	8b 42 58	 mov	 eax, DWORD PTR [edx+88]
  01037	ba 0c 00 00 00	 mov	 edx, 12			; 0000000cH
  0103c	d1 e2		 shl	 edx, 1
  0103e	8b 75 08	 mov	 esi, DWORD PTR _obj$[ebp]
  01041	8d 54 16 14	 lea	 edx, DWORD PTR [esi+edx+20]
  01045	be 04 00 00 00	 mov	 esi, 4
  0104a	6b f6 00	 imul	 esi, esi, 0
  0104d	f3 0f 10 4c 08
	08		 movss	 xmm1, DWORD PTR [eax+ecx+8]
  01053	f3 0f 59 0c 32	 mulss	 xmm1, DWORD PTR [edx+esi]
  01058	f3 0f 58 c1	 addss	 xmm0, xmm1
  0105c	f3 0f 11 85 74
	ff ff ff	 movss	 DWORD PTR _position$1[ebp], xmm0

; 584  : 								scene->sprite_lights[count].position.y * obj->vp.attitude[1][0] +
; 585  : 								scene->sprite_lights[count].position.z * obj->vp.attitude[2][0];
; 586  : 
; 587  : 			position.y = scene->sprite_lights[count].position.x * obj->vp.attitude[0][1] +

  01064	6b 45 80 1c	 imul	 eax, DWORD PTR _count$2[ebp], 28
  01068	8b 4d d0	 mov	 ecx, DWORD PTR _scene$[ebp]
  0106b	8b 51 58	 mov	 edx, DWORD PTR [ecx+88]
  0106e	b9 0c 00 00 00	 mov	 ecx, 12			; 0000000cH
  01073	6b c9 00	 imul	 ecx, ecx, 0
  01076	8b 75 08	 mov	 esi, DWORD PTR _obj$[ebp]
  01079	8d 4c 0e 14	 lea	 ecx, DWORD PTR [esi+ecx+20]
  0107d	be 04 00 00 00	 mov	 esi, 4
  01082	c1 e6 00	 shl	 esi, 0
  01085	f3 0f 10 04 02	 movss	 xmm0, DWORD PTR [edx+eax]
  0108a	f3 0f 59 04 31	 mulss	 xmm0, DWORD PTR [ecx+esi]
  0108f	6b 55 80 1c	 imul	 edx, DWORD PTR _count$2[ebp], 28
  01093	8b 45 d0	 mov	 eax, DWORD PTR _scene$[ebp]
  01096	8b 48 58	 mov	 ecx, DWORD PTR [eax+88]
  01099	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  0109e	c1 e0 00	 shl	 eax, 0
  010a1	8b 75 08	 mov	 esi, DWORD PTR _obj$[ebp]
  010a4	8d 44 06 14	 lea	 eax, DWORD PTR [esi+eax+20]
  010a8	be 04 00 00 00	 mov	 esi, 4
  010ad	c1 e6 00	 shl	 esi, 0
  010b0	f3 0f 10 4c 11
	04		 movss	 xmm1, DWORD PTR [ecx+edx+4]
  010b6	f3 0f 59 0c 30	 mulss	 xmm1, DWORD PTR [eax+esi]
  010bb	f3 0f 58 c1	 addss	 xmm0, xmm1
  010bf	6b 4d 80 1c	 imul	 ecx, DWORD PTR _count$2[ebp], 28
  010c3	8b 55 d0	 mov	 edx, DWORD PTR _scene$[ebp]
  010c6	8b 42 58	 mov	 eax, DWORD PTR [edx+88]
  010c9	ba 0c 00 00 00	 mov	 edx, 12			; 0000000cH
  010ce	d1 e2		 shl	 edx, 1
  010d0	8b 75 08	 mov	 esi, DWORD PTR _obj$[ebp]
  010d3	8d 54 16 14	 lea	 edx, DWORD PTR [esi+edx+20]
  010d7	be 04 00 00 00	 mov	 esi, 4
  010dc	c1 e6 00	 shl	 esi, 0
  010df	f3 0f 10 4c 08
	08		 movss	 xmm1, DWORD PTR [eax+ecx+8]
  010e5	f3 0f 59 0c 32	 mulss	 xmm1, DWORD PTR [edx+esi]
  010ea	f3 0f 58 c1	 addss	 xmm0, xmm1
  010ee	f3 0f 11 85 78
	ff ff ff	 movss	 DWORD PTR _position$1[ebp+4], xmm0

; 588  : 								scene->sprite_lights[count].position.y * obj->vp.attitude[1][1] +
; 589  : 								scene->sprite_lights[count].position.z * obj->vp.attitude[2][1];
; 590  : 
; 591  : 			position.z = scene->sprite_lights[count].position.x * obj->vp.attitude[0][2] +

  010f6	6b 45 80 1c	 imul	 eax, DWORD PTR _count$2[ebp], 28
  010fa	8b 4d d0	 mov	 ecx, DWORD PTR _scene$[ebp]
  010fd	8b 51 58	 mov	 edx, DWORD PTR [ecx+88]
  01100	b9 0c 00 00 00	 mov	 ecx, 12			; 0000000cH
  01105	6b c9 00	 imul	 ecx, ecx, 0
  01108	8b 75 08	 mov	 esi, DWORD PTR _obj$[ebp]
  0110b	8d 4c 0e 14	 lea	 ecx, DWORD PTR [esi+ecx+20]
  0110f	be 04 00 00 00	 mov	 esi, 4
  01114	d1 e6		 shl	 esi, 1
  01116	f3 0f 10 04 02	 movss	 xmm0, DWORD PTR [edx+eax]
  0111b	f3 0f 59 04 31	 mulss	 xmm0, DWORD PTR [ecx+esi]
  01120	6b 55 80 1c	 imul	 edx, DWORD PTR _count$2[ebp], 28
  01124	8b 45 d0	 mov	 eax, DWORD PTR _scene$[ebp]
  01127	8b 48 58	 mov	 ecx, DWORD PTR [eax+88]
  0112a	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  0112f	c1 e0 00	 shl	 eax, 0
  01132	8b 75 08	 mov	 esi, DWORD PTR _obj$[ebp]
  01135	8d 44 06 14	 lea	 eax, DWORD PTR [esi+eax+20]
  01139	be 04 00 00 00	 mov	 esi, 4
  0113e	d1 e6		 shl	 esi, 1
  01140	f3 0f 10 4c 11
	04		 movss	 xmm1, DWORD PTR [ecx+edx+4]
  01146	f3 0f 59 0c 30	 mulss	 xmm1, DWORD PTR [eax+esi]
  0114b	f3 0f 58 c1	 addss	 xmm0, xmm1
  0114f	6b 4d 80 1c	 imul	 ecx, DWORD PTR _count$2[ebp], 28
  01153	8b 55 d0	 mov	 edx, DWORD PTR _scene$[ebp]
  01156	8b 42 58	 mov	 eax, DWORD PTR [edx+88]
  01159	ba 0c 00 00 00	 mov	 edx, 12			; 0000000cH
  0115e	d1 e2		 shl	 edx, 1
  01160	8b 75 08	 mov	 esi, DWORD PTR _obj$[ebp]
  01163	8d 54 16 14	 lea	 edx, DWORD PTR [esi+edx+20]
  01167	be 04 00 00 00	 mov	 esi, 4
  0116c	d1 e6		 shl	 esi, 1
  0116e	f3 0f 10 4c 08
	08		 movss	 xmm1, DWORD PTR [eax+ecx+8]
  01174	f3 0f 59 0c 32	 mulss	 xmm1, DWORD PTR [edx+esi]
  01179	f3 0f 58 c1	 addss	 xmm0, xmm1
  0117d	f3 0f 11 85 7c
	ff ff ff	 movss	 DWORD PTR _position$1[ebp+8], xmm0

; 592  : 								scene->sprite_lights[count].position.y * obj->vp.attitude[1][2] +
; 593  : 								scene->sprite_lights[count].position.z * obj->vp.attitude[2][2];
; 594  : 
; 595  : 			position.x += obj->vp.position.x;

  01185	8b 45 08	 mov	 eax, DWORD PTR _obj$[ebp]
  01188	f3 0f 10 85 74
	ff ff ff	 movss	 xmm0, DWORD PTR _position$1[ebp]
  01190	f3 0f 58 40 08	 addss	 xmm0, DWORD PTR [eax+8]
  01195	f3 0f 11 85 74
	ff ff ff	 movss	 DWORD PTR _position$1[ebp], xmm0

; 596  : 			position.y += obj->vp.position.y;

  0119d	8b 45 08	 mov	 eax, DWORD PTR _obj$[ebp]
  011a0	f3 0f 10 85 78
	ff ff ff	 movss	 xmm0, DWORD PTR _position$1[ebp+4]
  011a8	f3 0f 58 40 0c	 addss	 xmm0, DWORD PTR [eax+12]
  011ad	f3 0f 11 85 78
	ff ff ff	 movss	 DWORD PTR _position$1[ebp+4], xmm0

; 597  : 			position.z += obj->vp.position.z;

  011b5	8b 45 08	 mov	 eax, DWORD PTR _obj$[ebp]
  011b8	f3 0f 10 85 7c
	ff ff ff	 movss	 xmm0, DWORD PTR _position$1[ebp+8]
  011c0	f3 0f 58 40 10	 addss	 xmm0, DWORD PTR [eax+16]
  011c5	f3 0f 11 85 7c
	ff ff ff	 movss	 DWORD PTR _position$1[ebp+8], xmm0

; 598  : 
; 599  : 			sprite.position = position;

  011cd	8b 85 74 ff ff
	ff		 mov	 eax, DWORD PTR _position$1[ebp]
  011d3	89 45 84	 mov	 DWORD PTR _sprite$3[ebp], eax
  011d6	8b 8d 78 ff ff
	ff		 mov	 ecx, DWORD PTR _position$1[ebp+4]
  011dc	89 4d 88	 mov	 DWORD PTR _sprite$3[ebp+4], ecx
  011df	8b 95 7c ff ff
	ff		 mov	 edx, DWORD PTR _position$1[ebp+8]
  011e5	89 55 8c	 mov	 DWORD PTR _sprite$3[ebp+8], edx

; 600  : 			sprite.radius = scene->sprite_lights[count].scale.x * 4;

  011e8	6b 45 80 1c	 imul	 eax, DWORD PTR _count$2[ebp], 28
  011ec	8b 4d d0	 mov	 ecx, DWORD PTR _scene$[ebp]
  011ef	8b 51 58	 mov	 edx, DWORD PTR [ecx+88]
  011f2	f3 0f 10 44 02
	0c		 movss	 xmm0, DWORD PTR [edx+eax+12]
  011f8	f3 0f 59 05 00
	00 00 00	 mulss	 xmm0, DWORD PTR __real@40800000
  01200	f3 0f 11 45 94	 movss	 DWORD PTR _sprite$3[ebp+16], xmm0

; 601  : 			sprite.red = scene->sprite_lights[count].colour.red;

  01205	6b 45 80 1c	 imul	 eax, DWORD PTR _count$2[ebp], 28
  01209	8b 4d d0	 mov	 ecx, DWORD PTR _scene$[ebp]
  0120c	8b 51 58	 mov	 edx, DWORD PTR [ecx+88]
  0120f	8a 44 02 1a	 mov	 al, BYTE PTR [edx+eax+26]
  01213	88 45 92	 mov	 BYTE PTR _sprite$3[ebp+14], al

; 602  : 			sprite.green = scene->sprite_lights[count].colour.green;

  01216	6b 45 80 1c	 imul	 eax, DWORD PTR _count$2[ebp], 28
  0121a	8b 4d d0	 mov	 ecx, DWORD PTR _scene$[ebp]
  0121d	8b 51 58	 mov	 edx, DWORD PTR [ecx+88]
  01220	8a 44 02 19	 mov	 al, BYTE PTR [edx+eax+25]
  01224	88 45 91	 mov	 BYTE PTR _sprite$3[ebp+13], al

; 603  : 			sprite.blue = scene->sprite_lights[count].colour.blue;

  01227	6b 45 80 1c	 imul	 eax, DWORD PTR _count$2[ebp], 28
  0122b	8b 4d d0	 mov	 ecx, DWORD PTR _scene$[ebp]
  0122e	8b 51 58	 mov	 edx, DWORD PTR [ecx+88]
  01231	8a 44 02 18	 mov	 al, BYTE PTR [edx+eax+24]
  01235	88 45 90	 mov	 BYTE PTR _sprite$3[ebp+12], al

; 604  : 			sprite.additive = TRUE;

  01238	c7 45 9c 01 00
	00 00		 mov	 DWORD PTR _sprite$3[ebp+24], 1

; 605  : 			sprite.texture = object_3d_sprite_flare_texture;

  0123f	a1 00 00 00 00	 mov	 eax, DWORD PTR ?object_3d_sprite_flare_texture@@3PAUSCREEN@@A ; object_3d_sprite_flare_texture
  01244	89 45 a0	 mov	 DWORD PTR _sprite$3[ebp+28], eax

; 606  : 
; 607  : 			insert_zbiased_object_into_3d_scene ( OBJECT_3D_DRAW_TYPE_SPRITE, &sprite, 0 );

  01247	51		 push	 ecx
  01248	0f 57 c0	 xorps	 xmm0, xmm0
  0124b	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  01250	8d 45 84	 lea	 eax, DWORD PTR _sprite$3[ebp]
  01253	50		 push	 eax
  01254	6a 10		 push	 16			; 00000010H
  01256	e8 00 00 00 00	 call	 ?insert_zbiased_object_into_3d_scene@@YGXW4OBJECT_3D_DRAWING_TYPES@@PAXM@Z ; insert_zbiased_object_into_3d_scene

; 608  : 		}

  0125b	e9 5a fd ff ff	 jmp	 $LN8@draw_wbuff
$LN9@draw_wbuff:

; 609  : 	}
; 610  : }

  01260	5f		 pop	 edi
  01261	5e		 pop	 esi
  01262	5b		 pop	 ebx
  01263	8b e5		 mov	 esp, ebp
  01265	5d		 pop	 ebp
  01266	c2 0c 00	 ret	 12			; 0000000cH
?draw_wbuffered_3d_object@@YGXPAUOBJECT_3D_INSTANCE@@HH@Z ENDP ; draw_wbuffered_3d_object
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\modules\system\fpu.h
;	COMDAT ?asm_convert_float_to_int@@YGXMPAH@Z
_TEXT	SEGMENT
_value$ = 8						; size = 4
_integer$ = 12						; size = 4
?asm_convert_float_to_int@@YGXMPAH@Z PROC		; asm_convert_float_to_int, COMDAT

; 130  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 131  : 
; 132  : 	__asm
; 133  : 	{
; 134  : 
; 135  : 		fld value

  00009	d9 45 08	 fld	 DWORD PTR _value$[ebp]

; 136  : 		mov edx, integer

  0000c	8b 55 0c	 mov	 edx, DWORD PTR _integer$[ebp]

; 137  : 		fistp dword ptr [edx]

  0000f	db 1a		 fistp	 DWORD PTR [edx]

; 138  : 	}
; 139  : }

  00011	5f		 pop	 edi
  00012	5e		 pop	 esi
  00013	5b		 pop	 ebx
  00014	8b e5		 mov	 esp, ebp
  00016	5d		 pop	 ebp
  00017	c2 08 00	 ret	 8
?asm_convert_float_to_int@@YGXMPAH@Z ENDP		; asm_convert_float_to_int
_TEXT	ENDS
END
