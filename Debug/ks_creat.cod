; Listing generated by Microsoft (R) Optimizing Compiler Version 19.16.27045.0 

	TITLE	C:\Users\nhv90\Projects\eech\aphavoc\source\entity\special\keysite\ks_creat.c
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB MSVCRTD
INCLUDELIB OLDNAMES

PUBLIC	___local_stdio_printf_options
PUBLIC	__vsnprintf_l
PUBLIC	__vsprintf_l
PUBLIC	_sprintf
PUBLIC	?overload_keysite_create_functions@@YGXXZ	; overload_keysite_create_functions
PUBLIC	?_OptionsStorage@?1??__local_stdio_printf_options@@9@4_KA ; `__local_stdio_printf_options'::`2'::_OptionsStorage
PUBLIC	?__LINE__Var@?0??create_local@@YGPAUENTITY@@W4ENTITY_TYPES@@HPAD@Z@4JA ; `create_local'::`1'::__LINE__Var
PUBLIC	??_C@_0EO@EJFNAIEI@c?3?2users?2nhv90?2projects?2eech?2ap@ ; `string'
PUBLIC	??_C@_0CL@OOPHFNJI@assert_local_create_entity_inde@ ; `string'
PUBLIC	??_C@_0L@FFGADHLA@KEYSITE?5?$CFd@		; `string'
PUBLIC	??_C@_0CB@MIOHHNEG@raw?9?$DOside?5?$CB?$DN?5ENTITY_SIDE_NEUTRA@ ; `string'
PUBLIC	??_C@_0CO@CAOAKINI@entity_sub_type_keysite_valid?5?$CI@ ; `string'
PUBLIC	??_C@_0DK@IHBDLLLD@keysite_database?5?$FLraw?9?$DOsub_type@ ; `string'
PUBLIC	??_C@_0GH@GICANLMA@keysite_database?5?$FLraw?9?$DOsub_type@ ; `string'
PUBLIC	??_C@_0DD@LJPBJOMP@get_local_entity_type?5?$CIforce?$CJ?5?$DN@ ; `string'
PUBLIC	??_C@_0BC@PODNONFH@ASSERT?5?$CFs?5?$CI?$CFs?3?$CFd?$CJ@ ; `string'
PUBLIC	??_C@_05BINPNAAL@force@				; `string'
PUBLIC	??_C@_06IDGHNJOB@sector@			; `string'
PUBLIC	?__LINE__Var@?0??create_remote@@YGPAUENTITY@@W4ENTITY_TYPES@@HPAD@Z@4JA ; `create_remote'::`1'::__LINE__Var
PUBLIC	??_C@_0CM@DHBIKIGD@assert_remote_create_entity_ind@ ; `string'
PUBLIC	?__LINE__Var@?0??create_server@@YGPAUENTITY@@W4ENTITY_TYPES@@HPAD@Z@4JA ; `create_server'::`1'::__LINE__Var
PUBLIC	??_C@_0CB@CFOCLFOK@assert_client_server_local_fn?5?$CI@ ; `string'
PUBLIC	??_C@_0CC@BNNNEGEG@assert_client_server_remote_fn?5@ ; `string'
PUBLIC	?__LINE__Var@?0??create_client@@YGPAUENTITY@@W4ENTITY_TYPES@@HPAD@Z@4JA ; `create_client'::`1'::__LINE__Var
PUBLIC	__real@3f00002000400080
PUBLIC	__real@3ff0000000000000
PUBLIC	__real@404e000000000000
PUBLIC	__real@4066800000000000
PUBLIC	__real@41200000
EXTRN	__imp____stdio_common_vsprintf:PROC
EXTRN	_memset:PROC
EXTRN	__imp__strncpy:PROC
EXTRN	?process_assert@@YGXPBD0H@Z:PROC		; process_assert
EXTRN	?debug_fatal@@YAXPBDZZ:PROC			; debug_fatal
EXTRN	?malloc_fast_memory@@YGPAXI@Z:PROC		; malloc_fast_memory
EXTRN	?set_local_entity_attributes@@YGXPAUENTITY@@PAD@Z:PROC ; set_local_entity_attributes
EXTRN	?insert_local_entity_into_parents_child_list@@YGXPAUENTITY@@W4LIST_TYPES@@00@Z:PROC ; insert_local_entity_into_parents_child_list
EXTRN	?create_local_entity@@YAPAUENTITY@@W4ENTITY_TYPES@@HZZ:PROC ; create_local_entity
EXTRN	?transmit_entity_comms_message@@YAXW4ENTITY_COMMS_MESSAGES@@PAUENTITY@@ZZ:PROC ; transmit_entity_comms_message
EXTRN	?assert_client_server_local_fn@@YGHXZ:PROC	; assert_client_server_local_fn
EXTRN	?assert_client_server_remote_fn@@YGHXZ:PROC	; assert_client_server_remote_fn
EXTRN	?assert_local_create_entity_index@@YGHH@Z:PROC	; assert_local_create_entity_index
EXTRN	?assert_remote_create_entity_index@@YGHH@Z:PROC	; assert_remote_create_entity_index
EXTRN	?get_free_entity@@YGPAUENTITY@@H@Z:PROC		; get_free_entity
EXTRN	?update_keysite_cargo@@YGXPAUENTITY@@MHM@Z:PROC	; update_keysite_cargo
EXTRN	?get_local_sector_entity@@YGPAUENTITY@@PAUVEC3D@@@Z:PROC ; get_local_sector_entity
EXTRN	?update_imap_sector_side@@YGXPAUENTITY@@H@Z:PROC ; update_imap_sector_side
EXTRN	?update_imap_importance_level@@YGXPAUENTITY@@H@Z:PROC ; update_imap_importance_level
EXTRN	?update_keysite_distance_to_friendly_base@@YGXPAUENTITY@@W4ENTITY_SIDES@@@Z:PROC ; update_keysite_distance_to_friendly_base
EXTRN	?random_number_seed@@3HA:DWORD			; random_number_seed
EXTRN	?null_entity_pointer_message@@3PBDB:DWORD	; null_entity_pointer_message
EXTRN	?system_comms_data_flow@@3W4COMMS_DATA_FLOW_TYPES@@A:DWORD ; system_comms_data_flow
EXTRN	?world_map@@3UWORLD_MAP_DATA@@A:BYTE		; world_map
EXTRN	?overload_invalid_list_type_message@@3PBDB:DWORD ; overload_invalid_list_type_message
EXTRN	?fn_get_local_entity_parent@@3PAY0CN@P6GPAUENTITY@@PAU1@W4LIST_TYPES@@@ZA:BYTE ; fn_get_local_entity_parent
EXTRN	?fn_create_local_entity@@3PAP6GPAUENTITY@@W4ENTITY_TYPES@@HPAD@ZA:BYTE ; fn_create_local_entity
EXTRN	?fn_create_client_server_entity@@3PAY01P6GPAUENTITY@@W4ENTITY_TYPES@@HPAD@ZA:BYTE ; fn_create_client_server_entity
EXTRN	?overload_invalid_int_type_message@@3PBDB:DWORD	; overload_invalid_int_type_message
EXTRN	?fn_set_local_entity_int_value@@3PAY0BBH@P6GXPAUENTITY@@W4INT_TYPES@@H@ZA:BYTE ; fn_set_local_entity_int_value
EXTRN	?fn_get_local_entity_int_value@@3PAY0BBH@P6GHPAUENTITY@@W4INT_TYPES@@@ZA:BYTE ; fn_get_local_entity_int_value
EXTRN	?entities@@3PAUENTITY@@A:DWORD			; entities
EXTRN	?keysite_database@@3PAUKEYSITE_DATA@@A:BYTE	; keysite_database
EXTRN	?update_entity@@3PAUENTITY@@A:DWORD		; update_entity
EXTRN	__fltused:DWORD
;	COMDAT ?_OptionsStorage@?1??__local_stdio_printf_options@@9@4_KA
_BSS	SEGMENT
?_OptionsStorage@?1??__local_stdio_printf_options@@9@4_KA DQ 01H DUP (?) ; `__local_stdio_printf_options'::`2'::_OptionsStorage
_BSS	ENDS
;	COMDAT __real@41200000
CONST	SEGMENT
__real@41200000 DD 041200000r			; 10
CONST	ENDS
;	COMDAT __real@4066800000000000
CONST	SEGMENT
__real@4066800000000000 DQ 04066800000000000r	; 180
CONST	ENDS
;	COMDAT __real@404e000000000000
CONST	SEGMENT
__real@404e000000000000 DQ 0404e000000000000r	; 60
CONST	ENDS
;	COMDAT __real@3ff0000000000000
CONST	SEGMENT
__real@3ff0000000000000 DQ 03ff0000000000000r	; 1
CONST	ENDS
;	COMDAT __real@3f00002000400080
CONST	SEGMENT
__real@3f00002000400080 DQ 03f00002000400080r	; 3.05185e-05
CONST	ENDS
;	COMDAT ?__LINE__Var@?0??create_client@@YGPAUENTITY@@W4ENTITY_TYPES@@HPAD@Z@4JA
_DATA	SEGMENT
?__LINE__Var@?0??create_client@@YGPAUENTITY@@W4ENTITY_TYPES@@HPAD@Z@4JA DD 0142H ; `create_client'::`1'::__LINE__Var
_DATA	ENDS
;	COMDAT ??_C@_0CC@BNNNEGEG@assert_client_server_remote_fn?5@
CONST	SEGMENT
??_C@_0CC@BNNNEGEG@assert_client_server_remote_fn?5@ DB 'assert_client_se'
	DB	'rver_remote_fn ()', 00H			; `string'
CONST	ENDS
;	COMDAT ??_C@_0CB@CFOCLFOK@assert_client_server_local_fn?5?$CI@
CONST	SEGMENT
??_C@_0CB@CFOCLFOK@assert_client_server_local_fn?5?$CI@ DB 'assert_client'
	DB	'_server_local_fn ()', 00H			; `string'
CONST	ENDS
;	COMDAT ?__LINE__Var@?0??create_server@@YGPAUENTITY@@W4ENTITY_TYPES@@HPAD@Z@4JA
_DATA	SEGMENT
?__LINE__Var@?0??create_server@@YGPAUENTITY@@W4ENTITY_TYPES@@HPAD@Z@4JA DD 012bH ; `create_server'::`1'::__LINE__Var
_DATA	ENDS
;	COMDAT ??_C@_0CM@DHBIKIGD@assert_remote_create_entity_ind@
CONST	SEGMENT
??_C@_0CM@DHBIKIGD@assert_remote_create_entity_ind@ DB 'assert_remote_cre'
	DB	'ate_entity_index ((index))', 00H		; `string'
CONST	ENDS
;	COMDAT ?__LINE__Var@?0??create_remote@@YGPAUENTITY@@W4ENTITY_TYPES@@HPAD@Z@4JA
_DATA	SEGMENT
?__LINE__Var@?0??create_remote@@YGPAUENTITY@@W4ENTITY_TYPES@@HPAD@Z@4JA DD 0118H ; `create_remote'::`1'::__LINE__Var
_DATA	ENDS
;	COMDAT ??_C@_06IDGHNJOB@sector@
CONST	SEGMENT
??_C@_06IDGHNJOB@sector@ DB 'sector', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_05BINPNAAL@force@
CONST	SEGMENT
??_C@_05BINPNAAL@force@ DB 'force', 00H			; `string'
CONST	ENDS
;	COMDAT ??_C@_0BC@PODNONFH@ASSERT?5?$CFs?5?$CI?$CFs?3?$CFd?$CJ@
CONST	SEGMENT
??_C@_0BC@PODNONFH@ASSERT?5?$CFs?5?$CI?$CFs?3?$CFd?$CJ@ DB 'ASSERT %s (%s'
	DB	':%d)', 00H					; `string'
CONST	ENDS
;	COMDAT ??_C@_0DD@LJPBJOMP@get_local_entity_type?5?$CIforce?$CJ?5?$DN@
CONST	SEGMENT
??_C@_0DD@LJPBJOMP@get_local_entity_type?5?$CIforce?$CJ?5?$DN@ DB 'get_lo'
	DB	'cal_entity_type (force) == ENTITY_TYPE_FORCE', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0GH@GICANLMA@keysite_database?5?$FLraw?9?$DOsub_type@
CONST	SEGMENT
??_C@_0GH@GICANLMA@keysite_database?5?$FLraw?9?$DOsub_type@ DB 'keysite_d'
	DB	'atabase [raw->sub_type].repairable == keysite_database [raw->'
	DB	'sub_type].troop_insertion_target', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_0DK@IHBDLLLD@keysite_database?5?$FLraw?9?$DOsub_type@
CONST	SEGMENT
??_C@_0DK@IHBDLLLD@keysite_database?5?$FLraw?9?$DOsub_type@ DB 'keysite_d'
	DB	'atabase [raw->sub_type].minimum_efficiency < 1.0', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0CO@CAOAKINI@entity_sub_type_keysite_valid?5?$CI@
CONST	SEGMENT
??_C@_0CO@CAOAKINI@entity_sub_type_keysite_valid?5?$CI@ DB 'entity_sub_ty'
	DB	'pe_keysite_valid (raw->sub_type)', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_0CB@MIOHHNEG@raw?9?$DOside?5?$CB?$DN?5ENTITY_SIDE_NEUTRA@
CONST	SEGMENT
??_C@_0CB@MIOHHNEG@raw?9?$DOside?5?$CB?$DN?5ENTITY_SIDE_NEUTRA@ DB 'raw->'
	DB	'side != ENTITY_SIDE_NEUTRAL', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_0L@FFGADHLA@KEYSITE?5?$CFd@
CONST	SEGMENT
??_C@_0L@FFGADHLA@KEYSITE?5?$CFd@ DB 'KEYSITE %d', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_0CL@OOPHFNJI@assert_local_create_entity_inde@
CONST	SEGMENT
??_C@_0CL@OOPHFNJI@assert_local_create_entity_inde@ DB 'assert_local_crea'
	DB	'te_entity_index ((index))', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_0EO@EJFNAIEI@c?3?2users?2nhv90?2projects?2eech?2ap@
CONST	SEGMENT
??_C@_0EO@EJFNAIEI@c?3?2users?2nhv90?2projects?2eech?2ap@ DB 'c:\users\nh'
	DB	'v90\projects\eech\aphavoc\source\entity\special\keysite\ks_cr'
	DB	'eat.c', 00H					; `string'
CONST	ENDS
;	COMDAT ?__LINE__Var@?0??create_local@@YGPAUENTITY@@W4ENTITY_TYPES@@HPAD@Z@4JA
_DATA	SEGMENT
?__LINE__Var@?0??create_local@@YGPAUENTITY@@W4ENTITY_TYPES@@HPAD@Z@4JA DD 053H ; `create_local'::`1'::__LINE__Var
_DATA	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\entity\special\keysite\ks_creat.c
;	COMDAT ?create_client@@YGPAUENTITY@@W4ENTITY_TYPES@@HPAD@Z
_TEXT	SEGMENT
_en$ = -4						; size = 4
_type$ = 8						; size = 4
_index$ = 12						; size = 4
_pargs$ = 16						; size = 4
?create_client@@YGPAUENTITY@@W4ENTITY_TYPES@@HPAD@Z PROC ; create_client, COMDAT

; 322  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 44	 sub	 esp, 68			; 00000044H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 323  : 	entity
; 324  : 		*en;
; 325  : 
; 326  : 	if (get_comms_data_flow () == COMMS_DATA_FLOW_TX)

  00009	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?system_comms_data_flow@@3W4COMMS_DATA_FLOW_TYPES@@A, 0 ; system_comms_data_flow
  00010	75 37		 jne	 SHORT $LN2@create_cli

; 327  : 	{
; 328  : 		validate_client_server_remote_fn ();

  00012	e8 00 00 00 00	 call	 ?assert_client_server_remote_fn@@YGHXZ ; assert_client_server_remote_fn
  00017	85 c0		 test	 eax, eax
  00019	75 18		 jne	 SHORT $LN4@create_cli
  0001b	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??create_client@@YGPAUENTITY@@W4ENTITY_TYPES@@HPAD@Z@4JA
  00020	83 c0 06	 add	 eax, 6
  00023	50		 push	 eax
  00024	68 00 00 00 00	 push	 OFFSET ??_C@_0EO@EJFNAIEI@c?3?2users?2nhv90?2projects?2eech?2ap@
  00029	68 00 00 00 00	 push	 OFFSET ??_C@_0CC@BNNNEGEG@assert_client_server_remote_fn?5@
  0002e	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN4@create_cli:

; 329  : 
; 330  : 		en = create_remote (type, index, pargs);

  00033	8b 45 10	 mov	 eax, DWORD PTR _pargs$[ebp]
  00036	50		 push	 eax
  00037	8b 4d 0c	 mov	 ecx, DWORD PTR _index$[ebp]
  0003a	51		 push	 ecx
  0003b	8b 55 08	 mov	 edx, DWORD PTR _type$[ebp]
  0003e	52		 push	 edx
  0003f	e8 00 00 00 00	 call	 ?create_remote@@YGPAUENTITY@@W4ENTITY_TYPES@@HPAD@Z ; create_remote
  00044	89 45 fc	 mov	 DWORD PTR _en$[ebp], eax

; 331  : 	}
; 332  : 	else

  00047	eb 35		 jmp	 SHORT $LN3@create_cli
$LN2@create_cli:

; 333  : 	{
; 334  : 		validate_client_server_local_fn ();

  00049	e8 00 00 00 00	 call	 ?assert_client_server_local_fn@@YGHXZ ; assert_client_server_local_fn
  0004e	85 c0		 test	 eax, eax
  00050	75 18		 jne	 SHORT $LN5@create_cli
  00052	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??create_client@@YGPAUENTITY@@W4ENTITY_TYPES@@HPAD@Z@4JA
  00057	83 c0 0c	 add	 eax, 12			; 0000000cH
  0005a	50		 push	 eax
  0005b	68 00 00 00 00	 push	 OFFSET ??_C@_0EO@EJFNAIEI@c?3?2users?2nhv90?2projects?2eech?2ap@
  00060	68 00 00 00 00	 push	 OFFSET ??_C@_0CB@CFOCLFOK@assert_client_server_local_fn?5?$CI@
  00065	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN5@create_cli:

; 335  : 
; 336  : 		en = create_local (type, index, pargs);

  0006a	8b 45 10	 mov	 eax, DWORD PTR _pargs$[ebp]
  0006d	50		 push	 eax
  0006e	8b 4d 0c	 mov	 ecx, DWORD PTR _index$[ebp]
  00071	51		 push	 ecx
  00072	8b 55 08	 mov	 edx, DWORD PTR _type$[ebp]
  00075	52		 push	 edx
  00076	e8 00 00 00 00	 call	 ?create_local@@YGPAUENTITY@@W4ENTITY_TYPES@@HPAD@Z ; create_local
  0007b	89 45 fc	 mov	 DWORD PTR _en$[ebp], eax
$LN3@create_cli:

; 337  : 	}
; 338  : 
; 339  : 	return (en);

  0007e	8b 45 fc	 mov	 eax, DWORD PTR _en$[ebp]

; 340  : }

  00081	5f		 pop	 edi
  00082	5e		 pop	 esi
  00083	5b		 pop	 ebx
  00084	8b e5		 mov	 esp, ebp
  00086	5d		 pop	 ebp
  00087	c2 0c 00	 ret	 12			; 0000000cH
?create_client@@YGPAUENTITY@@W4ENTITY_TYPES@@HPAD@Z ENDP ; create_client
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\entity\special\keysite\ks_creat.c
;	COMDAT ?create_server@@YGPAUENTITY@@W4ENTITY_TYPES@@HPAD@Z
_TEXT	SEGMENT
_en$ = -4						; size = 4
_type$ = 8						; size = 4
_index$ = 12						; size = 4
_pargs$ = 16						; size = 4
?create_server@@YGPAUENTITY@@W4ENTITY_TYPES@@HPAD@Z PROC ; create_server, COMDAT

; 299  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 44	 sub	 esp, 68			; 00000044H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 300  : 	entity
; 301  : 		*en;
; 302  : 
; 303  : 	validate_client_server_local_fn ();

  00009	e8 00 00 00 00	 call	 ?assert_client_server_local_fn@@YGHXZ ; assert_client_server_local_fn
  0000e	85 c0		 test	 eax, eax
  00010	75 18		 jne	 SHORT $LN2@create_ser
  00012	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??create_server@@YGPAUENTITY@@W4ENTITY_TYPES@@HPAD@Z@4JA
  00017	83 c0 04	 add	 eax, 4
  0001a	50		 push	 eax
  0001b	68 00 00 00 00	 push	 OFFSET ??_C@_0EO@EJFNAIEI@c?3?2users?2nhv90?2projects?2eech?2ap@
  00020	68 00 00 00 00	 push	 OFFSET ??_C@_0CB@CFOCLFOK@assert_client_server_local_fn?5?$CI@
  00025	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN2@create_ser:

; 304  : 
; 305  : 	en = create_local (type, index, pargs);

  0002a	8b 45 10	 mov	 eax, DWORD PTR _pargs$[ebp]
  0002d	50		 push	 eax
  0002e	8b 4d 0c	 mov	 ecx, DWORD PTR _index$[ebp]
  00031	51		 push	 ecx
  00032	8b 55 08	 mov	 edx, DWORD PTR _type$[ebp]
  00035	52		 push	 edx
  00036	e8 00 00 00 00	 call	 ?create_local@@YGPAUENTITY@@W4ENTITY_TYPES@@HPAD@Z ; create_local
  0003b	89 45 fc	 mov	 DWORD PTR _en$[ebp], eax

; 306  : 
; 307  : 	if (en)

  0003e	83 7d fc 00	 cmp	 DWORD PTR _en$[ebp], 0
  00042	74 3b		 je	 SHORT $LN3@create_ser

; 308  : 	{
; 309  : 		validate_client_server_remote_fn ();

  00044	e8 00 00 00 00	 call	 ?assert_client_server_remote_fn@@YGHXZ ; assert_client_server_remote_fn
  00049	85 c0		 test	 eax, eax
  0004b	75 18		 jne	 SHORT $LN4@create_ser
  0004d	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??create_server@@YGPAUENTITY@@W4ENTITY_TYPES@@HPAD@Z@4JA
  00052	83 c0 0a	 add	 eax, 10			; 0000000aH
  00055	50		 push	 eax
  00056	68 00 00 00 00	 push	 OFFSET ??_C@_0EO@EJFNAIEI@c?3?2users?2nhv90?2projects?2eech?2ap@
  0005b	68 00 00 00 00	 push	 OFFSET ??_C@_0CC@BNNNEGEG@assert_client_server_remote_fn?5@
  00060	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN4@create_ser:

; 310  : 
; 311  : 		create_remote (type, get_local_entity_index (en), pargs);

  00065	8b 45 10	 mov	 eax, DWORD PTR _pargs$[ebp]
  00068	50		 push	 eax
  00069	8b 4d fc	 mov	 ecx, DWORD PTR _en$[ebp]
  0006c	2b 0d 00 00 00
	00		 sub	 ecx, DWORD PTR ?entities@@3PAUENTITY@@A ; entities
  00072	c1 f9 04	 sar	 ecx, 4
  00075	51		 push	 ecx
  00076	8b 55 08	 mov	 edx, DWORD PTR _type$[ebp]
  00079	52		 push	 edx
  0007a	e8 00 00 00 00	 call	 ?create_remote@@YGPAUENTITY@@W4ENTITY_TYPES@@HPAD@Z ; create_remote
$LN3@create_ser:

; 312  : 	}
; 313  : 
; 314  : 	return (en);

  0007f	8b 45 fc	 mov	 eax, DWORD PTR _en$[ebp]

; 315  : }

  00082	5f		 pop	 edi
  00083	5e		 pop	 esi
  00084	5b		 pop	 ebx
  00085	8b e5		 mov	 esp, ebp
  00087	5d		 pop	 ebp
  00088	c2 0c 00	 ret	 12			; 0000000cH
?create_server@@YGPAUENTITY@@W4ENTITY_TYPES@@HPAD@Z ENDP ; create_server
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\entity\special\keysite\ks_creat.c
;	COMDAT ?create_remote@@YGPAUENTITY@@W4ENTITY_TYPES@@HPAD@Z
_TEXT	SEGMENT
_type$ = 8						; size = 4
_index$ = 12						; size = 4
_pargs$ = 16						; size = 4
?create_remote@@YGPAUENTITY@@W4ENTITY_TYPES@@HPAD@Z PROC ; create_remote, COMDAT

; 280  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 281  : 	validate_remote_create_entity_index (index);

  00009	8b 45 0c	 mov	 eax, DWORD PTR _index$[ebp]
  0000c	50		 push	 eax
  0000d	e8 00 00 00 00	 call	 ?assert_remote_create_entity_index@@YGHH@Z ; assert_remote_create_entity_index
  00012	85 c0		 test	 eax, eax
  00014	75 18		 jne	 SHORT $LN2@create_rem
  00016	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??create_remote@@YGPAUENTITY@@W4ENTITY_TYPES@@HPAD@Z@4JA
  0001b	83 c0 01	 add	 eax, 1
  0001e	50		 push	 eax
  0001f	68 00 00 00 00	 push	 OFFSET ??_C@_0EO@EJFNAIEI@c?3?2users?2nhv90?2projects?2eech?2ap@
  00024	68 00 00 00 00	 push	 OFFSET ??_C@_0CM@DHBIKIGD@assert_remote_create_entity_ind@
  00029	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN2@create_rem:

; 282  : 
; 283  : 	#if DEBUG_MODULE
; 284  : 
; 285  : 	debug_log_entity_args (ENTITY_DEBUG_REMOTE, ENTITY_DEBUG_CREATE, NULL, type, index);
; 286  : 
; 287  : 	#endif
; 288  : 
; 289  : 	transmit_entity_comms_message (ENTITY_COMMS_CREATE, NULL, type, index, pargs);

  0002e	8b 45 10	 mov	 eax, DWORD PTR _pargs$[ebp]
  00031	50		 push	 eax
  00032	8b 4d 0c	 mov	 ecx, DWORD PTR _index$[ebp]
  00035	51		 push	 ecx
  00036	8b 55 08	 mov	 edx, DWORD PTR _type$[ebp]
  00039	52		 push	 edx
  0003a	6a 00		 push	 0
  0003c	6a 08		 push	 8
  0003e	e8 00 00 00 00	 call	 ?transmit_entity_comms_message@@YAXW4ENTITY_COMMS_MESSAGES@@PAUENTITY@@ZZ ; transmit_entity_comms_message
  00043	83 c4 14	 add	 esp, 20			; 00000014H

; 290  : 
; 291  : 	return (NULL);

  00046	33 c0		 xor	 eax, eax

; 292  : }

  00048	5f		 pop	 edi
  00049	5e		 pop	 esi
  0004a	5b		 pop	 ebx
  0004b	8b e5		 mov	 esp, ebp
  0004d	5d		 pop	 ebp
  0004e	c2 0c 00	 ret	 12			; 0000000cH
?create_remote@@YGPAUENTITY@@W4ENTITY_TYPES@@HPAD@Z ENDP ; create_remote
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\entity\special\keysite\ks_creat.c
;	COMDAT ?create_local@@YGPAUENTITY@@W4ENTITY_TYPES@@HPAD@Z
_TEXT	SEGMENT
tv293 = -356						; size = 4
tv285 = -352						; size = 4
tv310 = -348						; size = 4
tv235 = -348						; size = 4
tv302 = -344						; size = 4
tv247 = -344						; size = 4
tv227 = -344						; size = 4
_raw$ = -276						; size = 4
_en$ = -272						; size = 4
_sector$ = -268						; size = 4
_force$ = -264						; size = 4
_group$ = -260						; size = 4
_name$ = -256						; size = 256
_type$ = 8						; size = 4
_index$ = 12						; size = 4
_pargs$ = 16						; size = 4
?create_local@@YGPAUENTITY@@W4ENTITY_TYPES@@HPAD@Z PROC	; create_local, COMDAT

; 83   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec 64 01 00
	00		 sub	 esp, 356		; 00000164H
  00009	53		 push	 ebx
  0000a	56		 push	 esi
  0000b	57		 push	 edi

; 84   : 
; 85   : 	char
; 86   : 		 name [STRING_TYPE_KEYSITE_NAME_MAX_LENGTH];
; 87   : 
; 88   : 	entity
; 89   : 		*group,
; 90   : 		*force,
; 91   : 		*sector,
; 92   : 		*en;
; 93   : 
; 94   : 	keysite
; 95   : 		*raw;
; 96   : 
; 97   : 	////////////////////////////////////////
; 98   :   	//
; 99   :   	// VALIDATE
; 100  :   	//
; 101  : 	////////////////////////////////////////
; 102  : 
; 103  : 	validate_local_create_entity_index (index);

  0000c	8b 45 0c	 mov	 eax, DWORD PTR _index$[ebp]
  0000f	50		 push	 eax
  00010	e8 00 00 00 00	 call	 ?assert_local_create_entity_index@@YGHH@Z ; assert_local_create_entity_index
  00015	85 c0		 test	 eax, eax
  00017	75 18		 jne	 SHORT $LN2@create_loc
  00019	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??create_local@@YGPAUENTITY@@W4ENTITY_TYPES@@HPAD@Z@4JA
  0001e	83 c0 14	 add	 eax, 20			; 00000014H
  00021	50		 push	 eax
  00022	68 00 00 00 00	 push	 OFFSET ??_C@_0EO@EJFNAIEI@c?3?2users?2nhv90?2projects?2eech?2ap@
  00027	68 00 00 00 00	 push	 OFFSET ??_C@_0CL@OOPHFNJI@assert_local_create_entity_inde@
  0002c	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN2@create_loc:

; 104  : 
; 105  : 	#if DEBUG_MODULE
; 106  : 
; 107  : 	debug_log_entity_args (ENTITY_DEBUG_LOCAL, ENTITY_DEBUG_CREATE, NULL, type, index);
; 108  : 
; 109  : 	#endif
; 110  : 
; 111  : 	en = get_free_entity (index);

  00031	8b 45 0c	 mov	 eax, DWORD PTR _index$[ebp]
  00034	50		 push	 eax
  00035	e8 00 00 00 00	 call	 ?get_free_entity@@YGPAUENTITY@@H@Z ; get_free_entity
  0003a	89 85 f0 fe ff
	ff		 mov	 DWORD PTR _en$[ebp], eax

; 112  : 
; 113  : 	if (en)

  00040	83 bd f0 fe ff
	ff 00		 cmp	 DWORD PTR _en$[ebp], 0
  00047	0f 84 f8 06 00
	00		 je	 $LN3@create_loc

; 114  : 	{
; 115  : 		////////////////////////////////////////
; 116  :    	//
; 117  :    	// MALLOC ENTITY DATA
; 118  :    	//
; 119  : 		////////////////////////////////////////
; 120  : 
; 121  : 		set_local_entity_type (en, type);

  0004d	8b 85 f0 fe ff
	ff		 mov	 eax, DWORD PTR _en$[ebp]
  00053	8b 4d 08	 mov	 ecx, DWORD PTR _type$[ebp]
  00056	89 08		 mov	 DWORD PTR [eax], ecx

; 122  : 
; 123  : 		raw = (keysite *) malloc_fast_mem (sizeof (keysite));

  00058	68 a4 01 00 00	 push	 420			; 000001a4H
  0005d	e8 00 00 00 00	 call	 ?malloc_fast_memory@@YGPAXI@Z ; malloc_fast_memory
  00062	89 85 ec fe ff
	ff		 mov	 DWORD PTR _raw$[ebp], eax

; 124  : 
; 125  : 		set_local_entity_data (en, raw);

  00068	8b 85 f0 fe ff
	ff		 mov	 eax, DWORD PTR _en$[ebp]
  0006e	8b 8d ec fe ff
	ff		 mov	 ecx, DWORD PTR _raw$[ebp]
  00074	89 48 04	 mov	 DWORD PTR [eax+4], ecx

; 126  : 
; 127  : 		////////////////////////////////////////
; 128  :    	//
; 129  :    	// INITIALISE ALL ENTITY DATA TO 'WORKING' DEFAULT VALUES
; 130  : 		//
; 131  : 		// DO NOT USE ACCESS FUNCTIONS
; 132  : 		//
; 133  : 		// DO NOT USE RANDOM VALUES
; 134  : 		//
; 135  : 		////////////////////////////////////////
; 136  : 
; 137  : 		memset (raw, 0, sizeof (keysite));

  00077	68 a4 01 00 00	 push	 420			; 000001a4H
  0007c	6a 00		 push	 0
  0007e	8b 85 ec fe ff
	ff		 mov	 eax, DWORD PTR _raw$[ebp]
  00084	50		 push	 eax
  00085	e8 00 00 00 00	 call	 _memset
  0008a	83 c4 0c	 add	 esp, 12			; 0000000cH

; 138  : 
; 139  : 		sprintf (name, "KEYSITE %d", (int) en % 100);

  0008d	8b 85 f0 fe ff
	ff		 mov	 eax, DWORD PTR _en$[ebp]
  00093	99		 cdq
  00094	b9 64 00 00 00	 mov	 ecx, 100		; 00000064H
  00099	f7 f9		 idiv	 ecx
  0009b	52		 push	 edx
  0009c	68 00 00 00 00	 push	 OFFSET ??_C@_0L@FFGADHLA@KEYSITE?5?$CFd@
  000a1	8d 95 00 ff ff
	ff		 lea	 edx, DWORD PTR _name$[ebp]
  000a7	52		 push	 edx
  000a8	e8 00 00 00 00	 call	 _sprintf
  000ad	83 c4 0c	 add	 esp, 12			; 0000000cH

; 140  : 
; 141  : 		strncpy (raw->keysite_name, name, STRING_TYPE_KEYSITE_NAME_MAX_LENGTH);

  000b0	68 00 01 00 00	 push	 256			; 00000100H
  000b5	8d 85 00 ff ff
	ff		 lea	 eax, DWORD PTR _name$[ebp]
  000bb	50		 push	 eax
  000bc	8b 8d ec fe ff
	ff		 mov	 ecx, DWORD PTR _raw$[ebp]
  000c2	81 c1 9c 00 00
	00		 add	 ecx, 156		; 0000009cH
  000c8	51		 push	 ecx
  000c9	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__strncpy
  000cf	83 c4 0c	 add	 esp, 12			; 0000000cH

; 142  : 
; 143  : 		//
; 144  : 		// fixed
; 145  : 		//
; 146  : 
; 147  : 		raw->position.x = MID_MAP_X;

  000d2	8b 85 ec fe ff
	ff		 mov	 eax, DWORD PTR _raw$[ebp]
  000d8	f3 0f 10 05 30
	00 00 00	 movss	 xmm0, DWORD PTR ?world_map@@3UWORLD_MAP_DATA@@A+48
  000e0	f3 0f 11 40 04	 movss	 DWORD PTR [eax+4], xmm0

; 148  : 		raw->position.y = MID_MAP_Y;

  000e5	8b 85 ec fe ff
	ff		 mov	 eax, DWORD PTR _raw$[ebp]
  000eb	f3 0f 10 05 34
	00 00 00	 movss	 xmm0, DWORD PTR ?world_map@@3UWORLD_MAP_DATA@@A+52
  000f3	f3 0f 11 40 08	 movss	 DWORD PTR [eax+8], xmm0

; 149  : 		raw->position.z = MID_MAP_Z;

  000f8	8b 85 ec fe ff
	ff		 mov	 eax, DWORD PTR _raw$[ebp]
  000fe	f3 0f 10 05 38
	00 00 00	 movss	 xmm0, DWORD PTR ?world_map@@3UWORLD_MAP_DATA@@A+56
  00106	f3 0f 11 40 0c	 movss	 DWORD PTR [eax+12], xmm0

; 150  : 
; 151  : 		raw->alive = TRUE;

  0010b	8b 85 ec fe ff
	ff		 mov	 eax, DWORD PTR _raw$[ebp]
  00111	8b 88 a0 01 00
	00		 mov	 ecx, DWORD PTR [eax+416]
  00117	81 c9 00 00 00
	01		 or	 ecx, 16777216		; 01000000H
  0011d	8b 95 ec fe ff
	ff		 mov	 edx, DWORD PTR _raw$[ebp]
  00123	89 8a a0 01 00
	00		 mov	 DWORD PTR [edx+416], ecx

; 152  : 
; 153  : 		raw->keysite_usable_state = KEYSITE_STATE_USABLE;

  00129	8b 85 ec fe ff
	ff		 mov	 eax, DWORD PTR _raw$[ebp]
  0012f	8b 88 a0 01 00
	00		 mov	 ecx, DWORD PTR [eax+416]
  00135	81 e1 ff ff ff
	e3		 and	 ecx, -469762049		; e3ffffffH
  0013b	8b 95 ec fe ff
	ff		 mov	 edx, DWORD PTR _raw$[ebp]
  00141	89 8a a0 01 00
	00		 mov	 DWORD PTR [edx+416], ecx

; 154  : 
; 155  : 		raw->in_use = FALSE;

  00147	8b 85 ec fe ff
	ff		 mov	 eax, DWORD PTR _raw$[ebp]
  0014d	8b 88 a0 01 00
	00		 mov	 ecx, DWORD PTR [eax+416]
  00153	81 e1 ff ff ff
	fd		 and	 ecx, -33554433		; fdffffffH
  00159	8b 95 ec fe ff
	ff		 mov	 edx, DWORD PTR _raw$[ebp]
  0015f	89 8a a0 01 00
	00		 mov	 DWORD PTR [edx+416], ecx

; 156  : 		raw->object_index = OBJECT_3D_INVALID_OBJECT_INDEX;

  00165	8b 85 ec fe ff
	ff		 mov	 eax, DWORD PTR _raw$[ebp]
  0016b	8b 88 a0 01 00
	00		 mov	 ecx, DWORD PTR [eax+416]
  00171	81 e1 ff 00 f0
	ff		 and	 ecx, -1048321		; fff000ffH
  00177	8b 95 ec fe ff
	ff		 mov	 edx, DWORD PTR _raw$[ebp]
  0017d	89 8a a0 01 00
	00		 mov	 DWORD PTR [edx+416], ecx

; 157  : 
; 158  : 		raw->side = ENTITY_SIDE_NEUTRAL;

  00183	8b 85 ec fe ff
	ff		 mov	 eax, DWORD PTR _raw$[ebp]
  00189	8b 88 a0 01 00
	00		 mov	 ecx, DWORD PTR [eax+416]
  0018f	81 e1 ff ff ff
	9f		 and	 ecx, -1610612737	; 9fffffffH
  00195	8b 95 ec fe ff
	ff		 mov	 edx, DWORD PTR _raw$[ebp]
  0019b	89 8a a0 01 00
	00		 mov	 DWORD PTR [edx+416], ecx

; 159  : 
; 160  : 		raw->supplies.ammo_supply_level = 0.0;

  001a1	8b 85 ec fe ff
	ff		 mov	 eax, DWORD PTR _raw$[ebp]
  001a7	0f 57 c0	 xorps	 xmm0, xmm0
  001aa	f3 0f 11 80 94
	00 00 00	 movss	 DWORD PTR [eax+148], xmm0

; 161  : 
; 162  : 		raw->supplies.fuel_supply_level = 0.0;

  001b2	8b 85 ec fe ff
	ff		 mov	 eax, DWORD PTR _raw$[ebp]
  001b8	0f 57 c0	 xorps	 xmm0, xmm0
  001bb	f3 0f 11 80 98
	00 00 00	 movss	 DWORD PTR [eax+152], xmm0

; 163  : 
; 164  : 		raw->assign_timer = frand1 () * KEYSITE_TASK_ASSIGN_TIMER;		// SERVER ONLY - OK TO USE RANDOM

  001c3	69 05 00 00 00
	00 6d 4e c6 41	 imul	 eax, DWORD PTR ?random_number_seed@@3HA, 1103515245 ; random_number_seed
  001cd	05 39 30 00 00	 add	 eax, 12345		; 00003039H
  001d2	a3 00 00 00 00	 mov	 DWORD PTR ?random_number_seed@@3HA, eax ; random_number_seed
  001d7	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?random_number_seed@@3HA ; random_number_seed
  001dd	c1 f9 10	 sar	 ecx, 16			; 00000010H
  001e0	81 e1 ff 7f 00
	00		 and	 ecx, 32767		; 00007fffH
  001e6	f2 0f 2a c1	 cvtsi2sd xmm0, ecx
  001ea	f2 0f 59 05 00
	00 00 00	 mulsd	 xmm0, QWORD PTR __real@3f00002000400080
  001f2	f2 0f 59 05 00
	00 00 00	 mulsd	 xmm0, QWORD PTR __real@4066800000000000
  001fa	f2 0f 5a c0	 cvtsd2ss xmm0, xmm0
  001fe	8b 95 ec fe ff
	ff		 mov	 edx, DWORD PTR _raw$[ebp]
  00204	f3 0f 11 82 84
	00 00 00	 movss	 DWORD PTR [edx+132], xmm0

; 165  : 
; 166  : 		raw->sleep = frand1 () * KEYSITE_UPDATE_SLEEP_TIMER;				// SERVER ONLY - OK TO USE RANDOM

  0020c	69 05 00 00 00
	00 6d 4e c6 41	 imul	 eax, DWORD PTR ?random_number_seed@@3HA, 1103515245 ; random_number_seed
  00216	05 39 30 00 00	 add	 eax, 12345		; 00003039H
  0021b	a3 00 00 00 00	 mov	 DWORD PTR ?random_number_seed@@3HA, eax ; random_number_seed
  00220	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?random_number_seed@@3HA ; random_number_seed
  00226	c1 f9 10	 sar	 ecx, 16			; 00000010H
  00229	81 e1 ff 7f 00
	00		 and	 ecx, 32767		; 00007fffH
  0022f	f2 0f 2a c1	 cvtsi2sd xmm0, ecx
  00233	f2 0f 59 05 00
	00 00 00	 mulsd	 xmm0, QWORD PTR __real@3f00002000400080
  0023b	f2 0f 59 05 00
	00 00 00	 mulsd	 xmm0, QWORD PTR __real@404e000000000000
  00243	f2 0f 5a c0	 cvtsd2ss xmm0, xmm0
  00247	8b 95 ec fe ff
	ff		 mov	 edx, DWORD PTR _raw$[ebp]
  0024d	f3 0f 11 82 88
	00 00 00	 movss	 DWORD PTR [edx+136], xmm0

; 167  : 
; 168  : 		////////////////////////////////////////
; 169  : 		//
; 170  : 		// OVERWRITE DEFAULT VALUES WITH GIVEN ATTRIBUTES
; 171  : 		//
; 172  : 		////////////////////////////////////////
; 173  : 
; 174  : 		set_local_entity_attributes (en, pargs);

  00255	8b 45 10	 mov	 eax, DWORD PTR _pargs$[ebp]
  00258	50		 push	 eax
  00259	8b 8d f0 fe ff
	ff		 mov	 ecx, DWORD PTR _en$[ebp]
  0025f	51		 push	 ecx
  00260	e8 00 00 00 00	 call	 ?set_local_entity_attributes@@YGXPAUENTITY@@PAD@Z ; set_local_entity_attributes

; 175  : 
; 176  : 		////////////////////////////////////////
; 177  : 		//
; 178  : 		// CHECK MANDATORY ATTRIBUTES HAVE BEEN GIVEN
; 179  : 		//
; 180  : 		////////////////////////////////////////
; 181  : 
; 182  : 		ASSERT (raw->side != ENTITY_SIDE_NEUTRAL);

  00265	8b 85 ec fe ff
	ff		 mov	 eax, DWORD PTR _raw$[ebp]
  0026b	8b 88 a0 01 00
	00		 mov	 ecx, DWORD PTR [eax+416]
  00271	c1 e9 1d	 shr	 ecx, 29			; 0000001dH
  00274	83 e1 03	 and	 ecx, 3
  00277	75 18		 jne	 SHORT $LN4@create_loc
  00279	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??create_local@@YGPAUENTITY@@W4ENTITY_TYPES@@HPAD@Z@4JA
  0027e	83 c0 63	 add	 eax, 99			; 00000063H
  00281	50		 push	 eax
  00282	68 00 00 00 00	 push	 OFFSET ??_C@_0EO@EJFNAIEI@c?3?2users?2nhv90?2projects?2eech?2ap@
  00287	68 00 00 00 00	 push	 OFFSET ??_C@_0CB@MIOHHNEG@raw?9?$DOside?5?$CB?$DN?5ENTITY_SIDE_NEUTRA@
  0028c	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN4@create_loc:

; 183  : 
; 184  : 		ASSERT (entity_sub_type_keysite_valid (raw->sub_type));

  00291	8b 85 ec fe ff
	ff		 mov	 eax, DWORD PTR _raw$[ebp]
  00297	83 38 00	 cmp	 DWORD PTR [eax], 0
  0029a	7c 0b		 jl	 SHORT $LN6@create_loc
  0029c	8b 85 ec fe ff
	ff		 mov	 eax, DWORD PTR _raw$[ebp]
  002a2	83 38 09	 cmp	 DWORD PTR [eax], 9
  002a5	7c 18		 jl	 SHORT $LN5@create_loc
$LN6@create_loc:
  002a7	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??create_local@@YGPAUENTITY@@W4ENTITY_TYPES@@HPAD@Z@4JA
  002ac	83 c0 65	 add	 eax, 101		; 00000065H
  002af	50		 push	 eax
  002b0	68 00 00 00 00	 push	 OFFSET ??_C@_0EO@EJFNAIEI@c?3?2users?2nhv90?2projects?2eech?2ap@
  002b5	68 00 00 00 00	 push	 OFFSET ??_C@_0CO@CAOAKINI@entity_sub_type_keysite_valid?5?$CI@
  002ba	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN5@create_loc:

; 185  : 
; 186  : 		ASSERT (keysite_database [raw->sub_type].minimum_efficiency < 1.0);

  002bf	8b 85 ec fe ff
	ff		 mov	 eax, DWORD PTR _raw$[ebp]
  002c5	6b 08 44	 imul	 ecx, DWORD PTR [eax], 68
  002c8	f3 0f 5a 81 1c
	00 00 00	 cvtss2sd xmm0, DWORD PTR ?keysite_database@@3PAUKEYSITE_DATA@@A[ecx+28]
  002d0	f2 0f 10 0d 00
	00 00 00	 movsd	 xmm1, QWORD PTR __real@3ff0000000000000
  002d8	66 0f 2f c8	 comisd	 xmm1, xmm0
  002dc	77 18		 ja	 SHORT $LN7@create_loc
  002de	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??create_local@@YGPAUENTITY@@W4ENTITY_TYPES@@HPAD@Z@4JA
  002e3	83 c0 67	 add	 eax, 103		; 00000067H
  002e6	50		 push	 eax
  002e7	68 00 00 00 00	 push	 OFFSET ??_C@_0EO@EJFNAIEI@c?3?2users?2nhv90?2projects?2eech?2ap@
  002ec	68 00 00 00 00	 push	 OFFSET ??_C@_0DK@IHBDLLLD@keysite_database?5?$FLraw?9?$DOsub_type@
  002f1	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN7@create_loc:

; 187  : 
; 188  : 		// the following is currently required for the campaign to progress properly...
; 189  : 		ASSERT (keysite_database [raw->sub_type].repairable == keysite_database [raw->sub_type].troop_insertion_target);

  002f6	8b 85 ec fe ff
	ff		 mov	 eax, DWORD PTR _raw$[ebp]
  002fc	6b 08 44	 imul	 ecx, DWORD PTR [eax], 68
  002ff	8b 91 40 00 00
	00		 mov	 edx, DWORD PTR ?keysite_database@@3PAUKEYSITE_DATA@@A[ecx+64]
  00305	c1 ea 07	 shr	 edx, 7
  00308	83 e2 01	 and	 edx, 1
  0030b	8b 85 ec fe ff
	ff		 mov	 eax, DWORD PTR _raw$[ebp]
  00311	6b 08 44	 imul	 ecx, DWORD PTR [eax], 68
  00314	8b 81 40 00 00
	00		 mov	 eax, DWORD PTR ?keysite_database@@3PAUKEYSITE_DATA@@A[ecx+64]
  0031a	c1 e8 0c	 shr	 eax, 12			; 0000000cH
  0031d	83 e0 01	 and	 eax, 1
  00320	3b d0		 cmp	 edx, eax
  00322	74 18		 je	 SHORT $LN8@create_loc
  00324	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??create_local@@YGPAUENTITY@@W4ENTITY_TYPES@@HPAD@Z@4JA
  00329	83 c0 6a	 add	 eax, 106		; 0000006aH
  0032c	50		 push	 eax
  0032d	68 00 00 00 00	 push	 OFFSET ??_C@_0EO@EJFNAIEI@c?3?2users?2nhv90?2projects?2eech?2ap@
  00332	68 00 00 00 00	 push	 OFFSET ??_C@_0GH@GICANLMA@keysite_database?5?$FLraw?9?$DOsub_type@
  00337	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN8@create_loc:

; 190  : 
; 191  : 		////////////////////////////////////////
; 192  : 		//
; 193  : 		// RESOLVE DEFAULT VALUES
; 194  : 		//
; 195  : 		////////////////////////////////////////
; 196  : 
; 197  : 		update_keysite_cargo (en, raw->supplies.ammo_supply_level, ENTITY_SUB_TYPE_CARGO_AMMO, CARGO_AMMO_SIZE);

  0033c	51		 push	 ecx
  0033d	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@41200000
  00345	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  0034a	6a 00		 push	 0
  0034c	8b 85 ec fe ff
	ff		 mov	 eax, DWORD PTR _raw$[ebp]
  00352	51		 push	 ecx
  00353	f3 0f 10 80 94
	00 00 00	 movss	 xmm0, DWORD PTR [eax+148]
  0035b	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00360	8b 8d f0 fe ff
	ff		 mov	 ecx, DWORD PTR _en$[ebp]
  00366	51		 push	 ecx
  00367	e8 00 00 00 00	 call	 ?update_keysite_cargo@@YGXPAUENTITY@@MHM@Z ; update_keysite_cargo

; 198  : 
; 199  : 		update_keysite_cargo (en, raw->supplies.fuel_supply_level, ENTITY_SUB_TYPE_CARGO_FUEL, CARGO_FUEL_SIZE);

  0036c	51		 push	 ecx
  0036d	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@41200000
  00375	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  0037a	6a 01		 push	 1
  0037c	8b 85 ec fe ff
	ff		 mov	 eax, DWORD PTR _raw$[ebp]
  00382	51		 push	 ecx
  00383	f3 0f 10 80 98
	00 00 00	 movss	 xmm0, DWORD PTR [eax+152]
  0038b	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00390	8b 8d f0 fe ff
	ff		 mov	 ecx, DWORD PTR _en$[ebp]
  00396	51		 push	 ecx
  00397	e8 00 00 00 00	 call	 ?update_keysite_cargo@@YGXPAUENTITY@@MHM@Z ; update_keysite_cargo

; 200  : 
; 201  : 		////////////////////////////////////////
; 202  : 		//
; 203  : 		// BUILD COMPONENTS
; 204  : 		//
; 205  : 		////////////////////////////////////////
; 206  : 
; 207  : 		////////////////////////////////////////
; 208  : 		//
; 209  : 		// LINK INTO SYSTEM
; 210  : 		//
; 211  : 		////////////////////////////////////////
; 212  : 
; 213  : 		force = get_local_entity_parent (en, LIST_TYPE_KEYSITE_FORCE);

  0039c	83 bd f0 fe ff
	ff 00		 cmp	 DWORD PTR _en$[ebp], 0
  003a3	74 10		 je	 SHORT $LN14@create_loc
  003a5	8b 85 f0 fe ff
	ff		 mov	 eax, DWORD PTR _en$[ebp]
  003ab	8b 08		 mov	 ecx, DWORD PTR [eax]
  003ad	89 8d a8 fe ff
	ff		 mov	 DWORD PTR tv227[ebp], ecx
  003b3	eb 27		 jmp	 SHORT $LN15@create_loc
$LN14@create_loc:
  003b5	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??create_local@@YGPAUENTITY@@W4ENTITY_TYPES@@HPAD@Z@4JA
  003bb	81 c2 82 00 00
	00		 add	 edx, 130		; 00000082H
  003c1	52		 push	 edx
  003c2	68 00 00 00 00	 push	 OFFSET ??_C@_0EO@EJFNAIEI@c?3?2users?2nhv90?2projects?2eech?2ap@
  003c7	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  003cc	50		 push	 eax
  003cd	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  003d2	c7 85 a8 fe ff
	ff 00 00 00 00	 mov	 DWORD PTR tv227[ebp], 0
$LN15@create_loc:
  003dc	b9 01 00 00 00	 mov	 ecx, 1
  003e1	85 c9		 test	 ecx, ecx
  003e3	74 0c		 je	 SHORT $LN16@create_loc
  003e5	c7 85 a4 fe ff
	ff 15 00 00 00	 mov	 DWORD PTR tv235[ebp], 21 ; 00000015H
  003ef	eb 27		 jmp	 SHORT $LN17@create_loc
$LN16@create_loc:
  003f1	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??create_local@@YGPAUENTITY@@W4ENTITY_TYPES@@HPAD@Z@4JA
  003f7	81 c2 82 00 00
	00		 add	 edx, 130		; 00000082H
  003fd	52		 push	 edx
  003fe	68 00 00 00 00	 push	 OFFSET ??_C@_0EO@EJFNAIEI@c?3?2users?2nhv90?2projects?2eech?2ap@
  00403	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_list_type_message@@3PBDB ; overload_invalid_list_type_message
  00408	50		 push	 eax
  00409	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  0040e	c7 85 a4 fe ff
	ff 00 00 00 00	 mov	 DWORD PTR tv235[ebp], 0
$LN17@create_loc:
  00418	6a 15		 push	 21			; 00000015H
  0041a	8b 8d f0 fe ff
	ff		 mov	 ecx, DWORD PTR _en$[ebp]
  00420	51		 push	 ecx
  00421	69 95 a8 fe ff
	ff b4 00 00 00	 imul	 edx, DWORD PTR tv227[ebp], 180
  0042b	8b 85 a4 fe ff
	ff		 mov	 eax, DWORD PTR tv235[ebp]
  00431	8b 8c 82 00 00
	00 00		 mov	 ecx, DWORD PTR ?fn_get_local_entity_parent@@3PAY0CN@P6GPAUENTITY@@PAU1@W4LIST_TYPES@@@ZA[edx+eax*4]
  00438	ff d1		 call	 ecx
  0043a	89 85 f8 fe ff
	ff		 mov	 DWORD PTR _force$[ebp], eax

; 214  : 
; 215  : 		debug_assert (get_local_entity_type (force) == ENTITY_TYPE_FORCE);

  00440	83 bd f8 fe ff
	ff 00		 cmp	 DWORD PTR _force$[ebp], 0
  00447	74 10		 je	 SHORT $LN18@create_loc
  00449	8b 85 f8 fe ff
	ff		 mov	 eax, DWORD PTR _force$[ebp]
  0044f	8b 08		 mov	 ecx, DWORD PTR [eax]
  00451	89 8d a8 fe ff
	ff		 mov	 DWORD PTR tv247[ebp], ecx
  00457	eb 27		 jmp	 SHORT $LN19@create_loc
$LN18@create_loc:
  00459	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??create_local@@YGPAUENTITY@@W4ENTITY_TYPES@@HPAD@Z@4JA
  0045f	81 c2 84 00 00
	00		 add	 edx, 132		; 00000084H
  00465	52		 push	 edx
  00466	68 00 00 00 00	 push	 OFFSET ??_C@_0EO@EJFNAIEI@c?3?2users?2nhv90?2projects?2eech?2ap@
  0046b	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  00470	50		 push	 eax
  00471	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00476	c7 85 a8 fe ff
	ff 00 00 00 00	 mov	 DWORD PTR tv247[ebp], 0
$LN19@create_loc:
  00480	83 bd a8 fe ff
	ff 0b		 cmp	 DWORD PTR tv247[ebp], 11 ; 0000000bH
  00487	74 22		 je	 SHORT $LN9@create_loc
  00489	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??create_local@@YGPAUENTITY@@W4ENTITY_TYPES@@HPAD@Z@4JA
  0048e	05 84 00 00 00	 add	 eax, 132		; 00000084H
  00493	50		 push	 eax
  00494	68 00 00 00 00	 push	 OFFSET ??_C@_0EO@EJFNAIEI@c?3?2users?2nhv90?2projects?2eech?2ap@
  00499	68 00 00 00 00	 push	 OFFSET ??_C@_0DD@LJPBJOMP@get_local_entity_type?5?$CIforce?$CJ?5?$DN@
  0049e	68 00 00 00 00	 push	 OFFSET ??_C@_0BC@PODNONFH@ASSERT?5?$CFs?5?$CI?$CFs?3?$CFd?$CJ@
  004a3	e8 00 00 00 00	 call	 ?debug_fatal@@YAXPBDZZ	; debug_fatal
  004a8	83 c4 10	 add	 esp, 16			; 00000010H
$LN9@create_loc:

; 216  : 
; 217  : 		ASSERT (force);

  004ab	83 bd f8 fe ff
	ff 00		 cmp	 DWORD PTR _force$[ebp], 0
  004b2	75 1a		 jne	 SHORT $LN10@create_loc
  004b4	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??create_local@@YGPAUENTITY@@W4ENTITY_TYPES@@HPAD@Z@4JA
  004b9	05 86 00 00 00	 add	 eax, 134		; 00000086H
  004be	50		 push	 eax
  004bf	68 00 00 00 00	 push	 OFFSET ??_C@_0EO@EJFNAIEI@c?3?2users?2nhv90?2projects?2eech?2ap@
  004c4	68 00 00 00 00	 push	 OFFSET ??_C@_05BINPNAAL@force@
  004c9	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN10@create_loc:

; 218  : 
; 219  : 		sector = get_local_sector_entity (&raw->position);

  004ce	8b 85 ec fe ff
	ff		 mov	 eax, DWORD PTR _raw$[ebp]
  004d4	83 c0 04	 add	 eax, 4
  004d7	50		 push	 eax
  004d8	e8 00 00 00 00	 call	 ?get_local_sector_entity@@YGPAUENTITY@@PAUVEC3D@@@Z ; get_local_sector_entity
  004dd	89 85 f4 fe ff
	ff		 mov	 DWORD PTR _sector$[ebp], eax

; 220  : 
; 221  : 		ASSERT (sector);

  004e3	83 bd f4 fe ff
	ff 00		 cmp	 DWORD PTR _sector$[ebp], 0
  004ea	75 1a		 jne	 SHORT $LN11@create_loc
  004ec	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??create_local@@YGPAUENTITY@@W4ENTITY_TYPES@@HPAD@Z@4JA
  004f1	05 8a 00 00 00	 add	 eax, 138		; 0000008aH
  004f6	50		 push	 eax
  004f7	68 00 00 00 00	 push	 OFFSET ??_C@_0EO@EJFNAIEI@c?3?2users?2nhv90?2projects?2eech?2ap@
  004fc	68 00 00 00 00	 push	 OFFSET ??_C@_06IDGHNJOB@sector@
  00501	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN11@create_loc:

; 222  : 
; 223  : 		insert_local_entity_into_parents_child_list (en, LIST_TYPE_KEYSITE_FORCE, force, NULL);

  00506	6a 00		 push	 0
  00508	8b 85 f8 fe ff
	ff		 mov	 eax, DWORD PTR _force$[ebp]
  0050e	50		 push	 eax
  0050f	6a 15		 push	 21			; 00000015H
  00511	8b 8d f0 fe ff
	ff		 mov	 ecx, DWORD PTR _en$[ebp]
  00517	51		 push	 ecx
  00518	e8 00 00 00 00	 call	 ?insert_local_entity_into_parents_child_list@@YGXPAUENTITY@@W4LIST_TYPES@@00@Z ; insert_local_entity_into_parents_child_list

; 224  : 
; 225  : 		insert_local_entity_into_parents_child_list (en, LIST_TYPE_SECTOR, sector, NULL);

  0051d	6a 00		 push	 0
  0051f	8b 85 f4 fe ff
	ff		 mov	 eax, DWORD PTR _sector$[ebp]
  00525	50		 push	 eax
  00526	6a 21		 push	 33			; 00000021H
  00528	8b 8d f0 fe ff
	ff		 mov	 ecx, DWORD PTR _en$[ebp]
  0052e	51		 push	 ecx
  0052f	e8 00 00 00 00	 call	 ?insert_local_entity_into_parents_child_list@@YGXPAUENTITY@@W4LIST_TYPES@@00@Z ; insert_local_entity_into_parents_child_list

; 226  : 
; 227  : 		insert_local_entity_into_parents_child_list (en, LIST_TYPE_UPDATE, get_update_entity (), NULL);

  00534	6a 00		 push	 0
  00536	a1 00 00 00 00	 mov	 eax, DWORD PTR ?update_entity@@3PAUENTITY@@A ; update_entity
  0053b	50		 push	 eax
  0053c	6a 29		 push	 41			; 00000029H
  0053e	8b 8d f0 fe ff
	ff		 mov	 ecx, DWORD PTR _en$[ebp]
  00544	51		 push	 ecx
  00545	e8 00 00 00 00	 call	 ?insert_local_entity_into_parents_child_list@@YGXPAUENTITY@@W4LIST_TYPES@@00@Z ; insert_local_entity_into_parents_child_list

; 228  : 
; 229  : 		set_local_entity_int_value (sector, INT_TYPE_KEYSITE_COUNT, get_local_entity_int_value (sector, INT_TYPE_KEYSITE_COUNT) + 1);

  0054a	83 bd f4 fe ff
	ff 00		 cmp	 DWORD PTR _sector$[ebp], 0
  00551	74 10		 je	 SHORT $LN24@create_loc
  00553	8b 85 f4 fe ff
	ff		 mov	 eax, DWORD PTR _sector$[ebp]
  00559	8b 08		 mov	 ecx, DWORD PTR [eax]
  0055b	89 8d a8 fe ff
	ff		 mov	 DWORD PTR tv302[ebp], ecx
  00561	eb 27		 jmp	 SHORT $LN25@create_loc
$LN24@create_loc:
  00563	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??create_local@@YGPAUENTITY@@W4ENTITY_TYPES@@HPAD@Z@4JA
  00569	81 c2 92 00 00
	00		 add	 edx, 146		; 00000092H
  0056f	52		 push	 edx
  00570	68 00 00 00 00	 push	 OFFSET ??_C@_0EO@EJFNAIEI@c?3?2users?2nhv90?2projects?2eech?2ap@
  00575	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  0057a	50		 push	 eax
  0057b	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00580	c7 85 a8 fe ff
	ff 00 00 00 00	 mov	 DWORD PTR tv302[ebp], 0
$LN25@create_loc:
  0058a	b9 01 00 00 00	 mov	 ecx, 1
  0058f	85 c9		 test	 ecx, ecx
  00591	74 0c		 je	 SHORT $LN26@create_loc
  00593	c7 85 a4 fe ff
	ff 6e 00 00 00	 mov	 DWORD PTR tv310[ebp], 110 ; 0000006eH
  0059d	eb 27		 jmp	 SHORT $LN27@create_loc
$LN26@create_loc:
  0059f	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??create_local@@YGPAUENTITY@@W4ENTITY_TYPES@@HPAD@Z@4JA
  005a5	81 c2 92 00 00
	00		 add	 edx, 146		; 00000092H
  005ab	52		 push	 edx
  005ac	68 00 00 00 00	 push	 OFFSET ??_C@_0EO@EJFNAIEI@c?3?2users?2nhv90?2projects?2eech?2ap@
  005b1	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_int_type_message@@3PBDB ; overload_invalid_int_type_message
  005b6	50		 push	 eax
  005b7	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  005bc	c7 85 a4 fe ff
	ff 00 00 00 00	 mov	 DWORD PTR tv310[ebp], 0
$LN27@create_loc:
  005c6	83 bd f4 fe ff
	ff 00		 cmp	 DWORD PTR _sector$[ebp], 0
  005cd	74 10		 je	 SHORT $LN20@create_loc
  005cf	8b 8d f4 fe ff
	ff		 mov	 ecx, DWORD PTR _sector$[ebp]
  005d5	8b 11		 mov	 edx, DWORD PTR [ecx]
  005d7	89 95 a0 fe ff
	ff		 mov	 DWORD PTR tv285[ebp], edx
  005dd	eb 26		 jmp	 SHORT $LN21@create_loc
$LN20@create_loc:
  005df	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??create_local@@YGPAUENTITY@@W4ENTITY_TYPES@@HPAD@Z@4JA
  005e4	05 92 00 00 00	 add	 eax, 146		; 00000092H
  005e9	50		 push	 eax
  005ea	68 00 00 00 00	 push	 OFFSET ??_C@_0EO@EJFNAIEI@c?3?2users?2nhv90?2projects?2eech?2ap@
  005ef	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  005f5	51		 push	 ecx
  005f6	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  005fb	c7 85 a0 fe ff
	ff 00 00 00 00	 mov	 DWORD PTR tv285[ebp], 0
$LN21@create_loc:
  00605	ba 01 00 00 00	 mov	 edx, 1
  0060a	85 d2		 test	 edx, edx
  0060c	74 0c		 je	 SHORT $LN22@create_loc
  0060e	c7 85 9c fe ff
	ff 6e 00 00 00	 mov	 DWORD PTR tv293[ebp], 110 ; 0000006eH
  00618	eb 26		 jmp	 SHORT $LN23@create_loc
$LN22@create_loc:
  0061a	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??create_local@@YGPAUENTITY@@W4ENTITY_TYPES@@HPAD@Z@4JA
  0061f	05 92 00 00 00	 add	 eax, 146		; 00000092H
  00624	50		 push	 eax
  00625	68 00 00 00 00	 push	 OFFSET ??_C@_0EO@EJFNAIEI@c?3?2users?2nhv90?2projects?2eech?2ap@
  0062a	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?overload_invalid_int_type_message@@3PBDB ; overload_invalid_int_type_message
  00630	51		 push	 ecx
  00631	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00636	c7 85 9c fe ff
	ff 00 00 00 00	 mov	 DWORD PTR tv293[ebp], 0
$LN23@create_loc:
  00640	6a 6e		 push	 110			; 0000006eH
  00642	8b 95 f4 fe ff
	ff		 mov	 edx, DWORD PTR _sector$[ebp]
  00648	52		 push	 edx
  00649	69 85 a8 fe ff
	ff 5c 04 00 00	 imul	 eax, DWORD PTR tv302[ebp], 1116
  00653	8b 8d a4 fe ff
	ff		 mov	 ecx, DWORD PTR tv310[ebp]
  00659	8b 94 88 00 00
	00 00		 mov	 edx, DWORD PTR ?fn_get_local_entity_int_value@@3PAY0BBH@P6GHPAUENTITY@@W4INT_TYPES@@@ZA[eax+ecx*4]
  00660	ff d2		 call	 edx
  00662	83 c0 01	 add	 eax, 1
  00665	50		 push	 eax
  00666	6a 6e		 push	 110			; 0000006eH
  00668	8b 85 f4 fe ff
	ff		 mov	 eax, DWORD PTR _sector$[ebp]
  0066e	50		 push	 eax
  0066f	69 8d a0 fe ff
	ff 5c 04 00 00	 imul	 ecx, DWORD PTR tv285[ebp], 1116
  00679	8b 95 9c fe ff
	ff		 mov	 edx, DWORD PTR tv293[ebp]
  0067f	8b 84 91 00 00
	00 00		 mov	 eax, DWORD PTR ?fn_set_local_entity_int_value@@3PAY0BBH@P6GXPAUENTITY@@W4INT_TYPES@@H@ZA[ecx+edx*4]
  00686	ff d0		 call	 eax

; 230  : 
; 231  : 		if (raw->in_use)

  00688	8b 85 ec fe ff
	ff		 mov	 eax, DWORD PTR _raw$[ebp]
  0068e	8b 88 a0 01 00
	00		 mov	 ecx, DWORD PTR [eax+416]
  00694	c1 e9 19	 shr	 ecx, 25			; 00000019H
  00697	83 e1 01	 and	 ecx, 1
  0069a	74 3b		 je	 SHORT $LN12@create_loc

; 232  : 		{
; 233  : 			update_imap_sector_side (en, TRUE);

  0069c	6a 01		 push	 1
  0069e	8b 85 f0 fe ff
	ff		 mov	 eax, DWORD PTR _en$[ebp]
  006a4	50		 push	 eax
  006a5	e8 00 00 00 00	 call	 ?update_imap_sector_side@@YGXPAUENTITY@@H@Z ; update_imap_sector_side

; 234  : 
; 235  : 			update_imap_importance_level (en, TRUE);

  006aa	6a 01		 push	 1
  006ac	8b 85 f0 fe ff
	ff		 mov	 eax, DWORD PTR _en$[ebp]
  006b2	50		 push	 eax
  006b3	e8 00 00 00 00	 call	 ?update_imap_importance_level@@YGXPAUENTITY@@H@Z ; update_imap_importance_level

; 236  : 
; 237  : 			update_keysite_distance_to_friendly_base (en, (entity_sides) raw->side);

  006b8	8b 85 ec fe ff
	ff		 mov	 eax, DWORD PTR _raw$[ebp]
  006be	8b 88 a0 01 00
	00		 mov	 ecx, DWORD PTR [eax+416]
  006c4	c1 e9 1d	 shr	 ecx, 29			; 0000001dH
  006c7	83 e1 03	 and	 ecx, 3
  006ca	51		 push	 ecx
  006cb	8b 95 f0 fe ff
	ff		 mov	 edx, DWORD PTR _en$[ebp]
  006d1	52		 push	 edx
  006d2	e8 00 00 00 00	 call	 ?update_keysite_distance_to_friendly_base@@YGXPAUENTITY@@W4ENTITY_SIDES@@@Z ; update_keysite_distance_to_friendly_base
$LN12@create_loc:

; 238  : 		}
; 239  : 
; 240  : 		////////////////////////////////////////
; 241  : 		//
; 242  : 		//	CREATE SUB ENTITIES
; 243  : 		//
; 244  : 		////////////////////////////////////////
; 245  : 
; 246  : 		// for site buildings
; 247  : 
; 248  : 		group = create_local_entity

  006d7	6a 00		 push	 0
  006d9	6a 19		 push	 25			; 00000019H
  006db	6a 34		 push	 52			; 00000034H
  006dd	6a 05		 push	 5
  006df	8b 85 ec fe ff
	ff		 mov	 eax, DWORD PTR _raw$[ebp]
  006e5	f3 0f 10 40 0c	 movss	 xmm0, DWORD PTR [eax+12]
  006ea	f3 0f 5a c0	 cvtss2sd xmm0, xmm0
  006ee	83 ec 08	 sub	 esp, 8
  006f1	f2 0f 11 04 24	 movsd	 QWORD PTR [esp], xmm0
  006f6	8b 8d ec fe ff
	ff		 mov	 ecx, DWORD PTR _raw$[ebp]
  006fc	f3 0f 10 41 08	 movss	 xmm0, DWORD PTR [ecx+8]
  00701	f3 0f 5a c0	 cvtss2sd xmm0, xmm0
  00705	83 ec 08	 sub	 esp, 8
  00708	f2 0f 11 04 24	 movsd	 QWORD PTR [esp], xmm0
  0070d	8b 95 ec fe ff
	ff		 mov	 edx, DWORD PTR _raw$[ebp]
  00713	f3 0f 10 42 04	 movss	 xmm0, DWORD PTR [edx+4]
  00718	f3 0f 5a c0	 cvtss2sd xmm0, xmm0
  0071c	83 ec 08	 sub	 esp, 8
  0071f	f2 0f 11 04 24	 movsd	 QWORD PTR [esp], xmm0
  00724	6a 08		 push	 8
  00726	6a 09		 push	 9
  00728	8b 85 f0 fe ff
	ff		 mov	 eax, DWORD PTR _en$[ebp]
  0072e	50		 push	 eax
  0072f	6a 04		 push	 4
  00731	6a 06		 push	 6
  00733	6a ff		 push	 -1
  00735	6a 0c		 push	 12			; 0000000cH
  00737	e8 00 00 00 00	 call	 ?create_local_entity@@YAPAUENTITY@@W4ENTITY_TYPES@@HZZ ; create_local_entity
  0073c	83 c4 44	 add	 esp, 68			; 00000044H
  0073f	89 85 fc fe ff
	ff		 mov	 DWORD PTR _group$[ebp], eax
$LN3@create_loc:

; 249  : 		(
; 250  : 			ENTITY_TYPE_GROUP,
; 251  : 			ENTITY_INDEX_DONT_CARE,
; 252  : 			ENTITY_ATTR_PARENT (LIST_TYPE_BUILDING_GROUP, en),
; 253  : 			ENTITY_ATTR_VEC3D (VEC3D_TYPE_POSITION, raw->position.x, raw->position.y, raw->position.z),
; 254  : 			ENTITY_ATTR_INT_VALUE (INT_TYPE_ENTITY_SUB_TYPE, ENTITY_SUB_TYPE_GROUP_BUILDINGS),
; 255  : 			ENTITY_ATTR_END
; 256  : 		);
; 257  : 
; 258  : 		#if DEBUG_MODULE
; 259  : 		{
; 260  : 			int
; 261  : 				sx,
; 262  : 				sz;
; 263  : 
; 264  : 			get_x_sector (sx, raw->position.x);
; 265  : 			get_z_sector (sz, raw->position.z);
; 266  : 
; 267  : 			debug_log ("KS_CREAT: Side %s creating keysite %s (type %d) index %d at %f, %f (%d, %d)", entity_side_short_names [raw->side], raw->keysite_name, raw->sub_type, get_local_entity_index (en), raw->position.x, raw->position.z, sx, sz);
; 268  : 		}
; 269  : 		#endif
; 270  : 	}
; 271  : 
; 272  : 	return (en);

  00745	8b 85 f0 fe ff
	ff		 mov	 eax, DWORD PTR _en$[ebp]

; 273  : }

  0074b	5f		 pop	 edi
  0074c	5e		 pop	 esi
  0074d	5b		 pop	 ebx
  0074e	8b e5		 mov	 esp, ebp
  00750	5d		 pop	 ebp
  00751	c2 0c 00	 ret	 12			; 0000000cH
?create_local@@YGPAUENTITY@@W4ENTITY_TYPES@@HPAD@Z ENDP	; create_local
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\entity\special\keysite\ks_creat.c
;	COMDAT ?overload_keysite_create_functions@@YGXXZ
_TEXT	SEGMENT
?overload_keysite_create_functions@@YGXXZ PROC		; overload_keysite_create_functions, COMDAT

; 347  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 348  : 	fn_create_local_entity[ENTITY_TYPE_KEYSITE]		  								= create_local;

  00009	b8 04 00 00 00	 mov	 eax, 4
  0000e	6b c8 0f	 imul	 ecx, eax, 15
  00011	c7 81 00 00 00
	00 00 00 00 00	 mov	 DWORD PTR ?fn_create_local_entity@@3PAP6GPAUENTITY@@W4ENTITY_TYPES@@HPAD@ZA[ecx], OFFSET ?create_local@@YGPAUENTITY@@W4ENTITY_TYPES@@HPAD@Z ; create_local

; 349  : 
; 350  : 	fn_create_client_server_entity[ENTITY_TYPE_KEYSITE][COMMS_MODEL_SERVER]	= create_server;

  0001b	b8 08 00 00 00	 mov	 eax, 8
  00020	6b c8 0f	 imul	 ecx, eax, 15
  00023	ba 04 00 00 00	 mov	 edx, 4
  00028	6b c2 00	 imul	 eax, edx, 0
  0002b	c7 84 01 00 00
	00 00 00 00 00
	00		 mov	 DWORD PTR ?fn_create_client_server_entity@@3PAY01P6GPAUENTITY@@W4ENTITY_TYPES@@HPAD@ZA[ecx+eax], OFFSET ?create_server@@YGPAUENTITY@@W4ENTITY_TYPES@@HPAD@Z ; create_server

; 351  : 
; 352  : 	fn_create_client_server_entity[ENTITY_TYPE_KEYSITE][COMMS_MODEL_CLIENT]	= create_client;

  00036	b8 08 00 00 00	 mov	 eax, 8
  0003b	6b c8 0f	 imul	 ecx, eax, 15
  0003e	ba 04 00 00 00	 mov	 edx, 4
  00043	c1 e2 00	 shl	 edx, 0
  00046	c7 84 11 00 00
	00 00 00 00 00
	00		 mov	 DWORD PTR ?fn_create_client_server_entity@@3PAY01P6GPAUENTITY@@W4ENTITY_TYPES@@HPAD@ZA[ecx+edx], OFFSET ?create_client@@YGPAUENTITY@@W4ENTITY_TYPES@@HPAD@Z ; create_client

; 353  : }

  00051	5f		 pop	 edi
  00052	5e		 pop	 esi
  00053	5b		 pop	 ebx
  00054	8b e5		 mov	 esp, ebp
  00056	5d		 pop	 ebp
  00057	c3		 ret	 0
?overload_keysite_create_functions@@YGXXZ ENDP		; overload_keysite_create_functions
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\program files (x86)\windows kits\10\include\10.0.18362.0\ucrt\stdio.h
;	COMDAT _sprintf
_TEXT	SEGMENT
__ArgList$ = -8						; size = 4
__Result$ = -4						; size = 4
__Buffer$ = 8						; size = 4
__Format$ = 12						; size = 4
_sprintf PROC						; COMDAT

; 1781 :     {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 4c	 sub	 esp, 76			; 0000004cH
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 1782 :         int _Result;
; 1783 :         va_list _ArgList;
; 1784 :         __crt_va_start(_ArgList, _Format);

  00009	8d 45 10	 lea	 eax, DWORD PTR __Format$[ebp+4]
  0000c	89 45 f8	 mov	 DWORD PTR __ArgList$[ebp], eax

; 1785 : 
; 1786 :         #pragma warning(push)
; 1787 :         #pragma warning(disable: 4996) // Deprecation
; 1788 :         _Result = _vsprintf_l(_Buffer, _Format, NULL, _ArgList);

  0000f	8b 45 f8	 mov	 eax, DWORD PTR __ArgList$[ebp]
  00012	50		 push	 eax
  00013	6a 00		 push	 0
  00015	8b 4d 0c	 mov	 ecx, DWORD PTR __Format$[ebp]
  00018	51		 push	 ecx
  00019	8b 55 08	 mov	 edx, DWORD PTR __Buffer$[ebp]
  0001c	52		 push	 edx
  0001d	e8 00 00 00 00	 call	 __vsprintf_l
  00022	83 c4 10	 add	 esp, 16			; 00000010H
  00025	89 45 fc	 mov	 DWORD PTR __Result$[ebp], eax

; 1789 :         #pragma warning(pop)
; 1790 : 
; 1791 :         __crt_va_end(_ArgList);

  00028	c7 45 f8 00 00
	00 00		 mov	 DWORD PTR __ArgList$[ebp], 0

; 1792 :         return _Result;

  0002f	8b 45 fc	 mov	 eax, DWORD PTR __Result$[ebp]

; 1793 :     }

  00032	5f		 pop	 edi
  00033	5e		 pop	 esi
  00034	5b		 pop	 ebx
  00035	8b e5		 mov	 esp, ebp
  00037	5d		 pop	 ebp
  00038	c3		 ret	 0
_sprintf ENDP
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\program files (x86)\windows kits\10\include\10.0.18362.0\ucrt\stdio.h
;	COMDAT __vsprintf_l
_TEXT	SEGMENT
__Buffer$ = 8						; size = 4
__Format$ = 12						; size = 4
__Locale$ = 16						; size = 4
__ArgList$ = 20						; size = 4
__vsprintf_l PROC					; COMDAT

; 1459 :     {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 1460 :         #pragma warning(push)
; 1461 :         #pragma warning(disable: 4996) // Deprecation
; 1462 :         return _vsnprintf_l(_Buffer, (size_t)-1, _Format, _Locale, _ArgList);

  00009	8b 45 14	 mov	 eax, DWORD PTR __ArgList$[ebp]
  0000c	50		 push	 eax
  0000d	8b 4d 10	 mov	 ecx, DWORD PTR __Locale$[ebp]
  00010	51		 push	 ecx
  00011	8b 55 0c	 mov	 edx, DWORD PTR __Format$[ebp]
  00014	52		 push	 edx
  00015	6a ff		 push	 -1
  00017	8b 45 08	 mov	 eax, DWORD PTR __Buffer$[ebp]
  0001a	50		 push	 eax
  0001b	e8 00 00 00 00	 call	 __vsnprintf_l
  00020	83 c4 14	 add	 esp, 20			; 00000014H

; 1463 :         #pragma warning(pop)
; 1464 :     }

  00023	5f		 pop	 edi
  00024	5e		 pop	 esi
  00025	5b		 pop	 ebx
  00026	8b e5		 mov	 esp, ebp
  00028	5d		 pop	 ebp
  00029	c3		 ret	 0
__vsprintf_l ENDP
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\program files (x86)\windows kits\10\include\10.0.18362.0\ucrt\stdio.h
;	COMDAT __vsnprintf_l
_TEXT	SEGMENT
tv74 = -72						; size = 4
__Result$ = -4						; size = 4
__Buffer$ = 8						; size = 4
__BufferCount$ = 12					; size = 4
__Format$ = 16						; size = 4
__Locale$ = 20						; size = 4
__ArgList$ = 24						; size = 4
__vsnprintf_l PROC					; COMDAT

; 1389 :     {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 48	 sub	 esp, 72			; 00000048H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 1390 :         int const _Result = __stdio_common_vsprintf(

  00009	8b 45 18	 mov	 eax, DWORD PTR __ArgList$[ebp]
  0000c	50		 push	 eax
  0000d	8b 4d 14	 mov	 ecx, DWORD PTR __Locale$[ebp]
  00010	51		 push	 ecx
  00011	8b 55 10	 mov	 edx, DWORD PTR __Format$[ebp]
  00014	52		 push	 edx
  00015	8b 45 0c	 mov	 eax, DWORD PTR __BufferCount$[ebp]
  00018	50		 push	 eax
  00019	8b 4d 08	 mov	 ecx, DWORD PTR __Buffer$[ebp]
  0001c	51		 push	 ecx
  0001d	e8 00 00 00 00	 call	 ___local_stdio_printf_options
  00022	8b 10		 mov	 edx, DWORD PTR [eax]
  00024	83 ca 01	 or	 edx, 1
  00027	8b 40 04	 mov	 eax, DWORD PTR [eax+4]
  0002a	50		 push	 eax
  0002b	52		 push	 edx
  0002c	ff 15 00 00 00
	00		 call	 DWORD PTR __imp____stdio_common_vsprintf
  00032	83 c4 1c	 add	 esp, 28			; 0000001cH
  00035	89 45 fc	 mov	 DWORD PTR __Result$[ebp], eax

; 1391 :             _CRT_INTERNAL_LOCAL_PRINTF_OPTIONS | _CRT_INTERNAL_PRINTF_LEGACY_VSPRINTF_NULL_TERMINATION,
; 1392 :             _Buffer, _BufferCount, _Format, _Locale, _ArgList);
; 1393 : 
; 1394 :         return _Result < 0 ? -1 : _Result;

  00038	83 7d fc 00	 cmp	 DWORD PTR __Result$[ebp], 0
  0003c	7d 09		 jge	 SHORT $LN3@vsnprintf_
  0003e	c7 45 b8 ff ff
	ff ff		 mov	 DWORD PTR tv74[ebp], -1
  00045	eb 06		 jmp	 SHORT $LN4@vsnprintf_
$LN3@vsnprintf_:
  00047	8b 45 fc	 mov	 eax, DWORD PTR __Result$[ebp]
  0004a	89 45 b8	 mov	 DWORD PTR tv74[ebp], eax
$LN4@vsnprintf_:
  0004d	8b 45 b8	 mov	 eax, DWORD PTR tv74[ebp]

; 1395 :     }

  00050	5f		 pop	 edi
  00051	5e		 pop	 esi
  00052	5b		 pop	 ebx
  00053	8b e5		 mov	 esp, ebp
  00055	5d		 pop	 ebp
  00056	c3		 ret	 0
__vsnprintf_l ENDP
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\program files (x86)\windows kits\10\include\10.0.18362.0\ucrt\corecrt_stdio_config.h
;	COMDAT ___local_stdio_printf_options
_TEXT	SEGMENT
___local_stdio_printf_options PROC			; COMDAT

; 86   :     {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 87   :         static unsigned __int64 _OptionsStorage;
; 88   :         return &_OptionsStorage;

  00009	b8 00 00 00 00	 mov	 eax, OFFSET ?_OptionsStorage@?1??__local_stdio_printf_options@@9@4_KA ; `__local_stdio_printf_options'::`2'::_OptionsStorage

; 89   :     }

  0000e	5f		 pop	 edi
  0000f	5e		 pop	 esi
  00010	5b		 pop	 ebx
  00011	8b e5		 mov	 esp, ebp
  00013	5d		 pop	 ebp
  00014	c3		 ret	 0
___local_stdio_printf_options ENDP
_TEXT	ENDS
END
