; Listing generated by Microsoft (R) Optimizing Compiler Version 19.16.27045.0 

	TITLE	C:\Users\nhv90\Projects\eech\aphavoc\source\gunships\avionics\viper\vi_tgt.c
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB MSVCRTD
INCLUDELIB OLDNAMES

PUBLIC	?initialise_viper_target_acquisition_systems@@YGXXZ ; initialise_viper_target_acquisition_systems
PUBLIC	?deinitialise_viper_target_acquisition_systems@@YGXXZ ; deinitialise_viper_target_acquisition_systems
PUBLIC	?select_viper_target_acquisition_system@@YGXW4TARGET_ACQUISITION_SYSTEMS@@@Z ; select_viper_target_acquisition_system
PUBLIC	?update_viper_target_acquisition_system@@YGXXZ	; update_viper_target_acquisition_system
PUBLIC	?centre_viper_target_acquisition_system@@YGXXZ	; centre_viper_target_acquisition_system
PUBLIC	?toggle_viper_show_allied_targets@@YGXXZ	; toggle_viper_show_allied_targets
PUBLIC	?toggle_viper_auto_target@@YGXXZ		; toggle_viper_auto_target
PUBLIC	?toggle_viper_lock_target@@YGXXZ		; toggle_viper_lock_target
PUBLIC	?set_viper_lock_target@@YGXH@Z			; set_viper_lock_target
PUBLIC	??_C@_0CH@DDKDNBNH@Invalid?5target?5acquisition?5syst@ ; `string'
PUBLIC	?__LINE__Var@?0??update_viper_target_acquisition_system@@YGXXZ@4JA ; `update_viper_target_acquisition_system'::`1'::__LINE__Var
PUBLIC	??_C@_0EN@BNOKEEKE@c?3?2users?2nhv90?2projects?2eech?2ap@ ; `string'
EXTRN	?process_assert@@YGXPBD0H@Z:PROC		; process_assert
EXTRN	?debug_fatal@@YAXPBDZZ:PROC			; debug_fatal
EXTRN	?query_TIR_active@@YAHXZ:PROC			; query_TIR_active
EXTRN	?set_view_mode@@YGHW4VIEW_MODES@@@Z:PROC	; set_view_mode
EXTRN	?select_padlock_view_event@@YGXW4PADLOCK_MODES@@@Z:PROC ; select_padlock_view_event
EXTRN	?reset_common_target_acquisition_system_keys@@YGXXZ:PROC ; reset_common_target_acquisition_system_keys
EXTRN	?set_gunship_target@@YGXPAUENTITY@@@Z:PROC	; set_gunship_target
EXTRN	?play_common_cpg_target_acquisition_system_speech@@YGXW4TARGET_ACQUISITION_SYSTEMS@@0H@Z:PROC ; play_common_cpg_target_acquisition_system_speech
EXTRN	?update_common_eo@@YGXXZ:PROC			; update_common_eo
EXTRN	?activate_common_eo@@YGXXZ:PROC			; activate_common_eo
EXTRN	?deactivate_common_eo@@YGXXZ:PROC		; deactivate_common_eo
EXTRN	?slave_common_eo_to_current_target@@YGXXZ:PROC	; slave_common_eo_to_current_target
EXTRN	?copy_eo_zoom@@YGXPAUEO_PARAMS_DYNAMIC_MOVE@@0@Z:PROC ; copy_eo_zoom
EXTRN	?laser_is_active@@YGHXZ:PROC			; laser_is_active
EXTRN	?set_laser_is_active@@YGXH@Z:PROC		; set_laser_is_active
EXTRN	?toggle_eo_lock@@YGXXZ:PROC			; toggle_eo_lock
EXTRN	?set_eo_lock@@YGXH@Z:PROC			; set_eo_lock
EXTRN	?update_common_hms@@YGXXZ:PROC			; update_common_hms
EXTRN	?activate_common_hms@@YGXXZ:PROC		; activate_common_hms
EXTRN	?deactivate_common_hms@@YGXXZ:PROC		; deactivate_common_hms
EXTRN	?update_weapon_lock_type@@YGXW4TARGET_ACQUISITION_SYSTEMS@@@Z:PROC ; update_weapon_lock_type
EXTRN	?slave_apache_eo_to_current_target@@YGXXZ:PROC	; slave_apache_eo_to_current_target
EXTRN	?update_apache_hms@@YGXXZ:PROC			; update_apache_hms
EXTRN	?initialise_viper_eo@@YGXXZ:PROC		; initialise_viper_eo
EXTRN	?deinitialise_viper_eo@@YGXXZ:PROC		; deinitialise_viper_eo
EXTRN	?update_viper_eo@@YGXPAUEO_PARAMS_DYNAMIC_MOVE@@@Z:PROC ; update_viper_eo
EXTRN	?centre_viper_eo@@YGXXZ:PROC			; centre_viper_eo
EXTRN	?slave_viper_eo_to_current_target@@YGXXZ:PROC	; slave_viper_eo_to_current_target
EXTRN	?initialise_viper_hms@@YGXXZ:PROC		; initialise_viper_hms
EXTRN	?deinitialise_viper_hms@@YGXXZ:PROC		; deinitialise_viper_hms
EXTRN	?select_viper_tads_mfd@@YGXXZ:PROC		; select_viper_tads_mfd
EXTRN	?command_line_manual_laser_radar@@3HA:DWORD	; command_line_manual_laser_radar
EXTRN	?command_line_targeting_system_auto_page@@3HA:DWORD ; command_line_targeting_system_auto_page
EXTRN	?null_entity_pointer_message@@3PBDB:DWORD	; null_entity_pointer_message
EXTRN	?system_comms_model@@3W4COMMS_MODEL_TYPES@@A:DWORD ; system_comms_model
EXTRN	?overload_invalid_list_type_message@@3PBDB:DWORD ; overload_invalid_list_type_message
EXTRN	?fn_get_local_entity_parent@@3PAY0CN@P6GPAUENTITY@@PAU1@W4LIST_TYPES@@@ZA:BYTE ; fn_get_local_entity_parent
EXTRN	?overload_invalid_int_type_message@@3PBDB:DWORD	; overload_invalid_int_type_message
EXTRN	?fn_set_client_server_entity_int_value@@3PAY1BBH@1P6GXPAUENTITY@@W4INT_TYPES@@H@ZA:BYTE ; fn_set_client_server_entity_int_value
EXTRN	?fn_get_local_entity_int_value@@3PAY0BBH@P6GHPAUENTITY@@W4INT_TYPES@@@ZA:BYTE ; fn_get_local_entity_int_value
EXTRN	?gunship_entity@@3PAUENTITY@@A:DWORD		; gunship_entity
EXTRN	?view_mode@@3W4VIEW_MODES@@A:DWORD		; view_mode
EXTRN	?in_cockpit@@3HA:DWORD				; in_cockpit
EXTRN	?target_acquisition_system@@3W4TARGET_ACQUISITION_SYSTEMS@@A:DWORD ; target_acquisition_system
EXTRN	?target_locked@@3HA:DWORD			; target_locked
EXTRN	?hms_target_locked@@3HA:DWORD			; hms_target_locked
EXTRN	?hud_mode@@3W4HUD_MODES@@A:DWORD		; hud_mode
EXTRN	?previous_hud_mode@@3W4HUD_MODES@@A:DWORD	; previous_hud_mode
EXTRN	?viper_damage@@3TVIPER_DAMAGE_FLAGS@@A:DWORD	; viper_damage
EXTRN	?viper_flir@@3UEO_PARAMS_DYNAMIC_MOVE@@A:BYTE	; viper_flir
EXTRN	?viper_dtv@@3UEO_PARAMS_DYNAMIC_MOVE@@A:BYTE	; viper_dtv
;	COMDAT ??_C@_0EN@BNOKEEKE@c?3?2users?2nhv90?2projects?2eech?2ap@
CONST	SEGMENT
??_C@_0EN@BNOKEEKE@c?3?2users?2nhv90?2projects?2eech?2ap@ DB 'c:\users\nh'
	DB	'v90\projects\eech\aphavoc\source\gunships\avionics\viper\vi_t'
	DB	'gt.c', 00H					; `string'
CONST	ENDS
;	COMDAT ?__LINE__Var@?0??update_viper_target_acquisition_system@@YGXXZ@4JA
_DATA	SEGMENT
?__LINE__Var@?0??update_viper_target_acquisition_system@@YGXXZ@4JA DD 0117H ; `update_viper_target_acquisition_system'::`1'::__LINE__Var
_DATA	ENDS
;	COMDAT ??_C@_0CH@DDKDNBNH@Invalid?5target?5acquisition?5syst@
CONST	SEGMENT
??_C@_0CH@DDKDNBNH@Invalid?5target?5acquisition?5syst@ DB 'Invalid target'
	DB	' acquisition system = %d', 00H		; `string'
CONST	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\gunships\avionics\viper\vi_tgt.c
;	COMDAT ?deselect_viper_target_acquisition_system@@YGXW4TARGET_ACQUISITION_SYSTEMS@@@Z
_TEXT	SEGMENT
tv64 = -68						; size = 4
_system$ = 8						; size = 4
?deselect_viper_target_acquisition_system@@YGXW4TARGET_ACQUISITION_SYSTEMS@@@Z PROC ; deselect_viper_target_acquisition_system, COMDAT

; 102  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 44	 sub	 esp, 68			; 00000044H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 103  : 	switch (system)

  00009	8b 45 08	 mov	 eax, DWORD PTR _system$[ebp]
  0000c	89 45 bc	 mov	 DWORD PTR tv64[ebp], eax
  0000f	83 7d bc 09	 cmp	 DWORD PTR tv64[ebp], 9
  00013	77 56		 ja	 SHORT $LN9@deselect_v
  00015	8b 4d bc	 mov	 ecx, DWORD PTR tv64[ebp]
  00018	0f b6 91 00 00
	00 00		 movzx	 edx, BYTE PTR $LN11@deselect_v[ecx]
  0001f	ff 24 95 00 00
	00 00		 jmp	 DWORD PTR $LN12@deselect_v[edx*4]
$LN4@deselect_v:

; 104  : 	{
; 105  : 		////////////////////////////////////////
; 106  : 		case TARGET_ACQUISITION_SYSTEM_OFF:
; 107  : 		////////////////////////////////////////
; 108  : 		{
; 109  : 			// laser is on in all modes but OFF in automatic mode
; 110  : 			if (!command_line_manual_laser_radar)

  00026	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?command_line_manual_laser_radar@@3HA, 0 ; command_line_manual_laser_radar
  0002d	75 07		 jne	 SHORT $LN5@deselect_v

; 111  : 				set_laser_is_active(TRUE);

  0002f	6a 01		 push	 1
  00031	e8 00 00 00 00	 call	 ?set_laser_is_active@@YGXH@Z ; set_laser_is_active
$LN5@deselect_v:

; 112  : 			
; 113  : 			break;

  00036	eb 44		 jmp	 SHORT $LN1@deselect_v
$LN6@deselect_v:

; 114  : 		}
; 115  : 		////////////////////////////////////////
; 116  : 		case TARGET_ACQUISITION_SYSTEM_FLIR:
; 117  : 		////////////////////////////////////////
; 118  : 		{
; 119  : 			deactivate_common_eo ();

  00038	e8 00 00 00 00	 call	 ?deactivate_common_eo@@YGXXZ ; deactivate_common_eo

; 120  : 
; 121  : 			copy_eo_zoom(&viper_flir, &viper_dtv);

  0003d	68 00 00 00 00	 push	 OFFSET ?viper_dtv@@3UEO_PARAMS_DYNAMIC_MOVE@@A ; viper_dtv
  00042	68 00 00 00 00	 push	 OFFSET ?viper_flir@@3UEO_PARAMS_DYNAMIC_MOVE@@A ; viper_flir
  00047	e8 00 00 00 00	 call	 ?copy_eo_zoom@@YGXPAUEO_PARAMS_DYNAMIC_MOVE@@0@Z ; copy_eo_zoom

; 122  : 
; 123  : 			break;

  0004c	eb 2e		 jmp	 SHORT $LN1@deselect_v
$LN7@deselect_v:

; 124  : 		}
; 125  : 		////////////////////////////////////////
; 126  : 		case TARGET_ACQUISITION_SYSTEM_DTV:
; 127  : 		////////////////////////////////////////
; 128  : 		{
; 129  : 			deactivate_common_eo ();

  0004e	e8 00 00 00 00	 call	 ?deactivate_common_eo@@YGXXZ ; deactivate_common_eo

; 130  : 
; 131  : 			copy_eo_zoom(&viper_dtv, &viper_flir);

  00053	68 00 00 00 00	 push	 OFFSET ?viper_flir@@3UEO_PARAMS_DYNAMIC_MOVE@@A ; viper_flir
  00058	68 00 00 00 00	 push	 OFFSET ?viper_dtv@@3UEO_PARAMS_DYNAMIC_MOVE@@A ; viper_dtv
  0005d	e8 00 00 00 00	 call	 ?copy_eo_zoom@@YGXPAUEO_PARAMS_DYNAMIC_MOVE@@0@Z ; copy_eo_zoom

; 132  : 
; 133  : 			break;

  00062	eb 18		 jmp	 SHORT $LN1@deselect_v
$LN8@deselect_v:

; 134  : 		}
; 135  : 		////////////////////////////////////////
; 136  : 		case TARGET_ACQUISITION_SYSTEM_HIDSS:
; 137  : 		////////////////////////////////////////
; 138  : 		{
; 139  : 			deactivate_common_hms ();

  00064	e8 00 00 00 00	 call	 ?deactivate_common_hms@@YGXXZ ; deactivate_common_hms

; 140  : 
; 141  : 			break;

  00069	eb 11		 jmp	 SHORT $LN1@deselect_v
$LN9@deselect_v:

; 142  : 		}
; 143  : 		////////////////////////////////////////
; 144  : 		default:
; 145  : 		////////////////////////////////////////
; 146  : 		{
; 147  : 			debug_fatal ("Invalid target acquisition system = %d", system);

  0006b	8b 45 08	 mov	 eax, DWORD PTR _system$[ebp]
  0006e	50		 push	 eax
  0006f	68 00 00 00 00	 push	 OFFSET ??_C@_0CH@DDKDNBNH@Invalid?5target?5acquisition?5syst@
  00074	e8 00 00 00 00	 call	 ?debug_fatal@@YAXPBDZZ	; debug_fatal
  00079	83 c4 08	 add	 esp, 8
$LN1@deselect_v:

; 148  : 
; 149  : 			break;
; 150  : 		}
; 151  : 	}
; 152  : }

  0007c	5f		 pop	 edi
  0007d	5e		 pop	 esi
  0007e	5b		 pop	 ebx
  0007f	8b e5		 mov	 esp, ebp
  00081	5d		 pop	 ebp
  00082	c2 04 00	 ret	 4
  00085	0f 1f 00	 npad	 3
$LN12@deselect_v:
  00088	00 00 00 00	 DD	 $LN4@deselect_v
  0008c	00 00 00 00	 DD	 $LN6@deselect_v
  00090	00 00 00 00	 DD	 $LN7@deselect_v
  00094	00 00 00 00	 DD	 $LN8@deselect_v
  00098	00 00 00 00	 DD	 $LN9@deselect_v
$LN11@deselect_v:
  0009c	00		 DB	 0
  0009d	04		 DB	 4
  0009e	04		 DB	 4
  0009f	01		 DB	 1
  000a0	02		 DB	 2
  000a1	04		 DB	 4
  000a2	04		 DB	 4
  000a3	04		 DB	 4
  000a4	04		 DB	 4
  000a5	03		 DB	 3
?deselect_viper_target_acquisition_system@@YGXW4TARGET_ACQUISITION_SYSTEMS@@@Z ENDP ; deselect_viper_target_acquisition_system
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\gunships\avionics\viper\vi_tgt.c
;	COMDAT ?set_viper_lock_target@@YGXH@Z
_TEXT	SEGMENT
tv64 = -68						; size = 4
_lock$ = 8						; size = 4
?set_viper_lock_target@@YGXH@Z PROC			; set_viper_lock_target, COMDAT

; 569  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 44	 sub	 esp, 68			; 00000044H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 570  : 	switch (target_acquisition_system)

  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ?target_acquisition_system@@3W4TARGET_ACQUISITION_SYSTEMS@@A ; target_acquisition_system
  0000e	89 45 bc	 mov	 DWORD PTR tv64[ebp], eax
  00011	83 7d bc 03	 cmp	 DWORD PTR tv64[ebp], 3
  00015	7c 23		 jl	 SHORT $LN1@set_viper_
  00017	83 7d bc 04	 cmp	 DWORD PTR tv64[ebp], 4
  0001b	7e 0a		 jle	 SHORT $LN5@set_viper_
  0001d	83 7d bc 09	 cmp	 DWORD PTR tv64[ebp], 9
  00021	74 0f		 je	 SHORT $LN6@set_viper_
  00023	eb 15		 jmp	 SHORT $LN1@set_viper_

; 571  : 	{
; 572  : 		////////////////////////////////////////
; 573  : 		case TARGET_ACQUISITION_SYSTEM_OFF:
; 574  : 		////////////////////////////////////////
; 575  : 		{
; 576  : 			break;

  00025	eb 13		 jmp	 SHORT $LN1@set_viper_
$LN5@set_viper_:

; 577  : 		}
; 578  : 		////////////////////////////////////////
; 579  : 		case TARGET_ACQUISITION_SYSTEM_FLIR:
; 580  : 		case TARGET_ACQUISITION_SYSTEM_DTV:
; 581  : 		////////////////////////////////////////
; 582  : 		{
; 583  : 			set_eo_lock(lock);

  00027	8b 45 08	 mov	 eax, DWORD PTR _lock$[ebp]
  0002a	50		 push	 eax
  0002b	e8 00 00 00 00	 call	 ?set_eo_lock@@YGXH@Z	; set_eo_lock

; 584  : 
; 585  : 			break;

  00030	eb 08		 jmp	 SHORT $LN1@set_viper_
$LN6@set_viper_:

; 586  : 		}
; 587  : 		////////////////////////////////////////
; 588  : 		case TARGET_ACQUISITION_SYSTEM_HIDSS:
; 589  : 		////////////////////////////////////////
; 590  : 		{
; 591  : 			hms_target_locked = lock;

  00032	8b 45 08	 mov	 eax, DWORD PTR _lock$[ebp]
  00035	a3 00 00 00 00	 mov	 DWORD PTR ?hms_target_locked@@3HA, eax ; hms_target_locked
$LN1@set_viper_:

; 592  : 
; 593  : 			break;
; 594  : 		}
; 595  : 	}
; 596  : }

  0003a	5f		 pop	 edi
  0003b	5e		 pop	 esi
  0003c	5b		 pop	 ebx
  0003d	8b e5		 mov	 esp, ebp
  0003f	5d		 pop	 ebp
  00040	c2 04 00	 ret	 4
?set_viper_lock_target@@YGXH@Z ENDP			; set_viper_lock_target
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\gunships\avionics\viper\vi_tgt.c
;	COMDAT ?toggle_viper_lock_target@@YGXXZ
_TEXT	SEGMENT
tv64 = -68						; size = 4
?toggle_viper_lock_target@@YGXXZ PROC			; toggle_viper_lock_target, COMDAT

; 518  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 44	 sub	 esp, 68			; 00000044H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 519  : 	switch (target_acquisition_system)

  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ?target_acquisition_system@@3W4TARGET_ACQUISITION_SYSTEMS@@A ; target_acquisition_system
  0000e	89 45 bc	 mov	 DWORD PTR tv64[ebp], eax
  00011	83 7d bc 03	 cmp	 DWORD PTR tv64[ebp], 3
  00015	7c 5a		 jl	 SHORT $LN1@toggle_vip
  00017	83 7d bc 04	 cmp	 DWORD PTR tv64[ebp], 4
  0001b	7e 0a		 jle	 SHORT $LN5@toggle_vip
  0001d	83 7d bc 09	 cmp	 DWORD PTR tv64[ebp], 9
  00021	74 0b		 je	 SHORT $LN6@toggle_vip
  00023	eb 4c		 jmp	 SHORT $LN1@toggle_vip

; 520  : 	{
; 521  : 		////////////////////////////////////////
; 522  : 		case TARGET_ACQUISITION_SYSTEM_OFF:
; 523  : 		////////////////////////////////////////
; 524  : 		{
; 525  : 			break;

  00025	eb 4a		 jmp	 SHORT $LN1@toggle_vip
$LN5@toggle_vip:

; 526  : 		}
; 527  : 		////////////////////////////////////////
; 528  : 		case TARGET_ACQUISITION_SYSTEM_FLIR:
; 529  : 		case TARGET_ACQUISITION_SYSTEM_DTV:
; 530  : 		////////////////////////////////////////
; 531  : 		{
; 532  : 			toggle_eo_lock();

  00027	e8 00 00 00 00	 call	 ?toggle_eo_lock@@YGXXZ	; toggle_eo_lock

; 533  : 
; 534  : 			break;

  0002c	eb 43		 jmp	 SHORT $LN1@toggle_vip
$LN6@toggle_vip:

; 535  : 		}
; 536  : 		////////////////////////////////////////
; 537  : 		case TARGET_ACQUISITION_SYSTEM_HIDSS:
; 538  : 		////////////////////////////////////////
; 539  : 		{
; 540  : 			hms_target_locked ^= 1;

  0002e	a1 00 00 00 00	 mov	 eax, DWORD PTR ?hms_target_locked@@3HA ; hms_target_locked
  00033	83 f0 01	 xor	 eax, 1
  00036	a3 00 00 00 00	 mov	 DWORD PTR ?hms_target_locked@@3HA, eax ; hms_target_locked

; 541  : 
; 542  : 			if (hms_target_locked)

  0003b	74 24		 je	 SHORT $LN7@toggle_vip

; 543  : 			{
; 544  : 				if (in_cockpit && !query_TIR_active())

  0003d	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?in_cockpit@@3HA, 0 ; in_cockpit
  00044	74 12		 je	 SHORT $LN9@toggle_vip
  00046	e8 00 00 00 00	 call	 ?query_TIR_active@@YAHXZ ; query_TIR_active
  0004b	85 c0		 test	 eax, eax
  0004d	75 09		 jne	 SHORT $LN9@toggle_vip

; 545  : 				{
; 546  : 					set_view_mode (VIEW_MODE_VIRTUAL_COCKPIT_TRACK_TARGET);

  0004f	6a 22		 push	 34			; 00000022H
  00051	e8 00 00 00 00	 call	 ?set_view_mode@@YGHW4VIEW_MODES@@@Z ; set_view_mode

; 547  : 				}
; 548  : 				else

  00056	eb 07		 jmp	 SHORT $LN10@toggle_vip
$LN9@toggle_vip:

; 549  : 					set_eo_lock(TRUE);

  00058	6a 01		 push	 1
  0005a	e8 00 00 00 00	 call	 ?set_eo_lock@@YGXH@Z	; set_eo_lock
$LN10@toggle_vip:

; 550  : 			}
; 551  : 			else

  0005f	eb 10		 jmp	 SHORT $LN1@toggle_vip
$LN7@toggle_vip:

; 552  : 			{
; 553  : 				if (get_view_mode () == VIEW_MODE_VIRTUAL_COCKPIT_TRACK_TARGET)

  00061	83 3d 00 00 00
	00 22		 cmp	 DWORD PTR ?view_mode@@3W4VIEW_MODES@@A, 34 ; view_mode, 00000022H
  00068	75 07		 jne	 SHORT $LN1@toggle_vip

; 554  : 				{
; 555  : 					select_padlock_view_event (PADLOCK_MODE_NONE);

  0006a	6a 00		 push	 0
  0006c	e8 00 00 00 00	 call	 ?select_padlock_view_event@@YGXW4PADLOCK_MODES@@@Z ; select_padlock_view_event
$LN1@toggle_vip:

; 556  : 				}
; 557  : 			}
; 558  : 
; 559  : 			break;
; 560  : 		}
; 561  : 	}
; 562  : }

  00071	5f		 pop	 edi
  00072	5e		 pop	 esi
  00073	5b		 pop	 ebx
  00074	8b e5		 mov	 esp, ebp
  00076	5d		 pop	 ebp
  00077	c3		 ret	 0
?toggle_viper_lock_target@@YGXXZ ENDP			; toggle_viper_lock_target
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\gunships\avionics\viper\vi_tgt.c
;	COMDAT ?toggle_viper_auto_target@@YGXXZ
_TEXT	SEGMENT
tv64 = -68						; size = 4
?toggle_viper_auto_target@@YGXXZ PROC			; toggle_viper_auto_target, COMDAT

; 483  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 44	 sub	 esp, 68			; 00000044H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 484  : 	switch (target_acquisition_system)

  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ?target_acquisition_system@@3W4TARGET_ACQUISITION_SYSTEMS@@A ; target_acquisition_system
  0000e	89 45 bc	 mov	 DWORD PTR tv64[ebp], eax

; 485  : 	{
; 486  : 		////////////////////////////////////////
; 487  : 		case TARGET_ACQUISITION_SYSTEM_OFF:
; 488  : 		////////////////////////////////////////
; 489  : 		{
; 490  : 			break;
; 491  : 		}
; 492  : 		////////////////////////////////////////
; 493  : 		case TARGET_ACQUISITION_SYSTEM_FLIR:
; 494  : 		////////////////////////////////////////
; 495  : 		{
; 496  : 			break;
; 497  : 		}
; 498  : 		////////////////////////////////////////
; 499  : 		case TARGET_ACQUISITION_SYSTEM_DTV:
; 500  : 		////////////////////////////////////////
; 501  : 		{
; 502  : 			break;
; 503  : 		}
; 504  : 		////////////////////////////////////////
; 505  : 		case TARGET_ACQUISITION_SYSTEM_HIDSS:
; 506  : 		////////////////////////////////////////
; 507  : 		{
; 508  : 			break;
; 509  : 		}
; 510  : 	}
; 511  : }

  00011	5f		 pop	 edi
  00012	5e		 pop	 esi
  00013	5b		 pop	 ebx
  00014	8b e5		 mov	 esp, ebp
  00016	5d		 pop	 ebp
  00017	c3		 ret	 0
?toggle_viper_auto_target@@YGXXZ ENDP			; toggle_viper_auto_target
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\gunships\avionics\viper\vi_tgt.c
;	COMDAT ?toggle_viper_show_allied_targets@@YGXXZ
_TEXT	SEGMENT
tv64 = -68						; size = 4
?toggle_viper_show_allied_targets@@YGXXZ PROC		; toggle_viper_show_allied_targets, COMDAT

; 448  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 44	 sub	 esp, 68			; 00000044H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 449  : 	switch (target_acquisition_system)

  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ?target_acquisition_system@@3W4TARGET_ACQUISITION_SYSTEMS@@A ; target_acquisition_system
  0000e	89 45 bc	 mov	 DWORD PTR tv64[ebp], eax

; 450  : 	{
; 451  : 		////////////////////////////////////////
; 452  : 		case TARGET_ACQUISITION_SYSTEM_OFF:
; 453  : 		////////////////////////////////////////
; 454  : 		{
; 455  : 			break;
; 456  : 		}
; 457  : 		////////////////////////////////////////
; 458  : 		case TARGET_ACQUISITION_SYSTEM_FLIR:
; 459  : 		////////////////////////////////////////
; 460  : 		{
; 461  : 			break;
; 462  : 		}
; 463  : 		////////////////////////////////////////
; 464  : 		case TARGET_ACQUISITION_SYSTEM_DTV:
; 465  : 		////////////////////////////////////////
; 466  : 		{
; 467  : 			break;
; 468  : 		}
; 469  : 		////////////////////////////////////////
; 470  : 		case TARGET_ACQUISITION_SYSTEM_HIDSS:
; 471  : 		////////////////////////////////////////
; 472  : 		{
; 473  : 			break;
; 474  : 		}
; 475  : 	}
; 476  : }

  00011	5f		 pop	 edi
  00012	5e		 pop	 esi
  00013	5b		 pop	 ebx
  00014	8b e5		 mov	 esp, ebp
  00016	5d		 pop	 ebp
  00017	c3		 ret	 0
?toggle_viper_show_allied_targets@@YGXXZ ENDP		; toggle_viper_show_allied_targets
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\gunships\avionics\viper\vi_tgt.c
;	COMDAT ?centre_viper_target_acquisition_system@@YGXXZ
_TEXT	SEGMENT
tv64 = -68						; size = 4
?centre_viper_target_acquisition_system@@YGXXZ PROC	; centre_viper_target_acquisition_system, COMDAT

; 409  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 44	 sub	 esp, 68			; 00000044H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 410  : 	switch (target_acquisition_system)

  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ?target_acquisition_system@@3W4TARGET_ACQUISITION_SYSTEMS@@A ; target_acquisition_system
  0000e	89 45 bc	 mov	 DWORD PTR tv64[ebp], eax
  00011	83 7d bc 03	 cmp	 DWORD PTR tv64[ebp], 3
  00015	74 0a		 je	 SHORT $LN5@centre_vip
  00017	83 7d bc 04	 cmp	 DWORD PTR tv64[ebp], 4
  0001b	74 0b		 je	 SHORT $LN6@centre_vip
  0001d	eb 0e		 jmp	 SHORT $LN1@centre_vip

; 411  : 	{
; 412  : 		////////////////////////////////////////
; 413  : 		case TARGET_ACQUISITION_SYSTEM_OFF:
; 414  : 		////////////////////////////////////////
; 415  : 		{
; 416  : 			break;

  0001f	eb 0c		 jmp	 SHORT $LN1@centre_vip
$LN5@centre_vip:

; 417  : 		}
; 418  : 		////////////////////////////////////////
; 419  : 		case TARGET_ACQUISITION_SYSTEM_FLIR:
; 420  : 		////////////////////////////////////////
; 421  : 		{
; 422  : 			centre_viper_eo ();

  00021	e8 00 00 00 00	 call	 ?centre_viper_eo@@YGXXZ	; centre_viper_eo

; 423  : 
; 424  : 			break;

  00026	eb 05		 jmp	 SHORT $LN1@centre_vip
$LN6@centre_vip:

; 425  : 		}
; 426  : 		////////////////////////////////////////
; 427  : 		case TARGET_ACQUISITION_SYSTEM_DTV:
; 428  : 		////////////////////////////////////////
; 429  : 		{
; 430  : 			centre_viper_eo ();

  00028	e8 00 00 00 00	 call	 ?centre_viper_eo@@YGXXZ	; centre_viper_eo
$LN1@centre_vip:

; 431  : 
; 432  : 			break;
; 433  : 		}
; 434  : 		////////////////////////////////////////
; 435  : 		case TARGET_ACQUISITION_SYSTEM_HIDSS:
; 436  : 		////////////////////////////////////////
; 437  : 		{
; 438  : 			break;
; 439  : 		}
; 440  : 	}
; 441  : }

  0002d	5f		 pop	 edi
  0002e	5e		 pop	 esi
  0002f	5b		 pop	 ebx
  00030	8b e5		 mov	 esp, ebp
  00032	5d		 pop	 ebp
  00033	c3		 ret	 0
?centre_viper_target_acquisition_system@@YGXXZ ENDP	; centre_viper_target_acquisition_system
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\gunships\avionics\viper\vi_tgt.c
;	COMDAT ?update_viper_target_acquisition_system@@YGXXZ
_TEXT	SEGMENT
tv207 = -88						; size = 4
tv186 = -88						; size = 4
tv163 = -88						; size = 4
tv142 = -88						; size = 4
tv86 = -88						; size = 4
tv199 = -84						; size = 4
tv179 = -84						; size = 4
tv172 = -84						; size = 4
tv155 = -84						; size = 4
tv135 = -84						; size = 4
tv129 = -84						; size = 4
tv78 = -84						; size = 4
tv64 = -84						; size = 4
_los_to_target$1 = -16					; size = 4
_laser_on$2 = -12					; size = 4
_target$3 = -8						; size = 4
_source$4 = -4						; size = 4
?update_viper_target_acquisition_system@@YGXXZ PROC	; update_viper_target_acquisition_system, COMDAT

; 279  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 58	 sub	 esp, 88			; 00000058H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 280  : 	switch (target_acquisition_system)

  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ?target_acquisition_system@@3W4TARGET_ACQUISITION_SYSTEMS@@A ; target_acquisition_system
  0000e	89 45 ac	 mov	 DWORD PTR tv64[ebp], eax
  00011	83 7d ac 09	 cmp	 DWORD PTR tv64[ebp], 9
  00015	77 79		 ja	 SHORT $LN2@update_vip
  00017	8b 4d ac	 mov	 ecx, DWORD PTR tv64[ebp]
  0001a	0f b6 91 00 00
	00 00		 movzx	 edx, BYTE PTR $LN39@update_vip[ecx]
  00021	ff 24 95 00 00
	00 00		 jmp	 DWORD PTR $LN41@update_vip[edx*4]
$LN6@update_vip:

; 281  : 	{
; 282  : 		////////////////////////////////////////
; 283  : 		case TARGET_ACQUISITION_SYSTEM_OFF:
; 284  : 		////////////////////////////////////////
; 285  : 		{
; 286  : 			target_locked = FALSE;

  00028	c7 05 00 00 00
	00 00 00 00 00	 mov	 DWORD PTR ?target_locked@@3HA, 0 ; target_locked

; 287  : 
; 288  : 			update_weapon_lock_type (TARGET_ACQUISITION_SYSTEM_OFF);

  00032	6a 00		 push	 0
  00034	e8 00 00 00 00	 call	 ?update_weapon_lock_type@@YGXW4TARGET_ACQUISITION_SYSTEMS@@@Z ; update_weapon_lock_type

; 289  : 
; 290  : 			slave_common_eo_to_current_target ();

  00039	e8 00 00 00 00	 call	 ?slave_common_eo_to_current_target@@YGXXZ ; slave_common_eo_to_current_target

; 291  : 
; 292  : 			slave_viper_eo_to_current_target ();

  0003e	e8 00 00 00 00	 call	 ?slave_viper_eo_to_current_target@@YGXXZ ; slave_viper_eo_to_current_target

; 293  : 
; 294  : 			break;

  00043	eb 4b		 jmp	 SHORT $LN2@update_vip
$LN7@update_vip:

; 295  : 		}
; 296  : 		////////////////////////////////////////
; 297  : 		case TARGET_ACQUISITION_SYSTEM_FLIR:
; 298  : 		////////////////////////////////////////
; 299  : 		{
; 300  : 			update_viper_eo (&viper_flir);

  00045	68 00 00 00 00	 push	 OFFSET ?viper_flir@@3UEO_PARAMS_DYNAMIC_MOVE@@A ; viper_flir
  0004a	e8 00 00 00 00	 call	 ?update_viper_eo@@YGXPAUEO_PARAMS_DYNAMIC_MOVE@@@Z ; update_viper_eo

; 301  : 
; 302  : 			update_common_eo ();

  0004f	e8 00 00 00 00	 call	 ?update_common_eo@@YGXXZ ; update_common_eo

; 303  : 
; 304  : 			update_weapon_lock_type (TARGET_ACQUISITION_SYSTEM_FLIR);

  00054	6a 03		 push	 3
  00056	e8 00 00 00 00	 call	 ?update_weapon_lock_type@@YGXW4TARGET_ACQUISITION_SYSTEMS@@@Z ; update_weapon_lock_type

; 305  : 
; 306  : 			break;

  0005b	eb 33		 jmp	 SHORT $LN2@update_vip
$LN8@update_vip:

; 307  : 		}
; 308  : 		////////////////////////////////////////
; 309  : 		case TARGET_ACQUISITION_SYSTEM_DTV:
; 310  : 		////////////////////////////////////////
; 311  : 		{
; 312  : 			update_viper_eo (&viper_dtv);

  0005d	68 00 00 00 00	 push	 OFFSET ?viper_dtv@@3UEO_PARAMS_DYNAMIC_MOVE@@A ; viper_dtv
  00062	e8 00 00 00 00	 call	 ?update_viper_eo@@YGXPAUEO_PARAMS_DYNAMIC_MOVE@@@Z ; update_viper_eo

; 313  : 
; 314  : 			update_common_eo ();

  00067	e8 00 00 00 00	 call	 ?update_common_eo@@YGXXZ ; update_common_eo

; 315  : 
; 316  : 			update_weapon_lock_type (TARGET_ACQUISITION_SYSTEM_DTV);

  0006c	6a 04		 push	 4
  0006e	e8 00 00 00 00	 call	 ?update_weapon_lock_type@@YGXW4TARGET_ACQUISITION_SYSTEMS@@@Z ; update_weapon_lock_type

; 317  : 
; 318  : 			break;

  00073	eb 1b		 jmp	 SHORT $LN2@update_vip
$LN9@update_vip:

; 319  : 		}
; 320  : 		////////////////////////////////////////
; 321  : 		case TARGET_ACQUISITION_SYSTEM_HIDSS:
; 322  : 		////////////////////////////////////////
; 323  : 		{
; 324  : 			update_apache_hms ();

  00075	e8 00 00 00 00	 call	 ?update_apache_hms@@YGXXZ ; update_apache_hms

; 325  : 
; 326  : 			update_common_hms ();

  0007a	e8 00 00 00 00	 call	 ?update_common_hms@@YGXXZ ; update_common_hms

; 327  : 
; 328  : 			update_weapon_lock_type (TARGET_ACQUISITION_SYSTEM_HIDSS);

  0007f	6a 09		 push	 9
  00081	e8 00 00 00 00	 call	 ?update_weapon_lock_type@@YGXW4TARGET_ACQUISITION_SYSTEMS@@@Z ; update_weapon_lock_type

; 329  : 
; 330  : 			slave_common_eo_to_current_target ();

  00086	e8 00 00 00 00	 call	 ?slave_common_eo_to_current_target@@YGXXZ ; slave_common_eo_to_current_target

; 331  : 
; 332  : 			slave_apache_eo_to_current_target ();

  0008b	e8 00 00 00 00	 call	 ?slave_apache_eo_to_current_target@@YGXXZ ; slave_apache_eo_to_current_target
$LN2@update_vip:

; 333  : 
; 334  : 			break;
; 335  : 		}
; 336  : 	}
; 337  : 
; 338  : 	////////////////////////////////////////
; 339  : 	//
; 340  : 	// radar / laser / los to target
; 341  : 	//
; 342  : 	////////////////////////////////////////
; 343  : 
; 344  : 	{
; 345  : 		entity
; 346  : 			*source,
; 347  : 			*target;
; 348  : 
; 349  : 		int
; 350  : 			laser_on,
; 351  : 			los_to_target;
; 352  : 
; 353  : 		source = get_gunship_entity ();

  00090	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gunship_entity@@3PAUENTITY@@A ; gunship_entity
  00095	89 45 fc	 mov	 DWORD PTR _source$4[ebp], eax

; 354  : 
; 355  : 		target = get_local_entity_parent (source, LIST_TYPE_TARGET);

  00098	83 7d fc 00	 cmp	 DWORD PTR _source$4[ebp], 0
  0009c	74 0a		 je	 SHORT $LN17@update_vip
  0009e	8b 45 fc	 mov	 eax, DWORD PTR _source$4[ebp]
  000a1	8b 08		 mov	 ecx, DWORD PTR [eax]
  000a3	89 4d ac	 mov	 DWORD PTR tv78[ebp], ecx
  000a6	eb 21		 jmp	 SHORT $LN18@update_vip
$LN17@update_vip:
  000a8	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??update_viper_target_acquisition_system@@YGXXZ@4JA
  000ae	83 c2 4c	 add	 edx, 76			; 0000004cH
  000b1	52		 push	 edx
  000b2	68 00 00 00 00	 push	 OFFSET ??_C@_0EN@BNOKEEKE@c?3?2users?2nhv90?2projects?2eech?2ap@
  000b7	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  000bc	50		 push	 eax
  000bd	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  000c2	c7 45 ac 00 00
	00 00		 mov	 DWORD PTR tv78[ebp], 0
$LN18@update_vip:
  000c9	b9 01 00 00 00	 mov	 ecx, 1
  000ce	85 c9		 test	 ecx, ecx
  000d0	74 09		 je	 SHORT $LN19@update_vip
  000d2	c7 45 a8 26 00
	00 00		 mov	 DWORD PTR tv86[ebp], 38	; 00000026H
  000d9	eb 21		 jmp	 SHORT $LN20@update_vip
$LN19@update_vip:
  000db	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??update_viper_target_acquisition_system@@YGXXZ@4JA
  000e1	83 c2 4c	 add	 edx, 76			; 0000004cH
  000e4	52		 push	 edx
  000e5	68 00 00 00 00	 push	 OFFSET ??_C@_0EN@BNOKEEKE@c?3?2users?2nhv90?2projects?2eech?2ap@
  000ea	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_list_type_message@@3PBDB ; overload_invalid_list_type_message
  000ef	50		 push	 eax
  000f0	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  000f5	c7 45 a8 00 00
	00 00		 mov	 DWORD PTR tv86[ebp], 0
$LN20@update_vip:
  000fc	6a 26		 push	 38			; 00000026H
  000fe	8b 4d fc	 mov	 ecx, DWORD PTR _source$4[ebp]
  00101	51		 push	 ecx
  00102	69 55 ac b4 00
	00 00		 imul	 edx, DWORD PTR tv78[ebp], 180
  00109	8b 45 a8	 mov	 eax, DWORD PTR tv86[ebp]
  0010c	8b 8c 82 00 00
	00 00		 mov	 ecx, DWORD PTR ?fn_get_local_entity_parent@@3PAY0CN@P6GPAUENTITY@@PAU1@W4LIST_TYPES@@@ZA[edx+eax*4]
  00113	ff d1		 call	 ecx
  00115	89 45 f8	 mov	 DWORD PTR _target$3[ebp], eax

; 356  : 
; 357  : 		//
; 358  : 		// laser on/off
; 359  : 		//
; 360  : 
; 361  : 		laser_on = laser_is_active() && !viper_damage.laser_designator;

  00118	e8 00 00 00 00	 call	 ?laser_is_active@@YGHXZ	; laser_is_active
  0011d	85 c0		 test	 eax, eax
  0011f	74 16		 je	 SHORT $LN21@update_vip
  00121	a1 00 00 00 00	 mov	 eax, DWORD PTR ?viper_damage@@3TVIPER_DAMAGE_FLAGS@@A ; viper_damage
  00126	c1 e8 02	 shr	 eax, 2
  00129	83 e0 01	 and	 eax, 1
  0012c	75 09		 jne	 SHORT $LN21@update_vip
  0012e	c7 45 ac 01 00
	00 00		 mov	 DWORD PTR tv129[ebp], 1
  00135	eb 07		 jmp	 SHORT $LN22@update_vip
$LN21@update_vip:
  00137	c7 45 ac 00 00
	00 00		 mov	 DWORD PTR tv129[ebp], 0
$LN22@update_vip:
  0013e	8b 4d ac	 mov	 ecx, DWORD PTR tv129[ebp]
  00141	89 4d f4	 mov	 DWORD PTR _laser_on$2[ebp], ecx

; 362  : 
; 363  : 		if (laser_on != get_local_entity_int_value (source, INT_TYPE_LASER_ON))

  00144	83 7d fc 00	 cmp	 DWORD PTR _source$4[ebp], 0
  00148	74 0a		 je	 SHORT $LN23@update_vip
  0014a	8b 45 fc	 mov	 eax, DWORD PTR _source$4[ebp]
  0014d	8b 08		 mov	 ecx, DWORD PTR [eax]
  0014f	89 4d ac	 mov	 DWORD PTR tv135[ebp], ecx
  00152	eb 1d		 jmp	 SHORT $LN24@update_vip
$LN23@update_vip:
  00154	68 6b 01 00 00	 push	 363			; 0000016bH
  00159	68 00 00 00 00	 push	 OFFSET ??_C@_0EN@BNOKEEKE@c?3?2users?2nhv90?2projects?2eech?2ap@
  0015e	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  00164	52		 push	 edx
  00165	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  0016a	c7 45 ac 00 00
	00 00		 mov	 DWORD PTR tv135[ebp], 0
$LN24@update_vip:
  00171	b8 01 00 00 00	 mov	 eax, 1
  00176	85 c0		 test	 eax, eax
  00178	74 09		 je	 SHORT $LN25@update_vip
  0017a	c7 45 a8 78 00
	00 00		 mov	 DWORD PTR tv142[ebp], 120 ; 00000078H
  00181	eb 1d		 jmp	 SHORT $LN26@update_vip
$LN25@update_vip:
  00183	68 6b 01 00 00	 push	 363			; 0000016bH
  00188	68 00 00 00 00	 push	 OFFSET ??_C@_0EN@BNOKEEKE@c?3?2users?2nhv90?2projects?2eech?2ap@
  0018d	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?overload_invalid_int_type_message@@3PBDB ; overload_invalid_int_type_message
  00193	51		 push	 ecx
  00194	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00199	c7 45 a8 00 00
	00 00		 mov	 DWORD PTR tv142[ebp], 0
$LN26@update_vip:
  001a0	6a 78		 push	 120			; 00000078H
  001a2	8b 55 fc	 mov	 edx, DWORD PTR _source$4[ebp]
  001a5	52		 push	 edx
  001a6	69 45 ac 5c 04
	00 00		 imul	 eax, DWORD PTR tv135[ebp], 1116
  001ad	8b 4d a8	 mov	 ecx, DWORD PTR tv142[ebp]
  001b0	8b 94 88 00 00
	00 00		 mov	 edx, DWORD PTR ?fn_get_local_entity_int_value@@3PAY0BBH@P6GHPAUENTITY@@W4INT_TYPES@@@ZA[eax+ecx*4]
  001b7	ff d2		 call	 edx
  001b9	39 45 f4	 cmp	 DWORD PTR _laser_on$2[ebp], eax
  001bc	0f 84 89 00 00
	00		 je	 $LN10@update_vip

; 364  : 		{
; 365  : 			set_client_server_entity_int_value (source, INT_TYPE_LASER_ON, laser_on);

  001c2	83 7d fc 00	 cmp	 DWORD PTR _source$4[ebp], 0
  001c6	74 0a		 je	 SHORT $LN27@update_vip
  001c8	8b 45 fc	 mov	 eax, DWORD PTR _source$4[ebp]
  001cb	8b 08		 mov	 ecx, DWORD PTR [eax]
  001cd	89 4d ac	 mov	 DWORD PTR tv155[ebp], ecx
  001d0	eb 21		 jmp	 SHORT $LN28@update_vip
$LN27@update_vip:
  001d2	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??update_viper_target_acquisition_system@@YGXXZ@4JA
  001d8	83 c2 56	 add	 edx, 86			; 00000056H
  001db	52		 push	 edx
  001dc	68 00 00 00 00	 push	 OFFSET ??_C@_0EN@BNOKEEKE@c?3?2users?2nhv90?2projects?2eech?2ap@
  001e1	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  001e6	50		 push	 eax
  001e7	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  001ec	c7 45 ac 00 00
	00 00		 mov	 DWORD PTR tv155[ebp], 0
$LN28@update_vip:
  001f3	b9 01 00 00 00	 mov	 ecx, 1
  001f8	85 c9		 test	 ecx, ecx
  001fa	74 09		 je	 SHORT $LN29@update_vip
  001fc	c7 45 a8 78 00
	00 00		 mov	 DWORD PTR tv163[ebp], 120 ; 00000078H
  00203	eb 21		 jmp	 SHORT $LN30@update_vip
$LN29@update_vip:
  00205	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??update_viper_target_acquisition_system@@YGXXZ@4JA
  0020b	83 c2 56	 add	 edx, 86			; 00000056H
  0020e	52		 push	 edx
  0020f	68 00 00 00 00	 push	 OFFSET ??_C@_0EN@BNOKEEKE@c?3?2users?2nhv90?2projects?2eech?2ap@
  00214	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_int_type_message@@3PBDB ; overload_invalid_int_type_message
  00219	50		 push	 eax
  0021a	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  0021f	c7 45 a8 00 00
	00 00		 mov	 DWORD PTR tv163[ebp], 0
$LN30@update_vip:
  00226	8b 4d f4	 mov	 ecx, DWORD PTR _laser_on$2[ebp]
  00229	51		 push	 ecx
  0022a	6a 78		 push	 120			; 00000078H
  0022c	8b 55 fc	 mov	 edx, DWORD PTR _source$4[ebp]
  0022f	52		 push	 edx
  00230	69 45 ac b8 08
	00 00		 imul	 eax, DWORD PTR tv155[ebp], 2232
  00237	8b 4d a8	 mov	 ecx, DWORD PTR tv163[ebp]
  0023a	8d 94 c8 00 00
	00 00		 lea	 edx, DWORD PTR ?fn_set_client_server_entity_int_value@@3PAY1BBH@1P6GXPAUENTITY@@W4INT_TYPES@@H@ZA[eax+ecx*8]
  00241	a1 00 00 00 00	 mov	 eax, DWORD PTR ?system_comms_model@@3W4COMMS_MODEL_TYPES@@A ; system_comms_model
  00246	8b 0c 82	 mov	 ecx, DWORD PTR [edx+eax*4]
  00249	ff d1		 call	 ecx
$LN10@update_vip:

; 366  : 		}
; 367  : 
; 368  : 		//
; 369  : 		// line of sight to target
; 370  : 		//
; 371  : 
; 372  : 		if (target)

  0024b	83 7d f8 00	 cmp	 DWORD PTR _target$3[ebp], 0
  0024f	74 31		 je	 SHORT $LN11@update_vip

; 373  : 		{
; 374  : 			switch (target_acquisition_system)

  00251	a1 00 00 00 00	 mov	 eax, DWORD PTR ?target_acquisition_system@@3W4TARGET_ACQUISITION_SYSTEMS@@A ; target_acquisition_system
  00256	89 45 ac	 mov	 DWORD PTR tv172[ebp], eax
  00259	83 7d ac 09	 cmp	 DWORD PTR tv172[ebp], 9
  0025d	77 21		 ja	 SHORT $LN4@update_vip
  0025f	8b 4d ac	 mov	 ecx, DWORD PTR tv172[ebp]
  00262	0f b6 91 00 00
	00 00		 movzx	 edx, BYTE PTR $LN40@update_vip[ecx]
  00269	ff 24 95 00 00
	00 00		 jmp	 DWORD PTR $LN42@update_vip[edx*4]
$LN13@update_vip:

; 375  : 			{
; 376  : 				case TARGET_ACQUISITION_SYSTEM_OFF:
; 377  : 				{
; 378  : 					los_to_target = FALSE;

  00270	c7 45 f0 00 00
	00 00		 mov	 DWORD PTR _los_to_target$1[ebp], 0

; 379  : 
; 380  : 					break;

  00277	eb 07		 jmp	 SHORT $LN4@update_vip
$LN14@update_vip:

; 381  : 				}
; 382  : 				case TARGET_ACQUISITION_SYSTEM_FLIR:
; 383  : 				case TARGET_ACQUISITION_SYSTEM_DTV:
; 384  : 				case TARGET_ACQUISITION_SYSTEM_HIDSS:
; 385  : 				{
; 386  : 					los_to_target = TRUE;

  00279	c7 45 f0 01 00
	00 00		 mov	 DWORD PTR _los_to_target$1[ebp], 1
$LN4@update_vip:

; 387  : 
; 388  : 					break;
; 389  : 				}
; 390  : 			}
; 391  : 		}
; 392  : 		else

  00280	eb 07		 jmp	 SHORT $LN12@update_vip
$LN11@update_vip:

; 393  : 		{
; 394  : 			los_to_target = FALSE;

  00282	c7 45 f0 00 00
	00 00		 mov	 DWORD PTR _los_to_target$1[ebp], 0
$LN12@update_vip:

; 395  : 		}
; 396  : 
; 397  : 		if (los_to_target != get_local_entity_int_value (source, INT_TYPE_LOS_TO_TARGET))

  00289	83 7d fc 00	 cmp	 DWORD PTR _source$4[ebp], 0
  0028d	74 0a		 je	 SHORT $LN31@update_vip
  0028f	8b 45 fc	 mov	 eax, DWORD PTR _source$4[ebp]
  00292	8b 08		 mov	 ecx, DWORD PTR [eax]
  00294	89 4d ac	 mov	 DWORD PTR tv179[ebp], ecx
  00297	eb 1d		 jmp	 SHORT $LN32@update_vip
$LN31@update_vip:
  00299	68 8d 01 00 00	 push	 397			; 0000018dH
  0029e	68 00 00 00 00	 push	 OFFSET ??_C@_0EN@BNOKEEKE@c?3?2users?2nhv90?2projects?2eech?2ap@
  002a3	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  002a9	52		 push	 edx
  002aa	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  002af	c7 45 ac 00 00
	00 00		 mov	 DWORD PTR tv179[ebp], 0
$LN32@update_vip:
  002b6	b8 01 00 00 00	 mov	 eax, 1
  002bb	85 c0		 test	 eax, eax
  002bd	74 09		 je	 SHORT $LN33@update_vip
  002bf	c7 45 a8 80 00
	00 00		 mov	 DWORD PTR tv186[ebp], 128 ; 00000080H
  002c6	eb 1d		 jmp	 SHORT $LN34@update_vip
$LN33@update_vip:
  002c8	68 8d 01 00 00	 push	 397			; 0000018dH
  002cd	68 00 00 00 00	 push	 OFFSET ??_C@_0EN@BNOKEEKE@c?3?2users?2nhv90?2projects?2eech?2ap@
  002d2	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?overload_invalid_int_type_message@@3PBDB ; overload_invalid_int_type_message
  002d8	51		 push	 ecx
  002d9	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  002de	c7 45 a8 00 00
	00 00		 mov	 DWORD PTR tv186[ebp], 0
$LN34@update_vip:
  002e5	68 80 00 00 00	 push	 128			; 00000080H
  002ea	8b 55 fc	 mov	 edx, DWORD PTR _source$4[ebp]
  002ed	52		 push	 edx
  002ee	69 45 ac 5c 04
	00 00		 imul	 eax, DWORD PTR tv179[ebp], 1116
  002f5	8b 4d a8	 mov	 ecx, DWORD PTR tv186[ebp]
  002f8	8b 94 88 00 00
	00 00		 mov	 edx, DWORD PTR ?fn_get_local_entity_int_value@@3PAY0BBH@P6GHPAUENTITY@@W4INT_TYPES@@@ZA[eax+ecx*4]
  002ff	ff d2		 call	 edx
  00301	39 45 f0	 cmp	 DWORD PTR _los_to_target$1[ebp], eax
  00304	0f 84 8c 00 00
	00		 je	 $LN1@update_vip

; 398  : 		{
; 399  : 			set_client_server_entity_int_value (source, INT_TYPE_LOS_TO_TARGET, los_to_target);

  0030a	83 7d fc 00	 cmp	 DWORD PTR _source$4[ebp], 0
  0030e	74 0a		 je	 SHORT $LN35@update_vip
  00310	8b 45 fc	 mov	 eax, DWORD PTR _source$4[ebp]
  00313	8b 08		 mov	 ecx, DWORD PTR [eax]
  00315	89 4d ac	 mov	 DWORD PTR tv199[ebp], ecx
  00318	eb 21		 jmp	 SHORT $LN36@update_vip
$LN35@update_vip:
  0031a	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??update_viper_target_acquisition_system@@YGXXZ@4JA
  00320	83 c2 78	 add	 edx, 120		; 00000078H
  00323	52		 push	 edx
  00324	68 00 00 00 00	 push	 OFFSET ??_C@_0EN@BNOKEEKE@c?3?2users?2nhv90?2projects?2eech?2ap@
  00329	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  0032e	50		 push	 eax
  0032f	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00334	c7 45 ac 00 00
	00 00		 mov	 DWORD PTR tv199[ebp], 0
$LN36@update_vip:
  0033b	b9 01 00 00 00	 mov	 ecx, 1
  00340	85 c9		 test	 ecx, ecx
  00342	74 09		 je	 SHORT $LN37@update_vip
  00344	c7 45 a8 80 00
	00 00		 mov	 DWORD PTR tv207[ebp], 128 ; 00000080H
  0034b	eb 21		 jmp	 SHORT $LN38@update_vip
$LN37@update_vip:
  0034d	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??update_viper_target_acquisition_system@@YGXXZ@4JA
  00353	83 c2 78	 add	 edx, 120		; 00000078H
  00356	52		 push	 edx
  00357	68 00 00 00 00	 push	 OFFSET ??_C@_0EN@BNOKEEKE@c?3?2users?2nhv90?2projects?2eech?2ap@
  0035c	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_int_type_message@@3PBDB ; overload_invalid_int_type_message
  00361	50		 push	 eax
  00362	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00367	c7 45 a8 00 00
	00 00		 mov	 DWORD PTR tv207[ebp], 0
$LN38@update_vip:
  0036e	8b 4d f0	 mov	 ecx, DWORD PTR _los_to_target$1[ebp]
  00371	51		 push	 ecx
  00372	68 80 00 00 00	 push	 128			; 00000080H
  00377	8b 55 fc	 mov	 edx, DWORD PTR _source$4[ebp]
  0037a	52		 push	 edx
  0037b	69 45 ac b8 08
	00 00		 imul	 eax, DWORD PTR tv199[ebp], 2232
  00382	8b 4d a8	 mov	 ecx, DWORD PTR tv207[ebp]
  00385	8d 94 c8 00 00
	00 00		 lea	 edx, DWORD PTR ?fn_set_client_server_entity_int_value@@3PAY1BBH@1P6GXPAUENTITY@@W4INT_TYPES@@H@ZA[eax+ecx*8]
  0038c	a1 00 00 00 00	 mov	 eax, DWORD PTR ?system_comms_model@@3W4COMMS_MODEL_TYPES@@A ; system_comms_model
  00391	8b 0c 82	 mov	 ecx, DWORD PTR [edx+eax*4]
  00394	ff d1		 call	 ecx
$LN1@update_vip:

; 400  : 		}
; 401  : 	}
; 402  : }

  00396	5f		 pop	 edi
  00397	5e		 pop	 esi
  00398	5b		 pop	 ebx
  00399	8b e5		 mov	 esp, ebp
  0039b	5d		 pop	 ebp
  0039c	c3		 ret	 0
  0039d	0f 1f 00	 npad	 3
$LN41@update_vip:
  003a0	00 00 00 00	 DD	 $LN6@update_vip
  003a4	00 00 00 00	 DD	 $LN7@update_vip
  003a8	00 00 00 00	 DD	 $LN8@update_vip
  003ac	00 00 00 00	 DD	 $LN9@update_vip
  003b0	00 00 00 00	 DD	 $LN2@update_vip
$LN39@update_vip:
  003b4	00		 DB	 0
  003b5	04		 DB	 4
  003b6	04		 DB	 4
  003b7	01		 DB	 1
  003b8	02		 DB	 2
  003b9	04		 DB	 4
  003ba	04		 DB	 4
  003bb	04		 DB	 4
  003bc	04		 DB	 4
  003bd	03		 DB	 3
  003be	66 90		 npad	 2
$LN42@update_vip:
  003c0	00 00 00 00	 DD	 $LN13@update_vip
  003c4	00 00 00 00	 DD	 $LN14@update_vip
  003c8	00 00 00 00	 DD	 $LN4@update_vip
$LN40@update_vip:
  003cc	00		 DB	 0
  003cd	02		 DB	 2
  003ce	02		 DB	 2
  003cf	01		 DB	 1
  003d0	01		 DB	 1
  003d1	02		 DB	 2
  003d2	02		 DB	 2
  003d3	02		 DB	 2
  003d4	02		 DB	 2
  003d5	01		 DB	 1
?update_viper_target_acquisition_system@@YGXXZ ENDP	; update_viper_target_acquisition_system
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\gunships\avionics\viper\vi_tgt.c
;	COMDAT ?select_viper_target_acquisition_system@@YGXW4TARGET_ACQUISITION_SYSTEMS@@@Z
_TEXT	SEGMENT
tv65 = -80						; size = 4
_damaged$ = -12						; size = 4
_old_system$ = -8					; size = 4
_new_system$ = -4					; size = 4
_system$ = 8						; size = 4
?select_viper_target_acquisition_system@@YGXW4TARGET_ACQUISITION_SYSTEMS@@@Z PROC ; select_viper_target_acquisition_system, COMDAT

; 159  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 50	 sub	 esp, 80			; 00000050H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 160  : 	target_acquisition_systems
; 161  : 		new_system,
; 162  : 		old_system;
; 163  : 
; 164  : 	int
; 165  : 		damaged;
; 166  : 
; 167  : 	new_system = system;

  00009	8b 45 08	 mov	 eax, DWORD PTR _system$[ebp]
  0000c	89 45 fc	 mov	 DWORD PTR _new_system$[ebp], eax

; 168  : 	old_system = target_acquisition_system;

  0000f	a1 00 00 00 00	 mov	 eax, DWORD PTR ?target_acquisition_system@@3W4TARGET_ACQUISITION_SYSTEMS@@A ; target_acquisition_system
  00014	89 45 f8	 mov	 DWORD PTR _old_system$[ebp], eax

; 169  : 
; 170  : 	damaged = FALSE;

  00017	c7 45 f4 00 00
	00 00		 mov	 DWORD PTR _damaged$[ebp], 0

; 171  : 
; 172  : 	reset_common_target_acquisition_system_keys ();

  0001e	e8 00 00 00 00	 call	 ?reset_common_target_acquisition_system_keys@@YGXXZ ; reset_common_target_acquisition_system_keys

; 173  : 
; 174  : 	deselect_viper_target_acquisition_system (target_acquisition_system);

  00023	a1 00 00 00 00	 mov	 eax, DWORD PTR ?target_acquisition_system@@3W4TARGET_ACQUISITION_SYSTEMS@@A ; target_acquisition_system
  00028	50		 push	 eax
  00029	e8 00 00 00 00	 call	 ?deselect_viper_target_acquisition_system@@YGXW4TARGET_ACQUISITION_SYSTEMS@@@Z ; deselect_viper_target_acquisition_system

; 175  : 
; 176  : 	switch (system)

  0002e	8b 45 08	 mov	 eax, DWORD PTR _system$[ebp]
  00031	89 45 b0	 mov	 DWORD PTR tv65[ebp], eax
  00034	83 7d b0 09	 cmp	 DWORD PTR tv65[ebp], 9
  00038	0f 87 21 01 00
	00		 ja	 $LN17@select_vip
  0003e	8b 4d b0	 mov	 ecx, DWORD PTR tv65[ebp]
  00041	0f b6 91 00 00
	00 00		 movzx	 edx, BYTE PTR $LN19@select_vip[ecx]
  00048	ff 24 95 00 00
	00 00		 jmp	 DWORD PTR $LN20@select_vip[edx*4]
$LN4@select_vip:

; 177  : 	{
; 178  : 		////////////////////////////////////////
; 179  : 		case TARGET_ACQUISITION_SYSTEM_OFF:
; 180  : 		////////////////////////////////////////
; 181  : 		{
; 182  : 			target_acquisition_system = system;

  0004f	8b 45 08	 mov	 eax, DWORD PTR _system$[ebp]
  00052	a3 00 00 00 00	 mov	 DWORD PTR ?target_acquisition_system@@3W4TARGET_ACQUISITION_SYSTEMS@@A, eax ; target_acquisition_system

; 183  : 
; 184  : 			set_gunship_target (NULL);

  00057	6a 00		 push	 0
  00059	e8 00 00 00 00	 call	 ?set_gunship_target@@YGXPAUENTITY@@@Z ; set_gunship_target

; 185  : 
; 186  : 			if (!command_line_manual_laser_radar)

  0005e	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?command_line_manual_laser_radar@@3HA, 0 ; command_line_manual_laser_radar
  00065	75 07		 jne	 SHORT $LN5@select_vip

; 187  : 				set_laser_is_active(FALSE);

  00067	6a 00		 push	 0
  00069	e8 00 00 00 00	 call	 ?set_laser_is_active@@YGXH@Z ; set_laser_is_active
$LN5@select_vip:

; 188  : 
; 189  : 			#if 0
; 190  : 
; 191  : 			hud_mode = previous_hud_mode;
; 192  : 
; 193  : 			#endif
; 194  : 
; 195  : 			break;

  0006e	e9 fd 00 00 00	 jmp	 $LN2@select_vip
$LN6@select_vip:

; 196  : 		}
; 197  : 		////////////////////////////////////////
; 198  : 		case TARGET_ACQUISITION_SYSTEM_FLIR:
; 199  : 		////////////////////////////////////////
; 200  : 		{
; 201  : 			if (!viper_damage.flir)

  00073	a1 00 00 00 00	 mov	 eax, DWORD PTR ?viper_damage@@3TVIPER_DAMAGE_FLAGS@@A ; viper_damage
  00078	83 e0 01	 and	 eax, 1
  0007b	75 38		 jne	 SHORT $LN7@select_vip

; 202  : 			{
; 203  : 				target_acquisition_system = system;

  0007d	8b 45 08	 mov	 eax, DWORD PTR _system$[ebp]
  00080	a3 00 00 00 00	 mov	 DWORD PTR ?target_acquisition_system@@3W4TARGET_ACQUISITION_SYSTEMS@@A, eax ; target_acquisition_system

; 204  : 
; 205  : 				activate_common_eo ();

  00085	e8 00 00 00 00	 call	 ?activate_common_eo@@YGXXZ ; activate_common_eo

; 206  : 
; 207  : 				if (command_line_targeting_system_auto_page)

  0008a	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?command_line_targeting_system_auto_page@@3HA, 0 ; command_line_targeting_system_auto_page
  00091	74 05		 je	 SHORT $LN8@select_vip

; 208  : 					select_viper_tads_mfd ();

  00093	e8 00 00 00 00	 call	 ?select_viper_tads_mfd@@YGXXZ ; select_viper_tads_mfd
$LN8@select_vip:

; 209  : 
; 210  : 				if (hud_mode != HUD_MODE_WEAPON)

  00098	83 3d 00 00 00
	00 02		 cmp	 DWORD PTR ?hud_mode@@3W4HUD_MODES@@A, 2 ; hud_mode
  0009f	74 0a		 je	 SHORT $LN9@select_vip

; 211  : 					previous_hud_mode = hud_mode;

  000a1	a1 00 00 00 00	 mov	 eax, DWORD PTR ?hud_mode@@3W4HUD_MODES@@A ; hud_mode
  000a6	a3 00 00 00 00	 mov	 DWORD PTR ?previous_hud_mode@@3W4HUD_MODES@@A, eax ; previous_hud_mode
$LN9@select_vip:

; 212  : 				hud_mode = HUD_MODE_WEAPON;

  000ab	c7 05 00 00 00
	00 02 00 00 00	 mov	 DWORD PTR ?hud_mode@@3W4HUD_MODES@@A, 2 ; hud_mode
$LN7@select_vip:

; 213  : 			}
; 214  : 
; 215  : 			damaged = viper_damage.flir;

  000b5	a1 00 00 00 00	 mov	 eax, DWORD PTR ?viper_damage@@3TVIPER_DAMAGE_FLAGS@@A ; viper_damage
  000ba	83 e0 01	 and	 eax, 1
  000bd	89 45 f4	 mov	 DWORD PTR _damaged$[ebp], eax

; 216  : 
; 217  : 			break;

  000c0	e9 ab 00 00 00	 jmp	 $LN2@select_vip
$LN10@select_vip:

; 218  : 		}
; 219  : 		////////////////////////////////////////
; 220  : 		case TARGET_ACQUISITION_SYSTEM_DTV:
; 221  : 		////////////////////////////////////////
; 222  : 		{
; 223  : 			if (!viper_damage.dtv)

  000c5	a1 00 00 00 00	 mov	 eax, DWORD PTR ?viper_damage@@3TVIPER_DAMAGE_FLAGS@@A ; viper_damage
  000ca	d1 e8		 shr	 eax, 1
  000cc	83 e0 01	 and	 eax, 1
  000cf	75 38		 jne	 SHORT $LN11@select_vip

; 224  : 			{
; 225  : 				target_acquisition_system = system;

  000d1	8b 45 08	 mov	 eax, DWORD PTR _system$[ebp]
  000d4	a3 00 00 00 00	 mov	 DWORD PTR ?target_acquisition_system@@3W4TARGET_ACQUISITION_SYSTEMS@@A, eax ; target_acquisition_system

; 226  : 
; 227  : 				activate_common_eo ();

  000d9	e8 00 00 00 00	 call	 ?activate_common_eo@@YGXXZ ; activate_common_eo

; 228  : 
; 229  : 				if (command_line_targeting_system_auto_page)

  000de	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?command_line_targeting_system_auto_page@@3HA, 0 ; command_line_targeting_system_auto_page
  000e5	74 05		 je	 SHORT $LN12@select_vip

; 230  : 					select_viper_tads_mfd ();

  000e7	e8 00 00 00 00	 call	 ?select_viper_tads_mfd@@YGXXZ ; select_viper_tads_mfd
$LN12@select_vip:

; 231  : 
; 232  : 				if (hud_mode != HUD_MODE_WEAPON)

  000ec	83 3d 00 00 00
	00 02		 cmp	 DWORD PTR ?hud_mode@@3W4HUD_MODES@@A, 2 ; hud_mode
  000f3	74 0a		 je	 SHORT $LN13@select_vip

; 233  : 					previous_hud_mode = hud_mode;

  000f5	a1 00 00 00 00	 mov	 eax, DWORD PTR ?hud_mode@@3W4HUD_MODES@@A ; hud_mode
  000fa	a3 00 00 00 00	 mov	 DWORD PTR ?previous_hud_mode@@3W4HUD_MODES@@A, eax ; previous_hud_mode
$LN13@select_vip:

; 234  : 				hud_mode = HUD_MODE_WEAPON;

  000ff	c7 05 00 00 00
	00 02 00 00 00	 mov	 DWORD PTR ?hud_mode@@3W4HUD_MODES@@A, 2 ; hud_mode
$LN11@select_vip:

; 235  : 			}
; 236  : 
; 237  : 			damaged = viper_damage.dtv;

  00109	a1 00 00 00 00	 mov	 eax, DWORD PTR ?viper_damage@@3TVIPER_DAMAGE_FLAGS@@A ; viper_damage
  0010e	d1 e8		 shr	 eax, 1
  00110	83 e0 01	 and	 eax, 1
  00113	89 45 f4	 mov	 DWORD PTR _damaged$[ebp], eax

; 238  : 
; 239  : 			break;

  00116	eb 58		 jmp	 SHORT $LN2@select_vip
$LN14@select_vip:

; 240  : 		}
; 241  : 		////////////////////////////////////////
; 242  : 		case TARGET_ACQUISITION_SYSTEM_HIDSS:
; 243  : 		////////////////////////////////////////
; 244  : 		{
; 245  : 			if (!viper_damage.hidss)

  00118	a1 00 00 00 00	 mov	 eax, DWORD PTR ?viper_damage@@3TVIPER_DAMAGE_FLAGS@@A ; viper_damage
  0011d	c1 e8 08	 shr	 eax, 8
  00120	83 e0 01	 and	 eax, 1
  00123	75 2a		 jne	 SHORT $LN15@select_vip

; 246  : 			{
; 247  : 				target_acquisition_system = system;

  00125	8b 45 08	 mov	 eax, DWORD PTR _system$[ebp]
  00128	a3 00 00 00 00	 mov	 DWORD PTR ?target_acquisition_system@@3W4TARGET_ACQUISITION_SYSTEMS@@A, eax ; target_acquisition_system

; 248  : 
; 249  : 				activate_common_hms ();

  0012d	e8 00 00 00 00	 call	 ?activate_common_hms@@YGXXZ ; activate_common_hms

; 250  : 
; 251  : 				if (hud_mode != HUD_MODE_WEAPON)

  00132	83 3d 00 00 00
	00 02		 cmp	 DWORD PTR ?hud_mode@@3W4HUD_MODES@@A, 2 ; hud_mode
  00139	74 0a		 je	 SHORT $LN16@select_vip

; 252  : 					previous_hud_mode = hud_mode;

  0013b	a1 00 00 00 00	 mov	 eax, DWORD PTR ?hud_mode@@3W4HUD_MODES@@A ; hud_mode
  00140	a3 00 00 00 00	 mov	 DWORD PTR ?previous_hud_mode@@3W4HUD_MODES@@A, eax ; previous_hud_mode
$LN16@select_vip:

; 253  : 
; 254  : 				hud_mode = HUD_MODE_WEAPON;

  00145	c7 05 00 00 00
	00 02 00 00 00	 mov	 DWORD PTR ?hud_mode@@3W4HUD_MODES@@A, 2 ; hud_mode
$LN15@select_vip:

; 255  : 			}
; 256  : 
; 257  : 			damaged = viper_damage.hidss;

  0014f	a1 00 00 00 00	 mov	 eax, DWORD PTR ?viper_damage@@3TVIPER_DAMAGE_FLAGS@@A ; viper_damage
  00154	c1 e8 08	 shr	 eax, 8
  00157	83 e0 01	 and	 eax, 1
  0015a	89 45 f4	 mov	 DWORD PTR _damaged$[ebp], eax

; 258  : 
; 259  : 			break;

  0015d	eb 11		 jmp	 SHORT $LN2@select_vip
$LN17@select_vip:

; 260  : 		}
; 261  : 		////////////////////////////////////////
; 262  : 		default:
; 263  : 		////////////////////////////////////////
; 264  : 		{
; 265  : 			debug_fatal ("Invalid target acquisition system = %d", system);

  0015f	8b 45 08	 mov	 eax, DWORD PTR _system$[ebp]
  00162	50		 push	 eax
  00163	68 00 00 00 00	 push	 OFFSET ??_C@_0CH@DDKDNBNH@Invalid?5target?5acquisition?5syst@
  00168	e8 00 00 00 00	 call	 ?debug_fatal@@YAXPBDZZ	; debug_fatal
  0016d	83 c4 08	 add	 esp, 8
$LN2@select_vip:

; 266  : 
; 267  : 			break;
; 268  : 		}
; 269  : 	}
; 270  : 
; 271  : 	play_common_cpg_target_acquisition_system_speech (new_system, old_system, damaged);

  00170	8b 45 f4	 mov	 eax, DWORD PTR _damaged$[ebp]
  00173	50		 push	 eax
  00174	8b 4d f8	 mov	 ecx, DWORD PTR _old_system$[ebp]
  00177	51		 push	 ecx
  00178	8b 55 fc	 mov	 edx, DWORD PTR _new_system$[ebp]
  0017b	52		 push	 edx
  0017c	e8 00 00 00 00	 call	 ?play_common_cpg_target_acquisition_system_speech@@YGXW4TARGET_ACQUISITION_SYSTEMS@@0H@Z ; play_common_cpg_target_acquisition_system_speech

; 272  : }

  00181	5f		 pop	 edi
  00182	5e		 pop	 esi
  00183	5b		 pop	 ebx
  00184	8b e5		 mov	 esp, ebp
  00186	5d		 pop	 ebp
  00187	c2 04 00	 ret	 4
  0018a	66 90		 npad	 2
$LN20@select_vip:
  0018c	00 00 00 00	 DD	 $LN4@select_vip
  00190	00 00 00 00	 DD	 $LN6@select_vip
  00194	00 00 00 00	 DD	 $LN10@select_vip
  00198	00 00 00 00	 DD	 $LN14@select_vip
  0019c	00 00 00 00	 DD	 $LN17@select_vip
$LN19@select_vip:
  001a0	00		 DB	 0
  001a1	04		 DB	 4
  001a2	04		 DB	 4
  001a3	01		 DB	 1
  001a4	02		 DB	 2
  001a5	04		 DB	 4
  001a6	04		 DB	 4
  001a7	04		 DB	 4
  001a8	04		 DB	 4
  001a9	03		 DB	 3
?select_viper_target_acquisition_system@@YGXW4TARGET_ACQUISITION_SYSTEMS@@@Z ENDP ; select_viper_target_acquisition_system
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\gunships\avionics\viper\vi_tgt.c
;	COMDAT ?deinitialise_viper_target_acquisition_systems@@YGXXZ
_TEXT	SEGMENT
?deinitialise_viper_target_acquisition_systems@@YGXXZ PROC ; deinitialise_viper_target_acquisition_systems, COMDAT

; 91   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 92   : 	deinitialise_viper_eo ();

  00009	e8 00 00 00 00	 call	 ?deinitialise_viper_eo@@YGXXZ ; deinitialise_viper_eo

; 93   : 
; 94   : 	deinitialise_viper_hms ();

  0000e	e8 00 00 00 00	 call	 ?deinitialise_viper_hms@@YGXXZ ; deinitialise_viper_hms

; 95   : }

  00013	5f		 pop	 edi
  00014	5e		 pop	 esi
  00015	5b		 pop	 ebx
  00016	8b e5		 mov	 esp, ebp
  00018	5d		 pop	 ebp
  00019	c3		 ret	 0
?deinitialise_viper_target_acquisition_systems@@YGXXZ ENDP ; deinitialise_viper_target_acquisition_systems
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\gunships\avionics\viper\vi_tgt.c
;	COMDAT ?initialise_viper_target_acquisition_systems@@YGXXZ
_TEXT	SEGMENT
?initialise_viper_target_acquisition_systems@@YGXXZ PROC ; initialise_viper_target_acquisition_systems, COMDAT

; 80   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 81   : 	initialise_viper_eo ();

  00009	e8 00 00 00 00	 call	 ?initialise_viper_eo@@YGXXZ ; initialise_viper_eo

; 82   : 
; 83   : 	initialise_viper_hms ();

  0000e	e8 00 00 00 00	 call	 ?initialise_viper_hms@@YGXXZ ; initialise_viper_hms

; 84   : }

  00013	5f		 pop	 edi
  00014	5e		 pop	 esi
  00015	5b		 pop	 ebx
  00016	8b e5		 mov	 esp, ebp
  00018	5d		 pop	 ebp
  00019	c3		 ret	 0
?initialise_viper_target_acquisition_systems@@YGXXZ ENDP ; initialise_viper_target_acquisition_systems
_TEXT	ENDS
END
