; Listing generated by Microsoft (R) Optimizing Compiler Version 19.16.27045.0 

	TITLE	C:\Users\nhv90\Projects\eech\aphavoc\source\entity\mobile\mb_move.c
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB MSVCRTD
INCLUDELIB OLDNAMES

PUBLIC	?entity_movement_delta_time@@3MA		; entity_movement_delta_time
PUBLIC	?entity_movement_iterations@@3HA		; entity_movement_iterations
_DATA	SEGMENT
?entity_movement_delta_time@@3MA DD 03f800000r	; 1	; entity_movement_delta_time
?entity_movement_iterations@@3HA DD 01H			; entity_movement_iterations
_DATA	ENDS
PUBLIC	?set_entity_movement_frame_rate@@YGXH@Z		; set_entity_movement_frame_rate
PUBLIC	?__LINE__Var@?0??set_entity_movement_frame_rate@@YGXH@Z@4JA ; `set_entity_movement_frame_rate'::`1'::__LINE__Var
PUBLIC	??_C@_0EE@GHGODNLM@c?3?2users?2nhv90?2projects?2eech?2ap@ ; `string'
PUBLIC	??_C@_0CJ@IDPEHPPB@?$CIframe_rate?5?$DO?$DN?51?$CJ?5?$CG?$CG?5?$CIframe_rat@ ; `string'
PUBLIC	__real@3ff0000000000000
EXTRN	?process_assert@@YGXPBD0H@Z:PROC		; process_assert
EXTRN	?system_delta_time@@3MA:DWORD			; system_delta_time
EXTRN	__fltused:DWORD
;	COMDAT __real@3ff0000000000000
CONST	SEGMENT
__real@3ff0000000000000 DQ 03ff0000000000000r	; 1
CONST	ENDS
;	COMDAT ??_C@_0CJ@IDPEHPPB@?$CIframe_rate?5?$DO?$DN?51?$CJ?5?$CG?$CG?5?$CIframe_rat@
CONST	SEGMENT
??_C@_0CJ@IDPEHPPB@?$CIframe_rate?5?$DO?$DN?51?$CJ?5?$CG?$CG?5?$CIframe_rat@ DB '('
	DB	'frame_rate >= 1) && (frame_rate <= 100)', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0EE@GHGODNLM@c?3?2users?2nhv90?2projects?2eech?2ap@
CONST	SEGMENT
??_C@_0EE@GHGODNLM@c?3?2users?2nhv90?2projects?2eech?2ap@ DB 'c:\users\nh'
	DB	'v90\projects\eech\aphavoc\source\entity\mobile\mb_move.c', 00H ; `string'
CONST	ENDS
;	COMDAT ?__LINE__Var@?0??set_entity_movement_frame_rate@@YGXH@Z@4JA
_DATA	SEGMENT
?__LINE__Var@?0??set_entity_movement_frame_rate@@YGXH@Z@4JA DD 05aH ; `set_entity_movement_frame_rate'::`1'::__LINE__Var
_DATA	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\entity\mobile\mb_move.c
;	COMDAT ?set_entity_movement_frame_rate@@YGXH@Z
_TEXT	SEGMENT
_frame_rate$ = 8					; size = 4
?set_entity_movement_frame_rate@@YGXH@Z PROC		; set_entity_movement_frame_rate, COMDAT

; 90   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 91   : 
; 92   : 	ASSERT ((frame_rate >= 1) && (frame_rate <= 100));

  00009	83 7d 08 01	 cmp	 DWORD PTR _frame_rate$[ebp], 1
  0000d	7c 06		 jl	 SHORT $LN3@set_entity
  0000f	83 7d 08 64	 cmp	 DWORD PTR _frame_rate$[ebp], 100 ; 00000064H
  00013	7e 18		 jle	 SHORT $LN2@set_entity
$LN3@set_entity:
  00015	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??set_entity_movement_frame_rate@@YGXH@Z@4JA
  0001a	83 c0 02	 add	 eax, 2
  0001d	50		 push	 eax
  0001e	68 00 00 00 00	 push	 OFFSET ??_C@_0EE@GHGODNLM@c?3?2users?2nhv90?2projects?2eech?2ap@
  00023	68 00 00 00 00	 push	 OFFSET ??_C@_0CJ@IDPEHPPB@?$CIframe_rate?5?$DO?$DN?51?$CJ?5?$CG?$CG?5?$CIframe_rat@
  00028	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN2@set_entity:

; 93   : 
; 94   : 	entity_movement_iterations = (int) (get_delta_time () * frame_rate + 1.0);

  0002d	f3 0f 2a 45 08	 cvtsi2ss xmm0, DWORD PTR _frame_rate$[ebp]
  00032	f3 0f 59 05 00
	00 00 00	 mulss	 xmm0, DWORD PTR ?system_delta_time@@3MA
  0003a	f3 0f 5a c0	 cvtss2sd xmm0, xmm0
  0003e	f2 0f 58 05 00
	00 00 00	 addsd	 xmm0, QWORD PTR __real@3ff0000000000000
  00046	f2 0f 2c c0	 cvttsd2si eax, xmm0
  0004a	a3 00 00 00 00	 mov	 DWORD PTR ?entity_movement_iterations@@3HA, eax ; entity_movement_iterations

; 95   : 
; 96   : 	entity_movement_delta_time = get_delta_time () / entity_movement_iterations;

  0004f	f3 0f 2a 05 00
	00 00 00	 cvtsi2ss xmm0, DWORD PTR ?entity_movement_iterations@@3HA ; entity_movement_iterations
  00057	f3 0f 10 0d 00
	00 00 00	 movss	 xmm1, DWORD PTR ?system_delta_time@@3MA
  0005f	f3 0f 5e c8	 divss	 xmm1, xmm0
  00063	f3 0f 11 0d 00
	00 00 00	 movss	 DWORD PTR ?entity_movement_delta_time@@3MA, xmm1

; 97   : 
; 98   : 	#if DEBUG_MODULE
; 99   : 
; 100  : 	debug_log ("MB_MOVE: requested frame rate %d, delta time %f, iterations %d, set_delta_time %f", frame_rate, get_delta_time (), entity_movement_iterations, entity_movement_delta_time);
; 101  : 
; 102  : 	#endif
; 103  : }

  0006b	5f		 pop	 edi
  0006c	5e		 pop	 esi
  0006d	5b		 pop	 ebx
  0006e	8b e5		 mov	 esp, ebp
  00070	5d		 pop	 ebp
  00071	c2 04 00	 ret	 4
?set_entity_movement_frame_rate@@YGXH@Z ENDP		; set_entity_movement_frame_rate
_TEXT	ENDS
END
