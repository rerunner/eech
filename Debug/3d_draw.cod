; Listing generated by Microsoft (R) Optimizing Compiler Version 19.16.27045.0 

	TITLE	C:\Users\nhv90\Projects\eech\aphavoc\source\app3d\3d_draw.c
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB MSVCRTD
INCLUDELIB OLDNAMES

PUBLIC	?application_3d_rain_active@@3HA		; application_3d_rain_active
_DATA	SEGMENT
?application_3d_rain_active@@3HA DD 01H			; application_3d_rain_active
_DATA	ENDS
PUBLIC	?draw_application_3d_scene@@YGXXZ		; draw_application_3d_scene
PUBLIC	?draw_application_highres_screen@@YGXHHHH@Z	; draw_application_highres_screen
PUBLIC	?draw_application_ui_3d_scene@@YGXXZ		; draw_application_ui_3d_scene
PUBLIC	?draw_application_3d_scene_to_texture@@YGXPAUSCREEN@@M@Z ; draw_application_3d_scene_to_texture
PUBLIC	?update_application_3d_scene@@YGXXZ		; update_application_3d_scene
PUBLIC	?__LINE__Var@?0??get_3d_rain_wind_values@@YGXPAUENTITY@@PAUVEC3D@@PAM@Z@4JA ; `get_3d_rain_wind_values'::`1'::__LINE__Var
PUBLIC	??_C@_0DM@CKNBBMJN@c?3?2users?2nhv90?2projects?2eech?2ap@ ; `string'
PUBLIC	??_C@_02LFNMGJAP@en@				; `string'
PUBLIC	??_C@_0BG@JBKNMBKL@rain_wind_unit_vector@	; `string'
PUBLIC	?__LINE__Var@?0??draw_application_3d_scene@@YGXXZ@4JA ; `draw_application_3d_scene'::`1'::__LINE__Var
PUBLIC	?__LINE__Var@?0??draw_application_highres_screen@@YGXHHHH@Z@4JA ; `draw_application_highres_screen'::`1'::__LINE__Var
PUBLIC	?__LINE__Var@?0??draw_application_ui_3d_scene@@YGXXZ@4JA ; `draw_application_ui_3d_scene'::`1'::__LINE__Var
PUBLIC	__real@3f000000
PUBLIC	__real@3f10000000000000
PUBLIC	__real@3f50624dd2f1a9fc
PUBLIC	__real@3f800000
PUBLIC	__real@3f847ae147ae147b
PUBLIC	__real@40000000
PUBLIC	__real@4000000000000000
PUBLIC	__real@461c4000
EXTRN	?process_assert@@YGXPBD0H@Z:PROC		; process_assert
EXTRN	?get_3d_vector_magnitude@@YGMPBUVEC3D@@@Z:PROC	; get_3d_vector_magnitude
EXTRN	?normalise_3d_vector_given_magnitude@@YGXPAUVEC3D@@M@Z:PROC ; normalise_3d_vector_given_magnitude
EXTRN	?ddraw_flip_surface@@YGHXZ:PROC			; ddraw_flip_surface
EXTRN	?lock_screen@@YGHPAUSCREEN@@@Z:PROC		; lock_screen
EXTRN	?unlock_screen@@YGHPAUSCREEN@@@Z:PROC		; unlock_screen
EXTRN	?set_active_screen@@YGHPAUSCREEN@@@Z:PROC	; set_active_screen
EXTRN	?get_screen_width@@YGHPAUSCREEN@@@Z:PROC	; get_screen_width
EXTRN	?get_screen_height@@YGHPAUSCREEN@@@Z:PROC	; get_screen_height
EXTRN	?set_3d_render_target@@YGHPAUSCREEN@@@Z:PROC	; set_3d_render_target
EXTRN	?finalise_3d_render_target_texture@@YGXPAUSCREEN@@@Z:PROC ; finalise_3d_render_target_texture
EXTRN	?set_block@@YGXHHHHUREAL_COLOUR@@@Z:PROC	; set_block
EXTRN	?draw_line@@YGXMMMMUREAL_COLOUR@@@Z:PROC	; draw_line
EXTRN	?set_d3d_transparency_on@@YGXXZ:PROC		; set_d3d_transparency_on
EXTRN	?set_d3d_transparency_off@@YGXXZ:PROC		; set_d3d_transparency_off
EXTRN	?set_d3d_zbuffer_comparison@@YGXH@Z:PROC	; set_d3d_zbuffer_comparison
EXTRN	?set_d3d_culling@@YGXH@Z:PROC			; set_d3d_culling
EXTRN	?set_d3d_texture_wrapping@@YGXHH@Z:PROC		; set_d3d_texture_wrapping
EXTRN	?set_d3d_flat_shaded_textured_renderstate@@YGXPAUSCREEN@@@Z:PROC ; set_d3d_flat_shaded_textured_renderstate
EXTRN	?draw_wbuffered_flat_shaded_textured_polygon@@YGXPAUVERTEX@@UREAL_COLOUR@@1@Z:PROC ; draw_wbuffered_flat_shaded_textured_polygon
EXTRN	?get_system_texture_ptr@@YGPAUSCREEN@@H@Z:PROC	; get_system_texture_ptr
EXTRN	?clear_zbuffer_screen@@YGXXZ:PROC		; clear_zbuffer_screen
EXTRN	?clear_zbuffer_screen_using_viewport@@YGXXZ:PROC ; clear_zbuffer_screen_using_viewport
EXTRN	?set_3d_active_environment@@YGXPAUENV_3D@@@Z:PROC ; set_3d_active_environment
EXTRN	?set_3d_time_of_day@@YGXPAUENV_3D@@M@Z:PROC	; set_3d_time_of_day
EXTRN	?set_3d_weathermode@@YGXPAUENV_3D@@W4WEATHERMODES@@@Z:PROC ; set_3d_weathermode
EXTRN	?set_3d_target_weathermode@@YGXPAUENV_3D@@W4WEATHERMODES@@@Z:PROC ; set_3d_target_weathermode
EXTRN	?set_3d_target_weathermode_transitional_status@@YGXPAUENV_3D@@M@Z:PROC ; set_3d_target_weathermode_transitional_status
EXTRN	?get_3d_time_of_day@@YGMPAUENV_3D@@@Z:PROC	; get_3d_time_of_day
EXTRN	?get_3d_render_filter@@YG?AW4RENDER_FILTERS@@PAUENV_3D@@@Z:PROC ; get_3d_render_filter
EXTRN	?get_3d_fog_colour@@YG?AUREAL_COLOUR@@PAUENV_3D@@@Z:PROC ; get_3d_fog_colour
EXTRN	?recalculate_3d_environment_settings@@YGXPAUENV_3D@@@Z:PROC ; recalculate_3d_environment_settings
EXTRN	?set_3d_viewport@@YGXPAUENV_3D@@MMMM@Z:PROC	; set_3d_viewport
EXTRN	?set_3d_view_distances@@YGXPAUENV_3D@@MMMM@Z:PROC ; set_3d_view_distances
EXTRN	?set_3d_origin@@YGXPAUENV_3D@@MM@Z:PROC		; set_3d_origin
EXTRN	?set_3d_viewcone@@YGXPAUENV_3D@@MMMM@Z:PROC	; set_3d_viewcone
EXTRN	?get_3d_viewport@@YGXPAUENV_3D@@PAM111@Z:PROC	; get_3d_viewport
EXTRN	?draw_3d_scene@@YGXXZ:PROC			; draw_3d_scene
EXTRN	?draw_3d_horizon@@YGXXZ:PROC			; draw_3d_horizon
EXTRN	?draw_3d_sun@@YGXXZ:PROC			; draw_3d_sun
EXTRN	?draw_3d_moon@@YGXXZ:PROC			; draw_3d_moon
EXTRN	?update_3d_lightning_strikes@@YGXPAUENV_3D@@@Z:PROC ; update_3d_lightning_strikes
EXTRN	?draw_3d_lightning_strikes@@YGXXZ:PROC		; draw_3d_lightning_strikes
EXTRN	?begin_3d_scene@@YGHXZ:PROC			; begin_3d_scene
EXTRN	?end_3d_scene@@YGXXZ:PROC			; end_3d_scene
EXTRN	?set_3d_rain_wind@@YGXPAUVEC3D@@M@Z:PROC	; set_3d_rain_wind
EXTRN	?update_3d_rain@@YGXPAUENV_3D@@MQAY02M@Z:PROC	; update_3d_rain
EXTRN	?draw_3d_rain@@YGXXZ:PROC			; draw_3d_rain
EXTRN	?draw_3d_stars@@YGXXZ:PROC			; draw_3d_stars
EXTRN	?scan_3d_clouds@@YGXXZ:PROC			; scan_3d_clouds
EXTRN	?scan_3d_terrain@@YGXXZ:PROC			; scan_3d_terrain
EXTRN	?scan_local_entity_3d_objects@@YGXPAUVIEWPOINT@@@Z:PROC ; scan_local_entity_3d_objects
EXTRN	?get_session_wind_velocity_at_point@@YGMPAUVEC3D@@0@Z:PROC ; get_session_wind_velocity_at_point
EXTRN	?random_number_seed@@3HA:DWORD			; random_number_seed
EXTRN	?d3d_modulate_alpha@@3HA:DWORD			; d3d_modulate_alpha
EXTRN	?active_viewport@@3UVIEWPORT@@A:BYTE		; active_viewport
EXTRN	?video_screen@@3PAUSCREEN@@A:DWORD		; video_screen
EXTRN	?active_screen@@3PAUSCREEN@@A:DWORD		; active_screen
EXTRN	?command_line_3d_visual_clear_edges@@3HA:DWORD	; command_line_3d_visual_clear_edges
EXTRN	?null_entity_pointer_message@@3PBDB:DWORD	; null_entity_pointer_message
EXTRN	?overload_invalid_float_type_message@@3PBDB:DWORD ; overload_invalid_float_type_message
EXTRN	?fn_get_local_entity_float_value@@3PAY0KP@P6GMPAUENTITY@@W4FLOAT_TYPES@@@ZA:BYTE ; fn_get_local_entity_float_value
EXTRN	?overload_invalid_int_type_message@@3PBDB:DWORD	; overload_invalid_int_type_message
EXTRN	?fn_get_local_entity_int_value@@3PAY0BBH@P6GHPAUENTITY@@W4INT_TYPES@@@ZA:BYTE ; fn_get_local_entity_int_value
EXTRN	?overload_invalid_vec3d_type_message@@3PBDB:DWORD ; overload_invalid_vec3d_type_message
EXTRN	?fn_get_local_entity_vec3d@@3PAY0BI@P6GXPAUENTITY@@W4VEC3D_TYPES@@PAUVEC3D@@@ZA:BYTE ; fn_get_local_entity_vec3d
EXTRN	?fn_get_local_entity_vec3d_ptr@@3PAY0BI@P6GPAUVEC3D@@PAUENTITY@@W4VEC3D_TYPES@@@ZA:BYTE ; fn_get_local_entity_vec3d_ptr
EXTRN	?gunship_entity@@3PAUENTITY@@A:DWORD		; gunship_entity
EXTRN	?camera_entity@@3PAUENTITY@@A:DWORD		; camera_entity
EXTRN	?session_entity@@3PAUENTITY@@A:DWORD		; session_entity
EXTRN	?full_screen_width@@3MA:DWORD			; full_screen_width
EXTRN	?full_screen_height@@3MA:DWORD			; full_screen_height
EXTRN	?full_screen_x_min@@3MA:DWORD			; full_screen_x_min
EXTRN	?full_screen_y_min@@3MA:DWORD			; full_screen_y_min
EXTRN	?full_screen_x_max@@3MA:DWORD			; full_screen_x_max
EXTRN	?full_screen_y_max@@3MA:DWORD			; full_screen_y_max
EXTRN	?full_screen_width_view_angle@@3MA:DWORD	; full_screen_width_view_angle
EXTRN	?full_screen_height_view_angle@@3MA:DWORD	; full_screen_height_view_angle
EXTRN	?main_3d_env@@3PAUENV_3D@@A:DWORD		; main_3d_env
EXTRN	?main_vp@@3UVIEWPOINT@@A:BYTE			; main_vp
EXTRN	?current_3d_noise_level@@3W4DISPLAY_3D_NOISE_LEVELS@@A:DWORD ; current_3d_noise_level
EXTRN	?view_mode@@3W4VIEW_MODES@@A:DWORD		; view_mode
EXTRN	?in_cockpit@@3HA:DWORD				; in_cockpit
EXTRN	__fltused:DWORD
;	COMDAT __real@461c4000
CONST	SEGMENT
__real@461c4000 DD 0461c4000r			; 10000
CONST	ENDS
;	COMDAT __real@4000000000000000
CONST	SEGMENT
__real@4000000000000000 DQ 04000000000000000r	; 2
CONST	ENDS
;	COMDAT __real@40000000
CONST	SEGMENT
__real@40000000 DD 040000000r			; 2
CONST	ENDS
;	COMDAT __real@3f847ae147ae147b
CONST	SEGMENT
__real@3f847ae147ae147b DQ 03f847ae147ae147br	; 0.01
CONST	ENDS
;	COMDAT __real@3f800000
CONST	SEGMENT
__real@3f800000 DD 03f800000r			; 1
CONST	ENDS
;	COMDAT __real@3f50624dd2f1a9fc
CONST	SEGMENT
__real@3f50624dd2f1a9fc DQ 03f50624dd2f1a9fcr	; 0.001
CONST	ENDS
;	COMDAT __real@3f10000000000000
CONST	SEGMENT
__real@3f10000000000000 DQ 03f10000000000000r	; 6.10352e-05
CONST	ENDS
;	COMDAT __real@3f000000
CONST	SEGMENT
__real@3f000000 DD 03f000000r			; 0.5
CONST	ENDS
;	COMDAT ?__LINE__Var@?0??draw_application_ui_3d_scene@@YGXXZ@4JA
_DATA	SEGMENT
?__LINE__Var@?0??draw_application_ui_3d_scene@@YGXXZ@4JA DD 0221H ; `draw_application_ui_3d_scene'::`1'::__LINE__Var
_DATA	ENDS
;	COMDAT ?__LINE__Var@?0??draw_application_highres_screen@@YGXHHHH@Z@4JA
_DATA	SEGMENT
?__LINE__Var@?0??draw_application_highres_screen@@YGXHHHH@Z@4JA DD 019eH ; `draw_application_highres_screen'::`1'::__LINE__Var
_DATA	ENDS
;	COMDAT ?__LINE__Var@?0??draw_application_3d_scene@@YGXXZ@4JA
_DATA	SEGMENT
?__LINE__Var@?0??draw_application_3d_scene@@YGXXZ@4JA DD 0b7H ; `draw_application_3d_scene'::`1'::__LINE__Var
_DATA	ENDS
;	COMDAT ??_C@_0BG@JBKNMBKL@rain_wind_unit_vector@
CONST	SEGMENT
??_C@_0BG@JBKNMBKL@rain_wind_unit_vector@ DB 'rain_wind_unit_vector', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_02LFNMGJAP@en@
CONST	SEGMENT
??_C@_02LFNMGJAP@en@ DB 'en', 00H			; `string'
CONST	ENDS
;	COMDAT ??_C@_0DM@CKNBBMJN@c?3?2users?2nhv90?2projects?2eech?2ap@
CONST	SEGMENT
??_C@_0DM@CKNBBMJN@c?3?2users?2nhv90?2projects?2eech?2ap@ DB 'c:\users\nh'
	DB	'v90\projects\eech\aphavoc\source\app3d\3d_draw.c', 00H ; `string'
CONST	ENDS
;	COMDAT ?__LINE__Var@?0??get_3d_rain_wind_values@@YGXPAUENTITY@@PAUVEC3D@@PAM@Z@4JA
_DATA	SEGMENT
?__LINE__Var@?0??get_3d_rain_wind_values@@YGXPAUENTITY@@PAUVEC3D@@PAM@Z@4JA DD 057H ; `get_3d_rain_wind_values'::`1'::__LINE__Var
_DATA	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\app3d\3d_draw.c
;	COMDAT ?update_application_3d_scene@@YGXXZ
_TEXT	SEGMENT
?update_application_3d_scene@@YGXXZ PROC		; update_application_3d_scene, COMDAT

; 167  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 168  : 
; 169  : 	if ( application_3d_rain_active )

  00009	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?application_3d_rain_active@@3HA, 0 ; application_3d_rain_active
  00010	74 2b		 je	 SHORT $LN2@update_app

; 170  : 	{
; 171  : 	
; 172  : 		update_3d_rain (main_3d_env, get_3d_time_of_day (main_3d_env), main_vp.attitude);

  00012	68 0c 00 00 00	 push	 OFFSET ?main_vp@@3UVIEWPOINT@@A+12
  00017	a1 00 00 00 00	 mov	 eax, DWORD PTR ?main_3d_env@@3PAUENV_3D@@A ; main_3d_env
  0001c	50		 push	 eax
  0001d	e8 00 00 00 00	 call	 ?get_3d_time_of_day@@YGMPAUENV_3D@@@Z ; get_3d_time_of_day
  00022	51		 push	 ecx
  00023	d9 1c 24	 fstp	 DWORD PTR [esp]
  00026	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?main_3d_env@@3PAUENV_3D@@A ; main_3d_env
  0002c	51		 push	 ecx
  0002d	e8 00 00 00 00	 call	 ?update_3d_rain@@YGXPAUENV_3D@@MQAY02M@Z ; update_3d_rain

; 173  : 	
; 174  : 		update_3d_lightning_strikes ( main_3d_env );

  00032	a1 00 00 00 00	 mov	 eax, DWORD PTR ?main_3d_env@@3PAUENV_3D@@A ; main_3d_env
  00037	50		 push	 eax
  00038	e8 00 00 00 00	 call	 ?update_3d_lightning_strikes@@YGXPAUENV_3D@@@Z ; update_3d_lightning_strikes
$LN2@update_app:

; 175  : 	}
; 176  : }

  0003d	5f		 pop	 edi
  0003e	5e		 pop	 esi
  0003f	5b		 pop	 ebx
  00040	8b e5		 mov	 esp, ebp
  00042	5d		 pop	 ebp
  00043	c3		 ret	 0
?update_application_3d_scene@@YGXXZ ENDP		; update_application_3d_scene
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\app3d\3d_draw.c
;	COMDAT ?set_main_3d_rain_wind@@YGXXZ
_TEXT	SEGMENT
_rain_wind_velocity$ = -16				; size = 4
_rain_wind_unit_vector$ = -12				; size = 12
?set_main_3d_rain_wind@@YGXXZ PROC			; set_main_3d_rain_wind, COMDAT

; 131  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 50	 sub	 esp, 80			; 00000050H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 132  : 	vec3d
; 133  : 		rain_wind_unit_vector;
; 134  : 
; 135  : 	float
; 136  : 		rain_wind_velocity;
; 137  : 
; 138  : 	if (in_cockpit)

  00009	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?in_cockpit@@3HA, 0 ; in_cockpit
  00010	74 16		 je	 SHORT $LN2@set_main_3

; 139  : 	{
; 140  : 		get_3d_rain_wind_values (get_gunship_entity (), &rain_wind_unit_vector, &rain_wind_velocity);

  00012	8d 45 f0	 lea	 eax, DWORD PTR _rain_wind_velocity$[ebp]
  00015	50		 push	 eax
  00016	8d 4d f4	 lea	 ecx, DWORD PTR _rain_wind_unit_vector$[ebp]
  00019	51		 push	 ecx
  0001a	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gunship_entity@@3PAUENTITY@@A ; gunship_entity
  00020	52		 push	 edx
  00021	e8 00 00 00 00	 call	 ?get_3d_rain_wind_values@@YGXPAUENTITY@@PAUVEC3D@@PAM@Z ; get_3d_rain_wind_values
  00026	eb 3f		 jmp	 SHORT $LN5@set_main_3
$LN2@set_main_3:

; 141  : 	}
; 142  : 	else if (get_view_mode () == VIEW_MODE_EXTERNAL)

  00028	83 3d 00 00 00
	00 2a		 cmp	 DWORD PTR ?view_mode@@3W4VIEW_MODES@@A, 42 ; view_mode, 0000002aH
  0002f	75 16		 jne	 SHORT $LN4@set_main_3

; 143  : 	{
; 144  : 		get_3d_rain_wind_values (get_camera_entity (), &rain_wind_unit_vector, &rain_wind_velocity);

  00031	8d 45 f0	 lea	 eax, DWORD PTR _rain_wind_velocity$[ebp]
  00034	50		 push	 eax
  00035	8d 4d f4	 lea	 ecx, DWORD PTR _rain_wind_unit_vector$[ebp]
  00038	51		 push	 ecx
  00039	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?camera_entity@@3PAUENTITY@@A ; camera_entity
  0003f	52		 push	 edx
  00040	e8 00 00 00 00	 call	 ?get_3d_rain_wind_values@@YGXPAUENTITY@@PAUVEC3D@@PAM@Z ; get_3d_rain_wind_values

; 145  : 	}
; 146  : 	else

  00045	eb 20		 jmp	 SHORT $LN5@set_main_3
$LN4@set_main_3:

; 147  : 	{
; 148  : 		//
; 149  : 		// this will happen if VIEW_MODE_SAFE (which should never happen)
; 150  : 		//
; 151  : 
; 152  : 		rain_wind_unit_vector.x = 0.0;

  00047	0f 57 c0	 xorps	 xmm0, xmm0
  0004a	f3 0f 11 45 f4	 movss	 DWORD PTR _rain_wind_unit_vector$[ebp], xmm0

; 153  : 		rain_wind_unit_vector.y = 0.0;

  0004f	0f 57 c0	 xorps	 xmm0, xmm0
  00052	f3 0f 11 45 f8	 movss	 DWORD PTR _rain_wind_unit_vector$[ebp+4], xmm0

; 154  : 		rain_wind_unit_vector.z = 0.0;

  00057	0f 57 c0	 xorps	 xmm0, xmm0
  0005a	f3 0f 11 45 fc	 movss	 DWORD PTR _rain_wind_unit_vector$[ebp+8], xmm0

; 155  : 
; 156  : 		rain_wind_velocity = 0.0;

  0005f	0f 57 c0	 xorps	 xmm0, xmm0
  00062	f3 0f 11 45 f0	 movss	 DWORD PTR _rain_wind_velocity$[ebp], xmm0
$LN5@set_main_3:

; 157  : 	}
; 158  : 
; 159  : 	set_3d_rain_wind (&rain_wind_unit_vector, rain_wind_velocity);

  00067	51		 push	 ecx
  00068	f3 0f 10 45 f0	 movss	 xmm0, DWORD PTR _rain_wind_velocity$[ebp]
  0006d	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00072	8d 45 f4	 lea	 eax, DWORD PTR _rain_wind_unit_vector$[ebp]
  00075	50		 push	 eax
  00076	e8 00 00 00 00	 call	 ?set_3d_rain_wind@@YGXPAUVEC3D@@M@Z ; set_3d_rain_wind

; 160  : }

  0007b	5f		 pop	 edi
  0007c	5e		 pop	 esi
  0007d	5b		 pop	 ebx
  0007e	8b e5		 mov	 esp, ebp
  00080	5d		 pop	 ebp
  00081	c3		 ret	 0
?set_main_3d_rain_wind@@YGXXZ ENDP			; set_main_3d_rain_wind
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\app3d\3d_draw.c
;	COMDAT ?get_3d_rain_wind_values@@YGXPAUENTITY@@PAUVEC3D@@PAM@Z
_TEXT	SEGMENT
tv142 = -100						; size = 4
tv88 = -100						; size = 4
tv134 = -96						; size = 4
tv80 = -96						; size = 4
_true_velocity$ = -28					; size = 4
_wind_velocity$ = -24					; size = 12
_v$ = -12						; size = 12
_en$ = 8						; size = 4
_rain_wind_unit_vector$ = 12				; size = 4
_rain_wind_velocity$ = 16				; size = 4
?get_3d_rain_wind_values@@YGXPAUENTITY@@PAUVEC3D@@PAM@Z PROC ; get_3d_rain_wind_values, COMDAT

; 87   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 64	 sub	 esp, 100		; 00000064H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 88   : 	vec3d
; 89   : 		v,
; 90   : 		wind_velocity;
; 91   : 
; 92   : 	float
; 93   : 		true_velocity;
; 94   : 
; 95   : 	ASSERT (en);

  00009	83 7d 08 00	 cmp	 DWORD PTR _en$[ebp], 0
  0000d	75 18		 jne	 SHORT $LN2@get_3d_rai
  0000f	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??get_3d_rain_wind_values@@YGXPAUENTITY@@PAUVEC3D@@PAM@Z@4JA
  00014	83 c0 08	 add	 eax, 8
  00017	50		 push	 eax
  00018	68 00 00 00 00	 push	 OFFSET ??_C@_0DM@CKNBBMJN@c?3?2users?2nhv90?2projects?2eech?2ap@
  0001d	68 00 00 00 00	 push	 OFFSET ??_C@_02LFNMGJAP@en@
  00022	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN2@get_3d_rai:

; 96   : 
; 97   : 	ASSERT (rain_wind_unit_vector);

  00027	83 7d 0c 00	 cmp	 DWORD PTR _rain_wind_unit_vector$[ebp], 0
  0002b	75 18		 jne	 SHORT $LN3@get_3d_rai
  0002d	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??get_3d_rain_wind_values@@YGXPAUENTITY@@PAUVEC3D@@PAM@Z@4JA
  00032	83 c0 0a	 add	 eax, 10			; 0000000aH
  00035	50		 push	 eax
  00036	68 00 00 00 00	 push	 OFFSET ??_C@_0DM@CKNBBMJN@c?3?2users?2nhv90?2projects?2eech?2ap@
  0003b	68 00 00 00 00	 push	 OFFSET ??_C@_0BG@JBKNMBKL@rain_wind_unit_vector@
  00040	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN3@get_3d_rai:

; 98   : 
; 99   : 	get_local_entity_vec3d (en, VEC3D_TYPE_MOTION_VECTOR, &v);

  00045	83 7d 08 00	 cmp	 DWORD PTR _en$[ebp], 0
  00049	74 0a		 je	 SHORT $LN7@get_3d_rai
  0004b	8b 45 08	 mov	 eax, DWORD PTR _en$[ebp]
  0004e	8b 08		 mov	 ecx, DWORD PTR [eax]
  00050	89 4d a0	 mov	 DWORD PTR tv80[ebp], ecx
  00053	eb 21		 jmp	 SHORT $LN8@get_3d_rai
$LN7@get_3d_rai:
  00055	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??get_3d_rain_wind_values@@YGXPAUENTITY@@PAUVEC3D@@PAM@Z@4JA
  0005b	83 c2 0c	 add	 edx, 12			; 0000000cH
  0005e	52		 push	 edx
  0005f	68 00 00 00 00	 push	 OFFSET ??_C@_0DM@CKNBBMJN@c?3?2users?2nhv90?2projects?2eech?2ap@
  00064	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  00069	50		 push	 eax
  0006a	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  0006f	c7 45 a0 00 00
	00 00		 mov	 DWORD PTR tv80[ebp], 0
$LN8@get_3d_rai:
  00076	b9 01 00 00 00	 mov	 ecx, 1
  0007b	85 c9		 test	 ecx, ecx
  0007d	74 09		 je	 SHORT $LN9@get_3d_rai
  0007f	c7 45 9c 06 00
	00 00		 mov	 DWORD PTR tv88[ebp], 6
  00086	eb 21		 jmp	 SHORT $LN10@get_3d_rai
$LN9@get_3d_rai:
  00088	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??get_3d_rain_wind_values@@YGXPAUENTITY@@PAUVEC3D@@PAM@Z@4JA
  0008e	83 c2 0c	 add	 edx, 12			; 0000000cH
  00091	52		 push	 edx
  00092	68 00 00 00 00	 push	 OFFSET ??_C@_0DM@CKNBBMJN@c?3?2users?2nhv90?2projects?2eech?2ap@
  00097	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_vec3d_type_message@@3PBDB ; overload_invalid_vec3d_type_message
  0009c	50		 push	 eax
  0009d	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  000a2	c7 45 9c 00 00
	00 00		 mov	 DWORD PTR tv88[ebp], 0
$LN10@get_3d_rai:
  000a9	8d 4d f4	 lea	 ecx, DWORD PTR _v$[ebp]
  000ac	51		 push	 ecx
  000ad	6a 06		 push	 6
  000af	8b 55 08	 mov	 edx, DWORD PTR _en$[ebp]
  000b2	52		 push	 edx
  000b3	6b 45 a0 60	 imul	 eax, DWORD PTR tv80[ebp], 96
  000b7	8b 4d 9c	 mov	 ecx, DWORD PTR tv88[ebp]
  000ba	8b 94 88 00 00
	00 00		 mov	 edx, DWORD PTR ?fn_get_local_entity_vec3d@@3PAY0BI@P6GXPAUENTITY@@W4VEC3D_TYPES@@PAUVEC3D@@@ZA[eax+ecx*4]
  000c1	ff d2		 call	 edx

; 100  : 
; 101  : 	get_session_wind_velocity_at_point (get_local_entity_vec3d_ptr (en, VEC3D_TYPE_POSITION), &wind_velocity);

  000c3	83 7d 08 00	 cmp	 DWORD PTR _en$[ebp], 0
  000c7	74 0a		 je	 SHORT $LN11@get_3d_rai
  000c9	8b 45 08	 mov	 eax, DWORD PTR _en$[ebp]
  000cc	8b 08		 mov	 ecx, DWORD PTR [eax]
  000ce	89 4d a0	 mov	 DWORD PTR tv134[ebp], ecx
  000d1	eb 21		 jmp	 SHORT $LN12@get_3d_rai
$LN11@get_3d_rai:
  000d3	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??get_3d_rain_wind_values@@YGXPAUENTITY@@PAUVEC3D@@PAM@Z@4JA
  000d9	83 c2 0e	 add	 edx, 14			; 0000000eH
  000dc	52		 push	 edx
  000dd	68 00 00 00 00	 push	 OFFSET ??_C@_0DM@CKNBBMJN@c?3?2users?2nhv90?2projects?2eech?2ap@
  000e2	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  000e7	50		 push	 eax
  000e8	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  000ed	c7 45 a0 00 00
	00 00		 mov	 DWORD PTR tv134[ebp], 0
$LN12@get_3d_rai:
  000f4	b9 01 00 00 00	 mov	 ecx, 1
  000f9	85 c9		 test	 ecx, ecx
  000fb	74 09		 je	 SHORT $LN13@get_3d_rai
  000fd	c7 45 9c 08 00
	00 00		 mov	 DWORD PTR tv142[ebp], 8
  00104	eb 21		 jmp	 SHORT $LN14@get_3d_rai
$LN13@get_3d_rai:
  00106	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??get_3d_rain_wind_values@@YGXPAUENTITY@@PAUVEC3D@@PAM@Z@4JA
  0010c	83 c2 0e	 add	 edx, 14			; 0000000eH
  0010f	52		 push	 edx
  00110	68 00 00 00 00	 push	 OFFSET ??_C@_0DM@CKNBBMJN@c?3?2users?2nhv90?2projects?2eech?2ap@
  00115	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_vec3d_type_message@@3PBDB ; overload_invalid_vec3d_type_message
  0011a	50		 push	 eax
  0011b	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00120	c7 45 9c 00 00
	00 00		 mov	 DWORD PTR tv142[ebp], 0
$LN14@get_3d_rai:
  00127	8d 4d e8	 lea	 ecx, DWORD PTR _wind_velocity$[ebp]
  0012a	51		 push	 ecx
  0012b	6a 08		 push	 8
  0012d	8b 55 08	 mov	 edx, DWORD PTR _en$[ebp]
  00130	52		 push	 edx
  00131	6b 45 a0 60	 imul	 eax, DWORD PTR tv134[ebp], 96
  00135	8b 4d 9c	 mov	 ecx, DWORD PTR tv142[ebp]
  00138	8b 94 88 00 00
	00 00		 mov	 edx, DWORD PTR ?fn_get_local_entity_vec3d_ptr@@3PAY0BI@P6GPAUVEC3D@@PAUENTITY@@W4VEC3D_TYPES@@@ZA[eax+ecx*4]
  0013f	ff d2		 call	 edx
  00141	50		 push	 eax
  00142	e8 00 00 00 00	 call	 ?get_session_wind_velocity_at_point@@YGMPAUVEC3D@@0@Z ; get_session_wind_velocity_at_point
  00147	dd d8		 fstp	 ST(0)

; 102  : 
; 103  : 	v.x -= wind_velocity.x;

  00149	f3 0f 10 45 f4	 movss	 xmm0, DWORD PTR _v$[ebp]
  0014e	f3 0f 5c 45 e8	 subss	 xmm0, DWORD PTR _wind_velocity$[ebp]
  00153	f3 0f 11 45 f4	 movss	 DWORD PTR _v$[ebp], xmm0

; 104  : 	v.z -= wind_velocity.z;

  00158	f3 0f 10 45 fc	 movss	 xmm0, DWORD PTR _v$[ebp+8]
  0015d	f3 0f 5c 45 f0	 subss	 xmm0, DWORD PTR _wind_velocity$[ebp+8]
  00162	f3 0f 11 45 fc	 movss	 DWORD PTR _v$[ebp+8], xmm0

; 105  : 
; 106  : 	true_velocity = get_3d_vector_magnitude (&v);

  00167	8d 45 f4	 lea	 eax, DWORD PTR _v$[ebp]
  0016a	50		 push	 eax
  0016b	e8 00 00 00 00	 call	 ?get_3d_vector_magnitude@@YGMPBUVEC3D@@@Z ; get_3d_vector_magnitude
  00170	d9 5d e4	 fstp	 DWORD PTR _true_velocity$[ebp]

; 107  : 
; 108  : 	if (true_velocity < 0.01)

  00173	f3 0f 5a 45 e4	 cvtss2sd xmm0, DWORD PTR _true_velocity$[ebp]
  00178	f2 0f 10 0d 00
	00 00 00	 movsd	 xmm1, QWORD PTR __real@3f847ae147ae147b
  00180	66 0f 2f c8	 comisd	 xmm1, xmm0
  00184	76 22		 jbe	 SHORT $LN4@get_3d_rai

; 109  : 	{
; 110  : 		true_velocity = 0.0;

  00186	0f 57 c0	 xorps	 xmm0, xmm0
  00189	f3 0f 11 45 e4	 movss	 DWORD PTR _true_velocity$[ebp], xmm0

; 111  : 
; 112  : 		v.x = 0.0;

  0018e	0f 57 c0	 xorps	 xmm0, xmm0
  00191	f3 0f 11 45 f4	 movss	 DWORD PTR _v$[ebp], xmm0

; 113  : 		v.y = 0.0;

  00196	0f 57 c0	 xorps	 xmm0, xmm0
  00199	f3 0f 11 45 f8	 movss	 DWORD PTR _v$[ebp+4], xmm0

; 114  : 		v.z = 0.0;

  0019e	0f 57 c0	 xorps	 xmm0, xmm0
  001a1	f3 0f 11 45 fc	 movss	 DWORD PTR _v$[ebp+8], xmm0

; 115  : 	}
; 116  : 	else

  001a6	eb 14		 jmp	 SHORT $LN5@get_3d_rai
$LN4@get_3d_rai:

; 117  : 	{
; 118  : 		normalise_3d_vector_given_magnitude (&v, true_velocity);

  001a8	51		 push	 ecx
  001a9	f3 0f 10 45 e4	 movss	 xmm0, DWORD PTR _true_velocity$[ebp]
  001ae	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  001b3	8d 45 f4	 lea	 eax, DWORD PTR _v$[ebp]
  001b6	50		 push	 eax
  001b7	e8 00 00 00 00	 call	 ?normalise_3d_vector_given_magnitude@@YGXPAUVEC3D@@M@Z ; normalise_3d_vector_given_magnitude
$LN5@get_3d_rai:

; 119  : 	}
; 120  : 
; 121  : 	*rain_wind_unit_vector = v;

  001bc	8b 45 0c	 mov	 eax, DWORD PTR _rain_wind_unit_vector$[ebp]
  001bf	8b 4d f4	 mov	 ecx, DWORD PTR _v$[ebp]
  001c2	89 08		 mov	 DWORD PTR [eax], ecx
  001c4	8b 55 f8	 mov	 edx, DWORD PTR _v$[ebp+4]
  001c7	89 50 04	 mov	 DWORD PTR [eax+4], edx
  001ca	8b 4d fc	 mov	 ecx, DWORD PTR _v$[ebp+8]
  001cd	89 48 08	 mov	 DWORD PTR [eax+8], ecx

; 122  : 
; 123  : 	*rain_wind_velocity = true_velocity;

  001d0	8b 45 10	 mov	 eax, DWORD PTR _rain_wind_velocity$[ebp]
  001d3	f3 0f 10 45 e4	 movss	 xmm0, DWORD PTR _true_velocity$[ebp]
  001d8	f3 0f 11 00	 movss	 DWORD PTR [eax], xmm0

; 124  : }

  001dc	5f		 pop	 edi
  001dd	5e		 pop	 esi
  001de	5b		 pop	 ebx
  001df	8b e5		 mov	 esp, ebp
  001e1	5d		 pop	 ebp
  001e2	c2 0c 00	 ret	 12			; 0000000cH
?get_3d_rain_wind_values@@YGXPAUENTITY@@PAUVEC3D@@PAM@Z ENDP ; get_3d_rain_wind_values
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\app3d\3d_draw.c
;	COMDAT ?render_infrared_interference@@YGXH@Z
_TEXT	SEGMENT
$T1 = -356						; size = 4
_specular$2 = -288					; size = 4
_colour$3 = -284					; size = 4
_quad$4 = -280						; size = 256
_fog_colour$ = -24					; size = 4
_noise$ = -20						; size = 4
_y2$ = -16						; size = 4
_x2$ = -12						; size = 4
_y1$ = -8						; size = 4
_x1$ = -4						; size = 4
_alpha$ = 8						; size = 4
?render_infrared_interference@@YGXH@Z PROC		; render_infrared_interference, COMDAT

; 681  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec 64 01 00
	00		 sub	 esp, 356		; 00000164H
  00009	53		 push	 ebx
  0000a	56		 push	 esi
  0000b	57		 push	 edi

; 682  : 
; 683  : 	float
; 684  : 		x1,
; 685  : 		y1,
; 686  : 		x2,
; 687  : 		y2;
; 688  : 
; 689  : 	float
; 690  : 		noise;
; 691  : 
; 692  : 	rgb_colour
; 693  : 		fog_colour;
; 694  : 
; 695  : 	if ( !d3d_modulate_alpha )

  0000c	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?d3d_modulate_alpha@@3HA, 0 ; d3d_modulate_alpha
  00013	75 05		 jne	 SHORT $LN2@render_inf

; 696  : 	{
; 697  : 
; 698  : 		//
; 699  : 		// Graphics card can't render the interference properly.... don't bother.
; 700  : 		//
; 701  : 
; 702  : 		return;

  00015	e9 eb 03 00 00	 jmp	 $LN1@render_inf
$LN2@render_inf:

; 703  : 	}
; 704  : 
; 705  : 	get_3d_viewport ( main_3d_env, &x1, &y1, &x2, &y2 );

  0001a	8d 45 f0	 lea	 eax, DWORD PTR _y2$[ebp]
  0001d	50		 push	 eax
  0001e	8d 4d f4	 lea	 ecx, DWORD PTR _x2$[ebp]
  00021	51		 push	 ecx
  00022	8d 55 f8	 lea	 edx, DWORD PTR _y1$[ebp]
  00025	52		 push	 edx
  00026	8d 45 fc	 lea	 eax, DWORD PTR _x1$[ebp]
  00029	50		 push	 eax
  0002a	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?main_3d_env@@3PAUENV_3D@@A ; main_3d_env
  00030	51		 push	 ecx
  00031	e8 00 00 00 00	 call	 ?get_3d_viewport@@YGXPAUENV_3D@@PAM111@Z ; get_3d_viewport

; 706  : 
; 707  : 	fog_colour = get_3d_fog_colour ( main_3d_env );

  00036	a1 00 00 00 00	 mov	 eax, DWORD PTR ?main_3d_env@@3PAUENV_3D@@A ; main_3d_env
  0003b	50		 push	 eax
  0003c	e8 00 00 00 00	 call	 ?get_3d_fog_colour@@YG?AUREAL_COLOUR@@PAUENV_3D@@@Z ; get_3d_fog_colour
  00041	89 85 9c fe ff
	ff		 mov	 DWORD PTR $T1[ebp], eax
  00047	8b 8d 9c fe ff
	ff		 mov	 ecx, DWORD PTR $T1[ebp]
  0004d	89 4d e8	 mov	 DWORD PTR _fog_colour$[ebp], ecx

; 708  : 
; 709  : 	noise = sfrand1 ();

  00050	69 05 00 00 00
	00 6d 4e c6 41	 imul	 eax, DWORD PTR ?random_number_seed@@3HA, 1103515245 ; random_number_seed
  0005a	05 39 30 00 00	 add	 eax, 12345		; 00003039H
  0005f	a3 00 00 00 00	 mov	 DWORD PTR ?random_number_seed@@3HA, eax ; random_number_seed
  00064	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?random_number_seed@@3HA ; random_number_seed
  0006a	c1 f9 10	 sar	 ecx, 16			; 00000010H
  0006d	81 e1 ff 7f 00
	00		 and	 ecx, 32767		; 00007fffH
  00073	81 e9 00 40 00
	00		 sub	 ecx, 16384		; 00004000H
  00079	f2 0f 2a c1	 cvtsi2sd xmm0, ecx
  0007d	f2 0f 59 05 00
	00 00 00	 mulsd	 xmm0, QWORD PTR __real@3f10000000000000
  00085	f2 0f 5a c0	 cvtsd2ss xmm0, xmm0
  00089	f3 0f 11 45 ec	 movss	 DWORD PTR _noise$[ebp], xmm0

; 710  : 
; 711  : 	if ( begin_3d_scene () )

  0008e	e8 00 00 00 00	 call	 ?begin_3d_scene@@YGHXZ	; begin_3d_scene
  00093	85 c0		 test	 eax, eax
  00095	0f 84 6a 03 00
	00		 je	 $LN3@render_inf

; 712  : 	{
; 713  : 
; 714  : 		vertex
; 715  : 			quad[4];
; 716  : 
; 717  : 		real_colour
; 718  : 			colour,
; 719  : 			specular;
; 720  : 
; 721  : 		set_d3d_transparency_on ();

  0009b	e8 00 00 00 00	 call	 ?set_d3d_transparency_on@@YGXXZ ; set_d3d_transparency_on

; 722  : 
; 723  : 		set_d3d_zbuffer_comparison ( FALSE );

  000a0	6a 00		 push	 0
  000a2	e8 00 00 00 00	 call	 ?set_d3d_zbuffer_comparison@@YGXH@Z ; set_d3d_zbuffer_comparison

; 724  : 
; 725  : 		set_d3d_culling ( FALSE );

  000a7	6a 00		 push	 0
  000a9	e8 00 00 00 00	 call	 ?set_d3d_culling@@YGXH@Z ; set_d3d_culling

; 726  : 
; 727  : 		set_d3d_texture_wrapping ( 0, TRUE  );

  000ae	6a 01		 push	 1
  000b0	6a 00		 push	 0
  000b2	e8 00 00 00 00	 call	 ?set_d3d_texture_wrapping@@YGXHH@Z ; set_d3d_texture_wrapping

; 728  : 
; 729  : 		set_d3d_flat_shaded_textured_renderstate ( get_system_texture_ptr ( TEXTURE_INDEX_NIGHT_VISION ) );

  000b7	68 9f 06 00 00	 push	 1695			; 0000069fH
  000bc	e8 00 00 00 00	 call	 ?get_system_texture_ptr@@YGPAUSCREEN@@H@Z ; get_system_texture_ptr
  000c1	50		 push	 eax
  000c2	e8 00 00 00 00	 call	 ?set_d3d_flat_shaded_textured_renderstate@@YGXPAUSCREEN@@@Z ; set_d3d_flat_shaded_textured_renderstate

; 730  : 
; 731  : 		colour.red = fog_colour.r;

  000c7	8a 45 ea	 mov	 al, BYTE PTR _fog_colour$[ebp+2]
  000ca	88 85 e6 fe ff
	ff		 mov	 BYTE PTR _colour$3[ebp+2], al

; 732  : 		colour.green = fog_colour.g;

  000d0	8a 45 e9	 mov	 al, BYTE PTR _fog_colour$[ebp+1]
  000d3	88 85 e5 fe ff
	ff		 mov	 BYTE PTR _colour$3[ebp+1], al

; 733  : 		colour.blue = fog_colour.b;

  000d9	8a 45 e8	 mov	 al, BYTE PTR _fog_colour$[ebp]
  000dc	88 85 e4 fe ff
	ff		 mov	 BYTE PTR _colour$3[ebp], al

; 734  : 		
; 735  : 		// Jabberwock 031009 Use fog_colour alpha for variable fog
; 736  : 		
; 737  : 		if ((fog_colour.a) > 0)

  000e2	0f b6 45 eb	 movzx	 eax, BYTE PTR _fog_colour$[ebp+3]
  000e6	85 c0		 test	 eax, eax
  000e8	7e 0b		 jle	 SHORT $LN4@render_inf

; 738  : 		{
; 739  : 			colour.alpha = fog_colour.a;

  000ea	8a 45 eb	 mov	 al, BYTE PTR _fog_colour$[ebp+3]
  000ed	88 85 e7 fe ff
	ff		 mov	 BYTE PTR _colour$3[ebp+3], al

; 740  : 		}
; 741  : 		else

  000f3	eb 09		 jmp	 SHORT $LN5@render_inf
$LN4@render_inf:

; 742  : 		{
; 743  : 			colour.alpha = alpha;

  000f5	8a 45 08	 mov	 al, BYTE PTR _alpha$[ebp]
  000f8	88 85 e7 fe ff
	ff		 mov	 BYTE PTR _colour$3[ebp+3], al
$LN5@render_inf:

; 744  : 		}
; 745  : 		
; 746  : 		// Jabberwock 031009 ends
; 747  : 		
; 748  : 		specular.red = 0;

  000fe	c6 85 e2 fe ff
	ff 00		 mov	 BYTE PTR _specular$2[ebp+2], 0

; 749  : 		specular.green = 0;

  00105	c6 85 e1 fe ff
	ff 00		 mov	 BYTE PTR _specular$2[ebp+1], 0

; 750  : 		specular.blue = 0;

  0010c	c6 85 e0 fe ff
	ff 00		 mov	 BYTE PTR _specular$2[ebp], 0

; 751  : 		specular.alpha = 255;

  00113	c6 85 e3 fe ff
	ff ff		 mov	 BYTE PTR _specular$2[ebp+3], 255 ; 000000ffH

; 752  : 
; 753  : 		quad[0].i = x1;

  0011a	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  0011f	6b c8 00	 imul	 ecx, eax, 0
  00122	f3 0f 10 45 fc	 movss	 xmm0, DWORD PTR _x1$[ebp]
  00127	f3 0f 11 84 0d
	f8 fe ff ff	 movss	 DWORD PTR _quad$4[ebp+ecx+16], xmm0

; 754  : 		quad[0].j = y1;

  00130	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  00135	6b c8 00	 imul	 ecx, eax, 0
  00138	f3 0f 10 45 f8	 movss	 xmm0, DWORD PTR _y1$[ebp]
  0013d	f3 0f 11 84 0d
	fc fe ff ff	 movss	 DWORD PTR _quad$4[ebp+ecx+20], xmm0

; 755  : 		quad[0].z = 0.5;

  00146	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  0014b	6b c8 00	 imul	 ecx, eax, 0
  0014e	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3f000000
  00156	f3 0f 11 84 0d
	f0 fe ff ff	 movss	 DWORD PTR _quad$4[ebp+ecx+8], xmm0

; 756  : 		quad[0].q = 0.5;

  0015f	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  00164	6b c8 00	 imul	 ecx, eax, 0
  00167	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3f000000
  0016f	f3 0f 11 84 0d
	f4 fe ff ff	 movss	 DWORD PTR _quad$4[ebp+ecx+12], xmm0

; 757  : 		quad[0].u = 0 + noise;

  00178	0f 57 c0	 xorps	 xmm0, xmm0
  0017b	f3 0f 58 45 ec	 addss	 xmm0, DWORD PTR _noise$[ebp]
  00180	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  00185	6b c8 00	 imul	 ecx, eax, 0
  00188	f3 0f 11 84 0d
	00 ff ff ff	 movss	 DWORD PTR _quad$4[ebp+ecx+24], xmm0

; 758  : 		quad[0].v = 0 + noise;

  00191	0f 57 c0	 xorps	 xmm0, xmm0
  00194	f3 0f 58 45 ec	 addss	 xmm0, DWORD PTR _noise$[ebp]
  00199	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  0019e	6b c8 00	 imul	 ecx, eax, 0
  001a1	f3 0f 11 84 0d
	04 ff ff ff	 movss	 DWORD PTR _quad$4[ebp+ecx+28], xmm0

; 759  : 
; 760  : 		quad[1].i = x2;

  001aa	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  001af	c1 e0 00	 shl	 eax, 0
  001b2	f3 0f 10 45 f4	 movss	 xmm0, DWORD PTR _x2$[ebp]
  001b7	f3 0f 11 84 05
	f8 fe ff ff	 movss	 DWORD PTR _quad$4[ebp+eax+16], xmm0

; 761  : 		quad[1].j = y1;

  001c0	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  001c5	c1 e0 00	 shl	 eax, 0
  001c8	f3 0f 10 45 f8	 movss	 xmm0, DWORD PTR _y1$[ebp]
  001cd	f3 0f 11 84 05
	fc fe ff ff	 movss	 DWORD PTR _quad$4[ebp+eax+20], xmm0

; 762  : 		quad[1].z = 0.5;

  001d6	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  001db	c1 e0 00	 shl	 eax, 0
  001de	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3f000000
  001e6	f3 0f 11 84 05
	f0 fe ff ff	 movss	 DWORD PTR _quad$4[ebp+eax+8], xmm0

; 763  : 		quad[1].q = 0.5;

  001ef	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  001f4	c1 e0 00	 shl	 eax, 0
  001f7	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3f000000
  001ff	f3 0f 11 84 05
	f4 fe ff ff	 movss	 DWORD PTR _quad$4[ebp+eax+12], xmm0

; 764  : 		quad[1].u = 2 + noise;

  00208	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@40000000
  00210	f3 0f 58 45 ec	 addss	 xmm0, DWORD PTR _noise$[ebp]
  00215	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  0021a	c1 e0 00	 shl	 eax, 0
  0021d	f3 0f 11 84 05
	00 ff ff ff	 movss	 DWORD PTR _quad$4[ebp+eax+24], xmm0

; 765  : 		quad[1].v = 0 + noise;

  00226	0f 57 c0	 xorps	 xmm0, xmm0
  00229	f3 0f 58 45 ec	 addss	 xmm0, DWORD PTR _noise$[ebp]
  0022e	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  00233	c1 e0 00	 shl	 eax, 0
  00236	f3 0f 11 84 05
	04 ff ff ff	 movss	 DWORD PTR _quad$4[ebp+eax+28], xmm0

; 766  : 
; 767  : 		quad[2].i = x2;

  0023f	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  00244	d1 e0		 shl	 eax, 1
  00246	f3 0f 10 45 f4	 movss	 xmm0, DWORD PTR _x2$[ebp]
  0024b	f3 0f 11 84 05
	f8 fe ff ff	 movss	 DWORD PTR _quad$4[ebp+eax+16], xmm0

; 768  : 		quad[2].j = y2;

  00254	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  00259	d1 e0		 shl	 eax, 1
  0025b	f3 0f 10 45 f0	 movss	 xmm0, DWORD PTR _y2$[ebp]
  00260	f3 0f 11 84 05
	fc fe ff ff	 movss	 DWORD PTR _quad$4[ebp+eax+20], xmm0

; 769  : 		quad[2].z = 0.5;

  00269	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  0026e	d1 e0		 shl	 eax, 1
  00270	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3f000000
  00278	f3 0f 11 84 05
	f0 fe ff ff	 movss	 DWORD PTR _quad$4[ebp+eax+8], xmm0

; 770  : 		quad[2].q = 0.5;

  00281	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  00286	d1 e0		 shl	 eax, 1
  00288	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3f000000
  00290	f3 0f 11 84 05
	f4 fe ff ff	 movss	 DWORD PTR _quad$4[ebp+eax+12], xmm0

; 771  : 		quad[2].u = 2 + noise;

  00299	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@40000000
  002a1	f3 0f 58 45 ec	 addss	 xmm0, DWORD PTR _noise$[ebp]
  002a6	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  002ab	d1 e0		 shl	 eax, 1
  002ad	f3 0f 11 84 05
	00 ff ff ff	 movss	 DWORD PTR _quad$4[ebp+eax+24], xmm0

; 772  : 		quad[2].v = 2 + noise;

  002b6	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@40000000
  002be	f3 0f 58 45 ec	 addss	 xmm0, DWORD PTR _noise$[ebp]
  002c3	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  002c8	d1 e0		 shl	 eax, 1
  002ca	f3 0f 11 84 05
	04 ff ff ff	 movss	 DWORD PTR _quad$4[ebp+eax+28], xmm0

; 773  : 
; 774  : 		quad[3].i = x1;

  002d3	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  002d8	6b c8 03	 imul	 ecx, eax, 3
  002db	f3 0f 10 45 fc	 movss	 xmm0, DWORD PTR _x1$[ebp]
  002e0	f3 0f 11 84 0d
	f8 fe ff ff	 movss	 DWORD PTR _quad$4[ebp+ecx+16], xmm0

; 775  : 		quad[3].j = y2;

  002e9	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  002ee	6b c8 03	 imul	 ecx, eax, 3
  002f1	f3 0f 10 45 f0	 movss	 xmm0, DWORD PTR _y2$[ebp]
  002f6	f3 0f 11 84 0d
	fc fe ff ff	 movss	 DWORD PTR _quad$4[ebp+ecx+20], xmm0

; 776  : 		quad[3].z = 0.5;

  002ff	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  00304	6b c8 03	 imul	 ecx, eax, 3
  00307	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3f000000
  0030f	f3 0f 11 84 0d
	f0 fe ff ff	 movss	 DWORD PTR _quad$4[ebp+ecx+8], xmm0

; 777  : 		quad[3].q = 0.5;

  00318	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  0031d	6b c8 03	 imul	 ecx, eax, 3
  00320	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3f000000
  00328	f3 0f 11 84 0d
	f4 fe ff ff	 movss	 DWORD PTR _quad$4[ebp+ecx+12], xmm0

; 778  : 		quad[3].u = 0 + noise;

  00331	0f 57 c0	 xorps	 xmm0, xmm0
  00334	f3 0f 58 45 ec	 addss	 xmm0, DWORD PTR _noise$[ebp]
  00339	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  0033e	6b c8 03	 imul	 ecx, eax, 3
  00341	f3 0f 11 84 0d
	00 ff ff ff	 movss	 DWORD PTR _quad$4[ebp+ecx+24], xmm0

; 779  : 		quad[3].v = 2 + noise;

  0034a	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@40000000
  00352	f3 0f 58 45 ec	 addss	 xmm0, DWORD PTR _noise$[ebp]
  00357	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  0035c	6b c8 03	 imul	 ecx, eax, 3
  0035f	f3 0f 11 84 0d
	04 ff ff ff	 movss	 DWORD PTR _quad$4[ebp+ecx+28], xmm0

; 780  : 
; 781  : 		quad[0].next_vertex = &quad[1];

  00368	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  0036d	c1 e0 00	 shl	 eax, 0
  00370	8d 8c 05 e8 fe
	ff ff		 lea	 ecx, DWORD PTR _quad$4[ebp+eax]
  00377	ba 40 00 00 00	 mov	 edx, 64			; 00000040H
  0037c	6b c2 00	 imul	 eax, edx, 0
  0037f	89 8c 05 10 ff
	ff ff		 mov	 DWORD PTR _quad$4[ebp+eax+40], ecx

; 782  : 		quad[1].next_vertex = &quad[2];

  00386	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  0038b	d1 e0		 shl	 eax, 1
  0038d	8d 8c 05 e8 fe
	ff ff		 lea	 ecx, DWORD PTR _quad$4[ebp+eax]
  00394	ba 40 00 00 00	 mov	 edx, 64			; 00000040H
  00399	c1 e2 00	 shl	 edx, 0
  0039c	89 8c 15 10 ff
	ff ff		 mov	 DWORD PTR _quad$4[ebp+edx+40], ecx

; 783  : 		quad[2].next_vertex = &quad[3];

  003a3	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  003a8	6b c8 03	 imul	 ecx, eax, 3
  003ab	8d 94 0d e8 fe
	ff ff		 lea	 edx, DWORD PTR _quad$4[ebp+ecx]
  003b2	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  003b7	d1 e0		 shl	 eax, 1
  003b9	89 94 05 10 ff
	ff ff		 mov	 DWORD PTR _quad$4[ebp+eax+40], edx

; 784  : 		quad[3].next_vertex = NULL;

  003c0	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  003c5	6b c8 03	 imul	 ecx, eax, 3
  003c8	c7 84 0d 10 ff
	ff ff 00 00 00
	00		 mov	 DWORD PTR _quad$4[ebp+ecx+40], 0

; 785  : 
; 786  : 		draw_wbuffered_flat_shaded_textured_polygon ( quad, colour, specular );

  003d3	8b 85 e0 fe ff
	ff		 mov	 eax, DWORD PTR _specular$2[ebp]
  003d9	50		 push	 eax
  003da	8b 8d e4 fe ff
	ff		 mov	 ecx, DWORD PTR _colour$3[ebp]
  003e0	51		 push	 ecx
  003e1	8d 95 e8 fe ff
	ff		 lea	 edx, DWORD PTR _quad$4[ebp]
  003e7	52		 push	 edx
  003e8	e8 00 00 00 00	 call	 ?draw_wbuffered_flat_shaded_textured_polygon@@YGXPAUVERTEX@@UREAL_COLOUR@@1@Z ; draw_wbuffered_flat_shaded_textured_polygon

; 787  : 
; 788  : 		set_d3d_transparency_off ();

  003ed	e8 00 00 00 00	 call	 ?set_d3d_transparency_off@@YGXXZ ; set_d3d_transparency_off

; 789  : 
; 790  : 		set_d3d_zbuffer_comparison ( TRUE );

  003f2	6a 01		 push	 1
  003f4	e8 00 00 00 00	 call	 ?set_d3d_zbuffer_comparison@@YGXH@Z ; set_d3d_zbuffer_comparison

; 791  : 
; 792  : 		set_d3d_culling ( TRUE );

  003f9	6a 01		 push	 1
  003fb	e8 00 00 00 00	 call	 ?set_d3d_culling@@YGXH@Z ; set_d3d_culling

; 793  : 
; 794  : 		end_3d_scene ();

  00400	e8 00 00 00 00	 call	 ?end_3d_scene@@YGXXZ	; end_3d_scene
$LN3@render_inf:
$LN1@render_inf:

; 795  : 	}
; 796  : }

  00405	5f		 pop	 edi
  00406	5e		 pop	 esi
  00407	5b		 pop	 ebx
  00408	8b e5		 mov	 esp, ebp
  0040a	5d		 pop	 ebp
  0040b	c2 04 00	 ret	 4
?render_infrared_interference@@YGXH@Z ENDP		; render_infrared_interference
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\app3d\3d_draw.c
;	COMDAT ?draw_application_3d_scene_to_texture@@YGXPAUSCREEN@@M@Z
_TEXT	SEGMENT
_scr$ = 8						; size = 4
_size$ = 12						; size = 4
?draw_application_3d_scene_to_texture@@YGXPAUSCREEN@@M@Z PROC ; draw_application_3d_scene_to_texture, COMDAT

; 644  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 645  : 	set_3d_viewport ( main_3d_env, 0.0, 0.0, ( size - 0.001 ), ( size - 0.001 ) );

  00009	f3 0f 5a 45 0c	 cvtss2sd xmm0, DWORD PTR _size$[ebp]
  0000e	f2 0f 5c 05 00
	00 00 00	 subsd	 xmm0, QWORD PTR __real@3f50624dd2f1a9fc
  00016	f2 0f 5a c0	 cvtsd2ss xmm0, xmm0
  0001a	51		 push	 ecx
  0001b	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00020	f3 0f 5a 45 0c	 cvtss2sd xmm0, DWORD PTR _size$[ebp]
  00025	f2 0f 5c 05 00
	00 00 00	 subsd	 xmm0, QWORD PTR __real@3f50624dd2f1a9fc
  0002d	f2 0f 5a c0	 cvtsd2ss xmm0, xmm0
  00031	51		 push	 ecx
  00032	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00037	51		 push	 ecx
  00038	0f 57 c0	 xorps	 xmm0, xmm0
  0003b	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00040	51		 push	 ecx
  00041	0f 57 c0	 xorps	 xmm0, xmm0
  00044	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00049	a1 00 00 00 00	 mov	 eax, DWORD PTR ?main_3d_env@@3PAUENV_3D@@A ; main_3d_env
  0004e	50		 push	 eax
  0004f	e8 00 00 00 00	 call	 ?set_3d_viewport@@YGXPAUENV_3D@@MMMM@Z ; set_3d_viewport

; 646  : 	set_3d_origin ( main_3d_env, ( size / 2 ), ( size / 2 ) );

  00054	f3 0f 10 45 0c	 movss	 xmm0, DWORD PTR _size$[ebp]
  00059	f3 0f 5e 05 00
	00 00 00	 divss	 xmm0, DWORD PTR __real@40000000
  00061	51		 push	 ecx
  00062	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00067	f3 0f 10 45 0c	 movss	 xmm0, DWORD PTR _size$[ebp]
  0006c	f3 0f 5e 05 00
	00 00 00	 divss	 xmm0, DWORD PTR __real@40000000
  00074	51		 push	 ecx
  00075	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  0007a	a1 00 00 00 00	 mov	 eax, DWORD PTR ?main_3d_env@@3PAUENV_3D@@A ; main_3d_env
  0007f	50		 push	 eax
  00080	e8 00 00 00 00	 call	 ?set_3d_origin@@YGXPAUENV_3D@@MM@Z ; set_3d_origin

; 647  : 	set_3d_active_environment (main_3d_env);

  00085	a1 00 00 00 00	 mov	 eax, DWORD PTR ?main_3d_env@@3PAUENV_3D@@A ; main_3d_env
  0008a	50		 push	 eax
  0008b	e8 00 00 00 00	 call	 ?set_3d_active_environment@@YGXPAUENV_3D@@@Z ; set_3d_active_environment

; 648  : 
; 649  : 	set_3d_render_target ( scr );

  00090	8b 45 08	 mov	 eax, DWORD PTR _scr$[ebp]
  00093	50		 push	 eax
  00094	e8 00 00 00 00	 call	 ?set_3d_render_target@@YGHPAUSCREEN@@@Z ; set_3d_render_target

; 650  : 	set_active_screen ( scr );

  00099	8b 45 08	 mov	 eax, DWORD PTR _scr$[ebp]
  0009c	50		 push	 eax
  0009d	e8 00 00 00 00	 call	 ?set_active_screen@@YGHPAUSCREEN@@@Z ; set_active_screen

; 651  : 
; 652  : 	if ( begin_3d_scene () )

  000a2	e8 00 00 00 00	 call	 ?begin_3d_scene@@YGHXZ	; begin_3d_scene
  000a7	85 c0		 test	 eax, eax
  000a9	74 32		 je	 SHORT $LN2@draw_appli

; 653  : 	{
; 654  : 	
; 655  : 		clear_zbuffer_screen ();

  000ab	e8 00 00 00 00	 call	 ?clear_zbuffer_screen@@YGXXZ ; clear_zbuffer_screen

; 656  : 		clear_zbuffer_screen_using_viewport ();

  000b0	e8 00 00 00 00	 call	 ?clear_zbuffer_screen_using_viewport@@YGXXZ ; clear_zbuffer_screen_using_viewport

; 657  : 		scan_3d_terrain ();

  000b5	e8 00 00 00 00	 call	 ?scan_3d_terrain@@YGXXZ	; scan_3d_terrain

; 658  : 		scan_local_entity_3d_objects (&main_vp);

  000ba	68 00 00 00 00	 push	 OFFSET ?main_vp@@3UVIEWPOINT@@A ; main_vp
  000bf	e8 00 00 00 00	 call	 ?scan_local_entity_3d_objects@@YGXPAUVIEWPOINT@@@Z ; scan_local_entity_3d_objects

; 659  : 		draw_3d_horizon ();

  000c4	e8 00 00 00 00	 call	 ?draw_3d_horizon@@YGXXZ	; draw_3d_horizon

; 660  : 		draw_3d_sun ();

  000c9	e8 00 00 00 00	 call	 ?draw_3d_sun@@YGXXZ	; draw_3d_sun

; 661  : 		draw_3d_moon ();

  000ce	e8 00 00 00 00	 call	 ?draw_3d_moon@@YGXXZ	; draw_3d_moon

; 662  : 		draw_3d_scene ();

  000d3	e8 00 00 00 00	 call	 ?draw_3d_scene@@YGXXZ	; draw_3d_scene

; 663  : 	
; 664  : 		end_3d_scene ();

  000d8	e8 00 00 00 00	 call	 ?end_3d_scene@@YGXXZ	; end_3d_scene
$LN2@draw_appli:

; 665  : 	}
; 666  : 
; 667  : 	finalise_3d_render_target_texture ( scr );

  000dd	8b 45 08	 mov	 eax, DWORD PTR _scr$[ebp]
  000e0	50		 push	 eax
  000e1	e8 00 00 00 00	 call	 ?finalise_3d_render_target_texture@@YGXPAUSCREEN@@@Z ; finalise_3d_render_target_texture

; 668  : 
; 669  : 	set_3d_render_target ( video_screen );

  000e6	a1 00 00 00 00	 mov	 eax, DWORD PTR ?video_screen@@3PAUSCREEN@@A ; video_screen
  000eb	50		 push	 eax
  000ec	e8 00 00 00 00	 call	 ?set_3d_render_target@@YGHPAUSCREEN@@@Z ; set_3d_render_target

; 670  : 	set_active_screen ( video_screen );

  000f1	a1 00 00 00 00	 mov	 eax, DWORD PTR ?video_screen@@3PAUSCREEN@@A ; video_screen
  000f6	50		 push	 eax
  000f7	e8 00 00 00 00	 call	 ?set_active_screen@@YGHPAUSCREEN@@@Z ; set_active_screen

; 671  : 
; 672  : 	set_3d_viewport ( main_3d_env, full_screen_x_min, full_screen_y_min, full_screen_x_max, full_screen_y_max );

  000fc	51		 push	 ecx
  000fd	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR ?full_screen_y_max@@3MA
  00105	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  0010a	51		 push	 ecx
  0010b	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR ?full_screen_x_max@@3MA
  00113	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00118	51		 push	 ecx
  00119	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR ?full_screen_y_min@@3MA
  00121	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00126	51		 push	 ecx
  00127	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR ?full_screen_x_min@@3MA
  0012f	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00134	a1 00 00 00 00	 mov	 eax, DWORD PTR ?main_3d_env@@3PAUENV_3D@@A ; main_3d_env
  00139	50		 push	 eax
  0013a	e8 00 00 00 00	 call	 ?set_3d_viewport@@YGXPAUENV_3D@@MMMM@Z ; set_3d_viewport

; 673  : 	set_3d_origin ( main_3d_env, full_screen_x_min + (full_screen_width / 2.0), full_screen_y_min + (full_screen_height / 2.0) );

  0013f	f3 0f 5a 05 00
	00 00 00	 cvtss2sd xmm0, DWORD PTR ?full_screen_y_min@@3MA
  00147	f3 0f 5a 0d 00
	00 00 00	 cvtss2sd xmm1, DWORD PTR ?full_screen_height@@3MA
  0014f	f2 0f 5e 0d 00
	00 00 00	 divsd	 xmm1, QWORD PTR __real@4000000000000000
  00157	f2 0f 58 c1	 addsd	 xmm0, xmm1
  0015b	f2 0f 5a c0	 cvtsd2ss xmm0, xmm0
  0015f	51		 push	 ecx
  00160	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00165	f3 0f 5a 05 00
	00 00 00	 cvtss2sd xmm0, DWORD PTR ?full_screen_x_min@@3MA
  0016d	f3 0f 5a 0d 00
	00 00 00	 cvtss2sd xmm1, DWORD PTR ?full_screen_width@@3MA
  00175	f2 0f 5e 0d 00
	00 00 00	 divsd	 xmm1, QWORD PTR __real@4000000000000000
  0017d	f2 0f 58 c1	 addsd	 xmm0, xmm1
  00181	f2 0f 5a c0	 cvtsd2ss xmm0, xmm0
  00185	51		 push	 ecx
  00186	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  0018b	a1 00 00 00 00	 mov	 eax, DWORD PTR ?main_3d_env@@3PAUENV_3D@@A ; main_3d_env
  00190	50		 push	 eax
  00191	e8 00 00 00 00	 call	 ?set_3d_origin@@YGXPAUENV_3D@@MM@Z ; set_3d_origin

; 674  : }

  00196	5f		 pop	 edi
  00197	5e		 pop	 esi
  00198	5b		 pop	 ebx
  00199	8b e5		 mov	 esp, ebp
  0019b	5d		 pop	 ebp
  0019c	c2 08 00	 ret	 8
?draw_application_3d_scene_to_texture@@YGXPAUSCREEN@@M@Z ENDP ; draw_application_3d_scene_to_texture
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\app3d\3d_draw.c
;	COMDAT ?draw_application_ui_3d_scene@@YGXXZ
_TEXT	SEGMENT
tv252 = -76						; size = 4
tv235 = -76						; size = 4
tv178 = -72						; size = 4
tv155 = -72						; size = 4
tv133 = -72						; size = 4
tv79 = -72						; size = 4
tv170 = -68						; size = 4
tv147 = -68						; size = 4
tv93 = -68						; size = 4
tv71 = -68						; size = 4
?draw_application_ui_3d_scene@@YGXXZ PROC		; draw_application_ui_3d_scene, COMDAT

; 545  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 4c	 sub	 esp, 76			; 0000004cH
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 546  : 
; 547  : 	set_3d_active_environment (main_3d_env);

  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ?main_3d_env@@3PAUENV_3D@@A ; main_3d_env
  0000e	50		 push	 eax
  0000f	e8 00 00 00 00	 call	 ?set_3d_active_environment@@YGXPAUENV_3D@@@Z ; set_3d_active_environment

; 548  : 
; 549  : 	set_3d_weathermode (main_3d_env, (weathermodes) get_local_entity_int_value (get_session_entity (), INT_TYPE_WEATHER_MODE));

  00014	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?session_entity@@3PAUENTITY@@A, 0 ; session_entity
  0001b	74 0c		 je	 SHORT $LN5@draw_appli
  0001d	a1 00 00 00 00	 mov	 eax, DWORD PTR ?session_entity@@3PAUENTITY@@A ; session_entity
  00022	8b 08		 mov	 ecx, DWORD PTR [eax]
  00024	89 4d bc	 mov	 DWORD PTR tv71[ebp], ecx
  00027	eb 21		 jmp	 SHORT $LN6@draw_appli
$LN5@draw_appli:
  00029	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??draw_application_ui_3d_scene@@YGXXZ@4JA
  0002f	83 c2 04	 add	 edx, 4
  00032	52		 push	 edx
  00033	68 00 00 00 00	 push	 OFFSET ??_C@_0DM@CKNBBMJN@c?3?2users?2nhv90?2projects?2eech?2ap@
  00038	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  0003d	50		 push	 eax
  0003e	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00043	c7 45 bc 00 00
	00 00		 mov	 DWORD PTR tv71[ebp], 0
$LN6@draw_appli:
  0004a	b9 01 00 00 00	 mov	 ecx, 1
  0004f	85 c9		 test	 ecx, ecx
  00051	74 09		 je	 SHORT $LN7@draw_appli
  00053	c7 45 b8 13 01
	00 00		 mov	 DWORD PTR tv79[ebp], 275 ; 00000113H
  0005a	eb 21		 jmp	 SHORT $LN8@draw_appli
$LN7@draw_appli:
  0005c	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??draw_application_ui_3d_scene@@YGXXZ@4JA
  00062	83 c2 04	 add	 edx, 4
  00065	52		 push	 edx
  00066	68 00 00 00 00	 push	 OFFSET ??_C@_0DM@CKNBBMJN@c?3?2users?2nhv90?2projects?2eech?2ap@
  0006b	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_int_type_message@@3PBDB ; overload_invalid_int_type_message
  00070	50		 push	 eax
  00071	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00076	c7 45 b8 00 00
	00 00		 mov	 DWORD PTR tv79[ebp], 0
$LN8@draw_appli:
  0007d	68 13 01 00 00	 push	 275			; 00000113H
  00082	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?session_entity@@3PAUENTITY@@A ; session_entity
  00088	51		 push	 ecx
  00089	69 55 bc 5c 04
	00 00		 imul	 edx, DWORD PTR tv71[ebp], 1116
  00090	8b 45 b8	 mov	 eax, DWORD PTR tv79[ebp]
  00093	8b 8c 82 00 00
	00 00		 mov	 ecx, DWORD PTR ?fn_get_local_entity_int_value@@3PAY0BBH@P6GHPAUENTITY@@W4INT_TYPES@@@ZA[edx+eax*4]
  0009a	ff d1		 call	 ecx
  0009c	50		 push	 eax
  0009d	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?main_3d_env@@3PAUENV_3D@@A ; main_3d_env
  000a3	52		 push	 edx
  000a4	e8 00 00 00 00	 call	 ?set_3d_weathermode@@YGXPAUENV_3D@@W4WEATHERMODES@@@Z ; set_3d_weathermode

; 550  : 
; 551  : 	set_3d_target_weathermode (main_3d_env, (weathermodes) get_local_entity_int_value (get_session_entity (), INT_TYPE_TARGET_WEATHER_MODE));

  000a9	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?session_entity@@3PAUENTITY@@A, 0 ; session_entity
  000b0	74 0c		 je	 SHORT $LN9@draw_appli
  000b2	a1 00 00 00 00	 mov	 eax, DWORD PTR ?session_entity@@3PAUENTITY@@A ; session_entity
  000b7	8b 08		 mov	 ecx, DWORD PTR [eax]
  000b9	89 4d bc	 mov	 DWORD PTR tv93[ebp], ecx
  000bc	eb 21		 jmp	 SHORT $LN10@draw_appli
$LN9@draw_appli:
  000be	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??draw_application_ui_3d_scene@@YGXXZ@4JA
  000c4	83 c2 06	 add	 edx, 6
  000c7	52		 push	 edx
  000c8	68 00 00 00 00	 push	 OFFSET ??_C@_0DM@CKNBBMJN@c?3?2users?2nhv90?2projects?2eech?2ap@
  000cd	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  000d2	50		 push	 eax
  000d3	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  000d8	c7 45 bc 00 00
	00 00		 mov	 DWORD PTR tv93[ebp], 0
$LN10@draw_appli:
  000df	b9 01 00 00 00	 mov	 ecx, 1
  000e4	85 c9		 test	 ecx, ecx
  000e6	74 09		 je	 SHORT $LN11@draw_appli
  000e8	c7 45 b8 d7 00
	00 00		 mov	 DWORD PTR tv133[ebp], 215 ; 000000d7H
  000ef	eb 21		 jmp	 SHORT $LN12@draw_appli
$LN11@draw_appli:
  000f1	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??draw_application_ui_3d_scene@@YGXXZ@4JA
  000f7	83 c2 06	 add	 edx, 6
  000fa	52		 push	 edx
  000fb	68 00 00 00 00	 push	 OFFSET ??_C@_0DM@CKNBBMJN@c?3?2users?2nhv90?2projects?2eech?2ap@
  00100	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_int_type_message@@3PBDB ; overload_invalid_int_type_message
  00105	50		 push	 eax
  00106	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  0010b	c7 45 b8 00 00
	00 00		 mov	 DWORD PTR tv133[ebp], 0
$LN12@draw_appli:
  00112	68 d7 00 00 00	 push	 215			; 000000d7H
  00117	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?session_entity@@3PAUENTITY@@A ; session_entity
  0011d	51		 push	 ecx
  0011e	69 55 bc 5c 04
	00 00		 imul	 edx, DWORD PTR tv93[ebp], 1116
  00125	8b 45 b8	 mov	 eax, DWORD PTR tv133[ebp]
  00128	8b 8c 82 00 00
	00 00		 mov	 ecx, DWORD PTR ?fn_get_local_entity_int_value@@3PAY0BBH@P6GHPAUENTITY@@W4INT_TYPES@@@ZA[edx+eax*4]
  0012f	ff d1		 call	 ecx
  00131	50		 push	 eax
  00132	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?main_3d_env@@3PAUENV_3D@@A ; main_3d_env
  00138	52		 push	 edx
  00139	e8 00 00 00 00	 call	 ?set_3d_target_weathermode@@YGXPAUENV_3D@@W4WEATHERMODES@@@Z ; set_3d_target_weathermode

; 552  : 
; 553  : 	set_3d_target_weathermode_transitional_status (main_3d_env, get_local_entity_float_value (get_session_entity (), FLOAT_TYPE_WEATHER_MODE_TRANSITIONAL_STATUS));

  0013e	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?session_entity@@3PAUENTITY@@A, 0 ; session_entity
  00145	74 0c		 je	 SHORT $LN13@draw_appli
  00147	a1 00 00 00 00	 mov	 eax, DWORD PTR ?session_entity@@3PAUENTITY@@A ; session_entity
  0014c	8b 08		 mov	 ecx, DWORD PTR [eax]
  0014e	89 4d bc	 mov	 DWORD PTR tv147[ebp], ecx
  00151	eb 21		 jmp	 SHORT $LN14@draw_appli
$LN13@draw_appli:
  00153	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??draw_application_ui_3d_scene@@YGXXZ@4JA
  00159	83 c2 08	 add	 edx, 8
  0015c	52		 push	 edx
  0015d	68 00 00 00 00	 push	 OFFSET ??_C@_0DM@CKNBBMJN@c?3?2users?2nhv90?2projects?2eech?2ap@
  00162	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  00167	50		 push	 eax
  00168	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  0016d	c7 45 bc 00 00
	00 00		 mov	 DWORD PTR tv147[ebp], 0
$LN14@draw_appli:
  00174	b9 01 00 00 00	 mov	 ecx, 1
  00179	85 c9		 test	 ecx, ecx
  0017b	74 09		 je	 SHORT $LN15@draw_appli
  0017d	c7 45 b8 9c 00
	00 00		 mov	 DWORD PTR tv155[ebp], 156 ; 0000009cH
  00184	eb 21		 jmp	 SHORT $LN16@draw_appli
$LN15@draw_appli:
  00186	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??draw_application_ui_3d_scene@@YGXXZ@4JA
  0018c	83 c2 08	 add	 edx, 8
  0018f	52		 push	 edx
  00190	68 00 00 00 00	 push	 OFFSET ??_C@_0DM@CKNBBMJN@c?3?2users?2nhv90?2projects?2eech?2ap@
  00195	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_float_type_message@@3PBDB ; overload_invalid_float_type_message
  0019a	50		 push	 eax
  0019b	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  001a0	c7 45 b8 00 00
	00 00		 mov	 DWORD PTR tv155[ebp], 0
$LN16@draw_appli:
  001a7	68 9c 00 00 00	 push	 156			; 0000009cH
  001ac	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?session_entity@@3PAUENTITY@@A ; session_entity
  001b2	51		 push	 ecx
  001b3	69 55 bc bc 02
	00 00		 imul	 edx, DWORD PTR tv147[ebp], 700
  001ba	8b 45 b8	 mov	 eax, DWORD PTR tv155[ebp]
  001bd	8b 8c 82 00 00
	00 00		 mov	 ecx, DWORD PTR ?fn_get_local_entity_float_value@@3PAY0KP@P6GMPAUENTITY@@W4FLOAT_TYPES@@@ZA[edx+eax*4]
  001c4	ff d1		 call	 ecx
  001c6	d9 5d b4	 fstp	 DWORD PTR tv235[ebp]
  001c9	f3 0f 10 45 b4	 movss	 xmm0, DWORD PTR tv235[ebp]
  001ce	51		 push	 ecx
  001cf	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  001d4	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?main_3d_env@@3PAUENV_3D@@A ; main_3d_env
  001da	52		 push	 edx
  001db	e8 00 00 00 00	 call	 ?set_3d_target_weathermode_transitional_status@@YGXPAUENV_3D@@M@Z ; set_3d_target_weathermode_transitional_status

; 554  : 
; 555  : 	set_3d_time_of_day (main_3d_env, get_local_entity_float_value (get_session_entity (), FLOAT_TYPE_TIME_OF_DAY));

  001e0	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?session_entity@@3PAUENTITY@@A, 0 ; session_entity
  001e7	74 0c		 je	 SHORT $LN17@draw_appli
  001e9	a1 00 00 00 00	 mov	 eax, DWORD PTR ?session_entity@@3PAUENTITY@@A ; session_entity
  001ee	8b 08		 mov	 ecx, DWORD PTR [eax]
  001f0	89 4d bc	 mov	 DWORD PTR tv170[ebp], ecx
  001f3	eb 21		 jmp	 SHORT $LN18@draw_appli
$LN17@draw_appli:
  001f5	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??draw_application_ui_3d_scene@@YGXXZ@4JA
  001fb	83 c2 0a	 add	 edx, 10			; 0000000aH
  001fe	52		 push	 edx
  001ff	68 00 00 00 00	 push	 OFFSET ??_C@_0DM@CKNBBMJN@c?3?2users?2nhv90?2projects?2eech?2ap@
  00204	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  00209	50		 push	 eax
  0020a	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  0020f	c7 45 bc 00 00
	00 00		 mov	 DWORD PTR tv170[ebp], 0
$LN18@draw_appli:
  00216	b9 01 00 00 00	 mov	 ecx, 1
  0021b	85 c9		 test	 ecx, ecx
  0021d	74 09		 je	 SHORT $LN19@draw_appli
  0021f	c7 45 b8 8e 00
	00 00		 mov	 DWORD PTR tv178[ebp], 142 ; 0000008eH
  00226	eb 21		 jmp	 SHORT $LN20@draw_appli
$LN19@draw_appli:
  00228	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??draw_application_ui_3d_scene@@YGXXZ@4JA
  0022e	83 c2 0a	 add	 edx, 10			; 0000000aH
  00231	52		 push	 edx
  00232	68 00 00 00 00	 push	 OFFSET ??_C@_0DM@CKNBBMJN@c?3?2users?2nhv90?2projects?2eech?2ap@
  00237	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_float_type_message@@3PBDB ; overload_invalid_float_type_message
  0023c	50		 push	 eax
  0023d	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00242	c7 45 b8 00 00
	00 00		 mov	 DWORD PTR tv178[ebp], 0
$LN20@draw_appli:
  00249	68 8e 00 00 00	 push	 142			; 0000008eH
  0024e	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?session_entity@@3PAUENTITY@@A ; session_entity
  00254	51		 push	 ecx
  00255	69 55 bc bc 02
	00 00		 imul	 edx, DWORD PTR tv170[ebp], 700
  0025c	8b 45 b8	 mov	 eax, DWORD PTR tv178[ebp]
  0025f	8b 8c 82 00 00
	00 00		 mov	 ecx, DWORD PTR ?fn_get_local_entity_float_value@@3PAY0KP@P6GMPAUENTITY@@W4FLOAT_TYPES@@@ZA[edx+eax*4]
  00266	ff d1		 call	 ecx
  00268	d9 5d b4	 fstp	 DWORD PTR tv252[ebp]
  0026b	f3 0f 10 45 b4	 movss	 xmm0, DWORD PTR tv252[ebp]
  00270	51		 push	 ecx
  00271	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00276	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?main_3d_env@@3PAUENV_3D@@A ; main_3d_env
  0027c	52		 push	 edx
  0027d	e8 00 00 00 00	 call	 ?set_3d_time_of_day@@YGXPAUENV_3D@@M@Z ; set_3d_time_of_day

; 556  : 
; 557  : 	set_main_3d_rain_wind ();

  00282	e8 00 00 00 00	 call	 ?set_main_3d_rain_wind@@YGXXZ ; set_main_3d_rain_wind

; 558  : 
; 559  : 	recalculate_3d_environment_settings (main_3d_env);

  00287	a1 00 00 00 00	 mov	 eax, DWORD PTR ?main_3d_env@@3PAUENV_3D@@A ; main_3d_env
  0028c	50		 push	 eax
  0028d	e8 00 00 00 00	 call	 ?recalculate_3d_environment_settings@@YGXPAUENV_3D@@@Z ; recalculate_3d_environment_settings

; 560  : 
; 561  : 	clear_zbuffer_screen ();

  00292	e8 00 00 00 00	 call	 ?clear_zbuffer_screen@@YGXXZ ; clear_zbuffer_screen

; 562  : 
; 563  : 	scan_3d_terrain ();

  00297	e8 00 00 00 00	 call	 ?scan_3d_terrain@@YGXXZ	; scan_3d_terrain

; 564  : 
; 565  : 	if ( get_3d_render_filter ( main_3d_env ) == INFRARED_OFF )

  0029c	a1 00 00 00 00	 mov	 eax, DWORD PTR ?main_3d_env@@3PAUENV_3D@@A ; main_3d_env
  002a1	50		 push	 eax
  002a2	e8 00 00 00 00	 call	 ?get_3d_render_filter@@YG?AW4RENDER_FILTERS@@PAUENV_3D@@@Z ; get_3d_render_filter
  002a7	83 f8 01	 cmp	 eax, 1
  002aa	75 05		 jne	 SHORT $LN2@draw_appli

; 566  : 	{
; 567  : 
; 568  : 		scan_3d_clouds ();

  002ac	e8 00 00 00 00	 call	 ?scan_3d_clouds@@YGXXZ	; scan_3d_clouds
$LN2@draw_appli:

; 569  : 	}
; 570  : 
; 571  : 	scan_local_entity_3d_objects (&main_vp);

  002b1	68 00 00 00 00	 push	 OFFSET ?main_vp@@3UVIEWPOINT@@A ; main_vp
  002b6	e8 00 00 00 00	 call	 ?scan_local_entity_3d_objects@@YGXPAUVIEWPOINT@@@Z ; scan_local_entity_3d_objects

; 572  : 
; 573  : 	draw_3d_horizon ();

  002bb	e8 00 00 00 00	 call	 ?draw_3d_horizon@@YGXXZ	; draw_3d_horizon

; 574  : 
; 575  : 	if ( get_3d_render_filter ( main_3d_env ) == INFRARED_OFF )

  002c0	a1 00 00 00 00	 mov	 eax, DWORD PTR ?main_3d_env@@3PAUENV_3D@@A ; main_3d_env
  002c5	50		 push	 eax
  002c6	e8 00 00 00 00	 call	 ?get_3d_render_filter@@YG?AW4RENDER_FILTERS@@PAUENV_3D@@@Z ; get_3d_render_filter
  002cb	83 f8 01	 cmp	 eax, 1
  002ce	75 0f		 jne	 SHORT $LN3@draw_appli

; 576  : 	{
; 577  : 
; 578  : 		draw_3d_stars ();

  002d0	e8 00 00 00 00	 call	 ?draw_3d_stars@@YGXXZ	; draw_3d_stars

; 579  : 
; 580  : 		draw_3d_sun ();

  002d5	e8 00 00 00 00	 call	 ?draw_3d_sun@@YGXXZ	; draw_3d_sun

; 581  : 
; 582  : 		draw_3d_moon ();

  002da	e8 00 00 00 00	 call	 ?draw_3d_moon@@YGXXZ	; draw_3d_moon
$LN3@draw_appli:

; 583  : 	}
; 584  : 
; 585  : 	draw_3d_scene ();

  002df	e8 00 00 00 00	 call	 ?draw_3d_scene@@YGXXZ	; draw_3d_scene

; 586  : /*
; 587  : 	if ( get_3d_infrared_mode ( main_3d_env ) == INFRARED_OFF )
; 588  : 	{
; 589  : 
; 590  : 		draw_3d_rain ();
; 591  : 
; 592  : 		draw_3d_lightning_strikes ();
; 593  : 	}
; 594  : */
; 595  : /*	if ( get_3d_infrared_mode ( main_3d_env ) == INFRARED_ON )
; 596  : 	{
; 597  : 
; 598  : 		switch ( current_3d_noise_level )
; 599  : 		{
; 600  : 
; 601  : 			case DISPLAY_3D_NOISE_LEVEL_NONE:
; 602  : 			{
; 603  : 
; 604  : 				render_infrared_interference ( 64 );
; 605  : 
; 606  : 				break;
; 607  : 			}
; 608  : 
; 609  : 			case DISPLAY_3D_NOISE_LEVEL_LOW:
; 610  : 			{
; 611  : 
; 612  : 				render_infrared_interference ( 96 );
; 613  : 
; 614  : 				break;
; 615  : 			}
; 616  : 
; 617  : 			case DISPLAY_3D_NOISE_LEVEL_MEDIUM:
; 618  : 			{
; 619  : 
; 620  : 				render_infrared_interference ( 168 );
; 621  : 
; 622  : 				break;
; 623  : 			}
; 624  : 
; 625  : 			case DISPLAY_3D_NOISE_LEVEL_HIGH:
; 626  : 			{
; 627  : 
; 628  : 				render_infrared_interference ( 240 );
; 629  : 
; 630  : 				break;
; 631  : 			}
; 632  : 		}
; 633  : 	}
; 634  : 	*/
; 635  : 
; 636  : 	update_application_3d_scene ();

  002e4	e8 00 00 00 00	 call	 ?update_application_3d_scene@@YGXXZ ; update_application_3d_scene

; 637  : }

  002e9	5f		 pop	 edi
  002ea	5e		 pop	 esi
  002eb	5b		 pop	 ebx
  002ec	8b e5		 mov	 esp, ebp
  002ee	5d		 pop	 ebp
  002ef	c3		 ret	 0
?draw_application_ui_3d_scene@@YGXXZ ENDP		; draw_application_ui_3d_scene
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\app3d\3d_draw.c
;	COMDAT ?draw_application_highres_screen@@YGXHHHH@Z
_TEXT	SEGMENT
tv346 = -108						; size = 4
tv329 = -108						; size = 4
tv239 = -108						; size = 4
tv233 = -104						; size = 4
tv206 = -104						; size = 4
tv183 = -104						; size = 4
tv161 = -104						; size = 4
tv139 = -104						; size = 4
tv226 = -100						; size = 4
tv198 = -100						; size = 4
tv175 = -100						; size = 4
tv153 = -100						; size = 4
tv131 = -100						; size = 4
_col$1 = -32						; size = 4
_screen_height$ = -28					; size = 4
_screen_width$ = -24					; size = 4
_in_recognition_guide$ = -20				; size = 4
_origin_y$ = -16					; size = 4
_origin_x$ = -12					; size = 4
_middle_origin_y$ = -8					; size = 4
_middle_origin_x$ = -4					; size = 4
_x$ = 8							; size = 4
_y$ = 12						; size = 4
_x_repeat$ = 16						; size = 4
_y_repeat$ = 20						; size = 4
?draw_application_highres_screen@@YGXHHHH@Z PROC	; draw_application_highres_screen, COMDAT

; 414  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 6c	 sub	 esp, 108		; 0000006cH
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 415  : 
; 416  : 	float
; 417  : 		middle_origin_x,
; 418  : 		middle_origin_y,
; 419  : 		origin_x,
; 420  : 		origin_y;
; 421  : 
; 422  : 	int
; 423  : 		in_recognition_guide,
; 424  : 		screen_width,
; 425  : 		screen_height;
; 426  : 
; 427  : 	ddraw_flip_surface ();

  00009	e8 00 00 00 00	 call	 ?ddraw_flip_surface@@YGHXZ ; ddraw_flip_surface

; 428  : 
; 429  : 	screen_width = get_screen_width ( video_screen );

  0000e	a1 00 00 00 00	 mov	 eax, DWORD PTR ?video_screen@@3PAUSCREEN@@A ; video_screen
  00013	50		 push	 eax
  00014	e8 00 00 00 00	 call	 ?get_screen_width@@YGHPAUSCREEN@@@Z ; get_screen_width
  00019	89 45 e8	 mov	 DWORD PTR _screen_width$[ebp], eax

; 430  : 
; 431  : 	screen_height = get_screen_height ( video_screen );

  0001c	a1 00 00 00 00	 mov	 eax, DWORD PTR ?video_screen@@3PAUSCREEN@@A ; video_screen
  00021	50		 push	 eax
  00022	e8 00 00 00 00	 call	 ?get_screen_height@@YGHPAUSCREEN@@@Z ; get_screen_height
  00027	89 45 e4	 mov	 DWORD PTR _screen_height$[ebp], eax

; 432  : 
; 433  : 	middle_origin_x = screen_width * x_repeat / 2;

  0002a	8b 45 e8	 mov	 eax, DWORD PTR _screen_width$[ebp]
  0002d	0f af 45 10	 imul	 eax, DWORD PTR _x_repeat$[ebp]
  00031	99		 cdq
  00032	2b c2		 sub	 eax, edx
  00034	d1 f8		 sar	 eax, 1
  00036	f3 0f 2a c0	 cvtsi2ss xmm0, eax
  0003a	f3 0f 11 45 fc	 movss	 DWORD PTR _middle_origin_x$[ebp], xmm0

; 434  : 
; 435  : 	middle_origin_y = screen_height * y_repeat / 2;

  0003f	8b 45 e4	 mov	 eax, DWORD PTR _screen_height$[ebp]
  00042	0f af 45 14	 imul	 eax, DWORD PTR _y_repeat$[ebp]
  00046	99		 cdq
  00047	2b c2		 sub	 eax, edx
  00049	d1 f8		 sar	 eax, 1
  0004b	f3 0f 2a c0	 cvtsi2ss xmm0, eax
  0004f	f3 0f 11 45 f8	 movss	 DWORD PTR _middle_origin_y$[ebp], xmm0

; 436  : 
; 437  : 	origin_x = middle_origin_x - ( x * screen_width );

  00054	8b 45 08	 mov	 eax, DWORD PTR _x$[ebp]
  00057	0f af 45 e8	 imul	 eax, DWORD PTR _screen_width$[ebp]
  0005b	f3 0f 2a c0	 cvtsi2ss xmm0, eax
  0005f	f3 0f 10 4d fc	 movss	 xmm1, DWORD PTR _middle_origin_x$[ebp]
  00064	f3 0f 5c c8	 subss	 xmm1, xmm0
  00068	f3 0f 11 4d f4	 movss	 DWORD PTR _origin_x$[ebp], xmm1

; 438  : 
; 439  : 	origin_y = middle_origin_y - ( y * screen_height );

  0006d	8b 45 0c	 mov	 eax, DWORD PTR _y$[ebp]
  00070	0f af 45 e4	 imul	 eax, DWORD PTR _screen_height$[ebp]
  00074	f3 0f 2a c0	 cvtsi2ss xmm0, eax
  00078	f3 0f 10 4d f8	 movss	 xmm1, DWORD PTR _middle_origin_y$[ebp]
  0007d	f3 0f 5c c8	 subss	 xmm1, xmm0
  00081	f3 0f 11 4d f0	 movss	 DWORD PTR _origin_y$[ebp], xmm1

; 440  : 
; 441  : 	set_3d_origin ( main_3d_env, origin_x, origin_y );

  00086	51		 push	 ecx
  00087	f3 0f 10 45 f0	 movss	 xmm0, DWORD PTR _origin_y$[ebp]
  0008c	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00091	51		 push	 ecx
  00092	f3 0f 10 45 f4	 movss	 xmm0, DWORD PTR _origin_x$[ebp]
  00097	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  0009c	a1 00 00 00 00	 mov	 eax, DWORD PTR ?main_3d_env@@3PAUENV_3D@@A ; main_3d_env
  000a1	50		 push	 eax
  000a2	e8 00 00 00 00	 call	 ?set_3d_origin@@YGXPAUENV_3D@@MM@Z ; set_3d_origin

; 442  : 
; 443  : 	set_3d_viewcone ( main_3d_env, screen_width * x_repeat, screen_height * y_repeat, full_screen_width_view_angle, full_screen_height_view_angle );

  000a7	51		 push	 ecx
  000a8	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR ?full_screen_height_view_angle@@3MA
  000b0	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  000b5	51		 push	 ecx
  000b6	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR ?full_screen_width_view_angle@@3MA
  000be	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  000c3	8b 45 e4	 mov	 eax, DWORD PTR _screen_height$[ebp]
  000c6	0f af 45 14	 imul	 eax, DWORD PTR _y_repeat$[ebp]
  000ca	f3 0f 2a c0	 cvtsi2ss xmm0, eax
  000ce	51		 push	 ecx
  000cf	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  000d4	8b 4d e8	 mov	 ecx, DWORD PTR _screen_width$[ebp]
  000d7	0f af 4d 10	 imul	 ecx, DWORD PTR _x_repeat$[ebp]
  000db	f3 0f 2a c1	 cvtsi2ss xmm0, ecx
  000df	51		 push	 ecx
  000e0	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  000e5	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?main_3d_env@@3PAUENV_3D@@A ; main_3d_env
  000eb	52		 push	 edx
  000ec	e8 00 00 00 00	 call	 ?set_3d_viewcone@@YGXPAUENV_3D@@MMMM@Z ; set_3d_viewcone

; 444  : 
; 445  : 	set_3d_active_environment (main_3d_env);

  000f1	a1 00 00 00 00	 mov	 eax, DWORD PTR ?main_3d_env@@3PAUENV_3D@@A ; main_3d_env
  000f6	50		 push	 eax
  000f7	e8 00 00 00 00	 call	 ?set_3d_active_environment@@YGXPAUENV_3D@@@Z ; set_3d_active_environment

; 446  : 
; 447  : 	set_3d_weathermode (main_3d_env, (weathermodes) get_local_entity_int_value (get_session_entity (), INT_TYPE_WEATHER_MODE));

  000fc	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?session_entity@@3PAUENTITY@@A, 0 ; session_entity
  00103	74 0c		 je	 SHORT $LN12@draw_appli
  00105	a1 00 00 00 00	 mov	 eax, DWORD PTR ?session_entity@@3PAUENTITY@@A ; session_entity
  0010a	8b 08		 mov	 ecx, DWORD PTR [eax]
  0010c	89 4d 9c	 mov	 DWORD PTR tv131[ebp], ecx
  0010f	eb 21		 jmp	 SHORT $LN13@draw_appli
$LN12@draw_appli:
  00111	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??draw_application_highres_screen@@YGXHHHH@Z@4JA
  00117	83 c2 21	 add	 edx, 33			; 00000021H
  0011a	52		 push	 edx
  0011b	68 00 00 00 00	 push	 OFFSET ??_C@_0DM@CKNBBMJN@c?3?2users?2nhv90?2projects?2eech?2ap@
  00120	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  00125	50		 push	 eax
  00126	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  0012b	c7 45 9c 00 00
	00 00		 mov	 DWORD PTR tv131[ebp], 0
$LN13@draw_appli:
  00132	b9 01 00 00 00	 mov	 ecx, 1
  00137	85 c9		 test	 ecx, ecx
  00139	74 09		 je	 SHORT $LN14@draw_appli
  0013b	c7 45 98 13 01
	00 00		 mov	 DWORD PTR tv139[ebp], 275 ; 00000113H
  00142	eb 21		 jmp	 SHORT $LN15@draw_appli
$LN14@draw_appli:
  00144	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??draw_application_highres_screen@@YGXHHHH@Z@4JA
  0014a	83 c2 21	 add	 edx, 33			; 00000021H
  0014d	52		 push	 edx
  0014e	68 00 00 00 00	 push	 OFFSET ??_C@_0DM@CKNBBMJN@c?3?2users?2nhv90?2projects?2eech?2ap@
  00153	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_int_type_message@@3PBDB ; overload_invalid_int_type_message
  00158	50		 push	 eax
  00159	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  0015e	c7 45 98 00 00
	00 00		 mov	 DWORD PTR tv139[ebp], 0
$LN15@draw_appli:
  00165	68 13 01 00 00	 push	 275			; 00000113H
  0016a	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?session_entity@@3PAUENTITY@@A ; session_entity
  00170	51		 push	 ecx
  00171	69 55 9c 5c 04
	00 00		 imul	 edx, DWORD PTR tv131[ebp], 1116
  00178	8b 45 98	 mov	 eax, DWORD PTR tv139[ebp]
  0017b	8b 8c 82 00 00
	00 00		 mov	 ecx, DWORD PTR ?fn_get_local_entity_int_value@@3PAY0BBH@P6GHPAUENTITY@@W4INT_TYPES@@@ZA[edx+eax*4]
  00182	ff d1		 call	 ecx
  00184	50		 push	 eax
  00185	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?main_3d_env@@3PAUENV_3D@@A ; main_3d_env
  0018b	52		 push	 edx
  0018c	e8 00 00 00 00	 call	 ?set_3d_weathermode@@YGXPAUENV_3D@@W4WEATHERMODES@@@Z ; set_3d_weathermode

; 448  : 
; 449  : 	set_3d_target_weathermode (main_3d_env, (weathermodes) get_local_entity_int_value (get_session_entity (), INT_TYPE_TARGET_WEATHER_MODE));

  00191	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?session_entity@@3PAUENTITY@@A, 0 ; session_entity
  00198	74 0c		 je	 SHORT $LN16@draw_appli
  0019a	a1 00 00 00 00	 mov	 eax, DWORD PTR ?session_entity@@3PAUENTITY@@A ; session_entity
  0019f	8b 08		 mov	 ecx, DWORD PTR [eax]
  001a1	89 4d 9c	 mov	 DWORD PTR tv153[ebp], ecx
  001a4	eb 21		 jmp	 SHORT $LN17@draw_appli
$LN16@draw_appli:
  001a6	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??draw_application_highres_screen@@YGXHHHH@Z@4JA
  001ac	83 c2 23	 add	 edx, 35			; 00000023H
  001af	52		 push	 edx
  001b0	68 00 00 00 00	 push	 OFFSET ??_C@_0DM@CKNBBMJN@c?3?2users?2nhv90?2projects?2eech?2ap@
  001b5	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  001ba	50		 push	 eax
  001bb	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  001c0	c7 45 9c 00 00
	00 00		 mov	 DWORD PTR tv153[ebp], 0
$LN17@draw_appli:
  001c7	b9 01 00 00 00	 mov	 ecx, 1
  001cc	85 c9		 test	 ecx, ecx
  001ce	74 09		 je	 SHORT $LN18@draw_appli
  001d0	c7 45 98 d7 00
	00 00		 mov	 DWORD PTR tv161[ebp], 215 ; 000000d7H
  001d7	eb 21		 jmp	 SHORT $LN19@draw_appli
$LN18@draw_appli:
  001d9	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??draw_application_highres_screen@@YGXHHHH@Z@4JA
  001df	83 c2 23	 add	 edx, 35			; 00000023H
  001e2	52		 push	 edx
  001e3	68 00 00 00 00	 push	 OFFSET ??_C@_0DM@CKNBBMJN@c?3?2users?2nhv90?2projects?2eech?2ap@
  001e8	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_int_type_message@@3PBDB ; overload_invalid_int_type_message
  001ed	50		 push	 eax
  001ee	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  001f3	c7 45 98 00 00
	00 00		 mov	 DWORD PTR tv161[ebp], 0
$LN19@draw_appli:
  001fa	68 d7 00 00 00	 push	 215			; 000000d7H
  001ff	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?session_entity@@3PAUENTITY@@A ; session_entity
  00205	51		 push	 ecx
  00206	69 55 9c 5c 04
	00 00		 imul	 edx, DWORD PTR tv153[ebp], 1116
  0020d	8b 45 98	 mov	 eax, DWORD PTR tv161[ebp]
  00210	8b 8c 82 00 00
	00 00		 mov	 ecx, DWORD PTR ?fn_get_local_entity_int_value@@3PAY0BBH@P6GHPAUENTITY@@W4INT_TYPES@@@ZA[edx+eax*4]
  00217	ff d1		 call	 ecx
  00219	50		 push	 eax
  0021a	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?main_3d_env@@3PAUENV_3D@@A ; main_3d_env
  00220	52		 push	 edx
  00221	e8 00 00 00 00	 call	 ?set_3d_target_weathermode@@YGXPAUENV_3D@@W4WEATHERMODES@@@Z ; set_3d_target_weathermode

; 450  : 
; 451  : 	set_3d_target_weathermode_transitional_status (main_3d_env, get_local_entity_float_value (get_session_entity (), FLOAT_TYPE_WEATHER_MODE_TRANSITIONAL_STATUS));

  00226	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?session_entity@@3PAUENTITY@@A, 0 ; session_entity
  0022d	74 0c		 je	 SHORT $LN20@draw_appli
  0022f	a1 00 00 00 00	 mov	 eax, DWORD PTR ?session_entity@@3PAUENTITY@@A ; session_entity
  00234	8b 08		 mov	 ecx, DWORD PTR [eax]
  00236	89 4d 9c	 mov	 DWORD PTR tv175[ebp], ecx
  00239	eb 21		 jmp	 SHORT $LN21@draw_appli
$LN20@draw_appli:
  0023b	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??draw_application_highres_screen@@YGXHHHH@Z@4JA
  00241	83 c2 25	 add	 edx, 37			; 00000025H
  00244	52		 push	 edx
  00245	68 00 00 00 00	 push	 OFFSET ??_C@_0DM@CKNBBMJN@c?3?2users?2nhv90?2projects?2eech?2ap@
  0024a	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  0024f	50		 push	 eax
  00250	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00255	c7 45 9c 00 00
	00 00		 mov	 DWORD PTR tv175[ebp], 0
$LN21@draw_appli:
  0025c	b9 01 00 00 00	 mov	 ecx, 1
  00261	85 c9		 test	 ecx, ecx
  00263	74 09		 je	 SHORT $LN22@draw_appli
  00265	c7 45 98 9c 00
	00 00		 mov	 DWORD PTR tv183[ebp], 156 ; 0000009cH
  0026c	eb 21		 jmp	 SHORT $LN23@draw_appli
$LN22@draw_appli:
  0026e	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??draw_application_highres_screen@@YGXHHHH@Z@4JA
  00274	83 c2 25	 add	 edx, 37			; 00000025H
  00277	52		 push	 edx
  00278	68 00 00 00 00	 push	 OFFSET ??_C@_0DM@CKNBBMJN@c?3?2users?2nhv90?2projects?2eech?2ap@
  0027d	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_float_type_message@@3PBDB ; overload_invalid_float_type_message
  00282	50		 push	 eax
  00283	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00288	c7 45 98 00 00
	00 00		 mov	 DWORD PTR tv183[ebp], 0
$LN23@draw_appli:
  0028f	68 9c 00 00 00	 push	 156			; 0000009cH
  00294	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?session_entity@@3PAUENTITY@@A ; session_entity
  0029a	51		 push	 ecx
  0029b	69 55 9c bc 02
	00 00		 imul	 edx, DWORD PTR tv175[ebp], 700
  002a2	8b 45 98	 mov	 eax, DWORD PTR tv183[ebp]
  002a5	8b 8c 82 00 00
	00 00		 mov	 ecx, DWORD PTR ?fn_get_local_entity_float_value@@3PAY0KP@P6GMPAUENTITY@@W4FLOAT_TYPES@@@ZA[edx+eax*4]
  002ac	ff d1		 call	 ecx
  002ae	d9 5d 94	 fstp	 DWORD PTR tv329[ebp]
  002b1	f3 0f 10 45 94	 movss	 xmm0, DWORD PTR tv329[ebp]
  002b6	51		 push	 ecx
  002b7	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  002bc	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?main_3d_env@@3PAUENV_3D@@A ; main_3d_env
  002c2	52		 push	 edx
  002c3	e8 00 00 00 00	 call	 ?set_3d_target_weathermode_transitional_status@@YGXPAUENV_3D@@M@Z ; set_3d_target_weathermode_transitional_status

; 452  : 
; 453  : 	set_3d_time_of_day (main_3d_env, get_local_entity_float_value (get_session_entity (), FLOAT_TYPE_TIME_OF_DAY));

  002c8	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?session_entity@@3PAUENTITY@@A, 0 ; session_entity
  002cf	74 0c		 je	 SHORT $LN24@draw_appli
  002d1	a1 00 00 00 00	 mov	 eax, DWORD PTR ?session_entity@@3PAUENTITY@@A ; session_entity
  002d6	8b 08		 mov	 ecx, DWORD PTR [eax]
  002d8	89 4d 9c	 mov	 DWORD PTR tv198[ebp], ecx
  002db	eb 21		 jmp	 SHORT $LN25@draw_appli
$LN24@draw_appli:
  002dd	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??draw_application_highres_screen@@YGXHHHH@Z@4JA
  002e3	83 c2 27	 add	 edx, 39			; 00000027H
  002e6	52		 push	 edx
  002e7	68 00 00 00 00	 push	 OFFSET ??_C@_0DM@CKNBBMJN@c?3?2users?2nhv90?2projects?2eech?2ap@
  002ec	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  002f1	50		 push	 eax
  002f2	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  002f7	c7 45 9c 00 00
	00 00		 mov	 DWORD PTR tv198[ebp], 0
$LN25@draw_appli:
  002fe	b9 01 00 00 00	 mov	 ecx, 1
  00303	85 c9		 test	 ecx, ecx
  00305	74 09		 je	 SHORT $LN26@draw_appli
  00307	c7 45 98 8e 00
	00 00		 mov	 DWORD PTR tv206[ebp], 142 ; 0000008eH
  0030e	eb 21		 jmp	 SHORT $LN27@draw_appli
$LN26@draw_appli:
  00310	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??draw_application_highres_screen@@YGXHHHH@Z@4JA
  00316	83 c2 27	 add	 edx, 39			; 00000027H
  00319	52		 push	 edx
  0031a	68 00 00 00 00	 push	 OFFSET ??_C@_0DM@CKNBBMJN@c?3?2users?2nhv90?2projects?2eech?2ap@
  0031f	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_float_type_message@@3PBDB ; overload_invalid_float_type_message
  00324	50		 push	 eax
  00325	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  0032a	c7 45 98 00 00
	00 00		 mov	 DWORD PTR tv206[ebp], 0
$LN27@draw_appli:
  00331	68 8e 00 00 00	 push	 142			; 0000008eH
  00336	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?session_entity@@3PAUENTITY@@A ; session_entity
  0033c	51		 push	 ecx
  0033d	69 55 9c bc 02
	00 00		 imul	 edx, DWORD PTR tv198[ebp], 700
  00344	8b 45 98	 mov	 eax, DWORD PTR tv206[ebp]
  00347	8b 8c 82 00 00
	00 00		 mov	 ecx, DWORD PTR ?fn_get_local_entity_float_value@@3PAY0KP@P6GMPAUENTITY@@W4FLOAT_TYPES@@@ZA[edx+eax*4]
  0034e	ff d1		 call	 ecx
  00350	d9 5d 94	 fstp	 DWORD PTR tv346[ebp]
  00353	f3 0f 10 45 94	 movss	 xmm0, DWORD PTR tv346[ebp]
  00358	51		 push	 ecx
  00359	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  0035e	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?main_3d_env@@3PAUENV_3D@@A ; main_3d_env
  00364	52		 push	 edx
  00365	e8 00 00 00 00	 call	 ?set_3d_time_of_day@@YGXPAUENV_3D@@M@Z ; set_3d_time_of_day

; 454  : 
; 455  : 	set_main_3d_rain_wind ();

  0036a	e8 00 00 00 00	 call	 ?set_main_3d_rain_wind@@YGXXZ ; set_main_3d_rain_wind

; 456  : 
; 457  : 	update_3d_rain (main_3d_env, get_3d_time_of_day (main_3d_env), main_vp.attitude);

  0036f	68 0c 00 00 00	 push	 OFFSET ?main_vp@@3UVIEWPOINT@@A+12
  00374	a1 00 00 00 00	 mov	 eax, DWORD PTR ?main_3d_env@@3PAUENV_3D@@A ; main_3d_env
  00379	50		 push	 eax
  0037a	e8 00 00 00 00	 call	 ?get_3d_time_of_day@@YGMPAUENV_3D@@@Z ; get_3d_time_of_day
  0037f	51		 push	 ecx
  00380	d9 1c 24	 fstp	 DWORD PTR [esp]
  00383	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?main_3d_env@@3PAUENV_3D@@A ; main_3d_env
  00389	51		 push	 ecx
  0038a	e8 00 00 00 00	 call	 ?update_3d_rain@@YGXPAUENV_3D@@MQAY02M@Z ; update_3d_rain

; 458  : 
; 459  : 	recalculate_3d_environment_settings (main_3d_env);

  0038f	a1 00 00 00 00	 mov	 eax, DWORD PTR ?main_3d_env@@3PAUENV_3D@@A ; main_3d_env
  00394	50		 push	 eax
  00395	e8 00 00 00 00	 call	 ?recalculate_3d_environment_settings@@YGXPAUENV_3D@@@Z ; recalculate_3d_environment_settings

; 460  : 
; 461  : 	switch (get_local_entity_int_value (get_camera_entity (), INT_TYPE_CAMERA_MODE))

  0039a	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?camera_entity@@3PAUENTITY@@A, 0 ; camera_entity
  003a1	74 0c		 je	 SHORT $LN28@draw_appli
  003a3	a1 00 00 00 00	 mov	 eax, DWORD PTR ?camera_entity@@3PAUENTITY@@A ; camera_entity
  003a8	8b 08		 mov	 ecx, DWORD PTR [eax]
  003aa	89 4d 9c	 mov	 DWORD PTR tv226[ebp], ecx
  003ad	eb 1d		 jmp	 SHORT $LN29@draw_appli
$LN28@draw_appli:
  003af	68 cd 01 00 00	 push	 461			; 000001cdH
  003b4	68 00 00 00 00	 push	 OFFSET ??_C@_0DM@CKNBBMJN@c?3?2users?2nhv90?2projects?2eech?2ap@
  003b9	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  003bf	52		 push	 edx
  003c0	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  003c5	c7 45 9c 00 00
	00 00		 mov	 DWORD PTR tv226[ebp], 0
$LN29@draw_appli:
  003cc	b8 01 00 00 00	 mov	 eax, 1
  003d1	85 c0		 test	 eax, eax
  003d3	74 09		 je	 SHORT $LN30@draw_appli
  003d5	c7 45 98 10 00
	00 00		 mov	 DWORD PTR tv233[ebp], 16 ; 00000010H
  003dc	eb 1d		 jmp	 SHORT $LN31@draw_appli
$LN30@draw_appli:
  003de	68 cd 01 00 00	 push	 461			; 000001cdH
  003e3	68 00 00 00 00	 push	 OFFSET ??_C@_0DM@CKNBBMJN@c?3?2users?2nhv90?2projects?2eech?2ap@
  003e8	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?overload_invalid_int_type_message@@3PBDB ; overload_invalid_int_type_message
  003ee	51		 push	 ecx
  003ef	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  003f4	c7 45 98 00 00
	00 00		 mov	 DWORD PTR tv233[ebp], 0
$LN31@draw_appli:
  003fb	6a 10		 push	 16			; 00000010H
  003fd	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?camera_entity@@3PAUENTITY@@A ; camera_entity
  00403	52		 push	 edx
  00404	69 45 9c 5c 04
	00 00		 imul	 eax, DWORD PTR tv226[ebp], 1116
  0040b	8b 4d 98	 mov	 ecx, DWORD PTR tv233[ebp]
  0040e	8b 94 88 00 00
	00 00		 mov	 edx, DWORD PTR ?fn_get_local_entity_int_value@@3PAY0BBH@P6GHPAUENTITY@@W4INT_TYPES@@@ZA[eax+ecx*4]
  00415	ff d2		 call	 edx
  00417	89 45 94	 mov	 DWORD PTR tv239[ebp], eax
  0041a	83 7d 94 0c	 cmp	 DWORD PTR tv239[ebp], 12 ; 0000000cH
  0041e	7c 11		 jl	 SHORT $LN5@draw_appli
  00420	83 7d 94 0f	 cmp	 DWORD PTR tv239[ebp], 15 ; 0000000fH
  00424	7e 02		 jle	 SHORT $LN4@draw_appli
  00426	eb 09		 jmp	 SHORT $LN5@draw_appli
$LN4@draw_appli:

; 462  : 	{
; 463  : 
; 464  : 		case CAMERA_MODE_RECOGNITION_GUIDE_TOP_VIEW:
; 465  : 		case CAMERA_MODE_RECOGNITION_GUIDE_SIDE_VIEW:
; 466  : 		case CAMERA_MODE_RECOGNITION_GUIDE_FRONT_VIEW:
; 467  : 		case CAMERA_MODE_RECOGNITION_GUIDE_3D_VIEW:
; 468  : 		{
; 469  : 
; 470  : 			in_recognition_guide = TRUE;

  00428	c7 45 ec 01 00
	00 00		 mov	 DWORD PTR _in_recognition_guide$[ebp], 1

; 471  : 
; 472  : 			break;

  0042f	eb 07		 jmp	 SHORT $LN2@draw_appli
$LN5@draw_appli:

; 473  : 		}
; 474  : 
; 475  : 		default:
; 476  : 		{
; 477  : 
; 478  : 			in_recognition_guide = FALSE;

  00431	c7 45 ec 00 00
	00 00		 mov	 DWORD PTR _in_recognition_guide$[ebp], 0
$LN2@draw_appli:

; 479  : 
; 480  : 			break;
; 481  : 		}
; 482  : 	}
; 483  : 
; 484  : 	if ( begin_3d_scene ())

  00438	e8 00 00 00 00	 call	 ?begin_3d_scene@@YGHXZ	; begin_3d_scene
  0043d	85 c0		 test	 eax, eax
  0043f	0f 84 80 00 00
	00		 je	 $LN6@draw_appli

; 485  : 	{
; 486  : 
; 487  : //		set_d3d_int_state ( D3DRENDERSTATE_FILLMODE, D3DFILL_SOLID );
; 488  : 
; 489  : 		clear_zbuffer_screen ();

  00445	e8 00 00 00 00	 call	 ?clear_zbuffer_screen@@YGXXZ ; clear_zbuffer_screen

; 490  : 
; 491  : 		if ( !in_recognition_guide )

  0044a	83 7d ec 00	 cmp	 DWORD PTR _in_recognition_guide$[ebp], 0
  0044e	75 0c		 jne	 SHORT $LN7@draw_appli

; 492  : 		{
; 493  : 	
; 494  : 			scan_3d_terrain ();

  00450	e8 00 00 00 00	 call	 ?scan_3d_terrain@@YGXXZ	; scan_3d_terrain

; 495  : 	
; 496  : 			scan_3d_clouds ();

  00455	e8 00 00 00 00	 call	 ?scan_3d_clouds@@YGXXZ	; scan_3d_clouds

; 497  : 		}
; 498  : 		else

  0045a	eb 2b		 jmp	 SHORT $LN8@draw_appli
$LN7@draw_appli:

; 499  : 		{
; 500  : 
; 501  : 			rgb_colour
; 502  : 				col;
; 503  : 
; 504  : 			col.r = 255;

  0045c	c6 45 e2 ff	 mov	 BYTE PTR _col$1[ebp+2], 255 ; 000000ffH

; 505  : 			col.g = 255;

  00460	c6 45 e1 ff	 mov	 BYTE PTR _col$1[ebp+1], 255 ; 000000ffH

; 506  : 			col.b = 255;

  00464	c6 45 e0 ff	 mov	 BYTE PTR _col$1[ebp], 255 ; 000000ffH

; 507  : 			col.a = 255;

  00468	c6 45 e3 ff	 mov	 BYTE PTR _col$1[ebp+3], 255 ; 000000ffH

; 508  : 
; 509  : 			set_block ( 0, 0, screen_width - 1, screen_height - 1, col );

  0046c	8b 45 e0	 mov	 eax, DWORD PTR _col$1[ebp]
  0046f	50		 push	 eax
  00470	8b 4d e4	 mov	 ecx, DWORD PTR _screen_height$[ebp]
  00473	83 e9 01	 sub	 ecx, 1
  00476	51		 push	 ecx
  00477	8b 55 e8	 mov	 edx, DWORD PTR _screen_width$[ebp]
  0047a	83 ea 01	 sub	 edx, 1
  0047d	52		 push	 edx
  0047e	6a 00		 push	 0
  00480	6a 00		 push	 0
  00482	e8 00 00 00 00	 call	 ?set_block@@YGXHHHHUREAL_COLOUR@@@Z ; set_block
$LN8@draw_appli:

; 510  : 		}
; 511  : 
; 512  : 		scan_local_entity_3d_objects (&main_vp);

  00487	68 00 00 00 00	 push	 OFFSET ?main_vp@@3UVIEWPOINT@@A ; main_vp
  0048c	e8 00 00 00 00	 call	 ?scan_local_entity_3d_objects@@YGXPAUVIEWPOINT@@@Z ; scan_local_entity_3d_objects

; 513  : 
; 514  : 		if ( !in_recognition_guide )

  00491	83 7d ec 00	 cmp	 DWORD PTR _in_recognition_guide$[ebp], 0
  00495	75 14		 jne	 SHORT $LN9@draw_appli

; 515  : 		{
; 516  : 	
; 517  : 			draw_3d_horizon ();

  00497	e8 00 00 00 00	 call	 ?draw_3d_horizon@@YGXXZ	; draw_3d_horizon

; 518  : 	
; 519  : 			draw_3d_stars ();

  0049c	e8 00 00 00 00	 call	 ?draw_3d_stars@@YGXXZ	; draw_3d_stars

; 520  : 	
; 521  : 			draw_3d_sun ();

  004a1	e8 00 00 00 00	 call	 ?draw_3d_sun@@YGXXZ	; draw_3d_sun

; 522  : 	
; 523  : 			draw_3d_moon ();

  004a6	e8 00 00 00 00	 call	 ?draw_3d_moon@@YGXXZ	; draw_3d_moon
$LN9@draw_appli:

; 524  : 		}
; 525  : 
; 526  : 		draw_3d_scene ();

  004ab	e8 00 00 00 00	 call	 ?draw_3d_scene@@YGXXZ	; draw_3d_scene

; 527  : 
; 528  : 		if ( !in_recognition_guide )

  004b0	83 7d ec 00	 cmp	 DWORD PTR _in_recognition_guide$[ebp], 0
  004b4	75 0a		 jne	 SHORT $LN10@draw_appli

; 529  : 		{
; 530  : 
; 531  : 			draw_3d_rain ();

  004b6	e8 00 00 00 00	 call	 ?draw_3d_rain@@YGXXZ	; draw_3d_rain

; 532  : 	
; 533  : 			draw_3d_lightning_strikes ();

  004bb	e8 00 00 00 00	 call	 ?draw_3d_lightning_strikes@@YGXXZ ; draw_3d_lightning_strikes
$LN10@draw_appli:

; 534  : 		}
; 535  : 
; 536  : 		end_3d_scene ();

  004c0	e8 00 00 00 00	 call	 ?end_3d_scene@@YGXXZ	; end_3d_scene
$LN6@draw_appli:

; 537  : 	}
; 538  : }

  004c5	5f		 pop	 edi
  004c6	5e		 pop	 esi
  004c7	5b		 pop	 ebx
  004c8	8b e5		 mov	 esp, ebp
  004ca	5d		 pop	 ebp
  004cb	c2 10 00	 ret	 16			; 00000010H
?draw_application_highres_screen@@YGXHHHH@Z ENDP	; draw_application_highres_screen
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\app3d\3d_draw.c
;	COMDAT ?draw_application_3d_scene@@YGXXZ
_TEXT	SEGMENT
tv311 = -80						; size = 4
tv294 = -80						; size = 4
tv246 = -76						; size = 4
tv178 = -76						; size = 4
tv155 = -76						; size = 4
tv133 = -76						; size = 4
tv79 = -76						; size = 4
tv239 = -72						; size = 4
tv228 = -72						; size = 4
tv170 = -72						; size = 4
tv147 = -72						; size = 4
tv93 = -72						; size = 4
tv71 = -72						; size = 4
_black$1 = -4						; size = 4
?draw_application_3d_scene@@YGXXZ PROC			; draw_application_3d_scene, COMDAT

; 183  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 50	 sub	 esp, 80			; 00000050H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 184  : 
; 185  : 	set_3d_active_environment (main_3d_env);

  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ?main_3d_env@@3PAUENV_3D@@A ; main_3d_env
  0000e	50		 push	 eax
  0000f	e8 00 00 00 00	 call	 ?set_3d_active_environment@@YGXPAUENV_3D@@@Z ; set_3d_active_environment

; 186  : 
; 187  : 	set_3d_weathermode (main_3d_env, (weathermodes) get_local_entity_int_value (get_session_entity (), INT_TYPE_WEATHER_MODE));

  00014	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?session_entity@@3PAUENTITY@@A, 0 ; session_entity
  0001b	74 0c		 je	 SHORT $LN20@draw_appli
  0001d	a1 00 00 00 00	 mov	 eax, DWORD PTR ?session_entity@@3PAUENTITY@@A ; session_entity
  00022	8b 08		 mov	 ecx, DWORD PTR [eax]
  00024	89 4d b8	 mov	 DWORD PTR tv71[ebp], ecx
  00027	eb 21		 jmp	 SHORT $LN21@draw_appli
$LN20@draw_appli:
  00029	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??draw_application_3d_scene@@YGXXZ@4JA
  0002f	83 c2 04	 add	 edx, 4
  00032	52		 push	 edx
  00033	68 00 00 00 00	 push	 OFFSET ??_C@_0DM@CKNBBMJN@c?3?2users?2nhv90?2projects?2eech?2ap@
  00038	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  0003d	50		 push	 eax
  0003e	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00043	c7 45 b8 00 00
	00 00		 mov	 DWORD PTR tv71[ebp], 0
$LN21@draw_appli:
  0004a	b9 01 00 00 00	 mov	 ecx, 1
  0004f	85 c9		 test	 ecx, ecx
  00051	74 09		 je	 SHORT $LN22@draw_appli
  00053	c7 45 b4 13 01
	00 00		 mov	 DWORD PTR tv79[ebp], 275 ; 00000113H
  0005a	eb 21		 jmp	 SHORT $LN23@draw_appli
$LN22@draw_appli:
  0005c	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??draw_application_3d_scene@@YGXXZ@4JA
  00062	83 c2 04	 add	 edx, 4
  00065	52		 push	 edx
  00066	68 00 00 00 00	 push	 OFFSET ??_C@_0DM@CKNBBMJN@c?3?2users?2nhv90?2projects?2eech?2ap@
  0006b	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_int_type_message@@3PBDB ; overload_invalid_int_type_message
  00070	50		 push	 eax
  00071	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00076	c7 45 b4 00 00
	00 00		 mov	 DWORD PTR tv79[ebp], 0
$LN23@draw_appli:
  0007d	68 13 01 00 00	 push	 275			; 00000113H
  00082	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?session_entity@@3PAUENTITY@@A ; session_entity
  00088	51		 push	 ecx
  00089	69 55 b8 5c 04
	00 00		 imul	 edx, DWORD PTR tv71[ebp], 1116
  00090	8b 45 b4	 mov	 eax, DWORD PTR tv79[ebp]
  00093	8b 8c 82 00 00
	00 00		 mov	 ecx, DWORD PTR ?fn_get_local_entity_int_value@@3PAY0BBH@P6GHPAUENTITY@@W4INT_TYPES@@@ZA[edx+eax*4]
  0009a	ff d1		 call	 ecx
  0009c	50		 push	 eax
  0009d	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?main_3d_env@@3PAUENV_3D@@A ; main_3d_env
  000a3	52		 push	 edx
  000a4	e8 00 00 00 00	 call	 ?set_3d_weathermode@@YGXPAUENV_3D@@W4WEATHERMODES@@@Z ; set_3d_weathermode

; 188  : 
; 189  : 	set_3d_target_weathermode (main_3d_env, (weathermodes) get_local_entity_int_value (get_session_entity (), INT_TYPE_TARGET_WEATHER_MODE));

  000a9	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?session_entity@@3PAUENTITY@@A, 0 ; session_entity
  000b0	74 0c		 je	 SHORT $LN24@draw_appli
  000b2	a1 00 00 00 00	 mov	 eax, DWORD PTR ?session_entity@@3PAUENTITY@@A ; session_entity
  000b7	8b 08		 mov	 ecx, DWORD PTR [eax]
  000b9	89 4d b8	 mov	 DWORD PTR tv93[ebp], ecx
  000bc	eb 21		 jmp	 SHORT $LN25@draw_appli
$LN24@draw_appli:
  000be	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??draw_application_3d_scene@@YGXXZ@4JA
  000c4	83 c2 06	 add	 edx, 6
  000c7	52		 push	 edx
  000c8	68 00 00 00 00	 push	 OFFSET ??_C@_0DM@CKNBBMJN@c?3?2users?2nhv90?2projects?2eech?2ap@
  000cd	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  000d2	50		 push	 eax
  000d3	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  000d8	c7 45 b8 00 00
	00 00		 mov	 DWORD PTR tv93[ebp], 0
$LN25@draw_appli:
  000df	b9 01 00 00 00	 mov	 ecx, 1
  000e4	85 c9		 test	 ecx, ecx
  000e6	74 09		 je	 SHORT $LN26@draw_appli
  000e8	c7 45 b4 d7 00
	00 00		 mov	 DWORD PTR tv133[ebp], 215 ; 000000d7H
  000ef	eb 21		 jmp	 SHORT $LN27@draw_appli
$LN26@draw_appli:
  000f1	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??draw_application_3d_scene@@YGXXZ@4JA
  000f7	83 c2 06	 add	 edx, 6
  000fa	52		 push	 edx
  000fb	68 00 00 00 00	 push	 OFFSET ??_C@_0DM@CKNBBMJN@c?3?2users?2nhv90?2projects?2eech?2ap@
  00100	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_int_type_message@@3PBDB ; overload_invalid_int_type_message
  00105	50		 push	 eax
  00106	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  0010b	c7 45 b4 00 00
	00 00		 mov	 DWORD PTR tv133[ebp], 0
$LN27@draw_appli:
  00112	68 d7 00 00 00	 push	 215			; 000000d7H
  00117	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?session_entity@@3PAUENTITY@@A ; session_entity
  0011d	51		 push	 ecx
  0011e	69 55 b8 5c 04
	00 00		 imul	 edx, DWORD PTR tv93[ebp], 1116
  00125	8b 45 b4	 mov	 eax, DWORD PTR tv133[ebp]
  00128	8b 8c 82 00 00
	00 00		 mov	 ecx, DWORD PTR ?fn_get_local_entity_int_value@@3PAY0BBH@P6GHPAUENTITY@@W4INT_TYPES@@@ZA[edx+eax*4]
  0012f	ff d1		 call	 ecx
  00131	50		 push	 eax
  00132	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?main_3d_env@@3PAUENV_3D@@A ; main_3d_env
  00138	52		 push	 edx
  00139	e8 00 00 00 00	 call	 ?set_3d_target_weathermode@@YGXPAUENV_3D@@W4WEATHERMODES@@@Z ; set_3d_target_weathermode

; 190  : 
; 191  : 	set_3d_target_weathermode_transitional_status (main_3d_env, get_local_entity_float_value (get_session_entity (), FLOAT_TYPE_WEATHER_MODE_TRANSITIONAL_STATUS));

  0013e	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?session_entity@@3PAUENTITY@@A, 0 ; session_entity
  00145	74 0c		 je	 SHORT $LN28@draw_appli
  00147	a1 00 00 00 00	 mov	 eax, DWORD PTR ?session_entity@@3PAUENTITY@@A ; session_entity
  0014c	8b 08		 mov	 ecx, DWORD PTR [eax]
  0014e	89 4d b8	 mov	 DWORD PTR tv147[ebp], ecx
  00151	eb 21		 jmp	 SHORT $LN29@draw_appli
$LN28@draw_appli:
  00153	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??draw_application_3d_scene@@YGXXZ@4JA
  00159	83 c2 08	 add	 edx, 8
  0015c	52		 push	 edx
  0015d	68 00 00 00 00	 push	 OFFSET ??_C@_0DM@CKNBBMJN@c?3?2users?2nhv90?2projects?2eech?2ap@
  00162	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  00167	50		 push	 eax
  00168	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  0016d	c7 45 b8 00 00
	00 00		 mov	 DWORD PTR tv147[ebp], 0
$LN29@draw_appli:
  00174	b9 01 00 00 00	 mov	 ecx, 1
  00179	85 c9		 test	 ecx, ecx
  0017b	74 09		 je	 SHORT $LN30@draw_appli
  0017d	c7 45 b4 9c 00
	00 00		 mov	 DWORD PTR tv155[ebp], 156 ; 0000009cH
  00184	eb 21		 jmp	 SHORT $LN31@draw_appli
$LN30@draw_appli:
  00186	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??draw_application_3d_scene@@YGXXZ@4JA
  0018c	83 c2 08	 add	 edx, 8
  0018f	52		 push	 edx
  00190	68 00 00 00 00	 push	 OFFSET ??_C@_0DM@CKNBBMJN@c?3?2users?2nhv90?2projects?2eech?2ap@
  00195	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_float_type_message@@3PBDB ; overload_invalid_float_type_message
  0019a	50		 push	 eax
  0019b	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  001a0	c7 45 b4 00 00
	00 00		 mov	 DWORD PTR tv155[ebp], 0
$LN31@draw_appli:
  001a7	68 9c 00 00 00	 push	 156			; 0000009cH
  001ac	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?session_entity@@3PAUENTITY@@A ; session_entity
  001b2	51		 push	 ecx
  001b3	69 55 b8 bc 02
	00 00		 imul	 edx, DWORD PTR tv147[ebp], 700
  001ba	8b 45 b4	 mov	 eax, DWORD PTR tv155[ebp]
  001bd	8b 8c 82 00 00
	00 00		 mov	 ecx, DWORD PTR ?fn_get_local_entity_float_value@@3PAY0KP@P6GMPAUENTITY@@W4FLOAT_TYPES@@@ZA[edx+eax*4]
  001c4	ff d1		 call	 ecx
  001c6	d9 5d b0	 fstp	 DWORD PTR tv294[ebp]
  001c9	f3 0f 10 45 b0	 movss	 xmm0, DWORD PTR tv294[ebp]
  001ce	51		 push	 ecx
  001cf	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  001d4	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?main_3d_env@@3PAUENV_3D@@A ; main_3d_env
  001da	52		 push	 edx
  001db	e8 00 00 00 00	 call	 ?set_3d_target_weathermode_transitional_status@@YGXPAUENV_3D@@M@Z ; set_3d_target_weathermode_transitional_status

; 192  : 
; 193  : 	set_3d_time_of_day (main_3d_env, get_local_entity_float_value (get_session_entity (), FLOAT_TYPE_TIME_OF_DAY));

  001e0	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?session_entity@@3PAUENTITY@@A, 0 ; session_entity
  001e7	74 0c		 je	 SHORT $LN32@draw_appli
  001e9	a1 00 00 00 00	 mov	 eax, DWORD PTR ?session_entity@@3PAUENTITY@@A ; session_entity
  001ee	8b 08		 mov	 ecx, DWORD PTR [eax]
  001f0	89 4d b8	 mov	 DWORD PTR tv170[ebp], ecx
  001f3	eb 21		 jmp	 SHORT $LN33@draw_appli
$LN32@draw_appli:
  001f5	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??draw_application_3d_scene@@YGXXZ@4JA
  001fb	83 c2 0a	 add	 edx, 10			; 0000000aH
  001fe	52		 push	 edx
  001ff	68 00 00 00 00	 push	 OFFSET ??_C@_0DM@CKNBBMJN@c?3?2users?2nhv90?2projects?2eech?2ap@
  00204	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  00209	50		 push	 eax
  0020a	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  0020f	c7 45 b8 00 00
	00 00		 mov	 DWORD PTR tv170[ebp], 0
$LN33@draw_appli:
  00216	b9 01 00 00 00	 mov	 ecx, 1
  0021b	85 c9		 test	 ecx, ecx
  0021d	74 09		 je	 SHORT $LN34@draw_appli
  0021f	c7 45 b4 8e 00
	00 00		 mov	 DWORD PTR tv178[ebp], 142 ; 0000008eH
  00226	eb 21		 jmp	 SHORT $LN35@draw_appli
$LN34@draw_appli:
  00228	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??draw_application_3d_scene@@YGXXZ@4JA
  0022e	83 c2 0a	 add	 edx, 10			; 0000000aH
  00231	52		 push	 edx
  00232	68 00 00 00 00	 push	 OFFSET ??_C@_0DM@CKNBBMJN@c?3?2users?2nhv90?2projects?2eech?2ap@
  00237	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_float_type_message@@3PBDB ; overload_invalid_float_type_message
  0023c	50		 push	 eax
  0023d	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00242	c7 45 b4 00 00
	00 00		 mov	 DWORD PTR tv178[ebp], 0
$LN35@draw_appli:
  00249	68 8e 00 00 00	 push	 142			; 0000008eH
  0024e	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?session_entity@@3PAUENTITY@@A ; session_entity
  00254	51		 push	 ecx
  00255	69 55 b8 bc 02
	00 00		 imul	 edx, DWORD PTR tv170[ebp], 700
  0025c	8b 45 b4	 mov	 eax, DWORD PTR tv178[ebp]
  0025f	8b 8c 82 00 00
	00 00		 mov	 ecx, DWORD PTR ?fn_get_local_entity_float_value@@3PAY0KP@P6GMPAUENTITY@@W4FLOAT_TYPES@@@ZA[edx+eax*4]
  00266	ff d1		 call	 ecx
  00268	d9 5d b0	 fstp	 DWORD PTR tv311[ebp]
  0026b	f3 0f 10 45 b0	 movss	 xmm0, DWORD PTR tv311[ebp]
  00270	51		 push	 ecx
  00271	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00276	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?main_3d_env@@3PAUENV_3D@@A ; main_3d_env
  0027c	52		 push	 edx
  0027d	e8 00 00 00 00	 call	 ?set_3d_time_of_day@@YGXPAUENV_3D@@M@Z ; set_3d_time_of_day

; 194  : 
; 195  : 	set_3d_view_distances ( main_3d_env, 10000.0, 1.0, 1.0, 0.0 );

  00282	51		 push	 ecx
  00283	0f 57 c0	 xorps	 xmm0, xmm0
  00286	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  0028b	51		 push	 ecx
  0028c	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3f800000
  00294	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00299	51		 push	 ecx
  0029a	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3f800000
  002a2	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  002a7	51		 push	 ecx
  002a8	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@461c4000
  002b0	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  002b5	a1 00 00 00 00	 mov	 eax, DWORD PTR ?main_3d_env@@3PAUENV_3D@@A ; main_3d_env
  002ba	50		 push	 eax
  002bb	e8 00 00 00 00	 call	 ?set_3d_view_distances@@YGXPAUENV_3D@@MMMM@Z ; set_3d_view_distances

; 196  : 
; 197  : 	if ( application_3d_rain_active )

  002c0	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?application_3d_rain_active@@3HA, 0 ; application_3d_rain_active
  002c7	74 05		 je	 SHORT $LN4@draw_appli

; 198  : 	{
; 199  : 	
; 200  : 		set_main_3d_rain_wind ();

  002c9	e8 00 00 00 00	 call	 ?set_main_3d_rain_wind@@YGXXZ ; set_main_3d_rain_wind
$LN4@draw_appli:

; 201  : 	}
; 202  : 
; 203  : 	recalculate_3d_environment_settings (main_3d_env);

  002ce	a1 00 00 00 00	 mov	 eax, DWORD PTR ?main_3d_env@@3PAUENV_3D@@A ; main_3d_env
  002d3	50		 push	 eax
  002d4	e8 00 00 00 00	 call	 ?recalculate_3d_environment_settings@@YGXPAUENV_3D@@@Z ; recalculate_3d_environment_settings

; 204  : 
; 205  : 	if ( command_line_3d_visual_clear_edges )

  002d9	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?command_line_3d_visual_clear_edges@@3HA, 0 ; command_line_3d_visual_clear_edges
  002e0	0f 84 e2 00 00
	00		 je	 $LN7@draw_appli

; 206  : 	{
; 207  : 
; 208  : 		//
; 209  : 		// If this is the fullscreen visual, draw the right & bottom edges of the screen in black first
; 210  : 		//
; 211  : 
; 212  : 		if ( ( active_viewport.x_max == full_screen_x_max ) && ( active_viewport.y_max == full_screen_y_max ) )

  002e6	f3 0f 10 05 08
	00 00 00	 movss	 xmm0, DWORD PTR ?active_viewport@@3UVIEWPORT@@A+8
  002ee	0f 2e 05 00 00
	00 00		 ucomiss xmm0, DWORD PTR ?full_screen_x_max@@3MA
  002f5	9f		 lahf
  002f6	f6 c4 44	 test	 ah, 68			; 00000044H
  002f9	0f 8a c9 00 00
	00		 jp	 $LN7@draw_appli
  002ff	f3 0f 10 05 0c
	00 00 00	 movss	 xmm0, DWORD PTR ?active_viewport@@3UVIEWPORT@@A+12
  00307	0f 2e 05 00 00
	00 00		 ucomiss xmm0, DWORD PTR ?full_screen_y_max@@3MA
  0030e	9f		 lahf
  0030f	f6 c4 44	 test	 ah, 68			; 00000044H
  00312	0f 8a b0 00 00
	00		 jp	 $LN7@draw_appli

; 213  : 		{
; 214  : 
; 215  : 			if ( lock_screen ( active_screen ) )

  00318	a1 00 00 00 00	 mov	 eax, DWORD PTR ?active_screen@@3PAUSCREEN@@A ; active_screen
  0031d	50		 push	 eax
  0031e	e8 00 00 00 00	 call	 ?lock_screen@@YGHPAUSCREEN@@@Z ; lock_screen
  00323	85 c0		 test	 eax, eax
  00325	0f 84 9d 00 00
	00		 je	 $LN7@draw_appli

; 216  : 			{
; 217  : 
; 218  : 				rgb_colour
; 219  : 					black;
; 220  : 
; 221  : 
; 222  : 				black.r = 0;

  0032b	c6 45 fe 00	 mov	 BYTE PTR _black$1[ebp+2], 0

; 223  : 				black.g = 0;

  0032f	c6 45 fd 00	 mov	 BYTE PTR _black$1[ebp+1], 0

; 224  : 				black.b = 0;

  00333	c6 45 fc 00	 mov	 BYTE PTR _black$1[ebp], 0

; 225  : 				black.a = 255;

  00337	c6 45 ff ff	 mov	 BYTE PTR _black$1[ebp+3], 255 ; 000000ffH

; 226  : 
; 227  : 				draw_line ( active_viewport.x_max, active_viewport.y_min, active_viewport.x_max, active_viewport.y_max, black );

  0033b	8b 45 fc	 mov	 eax, DWORD PTR _black$1[ebp]
  0033e	50		 push	 eax
  0033f	51		 push	 ecx
  00340	f3 0f 10 05 0c
	00 00 00	 movss	 xmm0, DWORD PTR ?active_viewport@@3UVIEWPORT@@A+12
  00348	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  0034d	51		 push	 ecx
  0034e	f3 0f 10 05 08
	00 00 00	 movss	 xmm0, DWORD PTR ?active_viewport@@3UVIEWPORT@@A+8
  00356	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  0035b	51		 push	 ecx
  0035c	f3 0f 10 05 04
	00 00 00	 movss	 xmm0, DWORD PTR ?active_viewport@@3UVIEWPORT@@A+4
  00364	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00369	51		 push	 ecx
  0036a	f3 0f 10 05 08
	00 00 00	 movss	 xmm0, DWORD PTR ?active_viewport@@3UVIEWPORT@@A+8
  00372	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00377	e8 00 00 00 00	 call	 ?draw_line@@YGXMMMMUREAL_COLOUR@@@Z ; draw_line

; 228  : 
; 229  : 				draw_line ( active_viewport.x_min, active_viewport.y_max, active_viewport.x_max, active_viewport.y_max, black );

  0037c	8b 45 fc	 mov	 eax, DWORD PTR _black$1[ebp]
  0037f	50		 push	 eax
  00380	51		 push	 ecx
  00381	f3 0f 10 05 0c
	00 00 00	 movss	 xmm0, DWORD PTR ?active_viewport@@3UVIEWPORT@@A+12
  00389	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  0038e	51		 push	 ecx
  0038f	f3 0f 10 05 08
	00 00 00	 movss	 xmm0, DWORD PTR ?active_viewport@@3UVIEWPORT@@A+8
  00397	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  0039c	51		 push	 ecx
  0039d	f3 0f 10 05 0c
	00 00 00	 movss	 xmm0, DWORD PTR ?active_viewport@@3UVIEWPORT@@A+12
  003a5	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  003aa	51		 push	 ecx
  003ab	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR ?active_viewport@@3UVIEWPORT@@A
  003b3	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  003b8	e8 00 00 00 00	 call	 ?draw_line@@YGXMMMMUREAL_COLOUR@@@Z ; draw_line

; 230  : 
; 231  : 				unlock_screen ( active_screen );

  003bd	a1 00 00 00 00	 mov	 eax, DWORD PTR ?active_screen@@3PAUSCREEN@@A ; active_screen
  003c2	50		 push	 eax
  003c3	e8 00 00 00 00	 call	 ?unlock_screen@@YGHPAUSCREEN@@@Z ; unlock_screen
$LN7@draw_appli:

; 232  : 			}
; 233  : 		}
; 234  : 	}
; 235  : 
; 236  : 	if ( begin_3d_scene () )

  003c8	e8 00 00 00 00	 call	 ?begin_3d_scene@@YGHXZ	; begin_3d_scene
  003cd	85 c0		 test	 eax, eax
  003cf	0f 84 8c 00 00
	00		 je	 $LN8@draw_appli

; 237  : 	{
; 238  : 		clear_zbuffer_screen ();

  003d5	e8 00 00 00 00	 call	 ?clear_zbuffer_screen@@YGXXZ ; clear_zbuffer_screen

; 239  : 
; 240  : 		if ( active_screen != video_screen )

  003da	a1 00 00 00 00	 mov	 eax, DWORD PTR ?active_screen@@3PAUSCREEN@@A ; active_screen
  003df	3b 05 00 00 00
	00		 cmp	 eax, DWORD PTR ?video_screen@@3PAUSCREEN@@A ; video_screen
  003e5	74 05		 je	 SHORT $LN9@draw_appli

; 241  : 		{
; 242  : 
; 243  : 			clear_zbuffer_screen_using_viewport ();

  003e7	e8 00 00 00 00	 call	 ?clear_zbuffer_screen_using_viewport@@YGXXZ ; clear_zbuffer_screen_using_viewport
$LN9@draw_appli:

; 244  : 		}
; 245  : 
; 246  : 		scan_3d_terrain ();

  003ec	e8 00 00 00 00	 call	 ?scan_3d_terrain@@YGXXZ	; scan_3d_terrain

; 247  : 
; 248  : 		if ( get_3d_render_filter ( main_3d_env ) == RENDER_CLEAR )

  003f1	a1 00 00 00 00	 mov	 eax, DWORD PTR ?main_3d_env@@3PAUENV_3D@@A ; main_3d_env
  003f6	50		 push	 eax
  003f7	e8 00 00 00 00	 call	 ?get_3d_render_filter@@YG?AW4RENDER_FILTERS@@PAUENV_3D@@@Z ; get_3d_render_filter
  003fc	83 f8 01	 cmp	 eax, 1
  003ff	75 05		 jne	 SHORT $LN10@draw_appli

; 249  : 		{
; 250  : 
; 251  : 			scan_3d_clouds ();

  00401	e8 00 00 00 00	 call	 ?scan_3d_clouds@@YGXXZ	; scan_3d_clouds
$LN10@draw_appli:

; 252  : 		}
; 253  : 
; 254  : 		scan_local_entity_3d_objects (&main_vp);

  00406	68 00 00 00 00	 push	 OFFSET ?main_vp@@3UVIEWPOINT@@A ; main_vp
  0040b	e8 00 00 00 00	 call	 ?scan_local_entity_3d_objects@@YGXPAUVIEWPOINT@@@Z ; scan_local_entity_3d_objects

; 255  : 
; 256  : 		draw_3d_horizon ();

  00410	e8 00 00 00 00	 call	 ?draw_3d_horizon@@YGXXZ	; draw_3d_horizon

; 257  : 
; 258  : 		if (get_3d_render_filter ( main_3d_env ) == RENDER_CLEAR )

  00415	a1 00 00 00 00	 mov	 eax, DWORD PTR ?main_3d_env@@3PAUENV_3D@@A ; main_3d_env
  0041a	50		 push	 eax
  0041b	e8 00 00 00 00	 call	 ?get_3d_render_filter@@YG?AW4RENDER_FILTERS@@PAUENV_3D@@@Z ; get_3d_render_filter
  00420	83 f8 01	 cmp	 eax, 1
  00423	75 0f		 jne	 SHORT $LN11@draw_appli

; 259  : 		{
; 260  : 
; 261  : 			draw_3d_stars ();

  00425	e8 00 00 00 00	 call	 ?draw_3d_stars@@YGXXZ	; draw_3d_stars

; 262  : 
; 263  : 			draw_3d_sun ();

  0042a	e8 00 00 00 00	 call	 ?draw_3d_sun@@YGXXZ	; draw_3d_sun

; 264  : 
; 265  : 			draw_3d_moon ();

  0042f	e8 00 00 00 00	 call	 ?draw_3d_moon@@YGXXZ	; draw_3d_moon
$LN11@draw_appli:

; 266  : 		}
; 267  : 
; 268  : 		draw_3d_scene ();

  00434	e8 00 00 00 00	 call	 ?draw_3d_scene@@YGXXZ	; draw_3d_scene

; 269  : 
; 270  : 		if ( ( get_3d_render_filter ( main_3d_env ) != RENDER_INFRARED ) && ( application_3d_rain_active ) )

  00439	a1 00 00 00 00	 mov	 eax, DWORD PTR ?main_3d_env@@3PAUENV_3D@@A ; main_3d_env
  0043e	50		 push	 eax
  0043f	e8 00 00 00 00	 call	 ?get_3d_render_filter@@YG?AW4RENDER_FILTERS@@PAUENV_3D@@@Z ; get_3d_render_filter
  00444	83 f8 02	 cmp	 eax, 2
  00447	74 13		 je	 SHORT $LN12@draw_appli
  00449	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?application_3d_rain_active@@3HA, 0 ; application_3d_rain_active
  00450	74 0a		 je	 SHORT $LN12@draw_appli

; 271  : 		{
; 272  : 
; 273  : 			draw_3d_rain ();

  00452	e8 00 00 00 00	 call	 ?draw_3d_rain@@YGXXZ	; draw_3d_rain

; 274  : 
; 275  : 			draw_3d_lightning_strikes ();

  00457	e8 00 00 00 00	 call	 ?draw_3d_lightning_strikes@@YGXXZ ; draw_3d_lightning_strikes
$LN12@draw_appli:

; 276  : 		}
; 277  : 
; 278  : 		end_3d_scene ();

  0045c	e8 00 00 00 00	 call	 ?end_3d_scene@@YGXXZ	; end_3d_scene
$LN8@draw_appli:

; 279  : 	}
; 280  : 
; 281  : 	if ( get_3d_render_filter ( main_3d_env ) != RENDER_CLEAR ) 

  00461	a1 00 00 00 00	 mov	 eax, DWORD PTR ?main_3d_env@@3PAUENV_3D@@A ; main_3d_env
  00466	50		 push	 eax
  00467	e8 00 00 00 00	 call	 ?get_3d_render_filter@@YG?AW4RENDER_FILTERS@@PAUENV_3D@@@Z ; get_3d_render_filter
  0046c	83 f8 01	 cmp	 eax, 1
  0046f	74 40		 je	 SHORT $LN2@draw_appli

; 282  : 	{
; 283  : 
; 284  : 		switch ( current_3d_noise_level )

  00471	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_3d_noise_level@@3W4DISPLAY_3D_NOISE_LEVELS@@A ; current_3d_noise_level
  00476	89 45 b8	 mov	 DWORD PTR tv228[ebp], eax
  00479	83 7d b8 03	 cmp	 DWORD PTR tv228[ebp], 3
  0047d	77 32		 ja	 SHORT $LN2@draw_appli
  0047f	8b 4d b8	 mov	 ecx, DWORD PTR tv228[ebp]
  00482	ff 24 8d 00 00
	00 00		 jmp	 DWORD PTR $LN40@draw_appli[ecx*4]
$LN14@draw_appli:

; 285  : 		{
; 286  : 
; 287  : 			case DISPLAY_3D_NOISE_LEVEL_NONE:
; 288  : 			{
; 289  : 
; 290  : 				render_infrared_interference ( 64 );

  00489	6a 40		 push	 64			; 00000040H
  0048b	e8 00 00 00 00	 call	 ?render_infrared_interference@@YGXH@Z ; render_infrared_interference

; 291  : 
; 292  : 				break;

  00490	eb 1f		 jmp	 SHORT $LN2@draw_appli
$LN15@draw_appli:

; 293  : 			}
; 294  : 
; 295  : 			case DISPLAY_3D_NOISE_LEVEL_LOW:
; 296  : 			{
; 297  : 
; 298  : 				render_infrared_interference ( 96 );

  00492	6a 60		 push	 96			; 00000060H
  00494	e8 00 00 00 00	 call	 ?render_infrared_interference@@YGXH@Z ; render_infrared_interference

; 299  : 
; 300  : 				break;

  00499	eb 16		 jmp	 SHORT $LN2@draw_appli
$LN16@draw_appli:

; 301  : 			}
; 302  : 
; 303  : 			case DISPLAY_3D_NOISE_LEVEL_MEDIUM:
; 304  : 			{
; 305  : 
; 306  : 				render_infrared_interference ( 168 );

  0049b	68 a8 00 00 00	 push	 168			; 000000a8H
  004a0	e8 00 00 00 00	 call	 ?render_infrared_interference@@YGXH@Z ; render_infrared_interference

; 307  : 
; 308  : 				break;

  004a5	eb 0a		 jmp	 SHORT $LN2@draw_appli
$LN17@draw_appli:

; 309  : 			}
; 310  : 
; 311  : 			case DISPLAY_3D_NOISE_LEVEL_HIGH:
; 312  : 			{
; 313  : 
; 314  : 				render_infrared_interference ( 240 );

  004a7	68 f0 00 00 00	 push	 240			; 000000f0H
  004ac	e8 00 00 00 00	 call	 ?render_infrared_interference@@YGXH@Z ; render_infrared_interference
$LN2@draw_appli:

; 315  : 
; 316  : 				break;
; 317  : 			}
; 318  : 		}
; 319  : 	}
; 320  : 	
; 321  : 	// Jabberwock 031009 - Get fog for satellite
; 322  : 	
; 323  : 	if (get_local_entity_int_value (get_camera_entity (), INT_TYPE_CAMERA_MODE) == CAMERA_MODE_SATELLITE)

  004b1	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?camera_entity@@3PAUENTITY@@A, 0 ; camera_entity
  004b8	74 0c		 je	 SHORT $LN36@draw_appli
  004ba	a1 00 00 00 00	 mov	 eax, DWORD PTR ?camera_entity@@3PAUENTITY@@A ; camera_entity
  004bf	8b 08		 mov	 ecx, DWORD PTR [eax]
  004c1	89 4d b8	 mov	 DWORD PTR tv239[ebp], ecx
  004c4	eb 1d		 jmp	 SHORT $LN37@draw_appli
$LN36@draw_appli:
  004c6	68 43 01 00 00	 push	 323			; 00000143H
  004cb	68 00 00 00 00	 push	 OFFSET ??_C@_0DM@CKNBBMJN@c?3?2users?2nhv90?2projects?2eech?2ap@
  004d0	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  004d6	52		 push	 edx
  004d7	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  004dc	c7 45 b8 00 00
	00 00		 mov	 DWORD PTR tv239[ebp], 0
$LN37@draw_appli:
  004e3	b8 01 00 00 00	 mov	 eax, 1
  004e8	85 c0		 test	 eax, eax
  004ea	74 09		 je	 SHORT $LN38@draw_appli
  004ec	c7 45 b4 10 00
	00 00		 mov	 DWORD PTR tv246[ebp], 16 ; 00000010H
  004f3	eb 1d		 jmp	 SHORT $LN39@draw_appli
$LN38@draw_appli:
  004f5	68 43 01 00 00	 push	 323			; 00000143H
  004fa	68 00 00 00 00	 push	 OFFSET ??_C@_0DM@CKNBBMJN@c?3?2users?2nhv90?2projects?2eech?2ap@
  004ff	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?overload_invalid_int_type_message@@3PBDB ; overload_invalid_int_type_message
  00505	51		 push	 ecx
  00506	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  0050b	c7 45 b4 00 00
	00 00		 mov	 DWORD PTR tv246[ebp], 0
$LN39@draw_appli:
  00512	6a 10		 push	 16			; 00000010H
  00514	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?camera_entity@@3PAUENTITY@@A ; camera_entity
  0051a	52		 push	 edx
  0051b	69 45 b8 5c 04
	00 00		 imul	 eax, DWORD PTR tv239[ebp], 1116
  00522	8b 4d b4	 mov	 ecx, DWORD PTR tv246[ebp]
  00525	8b 94 88 00 00
	00 00		 mov	 edx, DWORD PTR ?fn_get_local_entity_int_value@@3PAY0BBH@P6GHPAUENTITY@@W4INT_TYPES@@@ZA[eax+ecx*4]
  0052c	ff d2		 call	 edx
  0052e	83 f8 04	 cmp	 eax, 4
  00531	75 07		 jne	 SHORT $LN18@draw_appli

; 324  : 	{
; 325  : 		render_infrared_interference ( 0 ); // no matter, we use variable alpha anyway

  00533	6a 00		 push	 0
  00535	e8 00 00 00 00	 call	 ?render_infrared_interference@@YGXH@Z ; render_infrared_interference
$LN18@draw_appli:

; 326  : 	}
; 327  : 	
; 328  : 	// Jabberwock 031009 ends
; 329  : 	
; 330  : 	update_application_3d_scene ();

  0053a	e8 00 00 00 00	 call	 ?update_application_3d_scene@@YGXXZ ; update_application_3d_scene

; 331  : 
; 332  : #if ( OEM_3DLABS_VERSION )
; 333  : 
; 334  : 	if ( full_screen_3d_information )
; 335  : 	{
; 336  : 
; 337  : 		char
; 338  : 			s[256];
; 339  : 
; 340  : 		if ( lock_screen ( active_screen ) )
; 341  : 		{
; 342  : 
; 343  : 			float
; 344  : 				y_addon,
; 345  : 				y;
; 346  : 
; 347  : 			rgb_colour
; 348  : 				col;
; 349  : 
; 350  : 			col.r = 255;
; 351  : 			col.g = 255;
; 352  : 			col.b = 255;
; 353  : 
; 354  : 			y_addon = get_mono_font_char_height ('0');
; 355  : 
; 356  : 			y = 5.0;
; 357  : 
; 358  : 			set_mono_font_type ( MONO_FONT_TYPE_7X12 );
; 359  : 
; 360  : 			set_mono_font_colour ( col );
; 361  : 
; 362  : 			set_mono_font_position (5.0, y);
; 363  : 
; 364  : 			sprintf (s, "%-20.20s: %.2f", "Frame rate", get_one_over_delta_time ());
; 365  : 
; 366  : 			print_mono_font_string (s);
; 367  : 
; 368  : 			y += y_addon;
; 369  : 
; 370  : 			set_mono_font_position (5.0, y);
; 371  : 
; 372  : 			sprintf (s, "%-20.20s: %d", "Number of triangles", total_number_of_d3d_triangles );
; 373  : 
; 374  : 			print_mono_font_string (s);
; 375  : 
; 376  : 			y += y_addon;
; 377  : 
; 378  : 			set_mono_font_position (5.0, y);
; 379  : 
; 380  : 			sprintf (s, "%-20.20s: %d x %d x %d", "Resolution", ( int ) full_screen_width, ( int ) full_screen_height, full_screen_colourdepth );
; 381  : 
; 382  : 			print_mono_font_string (s);
; 383  : 
; 384  : 			y += y_addon;
; 385  : 
; 386  : 			set_mono_font_position (5.0, y);
; 387  : 
; 388  : 			if ( object_3d_perform_lod_calculations )
; 389  : 			{
; 390  : 
; 391  : 				sprintf (s, "%-20.20s: ON", "Object Lod:" );
; 392  : 			}
; 393  : 			else
; 394  : 			{
; 395  : 
; 396  : 				sprintf (s, "%-20.20s: OFF", "Object Lod:" );
; 397  : 			}
; 398  : 
; 399  : 			print_mono_font_string (s);
; 400  : 
; 401  : 			unlock_screen (active_screen);
; 402  : 		}
; 403  : 	}
; 404  : 
; 405  : #endif
; 406  : 
; 407  : }

  0053f	5f		 pop	 edi
  00540	5e		 pop	 esi
  00541	5b		 pop	 ebx
  00542	8b e5		 mov	 esp, ebp
  00544	5d		 pop	 ebp
  00545	c3		 ret	 0
  00546	66 90		 npad	 2
$LN40@draw_appli:
  00548	00 00 00 00	 DD	 $LN14@draw_appli
  0054c	00 00 00 00	 DD	 $LN15@draw_appli
  00550	00 00 00 00	 DD	 $LN16@draw_appli
  00554	00 00 00 00	 DD	 $LN17@draw_appli
?draw_application_3d_scene@@YGXXZ ENDP			; draw_application_3d_scene
_TEXT	ENDS
END
