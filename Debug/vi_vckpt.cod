; Listing generated by Microsoft (R) Optimizing Compiler Version 19.16.27045.0 

	TITLE	C:\Users\nhv90\Projects\eech\aphavoc\source\gunships\cockpits\viper\vi_vckpt.c
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB MSVCRTD
INCLUDELIB OLDNAMES

PUBLIC	?initialise_viper_virtual_cockpit@@YGXXZ	; initialise_viper_virtual_cockpit
PUBLIC	?deinitialise_viper_virtual_cockpit@@YGXXZ	; deinitialise_viper_virtual_cockpit
PUBLIC	?update_viper_virtual_cockpit@@YGXXZ		; update_viper_virtual_cockpit
PUBLIC	?pre_render_viper_virtual_cockpit_displays@@YGXXZ ; pre_render_viper_virtual_cockpit_displays
PUBLIC	?draw_viper_virtual_cockpit@@YGXXZ		; draw_viper_virtual_cockpit
PUBLIC	?get_viper_crew_viewpoint@@YGXXZ		; get_viper_crew_viewpoint
PUBLIC	?get_viper_display_viewpoint@@YGXW4VIEW_MODES@@@Z ; get_viper_display_viewpoint
PUBLIC	?damage_viper_virtual_cockpit_main_rotors@@YGXH@Z ; damage_viper_virtual_cockpit_main_rotors
PUBLIC	?restore_viper_virtual_cockpit_main_rotors@@YGXXZ ; restore_viper_virtual_cockpit_main_rotors
PUBLIC	?__LINE__Var@?0??draw_viper_virtual_cockpit@@YGXXZ@4JA ; `draw_viper_virtual_cockpit'::`1'::__LINE__Var
PUBLIC	??_C@_0EP@GFKODKEB@c?3?2users?2nhv90?2projects?2eech?2ap@ ; `string'
PUBLIC	?__LINE__Var@?0??get_viper_crew_viewpoint@@YGXXZ@4JA ; `get_viper_crew_viewpoint'::`1'::__LINE__Var
PUBLIC	??_C@_0DA@EHJMLOA@Failed?5to?5locate?5crew?8s?5head?5in@ ; `string'
PUBLIC	??_C@_0DF@PBABBPHF@Failed?5to?5locate?5crew?8s?5viewpoi@ ; `string'
PUBLIC	?__LINE__Var@?0??get_viper_display_viewpoint@@YGXW4VIEW_MODES@@@Z@4JA ; `get_viper_display_viewpoint'::`1'::__LINE__Var
PUBLIC	??_C@_0BG@EANNPEON@get_gunship_entity?5?$CI?$CJ@ ; `string'
PUBLIC	??_C@_0BH@OJOOJLIP@virtual_cockpit_inst3d@	; `string'
PUBLIC	??_C@_0BH@KFJLEDAI@Invalid?5view?5mode?5?$DN?5?$CFd@ ; `string'
PUBLIC	??_C@_0DG@OCDOFANO@Failed?5to?5locate?5display?5viewpo@ ; `string'
PUBLIC	?__LINE__Var@?0??damage_viper_virtual_cockpit_main_rotors@@YGXH@Z@4JA ; `damage_viper_virtual_cockpit_main_rotors'::`1'::__LINE__Var
PUBLIC	??_C@_0DC@IAHLIPKH@virtual_cockpit_inst3d_detail_l@ ; `string'
PUBLIC	??_C@_0DB@HAAFKHLI@virtual_cockpit_inst3d_detail_l@ ; `string'
PUBLIC	??_C@_06DDNABPCD@inst3d@			; `string'
PUBLIC	?__LINE__Var@?0??restore_viper_virtual_cockpit_main_rotors@@YGXXZ@4JA ; `restore_viper_virtual_cockpit_main_rotors'::`1'::__LINE__Var
PUBLIC	__real@3c8efa35
PUBLIC	__real@3d20902e
PUBLIC	__real@3d4ccccd
PUBLIC	__real@3d8068dc
PUBLIC	__real@3d886595
PUBLIC	__real@3dcccccd
PUBLIC	__real@3dd0c43d
PUBLIC	__real@3de0ded3
PUBLIC	__real@3e50cb29
PUBLIC	__real@3ef4f8b588e368f1
PUBLIC	__real@3f000000
PUBLIC	__real@3f00002000400080
PUBLIC	__real@3f24a234
PUBLIC	__real@3f800000
PUBLIC	__real@3f9999999999999a
PUBLIC	__real@3ff0000000000000
PUBLIC	__real@4000000000000000
PUBLIC	__real@4008000000000000
PUBLIC	__real@400921fb60000000
PUBLIC	__real@4014000000000000
PUBLIC	__real@4016cbe4
PUBLIC	__real@40cfff8000000000
PUBLIC	__real@41200000
PUBLIC	__real@461c4000
PUBLIC	__real@bff8000000000000
PUBLIC	__real@c008000000000000
PUBLIC	__xmm@80000000800000008000000080000000
EXTRN	_memcpy:PROC
EXTRN	?process_assert@@YGXPBD0H@Z:PROC		; process_assert
EXTRN	?debug_fatal@@YAXPBDZZ:PROC			; debug_fatal
EXTRN	?query_TIR_active@@YAHXZ:PROC			; query_TIR_active
EXTRN	?TIR_GetRoll@@YGMXZ:PROC			; TIR_GetRoll
EXTRN	?get_3d_transformation_matrix@@YGXQAY02MMMM@Z:PROC ; get_3d_transformation_matrix
EXTRN	?multiply_transpose_matrix3x3_vec3d@@YGXPAUVEC3D@@QAY02$$CBMPBU1@@Z:PROC ; multiply_transpose_matrix3x3_vec3d
EXTRN	?multiply_matrix3x3_matrix3x3@@YGXQAY02MQAY02$$CBM1@Z:PROC ; multiply_matrix3x3_matrix3x3
EXTRN	?get_inverse_matrix@@YGXQAY02MQAY02$$CBM@Z:PROC	; get_inverse_matrix
EXTRN	?clear_zbuffer_screen@@YGXXZ:PROC		; clear_zbuffer_screen
EXTRN	?recalculate_3d_environment_settings@@YGXPAUENV_3D@@@Z:PROC ; recalculate_3d_environment_settings
EXTRN	?set_3d_view_distances@@YGXPAUENV_3D@@MMMM@Z:PROC ; set_3d_view_distances
EXTRN	?realise_3d_clip_extents@@YGXPAUENV_3D@@@Z:PROC	; realise_3d_clip_extents
EXTRN	?construct_3d_object@@YGPAUOBJECT_3D_INSTANCE@@H@Z:PROC ; construct_3d_object
EXTRN	?destruct_3d_object@@YGXPAUOBJECT_3D_INSTANCE@@@Z:PROC ; destruct_3d_object
EXTRN	?get_3d_sub_object_world_viewpoint@@YGXPAUOBJECT_3D_SUB_INSTANCE@@PAUVIEWPOINT@@@Z:PROC ; get_3d_sub_object_world_viewpoint
EXTRN	?insert_zbiased_relative_object_into_3d_scene@@YGXW4OBJECT_3D_DRAWING_TYPES@@PAUVEC3D@@PAXM@Z:PROC ; insert_zbiased_relative_object_into_3d_scene
EXTRN	?draw_3d_scene@@YGXXZ:PROC			; draw_3d_scene
EXTRN	?begin_3d_scene@@YGHXZ:PROC			; begin_3d_scene
EXTRN	?end_3d_scene@@YGXXZ:PROC			; end_3d_scene
EXTRN	?create_light_3d_source@@YGPAULIGHT_3D_SOURCE@@W4LIGHT_3D_TYPE@@HPAUVEC3D@@MMMM@Z:PROC ; create_light_3d_source
EXTRN	?destroy_light_3d_source@@YGXPAULIGHT_3D_SOURCE@@@Z:PROC ; destroy_light_3d_source
EXTRN	?insert_light_3d_source_into_3d_scene@@YGXPAULIGHT_3D_SOURCE@@@Z:PROC ; insert_light_3d_source_into_3d_scene
EXTRN	?remove_light_3d_source_from_3d_scene@@YGXPAULIGHT_3D_SOURCE@@@Z:PROC ; remove_light_3d_source_from_3d_scene
EXTRN	?find_object_3d_sub_object@@YG?AW4SUB_OBJECT_SEARCH_RESULT_TYPES@@PAUOBJECT_3D_SUB_OBJECT_SEARCH_DATA@@@Z:PROC ; find_object_3d_sub_object
EXTRN	?animate_helicopter_main_rotors@@YGXPAUENTITY@@HH@Z:PROC ; animate_helicopter_main_rotors
EXTRN	?animate_damaged_helicopter_main_rotors@@YGXPAUENTITY@@H@Z:PROC ; animate_damaged_helicopter_main_rotors
EXTRN	?animate_helicopter_virtual_cockpit_main_rotors@@YGXPAUENTITY@@PAUOBJECT_3D_INSTANCE@@@Z:PROC ; animate_helicopter_virtual_cockpit_main_rotors
EXTRN	?damage_helicopter_main_rotor_inst3d@@YGHPAUOBJECT_3D_INSTANCE@@H@Z:PROC ; damage_helicopter_main_rotor_inst3d
EXTRN	?restore_helicopter_main_rotor_inst3d@@YGHPAUOBJECT_3D_INSTANCE@@@Z:PROC ; restore_helicopter_main_rotor_inst3d
EXTRN	?get_helicopter_main_rotors_blurred@@YGHPAUENTITY@@@Z:PROC ; get_helicopter_main_rotors_blurred
EXTRN	?set_rotation_angle_of_helicopter_main_rotors@@YGXPAUOBJECT_3D_INSTANCE@@M@Z:PROC ; set_rotation_angle_of_helicopter_main_rotors
EXTRN	?get_rotation_angle_of_helicopter_main_rotors@@YGMPAUOBJECT_3D_INSTANCE@@@Z:PROC ; get_rotation_angle_of_helicopter_main_rotors
EXTRN	?draw_viper_hud_on_lens_texture@@YGXXZ:PROC	; draw_viper_hud_on_lens_texture
EXTRN	?draw_viper_mfd@@YGXXZ:PROC			; draw_viper_mfd
EXTRN	?initialise_common_virtual_cockpit_cameras@@YGXXZ:PROC ; initialise_common_virtual_cockpit_cameras
EXTRN	?deinitialise_common_virtual_cockpit_cameras@@YGXXZ:PROC ; deinitialise_common_virtual_cockpit_cameras
EXTRN	?print_edit_wide_cockpit@@YGXXZ:PROC		; print_edit_wide_cockpit
EXTRN	?move_edit_wide_cockpit@@YGXXZ:PROC		; move_edit_wide_cockpit
EXTRN	?get_viper_co_pilot_head_pitch_datum@@YGMXZ:PROC ; get_viper_co_pilot_head_pitch_datum
EXTRN	?initialise_viper_crew_animation@@YGXXZ:PROC	; initialise_viper_crew_animation
EXTRN	?deinitialise_viper_crew_animation@@YGXXZ:PROC	; deinitialise_viper_crew_animation
EXTRN	?update_viper_crew_animation@@YGXXZ:PROC	; update_viper_crew_animation
EXTRN	?set_viper_crew_head_positions@@YGXXZ:PROC	; set_viper_crew_head_positions
EXTRN	?initialise_viper_virtual_cockpit_canopy_doors@@YGXXZ:PROC ; initialise_viper_virtual_cockpit_canopy_doors
EXTRN	?animate_viper_virtual_cockpit_canopy_doors@@YGXXZ:PROC ; animate_viper_virtual_cockpit_canopy_doors
EXTRN	?draw_viper_virtual_cockpit_lamps@@YGXXZ:PROC	; draw_viper_virtual_cockpit_lamps
EXTRN	?get_viper_pilot_head_pitch_datum@@YGMXZ:PROC	; get_viper_pilot_head_pitch_datum
EXTRN	?initialise_viper_virtual_cockpit_wiper_and_rain_effect@@YGXXZ:PROC ; initialise_viper_virtual_cockpit_wiper_and_rain_effect
EXTRN	?deinitialise_viper_virtual_cockpit_wiper_and_rain_effect@@YGXXZ:PROC ; deinitialise_viper_virtual_cockpit_wiper_and_rain_effect
EXTRN	?get_time_acceleration@@YGHXZ:PROC		; get_time_acceleration
EXTRN	?move_by_rate@@YGMMMM@Z:PROC			; move_by_rate
EXTRN	?random_number_seed@@3HA:DWORD			; random_number_seed
EXTRN	?command_line_TIR_6DOF@@3HA:DWORD		; command_line_TIR_6DOF
EXTRN	?command_line_g_force_head_movment_modifier@@3MA:DWORD ; command_line_g_force_head_movment_modifier
EXTRN	?null_entity_pointer_message@@3PBDB:DWORD	; null_entity_pointer_message
EXTRN	?global_options@@3UGLOBAL_OPTIONS_DATA@@A:BYTE	; global_options
EXTRN	?fn_get_local_entity_attitude_matrix@@3PAP6GXPAUENTITY@@QAY02M@ZA:BYTE ; fn_get_local_entity_attitude_matrix
EXTRN	?overload_invalid_int_type_message@@3PBDB:DWORD	; overload_invalid_int_type_message
EXTRN	?fn_get_local_entity_int_value@@3PAY0BBH@P6GHPAUENTITY@@W4INT_TYPES@@@ZA:BYTE ; fn_get_local_entity_int_value
EXTRN	?overload_invalid_ptr_type_message@@3PBDB:DWORD	; overload_invalid_ptr_type_message
EXTRN	?fn_get_local_entity_ptr_value@@3PAY0BE@P6GPAXPAUENTITY@@W4PTR_TYPES@@@ZA:BYTE ; fn_get_local_entity_ptr_value
EXTRN	?overload_invalid_vec3d_type_message@@3PBDB:DWORD ; overload_invalid_vec3d_type_message
EXTRN	?fn_get_local_entity_vec3d@@3PAY0BI@P6GXPAUENTITY@@W4VEC3D_TYPES@@PAUVEC3D@@@ZA:BYTE ; fn_get_local_entity_vec3d
EXTRN	?gunship_entity@@3PAUENTITY@@A:DWORD		; gunship_entity
EXTRN	?pilot_entity@@3PAUENTITY@@A:DWORD		; pilot_entity
EXTRN	?session_entity@@3PAUENTITY@@A:DWORD		; session_entity
EXTRN	?main_3d_env@@3PAUENV_3D@@A:DWORD		; main_3d_env
EXTRN	?main_vp@@3UVIEWPOINT@@A:BYTE			; main_vp
EXTRN	?view_mode@@3W4VIEW_MODES@@A:DWORD		; view_mode
EXTRN	?pilot_head_heading@@3MA:DWORD			; pilot_head_heading
EXTRN	?pilot_head_pitch@@3MA:DWORD			; pilot_head_pitch
EXTRN	?pilot_head_vp@@3UVIEWPOINT@@A:BYTE		; pilot_head_vp
EXTRN	?wide_cockpit@@3HA:DWORD			; wide_cockpit
EXTRN	?wide_cockpit_position@@3PAUCOCKPIT_POSITION@@A:BYTE ; wide_cockpit_position
EXTRN	?wide_cockpit_nr@@3HA:DWORD			; wide_cockpit_nr
EXTRN	?current_custom_cockpit_viewpoint@@3UCOCKPIT_VIEW@@A:BYTE ; current_custom_cockpit_viewpoint
EXTRN	?night_vision_system_active@@3HA:DWORD		; night_vision_system_active
EXTRN	?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A:DWORD ; virtual_cockpit_inst3d
EXTRN	?pilot_head_pitch_datum@@3MA:DWORD		; pilot_head_pitch_datum
EXTRN	?co_pilot_head_pitch_datum@@3MA:DWORD		; co_pilot_head_pitch_datum
EXTRN	?current_flight_dynamics@@3PAUDYNAMICS_TYPE@@A:DWORD ; current_flight_dynamics
EXTRN	__fltused:DWORD
_BSS	SEGMENT
?virtual_cockpit_inst3d_detail_level_normal_inst3d@@3PAUOBJECT_3D_INSTANCE@@A DD 01H DUP (?) ; virtual_cockpit_inst3d_detail_level_normal_inst3d
?virtual_cockpit_inst3d_detail_level_glass_inst3d@@3PAUOBJECT_3D_INSTANCE@@A DD 01H DUP (?) ; virtual_cockpit_inst3d_detail_level_glass_inst3d
?x_head_g_movement@@3MA DD 01H DUP (?)			; x_head_g_movement
?y_head_g_movement@@3MA DD 01H DUP (?)			; y_head_g_movement
?random_vibration_x@@3MA DD 01H DUP (?)			; random_vibration_x
?random_vibration_y@@3MA DD 01H DUP (?)			; random_vibration_y
_BSS	ENDS
;	COMDAT __xmm@80000000800000008000000080000000
CONST	SEGMENT
__xmm@80000000800000008000000080000000 DB 00H, 00H, 00H, 080H, 00H, 00H, 00H
	DB	080H, 00H, 00H, 00H, 080H, 00H, 00H, 00H, 080H
CONST	ENDS
;	COMDAT __real@c008000000000000
CONST	SEGMENT
__real@c008000000000000 DQ 0c008000000000000r	; -3
CONST	ENDS
;	COMDAT __real@bff8000000000000
CONST	SEGMENT
__real@bff8000000000000 DQ 0bff8000000000000r	; -1.5
CONST	ENDS
;	COMDAT __real@461c4000
CONST	SEGMENT
__real@461c4000 DD 0461c4000r			; 10000
CONST	ENDS
;	COMDAT __real@41200000
CONST	SEGMENT
__real@41200000 DD 041200000r			; 10
CONST	ENDS
;	COMDAT __real@40cfff8000000000
CONST	SEGMENT
__real@40cfff8000000000 DQ 040cfff8000000000r	; 16383
CONST	ENDS
;	COMDAT __real@4016cbe4
CONST	SEGMENT
__real@4016cbe4 DD 04016cbe4r			; 2.35619
CONST	ENDS
;	COMDAT __real@4014000000000000
CONST	SEGMENT
__real@4014000000000000 DQ 04014000000000000r	; 5
CONST	ENDS
;	COMDAT __real@400921fb60000000
CONST	SEGMENT
__real@400921fb60000000 DQ 0400921fb60000000r	; 3.14159
CONST	ENDS
;	COMDAT __real@4008000000000000
CONST	SEGMENT
__real@4008000000000000 DQ 04008000000000000r	; 3
CONST	ENDS
;	COMDAT __real@4000000000000000
CONST	SEGMENT
__real@4000000000000000 DQ 04000000000000000r	; 2
CONST	ENDS
;	COMDAT __real@3ff0000000000000
CONST	SEGMENT
__real@3ff0000000000000 DQ 03ff0000000000000r	; 1
CONST	ENDS
;	COMDAT __real@3f9999999999999a
CONST	SEGMENT
__real@3f9999999999999a DQ 03f9999999999999ar	; 0.025
CONST	ENDS
;	COMDAT __real@3f800000
CONST	SEGMENT
__real@3f800000 DD 03f800000r			; 1
CONST	ENDS
;	COMDAT __real@3f24a234
CONST	SEGMENT
__real@3f24a234 DD 03f24a234r			; 0.6431
CONST	ENDS
;	COMDAT __real@3f00002000400080
CONST	SEGMENT
__real@3f00002000400080 DQ 03f00002000400080r	; 3.05185e-05
CONST	ENDS
;	COMDAT __real@3f000000
CONST	SEGMENT
__real@3f000000 DD 03f000000r			; 0.5
CONST	ENDS
;	COMDAT __real@3ef4f8b588e368f1
CONST	SEGMENT
__real@3ef4f8b588e368f1 DQ 03ef4f8b588e368f1r	; 2e-05
CONST	ENDS
;	COMDAT __real@3e50cb29
CONST	SEGMENT
__real@3e50cb29 DD 03e50cb29r			; 0.2039
CONST	ENDS
;	COMDAT __real@3de0ded3
CONST	SEGMENT
__real@3de0ded3 DD 03de0ded3r			; 0.1098
CONST	ENDS
;	COMDAT __real@3dd0c43d
CONST	SEGMENT
__real@3dd0c43d DD 03dd0c43dr			; 0.101937
CONST	ENDS
;	COMDAT __real@3dcccccd
CONST	SEGMENT
__real@3dcccccd DD 03dcccccdr			; 0.1
CONST	ENDS
;	COMDAT __real@3d886595
CONST	SEGMENT
__real@3d886595 DD 03d886595r			; 0.0666
CONST	ENDS
;	COMDAT __real@3d8068dc
CONST	SEGMENT
__real@3d8068dc DD 03d8068dcr			; 0.0627
CONST	ENDS
;	COMDAT __real@3d4ccccd
CONST	SEGMENT
__real@3d4ccccd DD 03d4ccccdr			; 0.05
CONST	ENDS
;	COMDAT __real@3d20902e
CONST	SEGMENT
__real@3d20902e DD 03d20902er			; 0.0392
CONST	ENDS
;	COMDAT __real@3c8efa35
CONST	SEGMENT
__real@3c8efa35 DD 03c8efa35r			; 0.0174533
CONST	ENDS
;	COMDAT ?__LINE__Var@?0??restore_viper_virtual_cockpit_main_rotors@@YGXXZ@4JA
_DATA	SEGMENT
?__LINE__Var@?0??restore_viper_virtual_cockpit_main_rotors@@YGXXZ@4JA DD 03ccH ; `restore_viper_virtual_cockpit_main_rotors'::`1'::__LINE__Var
_DATA	ENDS
;	COMDAT ??_C@_06DDNABPCD@inst3d@
CONST	SEGMENT
??_C@_06DDNABPCD@inst3d@ DB 'inst3d', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_0DB@HAAFKHLI@virtual_cockpit_inst3d_detail_l@
CONST	SEGMENT
??_C@_0DB@HAAFKHLI@virtual_cockpit_inst3d_detail_l@ DB 'virtual_cockpit_i'
	DB	'nst3d_detail_level_glass_inst3d', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_0DC@IAHLIPKH@virtual_cockpit_inst3d_detail_l@
CONST	SEGMENT
??_C@_0DC@IAHLIPKH@virtual_cockpit_inst3d_detail_l@ DB 'virtual_cockpit_i'
	DB	'nst3d_detail_level_normal_inst3d', 00H	; `string'
CONST	ENDS
;	COMDAT ?__LINE__Var@?0??damage_viper_virtual_cockpit_main_rotors@@YGXH@Z@4JA
_DATA	SEGMENT
?__LINE__Var@?0??damage_viper_virtual_cockpit_main_rotors@@YGXH@Z@4JA DD 03abH ; `damage_viper_virtual_cockpit_main_rotors'::`1'::__LINE__Var
_DATA	ENDS
;	COMDAT ??_C@_0DG@OCDOFANO@Failed?5to?5locate?5display?5viewpo@
CONST	SEGMENT
??_C@_0DG@OCDOFANO@Failed?5to?5locate?5display?5viewpo@ DB 'Failed to loc'
	DB	'ate display viewpoint in virtual cockpit', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0BH@KFJLEDAI@Invalid?5view?5mode?5?$DN?5?$CFd@
CONST	SEGMENT
??_C@_0BH@KFJLEDAI@Invalid?5view?5mode?5?$DN?5?$CFd@ DB 'Invalid view mod'
	DB	'e = %d', 00H				; `string'
CONST	ENDS
;	COMDAT ??_C@_0BH@OJOOJLIP@virtual_cockpit_inst3d@
CONST	SEGMENT
??_C@_0BH@OJOOJLIP@virtual_cockpit_inst3d@ DB 'virtual_cockpit_inst3d', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0BG@EANNPEON@get_gunship_entity?5?$CI?$CJ@
CONST	SEGMENT
??_C@_0BG@EANNPEON@get_gunship_entity?5?$CI?$CJ@ DB 'get_gunship_entity ('
	DB	')', 00H					; `string'
CONST	ENDS
;	COMDAT ?__LINE__Var@?0??get_viper_display_viewpoint@@YGXW4VIEW_MODES@@@Z@4JA
_DATA	SEGMENT
?__LINE__Var@?0??get_viper_display_viewpoint@@YGXW4VIEW_MODES@@@Z@4JA DD 0318H ; `get_viper_display_viewpoint'::`1'::__LINE__Var
_DATA	ENDS
;	COMDAT ??_C@_0DF@PBABBPHF@Failed?5to?5locate?5crew?8s?5viewpoi@
CONST	SEGMENT
??_C@_0DF@PBABBPHF@Failed?5to?5locate?5crew?8s?5viewpoi@ DB 'Failed to lo'
	DB	'cate crew''s viewpoint in virtual cockpit', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0DA@EHJMLOA@Failed?5to?5locate?5crew?8s?5head?5in@
CONST	SEGMENT
??_C@_0DA@EHJMLOA@Failed?5to?5locate?5crew?8s?5head?5in@ DB 'Failed to lo'
	DB	'cate crew''s head in virtual cockpit', 00H	; `string'
CONST	ENDS
;	COMDAT ?__LINE__Var@?0??get_viper_crew_viewpoint@@YGXXZ@4JA
_DATA	SEGMENT
?__LINE__Var@?0??get_viper_crew_viewpoint@@YGXXZ@4JA DD 0298H ; `get_viper_crew_viewpoint'::`1'::__LINE__Var
_DATA	ENDS
;	COMDAT ??_C@_0EP@GFKODKEB@c?3?2users?2nhv90?2projects?2eech?2ap@
CONST	SEGMENT
??_C@_0EP@GFKODKEB@c?3?2users?2nhv90?2projects?2eech?2ap@ DB 'c:\users\nh'
	DB	'v90\projects\eech\aphavoc\source\gunships\cockpits\viper\vi_v'
	DB	'ckpt.c', 00H				; `string'
CONST	ENDS
;	COMDAT ?__LINE__Var@?0??draw_viper_virtual_cockpit@@YGXXZ@4JA
_DATA	SEGMENT
?__LINE__Var@?0??draw_viper_virtual_cockpit@@YGXXZ@4JA DD 015bH ; `draw_viper_virtual_cockpit'::`1'::__LINE__Var
_DATA	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\gunships\cockpits\viper\vi_vckpt.c
;	COMDAT ?restore_viper_virtual_cockpit_main_rotors@@YGXXZ
_TEXT	SEGMENT
tv93 = -80						; size = 4
tv85 = -76						; size = 4
_inst3d$ = -8						; size = 4
_theta$ = -4						; size = 4
?restore_viper_virtual_cockpit_main_rotors@@YGXXZ PROC	; restore_viper_virtual_cockpit_main_rotors, COMDAT

; 972  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 50	 sub	 esp, 80			; 00000050H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 973  : 	float
; 974  : 		theta;
; 975  : 
; 976  : 	object_3d_instance
; 977  : 		*inst3d;
; 978  : 
; 979  : 	ASSERT (get_gunship_entity ());

  00009	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?gunship_entity@@3PAUENTITY@@A, 0 ; gunship_entity
  00010	75 18		 jne	 SHORT $LN2@restore_vi
  00012	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??restore_viper_virtual_cockpit_main_rotors@@YGXXZ@4JA
  00017	83 c0 07	 add	 eax, 7
  0001a	50		 push	 eax
  0001b	68 00 00 00 00	 push	 OFFSET ??_C@_0EP@GFKODKEB@c?3?2users?2nhv90?2projects?2eech?2ap@
  00020	68 00 00 00 00	 push	 OFFSET ??_C@_0BG@EANNPEON@get_gunship_entity?5?$CI?$CJ@
  00025	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN2@restore_vi:

; 980  : 
; 981  : 	ASSERT (virtual_cockpit_inst3d_detail_level_normal_inst3d);

  0002a	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?virtual_cockpit_inst3d_detail_level_normal_inst3d@@3PAUOBJECT_3D_INSTANCE@@A, 0
  00031	75 18		 jne	 SHORT $LN3@restore_vi
  00033	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??restore_viper_virtual_cockpit_main_rotors@@YGXXZ@4JA
  00038	83 c0 09	 add	 eax, 9
  0003b	50		 push	 eax
  0003c	68 00 00 00 00	 push	 OFFSET ??_C@_0EP@GFKODKEB@c?3?2users?2nhv90?2projects?2eech?2ap@
  00041	68 00 00 00 00	 push	 OFFSET ??_C@_0DC@IAHLIPKH@virtual_cockpit_inst3d_detail_l@
  00046	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN3@restore_vi:

; 982  : 	ASSERT (virtual_cockpit_inst3d_detail_level_glass_inst3d);

  0004b	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?virtual_cockpit_inst3d_detail_level_glass_inst3d@@3PAUOBJECT_3D_INSTANCE@@A, 0
  00052	75 18		 jne	 SHORT $LN4@restore_vi
  00054	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??restore_viper_virtual_cockpit_main_rotors@@YGXXZ@4JA
  00059	83 c0 0a	 add	 eax, 10			; 0000000aH
  0005c	50		 push	 eax
  0005d	68 00 00 00 00	 push	 OFFSET ??_C@_0EP@GFKODKEB@c?3?2users?2nhv90?2projects?2eech?2ap@
  00062	68 00 00 00 00	 push	 OFFSET ??_C@_0DB@HAAFKHLI@virtual_cockpit_inst3d_detail_l@
  00067	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN4@restore_vi:

; 983  : 
; 984  : 	inst3d = (object_3d_instance *) get_local_entity_ptr_value (get_gunship_entity (), PTR_TYPE_INSTANCE_3D_OBJECT);

  0006c	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?gunship_entity@@3PAUENTITY@@A, 0 ; gunship_entity
  00073	74 0c		 je	 SHORT $LN7@restore_vi
  00075	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gunship_entity@@3PAUENTITY@@A ; gunship_entity
  0007a	8b 08		 mov	 ecx, DWORD PTR [eax]
  0007c	89 4d b4	 mov	 DWORD PTR tv85[ebp], ecx
  0007f	eb 21		 jmp	 SHORT $LN8@restore_vi
$LN7@restore_vi:
  00081	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??restore_viper_virtual_cockpit_main_rotors@@YGXXZ@4JA
  00087	83 c2 0c	 add	 edx, 12			; 0000000cH
  0008a	52		 push	 edx
  0008b	68 00 00 00 00	 push	 OFFSET ??_C@_0EP@GFKODKEB@c?3?2users?2nhv90?2projects?2eech?2ap@
  00090	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  00095	50		 push	 eax
  00096	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  0009b	c7 45 b4 00 00
	00 00		 mov	 DWORD PTR tv85[ebp], 0
$LN8@restore_vi:
  000a2	b9 01 00 00 00	 mov	 ecx, 1
  000a7	85 c9		 test	 ecx, ecx
  000a9	74 09		 je	 SHORT $LN9@restore_vi
  000ab	c7 45 b0 02 00
	00 00		 mov	 DWORD PTR tv93[ebp], 2
  000b2	eb 21		 jmp	 SHORT $LN10@restore_vi
$LN9@restore_vi:
  000b4	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??restore_viper_virtual_cockpit_main_rotors@@YGXXZ@4JA
  000ba	83 c2 0c	 add	 edx, 12			; 0000000cH
  000bd	52		 push	 edx
  000be	68 00 00 00 00	 push	 OFFSET ??_C@_0EP@GFKODKEB@c?3?2users?2nhv90?2projects?2eech?2ap@
  000c3	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_ptr_type_message@@3PBDB ; overload_invalid_ptr_type_message
  000c8	50		 push	 eax
  000c9	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  000ce	c7 45 b0 00 00
	00 00		 mov	 DWORD PTR tv93[ebp], 0
$LN10@restore_vi:
  000d5	6a 02		 push	 2
  000d7	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gunship_entity@@3PAUENTITY@@A ; gunship_entity
  000dd	51		 push	 ecx
  000de	6b 55 b4 50	 imul	 edx, DWORD PTR tv85[ebp], 80
  000e2	8b 45 b0	 mov	 eax, DWORD PTR tv93[ebp]
  000e5	8b 8c 82 00 00
	00 00		 mov	 ecx, DWORD PTR ?fn_get_local_entity_ptr_value@@3PAY0BE@P6GPAXPAUENTITY@@W4PTR_TYPES@@@ZA[edx+eax*4]
  000ec	ff d1		 call	 ecx
  000ee	89 45 f8	 mov	 DWORD PTR _inst3d$[ebp], eax

; 985  : 
; 986  : 	ASSERT (inst3d);

  000f1	83 7d f8 00	 cmp	 DWORD PTR _inst3d$[ebp], 0
  000f5	75 18		 jne	 SHORT $LN5@restore_vi
  000f7	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??restore_viper_virtual_cockpit_main_rotors@@YGXXZ@4JA
  000fc	83 c0 0e	 add	 eax, 14			; 0000000eH
  000ff	50		 push	 eax
  00100	68 00 00 00 00	 push	 OFFSET ??_C@_0EP@GFKODKEB@c?3?2users?2nhv90?2projects?2eech?2ap@
  00105	68 00 00 00 00	 push	 OFFSET ??_C@_06DDNABPCD@inst3d@
  0010a	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN5@restore_vi:

; 987  : 
; 988  : 	theta = get_rotation_angle_of_helicopter_main_rotors (inst3d);

  0010f	8b 45 f8	 mov	 eax, DWORD PTR _inst3d$[ebp]
  00112	50		 push	 eax
  00113	e8 00 00 00 00	 call	 ?get_rotation_angle_of_helicopter_main_rotors@@YGMPAUOBJECT_3D_INSTANCE@@@Z ; get_rotation_angle_of_helicopter_main_rotors
  00118	d9 5d fc	 fstp	 DWORD PTR _theta$[ebp]

; 989  : 
; 990  : 	set_rotation_angle_of_helicopter_main_rotors (virtual_cockpit_inst3d_detail_level_normal_inst3d, theta);

  0011b	51		 push	 ecx
  0011c	f3 0f 10 45 fc	 movss	 xmm0, DWORD PTR _theta$[ebp]
  00121	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00126	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d_detail_level_normal_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  0012b	50		 push	 eax
  0012c	e8 00 00 00 00	 call	 ?set_rotation_angle_of_helicopter_main_rotors@@YGXPAUOBJECT_3D_INSTANCE@@M@Z ; set_rotation_angle_of_helicopter_main_rotors

; 991  : 	set_rotation_angle_of_helicopter_main_rotors (virtual_cockpit_inst3d_detail_level_glass_inst3d, theta);

  00131	51		 push	 ecx
  00132	f3 0f 10 45 fc	 movss	 xmm0, DWORD PTR _theta$[ebp]
  00137	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  0013c	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d_detail_level_glass_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  00141	50		 push	 eax
  00142	e8 00 00 00 00	 call	 ?set_rotation_angle_of_helicopter_main_rotors@@YGXPAUOBJECT_3D_INSTANCE@@M@Z ; set_rotation_angle_of_helicopter_main_rotors

; 992  : 
; 993  : 	animate_helicopter_virtual_cockpit_main_rotors (get_gunship_entity (), virtual_cockpit_inst3d_detail_level_normal_inst3d);

  00147	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d_detail_level_normal_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  0014c	50		 push	 eax
  0014d	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gunship_entity@@3PAUENTITY@@A ; gunship_entity
  00153	51		 push	 ecx
  00154	e8 00 00 00 00	 call	 ?animate_helicopter_virtual_cockpit_main_rotors@@YGXPAUENTITY@@PAUOBJECT_3D_INSTANCE@@@Z ; animate_helicopter_virtual_cockpit_main_rotors

; 994  : 	animate_helicopter_virtual_cockpit_main_rotors (get_gunship_entity (), virtual_cockpit_inst3d_detail_level_glass_inst3d);

  00159	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d_detail_level_glass_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  0015e	50		 push	 eax
  0015f	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gunship_entity@@3PAUENTITY@@A ; gunship_entity
  00165	51		 push	 ecx
  00166	e8 00 00 00 00	 call	 ?animate_helicopter_virtual_cockpit_main_rotors@@YGXPAUENTITY@@PAUOBJECT_3D_INSTANCE@@@Z ; animate_helicopter_virtual_cockpit_main_rotors

; 995  : 
; 996  : 	restore_helicopter_main_rotor_inst3d (virtual_cockpit_inst3d_detail_level_normal_inst3d);

  0016b	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d_detail_level_normal_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  00170	50		 push	 eax
  00171	e8 00 00 00 00	 call	 ?restore_helicopter_main_rotor_inst3d@@YGHPAUOBJECT_3D_INSTANCE@@@Z ; restore_helicopter_main_rotor_inst3d

; 997  : 	restore_helicopter_main_rotor_inst3d (virtual_cockpit_inst3d_detail_level_glass_inst3d);

  00176	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d_detail_level_glass_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  0017b	50		 push	 eax
  0017c	e8 00 00 00 00	 call	 ?restore_helicopter_main_rotor_inst3d@@YGHPAUOBJECT_3D_INSTANCE@@@Z ; restore_helicopter_main_rotor_inst3d

; 998  : }

  00181	5f		 pop	 edi
  00182	5e		 pop	 esi
  00183	5b		 pop	 ebx
  00184	8b e5		 mov	 esp, ebp
  00186	5d		 pop	 ebp
  00187	c3		 ret	 0
?restore_viper_virtual_cockpit_main_rotors@@YGXXZ ENDP	; restore_viper_virtual_cockpit_main_rotors
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\gunships\cockpits\viper\vi_vckpt.c
;	COMDAT ?damage_viper_virtual_cockpit_main_rotors@@YGXH@Z
_TEXT	SEGMENT
tv93 = -80						; size = 4
tv85 = -76						; size = 4
_inst3d$ = -8						; size = 4
_theta$ = -4						; size = 4
_seed$ = 8						; size = 4
?damage_viper_virtual_cockpit_main_rotors@@YGXH@Z PROC	; damage_viper_virtual_cockpit_main_rotors, COMDAT

; 939  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 50	 sub	 esp, 80			; 00000050H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 940  : 	float
; 941  : 		theta;
; 942  : 
; 943  : 	object_3d_instance
; 944  : 		*inst3d;
; 945  : 
; 946  : 	ASSERT (get_gunship_entity ());

  00009	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?gunship_entity@@3PAUENTITY@@A, 0 ; gunship_entity
  00010	75 18		 jne	 SHORT $LN2@damage_vip
  00012	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??damage_viper_virtual_cockpit_main_rotors@@YGXH@Z@4JA
  00017	83 c0 07	 add	 eax, 7
  0001a	50		 push	 eax
  0001b	68 00 00 00 00	 push	 OFFSET ??_C@_0EP@GFKODKEB@c?3?2users?2nhv90?2projects?2eech?2ap@
  00020	68 00 00 00 00	 push	 OFFSET ??_C@_0BG@EANNPEON@get_gunship_entity?5?$CI?$CJ@
  00025	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN2@damage_vip:

; 947  : 
; 948  : 	ASSERT (virtual_cockpit_inst3d_detail_level_normal_inst3d);

  0002a	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?virtual_cockpit_inst3d_detail_level_normal_inst3d@@3PAUOBJECT_3D_INSTANCE@@A, 0
  00031	75 18		 jne	 SHORT $LN3@damage_vip
  00033	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??damage_viper_virtual_cockpit_main_rotors@@YGXH@Z@4JA
  00038	83 c0 09	 add	 eax, 9
  0003b	50		 push	 eax
  0003c	68 00 00 00 00	 push	 OFFSET ??_C@_0EP@GFKODKEB@c?3?2users?2nhv90?2projects?2eech?2ap@
  00041	68 00 00 00 00	 push	 OFFSET ??_C@_0DC@IAHLIPKH@virtual_cockpit_inst3d_detail_l@
  00046	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN3@damage_vip:

; 949  : 	ASSERT (virtual_cockpit_inst3d_detail_level_glass_inst3d);

  0004b	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?virtual_cockpit_inst3d_detail_level_glass_inst3d@@3PAUOBJECT_3D_INSTANCE@@A, 0
  00052	75 18		 jne	 SHORT $LN4@damage_vip
  00054	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??damage_viper_virtual_cockpit_main_rotors@@YGXH@Z@4JA
  00059	83 c0 0a	 add	 eax, 10			; 0000000aH
  0005c	50		 push	 eax
  0005d	68 00 00 00 00	 push	 OFFSET ??_C@_0EP@GFKODKEB@c?3?2users?2nhv90?2projects?2eech?2ap@
  00062	68 00 00 00 00	 push	 OFFSET ??_C@_0DB@HAAFKHLI@virtual_cockpit_inst3d_detail_l@
  00067	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN4@damage_vip:

; 950  : 
; 951  : 	inst3d = (object_3d_instance *) get_local_entity_ptr_value (get_gunship_entity (), PTR_TYPE_INSTANCE_3D_OBJECT);

  0006c	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?gunship_entity@@3PAUENTITY@@A, 0 ; gunship_entity
  00073	74 0c		 je	 SHORT $LN7@damage_vip
  00075	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gunship_entity@@3PAUENTITY@@A ; gunship_entity
  0007a	8b 08		 mov	 ecx, DWORD PTR [eax]
  0007c	89 4d b4	 mov	 DWORD PTR tv85[ebp], ecx
  0007f	eb 21		 jmp	 SHORT $LN8@damage_vip
$LN7@damage_vip:
  00081	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??damage_viper_virtual_cockpit_main_rotors@@YGXH@Z@4JA
  00087	83 c2 0c	 add	 edx, 12			; 0000000cH
  0008a	52		 push	 edx
  0008b	68 00 00 00 00	 push	 OFFSET ??_C@_0EP@GFKODKEB@c?3?2users?2nhv90?2projects?2eech?2ap@
  00090	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  00095	50		 push	 eax
  00096	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  0009b	c7 45 b4 00 00
	00 00		 mov	 DWORD PTR tv85[ebp], 0
$LN8@damage_vip:
  000a2	b9 01 00 00 00	 mov	 ecx, 1
  000a7	85 c9		 test	 ecx, ecx
  000a9	74 09		 je	 SHORT $LN9@damage_vip
  000ab	c7 45 b0 02 00
	00 00		 mov	 DWORD PTR tv93[ebp], 2
  000b2	eb 21		 jmp	 SHORT $LN10@damage_vip
$LN9@damage_vip:
  000b4	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??damage_viper_virtual_cockpit_main_rotors@@YGXH@Z@4JA
  000ba	83 c2 0c	 add	 edx, 12			; 0000000cH
  000bd	52		 push	 edx
  000be	68 00 00 00 00	 push	 OFFSET ??_C@_0EP@GFKODKEB@c?3?2users?2nhv90?2projects?2eech?2ap@
  000c3	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_ptr_type_message@@3PBDB ; overload_invalid_ptr_type_message
  000c8	50		 push	 eax
  000c9	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  000ce	c7 45 b0 00 00
	00 00		 mov	 DWORD PTR tv93[ebp], 0
$LN10@damage_vip:
  000d5	6a 02		 push	 2
  000d7	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gunship_entity@@3PAUENTITY@@A ; gunship_entity
  000dd	51		 push	 ecx
  000de	6b 55 b4 50	 imul	 edx, DWORD PTR tv85[ebp], 80
  000e2	8b 45 b0	 mov	 eax, DWORD PTR tv93[ebp]
  000e5	8b 8c 82 00 00
	00 00		 mov	 ecx, DWORD PTR ?fn_get_local_entity_ptr_value@@3PAY0BE@P6GPAXPAUENTITY@@W4PTR_TYPES@@@ZA[edx+eax*4]
  000ec	ff d1		 call	 ecx
  000ee	89 45 f8	 mov	 DWORD PTR _inst3d$[ebp], eax

; 952  : 
; 953  : 	ASSERT (inst3d);

  000f1	83 7d f8 00	 cmp	 DWORD PTR _inst3d$[ebp], 0
  000f5	75 18		 jne	 SHORT $LN5@damage_vip
  000f7	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??damage_viper_virtual_cockpit_main_rotors@@YGXH@Z@4JA
  000fc	83 c0 0e	 add	 eax, 14			; 0000000eH
  000ff	50		 push	 eax
  00100	68 00 00 00 00	 push	 OFFSET ??_C@_0EP@GFKODKEB@c?3?2users?2nhv90?2projects?2eech?2ap@
  00105	68 00 00 00 00	 push	 OFFSET ??_C@_06DDNABPCD@inst3d@
  0010a	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN5@damage_vip:

; 954  : 
; 955  : 	theta = get_rotation_angle_of_helicopter_main_rotors (inst3d);

  0010f	8b 45 f8	 mov	 eax, DWORD PTR _inst3d$[ebp]
  00112	50		 push	 eax
  00113	e8 00 00 00 00	 call	 ?get_rotation_angle_of_helicopter_main_rotors@@YGMPAUOBJECT_3D_INSTANCE@@@Z ; get_rotation_angle_of_helicopter_main_rotors
  00118	d9 5d fc	 fstp	 DWORD PTR _theta$[ebp]

; 956  : 
; 957  : 	set_rotation_angle_of_helicopter_main_rotors (virtual_cockpit_inst3d_detail_level_normal_inst3d, theta);

  0011b	51		 push	 ecx
  0011c	f3 0f 10 45 fc	 movss	 xmm0, DWORD PTR _theta$[ebp]
  00121	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00126	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d_detail_level_normal_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  0012b	50		 push	 eax
  0012c	e8 00 00 00 00	 call	 ?set_rotation_angle_of_helicopter_main_rotors@@YGXPAUOBJECT_3D_INSTANCE@@M@Z ; set_rotation_angle_of_helicopter_main_rotors

; 958  : 	set_rotation_angle_of_helicopter_main_rotors (virtual_cockpit_inst3d_detail_level_glass_inst3d, theta);

  00131	51		 push	 ecx
  00132	f3 0f 10 45 fc	 movss	 xmm0, DWORD PTR _theta$[ebp]
  00137	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  0013c	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d_detail_level_glass_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  00141	50		 push	 eax
  00142	e8 00 00 00 00	 call	 ?set_rotation_angle_of_helicopter_main_rotors@@YGXPAUOBJECT_3D_INSTANCE@@M@Z ; set_rotation_angle_of_helicopter_main_rotors

; 959  : 
; 960  : 	animate_helicopter_virtual_cockpit_main_rotors (get_gunship_entity (), virtual_cockpit_inst3d_detail_level_normal_inst3d);

  00147	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d_detail_level_normal_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  0014c	50		 push	 eax
  0014d	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gunship_entity@@3PAUENTITY@@A ; gunship_entity
  00153	51		 push	 ecx
  00154	e8 00 00 00 00	 call	 ?animate_helicopter_virtual_cockpit_main_rotors@@YGXPAUENTITY@@PAUOBJECT_3D_INSTANCE@@@Z ; animate_helicopter_virtual_cockpit_main_rotors

; 961  : 	animate_helicopter_virtual_cockpit_main_rotors (get_gunship_entity (), virtual_cockpit_inst3d_detail_level_glass_inst3d);

  00159	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d_detail_level_glass_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  0015e	50		 push	 eax
  0015f	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gunship_entity@@3PAUENTITY@@A ; gunship_entity
  00165	51		 push	 ecx
  00166	e8 00 00 00 00	 call	 ?animate_helicopter_virtual_cockpit_main_rotors@@YGXPAUENTITY@@PAUOBJECT_3D_INSTANCE@@@Z ; animate_helicopter_virtual_cockpit_main_rotors

; 962  : 
; 963  : 	damage_helicopter_main_rotor_inst3d (virtual_cockpit_inst3d_detail_level_normal_inst3d, seed);

  0016b	8b 45 08	 mov	 eax, DWORD PTR _seed$[ebp]
  0016e	50		 push	 eax
  0016f	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?virtual_cockpit_inst3d_detail_level_normal_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  00175	51		 push	 ecx
  00176	e8 00 00 00 00	 call	 ?damage_helicopter_main_rotor_inst3d@@YGHPAUOBJECT_3D_INSTANCE@@H@Z ; damage_helicopter_main_rotor_inst3d

; 964  : 	damage_helicopter_main_rotor_inst3d (virtual_cockpit_inst3d_detail_level_glass_inst3d, seed);

  0017b	8b 45 08	 mov	 eax, DWORD PTR _seed$[ebp]
  0017e	50		 push	 eax
  0017f	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?virtual_cockpit_inst3d_detail_level_glass_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  00185	51		 push	 ecx
  00186	e8 00 00 00 00	 call	 ?damage_helicopter_main_rotor_inst3d@@YGHPAUOBJECT_3D_INSTANCE@@H@Z ; damage_helicopter_main_rotor_inst3d

; 965  : }

  0018b	5f		 pop	 edi
  0018c	5e		 pop	 esi
  0018d	5b		 pop	 ebx
  0018e	8b e5		 mov	 esp, ebp
  00190	5d		 pop	 ebp
  00191	c2 04 00	 ret	 4
?damage_viper_virtual_cockpit_main_rotors@@YGXH@Z ENDP	; damage_viper_virtual_cockpit_main_rotors
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\gunships\cockpits\viper\vi_vckpt.c
;	COMDAT ?get_viper_display_viewpoint@@YGXW4VIEW_MODES@@@Z
_TEXT	SEGMENT
tv158 = -144						; size = 4
tv150 = -140						; size = 4
tv91 = -140						; size = 4
tv74 = -140						; size = 4
_position$ = -72					; size = 12
_search$ = -60						; size = 56
_index$ = -4						; size = 4
_mode$ = 8						; size = 4
?get_viper_display_viewpoint@@YGXW4VIEW_MODES@@@Z PROC	; get_viper_display_viewpoint, COMDAT

; 792  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec 90 00 00
	00		 sub	 esp, 144		; 00000090H
  00009	53		 push	 ebx
  0000a	56		 push	 esi
  0000b	57		 push	 edi

; 793  : 	object_3d_sub_object_index_numbers
; 794  : 		index;
; 795  : 
; 796  : 	object_3d_sub_object_search_data
; 797  : 		search;
; 798  : 
; 799  : 	vec3d
; 800  : 		position;
; 801  : 
; 802  : 	ASSERT (get_gunship_entity ());

  0000c	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?gunship_entity@@3PAUENTITY@@A, 0 ; gunship_entity
  00013	75 18		 jne	 SHORT $LN4@get_viper_
  00015	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??get_viper_display_viewpoint@@YGXW4VIEW_MODES@@@Z@4JA
  0001a	83 c0 0a	 add	 eax, 10			; 0000000aH
  0001d	50		 push	 eax
  0001e	68 00 00 00 00	 push	 OFFSET ??_C@_0EP@GFKODKEB@c?3?2users?2nhv90?2projects?2eech?2ap@
  00023	68 00 00 00 00	 push	 OFFSET ??_C@_0BG@EANNPEON@get_gunship_entity?5?$CI?$CJ@
  00028	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN4@get_viper_:

; 803  : 
; 804  : 	ASSERT (virtual_cockpit_inst3d);

  0002d	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A, 0 ; virtual_cockpit_inst3d
  00034	75 18		 jne	 SHORT $LN5@get_viper_
  00036	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??get_viper_display_viewpoint@@YGXW4VIEW_MODES@@@Z@4JA
  0003b	83 c0 0c	 add	 eax, 12			; 0000000cH
  0003e	50		 push	 eax
  0003f	68 00 00 00 00	 push	 OFFSET ??_C@_0EP@GFKODKEB@c?3?2users?2nhv90?2projects?2eech?2ap@
  00044	68 00 00 00 00	 push	 OFFSET ??_C@_0BH@OJOOJLIP@virtual_cockpit_inst3d@
  00049	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN5@get_viper_:

; 805  : 
; 806  : 	switch (mode)

  0004e	8b 45 08	 mov	 eax, DWORD PTR _mode$[ebp]
  00051	89 85 74 ff ff
	ff		 mov	 DWORD PTR tv74[ebp], eax
  00057	8b 8d 74 ff ff
	ff		 mov	 ecx, DWORD PTR tv74[ebp]
  0005d	83 e9 26	 sub	 ecx, 38			; 00000026H
  00060	89 8d 74 ff ff
	ff		 mov	 DWORD PTR tv74[ebp], ecx
  00066	83 bd 74 ff ff
	ff 03		 cmp	 DWORD PTR tv74[ebp], 3
  0006d	77 31		 ja	 SHORT $LN10@get_viper_
  0006f	8b 95 74 ff ff
	ff		 mov	 edx, DWORD PTR tv74[ebp]
  00075	ff 24 95 00 00
	00 00		 jmp	 DWORD PTR $LN20@get_viper_[edx*4]
$LN6@get_viper_:

; 807  : 	{
; 808  : 		////////////////////////////////////////
; 809  : 		case VIEW_MODE_VIRTUAL_COCKPIT_PILOT_LHS_DISPLAY:
; 810  : 		////////////////////////////////////////
; 811  : 		{
; 812  : 			index = OBJECT_3D_SUB_OBJECT_COCKPIT_VIEW_MFD_FL;

  0007c	c7 45 fc 93 00
	00 00		 mov	 DWORD PTR _index$[ebp], 147 ; 00000093H

; 813  : 
; 814  : 			break;

  00083	eb 2c		 jmp	 SHORT $LN2@get_viper_
$LN7@get_viper_:

; 815  : 		}
; 816  : 		////////////////////////////////////////
; 817  : 		case VIEW_MODE_VIRTUAL_COCKPIT_PILOT_RHS_DISPLAY:
; 818  : 		////////////////////////////////////////
; 819  : 		{
; 820  : 			index = OBJECT_3D_SUB_OBJECT_COCKPIT_VIEW_MFD_FR;

  00085	c7 45 fc 94 00
	00 00		 mov	 DWORD PTR _index$[ebp], 148 ; 00000094H

; 821  : 
; 822  : 			break;

  0008c	eb 23		 jmp	 SHORT $LN2@get_viper_
$LN8@get_viper_:

; 823  : 		}
; 824  : 		////////////////////////////////////////
; 825  : 		case VIEW_MODE_VIRTUAL_COCKPIT_CO_PILOT_LHS_DISPLAY:
; 826  : 		////////////////////////////////////////
; 827  : 		{
; 828  : 			index = OBJECT_3D_SUB_OBJECT_COCKPIT_VIEW_MFD_RL;

  0008e	c7 45 fc 95 00
	00 00		 mov	 DWORD PTR _index$[ebp], 149 ; 00000095H

; 829  : 
; 830  : 			break;

  00095	eb 1a		 jmp	 SHORT $LN2@get_viper_
$LN9@get_viper_:

; 831  : 		}
; 832  : 		////////////////////////////////////////
; 833  : 		case VIEW_MODE_VIRTUAL_COCKPIT_CO_PILOT_RHS_DISPLAY:
; 834  : 		////////////////////////////////////////
; 835  : 		{
; 836  : 			index = OBJECT_3D_SUB_OBJECT_COCKPIT_VIEW_MFD_RR;

  00097	c7 45 fc 96 00
	00 00		 mov	 DWORD PTR _index$[ebp], 150 ; 00000096H

; 837  : 
; 838  : 			break;

  0009e	eb 11		 jmp	 SHORT $LN2@get_viper_
$LN10@get_viper_:

; 839  : 		}
; 840  : 		////////////////////////////////////////
; 841  : 		default:
; 842  : 		////////////////////////////////////////
; 843  : 		{
; 844  : 			debug_fatal ("Invalid view mode = %d", mode);

  000a0	8b 45 08	 mov	 eax, DWORD PTR _mode$[ebp]
  000a3	50		 push	 eax
  000a4	68 00 00 00 00	 push	 OFFSET ??_C@_0BH@KFJLEDAI@Invalid?5view?5mode?5?$DN?5?$CFd@
  000a9	e8 00 00 00 00	 call	 ?debug_fatal@@YAXPBDZZ	; debug_fatal
  000ae	83 c4 08	 add	 esp, 8
$LN2@get_viper_:

; 845  : 
; 846  : 			break;
; 847  : 		}
; 848  : 	}
; 849  : 
; 850  : 	virtual_cockpit_inst3d->vp.x = 0.0;

  000b1	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  000b6	0f 57 c0	 xorps	 xmm0, xmm0
  000b9	f3 0f 11 40 08	 movss	 DWORD PTR [eax+8], xmm0

; 851  : 	virtual_cockpit_inst3d->vp.y = 0.0;

  000be	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  000c3	0f 57 c0	 xorps	 xmm0, xmm0
  000c6	f3 0f 11 40 0c	 movss	 DWORD PTR [eax+12], xmm0

; 852  : 	virtual_cockpit_inst3d->vp.z = 0.0;

  000cb	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  000d0	0f 57 c0	 xorps	 xmm0, xmm0
  000d3	f3 0f 11 40 10	 movss	 DWORD PTR [eax+16], xmm0

; 853  : 
; 854  : 	////////////////////////////////////////
; 855  : 	//
; 856  : 
; 857  : 	#if DEBUG_MODULE_FINE_DISPLAY_CAMERA_POSITION_ADJUSTMENT
; 858  : 
; 859  : 	get_identity_matrix3x3 (virtual_cockpit_inst3d->vp.attitude);
; 860  : 
; 861  : 	#else
; 862  : 
; 863  : 	get_local_entity_attitude_matrix (get_gunship_entity (), virtual_cockpit_inst3d->vp.attitude);

  000d8	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?gunship_entity@@3PAUENTITY@@A, 0 ; gunship_entity
  000df	74 0f		 je	 SHORT $LN14@get_viper_
  000e1	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gunship_entity@@3PAUENTITY@@A ; gunship_entity
  000e6	8b 08		 mov	 ecx, DWORD PTR [eax]
  000e8	89 8d 74 ff ff
	ff		 mov	 DWORD PTR tv91[ebp], ecx
  000ee	eb 24		 jmp	 SHORT $LN15@get_viper_
$LN14@get_viper_:
  000f0	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??get_viper_display_viewpoint@@YGXW4VIEW_MODES@@@Z@4JA
  000f6	83 c2 47	 add	 edx, 71			; 00000047H
  000f9	52		 push	 edx
  000fa	68 00 00 00 00	 push	 OFFSET ??_C@_0EP@GFKODKEB@c?3?2users?2nhv90?2projects?2eech?2ap@
  000ff	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  00104	50		 push	 eax
  00105	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  0010a	c7 85 74 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv91[ebp], 0
$LN15@get_viper_:
  00114	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  0011a	83 c1 14	 add	 ecx, 20			; 00000014H
  0011d	51		 push	 ecx
  0011e	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gunship_entity@@3PAUENTITY@@A ; gunship_entity
  00124	52		 push	 edx
  00125	8b 85 74 ff ff
	ff		 mov	 eax, DWORD PTR tv91[ebp]
  0012b	8b 0c 85 00 00
	00 00		 mov	 ecx, DWORD PTR ?fn_get_local_entity_attitude_matrix@@3PAP6GXPAUENTITY@@QAY02M@ZA[eax*4]
  00132	ff d1		 call	 ecx

; 864  : 
; 865  : 	#endif
; 866  : 
; 867  : 	//
; 868  : 	////////////////////////////////////////
; 869  : 
; 870  : 	search.search_depth = 0;

  00134	c7 45 cc 00 00
	00 00		 mov	 DWORD PTR _search$[ebp+8], 0

; 871  : 	search.search_object = virtual_cockpit_inst3d;

  0013b	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  00140	89 45 c4	 mov	 DWORD PTR _search$[ebp], eax

; 872  : 	search.sub_object_index = index;

  00143	8b 45 fc	 mov	 eax, DWORD PTR _index$[ebp]
  00146	89 45 d0	 mov	 DWORD PTR _search$[ebp+12], eax

; 873  : 
; 874  : 	if (find_object_3d_sub_object (&search) == SUB_OBJECT_SEARCH_RESULT_OBJECT_FOUND)

  00149	8d 45 c4	 lea	 eax, DWORD PTR _search$[ebp]
  0014c	50		 push	 eax
  0014d	e8 00 00 00 00	 call	 ?find_object_3d_sub_object@@YG?AW4SUB_OBJECT_SEARCH_RESULT_TYPES@@PAUOBJECT_3D_SUB_OBJECT_SEARCH_DATA@@@Z ; find_object_3d_sub_object
  00152	83 f8 01	 cmp	 eax, 1
  00155	75 10		 jne	 SHORT $LN11@get_viper_

; 875  : 	{
; 876  : 		get_3d_sub_object_world_viewpoint (search.result_sub_object, &main_vp);

  00157	68 00 00 00 00	 push	 OFFSET ?main_vp@@3UVIEWPOINT@@A ; main_vp
  0015c	8b 45 c8	 mov	 eax, DWORD PTR _search$[ebp+4]
  0015f	50		 push	 eax
  00160	e8 00 00 00 00	 call	 ?get_3d_sub_object_world_viewpoint@@YGXPAUOBJECT_3D_SUB_INSTANCE@@PAUVIEWPOINT@@@Z ; get_3d_sub_object_world_viewpoint

; 877  : 	}
; 878  : 	else

  00165	eb 0d		 jmp	 SHORT $LN12@get_viper_
$LN11@get_viper_:

; 879  : 	{
; 880  : 		debug_fatal ("Failed to locate display viewpoint in virtual cockpit");

  00167	68 00 00 00 00	 push	 OFFSET ??_C@_0DG@OCDOFANO@Failed?5to?5locate?5display?5viewpo@
  0016c	e8 00 00 00 00	 call	 ?debug_fatal@@YAXPBDZZ	; debug_fatal
  00171	83 c4 04	 add	 esp, 4
$LN12@get_viper_:

; 881  : 	}
; 882  : 
; 883  : 	position.x = -main_vp.x;

  00174	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR ?main_vp@@3UVIEWPOINT@@A
  0017c	0f 57 05 00 00
	00 00		 xorps	 xmm0, DWORD PTR __xmm@80000000800000008000000080000000
  00183	f3 0f 11 45 b8	 movss	 DWORD PTR _position$[ebp], xmm0

; 884  : 	position.y = -main_vp.y;

  00188	f3 0f 10 05 04
	00 00 00	 movss	 xmm0, DWORD PTR ?main_vp@@3UVIEWPOINT@@A+4
  00190	0f 57 05 00 00
	00 00		 xorps	 xmm0, DWORD PTR __xmm@80000000800000008000000080000000
  00197	f3 0f 11 45 bc	 movss	 DWORD PTR _position$[ebp+4], xmm0

; 885  : 	position.z = -main_vp.z;

  0019c	f3 0f 10 05 08
	00 00 00	 movss	 xmm0, DWORD PTR ?main_vp@@3UVIEWPOINT@@A+8
  001a4	0f 57 05 00 00
	00 00		 xorps	 xmm0, DWORD PTR __xmm@80000000800000008000000080000000
  001ab	f3 0f 11 45 c0	 movss	 DWORD PTR _position$[ebp+8], xmm0

; 886  : 
; 887  : 	////////////////////////////////////////
; 888  : 	//
; 889  : 
; 890  : 	#if DEBUG_MODULE_FINE_DISPLAY_CAMERA_POSITION_ADJUSTMENT
; 891  : 	{
; 892  : 		static float
; 893  : 			z_offset = 0.0;
; 894  : 
; 895  : 		float
; 896  : 			dx,
; 897  : 			dy,
; 898  : 			dz;
; 899  : 
; 900  : 		if (check_key (DIK_Q))
; 901  : 		{
; 902  : 			z_offset -= 0.0001;
; 903  : 		}
; 904  : 
; 905  : 		if (check_key (DIK_A))
; 906  : 		{
; 907  : 			z_offset += 0.0001;
; 908  : 		}
; 909  : 
; 910  : 		dx = main_vp.zv.x * z_offset;
; 911  : 		dy = main_vp.zv.y * z_offset;
; 912  : 		dz = main_vp.zv.z * z_offset;
; 913  : 
; 914  : 		position.x += dx;
; 915  : 		position.y += dy;
; 916  : 		position.z += dz;
; 917  : 
; 918  : 		debug_filtered_log ("offset=%.6f x=%.6f y=%.6f z=%.6f", z_offset, position.x, position.y, position.z);
; 919  : 	}
; 920  : 	#endif
; 921  : 
; 922  : 	//
; 923  : 	////////////////////////////////////////
; 924  : 
; 925  : 	multiply_transpose_matrix3x3_vec3d (&virtual_cockpit_inst3d->vp.position, main_vp.attitude, &position);

  001b0	8d 45 b8	 lea	 eax, DWORD PTR _position$[ebp]
  001b3	50		 push	 eax
  001b4	68 0c 00 00 00	 push	 OFFSET ?main_vp@@3UVIEWPOINT@@A+12
  001b9	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  001bf	83 c1 08	 add	 ecx, 8
  001c2	51		 push	 ecx
  001c3	e8 00 00 00 00	 call	 ?multiply_transpose_matrix3x3_vec3d@@YGXPAUVEC3D@@QAY02$$CBMPBU1@@Z ; multiply_transpose_matrix3x3_vec3d

; 926  : 
; 927  : 	get_local_entity_vec3d (get_gunship_entity (), VEC3D_TYPE_POSITION, &position);

  001c8	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?gunship_entity@@3PAUENTITY@@A, 0 ; gunship_entity
  001cf	74 0f		 je	 SHORT $LN16@get_viper_
  001d1	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gunship_entity@@3PAUENTITY@@A ; gunship_entity
  001d6	8b 08		 mov	 ecx, DWORD PTR [eax]
  001d8	89 8d 74 ff ff
	ff		 mov	 DWORD PTR tv150[ebp], ecx
  001de	eb 27		 jmp	 SHORT $LN17@get_viper_
$LN16@get_viper_:
  001e0	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??get_viper_display_viewpoint@@YGXW4VIEW_MODES@@@Z@4JA
  001e6	81 c2 87 00 00
	00		 add	 edx, 135		; 00000087H
  001ec	52		 push	 edx
  001ed	68 00 00 00 00	 push	 OFFSET ??_C@_0EP@GFKODKEB@c?3?2users?2nhv90?2projects?2eech?2ap@
  001f2	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  001f7	50		 push	 eax
  001f8	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  001fd	c7 85 74 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv150[ebp], 0
$LN17@get_viper_:
  00207	b9 01 00 00 00	 mov	 ecx, 1
  0020c	85 c9		 test	 ecx, ecx
  0020e	74 0c		 je	 SHORT $LN18@get_viper_
  00210	c7 85 70 ff ff
	ff 08 00 00 00	 mov	 DWORD PTR tv158[ebp], 8
  0021a	eb 27		 jmp	 SHORT $LN19@get_viper_
$LN18@get_viper_:
  0021c	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??get_viper_display_viewpoint@@YGXW4VIEW_MODES@@@Z@4JA
  00222	81 c2 87 00 00
	00		 add	 edx, 135		; 00000087H
  00228	52		 push	 edx
  00229	68 00 00 00 00	 push	 OFFSET ??_C@_0EP@GFKODKEB@c?3?2users?2nhv90?2projects?2eech?2ap@
  0022e	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_vec3d_type_message@@3PBDB ; overload_invalid_vec3d_type_message
  00233	50		 push	 eax
  00234	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00239	c7 85 70 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv158[ebp], 0
$LN19@get_viper_:
  00243	8d 4d b8	 lea	 ecx, DWORD PTR _position$[ebp]
  00246	51		 push	 ecx
  00247	6a 08		 push	 8
  00249	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gunship_entity@@3PAUENTITY@@A ; gunship_entity
  0024f	52		 push	 edx
  00250	6b 85 74 ff ff
	ff 60		 imul	 eax, DWORD PTR tv150[ebp], 96
  00257	8b 8d 70 ff ff
	ff		 mov	 ecx, DWORD PTR tv158[ebp]
  0025d	8b 94 88 00 00
	00 00		 mov	 edx, DWORD PTR ?fn_get_local_entity_vec3d@@3PAY0BI@P6GXPAUENTITY@@W4VEC3D_TYPES@@PAUVEC3D@@@ZA[eax+ecx*4]
  00264	ff d2		 call	 edx

; 928  : 
; 929  : 	main_vp.x += position.x;

  00266	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR ?main_vp@@3UVIEWPOINT@@A
  0026e	f3 0f 58 45 b8	 addss	 xmm0, DWORD PTR _position$[ebp]
  00273	f3 0f 11 05 00
	00 00 00	 movss	 DWORD PTR ?main_vp@@3UVIEWPOINT@@A, xmm0

; 930  : 	main_vp.y += position.y;

  0027b	f3 0f 10 05 04
	00 00 00	 movss	 xmm0, DWORD PTR ?main_vp@@3UVIEWPOINT@@A+4
  00283	f3 0f 58 45 bc	 addss	 xmm0, DWORD PTR _position$[ebp+4]
  00288	f3 0f 11 05 04
	00 00 00	 movss	 DWORD PTR ?main_vp@@3UVIEWPOINT@@A+4, xmm0

; 931  : 	main_vp.z += position.z;

  00290	f3 0f 10 05 08
	00 00 00	 movss	 xmm0, DWORD PTR ?main_vp@@3UVIEWPOINT@@A+8
  00298	f3 0f 58 45 c0	 addss	 xmm0, DWORD PTR _position$[ebp+8]
  0029d	f3 0f 11 05 08
	00 00 00	 movss	 DWORD PTR ?main_vp@@3UVIEWPOINT@@A+8, xmm0

; 932  : }

  002a5	5f		 pop	 edi
  002a6	5e		 pop	 esi
  002a7	5b		 pop	 ebx
  002a8	8b e5		 mov	 esp, ebp
  002aa	5d		 pop	 ebp
  002ab	c2 04 00	 ret	 4
  002ae	66 90		 npad	 2
$LN20@get_viper_:
  002b0	00 00 00 00	 DD	 $LN6@get_viper_
  002b4	00 00 00 00	 DD	 $LN7@get_viper_
  002b8	00 00 00 00	 DD	 $LN8@get_viper_
  002bc	00 00 00 00	 DD	 $LN9@get_viper_
?get_viper_display_viewpoint@@YGXW4VIEW_MODES@@@Z ENDP	; get_viper_display_viewpoint
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\gunships\cockpits\viper\vi_vckpt.c
;	COMDAT ?get_viper_crew_viewpoint@@YGXXZ
_TEXT	SEGMENT
tv309 = -296						; size = 8
tv172 = -296						; size = 4
tv76 = -296						; size = 4
tv164 = -292						; size = 4
tv149 = -292						; size = 4
tv69 = -292						; size = 4
_shiftWorld$1 = -224					; size = 12
_shiftVP$2 = -212					; size = 12
_invAttitude$3 = -200					; size = 36
_head_pitch_datum$ = -164				; size = 4
_vp$ = -160						; size = 48
_search_viewpoint$ = -112				; size = 56
_search_head$ = -56					; size = 56
?get_viper_crew_viewpoint@@YGXXZ PROC			; get_viper_crew_viewpoint, COMDAT

; 664  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec 28 01 00
	00		 sub	 esp, 296		; 00000128H
  00009	53		 push	 ebx
  0000a	56		 push	 esi
  0000b	57		 push	 edi

; 665  : 	object_3d_sub_object_search_data
; 666  : 		search_head,
; 667  : 		search_viewpoint;
; 668  : 
; 669  : 	viewpoint
; 670  : 		vp;
; 671  : 
; 672  : 	float
; 673  : 		head_pitch_datum;
; 674  : 
; 675  : 	//
; 676  : 	// select head
; 677  : 	//
; 678  : 
; 679  : 	if (get_local_entity_int_value (get_pilot_entity (), INT_TYPE_CREW_ROLE) == CREW_ROLE_PILOT)

  0000c	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?pilot_entity@@3PAUENTITY@@A, 0 ; pilot_entity
  00013	74 0f		 je	 SHORT $LN13@get_viper_
  00015	a1 00 00 00 00	 mov	 eax, DWORD PTR ?pilot_entity@@3PAUENTITY@@A ; pilot_entity
  0001a	8b 08		 mov	 ecx, DWORD PTR [eax]
  0001c	89 8d dc fe ff
	ff		 mov	 DWORD PTR tv69[ebp], ecx
  00022	eb 20		 jmp	 SHORT $LN14@get_viper_
$LN13@get_viper_:
  00024	68 a7 02 00 00	 push	 679			; 000002a7H
  00029	68 00 00 00 00	 push	 OFFSET ??_C@_0EP@GFKODKEB@c?3?2users?2nhv90?2projects?2eech?2ap@
  0002e	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  00034	52		 push	 edx
  00035	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  0003a	c7 85 dc fe ff
	ff 00 00 00 00	 mov	 DWORD PTR tv69[ebp], 0
$LN14@get_viper_:
  00044	b8 01 00 00 00	 mov	 eax, 1
  00049	85 c0		 test	 eax, eax
  0004b	74 0c		 je	 SHORT $LN15@get_viper_
  0004d	c7 85 d8 fe ff
	ff 23 00 00 00	 mov	 DWORD PTR tv76[ebp], 35	; 00000023H
  00057	eb 20		 jmp	 SHORT $LN16@get_viper_
$LN15@get_viper_:
  00059	68 a7 02 00 00	 push	 679			; 000002a7H
  0005e	68 00 00 00 00	 push	 OFFSET ??_C@_0EP@GFKODKEB@c?3?2users?2nhv90?2projects?2eech?2ap@
  00063	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?overload_invalid_int_type_message@@3PBDB ; overload_invalid_int_type_message
  00069	51		 push	 ecx
  0006a	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  0006f	c7 85 d8 fe ff
	ff 00 00 00 00	 mov	 DWORD PTR tv76[ebp], 0
$LN16@get_viper_:
  00079	6a 23		 push	 35			; 00000023H
  0007b	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?pilot_entity@@3PAUENTITY@@A ; pilot_entity
  00081	52		 push	 edx
  00082	69 85 dc fe ff
	ff 5c 04 00 00	 imul	 eax, DWORD PTR tv69[ebp], 1116
  0008c	8b 8d d8 fe ff
	ff		 mov	 ecx, DWORD PTR tv76[ebp]
  00092	8b 94 88 00 00
	00 00		 mov	 edx, DWORD PTR ?fn_get_local_entity_int_value@@3PAY0BBH@P6GHPAUENTITY@@W4INT_TYPES@@@ZA[eax+ecx*4]
  00099	ff d2		 call	 edx
  0009b	85 c0		 test	 eax, eax
  0009d	75 20		 jne	 SHORT $LN2@get_viper_

; 680  : 	{
; 681  : 		search_head.sub_object_index = OBJECT_3D_SUB_OBJECT_PILOT_HEAD;

  0009f	c7 45 d4 bf 00
	00 00		 mov	 DWORD PTR _search_head$[ebp+12], 191 ; 000000bfH

; 682  : 
; 683  : 		search_viewpoint.sub_object_index = OBJECT_3D_SUB_OBJECT_PILOT_VIEWPOINT;

  000a6	c7 45 9c c0 00
	00 00		 mov	 DWORD PTR _search_viewpoint$[ebp+12], 192 ; 000000c0H

; 684  : 
; 685  : 		head_pitch_datum = pilot_head_pitch_datum;

  000ad	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR ?pilot_head_pitch_datum@@3MA
  000b5	f3 0f 11 85 5c
	ff ff ff	 movss	 DWORD PTR _head_pitch_datum$[ebp], xmm0

; 686  : 	}
; 687  : 	else

  000bd	eb 1e		 jmp	 SHORT $LN3@get_viper_
$LN2@get_viper_:

; 688  : 	{
; 689  : 		search_head.sub_object_index = OBJECT_3D_SUB_OBJECT_WSO_HEAD;

  000bf	c7 45 d4 ad 00
	00 00		 mov	 DWORD PTR _search_head$[ebp+12], 173 ; 000000adH

; 690  : 
; 691  : 		search_viewpoint.sub_object_index = OBJECT_3D_SUB_OBJECT_WSO_VIEWPOINT;

  000c6	c7 45 9c af 00
	00 00		 mov	 DWORD PTR _search_viewpoint$[ebp+12], 175 ; 000000afH

; 692  : 
; 693  : 		head_pitch_datum = co_pilot_head_pitch_datum;

  000cd	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR ?co_pilot_head_pitch_datum@@3MA
  000d5	f3 0f 11 85 5c
	ff ff ff	 movss	 DWORD PTR _head_pitch_datum$[ebp], xmm0
$LN3@get_viper_:

; 694  : 	}
; 695  : 
; 696  : 	//
; 697  : 	// rotate head
; 698  : 	//
; 699  : 
; 700  : 	search_head.search_depth = 0;

  000dd	c7 45 d0 00 00
	00 00		 mov	 DWORD PTR _search_head$[ebp+8], 0

; 701  : 	search_head.search_object = virtual_cockpit_inst3d;

  000e4	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  000e9	89 45 c8	 mov	 DWORD PTR _search_head$[ebp], eax

; 702  : 
; 703  : 	if (find_object_3d_sub_object (&search_head) == SUB_OBJECT_SEARCH_RESULT_OBJECT_FOUND)

  000ec	8d 45 c8	 lea	 eax, DWORD PTR _search_head$[ebp]
  000ef	50		 push	 eax
  000f0	e8 00 00 00 00	 call	 ?find_object_3d_sub_object@@YG?AW4SUB_OBJECT_SEARCH_RESULT_TYPES@@PAUOBJECT_3D_SUB_OBJECT_SEARCH_DATA@@@Z ; find_object_3d_sub_object
  000f5	83 f8 01	 cmp	 eax, 1
  000f8	0f 85 88 00 00
	00		 jne	 $LN4@get_viper_

; 704  : 	{
; 705  : 		search_head.result_sub_object->relative_heading = -pilot_head_heading;

  000fe	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR ?pilot_head_heading@@3MA
  00106	0f 57 05 00 00
	00 00		 xorps	 xmm0, DWORD PTR __xmm@80000000800000008000000080000000
  0010d	8b 45 cc	 mov	 eax, DWORD PTR _search_head$[ebp+4]
  00110	f3 0f 11 40 18	 movss	 DWORD PTR [eax+24], xmm0

; 706  : 		search_head.result_sub_object->relative_pitch = head_pitch_datum - pilot_head_pitch;

  00115	f3 0f 10 85 5c
	ff ff ff	 movss	 xmm0, DWORD PTR _head_pitch_datum$[ebp]
  0011d	f3 0f 5c 05 00
	00 00 00	 subss	 xmm0, DWORD PTR ?pilot_head_pitch@@3MA
  00125	8b 45 cc	 mov	 eax, DWORD PTR _search_head$[ebp+4]
  00128	f3 0f 11 40 1c	 movss	 DWORD PTR [eax+28], xmm0

; 707  : 
; 708  : 		if ((command_line_TIR_6DOF == TRUE)&&(query_TIR_active() == TRUE))	// Retro 6Feb2005

  0012d	83 3d 00 00 00
	00 01		 cmp	 DWORD PTR ?command_line_TIR_6DOF@@3HA, 1 ; command_line_TIR_6DOF
  00134	75 43		 jne	 SHORT $LN6@get_viper_
  00136	e8 00 00 00 00	 call	 ?query_TIR_active@@YAHXZ ; query_TIR_active
  0013b	83 f8 01	 cmp	 eax, 1
  0013e	75 39		 jne	 SHORT $LN6@get_viper_

; 709  : 			search_head.result_sub_object->relative_roll = TIR_GetRoll() / 16383. * PI / 2.;	// Retro 6Feb2005

  00140	e8 00 00 00 00	 call	 ?TIR_GetRoll@@YGMXZ	; TIR_GetRoll
  00145	dd 9d d8 fe ff
	ff		 fstp	 QWORD PTR tv309[ebp]
  0014b	f2 0f 10 85 d8
	fe ff ff	 movsd	 xmm0, QWORD PTR tv309[ebp]
  00153	f2 0f 5e 05 00
	00 00 00	 divsd	 xmm0, QWORD PTR __real@40cfff8000000000
  0015b	f2 0f 59 05 00
	00 00 00	 mulsd	 xmm0, QWORD PTR __real@400921fb60000000
  00163	f2 0f 5e 05 00
	00 00 00	 divsd	 xmm0, QWORD PTR __real@4000000000000000
  0016b	f2 0f 5a c0	 cvtsd2ss xmm0, xmm0
  0016f	8b 45 cc	 mov	 eax, DWORD PTR _search_head$[ebp+4]
  00172	f3 0f 11 40 20	 movss	 DWORD PTR [eax+32], xmm0

; 710  : 		else

  00177	eb 0b		 jmp	 SHORT $LN7@get_viper_
$LN6@get_viper_:

; 711  : 			search_head.result_sub_object->relative_roll = 0.0;

  00179	8b 45 cc	 mov	 eax, DWORD PTR _search_head$[ebp+4]
  0017c	0f 57 c0	 xorps	 xmm0, xmm0
  0017f	f3 0f 11 40 20	 movss	 DWORD PTR [eax+32], xmm0
$LN7@get_viper_:

; 712  : 	}
; 713  : 	else

  00184	eb 0d		 jmp	 SHORT $LN5@get_viper_
$LN4@get_viper_:

; 714  : 	{
; 715  : 		debug_fatal ("Failed to locate crew's head in virtual cockpit");

  00186	68 00 00 00 00	 push	 OFFSET ??_C@_0DA@EHJMLOA@Failed?5to?5locate?5crew?8s?5head?5in@
  0018b	e8 00 00 00 00	 call	 ?debug_fatal@@YAXPBDZZ	; debug_fatal
  00190	83 c4 04	 add	 esp, 4
$LN5@get_viper_:

; 716  : 	}
; 717  : 
; 718  : 	//
; 719  : 	// get viewpoint (avoid jitter)
; 720  : 	//
; 721  : 
; 722  : 	search_viewpoint.search_object = virtual_cockpit_inst3d;

  00193	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  00198	89 45 90	 mov	 DWORD PTR _search_viewpoint$[ebp], eax

; 723  : 	search_viewpoint.search_depth = 0;

  0019b	c7 45 98 00 00
	00 00		 mov	 DWORD PTR _search_viewpoint$[ebp+8], 0

; 724  : 
; 725  : 	if (find_object_3d_sub_object (&search_viewpoint) == SUB_OBJECT_SEARCH_RESULT_OBJECT_FOUND)

  001a2	8d 45 90	 lea	 eax, DWORD PTR _search_viewpoint$[ebp]
  001a5	50		 push	 eax
  001a6	e8 00 00 00 00	 call	 ?find_object_3d_sub_object@@YG?AW4SUB_OBJECT_SEARCH_RESULT_TYPES@@PAUOBJECT_3D_SUB_OBJECT_SEARCH_DATA@@@Z ; find_object_3d_sub_object
  001ab	83 f8 01	 cmp	 eax, 1
  001ae	0f 85 16 03 00
	00		 jne	 $LN8@get_viper_

; 726  : 	{
; 727  : 		virtual_cockpit_inst3d->vp.x = 0.0;

  001b4	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  001b9	0f 57 c0	 xorps	 xmm0, xmm0
  001bc	f3 0f 11 40 08	 movss	 DWORD PTR [eax+8], xmm0

; 728  : 		virtual_cockpit_inst3d->vp.y = 0.0;

  001c1	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  001c6	0f 57 c0	 xorps	 xmm0, xmm0
  001c9	f3 0f 11 40 0c	 movss	 DWORD PTR [eax+12], xmm0

; 729  : 		virtual_cockpit_inst3d->vp.z = 0.0;

  001ce	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  001d3	0f 57 c0	 xorps	 xmm0, xmm0
  001d6	f3 0f 11 40 10	 movss	 DWORD PTR [eax+16], xmm0

; 730  : 
; 731  : 		get_local_entity_attitude_matrix (get_gunship_entity (), virtual_cockpit_inst3d->vp.attitude);

  001db	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?gunship_entity@@3PAUENTITY@@A, 0 ; gunship_entity
  001e2	74 0f		 je	 SHORT $LN17@get_viper_
  001e4	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gunship_entity@@3PAUENTITY@@A ; gunship_entity
  001e9	8b 08		 mov	 ecx, DWORD PTR [eax]
  001eb	89 8d dc fe ff
	ff		 mov	 DWORD PTR tv149[ebp], ecx
  001f1	eb 24		 jmp	 SHORT $LN18@get_viper_
$LN17@get_viper_:
  001f3	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??get_viper_crew_viewpoint@@YGXXZ@4JA
  001f9	83 c2 43	 add	 edx, 67			; 00000043H
  001fc	52		 push	 edx
  001fd	68 00 00 00 00	 push	 OFFSET ??_C@_0EP@GFKODKEB@c?3?2users?2nhv90?2projects?2eech?2ap@
  00202	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  00207	50		 push	 eax
  00208	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  0020d	c7 85 dc fe ff
	ff 00 00 00 00	 mov	 DWORD PTR tv149[ebp], 0
$LN18@get_viper_:
  00217	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  0021d	83 c1 14	 add	 ecx, 20			; 00000014H
  00220	51		 push	 ecx
  00221	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gunship_entity@@3PAUENTITY@@A ; gunship_entity
  00227	52		 push	 edx
  00228	8b 85 dc fe ff
	ff		 mov	 eax, DWORD PTR tv149[ebp]
  0022e	8b 0c 85 00 00
	00 00		 mov	 ecx, DWORD PTR ?fn_get_local_entity_attitude_matrix@@3PAP6GXPAUENTITY@@QAY02M@ZA[eax*4]
  00235	ff d1		 call	 ecx

; 732  : 
; 733  : 		get_3d_sub_object_world_viewpoint (search_viewpoint.result_sub_object, &vp);

  00237	8d 85 60 ff ff
	ff		 lea	 eax, DWORD PTR _vp$[ebp]
  0023d	50		 push	 eax
  0023e	8b 4d 94	 mov	 ecx, DWORD PTR _search_viewpoint$[ebp+4]
  00241	51		 push	 ecx
  00242	e8 00 00 00 00	 call	 ?get_3d_sub_object_world_viewpoint@@YGXPAUOBJECT_3D_SUB_INSTANCE@@PAUVIEWPOINT@@@Z ; get_3d_sub_object_world_viewpoint

; 734  : 
; 735  : 		get_local_entity_vec3d (get_gunship_entity (), VEC3D_TYPE_POSITION, &pilot_head_vp.position);

  00247	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?gunship_entity@@3PAUENTITY@@A, 0 ; gunship_entity
  0024e	74 0f		 je	 SHORT $LN19@get_viper_
  00250	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gunship_entity@@3PAUENTITY@@A ; gunship_entity
  00255	8b 08		 mov	 ecx, DWORD PTR [eax]
  00257	89 8d dc fe ff
	ff		 mov	 DWORD PTR tv164[ebp], ecx
  0025d	eb 24		 jmp	 SHORT $LN20@get_viper_
$LN19@get_viper_:
  0025f	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??get_viper_crew_viewpoint@@YGXXZ@4JA
  00265	83 c2 47	 add	 edx, 71			; 00000047H
  00268	52		 push	 edx
  00269	68 00 00 00 00	 push	 OFFSET ??_C@_0EP@GFKODKEB@c?3?2users?2nhv90?2projects?2eech?2ap@
  0026e	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  00273	50		 push	 eax
  00274	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00279	c7 85 dc fe ff
	ff 00 00 00 00	 mov	 DWORD PTR tv164[ebp], 0
$LN20@get_viper_:
  00283	b9 01 00 00 00	 mov	 ecx, 1
  00288	85 c9		 test	 ecx, ecx
  0028a	74 0c		 je	 SHORT $LN21@get_viper_
  0028c	c7 85 d8 fe ff
	ff 08 00 00 00	 mov	 DWORD PTR tv172[ebp], 8
  00296	eb 24		 jmp	 SHORT $LN22@get_viper_
$LN21@get_viper_:
  00298	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??get_viper_crew_viewpoint@@YGXXZ@4JA
  0029e	83 c2 47	 add	 edx, 71			; 00000047H
  002a1	52		 push	 edx
  002a2	68 00 00 00 00	 push	 OFFSET ??_C@_0EP@GFKODKEB@c?3?2users?2nhv90?2projects?2eech?2ap@
  002a7	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_vec3d_type_message@@3PBDB ; overload_invalid_vec3d_type_message
  002ac	50		 push	 eax
  002ad	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  002b2	c7 85 d8 fe ff
	ff 00 00 00 00	 mov	 DWORD PTR tv172[ebp], 0
$LN22@get_viper_:
  002bc	68 00 00 00 00	 push	 OFFSET ?pilot_head_vp@@3UVIEWPOINT@@A ; pilot_head_vp
  002c1	6a 08		 push	 8
  002c3	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gunship_entity@@3PAUENTITY@@A ; gunship_entity
  002c9	51		 push	 ecx
  002ca	6b 95 dc fe ff
	ff 60		 imul	 edx, DWORD PTR tv164[ebp], 96
  002d1	8b 85 d8 fe ff
	ff		 mov	 eax, DWORD PTR tv172[ebp]
  002d7	8b 8c 82 00 00
	00 00		 mov	 ecx, DWORD PTR ?fn_get_local_entity_vec3d@@3PAY0BI@P6GXPAUENTITY@@W4VEC3D_TYPES@@PAUVEC3D@@@ZA[edx+eax*4]
  002de	ff d1		 call	 ecx

; 736  : 
; 737  : 		pilot_head_vp.x += vp.x;

  002e0	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR ?pilot_head_vp@@3UVIEWPOINT@@A
  002e8	f3 0f 58 85 60
	ff ff ff	 addss	 xmm0, DWORD PTR _vp$[ebp]
  002f0	f3 0f 11 05 00
	00 00 00	 movss	 DWORD PTR ?pilot_head_vp@@3UVIEWPOINT@@A, xmm0

; 738  : 		pilot_head_vp.y += vp.y;

  002f8	f3 0f 10 05 04
	00 00 00	 movss	 xmm0, DWORD PTR ?pilot_head_vp@@3UVIEWPOINT@@A+4
  00300	f3 0f 58 85 64
	ff ff ff	 addss	 xmm0, DWORD PTR _vp$[ebp+4]
  00308	f3 0f 11 05 04
	00 00 00	 movss	 DWORD PTR ?pilot_head_vp@@3UVIEWPOINT@@A+4, xmm0

; 739  : 		pilot_head_vp.z += vp.z;

  00310	f3 0f 10 05 08
	00 00 00	 movss	 xmm0, DWORD PTR ?pilot_head_vp@@3UVIEWPOINT@@A+8
  00318	f3 0f 58 85 68
	ff ff ff	 addss	 xmm0, DWORD PTR _vp$[ebp+8]
  00320	f3 0f 11 05 08
	00 00 00	 movss	 DWORD PTR ?pilot_head_vp@@3UVIEWPOINT@@A+8, xmm0

; 740  : 
; 741  : 		if ((command_line_TIR_6DOF == TRUE)&&(query_TIR_active() == TRUE))	// Retro 6Feb2005 (whole block)

  00328	83 3d 00 00 00
	00 01		 cmp	 DWORD PTR ?command_line_TIR_6DOF@@3HA, 1 ; command_line_TIR_6DOF
  0032f	0f 85 b3 00 00
	00		 jne	 $LN10@get_viper_
  00335	e8 00 00 00 00	 call	 ?query_TIR_active@@YAHXZ ; query_TIR_active
  0033a	83 f8 01	 cmp	 eax, 1
  0033d	0f 85 a5 00 00
	00		 jne	 $LN10@get_viper_

; 742  : 		{
; 743  : 			matrix3x3 invAttitude;
; 744  : 			vec3d
; 745  : 				shiftVP, shiftWorld;
; 746  : 
; 747  : 			// First lets find out the displacement the user wants.. this is in the user's viewsystem coords !!
; 748  : 			// Now store this info in a temp vect3d..
; 749  : 			shiftVP.x = current_custom_cockpit_viewpoint.x;

  00343	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR ?current_custom_cockpit_viewpoint@@3UCOCKPIT_VIEW@@A
  0034b	f3 0f 11 85 2c
	ff ff ff	 movss	 DWORD PTR _shiftVP$2[ebp], xmm0

; 750  : 			shiftVP.y = current_custom_cockpit_viewpoint.y;

  00353	f3 0f 10 05 04
	00 00 00	 movss	 xmm0, DWORD PTR ?current_custom_cockpit_viewpoint@@3UCOCKPIT_VIEW@@A+4
  0035b	f3 0f 11 85 30
	ff ff ff	 movss	 DWORD PTR _shiftVP$2[ebp+4], xmm0

; 751  : 			shiftVP.z = current_custom_cockpit_viewpoint.z;

  00363	f3 0f 10 05 08
	00 00 00	 movss	 xmm0, DWORD PTR ?current_custom_cockpit_viewpoint@@3UCOCKPIT_VIEW@@A+8
  0036b	f3 0f 11 85 34
	ff ff ff	 movss	 DWORD PTR _shiftVP$2[ebp+8], xmm0

; 752  : 
; 753  : 			// Now we need to convert our vec3d into world coords.. for this we need the inverse of the viewpoint attitude matrix..
; 754  : 			get_inverse_matrix (invAttitude, vp.attitude);

  00373	8d 85 6c ff ff
	ff		 lea	 eax, DWORD PTR _vp$[ebp+12]
  00379	50		 push	 eax
  0037a	8d 8d 38 ff ff
	ff		 lea	 ecx, DWORD PTR _invAttitude$3[ebp]
  00380	51		 push	 ecx
  00381	e8 00 00 00 00	 call	 ?get_inverse_matrix@@YGXQAY02MQAY02$$CBM@Z ; get_inverse_matrix

; 755  : 			// And rotate ! Voila, the result vec3d is now in world coords..
; 756  : 			multiply_transpose_matrix3x3_vec3d (&shiftWorld, invAttitude, &shiftVP);

  00386	8d 85 2c ff ff
	ff		 lea	 eax, DWORD PTR _shiftVP$2[ebp]
  0038c	50		 push	 eax
  0038d	8d 8d 38 ff ff
	ff		 lea	 ecx, DWORD PTR _invAttitude$3[ebp]
  00393	51		 push	 ecx
  00394	8d 95 20 ff ff
	ff		 lea	 edx, DWORD PTR _shiftWorld$1[ebp]
  0039a	52		 push	 edx
  0039b	e8 00 00 00 00	 call	 ?multiply_transpose_matrix3x3_vec3d@@YGXPAUVEC3D@@QAY02$$CBMPBU1@@Z ; multiply_transpose_matrix3x3_vec3d

; 757  : 			// Now apply that displacement.. BUT ONLY TO THE HEAD !!
; 758  : 			pilot_head_vp.x -= shiftWorld.x;

  003a0	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR ?pilot_head_vp@@3UVIEWPOINT@@A
  003a8	f3 0f 5c 85 20
	ff ff ff	 subss	 xmm0, DWORD PTR _shiftWorld$1[ebp]
  003b0	f3 0f 11 05 00
	00 00 00	 movss	 DWORD PTR ?pilot_head_vp@@3UVIEWPOINT@@A, xmm0

; 759  : 			pilot_head_vp.y -= shiftWorld.y;

  003b8	f3 0f 10 05 04
	00 00 00	 movss	 xmm0, DWORD PTR ?pilot_head_vp@@3UVIEWPOINT@@A+4
  003c0	f3 0f 5c 85 24
	ff ff ff	 subss	 xmm0, DWORD PTR _shiftWorld$1[ebp+4]
  003c8	f3 0f 11 05 04
	00 00 00	 movss	 DWORD PTR ?pilot_head_vp@@3UVIEWPOINT@@A+4, xmm0

; 760  : 			pilot_head_vp.z -= shiftWorld.z;

  003d0	f3 0f 10 05 08
	00 00 00	 movss	 xmm0, DWORD PTR ?pilot_head_vp@@3UVIEWPOINT@@A+8
  003d8	f3 0f 5c 85 28
	ff ff ff	 subss	 xmm0, DWORD PTR _shiftWorld$1[ebp+8]
  003e0	f3 0f 11 05 08
	00 00 00	 movss	 DWORD PTR ?pilot_head_vp@@3UVIEWPOINT@@A+8, xmm0
$LN10@get_viper_:

; 761  : 		}
; 762  : 
; 763  : 		memcpy (pilot_head_vp.attitude, vp.attitude, sizeof (matrix3x3));

  003e8	6a 24		 push	 36			; 00000024H
  003ea	8d 85 6c ff ff
	ff		 lea	 eax, DWORD PTR _vp$[ebp+12]
  003f0	50		 push	 eax
  003f1	68 0c 00 00 00	 push	 OFFSET ?pilot_head_vp@@3UVIEWPOINT@@A+12
  003f6	e8 00 00 00 00	 call	 _memcpy
  003fb	83 c4 0c	 add	 esp, 12			; 0000000cH

; 764  : 
; 765  : 		vp.x = -vp.x;

  003fe	f3 0f 10 85 60
	ff ff ff	 movss	 xmm0, DWORD PTR _vp$[ebp]
  00406	0f 57 05 00 00
	00 00		 xorps	 xmm0, DWORD PTR __xmm@80000000800000008000000080000000
  0040d	f3 0f 11 85 60
	ff ff ff	 movss	 DWORD PTR _vp$[ebp], xmm0

; 766  : 		vp.y = -vp.y;

  00415	f3 0f 10 85 64
	ff ff ff	 movss	 xmm0, DWORD PTR _vp$[ebp+4]
  0041d	0f 57 05 00 00
	00 00		 xorps	 xmm0, DWORD PTR __xmm@80000000800000008000000080000000
  00424	f3 0f 11 85 64
	ff ff ff	 movss	 DWORD PTR _vp$[ebp+4], xmm0

; 767  : 		vp.z = -vp.z;

  0042c	f3 0f 10 85 68
	ff ff ff	 movss	 xmm0, DWORD PTR _vp$[ebp+8]
  00434	0f 57 05 00 00
	00 00		 xorps	 xmm0, DWORD PTR __xmm@80000000800000008000000080000000
  0043b	f3 0f 11 85 68
	ff ff ff	 movss	 DWORD PTR _vp$[ebp+8], xmm0

; 768  : 
; 769  : 		multiply_transpose_matrix3x3_vec3d (&virtual_cockpit_inst3d->vp.position, pilot_head_vp.attitude, &vp.position);

  00443	8d 85 60 ff ff
	ff		 lea	 eax, DWORD PTR _vp$[ebp]
  00449	50		 push	 eax
  0044a	68 0c 00 00 00	 push	 OFFSET ?pilot_head_vp@@3UVIEWPOINT@@A+12
  0044f	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  00455	83 c1 08	 add	 ecx, 8
  00458	51		 push	 ecx
  00459	e8 00 00 00 00	 call	 ?multiply_transpose_matrix3x3_vec3d@@YGXPAUVEC3D@@QAY02$$CBMPBU1@@Z ; multiply_transpose_matrix3x3_vec3d

; 770  : 
; 771  : 		if ((command_line_TIR_6DOF == TRUE)&&(query_TIR_active() == TRUE))	// Retro 6Feb2005 (whole block)

  0045e	83 3d 00 00 00
	00 01		 cmp	 DWORD PTR ?command_line_TIR_6DOF@@3HA, 1 ; command_line_TIR_6DOF
  00465	75 61		 jne	 SHORT $LN11@get_viper_
  00467	e8 00 00 00 00	 call	 ?query_TIR_active@@YAHXZ ; query_TIR_active
  0046c	83 f8 01	 cmp	 eax, 1
  0046f	75 57		 jne	 SHORT $LN11@get_viper_

; 772  : 		{
; 773  : 			// Now shift the viewpoint (AND the model) by the positive displacement.. puts the cockpit back were it belongs..
; 774  : 			// but the viewpoint (the head) is in another place.. fini
; 775  : 			virtual_cockpit_inst3d->vp.x += current_custom_cockpit_viewpoint.x;

  00471	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  00476	f3 0f 10 40 08	 movss	 xmm0, DWORD PTR [eax+8]
  0047b	f3 0f 58 05 00
	00 00 00	 addss	 xmm0, DWORD PTR ?current_custom_cockpit_viewpoint@@3UCOCKPIT_VIEW@@A
  00483	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  00489	f3 0f 11 41 08	 movss	 DWORD PTR [ecx+8], xmm0

; 776  : 			virtual_cockpit_inst3d->vp.y += current_custom_cockpit_viewpoint.y;

  0048e	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  00493	f3 0f 10 40 0c	 movss	 xmm0, DWORD PTR [eax+12]
  00498	f3 0f 58 05 04
	00 00 00	 addss	 xmm0, DWORD PTR ?current_custom_cockpit_viewpoint@@3UCOCKPIT_VIEW@@A+4
  004a0	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  004a6	f3 0f 11 41 0c	 movss	 DWORD PTR [ecx+12], xmm0

; 777  : 			virtual_cockpit_inst3d->vp.z += current_custom_cockpit_viewpoint.z;

  004ab	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  004b0	f3 0f 10 40 10	 movss	 xmm0, DWORD PTR [eax+16]
  004b5	f3 0f 58 05 08
	00 00 00	 addss	 xmm0, DWORD PTR ?current_custom_cockpit_viewpoint@@3UCOCKPIT_VIEW@@A+8
  004bd	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  004c3	f3 0f 11 41 10	 movss	 DWORD PTR [ecx+16], xmm0
$LN11@get_viper_:

; 778  : 		}
; 779  : 
; 780  : 	}
; 781  : 	else

  004c8	eb 0d		 jmp	 SHORT $LN9@get_viper_
$LN8@get_viper_:

; 782  : 	{
; 783  : 		debug_fatal ("Failed to locate crew's viewpoint in virtual cockpit");

  004ca	68 00 00 00 00	 push	 OFFSET ??_C@_0DF@PBABBPHF@Failed?5to?5locate?5crew?8s?5viewpoi@
  004cf	e8 00 00 00 00	 call	 ?debug_fatal@@YAXPBDZZ	; debug_fatal
  004d4	83 c4 04	 add	 esp, 4
$LN9@get_viper_:

; 784  : 	}
; 785  : }

  004d7	5f		 pop	 edi
  004d8	5e		 pop	 esi
  004d9	5b		 pop	 ebx
  004da	8b e5		 mov	 esp, ebp
  004dc	5d		 pop	 ebp
  004dd	c3		 ret	 0
?get_viper_crew_viewpoint@@YGXXZ ENDP			; get_viper_crew_viewpoint
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\gunships\cockpits\viper\vi_vckpt.c
;	COMDAT ?draw_viper_virtual_cockpit@@YGXXZ
_TEXT	SEGMENT
tv300 = -240						; size = 8
tv274 = -240						; size = 8
tv338 = -232						; size = 4
tv301 = -232						; size = 8
tv275 = -232						; size = 8
tv139 = -232						; size = 4
tv81 = -232						; size = 4
tv331 = -228						; size = 4
tv131 = -228						; size = 4
tv74 = -228						; size = 4
tv64 = -228						; size = 4
_m2$1 = -160						; size = 36
_m1$2 = -124						; size = 36
_direction$3 = -88					; size = 12
_cockpit_light$4 = -76					; size = 4
_display_backlight$5 = -72				; size = 4
_search$ = -68						; size = 56
_inst3d$ = -12						; size = 4
_theta$ = -8						; size = 4
_draw_main_rotors$ = -4					; size = 4
?draw_viper_virtual_cockpit@@YGXXZ PROC			; draw_viper_virtual_cockpit, COMDAT

; 347  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec f0 00 00
	00		 sub	 esp, 240		; 000000f0H
  00009	53		 push	 ebx
  0000a	56		 push	 esi
  0000b	57		 push	 edi

; 348  : 	int
; 349  : 		draw_main_rotors;
; 350  : 
; 351  : 	float
; 352  : 		theta;
; 353  : 
; 354  : 	object_3d_instance
; 355  : 		*inst3d;
; 356  : 
; 357  : 	object_3d_sub_object_search_data
; 358  : 		search;
; 359  : 
; 360  : 	switch (get_view_mode ())

  0000c	a1 00 00 00 00	 mov	 eax, DWORD PTR ?view_mode@@3W4VIEW_MODES@@A ; view_mode
  00011	89 85 1c ff ff
	ff		 mov	 DWORD PTR tv64[ebp], eax
  00017	83 bd 1c ff ff
	ff 23		 cmp	 DWORD PTR tv64[ebp], 35	; 00000023H
  0001e	74 14		 je	 SHORT $LN4@draw_viper
  00020	83 bd 1c ff ff
	ff 25		 cmp	 DWORD PTR tv64[ebp], 37	; 00000025H
  00027	7e 0d		 jle	 SHORT $LN5@draw_viper
  00029	83 bd 1c ff ff
	ff 29		 cmp	 DWORD PTR tv64[ebp], 41	; 00000029H
  00030	7e 02		 jle	 SHORT $LN4@draw_viper
  00032	eb 02		 jmp	 SHORT $LN5@draw_viper
$LN4@draw_viper:

; 361  : 	{
; 362  : 		case VIEW_MODE_VIRTUAL_COCKPIT_CREW:
; 363  : 		case VIEW_MODE_VIRTUAL_COCKPIT_PILOT_LHS_DISPLAY:
; 364  : 		case VIEW_MODE_VIRTUAL_COCKPIT_PILOT_RHS_DISPLAY:
; 365  : 		case VIEW_MODE_VIRTUAL_COCKPIT_CO_PILOT_LHS_DISPLAY:
; 366  : 		case VIEW_MODE_VIRTUAL_COCKPIT_CO_PILOT_RHS_DISPLAY:
; 367  : 		{
; 368  : 			break;

  00034	eb 0e		 jmp	 SHORT $LN2@draw_viper
$LN5@draw_viper:

; 369  : 		}
; 370  : 		default:
; 371  : 		{
; 372  : 			if (!get_global_draw_cockpit_graphics ())

  00036	83 3d b8 01 00
	00 00		 cmp	 DWORD PTR ?global_options@@3UGLOBAL_OPTIONS_DATA@@A+440, 0
  0003d	75 05		 jne	 SHORT $LN6@draw_viper

; 373  : 			{
; 374  : 				return;

  0003f	e9 a3 0b 00 00	 jmp	 $LN1@draw_viper
$LN6@draw_viper:
$LN2@draw_viper:

; 375  : 			}
; 376  : 
; 377  : 			break;
; 378  : 		}
; 379  : 	}
; 380  : 
; 381  : 	//
; 382  : 	// lamps
; 383  : 	//
; 384  : 
; 385  : 	draw_viper_virtual_cockpit_lamps ();

  00044	e8 00 00 00 00	 call	 ?draw_viper_virtual_cockpit_lamps@@YGXXZ ; draw_viper_virtual_cockpit_lamps

; 386  : 
; 387  : 	//
; 388  : 	// crew animation
; 389  : 	//
; 390  : 
; 391  : 	set_viper_crew_head_positions ();

  00049	e8 00 00 00 00	 call	 ?set_viper_crew_head_positions@@YGXXZ ; set_viper_crew_head_positions

; 392  : 
; 393  : 	//
; 394  : 	// animate main rotors
; 395  : 	//
; 396  : 
; 397  : 	if (get_local_entity_int_value (get_gunship_entity (), INT_TYPE_MAIN_ROTOR_DAMAGED))

  0004e	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?gunship_entity@@3PAUENTITY@@A, 0 ; gunship_entity
  00055	74 0f		 je	 SHORT $LN29@draw_viper
  00057	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gunship_entity@@3PAUENTITY@@A ; gunship_entity
  0005c	8b 08		 mov	 ecx, DWORD PTR [eax]
  0005e	89 8d 1c ff ff
	ff		 mov	 DWORD PTR tv74[ebp], ecx
  00064	eb 20		 jmp	 SHORT $LN30@draw_viper
$LN29@draw_viper:
  00066	68 8d 01 00 00	 push	 397			; 0000018dH
  0006b	68 00 00 00 00	 push	 OFFSET ??_C@_0EP@GFKODKEB@c?3?2users?2nhv90?2projects?2eech?2ap@
  00070	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  00076	52		 push	 edx
  00077	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  0007c	c7 85 1c ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv74[ebp], 0
$LN30@draw_viper:
  00086	b8 01 00 00 00	 mov	 eax, 1
  0008b	85 c0		 test	 eax, eax
  0008d	74 0c		 je	 SHORT $LN31@draw_viper
  0008f	c7 85 18 ff ff
	ff 81 00 00 00	 mov	 DWORD PTR tv81[ebp], 129 ; 00000081H
  00099	eb 20		 jmp	 SHORT $LN32@draw_viper
$LN31@draw_viper:
  0009b	68 8d 01 00 00	 push	 397			; 0000018dH
  000a0	68 00 00 00 00	 push	 OFFSET ??_C@_0EP@GFKODKEB@c?3?2users?2nhv90?2projects?2eech?2ap@
  000a5	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?overload_invalid_int_type_message@@3PBDB ; overload_invalid_int_type_message
  000ab	51		 push	 ecx
  000ac	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  000b1	c7 85 18 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv81[ebp], 0
$LN32@draw_viper:
  000bb	68 81 00 00 00	 push	 129			; 00000081H
  000c0	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gunship_entity@@3PAUENTITY@@A ; gunship_entity
  000c6	52		 push	 edx
  000c7	69 85 1c ff ff
	ff 5c 04 00 00	 imul	 eax, DWORD PTR tv74[ebp], 1116
  000d1	8b 8d 18 ff ff
	ff		 mov	 ecx, DWORD PTR tv81[ebp]
  000d7	8b 94 88 00 00
	00 00		 mov	 edx, DWORD PTR ?fn_get_local_entity_int_value@@3PAY0BBH@P6GHPAUENTITY@@W4INT_TYPES@@@ZA[eax+ecx*4]
  000de	ff d2		 call	 edx
  000e0	85 c0		 test	 eax, eax
  000e2	74 0f		 je	 SHORT $LN7@draw_viper

; 398  : 	{
; 399  : 		animate_damaged_helicopter_main_rotors (get_gunship_entity (), TRUE);

  000e4	6a 01		 push	 1
  000e6	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gunship_entity@@3PAUENTITY@@A ; gunship_entity
  000eb	50		 push	 eax
  000ec	e8 00 00 00 00	 call	 ?animate_damaged_helicopter_main_rotors@@YGXPAUENTITY@@H@Z ; animate_damaged_helicopter_main_rotors

; 400  : 	}
; 401  : 	else

  000f1	eb 0f		 jmp	 SHORT $LN8@draw_viper
$LN7@draw_viper:

; 402  : 	{
; 403  : 		animate_helicopter_main_rotors (get_gunship_entity (), TRUE, FALSE);

  000f3	6a 00		 push	 0
  000f5	6a 01		 push	 1
  000f7	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gunship_entity@@3PAUENTITY@@A ; gunship_entity
  000fc	50		 push	 eax
  000fd	e8 00 00 00 00	 call	 ?animate_helicopter_main_rotors@@YGXPAUENTITY@@HH@Z ; animate_helicopter_main_rotors
$LN8@draw_viper:

; 404  : 	}
; 405  : 
; 406  : 	inst3d = (object_3d_instance *) get_local_entity_ptr_value (get_gunship_entity (), PTR_TYPE_INSTANCE_3D_OBJECT);

  00102	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?gunship_entity@@3PAUENTITY@@A, 0 ; gunship_entity
  00109	74 0f		 je	 SHORT $LN33@draw_viper
  0010b	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gunship_entity@@3PAUENTITY@@A ; gunship_entity
  00110	8b 08		 mov	 ecx, DWORD PTR [eax]
  00112	89 8d 1c ff ff
	ff		 mov	 DWORD PTR tv131[ebp], ecx
  00118	eb 24		 jmp	 SHORT $LN34@draw_viper
$LN33@draw_viper:
  0011a	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??draw_viper_virtual_cockpit@@YGXXZ@4JA
  00120	83 c2 3b	 add	 edx, 59			; 0000003bH
  00123	52		 push	 edx
  00124	68 00 00 00 00	 push	 OFFSET ??_C@_0EP@GFKODKEB@c?3?2users?2nhv90?2projects?2eech?2ap@
  00129	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  0012e	50		 push	 eax
  0012f	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00134	c7 85 1c ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv131[ebp], 0
$LN34@draw_viper:
  0013e	b9 01 00 00 00	 mov	 ecx, 1
  00143	85 c9		 test	 ecx, ecx
  00145	74 0c		 je	 SHORT $LN35@draw_viper
  00147	c7 85 18 ff ff
	ff 02 00 00 00	 mov	 DWORD PTR tv139[ebp], 2
  00151	eb 24		 jmp	 SHORT $LN36@draw_viper
$LN35@draw_viper:
  00153	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??draw_viper_virtual_cockpit@@YGXXZ@4JA
  00159	83 c2 3b	 add	 edx, 59			; 0000003bH
  0015c	52		 push	 edx
  0015d	68 00 00 00 00	 push	 OFFSET ??_C@_0EP@GFKODKEB@c?3?2users?2nhv90?2projects?2eech?2ap@
  00162	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_ptr_type_message@@3PBDB ; overload_invalid_ptr_type_message
  00167	50		 push	 eax
  00168	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  0016d	c7 85 18 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv139[ebp], 0
$LN36@draw_viper:
  00177	6a 02		 push	 2
  00179	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gunship_entity@@3PAUENTITY@@A ; gunship_entity
  0017f	51		 push	 ecx
  00180	6b 95 1c ff ff
	ff 50		 imul	 edx, DWORD PTR tv131[ebp], 80
  00187	8b 85 18 ff ff
	ff		 mov	 eax, DWORD PTR tv139[ebp]
  0018d	8b 8c 82 00 00
	00 00		 mov	 ecx, DWORD PTR ?fn_get_local_entity_ptr_value@@3PAY0BE@P6GPAXPAUENTITY@@W4PTR_TYPES@@@ZA[edx+eax*4]
  00194	ff d1		 call	 ecx
  00196	89 45 f4	 mov	 DWORD PTR _inst3d$[ebp], eax

; 407  : 
; 408  : 	theta = get_rotation_angle_of_helicopter_main_rotors (inst3d);

  00199	8b 45 f4	 mov	 eax, DWORD PTR _inst3d$[ebp]
  0019c	50		 push	 eax
  0019d	e8 00 00 00 00	 call	 ?get_rotation_angle_of_helicopter_main_rotors@@YGMPAUOBJECT_3D_INSTANCE@@@Z ; get_rotation_angle_of_helicopter_main_rotors
  001a2	d9 5d f8	 fstp	 DWORD PTR _theta$[ebp]

; 409  : 
; 410  : 	set_rotation_angle_of_helicopter_main_rotors (virtual_cockpit_inst3d, theta);

  001a5	51		 push	 ecx
  001a6	f3 0f 10 45 f8	 movss	 xmm0, DWORD PTR _theta$[ebp]
  001ab	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  001b0	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  001b5	50		 push	 eax
  001b6	e8 00 00 00 00	 call	 ?set_rotation_angle_of_helicopter_main_rotors@@YGXPAUOBJECT_3D_INSTANCE@@M@Z ; set_rotation_angle_of_helicopter_main_rotors

; 411  : 
; 412  : 	animate_helicopter_virtual_cockpit_main_rotors (get_gunship_entity (), virtual_cockpit_inst3d);

  001bb	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  001c0	50		 push	 eax
  001c1	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gunship_entity@@3PAUENTITY@@A ; gunship_entity
  001c7	51		 push	 ecx
  001c8	e8 00 00 00 00	 call	 ?animate_helicopter_virtual_cockpit_main_rotors@@YGXPAUENTITY@@PAUOBJECT_3D_INSTANCE@@@Z ; animate_helicopter_virtual_cockpit_main_rotors

; 413  : 
; 414  : 	draw_main_rotors = TRUE;

  001cd	c7 45 fc 01 00
	00 00		 mov	 DWORD PTR _draw_main_rotors$[ebp], 1

; 415  : 
; 416  : 	if (get_global_glass_cockpit ())

  001d4	83 3d 68 03 00
	00 00		 cmp	 DWORD PTR ?global_options@@3UGLOBAL_OPTIONS_DATA@@A+872, 0
  001db	74 09		 je	 SHORT $LN9@draw_viper

; 417  : 	{
; 418  : 		draw_main_rotors = FALSE;

  001dd	c7 45 fc 00 00
	00 00		 mov	 DWORD PTR _draw_main_rotors$[ebp], 0

; 419  : 	}
; 420  : 	else

  001e4	eb 28		 jmp	 SHORT $LN13@draw_viper
$LN9@draw_viper:

; 421  : 	{
; 422  : 		if (get_view_mode () != VIEW_MODE_VIRTUAL_COCKPIT_CREW)

  001e6	83 3d 00 00 00
	00 23		 cmp	 DWORD PTR ?view_mode@@3W4VIEW_MODES@@A, 35 ; view_mode, 00000023H
  001ed	74 1f		 je	 SHORT $LN13@draw_viper

; 423  : 		{
; 424  : 			if (get_helicopter_main_rotors_blurred (get_gunship_entity ()))

  001ef	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gunship_entity@@3PAUENTITY@@A ; gunship_entity
  001f4	50		 push	 eax
  001f5	e8 00 00 00 00	 call	 ?get_helicopter_main_rotors_blurred@@YGHPAUENTITY@@@Z ; get_helicopter_main_rotors_blurred
  001fa	85 c0		 test	 eax, eax
  001fc	74 10		 je	 SHORT $LN13@draw_viper

; 425  : 			{
; 426  : 				if (!get_global_blurred_main_rotors_visible_from_cockpit ())

  001fe	83 3d 1c 00 00
	00 00		 cmp	 DWORD PTR ?global_options@@3UGLOBAL_OPTIONS_DATA@@A+28, 0
  00205	75 07		 jne	 SHORT $LN13@draw_viper

; 427  : 				{
; 428  : 					draw_main_rotors = FALSE;

  00207	c7 45 fc 00 00
	00 00		 mov	 DWORD PTR _draw_main_rotors$[ebp], 0
$LN13@draw_viper:

; 429  : 				}
; 430  : 			}
; 431  : 		}
; 432  : 	}
; 433  : 
; 434  : 	search.search_depth = 0;

  0020e	c7 45 c4 00 00
	00 00		 mov	 DWORD PTR _search$[ebp+8], 0

; 435  : 	search.search_object = virtual_cockpit_inst3d;

  00215	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  0021a	89 45 bc	 mov	 DWORD PTR _search$[ebp], eax

; 436  : 	search.sub_object_index = OBJECT_3D_SUB_OBJECT_MAIN_ROTOR_SHAFT;

  0021d	c7 45 c8 02 00
	00 00		 mov	 DWORD PTR _search$[ebp+12], 2

; 437  : 
; 438  : 	if (find_object_3d_sub_object (&search) == SUB_OBJECT_SEARCH_RESULT_OBJECT_FOUND)

  00224	8d 45 bc	 lea	 eax, DWORD PTR _search$[ebp]
  00227	50		 push	 eax
  00228	e8 00 00 00 00	 call	 ?find_object_3d_sub_object@@YG?AW4SUB_OBJECT_SEARCH_RESULT_TYPES@@PAUOBJECT_3D_SUB_OBJECT_SEARCH_DATA@@@Z ; find_object_3d_sub_object
  0022d	83 f8 01	 cmp	 eax, 1
  00230	75 17		 jne	 SHORT $LN14@draw_viper

; 439  : 	{
; 440  : 		search.result_sub_object->visible_object = draw_main_rotors;

  00232	8b 45 fc	 mov	 eax, DWORD PTR _draw_main_rotors$[ebp]
  00235	83 e0 01	 and	 eax, 1
  00238	8b 4d c0	 mov	 ecx, DWORD PTR _search$[ebp+4]
  0023b	8b 51 08	 mov	 edx, DWORD PTR [ecx+8]
  0023e	83 e2 fe	 and	 edx, -2			; fffffffeH
  00241	0b d0		 or	 edx, eax
  00243	8b 45 c0	 mov	 eax, DWORD PTR _search$[ebp+4]
  00246	89 50 08	 mov	 DWORD PTR [eax+8], edx
$LN14@draw_viper:

; 441  : 	}
; 442  : 
; 443  : 	//
; 444  : 	// draw 3D scene
; 445  : 	//
; 446  : 
; 447  : 	set_3d_view_distances (main_3d_env, 10.0, 0.1, 1.0, 0.0);

  00249	51		 push	 ecx
  0024a	0f 57 c0	 xorps	 xmm0, xmm0
  0024d	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00252	51		 push	 ecx
  00253	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3f800000
  0025b	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00260	51		 push	 ecx
  00261	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3dcccccd
  00269	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  0026e	51		 push	 ecx
  0026f	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@41200000
  00277	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  0027c	a1 00 00 00 00	 mov	 eax, DWORD PTR ?main_3d_env@@3PAUENV_3D@@A ; main_3d_env
  00281	50		 push	 eax
  00282	e8 00 00 00 00	 call	 ?set_3d_view_distances@@YGXPAUENV_3D@@MMMM@Z ; set_3d_view_distances

; 448  : 
; 449  : 	realise_3d_clip_extents (main_3d_env);

  00287	a1 00 00 00 00	 mov	 eax, DWORD PTR ?main_3d_env@@3PAUENV_3D@@A ; main_3d_env
  0028c	50		 push	 eax
  0028d	e8 00 00 00 00	 call	 ?realise_3d_clip_extents@@YGXPAUENV_3D@@@Z ; realise_3d_clip_extents

; 450  : 
; 451  : 	recalculate_3d_environment_settings (main_3d_env);

  00292	a1 00 00 00 00	 mov	 eax, DWORD PTR ?main_3d_env@@3PAUENV_3D@@A ; main_3d_env
  00297	50		 push	 eax
  00298	e8 00 00 00 00	 call	 ?recalculate_3d_environment_settings@@YGXPAUENV_3D@@@Z ; recalculate_3d_environment_settings

; 452  : 
; 453  : 	clear_zbuffer_screen ();

  0029d	e8 00 00 00 00	 call	 ?clear_zbuffer_screen@@YGXXZ ; clear_zbuffer_screen

; 454  : 
; 455  : 	if (begin_3d_scene ())

  002a2	e8 00 00 00 00	 call	 ?begin_3d_scene@@YGHXZ	; begin_3d_scene
  002a7	85 c0		 test	 eax, eax
  002a9	0f 84 ea 08 00
	00		 je	 $LN23@draw_viper

; 456  : 	{
; 457  : 		//
; 458  : 		// light direction is in world coordinates
; 459  : 		//
; 460  : 
; 461  : 		light_3d_source
; 462  : 			*display_backlight,
; 463  : 			*cockpit_light;
; 464  : 
; 465  : 		vec3d
; 466  : 			direction;
; 467  : 
; 468  : 		matrix3x3
; 469  : 			m1,
; 470  : 			m2;
; 471  : 
; 472  : //VJ 050131 update on wideview mod, much better movement
; 473  : 		if (get_global_wide_cockpit () &&

  002af	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?wide_cockpit@@3HA, 0 ; wide_cockpit
  002b6	0f 84 36 01 00
	00		 je	 $LN16@draw_viper
  002bc	83 3d 00 00 00
	00 26		 cmp	 DWORD PTR ?view_mode@@3W4VIEW_MODES@@A, 38 ; view_mode, 00000026H
  002c3	0f 84 29 01 00
	00		 je	 $LN16@draw_viper
  002c9	83 3d 00 00 00
	00 27		 cmp	 DWORD PTR ?view_mode@@3W4VIEW_MODES@@A, 39 ; view_mode, 00000027H
  002d0	0f 84 1c 01 00
	00		 je	 $LN16@draw_viper
  002d6	83 3d 00 00 00
	00 28		 cmp	 DWORD PTR ?view_mode@@3W4VIEW_MODES@@A, 40 ; view_mode, 00000028H
  002dd	0f 84 0f 01 00
	00		 je	 $LN16@draw_viper
  002e3	83 3d 00 00 00
	00 29		 cmp	 DWORD PTR ?view_mode@@3W4VIEW_MODES@@A, 41 ; view_mode, 00000029H
  002ea	0f 84 02 01 00
	00		 je	 $LN16@draw_viper

; 474  : 			( get_view_mode () != VIEW_MODE_VIRTUAL_COCKPIT_PILOT_LHS_DISPLAY &&
; 475  : 				get_view_mode () != VIEW_MODE_VIRTUAL_COCKPIT_PILOT_RHS_DISPLAY &&
; 476  : 				get_view_mode () != VIEW_MODE_VIRTUAL_COCKPIT_CO_PILOT_LHS_DISPLAY &&
; 477  : 				get_view_mode () != VIEW_MODE_VIRTUAL_COCKPIT_CO_PILOT_RHS_DISPLAY )
; 478  : 			)
; 479  : 		{
; 480  : 				get_viper_crew_viewpoint ();

  002f0	e8 00 00 00 00	 call	 ?get_viper_crew_viewpoint@@YGXXZ ; get_viper_crew_viewpoint

; 481  : 
; 482  : 				virtual_cockpit_inst3d->vp.x += wide_cockpit_position[wide_cockpit_nr].c.x;

  002f5	6b 05 00 00 00
	00 24		 imul	 eax, DWORD PTR ?wide_cockpit_nr@@3HA, 36 ; wide_cockpit_nr
  002fc	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  00302	f3 0f 10 41 08	 movss	 xmm0, DWORD PTR [ecx+8]
  00307	f3 0f 58 80 14
	00 00 00	 addss	 xmm0, DWORD PTR ?wide_cockpit_position@@3PAUCOCKPIT_POSITION@@A[eax+20]
  0030f	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  00315	f3 0f 11 42 08	 movss	 DWORD PTR [edx+8], xmm0

; 483  : 				virtual_cockpit_inst3d->vp.y += wide_cockpit_position[wide_cockpit_nr].c.y;

  0031a	6b 05 00 00 00
	00 24		 imul	 eax, DWORD PTR ?wide_cockpit_nr@@3HA, 36 ; wide_cockpit_nr
  00321	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  00327	f3 0f 10 41 0c	 movss	 xmm0, DWORD PTR [ecx+12]
  0032c	f3 0f 58 80 18
	00 00 00	 addss	 xmm0, DWORD PTR ?wide_cockpit_position@@3PAUCOCKPIT_POSITION@@A[eax+24]
  00334	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  0033a	f3 0f 11 42 0c	 movss	 DWORD PTR [edx+12], xmm0

; 484  : 				virtual_cockpit_inst3d->vp.z += wide_cockpit_position[wide_cockpit_nr].c.z;

  0033f	6b 05 00 00 00
	00 24		 imul	 eax, DWORD PTR ?wide_cockpit_nr@@3HA, 36 ; wide_cockpit_nr
  00346	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  0034c	f3 0f 10 41 10	 movss	 xmm0, DWORD PTR [ecx+16]
  00351	f3 0f 58 80 1c
	00 00 00	 addss	 xmm0, DWORD PTR ?wide_cockpit_position@@3PAUCOCKPIT_POSITION@@A[eax+28]
  00359	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  0035f	f3 0f 11 42 10	 movss	 DWORD PTR [edx+16], xmm0

; 485  : 
; 486  : 				//ataribaby 27/12/2008
; 487  : 				//virtual_cockpit_inst3d->vp.x += bound(current_flight_dynamics->model_acceleration_vector.x * ONE_OVER_G, -3.0, 3.0) * 0.025 * command_line_g_force_head_movment_modifier;
; 488  : 				//virtual_cockpit_inst3d->vp.y += bound(current_flight_dynamics->g_force.value - 1.0, -1.5, 5.0) * 0.025 * command_line_g_force_head_movment_modifier;
; 489  : 
; 490  : 				if (wide_cockpit_nr == WIDEVIEW_VIPER_PILOT)

  00364	83 3d 00 00 00
	00 09		 cmp	 DWORD PTR ?wide_cockpit_nr@@3HA, 9 ; wide_cockpit_nr
  0036b	75 1f		 jne	 SHORT $LN17@draw_viper

; 491  : 					pilot_head_pitch_datum = rad ( wide_cockpit_position[wide_cockpit_nr].c.p );

  0036d	6b 05 00 00 00
	00 24		 imul	 eax, DWORD PTR ?wide_cockpit_nr@@3HA, 36 ; wide_cockpit_nr
  00374	f3 0f 10 80 20
	00 00 00	 movss	 xmm0, DWORD PTR ?wide_cockpit_position@@3PAUCOCKPIT_POSITION@@A[eax+32]
  0037c	f3 0f 59 05 00
	00 00 00	 mulss	 xmm0, DWORD PTR __real@3c8efa35
  00384	f3 0f 11 05 00
	00 00 00	 movss	 DWORD PTR ?pilot_head_pitch_datum@@3MA, xmm0
$LN17@draw_viper:

; 492  : 				if (wide_cockpit_nr == WIDEVIEW_VIPER_COPILOT)

  0038c	83 3d 00 00 00
	00 0a		 cmp	 DWORD PTR ?wide_cockpit_nr@@3HA, 10 ; wide_cockpit_nr, 0000000aH
  00393	75 1f		 jne	 SHORT $LN18@draw_viper

; 493  : 					co_pilot_head_pitch_datum = rad ( wide_cockpit_position[wide_cockpit_nr].c.p );

  00395	6b 05 00 00 00
	00 24		 imul	 eax, DWORD PTR ?wide_cockpit_nr@@3HA, 36 ; wide_cockpit_nr
  0039c	f3 0f 10 80 20
	00 00 00	 movss	 xmm0, DWORD PTR ?wide_cockpit_position@@3PAUCOCKPIT_POSITION@@A[eax+32]
  003a4	f3 0f 59 05 00
	00 00 00	 mulss	 xmm0, DWORD PTR __real@3c8efa35
  003ac	f3 0f 11 05 00
	00 00 00	 movss	 DWORD PTR ?co_pilot_head_pitch_datum@@3MA, xmm0
$LN18@draw_viper:

; 494  : 
; 495  : 				set_3d_view_distances (main_3d_env, 10.0, 0.1, 1.0, 0.0);

  003b4	51		 push	 ecx
  003b5	0f 57 c0	 xorps	 xmm0, xmm0
  003b8	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  003bd	51		 push	 ecx
  003be	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3f800000
  003c6	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  003cb	51		 push	 ecx
  003cc	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3dcccccd
  003d4	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  003d9	51		 push	 ecx
  003da	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@41200000
  003e2	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  003e7	a1 00 00 00 00	 mov	 eax, DWORD PTR ?main_3d_env@@3PAUENV_3D@@A ; main_3d_env
  003ec	50		 push	 eax
  003ed	e8 00 00 00 00	 call	 ?set_3d_view_distances@@YGXPAUENV_3D@@MMMM@Z ; set_3d_view_distances
$LN16@draw_viper:

; 496  : 
; 497  : 		}
; 498  : 
; 499  : 		//ataribaby 27/12/2008 new head g-force movement and vibration from main rotor
; 500  : 		if (get_view_mode () != VIEW_MODE_VIRTUAL_COCKPIT_PILOT_LHS_DISPLAY &&
; 501  : 				get_view_mode () != VIEW_MODE_VIRTUAL_COCKPIT_PILOT_RHS_DISPLAY &&
; 502  : 				get_view_mode () != VIEW_MODE_VIRTUAL_COCKPIT_CO_PILOT_LHS_DISPLAY &&

  003f2	83 3d 00 00 00
	00 26		 cmp	 DWORD PTR ?view_mode@@3W4VIEW_MODES@@A, 38 ; view_mode, 00000026H
  003f9	0f 84 18 03 00
	00		 je	 $LN19@draw_viper
  003ff	83 3d 00 00 00
	00 27		 cmp	 DWORD PTR ?view_mode@@3W4VIEW_MODES@@A, 39 ; view_mode, 00000027H
  00406	0f 84 0b 03 00
	00		 je	 $LN19@draw_viper
  0040c	83 3d 00 00 00
	00 28		 cmp	 DWORD PTR ?view_mode@@3W4VIEW_MODES@@A, 40 ; view_mode, 00000028H
  00413	0f 84 fe 02 00
	00		 je	 $LN19@draw_viper
  00419	83 3d 00 00 00
	00 29		 cmp	 DWORD PTR ?view_mode@@3W4VIEW_MODES@@A, 41 ; view_mode, 00000029H
  00420	0f 84 f1 02 00
	00		 je	 $LN19@draw_viper

; 503  : 				get_view_mode () != VIEW_MODE_VIRTUAL_COCKPIT_CO_PILOT_RHS_DISPLAY)
; 504  : 		{
; 505  : 			if (get_time_acceleration() != TIME_ACCELERATION_PAUSE)

  00426	e8 00 00 00 00	 call	 ?get_time_acceleration@@YGHXZ ; get_time_acceleration
  0042b	85 c0		 test	 eax, eax
  0042d	0f 84 c2 00 00
	00		 je	 $LN20@draw_viper

; 506  : 			{
; 507  : 				random_vibration_x = (frand1() * (current_flight_dynamics->main_rotor_rpm.value * 0.00002)) * command_line_g_force_head_movment_modifier;

  00433	69 05 00 00 00
	00 6d 4e c6 41	 imul	 eax, DWORD PTR ?random_number_seed@@3HA, 1103515245 ; random_number_seed
  0043d	05 39 30 00 00	 add	 eax, 12345		; 00003039H
  00442	a3 00 00 00 00	 mov	 DWORD PTR ?random_number_seed@@3HA, eax ; random_number_seed
  00447	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?random_number_seed@@3HA ; random_number_seed
  0044d	c1 f9 10	 sar	 ecx, 16			; 00000010H
  00450	81 e1 ff 7f 00
	00		 and	 ecx, 32767		; 00007fffH
  00456	f2 0f 2a c1	 cvtsi2sd xmm0, ecx
  0045a	f2 0f 59 05 00
	00 00 00	 mulsd	 xmm0, QWORD PTR __real@3f00002000400080
  00462	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?current_flight_dynamics@@3PAUDYNAMICS_TYPE@@A ; current_flight_dynamics
  00468	f3 0f 5a 8a 14
	1e 00 00	 cvtss2sd xmm1, DWORD PTR [edx+7700]
  00470	f2 0f 59 0d 00
	00 00 00	 mulsd	 xmm1, QWORD PTR __real@3ef4f8b588e368f1
  00478	f2 0f 59 c1	 mulsd	 xmm0, xmm1
  0047c	f3 0f 5a 0d 00
	00 00 00	 cvtss2sd xmm1, DWORD PTR ?command_line_g_force_head_movment_modifier@@3MA
  00484	f2 0f 59 c1	 mulsd	 xmm0, xmm1
  00488	f2 0f 5a c0	 cvtsd2ss xmm0, xmm0
  0048c	f3 0f 11 05 00
	00 00 00	 movss	 DWORD PTR ?random_vibration_x@@3MA, xmm0

; 508  : 				random_vibration_y = (frand1() * (current_flight_dynamics->main_rotor_rpm.value * 0.00002)) * command_line_g_force_head_movment_modifier;

  00494	69 05 00 00 00
	00 6d 4e c6 41	 imul	 eax, DWORD PTR ?random_number_seed@@3HA, 1103515245 ; random_number_seed
  0049e	05 39 30 00 00	 add	 eax, 12345		; 00003039H
  004a3	a3 00 00 00 00	 mov	 DWORD PTR ?random_number_seed@@3HA, eax ; random_number_seed
  004a8	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?random_number_seed@@3HA ; random_number_seed
  004ae	c1 f9 10	 sar	 ecx, 16			; 00000010H
  004b1	81 e1 ff 7f 00
	00		 and	 ecx, 32767		; 00007fffH
  004b7	f2 0f 2a c1	 cvtsi2sd xmm0, ecx
  004bb	f2 0f 59 05 00
	00 00 00	 mulsd	 xmm0, QWORD PTR __real@3f00002000400080
  004c3	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?current_flight_dynamics@@3PAUDYNAMICS_TYPE@@A ; current_flight_dynamics
  004c9	f3 0f 5a 8a 14
	1e 00 00	 cvtss2sd xmm1, DWORD PTR [edx+7700]
  004d1	f2 0f 59 0d 00
	00 00 00	 mulsd	 xmm1, QWORD PTR __real@3ef4f8b588e368f1
  004d9	f2 0f 59 c1	 mulsd	 xmm0, xmm1
  004dd	f3 0f 5a 0d 00
	00 00 00	 cvtss2sd xmm1, DWORD PTR ?command_line_g_force_head_movment_modifier@@3MA
  004e5	f2 0f 59 c1	 mulsd	 xmm0, xmm1
  004e9	f2 0f 5a c0	 cvtsd2ss xmm0, xmm0
  004ed	f3 0f 11 05 00
	00 00 00	 movss	 DWORD PTR ?random_vibration_y@@3MA, xmm0
$LN20@draw_viper:

; 509  : 			}
; 510  : 			x_head_g_movement = move_by_rate(x_head_g_movement, random_vibration_x + (bound(current_flight_dynamics->model_acceleration_vector.x * ONE_OVER_G, -3.0, 3.0) * 0.025 * command_line_g_force_head_movment_modifier), 0.05);

  004f5	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_flight_dynamics@@3PAUDYNAMICS_TYPE@@A ; current_flight_dynamics
  004fa	f3 0f 10 80 48
	1c 00 00	 movss	 xmm0, DWORD PTR [eax+7240]
  00502	f3 0f 59 05 00
	00 00 00	 mulss	 xmm0, DWORD PTR __real@3dd0c43d
  0050a	f3 0f 5a c0	 cvtss2sd xmm0, xmm0
  0050e	f2 0f 10 0d 00
	00 00 00	 movsd	 xmm1, QWORD PTR __real@c008000000000000
  00516	66 0f 2f c8	 comisd	 xmm1, xmm0
  0051a	76 12		 jbe	 SHORT $LN39@draw_viper
  0051c	f2 0f 10 05 00
	00 00 00	 movsd	 xmm0, QWORD PTR __real@c008000000000000
  00524	f2 0f 11 85 18
	ff ff ff	 movsd	 QWORD PTR tv275[ebp], xmm0
  0052c	eb 68		 jmp	 SHORT $LN40@draw_viper
$LN39@draw_viper:
  0052e	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_flight_dynamics@@3PAUDYNAMICS_TYPE@@A ; current_flight_dynamics
  00534	f3 0f 10 81 48
	1c 00 00	 movss	 xmm0, DWORD PTR [ecx+7240]
  0053c	f3 0f 59 05 00
	00 00 00	 mulss	 xmm0, DWORD PTR __real@3dd0c43d
  00544	f3 0f 5a c0	 cvtss2sd xmm0, xmm0
  00548	66 0f 2f 05 00
	00 00 00	 comisd	 xmm0, QWORD PTR __real@4008000000000000
  00550	76 12		 jbe	 SHORT $LN37@draw_viper
  00552	f2 0f 10 05 00
	00 00 00	 movsd	 xmm0, QWORD PTR __real@4008000000000000
  0055a	f2 0f 11 85 10
	ff ff ff	 movsd	 QWORD PTR tv274[ebp], xmm0
  00562	eb 22		 jmp	 SHORT $LN38@draw_viper
$LN37@draw_viper:
  00564	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?current_flight_dynamics@@3PAUDYNAMICS_TYPE@@A ; current_flight_dynamics
  0056a	f3 0f 10 82 48
	1c 00 00	 movss	 xmm0, DWORD PTR [edx+7240]
  00572	f3 0f 59 05 00
	00 00 00	 mulss	 xmm0, DWORD PTR __real@3dd0c43d
  0057a	f3 0f 5a c0	 cvtss2sd xmm0, xmm0
  0057e	f2 0f 11 85 10
	ff ff ff	 movsd	 QWORD PTR tv274[ebp], xmm0
$LN38@draw_viper:
  00586	f2 0f 10 85 10
	ff ff ff	 movsd	 xmm0, QWORD PTR tv274[ebp]
  0058e	f2 0f 11 85 18
	ff ff ff	 movsd	 QWORD PTR tv275[ebp], xmm0
$LN40@draw_viper:
  00596	51		 push	 ecx
  00597	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3d4ccccd
  0059f	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  005a4	f3 0f 5a 05 00
	00 00 00	 cvtss2sd xmm0, DWORD PTR ?random_vibration_x@@3MA
  005ac	f2 0f 10 8d 18
	ff ff ff	 movsd	 xmm1, QWORD PTR tv275[ebp]
  005b4	f2 0f 59 0d 00
	00 00 00	 mulsd	 xmm1, QWORD PTR __real@3f9999999999999a
  005bc	f3 0f 5a 15 00
	00 00 00	 cvtss2sd xmm2, DWORD PTR ?command_line_g_force_head_movment_modifier@@3MA
  005c4	f2 0f 59 ca	 mulsd	 xmm1, xmm2
  005c8	f2 0f 58 c1	 addsd	 xmm0, xmm1
  005cc	f2 0f 5a c0	 cvtsd2ss xmm0, xmm0
  005d0	51		 push	 ecx
  005d1	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  005d6	51		 push	 ecx
  005d7	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR ?x_head_g_movement@@3MA
  005df	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  005e4	e8 00 00 00 00	 call	 ?move_by_rate@@YGMMMM@Z	; move_by_rate
  005e9	d9 1d 00 00 00
	00		 fstp	 DWORD PTR ?x_head_g_movement@@3MA

; 511  : 			y_head_g_movement = move_by_rate(y_head_g_movement, random_vibration_y + (bound(current_flight_dynamics->g_force.value - 1.0, -1.5, 5.0) * 0.025 * command_line_g_force_head_movment_modifier), 0.05);

  005ef	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_flight_dynamics@@3PAUDYNAMICS_TYPE@@A ; current_flight_dynamics
  005f4	f3 0f 5a 80 5c
	24 00 00	 cvtss2sd xmm0, DWORD PTR [eax+9308]
  005fc	f2 0f 5c 05 00
	00 00 00	 subsd	 xmm0, QWORD PTR __real@3ff0000000000000
  00604	f2 0f 10 0d 00
	00 00 00	 movsd	 xmm1, QWORD PTR __real@bff8000000000000
  0060c	66 0f 2f c8	 comisd	 xmm1, xmm0
  00610	76 12		 jbe	 SHORT $LN43@draw_viper
  00612	f2 0f 10 05 00
	00 00 00	 movsd	 xmm0, QWORD PTR __real@bff8000000000000
  0061a	f2 0f 11 85 18
	ff ff ff	 movsd	 QWORD PTR tv301[ebp], xmm0
  00622	eb 60		 jmp	 SHORT $LN44@draw_viper
$LN43@draw_viper:
  00624	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_flight_dynamics@@3PAUDYNAMICS_TYPE@@A ; current_flight_dynamics
  0062a	f3 0f 5a 81 5c
	24 00 00	 cvtss2sd xmm0, DWORD PTR [ecx+9308]
  00632	f2 0f 5c 05 00
	00 00 00	 subsd	 xmm0, QWORD PTR __real@3ff0000000000000
  0063a	66 0f 2f 05 00
	00 00 00	 comisd	 xmm0, QWORD PTR __real@4014000000000000
  00642	76 12		 jbe	 SHORT $LN41@draw_viper
  00644	f2 0f 10 05 00
	00 00 00	 movsd	 xmm0, QWORD PTR __real@4014000000000000
  0064c	f2 0f 11 85 10
	ff ff ff	 movsd	 QWORD PTR tv300[ebp], xmm0
  00654	eb 1e		 jmp	 SHORT $LN42@draw_viper
$LN41@draw_viper:
  00656	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?current_flight_dynamics@@3PAUDYNAMICS_TYPE@@A ; current_flight_dynamics
  0065c	f3 0f 5a 82 5c
	24 00 00	 cvtss2sd xmm0, DWORD PTR [edx+9308]
  00664	f2 0f 5c 05 00
	00 00 00	 subsd	 xmm0, QWORD PTR __real@3ff0000000000000
  0066c	f2 0f 11 85 10
	ff ff ff	 movsd	 QWORD PTR tv300[ebp], xmm0
$LN42@draw_viper:
  00674	f2 0f 10 85 10
	ff ff ff	 movsd	 xmm0, QWORD PTR tv300[ebp]
  0067c	f2 0f 11 85 18
	ff ff ff	 movsd	 QWORD PTR tv301[ebp], xmm0
$LN44@draw_viper:
  00684	51		 push	 ecx
  00685	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3d4ccccd
  0068d	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00692	f3 0f 5a 05 00
	00 00 00	 cvtss2sd xmm0, DWORD PTR ?random_vibration_y@@3MA
  0069a	f2 0f 10 8d 18
	ff ff ff	 movsd	 xmm1, QWORD PTR tv301[ebp]
  006a2	f2 0f 59 0d 00
	00 00 00	 mulsd	 xmm1, QWORD PTR __real@3f9999999999999a
  006aa	f3 0f 5a 15 00
	00 00 00	 cvtss2sd xmm2, DWORD PTR ?command_line_g_force_head_movment_modifier@@3MA
  006b2	f2 0f 59 ca	 mulsd	 xmm1, xmm2
  006b6	f2 0f 58 c1	 addsd	 xmm0, xmm1
  006ba	f2 0f 5a c0	 cvtsd2ss xmm0, xmm0
  006be	51		 push	 ecx
  006bf	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  006c4	51		 push	 ecx
  006c5	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR ?y_head_g_movement@@3MA
  006cd	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  006d2	e8 00 00 00 00	 call	 ?move_by_rate@@YGMMMM@Z	; move_by_rate
  006d7	d9 1d 00 00 00
	00		 fstp	 DWORD PTR ?y_head_g_movement@@3MA

; 512  : 
; 513  : 			virtual_cockpit_inst3d->vp.x -= x_head_g_movement;

  006dd	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  006e2	f3 0f 10 40 08	 movss	 xmm0, DWORD PTR [eax+8]
  006e7	f3 0f 5c 05 00
	00 00 00	 subss	 xmm0, DWORD PTR ?x_head_g_movement@@3MA
  006ef	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  006f5	f3 0f 11 41 08	 movss	 DWORD PTR [ecx+8], xmm0

; 514  : 			//if (!current_flight_dynamics->auto_hover)   // arneh - auto hover has some weird dynamics which cause lots of g-forces, so disable head movement when auto hover is enabled
; 515  : 			virtual_cockpit_inst3d->vp.y -= y_head_g_movement;

  006fa	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  006ff	f3 0f 10 40 0c	 movss	 xmm0, DWORD PTR [eax+12]
  00704	f3 0f 5c 05 00
	00 00 00	 subss	 xmm0, DWORD PTR ?y_head_g_movement@@3MA
  0070c	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  00712	f3 0f 11 41 0c	 movss	 DWORD PTR [ecx+12], xmm0
$LN19@draw_viper:

; 516  : 		}
; 517  : 
; 518  : 		//
; 519  : 		// COMPASS
; 520  : 		//
; 521  : 		{
; 522  : 			search.search_depth = 0;

  00717	c7 45 c4 00 00
	00 00		 mov	 DWORD PTR _search$[ebp+8], 0

; 523  : 			search.search_object = virtual_cockpit_inst3d;

  0071e	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  00723	89 45 bc	 mov	 DWORD PTR _search$[ebp], eax

; 524  : 			search.sub_object_index = OBJECT_3D_SUB_OBJECT_APACHE_VIRTUAL_COCKPIT_COMPASS_HEADING_NULL;

  00726	c7 45 c8 6e 00
	00 00		 mov	 DWORD PTR _search$[ebp+12], 110 ; 0000006eH

; 525  : 
; 526  : 			if (find_object_3d_sub_object (&search) == SUB_OBJECT_SEARCH_RESULT_OBJECT_FOUND)

  0072d	8d 45 bc	 lea	 eax, DWORD PTR _search$[ebp]
  00730	50		 push	 eax
  00731	e8 00 00 00 00	 call	 ?find_object_3d_sub_object@@YG?AW4SUB_OBJECT_SEARCH_RESULT_TYPES@@PAUOBJECT_3D_SUB_OBJECT_SEARCH_DATA@@@Z ; find_object_3d_sub_object
  00736	83 f8 01	 cmp	 eax, 1
  00739	75 1c		 jne	 SHORT $LN21@draw_viper

; 527  : 			{
; 528  : 				search.result_sub_object->relative_heading = -current_flight_dynamics->heading.value;

  0073b	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_flight_dynamics@@3PAUDYNAMICS_TYPE@@A ; current_flight_dynamics
  00740	f3 0f 10 80 8c
	21 00 00	 movss	 xmm0, DWORD PTR [eax+8588]
  00748	0f 57 05 00 00
	00 00		 xorps	 xmm0, DWORD PTR __xmm@80000000800000008000000080000000
  0074f	8b 4d c0	 mov	 ecx, DWORD PTR _search$[ebp+4]
  00752	f3 0f 11 41 18	 movss	 DWORD PTR [ecx+24], xmm0
$LN21@draw_viper:

; 529  : 			}
; 530  : 		}
; 531  : 
; 532  : 		if (get_local_entity_int_value (get_session_entity (), INT_TYPE_DAY_SEGMENT_TYPE) == DAY_SEGMENT_TYPE_DAY)

  00757	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?session_entity@@3PAUENTITY@@A, 0 ; session_entity
  0075e	74 0f		 je	 SHORT $LN45@draw_viper
  00760	a1 00 00 00 00	 mov	 eax, DWORD PTR ?session_entity@@3PAUENTITY@@A ; session_entity
  00765	8b 08		 mov	 ecx, DWORD PTR [eax]
  00767	89 8d 1c ff ff
	ff		 mov	 DWORD PTR tv331[ebp], ecx
  0076d	eb 20		 jmp	 SHORT $LN46@draw_viper
$LN45@draw_viper:
  0076f	68 14 02 00 00	 push	 532			; 00000214H
  00774	68 00 00 00 00	 push	 OFFSET ??_C@_0EP@GFKODKEB@c?3?2users?2nhv90?2projects?2eech?2ap@
  00779	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  0077f	52		 push	 edx
  00780	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00785	c7 85 1c ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv331[ebp], 0
$LN46@draw_viper:
  0078f	b8 01 00 00 00	 mov	 eax, 1
  00794	85 c0		 test	 eax, eax
  00796	74 0c		 je	 SHORT $LN47@draw_viper
  00798	c7 85 18 ff ff
	ff 27 00 00 00	 mov	 DWORD PTR tv338[ebp], 39 ; 00000027H
  007a2	eb 20		 jmp	 SHORT $LN48@draw_viper
$LN47@draw_viper:
  007a4	68 14 02 00 00	 push	 532			; 00000214H
  007a9	68 00 00 00 00	 push	 OFFSET ??_C@_0EP@GFKODKEB@c?3?2users?2nhv90?2projects?2eech?2ap@
  007ae	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?overload_invalid_int_type_message@@3PBDB ; overload_invalid_int_type_message
  007b4	51		 push	 ecx
  007b5	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  007ba	c7 85 18 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv338[ebp], 0
$LN48@draw_viper:
  007c4	6a 27		 push	 39			; 00000027H
  007c6	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?session_entity@@3PAUENTITY@@A ; session_entity
  007cc	52		 push	 edx
  007cd	69 85 1c ff ff
	ff 5c 04 00 00	 imul	 eax, DWORD PTR tv331[ebp], 1116
  007d7	8b 8d 18 ff ff
	ff		 mov	 ecx, DWORD PTR tv338[ebp]
  007dd	8b 94 88 00 00
	00 00		 mov	 edx, DWORD PTR ?fn_get_local_entity_int_value@@3PAY0BBH@P6GHPAUENTITY@@W4INT_TYPES@@@ZA[eax+ecx*4]
  007e4	ff d2		 call	 edx
  007e6	83 f8 01	 cmp	 eax, 1
  007e9	0f 85 6f 01 00
	00		 jne	 $LN22@draw_viper

; 533  : 		{
; 534  : 			////////////////////////////////////////
; 535  : 			//
; 536  : 			// DAY LIGHTING
; 537  : 			//
; 538  : 			////////////////////////////////////////
; 539  : 
; 540  : 			if (night_vision_system_active && (get_view_mode () != VIEW_MODE_VIRTUAL_COCKPIT_CREW))

  007ef	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?night_vision_system_active@@3HA, 0 ; night_vision_system_active
  007f6	0f 84 2e 01 00
	00		 je	 $LN24@draw_viper
  007fc	83 3d 00 00 00
	00 23		 cmp	 DWORD PTR ?view_mode@@3W4VIEW_MODES@@A, 35 ; view_mode, 00000023H
  00803	0f 84 21 01 00
	00		 je	 $LN24@draw_viper

; 541  : 			{
; 542  : 				//
; 543  : 				// active night vision system
; 544  : 				//
; 545  : 
; 546  : 				get_3d_transformation_matrix (m1, rad (0.0), rad (135.0), rad (0.0));

  00809	51		 push	 ecx
  0080a	0f 57 c0	 xorps	 xmm0, xmm0
  0080d	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00812	51		 push	 ecx
  00813	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@4016cbe4
  0081b	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00820	51		 push	 ecx
  00821	0f 57 c0	 xorps	 xmm0, xmm0
  00824	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00829	8d 45 84	 lea	 eax, DWORD PTR _m1$2[ebp]
  0082c	50		 push	 eax
  0082d	e8 00 00 00 00	 call	 ?get_3d_transformation_matrix@@YGXQAY02MMMM@Z ; get_3d_transformation_matrix

; 547  : 
; 548  : 				multiply_matrix3x3_matrix3x3 (m2, m1, virtual_cockpit_inst3d->vp.attitude);

  00832	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  00837	83 c0 14	 add	 eax, 20			; 00000014H
  0083a	50		 push	 eax
  0083b	8d 4d 84	 lea	 ecx, DWORD PTR _m1$2[ebp]
  0083e	51		 push	 ecx
  0083f	8d 95 60 ff ff
	ff		 lea	 edx, DWORD PTR _m2$1[ebp]
  00845	52		 push	 edx
  00846	e8 00 00 00 00	 call	 ?multiply_matrix3x3_matrix3x3@@YGXQAY02MQAY02$$CBM1@Z ; multiply_matrix3x3_matrix3x3

; 549  : 
; 550  : 				direction.x = m2[2][0];

  0084b	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  00850	d1 e0		 shl	 eax, 1
  00852	8d 8c 05 60 ff
	ff ff		 lea	 ecx, DWORD PTR _m2$1[ebp+eax]
  00859	ba 04 00 00 00	 mov	 edx, 4
  0085e	6b c2 00	 imul	 eax, edx, 0
  00861	f3 0f 10 04 01	 movss	 xmm0, DWORD PTR [ecx+eax]
  00866	f3 0f 11 45 a8	 movss	 DWORD PTR _direction$3[ebp], xmm0

; 551  : 				direction.y = m2[2][1];

  0086b	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  00870	d1 e0		 shl	 eax, 1
  00872	8d 8c 05 60 ff
	ff ff		 lea	 ecx, DWORD PTR _m2$1[ebp+eax]
  00879	ba 04 00 00 00	 mov	 edx, 4
  0087e	c1 e2 00	 shl	 edx, 0
  00881	f3 0f 10 04 11	 movss	 xmm0, DWORD PTR [ecx+edx]
  00886	f3 0f 11 45 ac	 movss	 DWORD PTR _direction$3[ebp+4], xmm0

; 552  : 				direction.z = m2[2][2];

  0088b	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  00890	d1 e0		 shl	 eax, 1
  00892	8d 8c 05 60 ff
	ff ff		 lea	 ecx, DWORD PTR _m2$1[ebp+eax]
  00899	ba 04 00 00 00	 mov	 edx, 4
  0089e	d1 e2		 shl	 edx, 1
  008a0	f3 0f 10 04 11	 movss	 xmm0, DWORD PTR [ecx+edx]
  008a5	f3 0f 11 45 b0	 movss	 DWORD PTR _direction$3[ebp+8], xmm0

; 553  : 
; 554  : 				cockpit_light = create_light_3d_source (LIGHT_3D_TYPE_DIRECTIONAL, FALSE, &direction, 0, 0.0000, 0.5000, 0.0000);

  008aa	51		 push	 ecx
  008ab	0f 57 c0	 xorps	 xmm0, xmm0
  008ae	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  008b3	51		 push	 ecx
  008b4	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3f000000
  008bc	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  008c1	51		 push	 ecx
  008c2	0f 57 c0	 xorps	 xmm0, xmm0
  008c5	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  008ca	51		 push	 ecx
  008cb	0f 57 c0	 xorps	 xmm0, xmm0
  008ce	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  008d3	8d 45 a8	 lea	 eax, DWORD PTR _direction$3[ebp]
  008d6	50		 push	 eax
  008d7	6a 00		 push	 0
  008d9	6a 01		 push	 1
  008db	e8 00 00 00 00	 call	 ?create_light_3d_source@@YGPAULIGHT_3D_SOURCE@@W4LIGHT_3D_TYPE@@HPAUVEC3D@@MMMM@Z ; create_light_3d_source
  008e0	89 45 b4	 mov	 DWORD PTR _cockpit_light$4[ebp], eax

; 555  : 
; 556  : 				insert_light_3d_source_into_3d_scene (cockpit_light);

  008e3	8b 45 b4	 mov	 eax, DWORD PTR _cockpit_light$4[ebp]
  008e6	50		 push	 eax
  008e7	e8 00 00 00 00	 call	 ?insert_light_3d_source_into_3d_scene@@YGXPAULIGHT_3D_SOURCE@@@Z ; insert_light_3d_source_into_3d_scene

; 557  : 
; 558  : 				insert_relative_object_into_3d_scene (OBJECT_3D_DRAW_TYPE_ZBUFFERED_OBJECT, &virtual_cockpit_inst3d->vp.position, virtual_cockpit_inst3d);

  008ec	51		 push	 ecx
  008ed	0f 57 c0	 xorps	 xmm0, xmm0
  008f0	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  008f5	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  008fa	50		 push	 eax
  008fb	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  00901	83 c1 08	 add	 ecx, 8
  00904	51		 push	 ecx
  00905	6a 02		 push	 2
  00907	e8 00 00 00 00	 call	 ?insert_zbiased_relative_object_into_3d_scene@@YGXW4OBJECT_3D_DRAWING_TYPES@@PAUVEC3D@@PAXM@Z ; insert_zbiased_relative_object_into_3d_scene

; 559  : 
; 560  : 				draw_3d_scene ();

  0090c	e8 00 00 00 00	 call	 ?draw_3d_scene@@YGXXZ	; draw_3d_scene

; 561  : 
; 562  : 				end_3d_scene ();

  00911	e8 00 00 00 00	 call	 ?end_3d_scene@@YGXXZ	; end_3d_scene

; 563  : 
; 564  : 				remove_light_3d_source_from_3d_scene (cockpit_light);

  00916	8b 45 b4	 mov	 eax, DWORD PTR _cockpit_light$4[ebp]
  00919	50		 push	 eax
  0091a	e8 00 00 00 00	 call	 ?remove_light_3d_source_from_3d_scene@@YGXPAULIGHT_3D_SOURCE@@@Z ; remove_light_3d_source_from_3d_scene

; 565  : 
; 566  : 				destroy_light_3d_source (cockpit_light);

  0091f	8b 45 b4	 mov	 eax, DWORD PTR _cockpit_light$4[ebp]
  00922	50		 push	 eax
  00923	e8 00 00 00 00	 call	 ?destroy_light_3d_source@@YGXPAULIGHT_3D_SOURCE@@@Z ; destroy_light_3d_source

; 567  : 			}
; 568  : 			else

  00928	eb 2f		 jmp	 SHORT $LN25@draw_viper
$LN24@draw_viper:

; 569  : 			{
; 570  : 				//
; 571  : 				// inactive night vision system
; 572  : 				//
; 573  : 
; 574  : 				insert_relative_object_into_3d_scene (OBJECT_3D_DRAW_TYPE_ZBUFFERED_OBJECT, &virtual_cockpit_inst3d->vp.position, virtual_cockpit_inst3d);

  0092a	51		 push	 ecx
  0092b	0f 57 c0	 xorps	 xmm0, xmm0
  0092e	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00933	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  00938	50		 push	 eax
  00939	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  0093f	83 c1 08	 add	 ecx, 8
  00942	51		 push	 ecx
  00943	6a 02		 push	 2
  00945	e8 00 00 00 00	 call	 ?insert_zbiased_relative_object_into_3d_scene@@YGXW4OBJECT_3D_DRAWING_TYPES@@PAUVEC3D@@PAXM@Z ; insert_zbiased_relative_object_into_3d_scene

; 575  : 
; 576  : 				draw_3d_scene ();

  0094a	e8 00 00 00 00	 call	 ?draw_3d_scene@@YGXXZ	; draw_3d_scene

; 577  : 
; 578  : 				print_edit_wide_cockpit ();

  0094f	e8 00 00 00 00	 call	 ?print_edit_wide_cockpit@@YGXXZ ; print_edit_wide_cockpit

; 579  : 
; 580  : 				end_3d_scene ();

  00954	e8 00 00 00 00	 call	 ?end_3d_scene@@YGXXZ	; end_3d_scene
$LN25@draw_viper:

; 581  : 			}
; 582  : 		}
; 583  : 		else

  00959	e9 3b 02 00 00	 jmp	 $LN23@draw_viper
$LN22@draw_viper:

; 584  : 		{
; 585  : 			////////////////////////////////////////
; 586  : 			//
; 587  : 			// NIGHT LIGHTING
; 588  : 			//
; 589  : 			////////////////////////////////////////
; 590  : 
; 591  : 			direction.x = virtual_cockpit_inst3d->vp.zv.x;

  0095e	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  00963	f3 0f 10 40 2c	 movss	 xmm0, DWORD PTR [eax+44]
  00968	f3 0f 11 45 a8	 movss	 DWORD PTR _direction$3[ebp], xmm0

; 592  : 			direction.y = virtual_cockpit_inst3d->vp.zv.y;

  0096d	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  00972	f3 0f 10 40 30	 movss	 xmm0, DWORD PTR [eax+48]
  00977	f3 0f 11 45 ac	 movss	 DWORD PTR _direction$3[ebp+4], xmm0

; 593  : 			direction.z = virtual_cockpit_inst3d->vp.zv.z;

  0097c	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  00981	f3 0f 10 40 34	 movss	 xmm0, DWORD PTR [eax+52]
  00986	f3 0f 11 45 b0	 movss	 DWORD PTR _direction$3[ebp+8], xmm0

; 594  : 
; 595  : 			display_backlight = create_light_3d_source (LIGHT_3D_TYPE_DIRECTIONAL, FALSE, &direction, 0, 0.0627, 0.2039, 0.0392);

  0098b	51		 push	 ecx
  0098c	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3d20902e
  00994	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00999	51		 push	 ecx
  0099a	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3e50cb29
  009a2	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  009a7	51		 push	 ecx
  009a8	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3d8068dc
  009b0	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  009b5	51		 push	 ecx
  009b6	0f 57 c0	 xorps	 xmm0, xmm0
  009b9	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  009be	8d 45 a8	 lea	 eax, DWORD PTR _direction$3[ebp]
  009c1	50		 push	 eax
  009c2	6a 00		 push	 0
  009c4	6a 01		 push	 1
  009c6	e8 00 00 00 00	 call	 ?create_light_3d_source@@YGPAULIGHT_3D_SOURCE@@W4LIGHT_3D_TYPE@@HPAUVEC3D@@MMMM@Z ; create_light_3d_source
  009cb	89 45 b8	 mov	 DWORD PTR _display_backlight$5[ebp], eax

; 596  : 
; 597  : 			if (night_vision_system_active && (get_view_mode () != VIEW_MODE_VIRTUAL_COCKPIT_CREW))

  009ce	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?night_vision_system_active@@3HA, 0 ; night_vision_system_active
  009d5	0f 84 e9 00 00
	00		 je	 $LN26@draw_viper
  009db	83 3d 00 00 00
	00 23		 cmp	 DWORD PTR ?view_mode@@3W4VIEW_MODES@@A, 35 ; view_mode, 00000023H
  009e2	0f 84 dc 00 00
	00		 je	 $LN26@draw_viper

; 598  : 			{
; 599  : 				//
; 600  : 				// active night vision system
; 601  : 				//
; 602  : 
; 603  : 				get_3d_transformation_matrix (m1, rad (0.0), rad (135.0), rad (0.0));

  009e8	51		 push	 ecx
  009e9	0f 57 c0	 xorps	 xmm0, xmm0
  009ec	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  009f1	51		 push	 ecx
  009f2	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@4016cbe4
  009fa	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  009ff	51		 push	 ecx
  00a00	0f 57 c0	 xorps	 xmm0, xmm0
  00a03	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00a08	8d 45 84	 lea	 eax, DWORD PTR _m1$2[ebp]
  00a0b	50		 push	 eax
  00a0c	e8 00 00 00 00	 call	 ?get_3d_transformation_matrix@@YGXQAY02MMMM@Z ; get_3d_transformation_matrix

; 604  : 
; 605  : 				multiply_matrix3x3_matrix3x3 (m2, m1, virtual_cockpit_inst3d->vp.attitude);

  00a11	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  00a16	83 c0 14	 add	 eax, 20			; 00000014H
  00a19	50		 push	 eax
  00a1a	8d 4d 84	 lea	 ecx, DWORD PTR _m1$2[ebp]
  00a1d	51		 push	 ecx
  00a1e	8d 95 60 ff ff
	ff		 lea	 edx, DWORD PTR _m2$1[ebp]
  00a24	52		 push	 edx
  00a25	e8 00 00 00 00	 call	 ?multiply_matrix3x3_matrix3x3@@YGXQAY02MQAY02$$CBM1@Z ; multiply_matrix3x3_matrix3x3

; 606  : 
; 607  : 				direction.x = m2[2][0];

  00a2a	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  00a2f	d1 e0		 shl	 eax, 1
  00a31	8d 8c 05 60 ff
	ff ff		 lea	 ecx, DWORD PTR _m2$1[ebp+eax]
  00a38	ba 04 00 00 00	 mov	 edx, 4
  00a3d	6b c2 00	 imul	 eax, edx, 0
  00a40	f3 0f 10 04 01	 movss	 xmm0, DWORD PTR [ecx+eax]
  00a45	f3 0f 11 45 a8	 movss	 DWORD PTR _direction$3[ebp], xmm0

; 608  : 				direction.y = m2[2][1];

  00a4a	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  00a4f	d1 e0		 shl	 eax, 1
  00a51	8d 8c 05 60 ff
	ff ff		 lea	 ecx, DWORD PTR _m2$1[ebp+eax]
  00a58	ba 04 00 00 00	 mov	 edx, 4
  00a5d	c1 e2 00	 shl	 edx, 0
  00a60	f3 0f 10 04 11	 movss	 xmm0, DWORD PTR [ecx+edx]
  00a65	f3 0f 11 45 ac	 movss	 DWORD PTR _direction$3[ebp+4], xmm0

; 609  : 				direction.z = m2[2][2];

  00a6a	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  00a6f	d1 e0		 shl	 eax, 1
  00a71	8d 8c 05 60 ff
	ff ff		 lea	 ecx, DWORD PTR _m2$1[ebp+eax]
  00a78	ba 04 00 00 00	 mov	 edx, 4
  00a7d	d1 e2		 shl	 edx, 1
  00a7f	f3 0f 10 04 11	 movss	 xmm0, DWORD PTR [ecx+edx]
  00a84	f3 0f 11 45 b0	 movss	 DWORD PTR _direction$3[ebp+8], xmm0

; 610  : 
; 611  : 				cockpit_light = create_light_3d_source (LIGHT_3D_TYPE_DIRECTIONAL, FALSE, &direction, 0, 0.0000, 0.5000, 0.0000);

  00a89	51		 push	 ecx
  00a8a	0f 57 c0	 xorps	 xmm0, xmm0
  00a8d	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00a92	51		 push	 ecx
  00a93	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3f000000
  00a9b	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00aa0	51		 push	 ecx
  00aa1	0f 57 c0	 xorps	 xmm0, xmm0
  00aa4	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00aa9	51		 push	 ecx
  00aaa	0f 57 c0	 xorps	 xmm0, xmm0
  00aad	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00ab2	8d 45 a8	 lea	 eax, DWORD PTR _direction$3[ebp]
  00ab5	50		 push	 eax
  00ab6	6a 00		 push	 0
  00ab8	6a 01		 push	 1
  00aba	e8 00 00 00 00	 call	 ?create_light_3d_source@@YGPAULIGHT_3D_SOURCE@@W4LIGHT_3D_TYPE@@HPAUVEC3D@@MMMM@Z ; create_light_3d_source
  00abf	89 45 b4	 mov	 DWORD PTR _cockpit_light$4[ebp], eax

; 612  : 			}
; 613  : 			else

  00ac2	eb 70		 jmp	 SHORT $LN27@draw_viper
$LN26@draw_viper:

; 614  : 			{
; 615  : 				//
; 616  : 				// inactive night vision system
; 617  : 				//
; 618  : 
; 619  : 				direction.x = virtual_cockpit_inst3d->vp.yv.x;

  00ac4	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  00ac9	f3 0f 10 40 20	 movss	 xmm0, DWORD PTR [eax+32]
  00ace	f3 0f 11 45 a8	 movss	 DWORD PTR _direction$3[ebp], xmm0

; 620  : 				direction.y = virtual_cockpit_inst3d->vp.yv.y;

  00ad3	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  00ad8	f3 0f 10 40 24	 movss	 xmm0, DWORD PTR [eax+36]
  00add	f3 0f 11 45 ac	 movss	 DWORD PTR _direction$3[ebp+4], xmm0

; 621  : 				direction.z = virtual_cockpit_inst3d->vp.yv.z;

  00ae2	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  00ae7	f3 0f 10 40 28	 movss	 xmm0, DWORD PTR [eax+40]
  00aec	f3 0f 11 45 b0	 movss	 DWORD PTR _direction$3[ebp+8], xmm0

; 622  : 
; 623  : 				cockpit_light = create_light_3d_source (LIGHT_3D_TYPE_DIRECTIONAL, FALSE, &direction, 0, 0.0666, 0.1098, 0.6431);

  00af1	51		 push	 ecx
  00af2	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3f24a234
  00afa	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00aff	51		 push	 ecx
  00b00	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3de0ded3
  00b08	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00b0d	51		 push	 ecx
  00b0e	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3d886595
  00b16	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00b1b	51		 push	 ecx
  00b1c	0f 57 c0	 xorps	 xmm0, xmm0
  00b1f	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00b24	8d 45 a8	 lea	 eax, DWORD PTR _direction$3[ebp]
  00b27	50		 push	 eax
  00b28	6a 00		 push	 0
  00b2a	6a 01		 push	 1
  00b2c	e8 00 00 00 00	 call	 ?create_light_3d_source@@YGPAULIGHT_3D_SOURCE@@W4LIGHT_3D_TYPE@@HPAUVEC3D@@MMMM@Z ; create_light_3d_source
  00b31	89 45 b4	 mov	 DWORD PTR _cockpit_light$4[ebp], eax
$LN27@draw_viper:

; 624  : 			}
; 625  : 
; 626  : 			insert_light_3d_source_into_3d_scene (display_backlight);

  00b34	8b 45 b8	 mov	 eax, DWORD PTR _display_backlight$5[ebp]
  00b37	50		 push	 eax
  00b38	e8 00 00 00 00	 call	 ?insert_light_3d_source_into_3d_scene@@YGXPAULIGHT_3D_SOURCE@@@Z ; insert_light_3d_source_into_3d_scene

; 627  : 
; 628  : 			insert_light_3d_source_into_3d_scene (cockpit_light);

  00b3d	8b 45 b4	 mov	 eax, DWORD PTR _cockpit_light$4[ebp]
  00b40	50		 push	 eax
  00b41	e8 00 00 00 00	 call	 ?insert_light_3d_source_into_3d_scene@@YGXPAULIGHT_3D_SOURCE@@@Z ; insert_light_3d_source_into_3d_scene

; 629  : 
; 630  : 			insert_relative_object_into_3d_scene (OBJECT_3D_DRAW_TYPE_ZBUFFERED_OBJECT, &virtual_cockpit_inst3d->vp.position, virtual_cockpit_inst3d);

  00b46	51		 push	 ecx
  00b47	0f 57 c0	 xorps	 xmm0, xmm0
  00b4a	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00b4f	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  00b54	50		 push	 eax
  00b55	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  00b5b	83 c1 08	 add	 ecx, 8
  00b5e	51		 push	 ecx
  00b5f	6a 02		 push	 2
  00b61	e8 00 00 00 00	 call	 ?insert_zbiased_relative_object_into_3d_scene@@YGXW4OBJECT_3D_DRAWING_TYPES@@PAUVEC3D@@PAXM@Z ; insert_zbiased_relative_object_into_3d_scene

; 631  : 
; 632  : 			draw_3d_scene ();

  00b66	e8 00 00 00 00	 call	 ?draw_3d_scene@@YGXXZ	; draw_3d_scene

; 633  : 
; 634  : 			print_edit_wide_cockpit ();

  00b6b	e8 00 00 00 00	 call	 ?print_edit_wide_cockpit@@YGXXZ ; print_edit_wide_cockpit

; 635  : 
; 636  : 			end_3d_scene ();

  00b70	e8 00 00 00 00	 call	 ?end_3d_scene@@YGXXZ	; end_3d_scene

; 637  : 
; 638  : 			remove_light_3d_source_from_3d_scene (display_backlight);

  00b75	8b 45 b8	 mov	 eax, DWORD PTR _display_backlight$5[ebp]
  00b78	50		 push	 eax
  00b79	e8 00 00 00 00	 call	 ?remove_light_3d_source_from_3d_scene@@YGXPAULIGHT_3D_SOURCE@@@Z ; remove_light_3d_source_from_3d_scene

; 639  : 
; 640  : 			remove_light_3d_source_from_3d_scene (cockpit_light);

  00b7e	8b 45 b4	 mov	 eax, DWORD PTR _cockpit_light$4[ebp]
  00b81	50		 push	 eax
  00b82	e8 00 00 00 00	 call	 ?remove_light_3d_source_from_3d_scene@@YGXPAULIGHT_3D_SOURCE@@@Z ; remove_light_3d_source_from_3d_scene

; 641  : 
; 642  : 			destroy_light_3d_source (display_backlight);

  00b87	8b 45 b8	 mov	 eax, DWORD PTR _display_backlight$5[ebp]
  00b8a	50		 push	 eax
  00b8b	e8 00 00 00 00	 call	 ?destroy_light_3d_source@@YGXPAULIGHT_3D_SOURCE@@@Z ; destroy_light_3d_source

; 643  : 
; 644  : 			destroy_light_3d_source (cockpit_light);

  00b90	8b 45 b4	 mov	 eax, DWORD PTR _cockpit_light$4[ebp]
  00b93	50		 push	 eax
  00b94	e8 00 00 00 00	 call	 ?destroy_light_3d_source@@YGXPAULIGHT_3D_SOURCE@@@Z ; destroy_light_3d_source
$LN23@draw_viper:

; 645  : 		}
; 646  : 	}
; 647  : 
; 648  : 	move_edit_wide_cockpit ();

  00b99	e8 00 00 00 00	 call	 ?move_edit_wide_cockpit@@YGXXZ ; move_edit_wide_cockpit

; 649  : 
; 650  : #if RECOGNITION_GUIDE
; 651  : 	set_3d_view_distances (main_3d_env, 10000.0, 100.0, 1.0, 0.0);
; 652  : #else
; 653  : 	set_3d_view_distances (main_3d_env, 10000.0, 1.0, 1.0, 0.0);

  00b9e	51		 push	 ecx
  00b9f	0f 57 c0	 xorps	 xmm0, xmm0
  00ba2	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00ba7	51		 push	 ecx
  00ba8	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3f800000
  00bb0	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00bb5	51		 push	 ecx
  00bb6	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3f800000
  00bbe	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00bc3	51		 push	 ecx
  00bc4	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@461c4000
  00bcc	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00bd1	a1 00 00 00 00	 mov	 eax, DWORD PTR ?main_3d_env@@3PAUENV_3D@@A ; main_3d_env
  00bd6	50		 push	 eax
  00bd7	e8 00 00 00 00	 call	 ?set_3d_view_distances@@YGXPAUENV_3D@@MMMM@Z ; set_3d_view_distances

; 654  : #endif
; 655  : 
; 656  : 	realise_3d_clip_extents (main_3d_env);

  00bdc	a1 00 00 00 00	 mov	 eax, DWORD PTR ?main_3d_env@@3PAUENV_3D@@A ; main_3d_env
  00be1	50		 push	 eax
  00be2	e8 00 00 00 00	 call	 ?realise_3d_clip_extents@@YGXPAUENV_3D@@@Z ; realise_3d_clip_extents
$LN1@draw_viper:

; 657  : }

  00be7	5f		 pop	 edi
  00be8	5e		 pop	 esi
  00be9	5b		 pop	 ebx
  00bea	8b e5		 mov	 esp, ebp
  00bec	5d		 pop	 ebp
  00bed	c3		 ret	 0
?draw_viper_virtual_cockpit@@YGXXZ ENDP			; draw_viper_virtual_cockpit
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\gunships\cockpits\viper\vi_vckpt.c
;	COMDAT ?pre_render_viper_virtual_cockpit_displays@@YGXXZ
_TEXT	SEGMENT
tv64 = -68						; size = 4
?pre_render_viper_virtual_cockpit_displays@@YGXXZ PROC	; pre_render_viper_virtual_cockpit_displays, COMDAT

; 312  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 44	 sub	 esp, 68			; 00000044H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 313  : 	switch (get_view_mode ())

  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ?view_mode@@3W4VIEW_MODES@@A ; view_mode
  0000e	89 45 bc	 mov	 DWORD PTR tv64[ebp], eax
  00011	83 7d bc 23	 cmp	 DWORD PTR tv64[ebp], 35	; 00000023H
  00015	74 0e		 je	 SHORT $LN4@pre_render
  00017	83 7d bc 25	 cmp	 DWORD PTR tv64[ebp], 37	; 00000025H
  0001b	7e 0a		 jle	 SHORT $LN5@pre_render
  0001d	83 7d bc 29	 cmp	 DWORD PTR tv64[ebp], 41	; 00000029H
  00021	7e 02		 jle	 SHORT $LN4@pre_render
  00023	eb 02		 jmp	 SHORT $LN5@pre_render
$LN4@pre_render:

; 314  : 	{
; 315  : 		case VIEW_MODE_VIRTUAL_COCKPIT_CREW:
; 316  : 		case VIEW_MODE_VIRTUAL_COCKPIT_PILOT_LHS_DISPLAY:
; 317  : 		case VIEW_MODE_VIRTUAL_COCKPIT_PILOT_RHS_DISPLAY:
; 318  : 		case VIEW_MODE_VIRTUAL_COCKPIT_CO_PILOT_LHS_DISPLAY:
; 319  : 		case VIEW_MODE_VIRTUAL_COCKPIT_CO_PILOT_RHS_DISPLAY:
; 320  : 		{
; 321  : 			break;

  00025	eb 0b		 jmp	 SHORT $LN2@pre_render
$LN5@pre_render:

; 322  : 		}
; 323  : 		default:
; 324  : 		{
; 325  : 			if (!get_global_draw_cockpit_graphics ())

  00027	83 3d b8 01 00
	00 00		 cmp	 DWORD PTR ?global_options@@3UGLOBAL_OPTIONS_DATA@@A+440, 0
  0002e	75 02		 jne	 SHORT $LN2@pre_render

; 326  : 			{
; 327  : 				return;

  00030	eb 13		 jmp	 SHORT $LN1@pre_render
$LN2@pre_render:

; 328  : 			}
; 329  : 
; 330  : 			break;
; 331  : 		}
; 332  : 	}
; 333  : 
; 334  : 	draw_viper_mfd ();

  00032	e8 00 00 00 00	 call	 ?draw_viper_mfd@@YGXXZ	; draw_viper_mfd

; 335  : 
; 336  : 	if (get_view_mode () == VIEW_MODE_VIRTUAL_COCKPIT_CREW)

  00037	83 3d 00 00 00
	00 23		 cmp	 DWORD PTR ?view_mode@@3W4VIEW_MODES@@A, 35 ; view_mode, 00000023H
  0003e	75 05		 jne	 SHORT $LN1@pre_render

; 337  : 	{
; 338  : 		draw_viper_hud_on_lens_texture ();

  00040	e8 00 00 00 00	 call	 ?draw_viper_hud_on_lens_texture@@YGXXZ ; draw_viper_hud_on_lens_texture
$LN1@pre_render:

; 339  : 	}
; 340  : }

  00045	5f		 pop	 edi
  00046	5e		 pop	 esi
  00047	5b		 pop	 ebx
  00048	8b e5		 mov	 esp, ebp
  0004a	5d		 pop	 ebp
  0004b	c3		 ret	 0
?pre_render_viper_virtual_cockpit_displays@@YGXXZ ENDP	; pre_render_viper_virtual_cockpit_displays
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\gunships\cockpits\viper\vi_vckpt.c
;	COMDAT ?update_viper_virtual_cockpit@@YGXXZ
_TEXT	SEGMENT
tv69 = -132						; size = 4
tv64 = -132						; size = 4
_search$ = -64						; size = 56
_draw_controls$ = -8					; size = 4
_draw_glass_cockpit$ = -4				; size = 4
?update_viper_virtual_cockpit@@YGXXZ PROC		; update_viper_virtual_cockpit, COMDAT

; 189  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec 84 00 00
	00		 sub	 esp, 132		; 00000084H
  00009	53		 push	 ebx
  0000a	56		 push	 esi
  0000b	57		 push	 edi

; 190  : 	int
; 191  : 		draw_glass_cockpit,
; 192  : 		draw_controls;
; 193  : 
; 194  : 	object_3d_sub_object_search_data
; 195  : 		search;
; 196  : 
; 197  : 	////////////////////////////////////////
; 198  : 	//
; 199  : 	// sort out what to draw
; 200  : 	//
; 201  : 	////////////////////////////////////////
; 202  : 
; 203  : 	switch (get_view_mode ())

  0000c	a1 00 00 00 00	 mov	 eax, DWORD PTR ?view_mode@@3W4VIEW_MODES@@A ; view_mode
  00011	89 85 7c ff ff
	ff		 mov	 DWORD PTR tv64[ebp], eax
  00017	83 bd 7c ff ff
	ff 23		 cmp	 DWORD PTR tv64[ebp], 35	; 00000023H
  0001e	74 14		 je	 SHORT $LN4@update_vip
  00020	83 bd 7c ff ff
	ff 25		 cmp	 DWORD PTR tv64[ebp], 37	; 00000025H
  00027	7e 14		 jle	 SHORT $LN5@update_vip
  00029	83 bd 7c ff ff
	ff 29		 cmp	 DWORD PTR tv64[ebp], 41	; 00000029H
  00030	7e 02		 jle	 SHORT $LN4@update_vip
  00032	eb 09		 jmp	 SHORT $LN5@update_vip
$LN4@update_vip:

; 204  : 	{
; 205  : 		case VIEW_MODE_VIRTUAL_COCKPIT_CREW:
; 206  : 		case VIEW_MODE_VIRTUAL_COCKPIT_PILOT_LHS_DISPLAY:
; 207  : 		case VIEW_MODE_VIRTUAL_COCKPIT_PILOT_RHS_DISPLAY:
; 208  : 		case VIEW_MODE_VIRTUAL_COCKPIT_CO_PILOT_LHS_DISPLAY:
; 209  : 		case VIEW_MODE_VIRTUAL_COCKPIT_CO_PILOT_RHS_DISPLAY:
; 210  : 		{
; 211  : 			draw_glass_cockpit = FALSE;

  00034	c7 45 fc 00 00
	00 00		 mov	 DWORD PTR _draw_glass_cockpit$[ebp], 0

; 212  : 
; 213  : 			break;

  0003b	eb 08		 jmp	 SHORT $LN2@update_vip
$LN5@update_vip:

; 214  : 		}
; 215  : 		default:
; 216  : 		{
; 217  : 			draw_glass_cockpit = get_global_glass_cockpit ();

  0003d	a1 68 03 00 00	 mov	 eax, DWORD PTR ?global_options@@3UGLOBAL_OPTIONS_DATA@@A+872
  00042	89 45 fc	 mov	 DWORD PTR _draw_glass_cockpit$[ebp], eax
$LN2@update_vip:

; 218  : 
; 219  : 			break;
; 220  : 		}
; 221  : 	}
; 222  : 
; 223  : 	draw_controls = !draw_glass_cockpit;

  00045	83 7d fc 00	 cmp	 DWORD PTR _draw_glass_cockpit$[ebp], 0
  00049	75 0c		 jne	 SHORT $LN15@update_vip
  0004b	c7 85 7c ff ff
	ff 01 00 00 00	 mov	 DWORD PTR tv69[ebp], 1
  00055	eb 0a		 jmp	 SHORT $LN16@update_vip
$LN15@update_vip:
  00057	c7 85 7c ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv69[ebp], 0
$LN16@update_vip:
  00061	8b 85 7c ff ff
	ff		 mov	 eax, DWORD PTR tv69[ebp]
  00067	89 45 f8	 mov	 DWORD PTR _draw_controls$[ebp], eax

; 224  : 
; 225  : 	//
; 226  : 	// select 3D instance
; 227  : 	//
; 228  : 
; 229  : 	if (draw_glass_cockpit)

  0006a	83 7d fc 00	 cmp	 DWORD PTR _draw_glass_cockpit$[ebp], 0
  0006e	74 32		 je	 SHORT $LN6@update_vip

; 230  : 	{
; 231  : 		if (virtual_cockpit_inst3d != virtual_cockpit_inst3d_detail_level_glass_inst3d)

  00070	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  00075	3b 05 00 00 00
	00		 cmp	 eax, DWORD PTR ?virtual_cockpit_inst3d_detail_level_glass_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  0007b	74 23		 je	 SHORT $LN8@update_vip

; 232  : 		{
; 233  : 			virtual_cockpit_inst3d_detail_level_glass_inst3d->vp = virtual_cockpit_inst3d->vp;

  0007d	8b 35 00 00 00
	00		 mov	 esi, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  00083	83 c6 08	 add	 esi, 8
  00086	8b 3d 00 00 00
	00		 mov	 edi, DWORD PTR ?virtual_cockpit_inst3d_detail_level_glass_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  0008c	83 c7 08	 add	 edi, 8
  0008f	b9 0c 00 00 00	 mov	 ecx, 12			; 0000000cH
  00094	f3 a5		 rep movsd

; 234  : 
; 235  : 			virtual_cockpit_inst3d = virtual_cockpit_inst3d_detail_level_glass_inst3d;

  00096	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d_detail_level_glass_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  0009b	a3 00 00 00 00	 mov	 DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A, eax ; virtual_cockpit_inst3d
$LN8@update_vip:

; 236  : 		}
; 237  : 	}
; 238  : 	else

  000a0	eb 30		 jmp	 SHORT $LN7@update_vip
$LN6@update_vip:

; 239  : 	{
; 240  : 		if (virtual_cockpit_inst3d != virtual_cockpit_inst3d_detail_level_normal_inst3d)

  000a2	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  000a7	3b 05 00 00 00
	00		 cmp	 eax, DWORD PTR ?virtual_cockpit_inst3d_detail_level_normal_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  000ad	74 23		 je	 SHORT $LN7@update_vip

; 241  : 		{
; 242  : 			virtual_cockpit_inst3d_detail_level_normal_inst3d->vp = virtual_cockpit_inst3d->vp;

  000af	8b 35 00 00 00
	00		 mov	 esi, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  000b5	83 c6 08	 add	 esi, 8
  000b8	8b 3d 00 00 00
	00		 mov	 edi, DWORD PTR ?virtual_cockpit_inst3d_detail_level_normal_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  000be	83 c7 08	 add	 edi, 8
  000c1	b9 0c 00 00 00	 mov	 ecx, 12			; 0000000cH
  000c6	f3 a5		 rep movsd

; 243  : 
; 244  : 			virtual_cockpit_inst3d = virtual_cockpit_inst3d_detail_level_normal_inst3d;

  000c8	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d_detail_level_normal_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  000cd	a3 00 00 00 00	 mov	 DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A, eax ; virtual_cockpit_inst3d
$LN7@update_vip:

; 245  : 		}
; 246  : 	}
; 247  : 
; 248  : 	//
; 249  : 	// draw controls
; 250  : 	//
; 251  : 
; 252  : 	search.search_depth = 0;

  000d2	c7 45 c8 00 00
	00 00		 mov	 DWORD PTR _search$[ebp+8], 0

; 253  : 	search.search_object = virtual_cockpit_inst3d;

  000d9	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  000de	89 45 c0	 mov	 DWORD PTR _search$[ebp], eax

; 254  : 	search.sub_object_index = OBJECT_3D_SUB_OBJECT_COCKPIT_PILOT_JOYSTICK;

  000e1	c7 45 cc 97 00
	00 00		 mov	 DWORD PTR _search$[ebp+12], 151 ; 00000097H

; 255  : 
; 256  : 	if (find_object_3d_sub_object (&search) == SUB_OBJECT_SEARCH_RESULT_OBJECT_FOUND)

  000e8	8d 45 c0	 lea	 eax, DWORD PTR _search$[ebp]
  000eb	50		 push	 eax
  000ec	e8 00 00 00 00	 call	 ?find_object_3d_sub_object@@YG?AW4SUB_OBJECT_SEARCH_RESULT_TYPES@@PAUOBJECT_3D_SUB_OBJECT_SEARCH_DATA@@@Z ; find_object_3d_sub_object
  000f1	83 f8 01	 cmp	 eax, 1
  000f4	75 17		 jne	 SHORT $LN10@update_vip

; 257  : 	{
; 258  : 		search.result_sub_object->visible_object = draw_controls;

  000f6	8b 45 f8	 mov	 eax, DWORD PTR _draw_controls$[ebp]
  000f9	83 e0 01	 and	 eax, 1
  000fc	8b 4d c4	 mov	 ecx, DWORD PTR _search$[ebp+4]
  000ff	8b 51 08	 mov	 edx, DWORD PTR [ecx+8]
  00102	83 e2 fe	 and	 edx, -2			; fffffffeH
  00105	0b d0		 or	 edx, eax
  00107	8b 45 c4	 mov	 eax, DWORD PTR _search$[ebp+4]
  0010a	89 50 08	 mov	 DWORD PTR [eax+8], edx
$LN10@update_vip:

; 259  : 	}
; 260  : 
; 261  : 	search.search_depth = 0;

  0010d	c7 45 c8 00 00
	00 00		 mov	 DWORD PTR _search$[ebp+8], 0

; 262  : 	search.search_object = virtual_cockpit_inst3d;

  00114	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  00119	89 45 c0	 mov	 DWORD PTR _search$[ebp], eax

; 263  : 	search.sub_object_index = OBJECT_3D_SUB_OBJECT_COCKPIT_PILOT_COLLECTIVE;

  0011c	c7 45 cc 99 00
	00 00		 mov	 DWORD PTR _search$[ebp+12], 153 ; 00000099H

; 264  : 
; 265  : 	if (find_object_3d_sub_object (&search) == SUB_OBJECT_SEARCH_RESULT_OBJECT_FOUND)

  00123	8d 45 c0	 lea	 eax, DWORD PTR _search$[ebp]
  00126	50		 push	 eax
  00127	e8 00 00 00 00	 call	 ?find_object_3d_sub_object@@YG?AW4SUB_OBJECT_SEARCH_RESULT_TYPES@@PAUOBJECT_3D_SUB_OBJECT_SEARCH_DATA@@@Z ; find_object_3d_sub_object
  0012c	83 f8 01	 cmp	 eax, 1
  0012f	75 17		 jne	 SHORT $LN11@update_vip

; 266  : 	{
; 267  : 		search.result_sub_object->visible_object = draw_controls;

  00131	8b 45 f8	 mov	 eax, DWORD PTR _draw_controls$[ebp]
  00134	83 e0 01	 and	 eax, 1
  00137	8b 4d c4	 mov	 ecx, DWORD PTR _search$[ebp+4]
  0013a	8b 51 08	 mov	 edx, DWORD PTR [ecx+8]
  0013d	83 e2 fe	 and	 edx, -2			; fffffffeH
  00140	0b d0		 or	 edx, eax
  00142	8b 45 c4	 mov	 eax, DWORD PTR _search$[ebp+4]
  00145	89 50 08	 mov	 DWORD PTR [eax+8], edx
$LN11@update_vip:

; 268  : 	}
; 269  : 
; 270  : 	search.search_depth = 0;

  00148	c7 45 c8 00 00
	00 00		 mov	 DWORD PTR _search$[ebp+8], 0

; 271  : 	search.search_object = virtual_cockpit_inst3d;

  0014f	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  00154	89 45 c0	 mov	 DWORD PTR _search$[ebp], eax

; 272  : 	search.sub_object_index = OBJECT_3D_SUB_OBJECT_COCKPIT_WSO_JOYSTICK;

  00157	c7 45 cc 98 00
	00 00		 mov	 DWORD PTR _search$[ebp+12], 152 ; 00000098H

; 273  : 
; 274  : 	if (find_object_3d_sub_object (&search) == SUB_OBJECT_SEARCH_RESULT_OBJECT_FOUND)

  0015e	8d 45 c0	 lea	 eax, DWORD PTR _search$[ebp]
  00161	50		 push	 eax
  00162	e8 00 00 00 00	 call	 ?find_object_3d_sub_object@@YG?AW4SUB_OBJECT_SEARCH_RESULT_TYPES@@PAUOBJECT_3D_SUB_OBJECT_SEARCH_DATA@@@Z ; find_object_3d_sub_object
  00167	83 f8 01	 cmp	 eax, 1
  0016a	75 17		 jne	 SHORT $LN12@update_vip

; 275  : 	{
; 276  : 		search.result_sub_object->visible_object = draw_controls;

  0016c	8b 45 f8	 mov	 eax, DWORD PTR _draw_controls$[ebp]
  0016f	83 e0 01	 and	 eax, 1
  00172	8b 4d c4	 mov	 ecx, DWORD PTR _search$[ebp+4]
  00175	8b 51 08	 mov	 edx, DWORD PTR [ecx+8]
  00178	83 e2 fe	 and	 edx, -2			; fffffffeH
  0017b	0b d0		 or	 edx, eax
  0017d	8b 45 c4	 mov	 eax, DWORD PTR _search$[ebp+4]
  00180	89 50 08	 mov	 DWORD PTR [eax+8], edx
$LN12@update_vip:

; 277  : 	}
; 278  : 
; 279  : 	search.search_depth = 0;

  00183	c7 45 c8 00 00
	00 00		 mov	 DWORD PTR _search$[ebp+8], 0

; 280  : 	search.search_object = virtual_cockpit_inst3d;

  0018a	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  0018f	89 45 c0	 mov	 DWORD PTR _search$[ebp], eax

; 281  : 	search.sub_object_index = OBJECT_3D_SUB_OBJECT_COCKPIT_WSO_COLLECTIVE;

  00192	c7 45 cc 9a 00
	00 00		 mov	 DWORD PTR _search$[ebp+12], 154 ; 0000009aH

; 282  : 
; 283  : 	if (find_object_3d_sub_object (&search) == SUB_OBJECT_SEARCH_RESULT_OBJECT_FOUND)

  00199	8d 45 c0	 lea	 eax, DWORD PTR _search$[ebp]
  0019c	50		 push	 eax
  0019d	e8 00 00 00 00	 call	 ?find_object_3d_sub_object@@YG?AW4SUB_OBJECT_SEARCH_RESULT_TYPES@@PAUOBJECT_3D_SUB_OBJECT_SEARCH_DATA@@@Z ; find_object_3d_sub_object
  001a2	83 f8 01	 cmp	 eax, 1
  001a5	75 17		 jne	 SHORT $LN13@update_vip

; 284  : 	{
; 285  : 		search.result_sub_object->visible_object = draw_controls;

  001a7	8b 45 f8	 mov	 eax, DWORD PTR _draw_controls$[ebp]
  001aa	83 e0 01	 and	 eax, 1
  001ad	8b 4d c4	 mov	 ecx, DWORD PTR _search$[ebp+4]
  001b0	8b 51 08	 mov	 edx, DWORD PTR [ecx+8]
  001b3	83 e2 fe	 and	 edx, -2			; fffffffeH
  001b6	0b d0		 or	 edx, eax
  001b8	8b 45 c4	 mov	 eax, DWORD PTR _search$[ebp+4]
  001bb	89 50 08	 mov	 DWORD PTR [eax+8], edx
$LN13@update_vip:

; 286  : 	}
; 287  : 
; 288  : 	////////////////////////////////////////
; 289  : 	//
; 290  : 	// update animations
; 291  : 	//
; 292  : 	////////////////////////////////////////
; 293  : 
; 294  : 	//
; 295  : 	// crew animation
; 296  : 	//
; 297  : 
; 298  : 	update_viper_crew_animation ();

  001be	e8 00 00 00 00	 call	 ?update_viper_crew_animation@@YGXXZ ; update_viper_crew_animation

; 299  : 
; 300  : 	//
; 301  : 	// canopy doors
; 302  : 	//
; 303  : 
; 304  : 	animate_viper_virtual_cockpit_canopy_doors ();

  001c3	e8 00 00 00 00	 call	 ?animate_viper_virtual_cockpit_canopy_doors@@YGXXZ ; animate_viper_virtual_cockpit_canopy_doors

; 305  : }

  001c8	5f		 pop	 edi
  001c9	5e		 pop	 esi
  001ca	5b		 pop	 ebx
  001cb	8b e5		 mov	 esp, ebp
  001cd	5d		 pop	 ebp
  001ce	c3		 ret	 0
?update_viper_virtual_cockpit@@YGXXZ ENDP		; update_viper_virtual_cockpit
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\gunships\cockpits\viper\vi_vckpt.c
;	COMDAT ?deinitialise_viper_virtual_cockpit@@YGXXZ
_TEXT	SEGMENT
?deinitialise_viper_virtual_cockpit@@YGXXZ PROC		; deinitialise_viper_virtual_cockpit, COMDAT

; 152  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 153  : 	//
; 154  : 	// 3D instances
; 155  : 	//
; 156  : 
; 157  : 	destruct_3d_object (virtual_cockpit_inst3d_detail_level_normal_inst3d);

  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d_detail_level_normal_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  0000e	50		 push	 eax
  0000f	e8 00 00 00 00	 call	 ?destruct_3d_object@@YGXPAUOBJECT_3D_INSTANCE@@@Z ; destruct_3d_object

; 158  : 
; 159  : 	destruct_3d_object (virtual_cockpit_inst3d_detail_level_glass_inst3d);

  00014	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d_detail_level_glass_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  00019	50		 push	 eax
  0001a	e8 00 00 00 00	 call	 ?destruct_3d_object@@YGXPAUOBJECT_3D_INSTANCE@@@Z ; destruct_3d_object

; 160  : 
; 161  : 	virtual_cockpit_inst3d = NULL;

  0001f	c7 05 00 00 00
	00 00 00 00 00	 mov	 DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A, 0 ; virtual_cockpit_inst3d

; 162  : 
; 163  : 	//
; 164  : 	// wipers and rain
; 165  : 	//
; 166  : 
; 167  : 	deinitialise_viper_virtual_cockpit_wiper_and_rain_effect ();

  00029	e8 00 00 00 00	 call	 ?deinitialise_viper_virtual_cockpit_wiper_and_rain_effect@@YGXXZ ; deinitialise_viper_virtual_cockpit_wiper_and_rain_effect

; 168  : 
; 169  : 	//
; 170  : 	// crew animation
; 171  : 	//
; 172  : 
; 173  : 	deinitialise_viper_crew_animation ();

  0002e	e8 00 00 00 00	 call	 ?deinitialise_viper_crew_animation@@YGXXZ ; deinitialise_viper_crew_animation

; 174  : 
; 175  : 	//
; 176  : 	// virtual cockpit cameras
; 177  : 	//
; 178  : 
; 179  : 	deinitialise_common_virtual_cockpit_cameras ();

  00033	e8 00 00 00 00	 call	 ?deinitialise_common_virtual_cockpit_cameras@@YGXXZ ; deinitialise_common_virtual_cockpit_cameras

; 180  : 
; 181  : 
; 182  : }

  00038	5f		 pop	 edi
  00039	5e		 pop	 esi
  0003a	5b		 pop	 ebx
  0003b	8b e5		 mov	 esp, ebp
  0003d	5d		 pop	 ebp
  0003e	c3		 ret	 0
?deinitialise_viper_virtual_cockpit@@YGXXZ ENDP		; deinitialise_viper_virtual_cockpit
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\gunships\cockpits\viper\vi_vckpt.c
;	COMDAT ?initialise_viper_virtual_cockpit@@YGXXZ
_TEXT	SEGMENT
?initialise_viper_virtual_cockpit@@YGXXZ PROC		; initialise_viper_virtual_cockpit, COMDAT

; 101  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 102  : 	//
; 103  : 	// 3D instances
; 104  : 	//
; 105  : 
; 106  : 	virtual_cockpit_inst3d_detail_level_normal_inst3d = construct_3d_object (OBJECT_3D_AH1Z_COCKPIT);

  00009	68 e0 0a 00 00	 push	 2784			; 00000ae0H
  0000e	e8 00 00 00 00	 call	 ?construct_3d_object@@YGPAUOBJECT_3D_INSTANCE@@H@Z ; construct_3d_object
  00013	a3 00 00 00 00	 mov	 DWORD PTR ?virtual_cockpit_inst3d_detail_level_normal_inst3d@@3PAUOBJECT_3D_INSTANCE@@A, eax

; 107  : 
; 108  : 	virtual_cockpit_inst3d_detail_level_glass_inst3d = construct_3d_object (OBJECT_3D_AH1Z_COCKPIT);

  00018	68 e0 0a 00 00	 push	 2784			; 00000ae0H
  0001d	e8 00 00 00 00	 call	 ?construct_3d_object@@YGPAUOBJECT_3D_INSTANCE@@H@Z ; construct_3d_object
  00022	a3 00 00 00 00	 mov	 DWORD PTR ?virtual_cockpit_inst3d_detail_level_glass_inst3d@@3PAUOBJECT_3D_INSTANCE@@A, eax

; 109  : 
; 110  : 	virtual_cockpit_inst3d = virtual_cockpit_inst3d_detail_level_normal_inst3d;

  00027	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d_detail_level_normal_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  0002c	a3 00 00 00 00	 mov	 DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A, eax ; virtual_cockpit_inst3d

; 111  : 
; 112  : 	pilot_head_pitch_datum = get_viper_pilot_head_pitch_datum ();

  00031	e8 00 00 00 00	 call	 ?get_viper_pilot_head_pitch_datum@@YGMXZ ; get_viper_pilot_head_pitch_datum
  00036	d9 1d 00 00 00
	00		 fstp	 DWORD PTR ?pilot_head_pitch_datum@@3MA ; pilot_head_pitch_datum

; 113  : 
; 114  : 	co_pilot_head_pitch_datum = get_viper_co_pilot_head_pitch_datum ();

  0003c	e8 00 00 00 00	 call	 ?get_viper_co_pilot_head_pitch_datum@@YGMXZ ; get_viper_co_pilot_head_pitch_datum
  00041	d9 1d 00 00 00
	00		 fstp	 DWORD PTR ?co_pilot_head_pitch_datum@@3MA ; co_pilot_head_pitch_datum

; 115  : 
; 116  : 	//
; 117  : 	// wipers and rain
; 118  : 	//
; 119  : 
; 120  : 	initialise_viper_virtual_cockpit_wiper_and_rain_effect ();

  00047	e8 00 00 00 00	 call	 ?initialise_viper_virtual_cockpit_wiper_and_rain_effect@@YGXXZ ; initialise_viper_virtual_cockpit_wiper_and_rain_effect

; 121  : 
; 122  : 	//
; 123  : 	// crew animation
; 124  : 	//
; 125  : 
; 126  : 	initialise_viper_crew_animation ();

  0004c	e8 00 00 00 00	 call	 ?initialise_viper_crew_animation@@YGXXZ ; initialise_viper_crew_animation

; 127  : 
; 128  : 	//
; 129  : 	// canopy doors
; 130  : 	//
; 131  : 
; 132  : 	initialise_viper_virtual_cockpit_canopy_doors ();

  00051	e8 00 00 00 00	 call	 ?initialise_viper_virtual_cockpit_canopy_doors@@YGXXZ ; initialise_viper_virtual_cockpit_canopy_doors

; 133  : 
; 134  : 	//
; 135  : 	// virtual cockpit cameras
; 136  : 	//
; 137  : 
; 138  : 	initialise_common_virtual_cockpit_cameras ();

  00056	e8 00 00 00 00	 call	 ?initialise_common_virtual_cockpit_cameras@@YGXXZ ; initialise_common_virtual_cockpit_cameras

; 139  : 
; 140  : //VJ 050208 cleaing up wideview
; 141  : 	wide_cockpit_nr = WIDEVIEW_VIPER_PILOT;

  0005b	c7 05 00 00 00
	00 09 00 00 00	 mov	 DWORD PTR ?wide_cockpit_nr@@3HA, 9 ; wide_cockpit_nr

; 142  : //VJ wideview mod, date: 20-mar-03
; 143  : //start up in normal view because when you switch to wideview the parameters are read
; 144  : 	set_global_wide_cockpit(FALSE);

  00065	c7 05 00 00 00
	00 00 00 00 00	 mov	 DWORD PTR ?wide_cockpit@@3HA, 0 ; wide_cockpit

; 145  : }

  0006f	5f		 pop	 edi
  00070	5e		 pop	 esi
  00071	5b		 pop	 ebx
  00072	8b e5		 mov	 esp, ebp
  00074	5d		 pop	 ebp
  00075	c3		 ret	 0
?initialise_viper_virtual_cockpit@@YGXXZ ENDP		; initialise_viper_virtual_cockpit
_TEXT	ENDS
END
