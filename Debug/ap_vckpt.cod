; Listing generated by Microsoft (R) Optimizing Compiler Version 19.16.27045.0 

	TITLE	C:\Users\nhv90\Projects\eech\aphavoc\source\gunships\cockpits\apache\ap_vckpt.c
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB MSVCRTD
INCLUDELIB OLDNAMES

PUBLIC	?initialise_apache_virtual_cockpit@@YGXXZ	; initialise_apache_virtual_cockpit
PUBLIC	?deinitialise_apache_virtual_cockpit@@YGXXZ	; deinitialise_apache_virtual_cockpit
PUBLIC	?update_apache_virtual_cockpit@@YGXXZ		; update_apache_virtual_cockpit
PUBLIC	?draw_apache_internal_virtual_cockpit@@YGXI@Z	; draw_apache_internal_virtual_cockpit
PUBLIC	?draw_apache_external_virtual_cockpit@@YGXIPAE@Z ; draw_apache_external_virtual_cockpit
PUBLIC	?damage_apache_virtual_cockpit_main_rotors@@YGXH@Z ; damage_apache_virtual_cockpit_main_rotors
PUBLIC	?restore_apache_virtual_cockpit_main_rotors@@YGXXZ ; restore_apache_virtual_cockpit_main_rotors
PUBLIC	?apache_pnvs_active@@YGHXZ			; apache_pnvs_active
PUBLIC	??_C@_0DG@OCDOFANO@Failed?5to?5locate?5display?5viewpo@ ; `string'
PUBLIC	??_C@_0FA@DHMOLMNF@c?3?2users?2nhv90?2projects?2eech?2ap@ ; `string'
PUBLIC	?__LINE__Var@?0??get_display_viewpoint@@YGXW4VIEW_MODES@@PAUVIEWPOINT@@@Z@4JA ; `get_display_viewpoint'::`1'::__LINE__Var
PUBLIC	??_C@_0BC@FEOJCDHO@display_viewpoint@		; `string'
PUBLIC	??_C@_0BH@KFJLEDAI@Invalid?5view?5mode?5?$DN?5?$CFd@ ; `string'
PUBLIC	?__LINE__Var@?0??get_apache_crew_viewpoint@@YGXPAUVIEWPOINT@@@Z@4JA ; `get_apache_crew_viewpoint'::`1'::__LINE__Var
PUBLIC	??_C@_0P@DNABABOI@crew_viewpoint@		; `string'
PUBLIC	?__LINE__Var@?0??draw_apache_internal_virtual_cockpit@@YGXI@Z@4JA ; `draw_apache_internal_virtual_cockpit'::`1'::__LINE__Var
PUBLIC	?__LINE__Var@?0??draw_apache_external_virtual_cockpit@@YGXIPAE@Z@4JA ; `draw_apache_external_virtual_cockpit'::`1'::__LINE__Var
PUBLIC	??_C@_0BM@NCGEHGDE@virtual_cockpit_nose_inst3d@	; `string'
PUBLIC	??_C@_0BC@ENKILJCA@wiper_rle_graphic@		; `string'
PUBLIC	?__LINE__Var@?0??damage_apache_virtual_cockpit_main_rotors@@YGXH@Z@4JA ; `damage_apache_virtual_cockpit_main_rotors'::`1'::__LINE__Var
PUBLIC	??_C@_0BG@EANNPEON@get_gunship_entity?5?$CI?$CJ@ ; `string'
PUBLIC	??_C@_0CC@MKOBILCB@virtual_cockpit_main_rotor_inst@ ; `string'
PUBLIC	??_C@_06DDNABPCD@inst3d@			; `string'
PUBLIC	?__LINE__Var@?0??restore_apache_virtual_cockpit_main_rotors@@YGXXZ@4JA ; `restore_apache_virtual_cockpit_main_rotors'::`1'::__LINE__Var
PUBLIC	__real@0000000000000000
PUBLIC	__real@3c8efa35
PUBLIC	__real@3d4ccccd
PUBLIC	__real@3dcccccd
PUBLIC	__real@3dd0c43d
PUBLIC	__real@3e99999a
PUBLIC	__real@3ee66666
PUBLIC	__real@3ef4f8b588e368f1
PUBLIC	__real@3f000000
PUBLIC	__real@3f00002000400080
PUBLIC	__real@3f0ccccd
PUBLIC	__real@3f266666
PUBLIC	__real@3f333333
PUBLIC	__real@3f59999a
PUBLIC	__real@3f689374bc6a7efa
PUBLIC	__real@3f747ae147ae147b
PUBLIC	__real@3f800000
PUBLIC	__real@3f80624dd2f1a9fc
PUBLIC	__real@3f91df46a0000000
PUBLIC	__real@3f989374bc6a7efa
PUBLIC	__real@3f9999999999999a
PUBLIC	__real@3fa999999999999a
PUBLIC	__real@3fb6571848000000
PUBLIC	__real@3ff0000000000000
PUBLIC	__real@3ff0c15236000000
PUBLIC	__real@3ff51eb851eb851f
PUBLIC	__real@40060a92
PUBLIC	__real@4008000000000000
PUBLIC	__real@4014000000000000
PUBLIC	__real@4024000000000000
PUBLIC	__real@4034000000000000
PUBLIC	__real@4044000000000000
PUBLIC	__real@4049000000000000
PUBLIC	__real@404e000000000000
PUBLIC	__real@405b800000000000
PUBLIC	__real@41200000
PUBLIC	__real@461c4000
PUBLIC	__real@be860a92
PUBLIC	__real@bf32b8c2
PUBLIC	__real@bf490fdb
PUBLIC	__real@bf689374bc6a7efa
PUBLIC	__real@bf9374bc6a7ef9db
PUBLIC	__real@bfa5810624dd2f1b
PUBLIC	__real@bfd3333333333333
PUBLIC	__real@bfe0c15236000000
PUBLIC	__real@bff8000000000000
PUBLIC	__real@c0060a92
PUBLIC	__real@c008000000000000
PUBLIC	__real@c1200000
PUBLIC	__xmm@80000000800000008000000080000000
EXTRN	_memcpy:PROC
EXTRN	?process_assert@@YGXPBD0H@Z:PROC		; process_assert
EXTRN	?debug_fatal@@YAXPBDZZ:PROC			; debug_fatal
EXTRN	?query_TIR_active@@YAHXZ:PROC			; query_TIR_active
EXTRN	?get_3d_transformation_matrix@@YGXQAY02MMMM@Z:PROC ; get_3d_transformation_matrix
EXTRN	?multiply_matrix3x3_vec3d@@YGXPAUVEC3D@@QAY02$$CBMPBU1@@Z:PROC ; multiply_matrix3x3_vec3d
EXTRN	?multiply_transpose_matrix3x3_vec3d@@YGXPAUVEC3D@@QAY02$$CBMPBU1@@Z:PROC ; multiply_transpose_matrix3x3_vec3d
EXTRN	?multiply_matrix3x3_matrix3x3@@YGXQAY02MQAY02$$CBM1@Z:PROC ; multiply_matrix3x3_matrix3x3
EXTRN	?lock_screen@@YGHPAUSCREEN@@@Z:PROC		; lock_screen
EXTRN	?unlock_screen@@YGHPAUSCREEN@@@Z:PROC		; unlock_screen
EXTRN	?blit_rle_graphic@@YGXPBEHH@Z:PROC		; blit_rle_graphic
EXTRN	?clear_zbuffer_screen@@YGXXZ:PROC		; clear_zbuffer_screen
EXTRN	?set_3d_active_environment@@YGXPAUENV_3D@@@Z:PROC ; set_3d_active_environment
EXTRN	?set_3d_main_light_source@@YGXPAUENV_3D@@PAULIGHT_COLOUR@@PAUVEC3D@@H@Z:PROC ; set_3d_main_light_source
EXTRN	?set_3d_ambient_light@@YGXPAUENV_3D@@PAULIGHT_COLOUR@@@Z:PROC ; set_3d_ambient_light
EXTRN	?recalculate_3d_environment_settings@@YGXPAUENV_3D@@@Z:PROC ; recalculate_3d_environment_settings
EXTRN	?set_3d_view_distances@@YGXPAUENV_3D@@MMMM@Z:PROC ; set_3d_view_distances
EXTRN	?realise_3d_clip_extents@@YGXPAUENV_3D@@@Z:PROC	; realise_3d_clip_extents
EXTRN	?construct_3d_object@@YGPAUOBJECT_3D_INSTANCE@@H@Z:PROC ; construct_3d_object
EXTRN	?destruct_3d_object@@YGXPAUOBJECT_3D_INSTANCE@@@Z:PROC ; destruct_3d_object
EXTRN	?get_3d_sub_object_world_viewpoint@@YGXPAUOBJECT_3D_SUB_INSTANCE@@PAUVIEWPOINT@@@Z:PROC ; get_3d_sub_object_world_viewpoint
EXTRN	?insert_zbiased_relative_object_into_3d_scene@@YGXW4OBJECT_3D_DRAWING_TYPES@@PAUVEC3D@@PAXM@Z:PROC ; insert_zbiased_relative_object_into_3d_scene
EXTRN	?draw_3d_scene@@YGXXZ:PROC			; draw_3d_scene
EXTRN	?begin_3d_scene@@YGHXZ:PROC			; begin_3d_scene
EXTRN	?end_3d_scene@@YGXXZ:PROC			; end_3d_scene
EXTRN	?find_object_3d_sub_object@@YG?AW4SUB_OBJECT_SEARCH_RESULT_TYPES@@PAUOBJECT_3D_SUB_OBJECT_SEARCH_DATA@@@Z:PROC ; find_object_3d_sub_object
EXTRN	?animate_helicopter_main_rotors@@YGXPAUENTITY@@HH@Z:PROC ; animate_helicopter_main_rotors
EXTRN	?animate_damaged_helicopter_main_rotors@@YGXPAUENTITY@@H@Z:PROC ; animate_damaged_helicopter_main_rotors
EXTRN	?animate_helicopter_virtual_cockpit_main_rotors@@YGXPAUENTITY@@PAUOBJECT_3D_INSTANCE@@@Z:PROC ; animate_helicopter_virtual_cockpit_main_rotors
EXTRN	?damage_helicopter_main_rotor_inst3d@@YGHPAUOBJECT_3D_INSTANCE@@H@Z:PROC ; damage_helicopter_main_rotor_inst3d
EXTRN	?restore_helicopter_main_rotor_inst3d@@YGHPAUOBJECT_3D_INSTANCE@@@Z:PROC ; restore_helicopter_main_rotor_inst3d
EXTRN	?get_helicopter_main_rotors_blurred@@YGHPAUENTITY@@@Z:PROC ; get_helicopter_main_rotors_blurred
EXTRN	?set_rotation_angle_of_helicopter_main_rotors@@YGXPAUOBJECT_3D_INSTANCE@@M@Z:PROC ; set_rotation_angle_of_helicopter_main_rotors
EXTRN	?get_rotation_angle_of_helicopter_main_rotors@@YGMPAUOBJECT_3D_INSTANCE@@@Z:PROC ; get_rotation_angle_of_helicopter_main_rotors
EXTRN	?draw_apache_upfront_display_on_texture@@YGXXZ:PROC ; draw_apache_upfront_display_on_texture
EXTRN	?draw_apache_mfd_on_texture@@YGXW4MFD_LOCATIONS@@@Z:PROC ; draw_apache_mfd_on_texture
EXTRN	?initialise_common_virtual_cockpit_cameras@@YGXXZ:PROC ; initialise_common_virtual_cockpit_cameras
EXTRN	?deinitialise_common_virtual_cockpit_cameras@@YGXXZ:PROC ; deinitialise_common_virtual_cockpit_cameras
EXTRN	?print_edit_wide_cockpit@@YGXXZ:PROC		; print_edit_wide_cockpit
EXTRN	?move_edit_wide_cockpit@@YGXXZ:PROC		; move_edit_wide_cockpit
EXTRN	?initialise_co_pilot_head_animations@@YGXXZ:PROC ; initialise_co_pilot_head_animations
EXTRN	?animate_co_pilot_head@@YGXPAUOBJECT_3D_INSTANCE@@@Z:PROC ; animate_co_pilot_head
EXTRN	?get_apache_virtual_cockpit_adi_angles@@YGXQAY02MPAM11@Z:PROC ; get_apache_virtual_cockpit_adi_angles
EXTRN	?get_apache_virtual_cockpit_adi_slip_indicator_needle_value@@YGMXZ:PROC ; get_apache_virtual_cockpit_adi_slip_indicator_needle_value
EXTRN	?get_apache_virtual_cockpit_airspeed_indicator_needle_value@@YGMXZ:PROC ; get_apache_virtual_cockpit_airspeed_indicator_needle_value
EXTRN	?get_apache_virtual_cockpit_barometric_altimeter_needle_value@@YGMXZ:PROC ; get_apache_virtual_cockpit_barometric_altimeter_needle_value
EXTRN	?get_apache_virtual_cockpit_clock_hand_values@@YGXPAM00@Z:PROC ; get_apache_virtual_cockpit_clock_hand_values
EXTRN	?draw_apache_altitude_counter@@YGXXZ:PROC	; draw_apache_altitude_counter
EXTRN	?initialise_altitude_counter@@YGXXZ:PROC	; initialise_altitude_counter
EXTRN	?deinitialise_altitude_counter@@YGXXZ:PROC	; deinitialise_altitude_counter
EXTRN	?initialise_apache_virtual_cockpit_wiper_and_rain_effect@@YGXXZ:PROC ; initialise_apache_virtual_cockpit_wiper_and_rain_effect
EXTRN	?deinitialise_apache_virtual_cockpit_wiper_and_rain_effect@@YGXXZ:PROC ; deinitialise_apache_virtual_cockpit_wiper_and_rain_effect
EXTRN	?draw_apache_virtual_cockpit_wiper@@YGXPAUVIEWPOINT@@@Z:PROC ; draw_apache_virtual_cockpit_wiper
EXTRN	?draw_apache_virtual_cockpit_rain_effect@@YGXPAUVIEWPOINT@@@Z:PROC ; draw_apache_virtual_cockpit_rain_effect
EXTRN	?get_time_acceleration@@YGHXZ:PROC		; get_time_acceleration
EXTRN	?move_by_rate@@YGMMMM@Z:PROC			; move_by_rate
EXTRN	?system_delta_time@@3MA:DWORD			; system_delta_time
EXTRN	?random_number_seed@@3HA:DWORD			; random_number_seed
EXTRN	?application_video_colourdepth@@3HA:DWORD	; application_video_colourdepth
EXTRN	?d3d_can_render_to_texture@@3HA:DWORD		; d3d_can_render_to_texture
EXTRN	?active_screen@@3PAUSCREEN@@A:DWORD		; active_screen
EXTRN	?command_line_g_force_head_movment_modifier@@3MA:DWORD ; command_line_g_force_head_movment_modifier
EXTRN	?null_entity_pointer_message@@3PBDB:DWORD	; null_entity_pointer_message
EXTRN	?global_options@@3UGLOBAL_OPTIONS_DATA@@A:BYTE	; global_options
EXTRN	?custom_3d_models@@3Uinstalled_custom_3d_models@@A:QWORD ; custom_3d_models
EXTRN	?fn_get_local_entity_attitude_matrix@@3PAP6GXPAUENTITY@@QAY02M@ZA:BYTE ; fn_get_local_entity_attitude_matrix
EXTRN	?overload_invalid_int_type_message@@3PBDB:DWORD	; overload_invalid_int_type_message
EXTRN	?fn_get_local_entity_int_value@@3PAY0BBH@P6GHPAUENTITY@@W4INT_TYPES@@@ZA:BYTE ; fn_get_local_entity_int_value
EXTRN	?overload_invalid_ptr_type_message@@3PBDB:DWORD	; overload_invalid_ptr_type_message
EXTRN	?fn_get_local_entity_ptr_value@@3PAY0BE@P6GPAXPAUENTITY@@W4PTR_TYPES@@@ZA:BYTE ; fn_get_local_entity_ptr_value
EXTRN	?overload_invalid_vec3d_type_message@@3PBDB:DWORD ; overload_invalid_vec3d_type_message
EXTRN	?fn_get_local_entity_vec3d@@3PAY0BI@P6GXPAUENTITY@@W4VEC3D_TYPES@@PAUVEC3D@@@ZA:BYTE ; fn_get_local_entity_vec3d
EXTRN	?gunship_entity@@3PAUENTITY@@A:DWORD		; gunship_entity
EXTRN	?pilot_entity@@3PAUENTITY@@A:DWORD		; pilot_entity
EXTRN	?session_entity@@3PAUENTITY@@A:DWORD		; session_entity
EXTRN	?ix_640_480@@3HA:DWORD				; ix_640_480
EXTRN	?iy_640_480@@3HA:DWORD				; iy_640_480
EXTRN	?full_screen_hi_res@@3HA:DWORD			; full_screen_hi_res
EXTRN	?main_3d_env@@3PAUENV_3D@@A:DWORD		; main_3d_env
EXTRN	?main_3d_single_light_env@@3PAUENV_3D@@A:DWORD	; main_3d_single_light_env
EXTRN	?main_vp@@3UVIEWPOINT@@A:BYTE			; main_vp
EXTRN	?view_mode@@3W4VIEW_MODES@@A:DWORD		; view_mode
EXTRN	?pilot_head_heading@@3MA:DWORD			; pilot_head_heading
EXTRN	?pilot_head_pitch@@3MA:DWORD			; pilot_head_pitch
EXTRN	?wide_cockpit@@3HA:DWORD			; wide_cockpit
EXTRN	?edit_wide_cockpit@@3HA:DWORD			; edit_wide_cockpit
EXTRN	?wide_cockpit_position@@3PAUCOCKPIT_POSITION@@A:BYTE ; wide_cockpit_position
EXTRN	?wide_cockpit_nr@@3HA:DWORD			; wide_cockpit_nr
EXTRN	?current_custom_cockpit_viewpoint@@3UCOCKPIT_VIEW@@A:BYTE ; current_custom_cockpit_viewpoint
EXTRN	?fire_extinguisher_used@@3HA:DWORD		; fire_extinguisher_used
EXTRN	?night_vision_system_active@@3HA:DWORD		; night_vision_system_active
EXTRN	?draw_virtual_cockpit_needles_on_fixed_cockpits@@3HA:DWORD ; draw_virtual_cockpit_needles_on_fixed_cockpits
EXTRN	?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A:DWORD ; virtual_cockpit_inst3d
EXTRN	?pilot_head_pitch_datum@@3MA:DWORD		; pilot_head_pitch_datum
EXTRN	?co_pilot_head_pitch_datum@@3MA:DWORD		; co_pilot_head_pitch_datum
EXTRN	?wiper_mode@@3W4WIPER_MODES@@A:DWORD		; wiper_mode
EXTRN	?rain_mode@@3W4RAIN_MODES@@A:DWORD		; rain_mode
EXTRN	?apache_lamps@@3UAPACHE_LAMP_FLAGS@@A:DWORD	; apache_lamps
EXTRN	?current_flight_dynamics@@3PAUDYNAMICS_TYPE@@A:DWORD ; current_flight_dynamics
EXTRN	__fltused:DWORD
_BSS	SEGMENT
?virtual_cockpit_level1_inst3d@@3PAUOBJECT_3D_INSTANCE@@A DD 01H DUP (?) ; virtual_cockpit_level1_inst3d
?virtual_cockpit_level2_inst3d@@3PAUOBJECT_3D_INSTANCE@@A DD 01H DUP (?) ; virtual_cockpit_level2_inst3d
?virtual_cockpit_level3_inst3d@@3PAUOBJECT_3D_INSTANCE@@A DD 01H DUP (?) ; virtual_cockpit_level3_inst3d
?virtual_cockpit_fillet_level1_inst3d@@3PAUOBJECT_3D_INSTANCE@@A DD 01H DUP (?) ; virtual_cockpit_fillet_level1_inst3d
?virtual_cockpit_fillet_level2_inst3d@@3PAUOBJECT_3D_INSTANCE@@A DD 01H DUP (?) ; virtual_cockpit_fillet_level2_inst3d
?virtual_cockpit_fillet_level3_inst3d@@3PAUOBJECT_3D_INSTANCE@@A DD 01H DUP (?) ; virtual_cockpit_fillet_level3_inst3d
?virtual_cockpit_main_rotor_inst3d@@3PAUOBJECT_3D_INSTANCE@@A DD 01H DUP (?) ; virtual_cockpit_main_rotor_inst3d
?virtual_cockpit_adi_inst3d@@3PAUOBJECT_3D_INSTANCE@@A DD 01H DUP (?) ; virtual_cockpit_adi_inst3d
?virtual_cockpit_large_adi_inst3d@@3PAUOBJECT_3D_INSTANCE@@A DD 01H DUP (?) ; virtual_cockpit_large_adi_inst3d
?virtual_cockpit_compass_inst3d@@3PAUOBJECT_3D_INSTANCE@@A DD 01H DUP (?) ; virtual_cockpit_compass_inst3d
?virtual_cockpit_instrument_needles_inst3d@@3PAUOBJECT_3D_INSTANCE@@A DD 01H DUP (?) ; virtual_cockpit_instrument_needles_inst3d
?virtual_cockpit_instrument_large_needles_inst3d@@3PAUOBJECT_3D_INSTANCE@@A DD 01H DUP (?) ; virtual_cockpit_instrument_large_needles_inst3d
?virtual_cockpit_upfront_display_inst3d@@3PAUOBJECT_3D_INSTANCE@@A DD 01H DUP (?) ; virtual_cockpit_upfront_display_inst3d
?virtual_cockpit_lhs_mfd_inst3d@@3PAUOBJECT_3D_INSTANCE@@A DD 01H DUP (?) ; virtual_cockpit_lhs_mfd_inst3d
?virtual_cockpit_rhs_mfd_inst3d@@3PAUOBJECT_3D_INSTANCE@@A DD 01H DUP (?) ; virtual_cockpit_rhs_mfd_inst3d
?virtual_cockpit_display_view_mfd_inst3d@@3PAUOBJECT_3D_INSTANCE@@A DD 01H DUP (?) ; virtual_cockpit_display_view_mfd_inst3d
?virtual_cockpit_lights_inst3d@@3PAUOBJECT_3D_INSTANCE@@A DD 01H DUP (?) ; virtual_cockpit_lights_inst3d
?virtual_cockpit_nose_inst3d@@3PAUOBJECT_3D_INSTANCE@@A DD 01H DUP (?) ; virtual_cockpit_nose_inst3d
?clipx@@3MA DD	01H DUP (?)				; clipx
?throttle_pitch_1@@3MA DD 01H DUP (?)			; throttle_pitch_1
?throttle_pitch_2@@3MA DD 01H DUP (?)			; throttle_pitch_2
?pnvs_heading@@3MA DD 01H DUP (?)			; pnvs_heading
?head_limits@@3PAY01UVEC3D@@A DB 030H DUP (?)		; head_limits
?x_head_g_movement@@3MA DD 01H DUP (?)			; x_head_g_movement
?y_head_g_movement@@3MA DD 01H DUP (?)			; y_head_g_movement
?random_vibration_x@@3MA DD 01H DUP (?)			; random_vibration_x
?random_vibration_y@@3MA DD 01H DUP (?)			; random_vibration_y
?pnvs_in_position@?1??apache_pnvs_active@@YGHXZ@4HA DD 01H DUP (?) ; `apache_pnvs_active'::`2'::pnvs_in_position
_BSS	ENDS
;	COMDAT __xmm@80000000800000008000000080000000
CONST	SEGMENT
__xmm@80000000800000008000000080000000 DB 00H, 00H, 00H, 080H, 00H, 00H, 00H
	DB	080H, 00H, 00H, 00H, 080H, 00H, 00H, 00H, 080H
CONST	ENDS
;	COMDAT __real@c1200000
CONST	SEGMENT
__real@c1200000 DD 0c1200000r			; -10
CONST	ENDS
;	COMDAT __real@c008000000000000
CONST	SEGMENT
__real@c008000000000000 DQ 0c008000000000000r	; -3
CONST	ENDS
;	COMDAT __real@c0060a92
CONST	SEGMENT
__real@c0060a92 DD 0c0060a92r			; -2.0944
CONST	ENDS
;	COMDAT __real@bff8000000000000
CONST	SEGMENT
__real@bff8000000000000 DQ 0bff8000000000000r	; -1.5
CONST	ENDS
;	COMDAT __real@bfe0c15236000000
CONST	SEGMENT
__real@bfe0c15236000000 DQ 0bfe0c15236000000r	; -0.523599
CONST	ENDS
;	COMDAT __real@bfd3333333333333
CONST	SEGMENT
__real@bfd3333333333333 DQ 0bfd3333333333333r	; -0.3
CONST	ENDS
;	COMDAT __real@bfa5810624dd2f1b
CONST	SEGMENT
__real@bfa5810624dd2f1b DQ 0bfa5810624dd2f1br	; -0.042
CONST	ENDS
;	COMDAT __real@bf9374bc6a7ef9db
CONST	SEGMENT
__real@bf9374bc6a7ef9db DQ 0bf9374bc6a7ef9dbr	; -0.019
CONST	ENDS
;	COMDAT __real@bf689374bc6a7efa
CONST	SEGMENT
__real@bf689374bc6a7efa DQ 0bf689374bc6a7efar	; -0.003
CONST	ENDS
;	COMDAT __real@bf490fdb
CONST	SEGMENT
__real@bf490fdb DD 0bf490fdbr			; -0.785398
CONST	ENDS
;	COMDAT __real@bf32b8c2
CONST	SEGMENT
__real@bf32b8c2 DD 0bf32b8c2r			; -0.698132
CONST	ENDS
;	COMDAT __real@be860a92
CONST	SEGMENT
__real@be860a92 DD 0be860a92r			; -0.261799
CONST	ENDS
;	COMDAT __real@461c4000
CONST	SEGMENT
__real@461c4000 DD 0461c4000r			; 10000
CONST	ENDS
;	COMDAT __real@41200000
CONST	SEGMENT
__real@41200000 DD 041200000r			; 10
CONST	ENDS
;	COMDAT __real@405b800000000000
CONST	SEGMENT
__real@405b800000000000 DQ 0405b800000000000r	; 110
CONST	ENDS
;	COMDAT __real@404e000000000000
CONST	SEGMENT
__real@404e000000000000 DQ 0404e000000000000r	; 60
CONST	ENDS
;	COMDAT __real@4049000000000000
CONST	SEGMENT
__real@4049000000000000 DQ 04049000000000000r	; 50
CONST	ENDS
;	COMDAT __real@4044000000000000
CONST	SEGMENT
__real@4044000000000000 DQ 04044000000000000r	; 40
CONST	ENDS
;	COMDAT __real@4034000000000000
CONST	SEGMENT
__real@4034000000000000 DQ 04034000000000000r	; 20
CONST	ENDS
;	COMDAT __real@4024000000000000
CONST	SEGMENT
__real@4024000000000000 DQ 04024000000000000r	; 10
CONST	ENDS
;	COMDAT __real@4014000000000000
CONST	SEGMENT
__real@4014000000000000 DQ 04014000000000000r	; 5
CONST	ENDS
;	COMDAT __real@4008000000000000
CONST	SEGMENT
__real@4008000000000000 DQ 04008000000000000r	; 3
CONST	ENDS
;	COMDAT __real@40060a92
CONST	SEGMENT
__real@40060a92 DD 040060a92r			; 2.0944
CONST	ENDS
;	COMDAT __real@3ff51eb851eb851f
CONST	SEGMENT
__real@3ff51eb851eb851f DQ 03ff51eb851eb851fr	; 1.32
CONST	ENDS
;	COMDAT __real@3ff0c15236000000
CONST	SEGMENT
__real@3ff0c15236000000 DQ 03ff0c15236000000r	; 1.0472
CONST	ENDS
;	COMDAT __real@3ff0000000000000
CONST	SEGMENT
__real@3ff0000000000000 DQ 03ff0000000000000r	; 1
CONST	ENDS
;	COMDAT __real@3fb6571848000000
CONST	SEGMENT
__real@3fb6571848000000 DQ 03fb6571848000000r	; 0.0872665
CONST	ENDS
;	COMDAT __real@3fa999999999999a
CONST	SEGMENT
__real@3fa999999999999a DQ 03fa999999999999ar	; 0.05
CONST	ENDS
;	COMDAT __real@3f9999999999999a
CONST	SEGMENT
__real@3f9999999999999a DQ 03f9999999999999ar	; 0.025
CONST	ENDS
;	COMDAT __real@3f989374bc6a7efa
CONST	SEGMENT
__real@3f989374bc6a7efa DQ 03f989374bc6a7efar	; 0.024
CONST	ENDS
;	COMDAT __real@3f91df46a0000000
CONST	SEGMENT
__real@3f91df46a0000000 DQ 03f91df46a0000000r	; 0.0174533
CONST	ENDS
;	COMDAT __real@3f80624dd2f1a9fc
CONST	SEGMENT
__real@3f80624dd2f1a9fc DQ 03f80624dd2f1a9fcr	; 0.008
CONST	ENDS
;	COMDAT __real@3f800000
CONST	SEGMENT
__real@3f800000 DD 03f800000r			; 1
CONST	ENDS
;	COMDAT __real@3f747ae147ae147b
CONST	SEGMENT
__real@3f747ae147ae147b DQ 03f747ae147ae147br	; 0.005
CONST	ENDS
;	COMDAT __real@3f689374bc6a7efa
CONST	SEGMENT
__real@3f689374bc6a7efa DQ 03f689374bc6a7efar	; 0.003
CONST	ENDS
;	COMDAT __real@3f59999a
CONST	SEGMENT
__real@3f59999a DD 03f59999ar			; 0.85
CONST	ENDS
;	COMDAT __real@3f333333
CONST	SEGMENT
__real@3f333333 DD 03f333333r			; 0.7
CONST	ENDS
;	COMDAT __real@3f266666
CONST	SEGMENT
__real@3f266666 DD 03f266666r			; 0.65
CONST	ENDS
;	COMDAT __real@3f0ccccd
CONST	SEGMENT
__real@3f0ccccd DD 03f0ccccdr			; 0.55
CONST	ENDS
;	COMDAT __real@3f00002000400080
CONST	SEGMENT
__real@3f00002000400080 DQ 03f00002000400080r	; 3.05185e-05
CONST	ENDS
;	COMDAT __real@3f000000
CONST	SEGMENT
__real@3f000000 DD 03f000000r			; 0.5
CONST	ENDS
;	COMDAT __real@3ef4f8b588e368f1
CONST	SEGMENT
__real@3ef4f8b588e368f1 DQ 03ef4f8b588e368f1r	; 2e-05
CONST	ENDS
;	COMDAT __real@3ee66666
CONST	SEGMENT
__real@3ee66666 DD 03ee66666r			; 0.45
CONST	ENDS
;	COMDAT __real@3e99999a
CONST	SEGMENT
__real@3e99999a DD 03e99999ar			; 0.3
CONST	ENDS
;	COMDAT __real@3dd0c43d
CONST	SEGMENT
__real@3dd0c43d DD 03dd0c43dr			; 0.101937
CONST	ENDS
;	COMDAT __real@3dcccccd
CONST	SEGMENT
__real@3dcccccd DD 03dcccccdr			; 0.1
CONST	ENDS
;	COMDAT __real@3d4ccccd
CONST	SEGMENT
__real@3d4ccccd DD 03d4ccccdr			; 0.05
CONST	ENDS
;	COMDAT __real@3c8efa35
CONST	SEGMENT
__real@3c8efa35 DD 03c8efa35r			; 0.0174533
CONST	ENDS
;	COMDAT __real@0000000000000000
CONST	SEGMENT
__real@0000000000000000 DQ 00000000000000000r	; 0
CONST	ENDS
;	COMDAT ?__LINE__Var@?0??restore_apache_virtual_cockpit_main_rotors@@YGXXZ@4JA
_DATA	SEGMENT
?__LINE__Var@?0??restore_apache_virtual_cockpit_main_rotors@@YGXXZ@4JA DD 0839H ; `restore_apache_virtual_cockpit_main_rotors'::`1'::__LINE__Var
_DATA	ENDS
;	COMDAT ??_C@_06DDNABPCD@inst3d@
CONST	SEGMENT
??_C@_06DDNABPCD@inst3d@ DB 'inst3d', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_0CC@MKOBILCB@virtual_cockpit_main_rotor_inst@
CONST	SEGMENT
??_C@_0CC@MKOBILCB@virtual_cockpit_main_rotor_inst@ DB 'virtual_cockpit_m'
	DB	'ain_rotor_inst3d', 00H			; `string'
CONST	ENDS
;	COMDAT ??_C@_0BG@EANNPEON@get_gunship_entity?5?$CI?$CJ@
CONST	SEGMENT
??_C@_0BG@EANNPEON@get_gunship_entity?5?$CI?$CJ@ DB 'get_gunship_entity ('
	DB	')', 00H					; `string'
CONST	ENDS
;	COMDAT ?__LINE__Var@?0??damage_apache_virtual_cockpit_main_rotors@@YGXH@Z@4JA
_DATA	SEGMENT
?__LINE__Var@?0??damage_apache_virtual_cockpit_main_rotors@@YGXH@Z@4JA DD 081cH ; `damage_apache_virtual_cockpit_main_rotors'::`1'::__LINE__Var
_DATA	ENDS
;	COMDAT ??_C@_0BC@ENKILJCA@wiper_rle_graphic@
CONST	SEGMENT
??_C@_0BC@ENKILJCA@wiper_rle_graphic@ DB 'wiper_rle_graphic', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0BM@NCGEHGDE@virtual_cockpit_nose_inst3d@
CONST	SEGMENT
??_C@_0BM@NCGEHGDE@virtual_cockpit_nose_inst3d@ DB 'virtual_cockpit_nose_'
	DB	'inst3d', 00H				; `string'
CONST	ENDS
;	COMDAT ?__LINE__Var@?0??draw_apache_external_virtual_cockpit@@YGXIPAE@Z@4JA
_DATA	SEGMENT
?__LINE__Var@?0??draw_apache_external_virtual_cockpit@@YGXIPAE@Z@4JA DD 06a6H ; `draw_apache_external_virtual_cockpit'::`1'::__LINE__Var
_DATA	ENDS
;	COMDAT ?__LINE__Var@?0??draw_apache_internal_virtual_cockpit@@YGXI@Z@4JA
_DATA	SEGMENT
?__LINE__Var@?0??draw_apache_internal_virtual_cockpit@@YGXI@Z@4JA DD 036dH ; `draw_apache_internal_virtual_cockpit'::`1'::__LINE__Var
_DATA	ENDS
;	COMDAT ??_C@_0P@DNABABOI@crew_viewpoint@
CONST	SEGMENT
??_C@_0P@DNABABOI@crew_viewpoint@ DB 'crew_viewpoint', 00H ; `string'
CONST	ENDS
;	COMDAT ?__LINE__Var@?0??get_apache_crew_viewpoint@@YGXPAUVIEWPOINT@@@Z@4JA
_DATA	SEGMENT
?__LINE__Var@?0??get_apache_crew_viewpoint@@YGXPAUVIEWPOINT@@@Z@4JA DD 02ebH ; `get_apache_crew_viewpoint'::`1'::__LINE__Var
_DATA	ENDS
;	COMDAT ??_C@_0BH@KFJLEDAI@Invalid?5view?5mode?5?$DN?5?$CFd@
CONST	SEGMENT
??_C@_0BH@KFJLEDAI@Invalid?5view?5mode?5?$DN?5?$CFd@ DB 'Invalid view mod'
	DB	'e = %d', 00H				; `string'
CONST	ENDS
;	COMDAT ??_C@_0BC@FEOJCDHO@display_viewpoint@
CONST	SEGMENT
??_C@_0BC@FEOJCDHO@display_viewpoint@ DB 'display_viewpoint', 00H ; `string'
CONST	ENDS
;	COMDAT ?__LINE__Var@?0??get_display_viewpoint@@YGXW4VIEW_MODES@@PAUVIEWPOINT@@@Z@4JA
_DATA	SEGMENT
?__LINE__Var@?0??get_display_viewpoint@@YGXW4VIEW_MODES@@PAUVIEWPOINT@@@Z@4JA DD 029eH ; `get_display_viewpoint'::`1'::__LINE__Var
_DATA	ENDS
;	COMDAT ??_C@_0FA@DHMOLMNF@c?3?2users?2nhv90?2projects?2eech?2ap@
CONST	SEGMENT
??_C@_0FA@DHMOLMNF@c?3?2users?2nhv90?2projects?2eech?2ap@ DB 'c:\users\nh'
	DB	'v90\projects\eech\aphavoc\source\gunships\cockpits\apache\ap_'
	DB	'vckpt.c', 00H				; `string'
CONST	ENDS
;	COMDAT ??_C@_0DG@OCDOFANO@Failed?5to?5locate?5display?5viewpo@
CONST	SEGMENT
??_C@_0DG@OCDOFANO@Failed?5to?5locate?5display?5viewpo@ DB 'Failed to loc'
	DB	'ate display viewpoint in virtual cockpit', 00H ; `string'
CONST	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\gunships\cockpits\apache\ap_vckpt.c
;	COMDAT ?get_apache_crew_viewpoint@@YGXPAUVIEWPOINT@@@Z
_TEXT	SEGMENT
tv259 = -196						; size = 8
tv233 = -196						; size = 8
tv85 = -192						; size = 4
tv452 = -188						; size = 4
tv372 = -188						; size = 4
tv340 = -188						; size = 4
tv308 = -188						; size = 4
tv260 = -188						; size = 8
tv234 = -188						; size = 8
tv78 = -188						; size = 4
tv412 = -184						; size = 4
tv397 = -184						; size = 4
tv373 = -184						; size = 4
tv341 = -184						; size = 4
tv309 = -184						; size = 4
tv140 = -184						; size = 4
tv95 = -184						; size = 4
tv93 = -184						; size = 4
tv91 = -184						; size = 4
tv70 = -184						; size = 4
_search$1 = -116					; size = 56
_index$2 = -60						; size = 4
_vp$ = -56						; size = 48
_is_copilot$ = -8					; size = 4
_head_object$ = -4					; size = 4
_crew_viewpoint$ = 8					; size = 4
?get_apache_crew_viewpoint@@YGXPAUVIEWPOINT@@@Z PROC	; get_apache_crew_viewpoint, COMDAT

; 747  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec c4 00 00
	00		 sub	 esp, 196		; 000000c4H
  00009	53		 push	 ebx
  0000a	56		 push	 esi
  0000b	57		 push	 edi

; 748  : 	object_3d_sub_instance *head_object;
; 749  : 	int is_copilot = get_local_entity_int_value (get_pilot_entity (), INT_TYPE_CREW_ROLE) == CREW_ROLE_CO_PILOT;

  0000c	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?pilot_entity@@3PAUENTITY@@A, 0 ; pilot_entity
  00013	74 0f		 je	 SHORT $LN18@get_apache
  00015	a1 00 00 00 00	 mov	 eax, DWORD PTR ?pilot_entity@@3PAUENTITY@@A ; pilot_entity
  0001a	8b 08		 mov	 ecx, DWORD PTR [eax]
  0001c	89 8d 48 ff ff
	ff		 mov	 DWORD PTR tv70[ebp], ecx
  00022	eb 24		 jmp	 SHORT $LN19@get_apache
$LN18@get_apache:
  00024	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??get_apache_crew_viewpoint@@YGXPAUVIEWPOINT@@@Z@4JA
  0002a	83 c2 02	 add	 edx, 2
  0002d	52		 push	 edx
  0002e	68 00 00 00 00	 push	 OFFSET ??_C@_0FA@DHMOLMNF@c?3?2users?2nhv90?2projects?2eech?2ap@
  00033	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  00038	50		 push	 eax
  00039	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  0003e	c7 85 48 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv70[ebp], 0
$LN19@get_apache:
  00048	b9 01 00 00 00	 mov	 ecx, 1
  0004d	85 c9		 test	 ecx, ecx
  0004f	74 0c		 je	 SHORT $LN20@get_apache
  00051	c7 85 44 ff ff
	ff 23 00 00 00	 mov	 DWORD PTR tv78[ebp], 35	; 00000023H
  0005b	eb 24		 jmp	 SHORT $LN21@get_apache
$LN20@get_apache:
  0005d	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??get_apache_crew_viewpoint@@YGXPAUVIEWPOINT@@@Z@4JA
  00063	83 c2 02	 add	 edx, 2
  00066	52		 push	 edx
  00067	68 00 00 00 00	 push	 OFFSET ??_C@_0FA@DHMOLMNF@c?3?2users?2nhv90?2projects?2eech?2ap@
  0006c	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_int_type_message@@3PBDB ; overload_invalid_int_type_message
  00071	50		 push	 eax
  00072	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00077	c7 85 44 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv78[ebp], 0
$LN21@get_apache:
  00081	6a 23		 push	 35			; 00000023H
  00083	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?pilot_entity@@3PAUENTITY@@A ; pilot_entity
  00089	51		 push	 ecx
  0008a	69 95 48 ff ff
	ff 5c 04 00 00	 imul	 edx, DWORD PTR tv70[ebp], 1116
  00094	8b 85 44 ff ff
	ff		 mov	 eax, DWORD PTR tv78[ebp]
  0009a	8b 8c 82 00 00
	00 00		 mov	 ecx, DWORD PTR ?fn_get_local_entity_int_value@@3PAY0BBH@P6GHPAUENTITY@@W4INT_TYPES@@@ZA[edx+eax*4]
  000a1	ff d1		 call	 ecx
  000a3	83 f8 01	 cmp	 eax, 1
  000a6	75 0c		 jne	 SHORT $LN22@get_apache
  000a8	c7 85 40 ff ff
	ff 01 00 00 00	 mov	 DWORD PTR tv85[ebp], 1
  000b2	eb 0a		 jmp	 SHORT $LN23@get_apache
$LN22@get_apache:
  000b4	c7 85 40 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv85[ebp], 0
$LN23@get_apache:
  000be	8b 95 40 ff ff
	ff		 mov	 edx, DWORD PTR tv85[ebp]
  000c4	89 55 f8	 mov	 DWORD PTR _is_copilot$[ebp], edx

; 750  : 
; 751  : 	viewpoint
; 752  : 		vp;
; 753  : 
; 754  : 	ASSERT (crew_viewpoint);

  000c7	83 7d 08 00	 cmp	 DWORD PTR _crew_viewpoint$[ebp], 0
  000cb	75 18		 jne	 SHORT $LN6@get_apache
  000cd	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??get_apache_crew_viewpoint@@YGXPAUVIEWPOINT@@@Z@4JA
  000d2	83 c0 07	 add	 eax, 7
  000d5	50		 push	 eax
  000d6	68 00 00 00 00	 push	 OFFSET ??_C@_0FA@DHMOLMNF@c?3?2users?2nhv90?2projects?2eech?2ap@
  000db	68 00 00 00 00	 push	 OFFSET ??_C@_0P@DNABABOI@crew_viewpoint@
  000e0	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN6@get_apache:

; 755  : 
; 756  : 	virtual_cockpit_inst3d = virtual_cockpit_level1_inst3d;

  000e5	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_level1_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  000ea	a3 00 00 00 00	 mov	 DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A, eax ; virtual_cockpit_inst3d

; 757  : 
; 758  : 	{
; 759  : 		object_3d_sub_object_index_numbers
; 760  : 			index;
; 761  : 		object_3d_sub_object_search_data
; 762  : 			search;
; 763  : 
; 764  : 		switch (get_view_mode())

  000ef	a1 00 00 00 00	 mov	 eax, DWORD PTR ?view_mode@@3W4VIEW_MODES@@A ; view_mode
  000f4	89 85 48 ff ff
	ff		 mov	 DWORD PTR tv91[ebp], eax
  000fa	83 bd 48 ff ff
	ff 1c		 cmp	 DWORD PTR tv91[ebp], 28	; 0000001cH
  00101	74 0b		 je	 SHORT $LN7@get_apache
  00103	83 bd 48 ff ff
	ff 1d		 cmp	 DWORD PTR tv91[ebp], 29	; 0000001dH
  0010a	74 29		 je	 SHORT $LN8@get_apache
  0010c	eb 4e		 jmp	 SHORT $LN9@get_apache
$LN7@get_apache:

; 765  : 		{
; 766  : 		case VIEW_MODE_COCKPIT_PANEL_SPECIAL_APACHE_LHS_MFD:
; 767  : 			index = is_copilot

  0010e	83 7d f8 00	 cmp	 DWORD PTR _is_copilot$[ebp], 0
  00112	74 0c		 je	 SHORT $LN24@get_apache
  00114	c7 85 48 ff ff
	ff ca 00 00 00	 mov	 DWORD PTR tv93[ebp], 202 ; 000000caH
  0011e	eb 0a		 jmp	 SHORT $LN25@get_apache
$LN24@get_apache:
  00120	c7 85 48 ff ff
	ff c9 00 00 00	 mov	 DWORD PTR tv93[ebp], 201 ; 000000c9H
$LN25@get_apache:
  0012a	8b 85 48 ff ff
	ff		 mov	 eax, DWORD PTR tv93[ebp]
  00130	89 45 c4	 mov	 DWORD PTR _index$2[ebp], eax

; 768  : 				? OBJECT_3D_SUB_OBJECT_COCKPIT_VIEW_MFD_LHS_2
; 769  : 				: OBJECT_3D_SUB_OBJECT_COCKPIT_VIEW_MFD_LHS_1;
; 770  : 			break;

  00133	eb 2e		 jmp	 SHORT $LN2@get_apache
$LN8@get_apache:

; 771  : 
; 772  : 		case VIEW_MODE_COCKPIT_PANEL_SPECIAL_APACHE_RHS_MFD:
; 773  : 			index = is_copilot

  00135	83 7d f8 00	 cmp	 DWORD PTR _is_copilot$[ebp], 0
  00139	74 0c		 je	 SHORT $LN26@get_apache
  0013b	c7 85 48 ff ff
	ff cc 00 00 00	 mov	 DWORD PTR tv95[ebp], 204 ; 000000ccH
  00145	eb 0a		 jmp	 SHORT $LN27@get_apache
$LN26@get_apache:
  00147	c7 85 48 ff ff
	ff cb 00 00 00	 mov	 DWORD PTR tv95[ebp], 203 ; 000000cbH
$LN27@get_apache:
  00151	8b 85 48 ff ff
	ff		 mov	 eax, DWORD PTR tv95[ebp]
  00157	89 45 c4	 mov	 DWORD PTR _index$2[ebp], eax

; 774  : 				? OBJECT_3D_SUB_OBJECT_COCKPIT_VIEW_MFD_RHS_2
; 775  : 				: OBJECT_3D_SUB_OBJECT_COCKPIT_VIEW_MFD_RHS_1;
; 776  : 			break;

  0015a	eb 07		 jmp	 SHORT $LN2@get_apache
$LN9@get_apache:

; 777  : 
; 778  : 		default:
; 779  : 			index = OBJECT_3D_SUB_OBJECT_PILOT_VIEWPOINT;

  0015c	c7 45 c4 c0 00
	00 00		 mov	 DWORD PTR _index$2[ebp], 192 ; 000000c0H
$LN2@get_apache:

; 780  : 			break;
; 781  : 		}
; 782  : 
; 783  : 		search.search_depth = 0;

  00163	c7 45 94 00 00
	00 00		 mov	 DWORD PTR _search$1[ebp+8], 0

; 784  : 		search.search_object = virtual_cockpit_inst3d;

  0016a	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  0016f	89 45 8c	 mov	 DWORD PTR _search$1[ebp], eax

; 785  : 		search.sub_object_index = index;

  00172	8b 45 c4	 mov	 eax, DWORD PTR _index$2[ebp]
  00175	89 45 98	 mov	 DWORD PTR _search$1[ebp+12], eax

; 786  : 
; 787  : 		if (find_object_3d_sub_object (&search) != SUB_OBJECT_SEARCH_RESULT_OBJECT_FOUND)

  00178	8d 45 8c	 lea	 eax, DWORD PTR _search$1[ebp]
  0017b	50		 push	 eax
  0017c	e8 00 00 00 00	 call	 ?find_object_3d_sub_object@@YG?AW4SUB_OBJECT_SEARCH_RESULT_TYPES@@PAUOBJECT_3D_SUB_OBJECT_SEARCH_DATA@@@Z ; find_object_3d_sub_object
  00181	83 f8 01	 cmp	 eax, 1
  00184	74 0d		 je	 SHORT $LN10@get_apache

; 788  : 		{
; 789  : 			debug_fatal ("Failed to locate display viewpoint in virtual cockpit");

  00186	68 00 00 00 00	 push	 OFFSET ??_C@_0DG@OCDOFANO@Failed?5to?5locate?5display?5viewpo@
  0018b	e8 00 00 00 00	 call	 ?debug_fatal@@YAXPBDZZ	; debug_fatal
  00190	83 c4 04	 add	 esp, 4
$LN10@get_apache:

; 790  : 		}
; 791  : 
; 792  : 		head_object = search.result_sub_object;

  00193	8b 45 90	 mov	 eax, DWORD PTR _search$1[ebp+4]
  00196	89 45 fc	 mov	 DWORD PTR _head_object$[ebp], eax

; 793  : 	}
; 794  : 
; 795  : 	virtual_cockpit_inst3d->vp.x = 0.0;

  00199	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  0019e	0f 57 c0	 xorps	 xmm0, xmm0
  001a1	f3 0f 11 40 08	 movss	 DWORD PTR [eax+8], xmm0

; 796  : 	virtual_cockpit_inst3d->vp.y = 0.0;

  001a6	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  001ab	0f 57 c0	 xorps	 xmm0, xmm0
  001ae	f3 0f 11 40 0c	 movss	 DWORD PTR [eax+12], xmm0

; 797  : 	virtual_cockpit_inst3d->vp.z = 0.0;

  001b3	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  001b8	0f 57 c0	 xorps	 xmm0, xmm0
  001bb	f3 0f 11 40 10	 movss	 DWORD PTR [eax+16], xmm0

; 798  : 
; 799  : 	switch (get_view_mode())

  001c0	a1 00 00 00 00	 mov	 eax, DWORD PTR ?view_mode@@3W4VIEW_MODES@@A ; view_mode
  001c5	89 85 48 ff ff
	ff		 mov	 DWORD PTR tv140[ebp], eax
  001cb	83 bd 48 ff ff
	ff 1c		 cmp	 DWORD PTR tv140[ebp], 28 ; 0000001cH
  001d2	7c 10		 jl	 SHORT $LN12@get_apache
  001d4	83 bd 48 ff ff
	ff 1d		 cmp	 DWORD PTR tv140[ebp], 29 ; 0000001dH
  001db	7e 02		 jle	 SHORT $LN11@get_apache
  001dd	eb 05		 jmp	 SHORT $LN12@get_apache
$LN11@get_apache:

; 800  : 	{
; 801  : 	case VIEW_MODE_COCKPIT_PANEL_SPECIAL_APACHE_LHS_MFD:
; 802  : 	case VIEW_MODE_COCKPIT_PANEL_SPECIAL_APACHE_RHS_MFD:
; 803  : 		break;

  001df	e9 03 06 00 00	 jmp	 $LN4@get_apache
$LN12@get_apache:

; 804  : 
; 805  : 	default:
; 806  : 		// adjust pitch according to user preferance
; 807  : 		if (edit_wide_cockpit)

  001e4	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?edit_wide_cockpit@@3HA, 0 ; edit_wide_cockpit
  001eb	74 1f		 je	 SHORT $LN13@get_apache

; 808  : 			pilot_head_pitch = rad ( wide_cockpit_position[wide_cockpit_nr].c.p );

  001ed	6b 05 00 00 00
	00 24		 imul	 eax, DWORD PTR ?wide_cockpit_nr@@3HA, 36 ; wide_cockpit_nr
  001f4	f3 0f 10 80 20
	00 00 00	 movss	 xmm0, DWORD PTR ?wide_cockpit_position@@3PAUCOCKPIT_POSITION@@A[eax+32]
  001fc	f3 0f 59 05 00
	00 00 00	 mulss	 xmm0, DWORD PTR __real@3c8efa35
  00204	f3 0f 11 05 00
	00 00 00	 movss	 DWORD PTR ?pilot_head_pitch@@3MA, xmm0
$LN13@get_apache:

; 809  : 
; 810  : 		// rotate head
; 811  : 		head_object->relative_heading = -pilot_head_heading;

  0020c	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR ?pilot_head_heading@@3MA
  00214	0f 57 05 00 00
	00 00		 xorps	 xmm0, DWORD PTR __xmm@80000000800000008000000080000000
  0021b	8b 45 fc	 mov	 eax, DWORD PTR _head_object$[ebp]
  0021e	f3 0f 11 40 18	 movss	 DWORD PTR [eax+24], xmm0

; 812  : 		head_object->relative_pitch = -pilot_head_pitch;

  00223	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR ?pilot_head_pitch@@3MA
  0022b	0f 57 05 00 00
	00 00		 xorps	 xmm0, DWORD PTR __xmm@80000000800000008000000080000000
  00232	8b 45 fc	 mov	 eax, DWORD PTR _head_object$[ebp]
  00235	f3 0f 11 40 1c	 movss	 DWORD PTR [eax+28], xmm0

; 813  : 
; 814  : 		// adjust position according to user preferance
; 815  : 		head_object->relative_position.x = wide_cockpit_position[wide_cockpit_nr].c.x;

  0023a	6b 05 00 00 00
	00 24		 imul	 eax, DWORD PTR ?wide_cockpit_nr@@3HA, 36 ; wide_cockpit_nr
  00241	8b 4d fc	 mov	 ecx, DWORD PTR _head_object$[ebp]
  00244	8b 90 14 00 00
	00		 mov	 edx, DWORD PTR ?wide_cockpit_position@@3PAUCOCKPIT_POSITION@@A[eax+20]
  0024a	89 51 0c	 mov	 DWORD PTR [ecx+12], edx

; 816  : 		head_object->relative_position.y = wide_cockpit_position[wide_cockpit_nr].c.y;

  0024d	6b 05 00 00 00
	00 24		 imul	 eax, DWORD PTR ?wide_cockpit_nr@@3HA, 36 ; wide_cockpit_nr
  00254	8b 4d fc	 mov	 ecx, DWORD PTR _head_object$[ebp]
  00257	8b 90 18 00 00
	00		 mov	 edx, DWORD PTR ?wide_cockpit_position@@3PAUCOCKPIT_POSITION@@A[eax+24]
  0025d	89 51 10	 mov	 DWORD PTR [ecx+16], edx

; 817  : 		head_object->relative_position.z = wide_cockpit_position[wide_cockpit_nr].c.z;

  00260	6b 05 00 00 00
	00 24		 imul	 eax, DWORD PTR ?wide_cockpit_nr@@3HA, 36 ; wide_cockpit_nr
  00267	8b 4d fc	 mov	 ecx, DWORD PTR _head_object$[ebp]
  0026a	8b 90 1c 00 00
	00		 mov	 edx, DWORD PTR ?wide_cockpit_position@@3PAUCOCKPIT_POSITION@@A[eax+28]
  00270	89 51 14	 mov	 DWORD PTR [ecx+20], edx

; 818  : 
; 819  : 		// adjust for track-IR position
; 820  : 		if (query_TIR_active())

  00273	e8 00 00 00 00	 call	 ?query_TIR_active@@YAHXZ ; query_TIR_active
  00278	85 c0		 test	 eax, eax
  0027a	74 48		 je	 SHORT $LN14@get_apache

; 821  : 		{
; 822  : 			head_object->relative_position.x -= current_custom_cockpit_viewpoint.x;

  0027c	8b 45 fc	 mov	 eax, DWORD PTR _head_object$[ebp]
  0027f	f3 0f 10 40 0c	 movss	 xmm0, DWORD PTR [eax+12]
  00284	f3 0f 5c 05 00
	00 00 00	 subss	 xmm0, DWORD PTR ?current_custom_cockpit_viewpoint@@3UCOCKPIT_VIEW@@A
  0028c	8b 4d fc	 mov	 ecx, DWORD PTR _head_object$[ebp]
  0028f	f3 0f 11 41 0c	 movss	 DWORD PTR [ecx+12], xmm0

; 823  : 			head_object->relative_position.y -= current_custom_cockpit_viewpoint.y;

  00294	8b 45 fc	 mov	 eax, DWORD PTR _head_object$[ebp]
  00297	f3 0f 10 40 10	 movss	 xmm0, DWORD PTR [eax+16]
  0029c	f3 0f 5c 05 04
	00 00 00	 subss	 xmm0, DWORD PTR ?current_custom_cockpit_viewpoint@@3UCOCKPIT_VIEW@@A+4
  002a4	8b 4d fc	 mov	 ecx, DWORD PTR _head_object$[ebp]
  002a7	f3 0f 11 41 10	 movss	 DWORD PTR [ecx+16], xmm0

; 824  : 			head_object->relative_position.z -= current_custom_cockpit_viewpoint.z;

  002ac	8b 45 fc	 mov	 eax, DWORD PTR _head_object$[ebp]
  002af	f3 0f 10 40 14	 movss	 xmm0, DWORD PTR [eax+20]
  002b4	f3 0f 5c 05 08
	00 00 00	 subss	 xmm0, DWORD PTR ?current_custom_cockpit_viewpoint@@3UCOCKPIT_VIEW@@A+8
  002bc	8b 4d fc	 mov	 ecx, DWORD PTR _head_object$[ebp]
  002bf	f3 0f 11 41 14	 movss	 DWORD PTR [ecx+20], xmm0
$LN14@get_apache:

; 825  : 		}
; 826  : 
; 827  : 		//ataribaby 27/12/2008 new head g-force movement and vibration from main rotor
; 828  : 		if (get_time_acceleration() != TIME_ACCELERATION_PAUSE)

  002c4	e8 00 00 00 00	 call	 ?get_time_acceleration@@YGHXZ ; get_time_acceleration
  002c9	85 c0		 test	 eax, eax
  002cb	0f 84 c2 00 00
	00		 je	 $LN15@get_apache

; 829  : 		{
; 830  : 			random_vibration_x = (frand1() * (current_flight_dynamics->main_rotor_rpm.value * 0.00002)) * command_line_g_force_head_movment_modifier;

  002d1	69 05 00 00 00
	00 6d 4e c6 41	 imul	 eax, DWORD PTR ?random_number_seed@@3HA, 1103515245 ; random_number_seed
  002db	05 39 30 00 00	 add	 eax, 12345		; 00003039H
  002e0	a3 00 00 00 00	 mov	 DWORD PTR ?random_number_seed@@3HA, eax ; random_number_seed
  002e5	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?random_number_seed@@3HA ; random_number_seed
  002eb	c1 f9 10	 sar	 ecx, 16			; 00000010H
  002ee	81 e1 ff 7f 00
	00		 and	 ecx, 32767		; 00007fffH
  002f4	f2 0f 2a c1	 cvtsi2sd xmm0, ecx
  002f8	f2 0f 59 05 00
	00 00 00	 mulsd	 xmm0, QWORD PTR __real@3f00002000400080
  00300	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?current_flight_dynamics@@3PAUDYNAMICS_TYPE@@A ; current_flight_dynamics
  00306	f3 0f 5a 8a 14
	1e 00 00	 cvtss2sd xmm1, DWORD PTR [edx+7700]
  0030e	f2 0f 59 0d 00
	00 00 00	 mulsd	 xmm1, QWORD PTR __real@3ef4f8b588e368f1
  00316	f2 0f 59 c1	 mulsd	 xmm0, xmm1
  0031a	f3 0f 5a 0d 00
	00 00 00	 cvtss2sd xmm1, DWORD PTR ?command_line_g_force_head_movment_modifier@@3MA
  00322	f2 0f 59 c1	 mulsd	 xmm0, xmm1
  00326	f2 0f 5a c0	 cvtsd2ss xmm0, xmm0
  0032a	f3 0f 11 05 00
	00 00 00	 movss	 DWORD PTR ?random_vibration_x@@3MA, xmm0

; 831  : 			random_vibration_y = (frand1() * (current_flight_dynamics->main_rotor_rpm.value * 0.00002)) * command_line_g_force_head_movment_modifier;

  00332	69 05 00 00 00
	00 6d 4e c6 41	 imul	 eax, DWORD PTR ?random_number_seed@@3HA, 1103515245 ; random_number_seed
  0033c	05 39 30 00 00	 add	 eax, 12345		; 00003039H
  00341	a3 00 00 00 00	 mov	 DWORD PTR ?random_number_seed@@3HA, eax ; random_number_seed
  00346	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?random_number_seed@@3HA ; random_number_seed
  0034c	c1 f9 10	 sar	 ecx, 16			; 00000010H
  0034f	81 e1 ff 7f 00
	00		 and	 ecx, 32767		; 00007fffH
  00355	f2 0f 2a c1	 cvtsi2sd xmm0, ecx
  00359	f2 0f 59 05 00
	00 00 00	 mulsd	 xmm0, QWORD PTR __real@3f00002000400080
  00361	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?current_flight_dynamics@@3PAUDYNAMICS_TYPE@@A ; current_flight_dynamics
  00367	f3 0f 5a 8a 14
	1e 00 00	 cvtss2sd xmm1, DWORD PTR [edx+7700]
  0036f	f2 0f 59 0d 00
	00 00 00	 mulsd	 xmm1, QWORD PTR __real@3ef4f8b588e368f1
  00377	f2 0f 59 c1	 mulsd	 xmm0, xmm1
  0037b	f3 0f 5a 0d 00
	00 00 00	 cvtss2sd xmm1, DWORD PTR ?command_line_g_force_head_movment_modifier@@3MA
  00383	f2 0f 59 c1	 mulsd	 xmm0, xmm1
  00387	f2 0f 5a c0	 cvtsd2ss xmm0, xmm0
  0038b	f3 0f 11 05 00
	00 00 00	 movss	 DWORD PTR ?random_vibration_y@@3MA, xmm0
$LN15@get_apache:

; 832  : 		}
; 833  : 		x_head_g_movement = move_by_rate(x_head_g_movement, random_vibration_x + (bound(current_flight_dynamics->model_acceleration_vector.x * ONE_OVER_G, -3.0, 3.0) * 0.025 * command_line_g_force_head_movment_modifier), 0.05);

  00393	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_flight_dynamics@@3PAUDYNAMICS_TYPE@@A ; current_flight_dynamics
  00398	f3 0f 10 80 48
	1c 00 00	 movss	 xmm0, DWORD PTR [eax+7240]
  003a0	f3 0f 59 05 00
	00 00 00	 mulss	 xmm0, DWORD PTR __real@3dd0c43d
  003a8	f3 0f 5a c0	 cvtss2sd xmm0, xmm0
  003ac	f2 0f 10 0d 00
	00 00 00	 movsd	 xmm1, QWORD PTR __real@c008000000000000
  003b4	66 0f 2f c8	 comisd	 xmm1, xmm0
  003b8	76 12		 jbe	 SHORT $LN30@get_apache
  003ba	f2 0f 10 05 00
	00 00 00	 movsd	 xmm0, QWORD PTR __real@c008000000000000
  003c2	f2 0f 11 85 44
	ff ff ff	 movsd	 QWORD PTR tv234[ebp], xmm0
  003ca	eb 68		 jmp	 SHORT $LN31@get_apache
$LN30@get_apache:
  003cc	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_flight_dynamics@@3PAUDYNAMICS_TYPE@@A ; current_flight_dynamics
  003d2	f3 0f 10 81 48
	1c 00 00	 movss	 xmm0, DWORD PTR [ecx+7240]
  003da	f3 0f 59 05 00
	00 00 00	 mulss	 xmm0, DWORD PTR __real@3dd0c43d
  003e2	f3 0f 5a c0	 cvtss2sd xmm0, xmm0
  003e6	66 0f 2f 05 00
	00 00 00	 comisd	 xmm0, QWORD PTR __real@4008000000000000
  003ee	76 12		 jbe	 SHORT $LN28@get_apache
  003f0	f2 0f 10 05 00
	00 00 00	 movsd	 xmm0, QWORD PTR __real@4008000000000000
  003f8	f2 0f 11 85 3c
	ff ff ff	 movsd	 QWORD PTR tv233[ebp], xmm0
  00400	eb 22		 jmp	 SHORT $LN29@get_apache
$LN28@get_apache:
  00402	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?current_flight_dynamics@@3PAUDYNAMICS_TYPE@@A ; current_flight_dynamics
  00408	f3 0f 10 82 48
	1c 00 00	 movss	 xmm0, DWORD PTR [edx+7240]
  00410	f3 0f 59 05 00
	00 00 00	 mulss	 xmm0, DWORD PTR __real@3dd0c43d
  00418	f3 0f 5a c0	 cvtss2sd xmm0, xmm0
  0041c	f2 0f 11 85 3c
	ff ff ff	 movsd	 QWORD PTR tv233[ebp], xmm0
$LN29@get_apache:
  00424	f2 0f 10 85 3c
	ff ff ff	 movsd	 xmm0, QWORD PTR tv233[ebp]
  0042c	f2 0f 11 85 44
	ff ff ff	 movsd	 QWORD PTR tv234[ebp], xmm0
$LN31@get_apache:
  00434	51		 push	 ecx
  00435	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3d4ccccd
  0043d	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00442	f3 0f 5a 05 00
	00 00 00	 cvtss2sd xmm0, DWORD PTR ?random_vibration_x@@3MA
  0044a	f2 0f 10 8d 44
	ff ff ff	 movsd	 xmm1, QWORD PTR tv234[ebp]
  00452	f2 0f 59 0d 00
	00 00 00	 mulsd	 xmm1, QWORD PTR __real@3f9999999999999a
  0045a	f3 0f 5a 15 00
	00 00 00	 cvtss2sd xmm2, DWORD PTR ?command_line_g_force_head_movment_modifier@@3MA
  00462	f2 0f 59 ca	 mulsd	 xmm1, xmm2
  00466	f2 0f 58 c1	 addsd	 xmm0, xmm1
  0046a	f2 0f 5a c0	 cvtsd2ss xmm0, xmm0
  0046e	51		 push	 ecx
  0046f	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00474	51		 push	 ecx
  00475	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR ?x_head_g_movement@@3MA
  0047d	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00482	e8 00 00 00 00	 call	 ?move_by_rate@@YGMMMM@Z	; move_by_rate
  00487	d9 1d 00 00 00
	00		 fstp	 DWORD PTR ?x_head_g_movement@@3MA

; 834  : 		y_head_g_movement = move_by_rate(y_head_g_movement, random_vibration_y + (bound(current_flight_dynamics->g_force.value - 1.0, -1.5, 5.0) * 0.025 * command_line_g_force_head_movment_modifier), 0.05);

  0048d	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_flight_dynamics@@3PAUDYNAMICS_TYPE@@A ; current_flight_dynamics
  00492	f3 0f 5a 80 5c
	24 00 00	 cvtss2sd xmm0, DWORD PTR [eax+9308]
  0049a	f2 0f 5c 05 00
	00 00 00	 subsd	 xmm0, QWORD PTR __real@3ff0000000000000
  004a2	f2 0f 10 0d 00
	00 00 00	 movsd	 xmm1, QWORD PTR __real@bff8000000000000
  004aa	66 0f 2f c8	 comisd	 xmm1, xmm0
  004ae	76 12		 jbe	 SHORT $LN34@get_apache
  004b0	f2 0f 10 05 00
	00 00 00	 movsd	 xmm0, QWORD PTR __real@bff8000000000000
  004b8	f2 0f 11 85 44
	ff ff ff	 movsd	 QWORD PTR tv260[ebp], xmm0
  004c0	eb 60		 jmp	 SHORT $LN35@get_apache
$LN34@get_apache:
  004c2	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_flight_dynamics@@3PAUDYNAMICS_TYPE@@A ; current_flight_dynamics
  004c8	f3 0f 5a 81 5c
	24 00 00	 cvtss2sd xmm0, DWORD PTR [ecx+9308]
  004d0	f2 0f 5c 05 00
	00 00 00	 subsd	 xmm0, QWORD PTR __real@3ff0000000000000
  004d8	66 0f 2f 05 00
	00 00 00	 comisd	 xmm0, QWORD PTR __real@4014000000000000
  004e0	76 12		 jbe	 SHORT $LN32@get_apache
  004e2	f2 0f 10 05 00
	00 00 00	 movsd	 xmm0, QWORD PTR __real@4014000000000000
  004ea	f2 0f 11 85 3c
	ff ff ff	 movsd	 QWORD PTR tv259[ebp], xmm0
  004f2	eb 1e		 jmp	 SHORT $LN33@get_apache
$LN32@get_apache:
  004f4	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?current_flight_dynamics@@3PAUDYNAMICS_TYPE@@A ; current_flight_dynamics
  004fa	f3 0f 5a 82 5c
	24 00 00	 cvtss2sd xmm0, DWORD PTR [edx+9308]
  00502	f2 0f 5c 05 00
	00 00 00	 subsd	 xmm0, QWORD PTR __real@3ff0000000000000
  0050a	f2 0f 11 85 3c
	ff ff ff	 movsd	 QWORD PTR tv259[ebp], xmm0
$LN33@get_apache:
  00512	f2 0f 10 85 3c
	ff ff ff	 movsd	 xmm0, QWORD PTR tv259[ebp]
  0051a	f2 0f 11 85 44
	ff ff ff	 movsd	 QWORD PTR tv260[ebp], xmm0
$LN35@get_apache:
  00522	51		 push	 ecx
  00523	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3d4ccccd
  0052b	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00530	f3 0f 5a 05 00
	00 00 00	 cvtss2sd xmm0, DWORD PTR ?random_vibration_y@@3MA
  00538	f2 0f 10 8d 44
	ff ff ff	 movsd	 xmm1, QWORD PTR tv260[ebp]
  00540	f2 0f 59 0d 00
	00 00 00	 mulsd	 xmm1, QWORD PTR __real@3f9999999999999a
  00548	f3 0f 5a 15 00
	00 00 00	 cvtss2sd xmm2, DWORD PTR ?command_line_g_force_head_movment_modifier@@3MA
  00550	f2 0f 59 ca	 mulsd	 xmm1, xmm2
  00554	f2 0f 58 c1	 addsd	 xmm0, xmm1
  00558	f2 0f 5a c0	 cvtsd2ss xmm0, xmm0
  0055c	51		 push	 ecx
  0055d	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00562	51		 push	 ecx
  00563	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR ?y_head_g_movement@@3MA
  0056b	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00570	e8 00 00 00 00	 call	 ?move_by_rate@@YGMMMM@Z	; move_by_rate
  00575	d9 1d 00 00 00
	00		 fstp	 DWORD PTR ?y_head_g_movement@@3MA

; 835  : 
; 836  :     head_object->relative_position.x -= x_head_g_movement;

  0057b	8b 45 fc	 mov	 eax, DWORD PTR _head_object$[ebp]
  0057e	f3 0f 10 40 0c	 movss	 xmm0, DWORD PTR [eax+12]
  00583	f3 0f 5c 05 00
	00 00 00	 subss	 xmm0, DWORD PTR ?x_head_g_movement@@3MA
  0058b	8b 4d fc	 mov	 ecx, DWORD PTR _head_object$[ebp]
  0058e	f3 0f 11 41 0c	 movss	 DWORD PTR [ecx+12], xmm0

; 837  : 		//if (!current_flight_dynamics->auto_hover)   // arneh - auto hover has some weird dynamics which cause lots of g-forces, so disable head movement when auto hover is enabled
; 838  : 		head_object->relative_position.y -= y_head_g_movement;

  00593	8b 45 fc	 mov	 eax, DWORD PTR _head_object$[ebp]
  00596	f3 0f 10 40 10	 movss	 xmm0, DWORD PTR [eax+16]
  0059b	f3 0f 5c 05 00
	00 00 00	 subss	 xmm0, DWORD PTR ?y_head_g_movement@@3MA
  005a3	8b 4d fc	 mov	 ecx, DWORD PTR _head_object$[ebp]
  005a6	f3 0f 11 41 10	 movss	 DWORD PTR [ecx+16], xmm0

; 839  : 
; 840  : 		// keep head inside reasonable limimts
; 841  : 		head_object->relative_position.x = bound(head_object->relative_position.x, head_limits[is_copilot][0].x, head_limits[is_copilot][1].x);

  005ab	6b 45 f8 18	 imul	 eax, DWORD PTR _is_copilot$[ebp], 24
  005af	b9 0c 00 00 00	 mov	 ecx, 12			; 0000000cH
  005b4	6b d1 00	 imul	 edx, ecx, 0
  005b7	8b 4d fc	 mov	 ecx, DWORD PTR _head_object$[ebp]
  005ba	f3 0f 10 84 10
	00 00 00 00	 movss	 xmm0, DWORD PTR ?head_limits@@3PAY01UVEC3D@@A[eax+edx]
  005c3	0f 2f 41 0c	 comiss	 xmm0, DWORD PTR [ecx+12]
  005c7	76 1f		 jbe	 SHORT $LN38@get_apache
  005c9	6b 55 f8 18	 imul	 edx, DWORD PTR _is_copilot$[ebp], 24
  005cd	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  005d2	6b c8 00	 imul	 ecx, eax, 0
  005d5	f3 0f 10 84 0a
	00 00 00 00	 movss	 xmm0, DWORD PTR ?head_limits@@3PAY01UVEC3D@@A[edx+ecx]
  005de	f3 0f 11 85 48
	ff ff ff	 movss	 DWORD PTR tv309[ebp], xmm0
  005e6	eb 5d		 jmp	 SHORT $LN39@get_apache
$LN38@get_apache:
  005e8	6b 55 f8 18	 imul	 edx, DWORD PTR _is_copilot$[ebp], 24
  005ec	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  005f1	c1 e0 00	 shl	 eax, 0
  005f4	8b 4d fc	 mov	 ecx, DWORD PTR _head_object$[ebp]
  005f7	f3 0f 10 41 0c	 movss	 xmm0, DWORD PTR [ecx+12]
  005fc	0f 2f 84 02 00
	00 00 00	 comiss	 xmm0, DWORD PTR ?head_limits@@3PAY01UVEC3D@@A[edx+eax]
  00604	76 1f		 jbe	 SHORT $LN36@get_apache
  00606	6b 55 f8 18	 imul	 edx, DWORD PTR _is_copilot$[ebp], 24
  0060a	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  0060f	c1 e0 00	 shl	 eax, 0
  00612	f3 0f 10 84 02
	00 00 00 00	 movss	 xmm0, DWORD PTR ?head_limits@@3PAY01UVEC3D@@A[edx+eax]
  0061b	f3 0f 11 85 44
	ff ff ff	 movss	 DWORD PTR tv308[ebp], xmm0
  00623	eb 10		 jmp	 SHORT $LN37@get_apache
$LN36@get_apache:
  00625	8b 4d fc	 mov	 ecx, DWORD PTR _head_object$[ebp]
  00628	f3 0f 10 41 0c	 movss	 xmm0, DWORD PTR [ecx+12]
  0062d	f3 0f 11 85 44
	ff ff ff	 movss	 DWORD PTR tv308[ebp], xmm0
$LN37@get_apache:
  00635	f3 0f 10 85 44
	ff ff ff	 movss	 xmm0, DWORD PTR tv308[ebp]
  0063d	f3 0f 11 85 48
	ff ff ff	 movss	 DWORD PTR tv309[ebp], xmm0
$LN39@get_apache:
  00645	8b 55 fc	 mov	 edx, DWORD PTR _head_object$[ebp]
  00648	f3 0f 10 85 48
	ff ff ff	 movss	 xmm0, DWORD PTR tv309[ebp]
  00650	f3 0f 11 42 0c	 movss	 DWORD PTR [edx+12], xmm0

; 842  : 		head_object->relative_position.y = bound(head_object->relative_position.y, head_limits[is_copilot][0].y, head_limits[is_copilot][1].y);

  00655	6b 45 f8 18	 imul	 eax, DWORD PTR _is_copilot$[ebp], 24
  00659	b9 0c 00 00 00	 mov	 ecx, 12			; 0000000cH
  0065e	6b d1 00	 imul	 edx, ecx, 0
  00661	8b 4d fc	 mov	 ecx, DWORD PTR _head_object$[ebp]
  00664	f3 0f 10 84 10
	04 00 00 00	 movss	 xmm0, DWORD PTR ?head_limits@@3PAY01UVEC3D@@A[eax+edx+4]
  0066d	0f 2f 41 10	 comiss	 xmm0, DWORD PTR [ecx+16]
  00671	76 1f		 jbe	 SHORT $LN42@get_apache
  00673	6b 55 f8 18	 imul	 edx, DWORD PTR _is_copilot$[ebp], 24
  00677	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  0067c	6b c8 00	 imul	 ecx, eax, 0
  0067f	f3 0f 10 84 0a
	04 00 00 00	 movss	 xmm0, DWORD PTR ?head_limits@@3PAY01UVEC3D@@A[edx+ecx+4]
  00688	f3 0f 11 85 48
	ff ff ff	 movss	 DWORD PTR tv341[ebp], xmm0
  00690	eb 5d		 jmp	 SHORT $LN43@get_apache
$LN42@get_apache:
  00692	6b 55 f8 18	 imul	 edx, DWORD PTR _is_copilot$[ebp], 24
  00696	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  0069b	c1 e0 00	 shl	 eax, 0
  0069e	8b 4d fc	 mov	 ecx, DWORD PTR _head_object$[ebp]
  006a1	f3 0f 10 41 10	 movss	 xmm0, DWORD PTR [ecx+16]
  006a6	0f 2f 84 02 04
	00 00 00	 comiss	 xmm0, DWORD PTR ?head_limits@@3PAY01UVEC3D@@A[edx+eax+4]
  006ae	76 1f		 jbe	 SHORT $LN40@get_apache
  006b0	6b 55 f8 18	 imul	 edx, DWORD PTR _is_copilot$[ebp], 24
  006b4	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  006b9	c1 e0 00	 shl	 eax, 0
  006bc	f3 0f 10 84 02
	04 00 00 00	 movss	 xmm0, DWORD PTR ?head_limits@@3PAY01UVEC3D@@A[edx+eax+4]
  006c5	f3 0f 11 85 44
	ff ff ff	 movss	 DWORD PTR tv340[ebp], xmm0
  006cd	eb 10		 jmp	 SHORT $LN41@get_apache
$LN40@get_apache:
  006cf	8b 4d fc	 mov	 ecx, DWORD PTR _head_object$[ebp]
  006d2	f3 0f 10 41 10	 movss	 xmm0, DWORD PTR [ecx+16]
  006d7	f3 0f 11 85 44
	ff ff ff	 movss	 DWORD PTR tv340[ebp], xmm0
$LN41@get_apache:
  006df	f3 0f 10 85 44
	ff ff ff	 movss	 xmm0, DWORD PTR tv340[ebp]
  006e7	f3 0f 11 85 48
	ff ff ff	 movss	 DWORD PTR tv341[ebp], xmm0
$LN43@get_apache:
  006ef	8b 55 fc	 mov	 edx, DWORD PTR _head_object$[ebp]
  006f2	f3 0f 10 85 48
	ff ff ff	 movss	 xmm0, DWORD PTR tv341[ebp]
  006fa	f3 0f 11 42 10	 movss	 DWORD PTR [edx+16], xmm0

; 843  : 		head_object->relative_position.z = bound(head_object->relative_position.z, head_limits[is_copilot][0].z, head_limits[is_copilot][1].z);

  006ff	6b 45 f8 18	 imul	 eax, DWORD PTR _is_copilot$[ebp], 24
  00703	b9 0c 00 00 00	 mov	 ecx, 12			; 0000000cH
  00708	6b d1 00	 imul	 edx, ecx, 0
  0070b	8b 4d fc	 mov	 ecx, DWORD PTR _head_object$[ebp]
  0070e	f3 0f 10 84 10
	08 00 00 00	 movss	 xmm0, DWORD PTR ?head_limits@@3PAY01UVEC3D@@A[eax+edx+8]
  00717	0f 2f 41 14	 comiss	 xmm0, DWORD PTR [ecx+20]
  0071b	76 1f		 jbe	 SHORT $LN46@get_apache
  0071d	6b 55 f8 18	 imul	 edx, DWORD PTR _is_copilot$[ebp], 24
  00721	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  00726	6b c8 00	 imul	 ecx, eax, 0
  00729	f3 0f 10 84 0a
	08 00 00 00	 movss	 xmm0, DWORD PTR ?head_limits@@3PAY01UVEC3D@@A[edx+ecx+8]
  00732	f3 0f 11 85 48
	ff ff ff	 movss	 DWORD PTR tv373[ebp], xmm0
  0073a	eb 5d		 jmp	 SHORT $LN47@get_apache
$LN46@get_apache:
  0073c	6b 55 f8 18	 imul	 edx, DWORD PTR _is_copilot$[ebp], 24
  00740	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  00745	c1 e0 00	 shl	 eax, 0
  00748	8b 4d fc	 mov	 ecx, DWORD PTR _head_object$[ebp]
  0074b	f3 0f 10 41 14	 movss	 xmm0, DWORD PTR [ecx+20]
  00750	0f 2f 84 02 08
	00 00 00	 comiss	 xmm0, DWORD PTR ?head_limits@@3PAY01UVEC3D@@A[edx+eax+8]
  00758	76 1f		 jbe	 SHORT $LN44@get_apache
  0075a	6b 55 f8 18	 imul	 edx, DWORD PTR _is_copilot$[ebp], 24
  0075e	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  00763	c1 e0 00	 shl	 eax, 0
  00766	f3 0f 10 84 02
	08 00 00 00	 movss	 xmm0, DWORD PTR ?head_limits@@3PAY01UVEC3D@@A[edx+eax+8]
  0076f	f3 0f 11 85 44
	ff ff ff	 movss	 DWORD PTR tv372[ebp], xmm0
  00777	eb 10		 jmp	 SHORT $LN45@get_apache
$LN44@get_apache:
  00779	8b 4d fc	 mov	 ecx, DWORD PTR _head_object$[ebp]
  0077c	f3 0f 10 41 14	 movss	 xmm0, DWORD PTR [ecx+20]
  00781	f3 0f 11 85 44
	ff ff ff	 movss	 DWORD PTR tv372[ebp], xmm0
$LN45@get_apache:
  00789	f3 0f 10 85 44
	ff ff ff	 movss	 xmm0, DWORD PTR tv372[ebp]
  00791	f3 0f 11 85 48
	ff ff ff	 movss	 DWORD PTR tv373[ebp], xmm0
$LN47@get_apache:
  00799	8b 55 fc	 mov	 edx, DWORD PTR _head_object$[ebp]
  0079c	f3 0f 10 85 48
	ff ff ff	 movss	 xmm0, DWORD PTR tv373[ebp]
  007a4	f3 0f 11 42 14	 movss	 DWORD PTR [edx+20], xmm0

; 844  : 
; 845  : 		if (is_copilot)

  007a9	83 7d f8 00	 cmp	 DWORD PTR _is_copilot$[ebp], 0
  007ad	74 38		 je	 SHORT $LN16@get_apache

; 846  : 		{
; 847  : 			// adjust for offset of co-pilot's cockpit compared to pilot's
; 848  : 			head_object->relative_position.y += -0.30;

  007af	8b 45 fc	 mov	 eax, DWORD PTR _head_object$[ebp]
  007b2	f3 0f 5a 40 10	 cvtss2sd xmm0, DWORD PTR [eax+16]
  007b7	f2 0f 58 05 00
	00 00 00	 addsd	 xmm0, QWORD PTR __real@bfd3333333333333
  007bf	f2 0f 5a c0	 cvtsd2ss xmm0, xmm0
  007c3	8b 4d fc	 mov	 ecx, DWORD PTR _head_object$[ebp]
  007c6	f3 0f 11 41 10	 movss	 DWORD PTR [ecx+16], xmm0

; 849  : 			head_object->relative_position.z += 1.32;

  007cb	8b 45 fc	 mov	 eax, DWORD PTR _head_object$[ebp]
  007ce	f3 0f 5a 40 14	 cvtss2sd xmm0, DWORD PTR [eax+20]
  007d3	f2 0f 58 05 00
	00 00 00	 addsd	 xmm0, QWORD PTR __real@3ff51eb851eb851f
  007db	f2 0f 5a c0	 cvtsd2ss xmm0, xmm0
  007df	8b 4d fc	 mov	 ecx, DWORD PTR _head_object$[ebp]
  007e2	f3 0f 11 41 14	 movss	 DWORD PTR [ecx+20], xmm0
$LN16@get_apache:
$LN4@get_apache:

; 850  : 		}
; 851  : 	}
; 852  : 
; 853  : 	get_local_entity_attitude_matrix (get_gunship_entity (), virtual_cockpit_inst3d->vp.attitude);

  007e7	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?gunship_entity@@3PAUENTITY@@A, 0 ; gunship_entity
  007ee	74 0f		 je	 SHORT $LN48@get_apache
  007f0	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gunship_entity@@3PAUENTITY@@A ; gunship_entity
  007f5	8b 08		 mov	 ecx, DWORD PTR [eax]
  007f7	89 8d 48 ff ff
	ff		 mov	 DWORD PTR tv397[ebp], ecx
  007fd	eb 24		 jmp	 SHORT $LN49@get_apache
$LN48@get_apache:
  007ff	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??get_apache_crew_viewpoint@@YGXPAUVIEWPOINT@@@Z@4JA
  00805	83 c2 6a	 add	 edx, 106		; 0000006aH
  00808	52		 push	 edx
  00809	68 00 00 00 00	 push	 OFFSET ??_C@_0FA@DHMOLMNF@c?3?2users?2nhv90?2projects?2eech?2ap@
  0080e	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  00813	50		 push	 eax
  00814	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00819	c7 85 48 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv397[ebp], 0
$LN49@get_apache:
  00823	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  00829	83 c1 14	 add	 ecx, 20			; 00000014H
  0082c	51		 push	 ecx
  0082d	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gunship_entity@@3PAUENTITY@@A ; gunship_entity
  00833	52		 push	 edx
  00834	8b 85 48 ff ff
	ff		 mov	 eax, DWORD PTR tv397[ebp]
  0083a	8b 0c 85 00 00
	00 00		 mov	 ecx, DWORD PTR ?fn_get_local_entity_attitude_matrix@@3PAP6GXPAUENTITY@@QAY02M@ZA[eax*4]
  00841	ff d1		 call	 ecx

; 854  : 	get_3d_sub_object_world_viewpoint (head_object, &vp);

  00843	8d 45 c8	 lea	 eax, DWORD PTR _vp$[ebp]
  00846	50		 push	 eax
  00847	8b 4d fc	 mov	 ecx, DWORD PTR _head_object$[ebp]
  0084a	51		 push	 ecx
  0084b	e8 00 00 00 00	 call	 ?get_3d_sub_object_world_viewpoint@@YGXPAUOBJECT_3D_SUB_INSTANCE@@PAUVIEWPOINT@@@Z ; get_3d_sub_object_world_viewpoint

; 855  : 	get_local_entity_vec3d (get_gunship_entity (), VEC3D_TYPE_POSITION, &main_vp.position);

  00850	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?gunship_entity@@3PAUENTITY@@A, 0 ; gunship_entity
  00857	74 0f		 je	 SHORT $LN50@get_apache
  00859	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gunship_entity@@3PAUENTITY@@A ; gunship_entity
  0085e	8b 08		 mov	 ecx, DWORD PTR [eax]
  00860	89 8d 48 ff ff
	ff		 mov	 DWORD PTR tv412[ebp], ecx
  00866	eb 24		 jmp	 SHORT $LN51@get_apache
$LN50@get_apache:
  00868	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??get_apache_crew_viewpoint@@YGXPAUVIEWPOINT@@@Z@4JA
  0086e	83 c2 6c	 add	 edx, 108		; 0000006cH
  00871	52		 push	 edx
  00872	68 00 00 00 00	 push	 OFFSET ??_C@_0FA@DHMOLMNF@c?3?2users?2nhv90?2projects?2eech?2ap@
  00877	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  0087c	50		 push	 eax
  0087d	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00882	c7 85 48 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv412[ebp], 0
$LN51@get_apache:
  0088c	b9 01 00 00 00	 mov	 ecx, 1
  00891	85 c9		 test	 ecx, ecx
  00893	74 0c		 je	 SHORT $LN52@get_apache
  00895	c7 85 44 ff ff
	ff 08 00 00 00	 mov	 DWORD PTR tv452[ebp], 8
  0089f	eb 24		 jmp	 SHORT $LN53@get_apache
$LN52@get_apache:
  008a1	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??get_apache_crew_viewpoint@@YGXPAUVIEWPOINT@@@Z@4JA
  008a7	83 c2 6c	 add	 edx, 108		; 0000006cH
  008aa	52		 push	 edx
  008ab	68 00 00 00 00	 push	 OFFSET ??_C@_0FA@DHMOLMNF@c?3?2users?2nhv90?2projects?2eech?2ap@
  008b0	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_vec3d_type_message@@3PBDB ; overload_invalid_vec3d_type_message
  008b5	50		 push	 eax
  008b6	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  008bb	c7 85 44 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv452[ebp], 0
$LN53@get_apache:
  008c5	68 00 00 00 00	 push	 OFFSET ?main_vp@@3UVIEWPOINT@@A ; main_vp
  008ca	6a 08		 push	 8
  008cc	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gunship_entity@@3PAUENTITY@@A ; gunship_entity
  008d2	51		 push	 ecx
  008d3	6b 95 48 ff ff
	ff 60		 imul	 edx, DWORD PTR tv412[ebp], 96
  008da	8b 85 44 ff ff
	ff		 mov	 eax, DWORD PTR tv452[ebp]
  008e0	8b 8c 82 00 00
	00 00		 mov	 ecx, DWORD PTR ?fn_get_local_entity_vec3d@@3PAY0BI@P6GXPAUENTITY@@W4VEC3D_TYPES@@PAUVEC3D@@@ZA[edx+eax*4]
  008e7	ff d1		 call	 ecx

; 856  : 
; 857  : 	main_vp.x += vp.x;

  008e9	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR ?main_vp@@3UVIEWPOINT@@A
  008f1	f3 0f 58 45 c8	 addss	 xmm0, DWORD PTR _vp$[ebp]
  008f6	f3 0f 11 05 00
	00 00 00	 movss	 DWORD PTR ?main_vp@@3UVIEWPOINT@@A, xmm0

; 858  : 	main_vp.y += vp.y;

  008fe	f3 0f 10 05 04
	00 00 00	 movss	 xmm0, DWORD PTR ?main_vp@@3UVIEWPOINT@@A+4
  00906	f3 0f 58 45 cc	 addss	 xmm0, DWORD PTR _vp$[ebp+4]
  0090b	f3 0f 11 05 04
	00 00 00	 movss	 DWORD PTR ?main_vp@@3UVIEWPOINT@@A+4, xmm0

; 859  : 	main_vp.z += vp.z;

  00913	f3 0f 10 05 08
	00 00 00	 movss	 xmm0, DWORD PTR ?main_vp@@3UVIEWPOINT@@A+8
  0091b	f3 0f 58 45 d0	 addss	 xmm0, DWORD PTR _vp$[ebp+8]
  00920	f3 0f 11 05 08
	00 00 00	 movss	 DWORD PTR ?main_vp@@3UVIEWPOINT@@A+8, xmm0

; 860  : 
; 861  : 	memcpy (main_vp.attitude, vp.attitude, sizeof (matrix3x3));

  00928	6a 24		 push	 36			; 00000024H
  0092a	8d 45 d4	 lea	 eax, DWORD PTR _vp$[ebp+12]
  0092d	50		 push	 eax
  0092e	68 0c 00 00 00	 push	 OFFSET ?main_vp@@3UVIEWPOINT@@A+12
  00933	e8 00 00 00 00	 call	 _memcpy
  00938	83 c4 0c	 add	 esp, 12			; 0000000cH

; 862  : 
; 863  : 	vp.x = -vp.x;

  0093b	f3 0f 10 45 c8	 movss	 xmm0, DWORD PTR _vp$[ebp]
  00940	0f 57 05 00 00
	00 00		 xorps	 xmm0, DWORD PTR __xmm@80000000800000008000000080000000
  00947	f3 0f 11 45 c8	 movss	 DWORD PTR _vp$[ebp], xmm0

; 864  : 	vp.y = -vp.y;

  0094c	f3 0f 10 45 cc	 movss	 xmm0, DWORD PTR _vp$[ebp+4]
  00951	0f 57 05 00 00
	00 00		 xorps	 xmm0, DWORD PTR __xmm@80000000800000008000000080000000
  00958	f3 0f 11 45 cc	 movss	 DWORD PTR _vp$[ebp+4], xmm0

; 865  : 	vp.z = -vp.z;

  0095d	f3 0f 10 45 d0	 movss	 xmm0, DWORD PTR _vp$[ebp+8]
  00962	0f 57 05 00 00
	00 00		 xorps	 xmm0, DWORD PTR __xmm@80000000800000008000000080000000
  00969	f3 0f 11 45 d0	 movss	 DWORD PTR _vp$[ebp+8], xmm0

; 866  : 
; 867  : 	multiply_transpose_matrix3x3_vec3d (&virtual_cockpit_inst3d->vp.position, vp.attitude, &vp.position);

  0096e	8d 45 c8	 lea	 eax, DWORD PTR _vp$[ebp]
  00971	50		 push	 eax
  00972	8d 4d d4	 lea	 ecx, DWORD PTR _vp$[ebp+12]
  00975	51		 push	 ecx
  00976	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  0097c	83 c2 08	 add	 edx, 8
  0097f	52		 push	 edx
  00980	e8 00 00 00 00	 call	 ?multiply_transpose_matrix3x3_vec3d@@YGXPAUVEC3D@@QAY02$$CBMPBU1@@Z ; multiply_transpose_matrix3x3_vec3d

; 868  : 
; 869  : 	*crew_viewpoint = virtual_cockpit_inst3d->vp;

  00985	8b 35 00 00 00
	00		 mov	 esi, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  0098b	83 c6 08	 add	 esi, 8
  0098e	b9 0c 00 00 00	 mov	 ecx, 12			; 0000000cH
  00993	8b 7d 08	 mov	 edi, DWORD PTR _crew_viewpoint$[ebp]
  00996	f3 a5		 rep movsd

; 870  : }

  00998	5f		 pop	 edi
  00999	5e		 pop	 esi
  0099a	5b		 pop	 ebx
  0099b	8b e5		 mov	 esp, ebp
  0099d	5d		 pop	 ebp
  0099e	c2 04 00	 ret	 4
?get_apache_crew_viewpoint@@YGXPAUVIEWPOINT@@@Z ENDP	; get_apache_crew_viewpoint
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\gunships\cockpits\apache\ap_vckpt.c
;	COMDAT ?get_display_viewpoint@@YGXW4VIEW_MODES@@PAUVIEWPOINT@@@Z
_TEXT	SEGMENT
tv161 = -180						; size = 4
tv153 = -176						; size = 4
tv138 = -176						; size = 4
tv80 = -176						; size = 4
_vp$ = -108						; size = 48
_search$ = -60						; size = 56
_index$ = -4						; size = 4
_mode$ = 8						; size = 4
_display_viewpoint$ = 12				; size = 4
?get_display_viewpoint@@YGXW4VIEW_MODES@@PAUVIEWPOINT@@@Z PROC ; get_display_viewpoint, COMDAT

; 670  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec b4 00 00
	00		 sub	 esp, 180		; 000000b4H
  00009	53		 push	 ebx
  0000a	56		 push	 esi
  0000b	57		 push	 edi

; 671  : 	object_3d_sub_object_index_numbers
; 672  : 		index;
; 673  : 
; 674  : 	object_3d_sub_object_search_data
; 675  : 		search;
; 676  : 
; 677  : 	viewpoint
; 678  : 		vp;
; 679  : 
; 680  : 	ASSERT (display_viewpoint);

  0000c	83 7d 0c 00	 cmp	 DWORD PTR _display_viewpoint$[ebp], 0
  00010	75 18		 jne	 SHORT $LN2@get_displa
  00012	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??get_display_viewpoint@@YGXW4VIEW_MODES@@PAUVIEWPOINT@@@Z@4JA
  00017	83 c0 0a	 add	 eax, 10			; 0000000aH
  0001a	50		 push	 eax
  0001b	68 00 00 00 00	 push	 OFFSET ??_C@_0FA@DHMOLMNF@c?3?2users?2nhv90?2projects?2eech?2ap@
  00020	68 00 00 00 00	 push	 OFFSET ??_C@_0BC@FEOJCDHO@display_viewpoint@
  00025	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN2@get_displa:

; 681  : 
; 682  : 	if ((!full_screen_hi_res) && (application_video_colourdepth == 16))

  0002a	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?full_screen_hi_res@@3HA, 0 ; full_screen_hi_res
  00031	0f 85 87 00 00
	00		 jne	 $LN3@get_displa
  00037	83 3d 00 00 00
	00 10		 cmp	 DWORD PTR ?application_video_colourdepth@@3HA, 16 ; application_video_colourdepth, 00000010H
  0003e	75 7e		 jne	 SHORT $LN3@get_displa

; 683  : 	{
; 684  : 		display_viewpoint->x = 0.0;

  00040	8b 45 0c	 mov	 eax, DWORD PTR _display_viewpoint$[ebp]
  00043	0f 57 c0	 xorps	 xmm0, xmm0
  00046	f3 0f 11 00	 movss	 DWORD PTR [eax], xmm0

; 685  : 		display_viewpoint->y = 0.0;

  0004a	8b 45 0c	 mov	 eax, DWORD PTR _display_viewpoint$[ebp]
  0004d	0f 57 c0	 xorps	 xmm0, xmm0
  00050	f3 0f 11 40 04	 movss	 DWORD PTR [eax+4], xmm0

; 686  : 		display_viewpoint->z = 0.0;

  00055	8b 45 0c	 mov	 eax, DWORD PTR _display_viewpoint$[ebp]
  00058	0f 57 c0	 xorps	 xmm0, xmm0
  0005b	f3 0f 11 40 08	 movss	 DWORD PTR [eax+8], xmm0

; 687  : 
; 688  : 		get_local_entity_attitude_matrix (get_gunship_entity (), display_viewpoint->attitude);

  00060	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?gunship_entity@@3PAUENTITY@@A, 0 ; gunship_entity
  00067	74 0f		 je	 SHORT $LN10@get_displa
  00069	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gunship_entity@@3PAUENTITY@@A ; gunship_entity
  0006e	8b 08		 mov	 ecx, DWORD PTR [eax]
  00070	89 8d 50 ff ff
	ff		 mov	 DWORD PTR tv80[ebp], ecx
  00076	eb 24		 jmp	 SHORT $LN11@get_displa
$LN10@get_displa:
  00078	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??get_display_viewpoint@@YGXW4VIEW_MODES@@PAUVIEWPOINT@@@Z@4JA
  0007e	83 c2 12	 add	 edx, 18			; 00000012H
  00081	52		 push	 edx
  00082	68 00 00 00 00	 push	 OFFSET ??_C@_0FA@DHMOLMNF@c?3?2users?2nhv90?2projects?2eech?2ap@
  00087	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  0008c	50		 push	 eax
  0008d	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00092	c7 85 50 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv80[ebp], 0
$LN11@get_displa:
  0009c	8b 4d 0c	 mov	 ecx, DWORD PTR _display_viewpoint$[ebp]
  0009f	83 c1 0c	 add	 ecx, 12			; 0000000cH
  000a2	51		 push	 ecx
  000a3	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gunship_entity@@3PAUENTITY@@A ; gunship_entity
  000a9	52		 push	 edx
  000aa	8b 85 50 ff ff
	ff		 mov	 eax, DWORD PTR tv80[ebp]
  000b0	8b 0c 85 00 00
	00 00		 mov	 ecx, DWORD PTR ?fn_get_local_entity_attitude_matrix@@3PAP6GXPAUENTITY@@QAY02M@ZA[eax*4]
  000b7	ff d1		 call	 ecx

; 689  : 
; 690  : 		return;

  000b9	e9 41 02 00 00	 jmp	 $LN1@get_displa
$LN3@get_displa:

; 691  : 	}
; 692  : 
; 693  : 	if (mode == VIEW_MODE_COCKPIT_PANEL_SPECIAL_APACHE_LHS_MFD)

  000be	83 7d 08 1c	 cmp	 DWORD PTR _mode$[ebp], 28 ; 0000001cH
  000c2	75 09		 jne	 SHORT $LN4@get_displa

; 694  : 	{
; 695  : 		index = OBJECT_3D_SUB_OBJECT_APACHE_COCKPIT_LHS_MFD_CAMERA;

  000c4	c7 45 fc 70 00
	00 00		 mov	 DWORD PTR _index$[ebp], 112 ; 00000070H
  000cb	eb 20		 jmp	 SHORT $LN7@get_displa
$LN4@get_displa:

; 696  : 	}
; 697  : 	else if (mode == VIEW_MODE_COCKPIT_PANEL_SPECIAL_APACHE_RHS_MFD)

  000cd	83 7d 08 1d	 cmp	 DWORD PTR _mode$[ebp], 29 ; 0000001dH
  000d1	75 09		 jne	 SHORT $LN6@get_displa

; 698  : 	{
; 699  : 		index = OBJECT_3D_SUB_OBJECT_APACHE_COCKPIT_RHS_MFD_CAMERA;

  000d3	c7 45 fc 71 00
	00 00		 mov	 DWORD PTR _index$[ebp], 113 ; 00000071H

; 700  : 	}
; 701  : 	else

  000da	eb 11		 jmp	 SHORT $LN7@get_displa
$LN6@get_displa:

; 702  : 	{
; 703  : 		debug_fatal ("Invalid view mode = %d", mode);

  000dc	8b 45 08	 mov	 eax, DWORD PTR _mode$[ebp]
  000df	50		 push	 eax
  000e0	68 00 00 00 00	 push	 OFFSET ??_C@_0BH@KFJLEDAI@Invalid?5view?5mode?5?$DN?5?$CFd@
  000e5	e8 00 00 00 00	 call	 ?debug_fatal@@YAXPBDZZ	; debug_fatal
  000ea	83 c4 08	 add	 esp, 8
$LN7@get_displa:

; 704  : 	}
; 705  : 
; 706  : 	virtual_cockpit_inst3d = virtual_cockpit_level1_inst3d;

  000ed	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_level1_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  000f2	a3 00 00 00 00	 mov	 DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A, eax ; virtual_cockpit_inst3d

; 707  : 
; 708  : 	search.search_depth = 0;

  000f7	c7 45 cc 00 00
	00 00		 mov	 DWORD PTR _search$[ebp+8], 0

; 709  : 	search.search_object = virtual_cockpit_inst3d;

  000fe	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  00103	89 45 c4	 mov	 DWORD PTR _search$[ebp], eax

; 710  : 	search.sub_object_index = index;

  00106	8b 45 fc	 mov	 eax, DWORD PTR _index$[ebp]
  00109	89 45 d0	 mov	 DWORD PTR _search$[ebp+12], eax

; 711  : 
; 712  : 	if (find_object_3d_sub_object (&search) != SUB_OBJECT_SEARCH_RESULT_OBJECT_FOUND)

  0010c	8d 45 c4	 lea	 eax, DWORD PTR _search$[ebp]
  0010f	50		 push	 eax
  00110	e8 00 00 00 00	 call	 ?find_object_3d_sub_object@@YG?AW4SUB_OBJECT_SEARCH_RESULT_TYPES@@PAUOBJECT_3D_SUB_OBJECT_SEARCH_DATA@@@Z ; find_object_3d_sub_object
  00115	83 f8 01	 cmp	 eax, 1
  00118	74 0d		 je	 SHORT $LN8@get_displa

; 713  : 	{
; 714  : 		debug_fatal ("Failed to locate display viewpoint in virtual cockpit");

  0011a	68 00 00 00 00	 push	 OFFSET ??_C@_0DG@OCDOFANO@Failed?5to?5locate?5display?5viewpo@
  0011f	e8 00 00 00 00	 call	 ?debug_fatal@@YAXPBDZZ	; debug_fatal
  00124	83 c4 04	 add	 esp, 4
$LN8@get_displa:

; 715  : 	}
; 716  : 
; 717  : 	virtual_cockpit_inst3d->vp.x = 0.0;

  00127	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  0012c	0f 57 c0	 xorps	 xmm0, xmm0
  0012f	f3 0f 11 40 08	 movss	 DWORD PTR [eax+8], xmm0

; 718  : 	virtual_cockpit_inst3d->vp.y = 0.0;

  00134	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  00139	0f 57 c0	 xorps	 xmm0, xmm0
  0013c	f3 0f 11 40 0c	 movss	 DWORD PTR [eax+12], xmm0

; 719  : 	virtual_cockpit_inst3d->vp.z = 0.0;

  00141	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  00146	0f 57 c0	 xorps	 xmm0, xmm0
  00149	f3 0f 11 40 10	 movss	 DWORD PTR [eax+16], xmm0

; 720  : 
; 721  : 	get_local_entity_attitude_matrix (get_gunship_entity (), virtual_cockpit_inst3d->vp.attitude);

  0014e	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?gunship_entity@@3PAUENTITY@@A, 0 ; gunship_entity
  00155	74 0f		 je	 SHORT $LN12@get_displa
  00157	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gunship_entity@@3PAUENTITY@@A ; gunship_entity
  0015c	8b 08		 mov	 ecx, DWORD PTR [eax]
  0015e	89 8d 50 ff ff
	ff		 mov	 DWORD PTR tv138[ebp], ecx
  00164	eb 24		 jmp	 SHORT $LN13@get_displa
$LN12@get_displa:
  00166	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??get_display_viewpoint@@YGXW4VIEW_MODES@@PAUVIEWPOINT@@@Z@4JA
  0016c	83 c2 33	 add	 edx, 51			; 00000033H
  0016f	52		 push	 edx
  00170	68 00 00 00 00	 push	 OFFSET ??_C@_0FA@DHMOLMNF@c?3?2users?2nhv90?2projects?2eech?2ap@
  00175	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  0017a	50		 push	 eax
  0017b	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00180	c7 85 50 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv138[ebp], 0
$LN13@get_displa:
  0018a	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  00190	83 c1 14	 add	 ecx, 20			; 00000014H
  00193	51		 push	 ecx
  00194	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gunship_entity@@3PAUENTITY@@A ; gunship_entity
  0019a	52		 push	 edx
  0019b	8b 85 50 ff ff
	ff		 mov	 eax, DWORD PTR tv138[ebp]
  001a1	8b 0c 85 00 00
	00 00		 mov	 ecx, DWORD PTR ?fn_get_local_entity_attitude_matrix@@3PAP6GXPAUENTITY@@QAY02M@ZA[eax*4]
  001a8	ff d1		 call	 ecx

; 722  : 
; 723  : 	get_3d_sub_object_world_viewpoint (search.result_sub_object, &vp);

  001aa	8d 45 94	 lea	 eax, DWORD PTR _vp$[ebp]
  001ad	50		 push	 eax
  001ae	8b 4d c8	 mov	 ecx, DWORD PTR _search$[ebp+4]
  001b1	51		 push	 ecx
  001b2	e8 00 00 00 00	 call	 ?get_3d_sub_object_world_viewpoint@@YGXPAUOBJECT_3D_SUB_INSTANCE@@PAUVIEWPOINT@@@Z ; get_3d_sub_object_world_viewpoint

; 724  : 
; 725  : 	get_local_entity_vec3d (get_gunship_entity (), VEC3D_TYPE_POSITION, &main_vp.position);

  001b7	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?gunship_entity@@3PAUENTITY@@A, 0 ; gunship_entity
  001be	74 0f		 je	 SHORT $LN14@get_displa
  001c0	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gunship_entity@@3PAUENTITY@@A ; gunship_entity
  001c5	8b 08		 mov	 ecx, DWORD PTR [eax]
  001c7	89 8d 50 ff ff
	ff		 mov	 DWORD PTR tv153[ebp], ecx
  001cd	eb 24		 jmp	 SHORT $LN15@get_displa
$LN14@get_displa:
  001cf	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??get_display_viewpoint@@YGXW4VIEW_MODES@@PAUVIEWPOINT@@@Z@4JA
  001d5	83 c2 37	 add	 edx, 55			; 00000037H
  001d8	52		 push	 edx
  001d9	68 00 00 00 00	 push	 OFFSET ??_C@_0FA@DHMOLMNF@c?3?2users?2nhv90?2projects?2eech?2ap@
  001de	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  001e3	50		 push	 eax
  001e4	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  001e9	c7 85 50 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv153[ebp], 0
$LN15@get_displa:
  001f3	b9 01 00 00 00	 mov	 ecx, 1
  001f8	85 c9		 test	 ecx, ecx
  001fa	74 0c		 je	 SHORT $LN16@get_displa
  001fc	c7 85 4c ff ff
	ff 08 00 00 00	 mov	 DWORD PTR tv161[ebp], 8
  00206	eb 24		 jmp	 SHORT $LN17@get_displa
$LN16@get_displa:
  00208	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??get_display_viewpoint@@YGXW4VIEW_MODES@@PAUVIEWPOINT@@@Z@4JA
  0020e	83 c2 37	 add	 edx, 55			; 00000037H
  00211	52		 push	 edx
  00212	68 00 00 00 00	 push	 OFFSET ??_C@_0FA@DHMOLMNF@c?3?2users?2nhv90?2projects?2eech?2ap@
  00217	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_vec3d_type_message@@3PBDB ; overload_invalid_vec3d_type_message
  0021c	50		 push	 eax
  0021d	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00222	c7 85 4c ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv161[ebp], 0
$LN17@get_displa:
  0022c	68 00 00 00 00	 push	 OFFSET ?main_vp@@3UVIEWPOINT@@A ; main_vp
  00231	6a 08		 push	 8
  00233	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gunship_entity@@3PAUENTITY@@A ; gunship_entity
  00239	51		 push	 ecx
  0023a	6b 95 50 ff ff
	ff 60		 imul	 edx, DWORD PTR tv153[ebp], 96
  00241	8b 85 4c ff ff
	ff		 mov	 eax, DWORD PTR tv161[ebp]
  00247	8b 8c 82 00 00
	00 00		 mov	 ecx, DWORD PTR ?fn_get_local_entity_vec3d@@3PAY0BI@P6GXPAUENTITY@@W4VEC3D_TYPES@@PAUVEC3D@@@ZA[edx+eax*4]
  0024e	ff d1		 call	 ecx

; 726  : 
; 727  : 	main_vp.x += vp.x;

  00250	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR ?main_vp@@3UVIEWPOINT@@A
  00258	f3 0f 58 45 94	 addss	 xmm0, DWORD PTR _vp$[ebp]
  0025d	f3 0f 11 05 00
	00 00 00	 movss	 DWORD PTR ?main_vp@@3UVIEWPOINT@@A, xmm0

; 728  : 	main_vp.y += vp.y;

  00265	f3 0f 10 05 04
	00 00 00	 movss	 xmm0, DWORD PTR ?main_vp@@3UVIEWPOINT@@A+4
  0026d	f3 0f 58 45 98	 addss	 xmm0, DWORD PTR _vp$[ebp+4]
  00272	f3 0f 11 05 04
	00 00 00	 movss	 DWORD PTR ?main_vp@@3UVIEWPOINT@@A+4, xmm0

; 729  : 	main_vp.z += vp.z;

  0027a	f3 0f 10 05 08
	00 00 00	 movss	 xmm0, DWORD PTR ?main_vp@@3UVIEWPOINT@@A+8
  00282	f3 0f 58 45 9c	 addss	 xmm0, DWORD PTR _vp$[ebp+8]
  00287	f3 0f 11 05 08
	00 00 00	 movss	 DWORD PTR ?main_vp@@3UVIEWPOINT@@A+8, xmm0

; 730  : 
; 731  : 	memcpy (main_vp.attitude, vp.attitude, sizeof (matrix3x3));

  0028f	6a 24		 push	 36			; 00000024H
  00291	8d 45 a0	 lea	 eax, DWORD PTR _vp$[ebp+12]
  00294	50		 push	 eax
  00295	68 0c 00 00 00	 push	 OFFSET ?main_vp@@3UVIEWPOINT@@A+12
  0029a	e8 00 00 00 00	 call	 _memcpy
  0029f	83 c4 0c	 add	 esp, 12			; 0000000cH

; 732  : 
; 733  : 	vp.x = -vp.x;

  002a2	f3 0f 10 45 94	 movss	 xmm0, DWORD PTR _vp$[ebp]
  002a7	0f 57 05 00 00
	00 00		 xorps	 xmm0, DWORD PTR __xmm@80000000800000008000000080000000
  002ae	f3 0f 11 45 94	 movss	 DWORD PTR _vp$[ebp], xmm0

; 734  : 	vp.y = -vp.y;

  002b3	f3 0f 10 45 98	 movss	 xmm0, DWORD PTR _vp$[ebp+4]
  002b8	0f 57 05 00 00
	00 00		 xorps	 xmm0, DWORD PTR __xmm@80000000800000008000000080000000
  002bf	f3 0f 11 45 98	 movss	 DWORD PTR _vp$[ebp+4], xmm0

; 735  : 	vp.z = -vp.z;

  002c4	f3 0f 10 45 9c	 movss	 xmm0, DWORD PTR _vp$[ebp+8]
  002c9	0f 57 05 00 00
	00 00		 xorps	 xmm0, DWORD PTR __xmm@80000000800000008000000080000000
  002d0	f3 0f 11 45 9c	 movss	 DWORD PTR _vp$[ebp+8], xmm0

; 736  : 
; 737  : 	multiply_transpose_matrix3x3_vec3d (&virtual_cockpit_inst3d->vp.position, vp.attitude, &vp.position);

  002d5	8d 45 94	 lea	 eax, DWORD PTR _vp$[ebp]
  002d8	50		 push	 eax
  002d9	8d 4d a0	 lea	 ecx, DWORD PTR _vp$[ebp+12]
  002dc	51		 push	 ecx
  002dd	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  002e3	83 c2 08	 add	 edx, 8
  002e6	52		 push	 edx
  002e7	e8 00 00 00 00	 call	 ?multiply_transpose_matrix3x3_vec3d@@YGXPAUVEC3D@@QAY02$$CBMPBU1@@Z ; multiply_transpose_matrix3x3_vec3d

; 738  : 
; 739  : 	*display_viewpoint = virtual_cockpit_inst3d->vp;

  002ec	8b 35 00 00 00
	00		 mov	 esi, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  002f2	83 c6 08	 add	 esi, 8
  002f5	b9 0c 00 00 00	 mov	 ecx, 12			; 0000000cH
  002fa	8b 7d 0c	 mov	 edi, DWORD PTR _display_viewpoint$[ebp]
  002fd	f3 a5		 rep movsd
$LN1@get_displa:

; 740  : }

  002ff	5f		 pop	 edi
  00300	5e		 pop	 esi
  00301	5b		 pop	 ebx
  00302	8b e5		 mov	 esp, ebp
  00304	5d		 pop	 ebp
  00305	c2 08 00	 ret	 8
?get_display_viewpoint@@YGXW4VIEW_MODES@@PAUVIEWPOINT@@@Z ENDP ; get_display_viewpoint
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\gunships\cockpits\apache\ap_vckpt.c
;	COMDAT ?set_cockpit_white_lighting@@YGXQAY02M@Z
_TEXT	SEGMENT
tv82 = -204						; size = 4
tv76 = -200						; size = 4
tv69 = -196						; size = 4
_directional_light_roll$ = -128				; size = 4
_directional_light_pitch$ = -124			; size = 4
_directional_light_heading$ = -120			; size = 4
_directional_light_colour$ = -116			; size = 16
_ambient_light_colour$ = -100				; size = 16
_directional_light_direction$ = -84			; size = 12
_result$ = -72						; size = 36
_directional_light_rotation$ = -36			; size = 36
_attitude$ = 8						; size = 4
?set_cockpit_white_lighting@@YGXQAY02M@Z PROC		; set_cockpit_white_lighting, COMDAT

; 565  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec cc 00 00
	00		 sub	 esp, 204		; 000000ccH
  00009	53		 push	 ebx
  0000a	56		 push	 esi
  0000b	57		 push	 edi

; 566  : 	matrix3x3
; 567  : 		directional_light_rotation,
; 568  : 		result;
; 569  : 
; 570  : 	vec3d
; 571  : 		directional_light_direction;
; 572  : 
; 573  : 	light_colour
; 574  : 		ambient_light_colour,
; 575  : 		directional_light_colour;
; 576  : 
; 577  : 	float
; 578  : 		directional_light_heading,
; 579  : 		directional_light_pitch,
; 580  : 		directional_light_roll;
; 581  : 
; 582  : 	directional_light_colour.red		= 0.3;

  0000c	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3e99999a
  00014	f3 0f 11 45 8c	 movss	 DWORD PTR _directional_light_colour$[ebp], xmm0

; 583  : 	directional_light_colour.green	= 0.3;

  00019	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3e99999a
  00021	f3 0f 11 45 90	 movss	 DWORD PTR _directional_light_colour$[ebp+4], xmm0

; 584  : 	directional_light_colour.blue		= 0.3;

  00026	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3e99999a
  0002e	f3 0f 11 45 94	 movss	 DWORD PTR _directional_light_colour$[ebp+8], xmm0

; 585  : 
; 586  : 	directional_light_heading 			= rad (0.0);

  00033	0f 57 c0	 xorps	 xmm0, xmm0
  00036	f3 0f 11 45 88	 movss	 DWORD PTR _directional_light_heading$[ebp], xmm0

; 587  : 	directional_light_pitch 			= rad (0.0);

  0003b	0f 57 c0	 xorps	 xmm0, xmm0
  0003e	f3 0f 11 45 84	 movss	 DWORD PTR _directional_light_pitch$[ebp], xmm0

; 588  : 	directional_light_roll 				= rad (0.0);

  00043	0f 57 c0	 xorps	 xmm0, xmm0
  00046	f3 0f 11 45 80	 movss	 DWORD PTR _directional_light_roll$[ebp], xmm0

; 589  : 
; 590  : 	switch (get_local_entity_int_value (get_session_entity (), INT_TYPE_DAY_SEGMENT_TYPE))

  0004b	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?session_entity@@3PAUENTITY@@A, 0 ; session_entity
  00052	74 0f		 je	 SHORT $LN9@set_cockpi
  00054	a1 00 00 00 00	 mov	 eax, DWORD PTR ?session_entity@@3PAUENTITY@@A ; session_entity
  00059	8b 08		 mov	 ecx, DWORD PTR [eax]
  0005b	89 8d 3c ff ff
	ff		 mov	 DWORD PTR tv69[ebp], ecx
  00061	eb 20		 jmp	 SHORT $LN10@set_cockpi
$LN9@set_cockpi:
  00063	68 4e 02 00 00	 push	 590			; 0000024eH
  00068	68 00 00 00 00	 push	 OFFSET ??_C@_0FA@DHMOLMNF@c?3?2users?2nhv90?2projects?2eech?2ap@
  0006d	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  00073	52		 push	 edx
  00074	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00079	c7 85 3c ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv69[ebp], 0
$LN10@set_cockpi:
  00083	b8 01 00 00 00	 mov	 eax, 1
  00088	85 c0		 test	 eax, eax
  0008a	74 0c		 je	 SHORT $LN11@set_cockpi
  0008c	c7 85 38 ff ff
	ff 27 00 00 00	 mov	 DWORD PTR tv76[ebp], 39	; 00000027H
  00096	eb 20		 jmp	 SHORT $LN12@set_cockpi
$LN11@set_cockpi:
  00098	68 4e 02 00 00	 push	 590			; 0000024eH
  0009d	68 00 00 00 00	 push	 OFFSET ??_C@_0FA@DHMOLMNF@c?3?2users?2nhv90?2projects?2eech?2ap@
  000a2	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?overload_invalid_int_type_message@@3PBDB ; overload_invalid_int_type_message
  000a8	51		 push	 ecx
  000a9	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  000ae	c7 85 38 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv76[ebp], 0
$LN12@set_cockpi:
  000b8	6a 27		 push	 39			; 00000027H
  000ba	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?session_entity@@3PAUENTITY@@A ; session_entity
  000c0	52		 push	 edx
  000c1	69 85 3c ff ff
	ff 5c 04 00 00	 imul	 eax, DWORD PTR tv69[ebp], 1116
  000cb	8b 8d 38 ff ff
	ff		 mov	 ecx, DWORD PTR tv76[ebp]
  000d1	8b 94 88 00 00
	00 00		 mov	 edx, DWORD PTR ?fn_get_local_entity_int_value@@3PAY0BBH@P6GHPAUENTITY@@W4INT_TYPES@@@ZA[eax+ecx*4]
  000d8	ff d2		 call	 edx
  000da	89 85 34 ff ff
	ff		 mov	 DWORD PTR tv82[ebp], eax
  000e0	83 bd 34 ff ff
	ff 03		 cmp	 DWORD PTR tv82[ebp], 3
  000e7	0f 87 31 01 00
	00		 ja	 $LN2@set_cockpi
  000ed	8b 85 34 ff ff
	ff		 mov	 eax, DWORD PTR tv82[ebp]
  000f3	ff 24 85 00 00
	00 00		 jmp	 DWORD PTR $LN13@set_cockpi[eax*4]
$LN4@set_cockpi:

; 591  : 	{
; 592  : 		////////////////////////////////////////
; 593  : 		case DAY_SEGMENT_TYPE_DAWN:
; 594  : 		////////////////////////////////////////
; 595  : 		{
; 596  : 			ambient_light_colour.red		 		= 0.70;

  000fa	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3f333333
  00102	f3 0f 11 45 9c	 movss	 DWORD PTR _ambient_light_colour$[ebp], xmm0

; 597  : 			ambient_light_colour.green		  		= 0.70;

  00107	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3f333333
  0010f	f3 0f 11 45 a0	 movss	 DWORD PTR _ambient_light_colour$[ebp+4], xmm0

; 598  : 			ambient_light_colour.blue		  		= 0.70;

  00114	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3f333333
  0011c	f3 0f 11 45 a4	 movss	 DWORD PTR _ambient_light_colour$[ebp+8], xmm0

; 599  : 
; 600  : 			directional_light_heading 				= rad (0.0);

  00121	0f 57 c0	 xorps	 xmm0, xmm0
  00124	f3 0f 11 45 88	 movss	 DWORD PTR _directional_light_heading$[ebp], xmm0

; 601  : 			directional_light_pitch 				= rad (-15.0);

  00129	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@be860a92
  00131	f3 0f 11 45 84	 movss	 DWORD PTR _directional_light_pitch$[ebp], xmm0

; 602  : 			directional_light_roll 					= rad (0.0);

  00136	0f 57 c0	 xorps	 xmm0, xmm0
  00139	f3 0f 11 45 80	 movss	 DWORD PTR _directional_light_roll$[ebp], xmm0

; 603  : 
; 604  : 			break;

  0013e	e9 db 00 00 00	 jmp	 $LN2@set_cockpi
$LN5@set_cockpi:

; 605  : 		}
; 606  : 		////////////////////////////////////////
; 607  : 		case DAY_SEGMENT_TYPE_DAY:
; 608  : 		////////////////////////////////////////
; 609  : 		{
; 610  : 			ambient_light_colour.red		 		= 0.85;

  00143	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3f59999a
  0014b	f3 0f 11 45 9c	 movss	 DWORD PTR _ambient_light_colour$[ebp], xmm0

; 611  : 			ambient_light_colour.green		  		= 0.85;

  00150	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3f59999a
  00158	f3 0f 11 45 a0	 movss	 DWORD PTR _ambient_light_colour$[ebp+4], xmm0

; 612  : 			ambient_light_colour.blue		  		= 0.85;

  0015d	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3f59999a
  00165	f3 0f 11 45 a4	 movss	 DWORD PTR _ambient_light_colour$[ebp+8], xmm0

; 613  : 
; 614  : 			directional_light_heading 				= rad (0.0);

  0016a	0f 57 c0	 xorps	 xmm0, xmm0
  0016d	f3 0f 11 45 88	 movss	 DWORD PTR _directional_light_heading$[ebp], xmm0

; 615  : 			directional_light_pitch 				= rad (-40.0);

  00172	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@bf32b8c2
  0017a	f3 0f 11 45 84	 movss	 DWORD PTR _directional_light_pitch$[ebp], xmm0

; 616  : 			directional_light_roll 					= rad (0.0);

  0017f	0f 57 c0	 xorps	 xmm0, xmm0
  00182	f3 0f 11 45 80	 movss	 DWORD PTR _directional_light_roll$[ebp], xmm0

; 617  : 
; 618  : 			directional_light_pitch 				= rad (0.0);

  00187	0f 57 c0	 xorps	 xmm0, xmm0
  0018a	f3 0f 11 45 84	 movss	 DWORD PTR _directional_light_pitch$[ebp], xmm0

; 619  : 
; 620  : 			break;

  0018f	e9 8a 00 00 00	 jmp	 $LN2@set_cockpi
$LN6@set_cockpi:

; 621  : 		}
; 622  : 		////////////////////////////////////////
; 623  : 		case DAY_SEGMENT_TYPE_DUSK:
; 624  : 		////////////////////////////////////////
; 625  : 		{
; 626  : 			ambient_light_colour.red		 		= 0.65;

  00194	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3f266666
  0019c	f3 0f 11 45 9c	 movss	 DWORD PTR _ambient_light_colour$[ebp], xmm0

; 627  : 			ambient_light_colour.green		  		= 0.50;

  001a1	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3f000000
  001a9	f3 0f 11 45 a0	 movss	 DWORD PTR _ambient_light_colour$[ebp+4], xmm0

; 628  : 			ambient_light_colour.blue		  		= 0.50;

  001ae	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3f000000
  001b6	f3 0f 11 45 a4	 movss	 DWORD PTR _ambient_light_colour$[ebp+8], xmm0

; 629  : 
; 630  : 			directional_light_heading 				= rad (0.0);

  001bb	0f 57 c0	 xorps	 xmm0, xmm0
  001be	f3 0f 11 45 88	 movss	 DWORD PTR _directional_light_heading$[ebp], xmm0

; 631  : 			directional_light_pitch 				= rad (-15.0);

  001c3	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@be860a92
  001cb	f3 0f 11 45 84	 movss	 DWORD PTR _directional_light_pitch$[ebp], xmm0

; 632  : 			directional_light_roll 					= rad (0.0);

  001d0	0f 57 c0	 xorps	 xmm0, xmm0
  001d3	f3 0f 11 45 80	 movss	 DWORD PTR _directional_light_roll$[ebp], xmm0

; 633  : 
; 634  : 			break;

  001d8	eb 44		 jmp	 SHORT $LN2@set_cockpi
$LN7@set_cockpi:

; 635  : 		}
; 636  : 		////////////////////////////////////////
; 637  : 		case DAY_SEGMENT_TYPE_NIGHT:
; 638  : 		////////////////////////////////////////
; 639  : 		{
; 640  : 			ambient_light_colour.red		 		= 0.45;

  001da	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3ee66666
  001e2	f3 0f 11 45 9c	 movss	 DWORD PTR _ambient_light_colour$[ebp], xmm0

; 641  : 			ambient_light_colour.green		  		= 0.45;

  001e7	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3ee66666
  001ef	f3 0f 11 45 a0	 movss	 DWORD PTR _ambient_light_colour$[ebp+4], xmm0

; 642  : 			ambient_light_colour.blue		  		= 0.55;

  001f4	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3f0ccccd
  001fc	f3 0f 11 45 a4	 movss	 DWORD PTR _ambient_light_colour$[ebp+8], xmm0

; 643  : 
; 644  : 			directional_light_heading 				= rad (0.0);

  00201	0f 57 c0	 xorps	 xmm0, xmm0
  00204	f3 0f 11 45 88	 movss	 DWORD PTR _directional_light_heading$[ebp], xmm0

; 645  : 			directional_light_pitch 				= rad (-15.0);

  00209	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@be860a92
  00211	f3 0f 11 45 84	 movss	 DWORD PTR _directional_light_pitch$[ebp], xmm0

; 646  : 			directional_light_roll 					= rad (0.0);

  00216	0f 57 c0	 xorps	 xmm0, xmm0
  00219	f3 0f 11 45 80	 movss	 DWORD PTR _directional_light_roll$[ebp], xmm0
$LN2@set_cockpi:

; 647  : 
; 648  : 			break;
; 649  : 		}
; 650  : 	}
; 651  : 
; 652  : 	set_3d_ambient_light (main_3d_single_light_env, &ambient_light_colour);

  0021e	8d 45 9c	 lea	 eax, DWORD PTR _ambient_light_colour$[ebp]
  00221	50		 push	 eax
  00222	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?main_3d_single_light_env@@3PAUENV_3D@@A ; main_3d_single_light_env
  00228	51		 push	 ecx
  00229	e8 00 00 00 00	 call	 ?set_3d_ambient_light@@YGXPAUENV_3D@@PAULIGHT_COLOUR@@@Z ; set_3d_ambient_light

; 653  : 
; 654  : 	get_3d_transformation_matrix (directional_light_rotation, directional_light_heading, directional_light_pitch, directional_light_roll);

  0022e	51		 push	 ecx
  0022f	f3 0f 10 45 80	 movss	 xmm0, DWORD PTR _directional_light_roll$[ebp]
  00234	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00239	51		 push	 ecx
  0023a	f3 0f 10 45 84	 movss	 xmm0, DWORD PTR _directional_light_pitch$[ebp]
  0023f	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00244	51		 push	 ecx
  00245	f3 0f 10 45 88	 movss	 xmm0, DWORD PTR _directional_light_heading$[ebp]
  0024a	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  0024f	8d 45 dc	 lea	 eax, DWORD PTR _directional_light_rotation$[ebp]
  00252	50		 push	 eax
  00253	e8 00 00 00 00	 call	 ?get_3d_transformation_matrix@@YGXQAY02MMMM@Z ; get_3d_transformation_matrix

; 655  : 
; 656  : 	multiply_matrix3x3_matrix3x3 (result, directional_light_rotation, attitude);

  00258	8b 45 08	 mov	 eax, DWORD PTR _attitude$[ebp]
  0025b	50		 push	 eax
  0025c	8d 4d dc	 lea	 ecx, DWORD PTR _directional_light_rotation$[ebp]
  0025f	51		 push	 ecx
  00260	8d 55 b8	 lea	 edx, DWORD PTR _result$[ebp]
  00263	52		 push	 edx
  00264	e8 00 00 00 00	 call	 ?multiply_matrix3x3_matrix3x3@@YGXQAY02MQAY02$$CBM1@Z ; multiply_matrix3x3_matrix3x3

; 657  : 
; 658  : 	directional_light_direction.x = -result[2][0];

  00269	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  0026e	d1 e0		 shl	 eax, 1
  00270	8d 4c 05 b8	 lea	 ecx, DWORD PTR _result$[ebp+eax]
  00274	ba 04 00 00 00	 mov	 edx, 4
  00279	6b c2 00	 imul	 eax, edx, 0
  0027c	f3 0f 10 04 01	 movss	 xmm0, DWORD PTR [ecx+eax]
  00281	0f 57 05 00 00
	00 00		 xorps	 xmm0, DWORD PTR __xmm@80000000800000008000000080000000
  00288	f3 0f 11 45 ac	 movss	 DWORD PTR _directional_light_direction$[ebp], xmm0

; 659  : 	directional_light_direction.y = -result[2][1];

  0028d	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  00292	d1 e0		 shl	 eax, 1
  00294	8d 4c 05 b8	 lea	 ecx, DWORD PTR _result$[ebp+eax]
  00298	ba 04 00 00 00	 mov	 edx, 4
  0029d	c1 e2 00	 shl	 edx, 0
  002a0	f3 0f 10 04 11	 movss	 xmm0, DWORD PTR [ecx+edx]
  002a5	0f 57 05 00 00
	00 00		 xorps	 xmm0, DWORD PTR __xmm@80000000800000008000000080000000
  002ac	f3 0f 11 45 b0	 movss	 DWORD PTR _directional_light_direction$[ebp+4], xmm0

; 660  : 	directional_light_direction.z = -result[2][2];

  002b1	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  002b6	d1 e0		 shl	 eax, 1
  002b8	8d 4c 05 b8	 lea	 ecx, DWORD PTR _result$[ebp+eax]
  002bc	ba 04 00 00 00	 mov	 edx, 4
  002c1	d1 e2		 shl	 edx, 1
  002c3	f3 0f 10 04 11	 movss	 xmm0, DWORD PTR [ecx+edx]
  002c8	0f 57 05 00 00
	00 00		 xorps	 xmm0, DWORD PTR __xmm@80000000800000008000000080000000
  002cf	f3 0f 11 45 b4	 movss	 DWORD PTR _directional_light_direction$[ebp+8], xmm0

; 661  : 
; 662  : 	set_3d_main_light_source (main_3d_single_light_env, &directional_light_colour, &directional_light_direction, FALSE);

  002d4	6a 00		 push	 0
  002d6	8d 45 ac	 lea	 eax, DWORD PTR _directional_light_direction$[ebp]
  002d9	50		 push	 eax
  002da	8d 4d 8c	 lea	 ecx, DWORD PTR _directional_light_colour$[ebp]
  002dd	51		 push	 ecx
  002de	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?main_3d_single_light_env@@3PAUENV_3D@@A ; main_3d_single_light_env
  002e4	52		 push	 edx
  002e5	e8 00 00 00 00	 call	 ?set_3d_main_light_source@@YGXPAUENV_3D@@PAULIGHT_COLOUR@@PAUVEC3D@@H@Z ; set_3d_main_light_source

; 663  : }

  002ea	5f		 pop	 edi
  002eb	5e		 pop	 esi
  002ec	5b		 pop	 ebx
  002ed	8b e5		 mov	 esp, ebp
  002ef	5d		 pop	 ebp
  002f0	c2 04 00	 ret	 4
  002f3	90		 npad	 1
$LN13@set_cockpi:
  002f4	00 00 00 00	 DD	 $LN4@set_cockpi
  002f8	00 00 00 00	 DD	 $LN5@set_cockpi
  002fc	00 00 00 00	 DD	 $LN6@set_cockpi
  00300	00 00 00 00	 DD	 $LN7@set_cockpi
?set_cockpit_white_lighting@@YGXQAY02M@Z ENDP		; set_cockpit_white_lighting
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\gunships\cockpits\apache\ap_vckpt.c
;	COMDAT ?set_cockpit_lighting@@YGXQAY02M@Z
_TEXT	SEGMENT
tv82 = -204						; size = 4
tv76 = -200						; size = 4
tv69 = -196						; size = 4
_directional_light_roll$ = -128				; size = 4
_directional_light_pitch$ = -124			; size = 4
_directional_light_heading$ = -120			; size = 4
_directional_light_colour$ = -116			; size = 16
_ambient_light_colour$ = -100				; size = 16
_directional_light_direction$ = -84			; size = 12
_result$ = -72						; size = 36
_directional_light_rotation$ = -36			; size = 36
_attitude$ = 8						; size = 4
?set_cockpit_lighting@@YGXQAY02M@Z PROC			; set_cockpit_lighting, COMDAT

; 436  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec cc 00 00
	00		 sub	 esp, 204		; 000000ccH
  00009	53		 push	 ebx
  0000a	56		 push	 esi
  0000b	57		 push	 edi

; 437  : 	matrix3x3
; 438  : 		directional_light_rotation,
; 439  : 		result;
; 440  : 
; 441  : 	vec3d
; 442  : 		directional_light_direction;
; 443  : 
; 444  : 	light_colour
; 445  : 		ambient_light_colour,
; 446  : 		directional_light_colour;
; 447  : 
; 448  : 	float
; 449  : 		directional_light_heading,
; 450  : 		directional_light_pitch,
; 451  : 		directional_light_roll;
; 452  : 
; 453  : 	switch (get_local_entity_int_value (get_session_entity (), INT_TYPE_DAY_SEGMENT_TYPE))

  0000c	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?session_entity@@3PAUENTITY@@A, 0 ; session_entity
  00013	74 0f		 je	 SHORT $LN9@set_cockpi
  00015	a1 00 00 00 00	 mov	 eax, DWORD PTR ?session_entity@@3PAUENTITY@@A ; session_entity
  0001a	8b 08		 mov	 ecx, DWORD PTR [eax]
  0001c	89 8d 3c ff ff
	ff		 mov	 DWORD PTR tv69[ebp], ecx
  00022	eb 20		 jmp	 SHORT $LN10@set_cockpi
$LN9@set_cockpi:
  00024	68 c5 01 00 00	 push	 453			; 000001c5H
  00029	68 00 00 00 00	 push	 OFFSET ??_C@_0FA@DHMOLMNF@c?3?2users?2nhv90?2projects?2eech?2ap@
  0002e	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  00034	52		 push	 edx
  00035	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  0003a	c7 85 3c ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv69[ebp], 0
$LN10@set_cockpi:
  00044	b8 01 00 00 00	 mov	 eax, 1
  00049	85 c0		 test	 eax, eax
  0004b	74 0c		 je	 SHORT $LN11@set_cockpi
  0004d	c7 85 38 ff ff
	ff 27 00 00 00	 mov	 DWORD PTR tv76[ebp], 39	; 00000027H
  00057	eb 20		 jmp	 SHORT $LN12@set_cockpi
$LN11@set_cockpi:
  00059	68 c5 01 00 00	 push	 453			; 000001c5H
  0005e	68 00 00 00 00	 push	 OFFSET ??_C@_0FA@DHMOLMNF@c?3?2users?2nhv90?2projects?2eech?2ap@
  00063	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?overload_invalid_int_type_message@@3PBDB ; overload_invalid_int_type_message
  00069	51		 push	 ecx
  0006a	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  0006f	c7 85 38 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv76[ebp], 0
$LN12@set_cockpi:
  00079	6a 27		 push	 39			; 00000027H
  0007b	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?session_entity@@3PAUENTITY@@A ; session_entity
  00081	52		 push	 edx
  00082	69 85 3c ff ff
	ff 5c 04 00 00	 imul	 eax, DWORD PTR tv69[ebp], 1116
  0008c	8b 8d 38 ff ff
	ff		 mov	 ecx, DWORD PTR tv76[ebp]
  00092	8b 94 88 00 00
	00 00		 mov	 edx, DWORD PTR ?fn_get_local_entity_int_value@@3PAY0BBH@P6GHPAUENTITY@@W4INT_TYPES@@@ZA[eax+ecx*4]
  00099	ff d2		 call	 edx
  0009b	89 85 34 ff ff
	ff		 mov	 DWORD PTR tv82[ebp], eax
  000a1	83 bd 34 ff ff
	ff 03		 cmp	 DWORD PTR tv82[ebp], 3
  000a8	0f 87 82 01 00
	00		 ja	 $LN2@set_cockpi
  000ae	8b 85 34 ff ff
	ff		 mov	 eax, DWORD PTR tv82[ebp]
  000b4	ff 24 85 00 00
	00 00		 jmp	 DWORD PTR $LN13@set_cockpi[eax*4]
$LN4@set_cockpi:

; 454  : 	{
; 455  : 		////////////////////////////////////////
; 456  : 		case DAY_SEGMENT_TYPE_DAWN:
; 457  : 		////////////////////////////////////////
; 458  : 		{
; 459  : 			ambient_light_colour.red		 		= 0.0;

  000bb	0f 57 c0	 xorps	 xmm0, xmm0
  000be	f3 0f 11 45 9c	 movss	 DWORD PTR _ambient_light_colour$[ebp], xmm0

; 460  : 			ambient_light_colour.green		  		= 0.0;

  000c3	0f 57 c0	 xorps	 xmm0, xmm0
  000c6	f3 0f 11 45 a0	 movss	 DWORD PTR _ambient_light_colour$[ebp+4], xmm0

; 461  : 			ambient_light_colour.blue		  		= 0.0;

  000cb	0f 57 c0	 xorps	 xmm0, xmm0
  000ce	f3 0f 11 45 a4	 movss	 DWORD PTR _ambient_light_colour$[ebp+8], xmm0

; 462  : 
; 463  : 			directional_light_colour.red			= 1.0;

  000d3	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3f800000
  000db	f3 0f 11 45 8c	 movss	 DWORD PTR _directional_light_colour$[ebp], xmm0

; 464  : 			directional_light_colour.green		= 0.0;

  000e0	0f 57 c0	 xorps	 xmm0, xmm0
  000e3	f3 0f 11 45 90	 movss	 DWORD PTR _directional_light_colour$[ebp+4], xmm0

; 465  : 			directional_light_colour.blue			= 0.0;

  000e8	0f 57 c0	 xorps	 xmm0, xmm0
  000eb	f3 0f 11 45 94	 movss	 DWORD PTR _directional_light_colour$[ebp+8], xmm0

; 466  : 
; 467  : 			directional_light_heading 				= rad (0.0);

  000f0	0f 57 c0	 xorps	 xmm0, xmm0
  000f3	f3 0f 11 45 88	 movss	 DWORD PTR _directional_light_heading$[ebp], xmm0

; 468  : 			directional_light_pitch 				= rad (-15.0);

  000f8	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@be860a92
  00100	f3 0f 11 45 84	 movss	 DWORD PTR _directional_light_pitch$[ebp], xmm0

; 469  : 			directional_light_roll 					= rad (0.0);

  00105	0f 57 c0	 xorps	 xmm0, xmm0
  00108	f3 0f 11 45 80	 movss	 DWORD PTR _directional_light_roll$[ebp], xmm0

; 470  : 
; 471  : 			break;

  0010d	e9 1e 01 00 00	 jmp	 $LN2@set_cockpi
$LN5@set_cockpi:

; 472  : 		}
; 473  : 		////////////////////////////////////////
; 474  : 		case DAY_SEGMENT_TYPE_DAY:
; 475  : 		////////////////////////////////////////
; 476  : 		{
; 477  : 			ambient_light_colour.red		 		= 1.0;

  00112	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3f800000
  0011a	f3 0f 11 45 9c	 movss	 DWORD PTR _ambient_light_colour$[ebp], xmm0

; 478  : 			ambient_light_colour.green		  		= 1.0;

  0011f	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3f800000
  00127	f3 0f 11 45 a0	 movss	 DWORD PTR _ambient_light_colour$[ebp+4], xmm0

; 479  : 			ambient_light_colour.blue		  		= 1.0;

  0012c	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3f800000
  00134	f3 0f 11 45 a4	 movss	 DWORD PTR _ambient_light_colour$[ebp+8], xmm0

; 480  : 
; 481  : 			directional_light_colour.red			= 1.0;

  00139	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3f800000
  00141	f3 0f 11 45 8c	 movss	 DWORD PTR _directional_light_colour$[ebp], xmm0

; 482  : 			directional_light_colour.green		= 1.0;

  00146	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3f800000
  0014e	f3 0f 11 45 90	 movss	 DWORD PTR _directional_light_colour$[ebp+4], xmm0

; 483  : 			directional_light_colour.blue			= 1.0;

  00153	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3f800000
  0015b	f3 0f 11 45 94	 movss	 DWORD PTR _directional_light_colour$[ebp+8], xmm0

; 484  : 
; 485  : 			directional_light_heading 				= rad (0.0);

  00160	0f 57 c0	 xorps	 xmm0, xmm0
  00163	f3 0f 11 45 88	 movss	 DWORD PTR _directional_light_heading$[ebp], xmm0

; 486  : 			directional_light_pitch 				= rad (-40.0);

  00168	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@bf32b8c2
  00170	f3 0f 11 45 84	 movss	 DWORD PTR _directional_light_pitch$[ebp], xmm0

; 487  : 			directional_light_roll 					= rad (0.0);

  00175	0f 57 c0	 xorps	 xmm0, xmm0
  00178	f3 0f 11 45 80	 movss	 DWORD PTR _directional_light_roll$[ebp], xmm0

; 488  : 
; 489  : 			directional_light_pitch 				= rad (0.0);

  0017d	0f 57 c0	 xorps	 xmm0, xmm0
  00180	f3 0f 11 45 84	 movss	 DWORD PTR _directional_light_pitch$[ebp], xmm0

; 490  : 
; 491  : 			break;

  00185	e9 a6 00 00 00	 jmp	 $LN2@set_cockpi
$LN6@set_cockpi:

; 492  : 		}
; 493  : 		////////////////////////////////////////
; 494  : 		case DAY_SEGMENT_TYPE_DUSK:
; 495  : 		////////////////////////////////////////
; 496  : 		{
; 497  : 			ambient_light_colour.red		 		= 0.0;

  0018a	0f 57 c0	 xorps	 xmm0, xmm0
  0018d	f3 0f 11 45 9c	 movss	 DWORD PTR _ambient_light_colour$[ebp], xmm0

; 498  : 			ambient_light_colour.green		  		= 0.0;

  00192	0f 57 c0	 xorps	 xmm0, xmm0
  00195	f3 0f 11 45 a0	 movss	 DWORD PTR _ambient_light_colour$[ebp+4], xmm0

; 499  : 			ambient_light_colour.blue		  		= 0.0;

  0019a	0f 57 c0	 xorps	 xmm0, xmm0
  0019d	f3 0f 11 45 a4	 movss	 DWORD PTR _ambient_light_colour$[ebp+8], xmm0

; 500  : 
; 501  : 			directional_light_colour.red			= 1.0;

  001a2	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3f800000
  001aa	f3 0f 11 45 8c	 movss	 DWORD PTR _directional_light_colour$[ebp], xmm0

; 502  : 			directional_light_colour.green		= 0.0;

  001af	0f 57 c0	 xorps	 xmm0, xmm0
  001b2	f3 0f 11 45 90	 movss	 DWORD PTR _directional_light_colour$[ebp+4], xmm0

; 503  : 			directional_light_colour.blue			= 0.0;

  001b7	0f 57 c0	 xorps	 xmm0, xmm0
  001ba	f3 0f 11 45 94	 movss	 DWORD PTR _directional_light_colour$[ebp+8], xmm0

; 504  : 
; 505  : 			directional_light_heading 				= rad (0.0);

  001bf	0f 57 c0	 xorps	 xmm0, xmm0
  001c2	f3 0f 11 45 88	 movss	 DWORD PTR _directional_light_heading$[ebp], xmm0

; 506  : 			directional_light_pitch 				= rad (-15.0);

  001c7	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@be860a92
  001cf	f3 0f 11 45 84	 movss	 DWORD PTR _directional_light_pitch$[ebp], xmm0

; 507  : 			directional_light_roll 					= rad (0.0);

  001d4	0f 57 c0	 xorps	 xmm0, xmm0
  001d7	f3 0f 11 45 80	 movss	 DWORD PTR _directional_light_roll$[ebp], xmm0

; 508  : 
; 509  : 			break;

  001dc	eb 52		 jmp	 SHORT $LN2@set_cockpi
$LN7@set_cockpi:

; 510  : 		}
; 511  : 		////////////////////////////////////////
; 512  : 		case DAY_SEGMENT_TYPE_NIGHT:
; 513  : 		////////////////////////////////////////
; 514  : 		{
; 515  : 			ambient_light_colour.red		 		= 0.0;

  001de	0f 57 c0	 xorps	 xmm0, xmm0
  001e1	f3 0f 11 45 9c	 movss	 DWORD PTR _ambient_light_colour$[ebp], xmm0

; 516  : 			ambient_light_colour.green		  		= 0.0;

  001e6	0f 57 c0	 xorps	 xmm0, xmm0
  001e9	f3 0f 11 45 a0	 movss	 DWORD PTR _ambient_light_colour$[ebp+4], xmm0

; 517  : 			ambient_light_colour.blue		  		= 0.0;

  001ee	0f 57 c0	 xorps	 xmm0, xmm0
  001f1	f3 0f 11 45 a4	 movss	 DWORD PTR _ambient_light_colour$[ebp+8], xmm0

; 518  : 
; 519  : 			directional_light_colour.red			= 1.0;

  001f6	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3f800000
  001fe	f3 0f 11 45 8c	 movss	 DWORD PTR _directional_light_colour$[ebp], xmm0

; 520  : 			directional_light_colour.green		= 0.0;

  00203	0f 57 c0	 xorps	 xmm0, xmm0
  00206	f3 0f 11 45 90	 movss	 DWORD PTR _directional_light_colour$[ebp+4], xmm0

; 521  : 			directional_light_colour.blue			= 0.0;

  0020b	0f 57 c0	 xorps	 xmm0, xmm0
  0020e	f3 0f 11 45 94	 movss	 DWORD PTR _directional_light_colour$[ebp+8], xmm0

; 522  : 
; 523  : 			directional_light_heading 				= rad (0.0);

  00213	0f 57 c0	 xorps	 xmm0, xmm0
  00216	f3 0f 11 45 88	 movss	 DWORD PTR _directional_light_heading$[ebp], xmm0

; 524  : 			directional_light_pitch 				= rad (-15.0);

  0021b	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@be860a92
  00223	f3 0f 11 45 84	 movss	 DWORD PTR _directional_light_pitch$[ebp], xmm0

; 525  : 			directional_light_roll 					= rad (0.0);

  00228	0f 57 c0	 xorps	 xmm0, xmm0
  0022b	f3 0f 11 45 80	 movss	 DWORD PTR _directional_light_roll$[ebp], xmm0
$LN2@set_cockpi:

; 526  : 
; 527  : 			break;
; 528  : 		}
; 529  : 	}
; 530  : 
; 531  : 	#if DEMO_VERSION
; 532  : 
; 533  : 	ambient_light_colour.red		 		= 0.0;
; 534  : 	ambient_light_colour.green		  		= 0.0;
; 535  : 	ambient_light_colour.blue		  		= 0.0;
; 536  : 
; 537  : 	directional_light_colour.red			= 1.0;
; 538  : 	directional_light_colour.green		= 1.0;
; 539  : 	directional_light_colour.blue			= 1.0;
; 540  : 
; 541  : 	directional_light_heading 				= rad (0.0);
; 542  : 	directional_light_pitch 				= rad (-40.0);
; 543  : 	directional_light_roll 					= rad (0.0);
; 544  : 
; 545  : 	#endif
; 546  : 
; 547  : 	set_3d_ambient_light (main_3d_single_light_env, &ambient_light_colour);

  00230	8d 45 9c	 lea	 eax, DWORD PTR _ambient_light_colour$[ebp]
  00233	50		 push	 eax
  00234	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?main_3d_single_light_env@@3PAUENV_3D@@A ; main_3d_single_light_env
  0023a	51		 push	 ecx
  0023b	e8 00 00 00 00	 call	 ?set_3d_ambient_light@@YGXPAUENV_3D@@PAULIGHT_COLOUR@@@Z ; set_3d_ambient_light

; 548  : 
; 549  : 	get_3d_transformation_matrix (directional_light_rotation, directional_light_heading, directional_light_pitch, directional_light_roll);

  00240	51		 push	 ecx
  00241	f3 0f 10 45 80	 movss	 xmm0, DWORD PTR _directional_light_roll$[ebp]
  00246	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  0024b	51		 push	 ecx
  0024c	f3 0f 10 45 84	 movss	 xmm0, DWORD PTR _directional_light_pitch$[ebp]
  00251	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00256	51		 push	 ecx
  00257	f3 0f 10 45 88	 movss	 xmm0, DWORD PTR _directional_light_heading$[ebp]
  0025c	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00261	8d 45 dc	 lea	 eax, DWORD PTR _directional_light_rotation$[ebp]
  00264	50		 push	 eax
  00265	e8 00 00 00 00	 call	 ?get_3d_transformation_matrix@@YGXQAY02MMMM@Z ; get_3d_transformation_matrix

; 550  : 
; 551  : 	multiply_matrix3x3_matrix3x3 (result, directional_light_rotation, attitude);

  0026a	8b 45 08	 mov	 eax, DWORD PTR _attitude$[ebp]
  0026d	50		 push	 eax
  0026e	8d 4d dc	 lea	 ecx, DWORD PTR _directional_light_rotation$[ebp]
  00271	51		 push	 ecx
  00272	8d 55 b8	 lea	 edx, DWORD PTR _result$[ebp]
  00275	52		 push	 edx
  00276	e8 00 00 00 00	 call	 ?multiply_matrix3x3_matrix3x3@@YGXQAY02MQAY02$$CBM1@Z ; multiply_matrix3x3_matrix3x3

; 552  : 
; 553  : 	directional_light_direction.x = -result[2][0];

  0027b	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  00280	d1 e0		 shl	 eax, 1
  00282	8d 4c 05 b8	 lea	 ecx, DWORD PTR _result$[ebp+eax]
  00286	ba 04 00 00 00	 mov	 edx, 4
  0028b	6b c2 00	 imul	 eax, edx, 0
  0028e	f3 0f 10 04 01	 movss	 xmm0, DWORD PTR [ecx+eax]
  00293	0f 57 05 00 00
	00 00		 xorps	 xmm0, DWORD PTR __xmm@80000000800000008000000080000000
  0029a	f3 0f 11 45 ac	 movss	 DWORD PTR _directional_light_direction$[ebp], xmm0

; 554  : 	directional_light_direction.y = -result[2][1];

  0029f	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  002a4	d1 e0		 shl	 eax, 1
  002a6	8d 4c 05 b8	 lea	 ecx, DWORD PTR _result$[ebp+eax]
  002aa	ba 04 00 00 00	 mov	 edx, 4
  002af	c1 e2 00	 shl	 edx, 0
  002b2	f3 0f 10 04 11	 movss	 xmm0, DWORD PTR [ecx+edx]
  002b7	0f 57 05 00 00
	00 00		 xorps	 xmm0, DWORD PTR __xmm@80000000800000008000000080000000
  002be	f3 0f 11 45 b0	 movss	 DWORD PTR _directional_light_direction$[ebp+4], xmm0

; 555  : 	directional_light_direction.z = -result[2][2];

  002c3	b8 0c 00 00 00	 mov	 eax, 12			; 0000000cH
  002c8	d1 e0		 shl	 eax, 1
  002ca	8d 4c 05 b8	 lea	 ecx, DWORD PTR _result$[ebp+eax]
  002ce	ba 04 00 00 00	 mov	 edx, 4
  002d3	d1 e2		 shl	 edx, 1
  002d5	f3 0f 10 04 11	 movss	 xmm0, DWORD PTR [ecx+edx]
  002da	0f 57 05 00 00
	00 00		 xorps	 xmm0, DWORD PTR __xmm@80000000800000008000000080000000
  002e1	f3 0f 11 45 b4	 movss	 DWORD PTR _directional_light_direction$[ebp+8], xmm0

; 556  : 
; 557  : 	set_3d_main_light_source (main_3d_single_light_env, &directional_light_colour, &directional_light_direction, FALSE);

  002e6	6a 00		 push	 0
  002e8	8d 45 ac	 lea	 eax, DWORD PTR _directional_light_direction$[ebp]
  002eb	50		 push	 eax
  002ec	8d 4d 8c	 lea	 ecx, DWORD PTR _directional_light_colour$[ebp]
  002ef	51		 push	 ecx
  002f0	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?main_3d_single_light_env@@3PAUENV_3D@@A ; main_3d_single_light_env
  002f6	52		 push	 edx
  002f7	e8 00 00 00 00	 call	 ?set_3d_main_light_source@@YGXPAUENV_3D@@PAULIGHT_COLOUR@@PAUVEC3D@@H@Z ; set_3d_main_light_source

; 558  : }

  002fc	5f		 pop	 edi
  002fd	5e		 pop	 esi
  002fe	5b		 pop	 ebx
  002ff	8b e5		 mov	 esp, ebp
  00301	5d		 pop	 ebp
  00302	c2 04 00	 ret	 4
  00305	0f 1f 00	 npad	 3
$LN13@set_cockpi:
  00308	00 00 00 00	 DD	 $LN4@set_cockpi
  0030c	00 00 00 00	 DD	 $LN5@set_cockpi
  00310	00 00 00 00	 DD	 $LN6@set_cockpi
  00314	00 00 00 00	 DD	 $LN7@set_cockpi
?set_cockpit_lighting@@YGXQAY02M@Z ENDP			; set_cockpit_lighting
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\gunships\cockpits\apache\ap_vckpt.c
;	COMDAT ?animate_throttles@@YGXPAUOBJECT_3D_INSTANCE@@@Z
_TEXT	SEGMENT
tv89 = -96						; size = 8
tv75 = -96						; size = 8
tv165 = -88						; size = 4
tv143 = -88						; size = 4
tv90 = -88						; size = 8
tv76 = -88						; size = 8
tv166 = -84						; size = 4
tv144 = -84						; size = 4
_throttle_angle$ = -16					; size = 4
_max_movement$ = -12					; size = 4
_right_throttle$ = -8					; size = 4
_left_throttle$ = -4					; size = 4
_inst3d$ = 8						; size = 4
?animate_throttles@@YGXPAUOBJECT_3D_INSTANCE@@@Z PROC	; animate_throttles, COMDAT

; 386  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 60	 sub	 esp, 96			; 00000060H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 387  : 	float
; 388  : 		left_throttle = bound (current_flight_dynamics->left_engine_n1_rpm.max, 0.0, 110.0),

  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_flight_dynamics@@3PAUDYNAMICS_TYPE@@A ; current_flight_dynamics
  0000e	f3 0f 5a 80 a0
	1c 00 00	 cvtss2sd xmm0, DWORD PTR [eax+7328]
  00016	0f 57 c9	 xorps	 xmm1, xmm1
  00019	66 0f 2f c8	 comisd	 xmm1, xmm0
  0001d	76 0a		 jbe	 SHORT $LN9@animate_th
  0001f	0f 57 c0	 xorps	 xmm0, xmm0
  00022	f2 0f 11 45 a8	 movsd	 QWORD PTR tv76[ebp], xmm0
  00027	eb 44		 jmp	 SHORT $LN10@animate_th
$LN9@animate_th:
  00029	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_flight_dynamics@@3PAUDYNAMICS_TYPE@@A ; current_flight_dynamics
  0002f	f3 0f 5a 81 a0
	1c 00 00	 cvtss2sd xmm0, DWORD PTR [ecx+7328]
  00037	66 0f 2f 05 00
	00 00 00	 comisd	 xmm0, QWORD PTR __real@405b800000000000
  0003f	76 0f		 jbe	 SHORT $LN7@animate_th
  00041	f2 0f 10 05 00
	00 00 00	 movsd	 xmm0, QWORD PTR __real@405b800000000000
  00049	f2 0f 11 45 a0	 movsd	 QWORD PTR tv75[ebp], xmm0
  0004e	eb 13		 jmp	 SHORT $LN8@animate_th
$LN7@animate_th:
  00050	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?current_flight_dynamics@@3PAUDYNAMICS_TYPE@@A ; current_flight_dynamics
  00056	f3 0f 5a 82 a0
	1c 00 00	 cvtss2sd xmm0, DWORD PTR [edx+7328]
  0005e	f2 0f 11 45 a0	 movsd	 QWORD PTR tv75[ebp], xmm0
$LN8@animate_th:
  00063	f2 0f 10 45 a0	 movsd	 xmm0, QWORD PTR tv75[ebp]
  00068	f2 0f 11 45 a8	 movsd	 QWORD PTR tv76[ebp], xmm0
$LN10@animate_th:
  0006d	f2 0f 5a 45 a8	 cvtsd2ss xmm0, QWORD PTR tv76[ebp]
  00072	f3 0f 11 45 fc	 movss	 DWORD PTR _left_throttle$[ebp], xmm0

; 389  : 		right_throttle = bound (current_flight_dynamics->right_engine_n1_rpm.max, 0.0, 110.0),

  00077	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_flight_dynamics@@3PAUDYNAMICS_TYPE@@A ; current_flight_dynamics
  0007c	f3 0f 5a 80 00
	1d 00 00	 cvtss2sd xmm0, DWORD PTR [eax+7424]
  00084	0f 57 c9	 xorps	 xmm1, xmm1
  00087	66 0f 2f c8	 comisd	 xmm1, xmm0
  0008b	76 0a		 jbe	 SHORT $LN13@animate_th
  0008d	0f 57 c0	 xorps	 xmm0, xmm0
  00090	f2 0f 11 45 a8	 movsd	 QWORD PTR tv90[ebp], xmm0
  00095	eb 44		 jmp	 SHORT $LN14@animate_th
$LN13@animate_th:
  00097	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_flight_dynamics@@3PAUDYNAMICS_TYPE@@A ; current_flight_dynamics
  0009d	f3 0f 5a 81 00
	1d 00 00	 cvtss2sd xmm0, DWORD PTR [ecx+7424]
  000a5	66 0f 2f 05 00
	00 00 00	 comisd	 xmm0, QWORD PTR __real@405b800000000000
  000ad	76 0f		 jbe	 SHORT $LN11@animate_th
  000af	f2 0f 10 05 00
	00 00 00	 movsd	 xmm0, QWORD PTR __real@405b800000000000
  000b7	f2 0f 11 45 a0	 movsd	 QWORD PTR tv89[ebp], xmm0
  000bc	eb 13		 jmp	 SHORT $LN12@animate_th
$LN11@animate_th:
  000be	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?current_flight_dynamics@@3PAUDYNAMICS_TYPE@@A ; current_flight_dynamics
  000c4	f3 0f 5a 82 00
	1d 00 00	 cvtss2sd xmm0, DWORD PTR [edx+7424]
  000cc	f2 0f 11 45 a0	 movsd	 QWORD PTR tv89[ebp], xmm0
$LN12@animate_th:
  000d1	f2 0f 10 45 a0	 movsd	 xmm0, QWORD PTR tv89[ebp]
  000d6	f2 0f 11 45 a8	 movsd	 QWORD PTR tv90[ebp], xmm0
$LN14@animate_th:
  000db	f2 0f 5a 45 a8	 cvtsd2ss xmm0, QWORD PTR tv90[ebp]
  000e0	f3 0f 11 45 f8	 movss	 DWORD PTR _right_throttle$[ebp], xmm0

; 390  : 		max_movement = THROTTLE_MOVEMENT_RATE * get_delta_time(),

  000e5	f3 0f 5a 05 00
	00 00 00	 cvtss2sd xmm0, DWORD PTR ?system_delta_time@@3MA
  000ed	f2 0f 59 05 00
	00 00 00	 mulsd	 xmm0, QWORD PTR __real@3ff0c15236000000
  000f5	f2 0f 5a c0	 cvtsd2ss xmm0, xmm0
  000f9	f3 0f 11 45 f4	 movss	 DWORD PTR _max_movement$[ebp], xmm0

; 391  : 		throttle_angle = 0.0;

  000fe	0f 57 c0	 xorps	 xmm0, xmm0
  00101	f3 0f 11 45 f0	 movss	 DWORD PTR _throttle_angle$[ebp], xmm0

; 392  : 
; 393  : 	// left throttle
; 394  : 	if (left_throttle < 60.0)  // idle at -45 deg

  00106	f3 0f 5a 45 fc	 cvtss2sd xmm0, DWORD PTR _left_throttle$[ebp]
  0010b	f2 0f 10 0d 00
	00 00 00	 movsd	 xmm1, QWORD PTR __real@404e000000000000
  00113	66 0f 2f c8	 comisd	 xmm1, xmm0
  00117	76 0f		 jbe	 SHORT $LN2@animate_th

; 395  : 		throttle_angle = rad(-45.0);

  00119	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@bf490fdb
  00121	f3 0f 11 45 f0	 movss	 DWORD PTR _throttle_angle$[ebp], xmm0

; 396  : 	else  // otherwise somewhere between -30 and +10 deg

  00126	eb 36		 jmp	 SHORT $LN3@animate_th
$LN2@animate_th:

; 397  : 		throttle_angle = rad(-30.0) + rad(40.0 * (left_throttle - 60.0) / 50.0);

  00128	f3 0f 5a 45 fc	 cvtss2sd xmm0, DWORD PTR _left_throttle$[ebp]
  0012d	f2 0f 5c 05 00
	00 00 00	 subsd	 xmm0, QWORD PTR __real@404e000000000000
  00135	f2 0f 59 05 00
	00 00 00	 mulsd	 xmm0, QWORD PTR __real@4044000000000000
  0013d	f2 0f 5e 05 00
	00 00 00	 divsd	 xmm0, QWORD PTR __real@4049000000000000
  00145	f2 0f 59 05 00
	00 00 00	 mulsd	 xmm0, QWORD PTR __real@3f91df46a0000000
  0014d	f2 0f 58 05 00
	00 00 00	 addsd	 xmm0, QWORD PTR __real@bfe0c15236000000
  00155	f2 0f 5a c0	 cvtsd2ss xmm0, xmm0
  00159	f3 0f 11 45 f0	 movss	 DWORD PTR _throttle_angle$[ebp], xmm0
$LN3@animate_th:

; 398  : 
; 399  : 	throttle_pitch_1 += bound(throttle_angle - throttle_pitch_1, -max_movement, max_movement);

  0015e	f3 0f 10 45 f0	 movss	 xmm0, DWORD PTR _throttle_angle$[ebp]
  00163	f3 0f 5c 05 00
	00 00 00	 subss	 xmm0, DWORD PTR ?throttle_pitch_1@@3MA
  0016b	f3 0f 10 4d f4	 movss	 xmm1, DWORD PTR _max_movement$[ebp]
  00170	0f 57 0d 00 00
	00 00		 xorps	 xmm1, DWORD PTR __xmm@80000000800000008000000080000000
  00177	0f 2f c8	 comiss	 xmm1, xmm0
  0017a	76 13		 jbe	 SHORT $LN17@animate_th
  0017c	f3 0f 10 45 f4	 movss	 xmm0, DWORD PTR _max_movement$[ebp]
  00181	0f 57 05 00 00
	00 00		 xorps	 xmm0, DWORD PTR __xmm@80000000800000008000000080000000
  00188	f3 0f 11 45 ac	 movss	 DWORD PTR tv144[ebp], xmm0
  0018d	eb 3b		 jmp	 SHORT $LN18@animate_th
$LN17@animate_th:
  0018f	f3 0f 10 45 f0	 movss	 xmm0, DWORD PTR _throttle_angle$[ebp]
  00194	f3 0f 5c 05 00
	00 00 00	 subss	 xmm0, DWORD PTR ?throttle_pitch_1@@3MA
  0019c	0f 2f 45 f4	 comiss	 xmm0, DWORD PTR _max_movement$[ebp]
  001a0	76 0c		 jbe	 SHORT $LN15@animate_th
  001a2	f3 0f 10 45 f4	 movss	 xmm0, DWORD PTR _max_movement$[ebp]
  001a7	f3 0f 11 45 a8	 movss	 DWORD PTR tv143[ebp], xmm0
  001ac	eb 12		 jmp	 SHORT $LN16@animate_th
$LN15@animate_th:
  001ae	f3 0f 10 45 f0	 movss	 xmm0, DWORD PTR _throttle_angle$[ebp]
  001b3	f3 0f 5c 05 00
	00 00 00	 subss	 xmm0, DWORD PTR ?throttle_pitch_1@@3MA
  001bb	f3 0f 11 45 a8	 movss	 DWORD PTR tv143[ebp], xmm0
$LN16@animate_th:
  001c0	f3 0f 10 45 a8	 movss	 xmm0, DWORD PTR tv143[ebp]
  001c5	f3 0f 11 45 ac	 movss	 DWORD PTR tv144[ebp], xmm0
$LN18@animate_th:
  001ca	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR ?throttle_pitch_1@@3MA
  001d2	f3 0f 58 45 ac	 addss	 xmm0, DWORD PTR tv144[ebp]
  001d7	f3 0f 11 05 00
	00 00 00	 movss	 DWORD PTR ?throttle_pitch_1@@3MA, xmm0

; 400  : 	set_pitch ( inst3d, throttle_pitch_1, OBJECT_3D_SUB_OBJECT_ARNEH_AH64D_THROTTLE_LEFT );

  001df	68 24 01 00 00	 push	 292			; 00000124H
  001e4	51		 push	 ecx
  001e5	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR ?throttle_pitch_1@@3MA
  001ed	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  001f2	8b 45 08	 mov	 eax, DWORD PTR _inst3d$[ebp]
  001f5	50		 push	 eax
  001f6	e8 00 00 00 00	 call	 ?set_pitch@@YGXPAUOBJECT_3D_INSTANCE@@MH@Z ; set_pitch

; 401  : 
; 402  : 	// right throttle
; 403  : 	if (right_throttle < 60.0)  // idle at -45 deg

  001fb	f3 0f 5a 45 f8	 cvtss2sd xmm0, DWORD PTR _right_throttle$[ebp]
  00200	f2 0f 10 0d 00
	00 00 00	 movsd	 xmm1, QWORD PTR __real@404e000000000000
  00208	66 0f 2f c8	 comisd	 xmm1, xmm0
  0020c	76 0f		 jbe	 SHORT $LN4@animate_th

; 404  : 		throttle_angle = rad(-45.0);

  0020e	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@bf490fdb
  00216	f3 0f 11 45 f0	 movss	 DWORD PTR _throttle_angle$[ebp], xmm0

; 405  : 	else  // otherwise somewhere between -30 and +10 deg

  0021b	eb 36		 jmp	 SHORT $LN5@animate_th
$LN4@animate_th:

; 406  : 		throttle_angle = rad(-30.0) + rad(40.0 * (right_throttle - 60.0) / 50.0);

  0021d	f3 0f 5a 45 f8	 cvtss2sd xmm0, DWORD PTR _right_throttle$[ebp]
  00222	f2 0f 5c 05 00
	00 00 00	 subsd	 xmm0, QWORD PTR __real@404e000000000000
  0022a	f2 0f 59 05 00
	00 00 00	 mulsd	 xmm0, QWORD PTR __real@4044000000000000
  00232	f2 0f 5e 05 00
	00 00 00	 divsd	 xmm0, QWORD PTR __real@4049000000000000
  0023a	f2 0f 59 05 00
	00 00 00	 mulsd	 xmm0, QWORD PTR __real@3f91df46a0000000
  00242	f2 0f 58 05 00
	00 00 00	 addsd	 xmm0, QWORD PTR __real@bfe0c15236000000
  0024a	f2 0f 5a c0	 cvtsd2ss xmm0, xmm0
  0024e	f3 0f 11 45 f0	 movss	 DWORD PTR _throttle_angle$[ebp], xmm0
$LN5@animate_th:

; 407  : 
; 408  : 	throttle_pitch_2 += bound(throttle_angle - throttle_pitch_2, -max_movement, max_movement);

  00253	f3 0f 10 45 f0	 movss	 xmm0, DWORD PTR _throttle_angle$[ebp]
  00258	f3 0f 5c 05 00
	00 00 00	 subss	 xmm0, DWORD PTR ?throttle_pitch_2@@3MA
  00260	f3 0f 10 4d f4	 movss	 xmm1, DWORD PTR _max_movement$[ebp]
  00265	0f 57 0d 00 00
	00 00		 xorps	 xmm1, DWORD PTR __xmm@80000000800000008000000080000000
  0026c	0f 2f c8	 comiss	 xmm1, xmm0
  0026f	76 13		 jbe	 SHORT $LN21@animate_th
  00271	f3 0f 10 45 f4	 movss	 xmm0, DWORD PTR _max_movement$[ebp]
  00276	0f 57 05 00 00
	00 00		 xorps	 xmm0, DWORD PTR __xmm@80000000800000008000000080000000
  0027d	f3 0f 11 45 ac	 movss	 DWORD PTR tv166[ebp], xmm0
  00282	eb 3b		 jmp	 SHORT $LN22@animate_th
$LN21@animate_th:
  00284	f3 0f 10 45 f0	 movss	 xmm0, DWORD PTR _throttle_angle$[ebp]
  00289	f3 0f 5c 05 00
	00 00 00	 subss	 xmm0, DWORD PTR ?throttle_pitch_2@@3MA
  00291	0f 2f 45 f4	 comiss	 xmm0, DWORD PTR _max_movement$[ebp]
  00295	76 0c		 jbe	 SHORT $LN19@animate_th
  00297	f3 0f 10 45 f4	 movss	 xmm0, DWORD PTR _max_movement$[ebp]
  0029c	f3 0f 11 45 a8	 movss	 DWORD PTR tv165[ebp], xmm0
  002a1	eb 12		 jmp	 SHORT $LN20@animate_th
$LN19@animate_th:
  002a3	f3 0f 10 45 f0	 movss	 xmm0, DWORD PTR _throttle_angle$[ebp]
  002a8	f3 0f 5c 05 00
	00 00 00	 subss	 xmm0, DWORD PTR ?throttle_pitch_2@@3MA
  002b0	f3 0f 11 45 a8	 movss	 DWORD PTR tv165[ebp], xmm0
$LN20@animate_th:
  002b5	f3 0f 10 45 a8	 movss	 xmm0, DWORD PTR tv165[ebp]
  002ba	f3 0f 11 45 ac	 movss	 DWORD PTR tv166[ebp], xmm0
$LN22@animate_th:
  002bf	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR ?throttle_pitch_2@@3MA
  002c7	f3 0f 58 45 ac	 addss	 xmm0, DWORD PTR tv166[ebp]
  002cc	f3 0f 11 05 00
	00 00 00	 movss	 DWORD PTR ?throttle_pitch_2@@3MA, xmm0

; 409  : 	set_pitch ( inst3d, throttle_pitch_2, OBJECT_3D_SUB_OBJECT_ARNEH_AH64D_THROTTLE_RIGHT );

  002d4	68 25 01 00 00	 push	 293			; 00000125H
  002d9	51		 push	 ecx
  002da	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR ?throttle_pitch_2@@3MA
  002e2	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  002e7	8b 45 08	 mov	 eax, DWORD PTR _inst3d$[ebp]
  002ea	50		 push	 eax
  002eb	e8 00 00 00 00	 call	 ?set_pitch@@YGXPAUOBJECT_3D_INSTANCE@@MH@Z ; set_pitch

; 410  : }

  002f0	5f		 pop	 edi
  002f1	5e		 pop	 esi
  002f2	5b		 pop	 ebx
  002f3	8b e5		 mov	 esp, ebp
  002f5	5d		 pop	 ebp
  002f6	c2 04 00	 ret	 4
?animate_throttles@@YGXPAUOBJECT_3D_INSTANCE@@@Z ENDP	; animate_throttles
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\gunships\cockpits\apache\ap_vckpt.c
;	COMDAT ?set_pitch@@YGXPAUOBJECT_3D_INSTANCE@@MH@Z
_TEXT	SEGMENT
_depth$ = -60						; size = 4
_search$ = -56						; size = 56
_inst3d$ = 8						; size = 4
_pitch$ = 12						; size = 4
_sub_object_index$ = 16					; size = 4
?set_pitch@@YGXPAUOBJECT_3D_INSTANCE@@MH@Z PROC		; set_pitch, COMDAT

; 368  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 7c	 sub	 esp, 124		; 0000007cH
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 369  : 	object_3d_sub_object_search_data
; 370  : 		search;
; 371  : 	int
; 372  : 		depth;
; 373  : 
; 374  : 	for ( depth = 0; ; depth++ )

  00009	c7 45 c4 00 00
	00 00		 mov	 DWORD PTR _depth$[ebp], 0
  00010	eb 09		 jmp	 SHORT $LN4@set_pitch
$LN2@set_pitch:
  00012	8b 45 c4	 mov	 eax, DWORD PTR _depth$[ebp]
  00015	83 c0 01	 add	 eax, 1
  00018	89 45 c4	 mov	 DWORD PTR _depth$[ebp], eax
$LN4@set_pitch:

; 375  : 	{
; 376  : 		search.search_depth = depth;

  0001b	8b 45 c4	 mov	 eax, DWORD PTR _depth$[ebp]
  0001e	89 45 d0	 mov	 DWORD PTR _search$[ebp+8], eax

; 377  : 		search.search_object = inst3d;

  00021	8b 45 08	 mov	 eax, DWORD PTR _inst3d$[ebp]
  00024	89 45 c8	 mov	 DWORD PTR _search$[ebp], eax

; 378  : 		search.sub_object_index = sub_object_index;

  00027	8b 45 10	 mov	 eax, DWORD PTR _sub_object_index$[ebp]
  0002a	89 45 d4	 mov	 DWORD PTR _search$[ebp+12], eax

; 379  : 		if ( find_object_3d_sub_object ( &search ) != SUB_OBJECT_SEARCH_RESULT_OBJECT_FOUND )

  0002d	8d 45 c8	 lea	 eax, DWORD PTR _search$[ebp]
  00030	50		 push	 eax
  00031	e8 00 00 00 00	 call	 ?find_object_3d_sub_object@@YG?AW4SUB_OBJECT_SEARCH_RESULT_TYPES@@PAUOBJECT_3D_SUB_OBJECT_SEARCH_DATA@@@Z ; find_object_3d_sub_object
  00036	83 f8 01	 cmp	 eax, 1
  00039	74 02		 je	 SHORT $LN5@set_pitch

; 380  : 			break;

  0003b	eb 0f		 jmp	 SHORT $LN3@set_pitch
$LN5@set_pitch:

; 381  : 		search.result_sub_object->relative_pitch = pitch;

  0003d	8b 45 cc	 mov	 eax, DWORD PTR _search$[ebp+4]
  00040	f3 0f 10 45 0c	 movss	 xmm0, DWORD PTR _pitch$[ebp]
  00045	f3 0f 11 40 1c	 movss	 DWORD PTR [eax+28], xmm0

; 382  : 	}

  0004a	eb c6		 jmp	 SHORT $LN2@set_pitch
$LN3@set_pitch:

; 383  : }

  0004c	5f		 pop	 edi
  0004d	5e		 pop	 esi
  0004e	5b		 pop	 ebx
  0004f	8b e5		 mov	 esp, ebp
  00051	5d		 pop	 ebp
  00052	c2 0c 00	 ret	 12			; 0000000cH
?set_pitch@@YGXPAUOBJECT_3D_INSTANCE@@MH@Z ENDP		; set_pitch
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\gunships\cockpits\apache\ap_vckpt.c
;	COMDAT ?animate_pnvs@@YGXPAUOBJECT_3D_INSTANCE@@@Z
_TEXT	SEGMENT
tv73 = -140						; size = 4
tv74 = -136						; size = 4
tv67 = -136						; size = 4
_search$ = -68						; size = 56
_rate$ = -12						; size = 4
_heading_movement$ = -8					; size = 4
_heading$ = -4						; size = 4
_nose_inst3d$ = 8					; size = 4
?animate_pnvs@@YGXPAUOBJECT_3D_INSTANCE@@@Z PROC	; animate_pnvs, COMDAT

; 343  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec 8c 00 00
	00		 sub	 esp, 140		; 0000008cH
  00009	53		 push	 ebx
  0000a	56		 push	 esi
  0000b	57		 push	 edi

; 344  : 	float
; 345  : 		heading,
; 346  : 		heading_movement,
; 347  : 		rate = PNVS_MOVEMENT_RATE * get_delta_time();

  0000c	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@40060a92
  00014	f3 0f 59 05 00
	00 00 00	 mulss	 xmm0, DWORD PTR ?system_delta_time@@3MA
  0001c	f3 0f 11 45 f4	 movss	 DWORD PTR _rate$[ebp], xmm0

; 348  : 	object_3d_sub_object_search_data
; 349  : 		search;
; 350  : 
; 351  : 	// PNVS is stowed pointing to the back and left when not active
; 352  : 	heading = night_vision_system_active ? -pilot_head_heading : rad(-120);

  00021	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?night_vision_system_active@@3HA, 0 ; night_vision_system_active
  00028	74 19		 je	 SHORT $LN4@animate_pn
  0002a	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR ?pilot_head_heading@@3MA
  00032	0f 57 05 00 00
	00 00		 xorps	 xmm0, DWORD PTR __xmm@80000000800000008000000080000000
  00039	f3 0f 11 85 78
	ff ff ff	 movss	 DWORD PTR tv67[ebp], xmm0
  00041	eb 10		 jmp	 SHORT $LN5@animate_pn
$LN4@animate_pn:
  00043	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@c0060a92
  0004b	f3 0f 11 85 78
	ff ff ff	 movss	 DWORD PTR tv67[ebp], xmm0
$LN5@animate_pn:
  00053	f3 0f 10 85 78
	ff ff ff	 movss	 xmm0, DWORD PTR tv67[ebp]
  0005b	f3 0f 11 45 fc	 movss	 DWORD PTR _heading$[ebp], xmm0

; 353  : 
; 354  : 	heading_movement = heading - pnvs_heading;

  00060	f3 0f 10 45 fc	 movss	 xmm0, DWORD PTR _heading$[ebp]
  00065	f3 0f 5c 05 00
	00 00 00	 subss	 xmm0, DWORD PTR ?pnvs_heading@@3MA
  0006d	f3 0f 11 45 f8	 movss	 DWORD PTR _heading_movement$[ebp], xmm0

; 355  : 	heading_movement = bound(heading_movement, -rate, rate);

  00072	f3 0f 10 45 f4	 movss	 xmm0, DWORD PTR _rate$[ebp]
  00077	0f 57 05 00 00
	00 00		 xorps	 xmm0, DWORD PTR __xmm@80000000800000008000000080000000
  0007e	0f 2f 45 f8	 comiss	 xmm0, DWORD PTR _heading_movement$[ebp]
  00082	76 16		 jbe	 SHORT $LN8@animate_pn
  00084	f3 0f 10 45 f4	 movss	 xmm0, DWORD PTR _rate$[ebp]
  00089	0f 57 05 00 00
	00 00		 xorps	 xmm0, DWORD PTR __xmm@80000000800000008000000080000000
  00090	f3 0f 11 85 78
	ff ff ff	 movss	 DWORD PTR tv74[ebp], xmm0
  00098	eb 37		 jmp	 SHORT $LN9@animate_pn
$LN8@animate_pn:
  0009a	f3 0f 10 45 f8	 movss	 xmm0, DWORD PTR _heading_movement$[ebp]
  0009f	0f 2f 45 f4	 comiss	 xmm0, DWORD PTR _rate$[ebp]
  000a3	76 0f		 jbe	 SHORT $LN6@animate_pn
  000a5	f3 0f 10 45 f4	 movss	 xmm0, DWORD PTR _rate$[ebp]
  000aa	f3 0f 11 85 74
	ff ff ff	 movss	 DWORD PTR tv73[ebp], xmm0
  000b2	eb 0d		 jmp	 SHORT $LN7@animate_pn
$LN6@animate_pn:
  000b4	f3 0f 10 45 f8	 movss	 xmm0, DWORD PTR _heading_movement$[ebp]
  000b9	f3 0f 11 85 74
	ff ff ff	 movss	 DWORD PTR tv73[ebp], xmm0
$LN7@animate_pn:
  000c1	f3 0f 10 85 74
	ff ff ff	 movss	 xmm0, DWORD PTR tv73[ebp]
  000c9	f3 0f 11 85 78
	ff ff ff	 movss	 DWORD PTR tv74[ebp], xmm0
$LN9@animate_pn:
  000d1	f3 0f 10 85 78
	ff ff ff	 movss	 xmm0, DWORD PTR tv74[ebp]
  000d9	f3 0f 11 45 f8	 movss	 DWORD PTR _heading_movement$[ebp], xmm0

; 356  : 
; 357  : 	pnvs_heading += heading_movement;

  000de	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR ?pnvs_heading@@3MA
  000e6	f3 0f 58 45 f8	 addss	 xmm0, DWORD PTR _heading_movement$[ebp]
  000eb	f3 0f 11 05 00
	00 00 00	 movss	 DWORD PTR ?pnvs_heading@@3MA, xmm0

; 358  : 
; 359  : 	search.search_depth = 0;

  000f3	c7 45 c4 00 00
	00 00		 mov	 DWORD PTR _search$[ebp+8], 0

; 360  : 	search.search_object = nose_inst3d;

  000fa	8b 45 08	 mov	 eax, DWORD PTR _nose_inst3d$[ebp]
  000fd	89 45 bc	 mov	 DWORD PTR _search$[ebp], eax

; 361  : 	search.sub_object_index = OBJECT_3D_SUB_OBJECT_AH64D_PNVS_HEADING;

  00100	c7 45 c8 0a 00
	00 00		 mov	 DWORD PTR _search$[ebp+12], 10 ; 0000000aH

; 362  : 	if ( find_object_3d_sub_object ( &search ) == SUB_OBJECT_SEARCH_RESULT_OBJECT_FOUND )

  00107	8d 45 bc	 lea	 eax, DWORD PTR _search$[ebp]
  0010a	50		 push	 eax
  0010b	e8 00 00 00 00	 call	 ?find_object_3d_sub_object@@YG?AW4SUB_OBJECT_SEARCH_RESULT_TYPES@@PAUOBJECT_3D_SUB_OBJECT_SEARCH_DATA@@@Z ; find_object_3d_sub_object
  00110	83 f8 01	 cmp	 eax, 1
  00113	75 10		 jne	 SHORT $LN2@animate_pn

; 363  : 		search.result_sub_object->relative_heading = pnvs_heading;

  00115	8b 45 c0	 mov	 eax, DWORD PTR _search$[ebp+4]
  00118	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR ?pnvs_heading@@3MA
  00120	f3 0f 11 40 18	 movss	 DWORD PTR [eax+24], xmm0
$LN2@animate_pn:

; 364  : }

  00125	5f		 pop	 edi
  00126	5e		 pop	 esi
  00127	5b		 pop	 ebx
  00128	8b e5		 mov	 esp, ebp
  0012a	5d		 pop	 ebp
  0012b	c2 04 00	 ret	 4
?animate_pnvs@@YGXPAUOBJECT_3D_INSTANCE@@@Z ENDP	; animate_pnvs
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\gunships\cockpits\apache\ap_vckpt.c
;	COMDAT ?apache_pnvs_active@@YGHXZ
_TEXT	SEGMENT
tv72 = -68						; size = 4
?apache_pnvs_active@@YGHXZ PROC				; apache_pnvs_active, COMDAT

; 413  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 44	 sub	 esp, 68			; 00000044H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 414  : 	static int pnvs_in_position = FALSE;
; 415  : 
; 416  : 	if (!night_vision_system_active)

  00009	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?night_vision_system_active@@3HA, 0 ; night_vision_system_active
  00010	75 0e		 jne	 SHORT $LN2@apache_pnv

; 417  : 	{
; 418  : 		pnvs_in_position = FALSE;

  00012	c7 05 00 00 00
	00 00 00 00 00	 mov	 DWORD PTR ?pnvs_in_position@?1??apache_pnvs_active@@YGHXZ@4HA, 0

; 419  : 		return FALSE;

  0001c	33 c0		 xor	 eax, eax
  0001e	eb 5f		 jmp	 SHORT $LN1@apache_pnv
$LN2@apache_pnv:

; 420  : 	}
; 421  : 
; 422  : 	if (!custom_3d_models.arneh_ah64d_cockpit || pnvs_in_position)

  00020	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?custom_3d_models@@3Uinstalled_custom_3d_models@@A, 0
  00027	74 09		 je	 SHORT $LN4@apache_pnv
  00029	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?pnvs_in_position@?1??apache_pnvs_active@@YGHXZ@4HA, 0
  00030	74 07		 je	 SHORT $LN3@apache_pnv
$LN4@apache_pnv:

; 423  : 		return TRUE;

  00032	b8 01 00 00 00	 mov	 eax, 1
  00037	eb 46		 jmp	 SHORT $LN1@apache_pnv
$LN3@apache_pnv:

; 424  : 
; 425  : 	// night vision isn't activated until the PNVS turret has slewed within 5 degrees of pilots head heading
; 426  : 	pnvs_in_position = pnvs_heading > -pilot_head_heading - rad(5.0);

  00039	f3 0f 5a 05 00
	00 00 00	 cvtss2sd xmm0, DWORD PTR ?pnvs_heading@@3MA
  00041	f3 0f 10 0d 00
	00 00 00	 movss	 xmm1, DWORD PTR ?pilot_head_heading@@3MA
  00049	0f 57 0d 00 00
	00 00		 xorps	 xmm1, DWORD PTR __xmm@80000000800000008000000080000000
  00050	f3 0f 5a c9	 cvtss2sd xmm1, xmm1
  00054	f2 0f 5c 0d 00
	00 00 00	 subsd	 xmm1, QWORD PTR __real@3fb6571848000000
  0005c	66 0f 2f c1	 comisd	 xmm0, xmm1
  00060	76 09		 jbe	 SHORT $LN6@apache_pnv
  00062	c7 45 bc 01 00
	00 00		 mov	 DWORD PTR tv72[ebp], 1
  00069	eb 07		 jmp	 SHORT $LN7@apache_pnv
$LN6@apache_pnv:
  0006b	c7 45 bc 00 00
	00 00		 mov	 DWORD PTR tv72[ebp], 0
$LN7@apache_pnv:
  00072	8b 45 bc	 mov	 eax, DWORD PTR tv72[ebp]
  00075	a3 00 00 00 00	 mov	 DWORD PTR ?pnvs_in_position@?1??apache_pnvs_active@@YGHXZ@4HA, eax

; 427  : 
; 428  : 	return pnvs_in_position;

  0007a	a1 00 00 00 00	 mov	 eax, DWORD PTR ?pnvs_in_position@?1??apache_pnvs_active@@YGHXZ@4HA
$LN1@apache_pnv:

; 429  : }

  0007f	5f		 pop	 edi
  00080	5e		 pop	 esi
  00081	5b		 pop	 ebx
  00082	8b e5		 mov	 esp, ebp
  00084	5d		 pop	 ebp
  00085	c3		 ret	 0
?apache_pnvs_active@@YGHXZ ENDP				; apache_pnvs_active
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\gunships\cockpits\apache\ap_vckpt.c
;	COMDAT ?restore_apache_virtual_cockpit_main_rotors@@YGXXZ
_TEXT	SEGMENT
tv88 = -80						; size = 4
tv80 = -76						; size = 4
_inst3d$ = -8						; size = 4
_theta$ = -4						; size = 4
?restore_apache_virtual_cockpit_main_rotors@@YGXXZ PROC	; restore_apache_virtual_cockpit_main_rotors, COMDAT

; 2105 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 50	 sub	 esp, 80			; 00000050H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 2106 : 	float
; 2107 : 		theta;
; 2108 : 
; 2109 : 	object_3d_instance
; 2110 : 		*inst3d;
; 2111 : 
; 2112 : 	ASSERT (get_gunship_entity ());

  00009	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?gunship_entity@@3PAUENTITY@@A, 0 ; gunship_entity
  00010	75 18		 jne	 SHORT $LN2@restore_ap
  00012	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??restore_apache_virtual_cockpit_main_rotors@@YGXXZ@4JA
  00017	83 c0 07	 add	 eax, 7
  0001a	50		 push	 eax
  0001b	68 00 00 00 00	 push	 OFFSET ??_C@_0FA@DHMOLMNF@c?3?2users?2nhv90?2projects?2eech?2ap@
  00020	68 00 00 00 00	 push	 OFFSET ??_C@_0BG@EANNPEON@get_gunship_entity?5?$CI?$CJ@
  00025	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN2@restore_ap:

; 2113 : 
; 2114 : 	ASSERT (virtual_cockpit_main_rotor_inst3d);

  0002a	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?virtual_cockpit_main_rotor_inst3d@@3PAUOBJECT_3D_INSTANCE@@A, 0
  00031	75 18		 jne	 SHORT $LN3@restore_ap
  00033	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??restore_apache_virtual_cockpit_main_rotors@@YGXXZ@4JA
  00038	83 c0 09	 add	 eax, 9
  0003b	50		 push	 eax
  0003c	68 00 00 00 00	 push	 OFFSET ??_C@_0FA@DHMOLMNF@c?3?2users?2nhv90?2projects?2eech?2ap@
  00041	68 00 00 00 00	 push	 OFFSET ??_C@_0CC@MKOBILCB@virtual_cockpit_main_rotor_inst@
  00046	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN3@restore_ap:

; 2115 : 
; 2116 : 	inst3d = (object_3d_instance *) get_local_entity_ptr_value (get_gunship_entity (), PTR_TYPE_INSTANCE_3D_OBJECT);

  0004b	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?gunship_entity@@3PAUENTITY@@A, 0 ; gunship_entity
  00052	74 0c		 je	 SHORT $LN6@restore_ap
  00054	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gunship_entity@@3PAUENTITY@@A ; gunship_entity
  00059	8b 08		 mov	 ecx, DWORD PTR [eax]
  0005b	89 4d b4	 mov	 DWORD PTR tv80[ebp], ecx
  0005e	eb 21		 jmp	 SHORT $LN7@restore_ap
$LN6@restore_ap:
  00060	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??restore_apache_virtual_cockpit_main_rotors@@YGXXZ@4JA
  00066	83 c2 0b	 add	 edx, 11			; 0000000bH
  00069	52		 push	 edx
  0006a	68 00 00 00 00	 push	 OFFSET ??_C@_0FA@DHMOLMNF@c?3?2users?2nhv90?2projects?2eech?2ap@
  0006f	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  00074	50		 push	 eax
  00075	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  0007a	c7 45 b4 00 00
	00 00		 mov	 DWORD PTR tv80[ebp], 0
$LN7@restore_ap:
  00081	b9 01 00 00 00	 mov	 ecx, 1
  00086	85 c9		 test	 ecx, ecx
  00088	74 09		 je	 SHORT $LN8@restore_ap
  0008a	c7 45 b0 02 00
	00 00		 mov	 DWORD PTR tv88[ebp], 2
  00091	eb 21		 jmp	 SHORT $LN9@restore_ap
$LN8@restore_ap:
  00093	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??restore_apache_virtual_cockpit_main_rotors@@YGXXZ@4JA
  00099	83 c2 0b	 add	 edx, 11			; 0000000bH
  0009c	52		 push	 edx
  0009d	68 00 00 00 00	 push	 OFFSET ??_C@_0FA@DHMOLMNF@c?3?2users?2nhv90?2projects?2eech?2ap@
  000a2	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_ptr_type_message@@3PBDB ; overload_invalid_ptr_type_message
  000a7	50		 push	 eax
  000a8	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  000ad	c7 45 b0 00 00
	00 00		 mov	 DWORD PTR tv88[ebp], 0
$LN9@restore_ap:
  000b4	6a 02		 push	 2
  000b6	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gunship_entity@@3PAUENTITY@@A ; gunship_entity
  000bc	51		 push	 ecx
  000bd	6b 55 b4 50	 imul	 edx, DWORD PTR tv80[ebp], 80
  000c1	8b 45 b0	 mov	 eax, DWORD PTR tv88[ebp]
  000c4	8b 8c 82 00 00
	00 00		 mov	 ecx, DWORD PTR ?fn_get_local_entity_ptr_value@@3PAY0BE@P6GPAXPAUENTITY@@W4PTR_TYPES@@@ZA[edx+eax*4]
  000cb	ff d1		 call	 ecx
  000cd	89 45 f8	 mov	 DWORD PTR _inst3d$[ebp], eax

; 2117 : 
; 2118 : 	ASSERT (inst3d);

  000d0	83 7d f8 00	 cmp	 DWORD PTR _inst3d$[ebp], 0
  000d4	75 18		 jne	 SHORT $LN4@restore_ap
  000d6	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??restore_apache_virtual_cockpit_main_rotors@@YGXXZ@4JA
  000db	83 c0 0d	 add	 eax, 13			; 0000000dH
  000de	50		 push	 eax
  000df	68 00 00 00 00	 push	 OFFSET ??_C@_0FA@DHMOLMNF@c?3?2users?2nhv90?2projects?2eech?2ap@
  000e4	68 00 00 00 00	 push	 OFFSET ??_C@_06DDNABPCD@inst3d@
  000e9	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN4@restore_ap:

; 2119 : 
; 2120 : 	theta = get_rotation_angle_of_helicopter_main_rotors (inst3d);

  000ee	8b 45 f8	 mov	 eax, DWORD PTR _inst3d$[ebp]
  000f1	50		 push	 eax
  000f2	e8 00 00 00 00	 call	 ?get_rotation_angle_of_helicopter_main_rotors@@YGMPAUOBJECT_3D_INSTANCE@@@Z ; get_rotation_angle_of_helicopter_main_rotors
  000f7	d9 5d fc	 fstp	 DWORD PTR _theta$[ebp]

; 2121 : 
; 2122 : 	set_rotation_angle_of_helicopter_main_rotors (virtual_cockpit_main_rotor_inst3d, theta);

  000fa	51		 push	 ecx
  000fb	f3 0f 10 45 fc	 movss	 xmm0, DWORD PTR _theta$[ebp]
  00100	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00105	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_main_rotor_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  0010a	50		 push	 eax
  0010b	e8 00 00 00 00	 call	 ?set_rotation_angle_of_helicopter_main_rotors@@YGXPAUOBJECT_3D_INSTANCE@@M@Z ; set_rotation_angle_of_helicopter_main_rotors

; 2123 : 
; 2124 : 	animate_helicopter_virtual_cockpit_main_rotors (get_gunship_entity (), virtual_cockpit_main_rotor_inst3d);

  00110	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_main_rotor_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  00115	50		 push	 eax
  00116	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gunship_entity@@3PAUENTITY@@A ; gunship_entity
  0011c	51		 push	 ecx
  0011d	e8 00 00 00 00	 call	 ?animate_helicopter_virtual_cockpit_main_rotors@@YGXPAUENTITY@@PAUOBJECT_3D_INSTANCE@@@Z ; animate_helicopter_virtual_cockpit_main_rotors

; 2125 : 
; 2126 : 	restore_helicopter_main_rotor_inst3d (virtual_cockpit_main_rotor_inst3d);

  00122	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_main_rotor_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  00127	50		 push	 eax
  00128	e8 00 00 00 00	 call	 ?restore_helicopter_main_rotor_inst3d@@YGHPAUOBJECT_3D_INSTANCE@@@Z ; restore_helicopter_main_rotor_inst3d

; 2127 : }

  0012d	5f		 pop	 edi
  0012e	5e		 pop	 esi
  0012f	5b		 pop	 ebx
  00130	8b e5		 mov	 esp, ebp
  00132	5d		 pop	 ebp
  00133	c3		 ret	 0
?restore_apache_virtual_cockpit_main_rotors@@YGXXZ ENDP	; restore_apache_virtual_cockpit_main_rotors
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\gunships\cockpits\apache\ap_vckpt.c
;	COMDAT ?damage_apache_virtual_cockpit_main_rotors@@YGXH@Z
_TEXT	SEGMENT
tv88 = -80						; size = 4
tv80 = -76						; size = 4
_inst3d$ = -8						; size = 4
_theta$ = -4						; size = 4
_seed$ = 8						; size = 4
?damage_apache_virtual_cockpit_main_rotors@@YGXH@Z PROC	; damage_apache_virtual_cockpit_main_rotors, COMDAT

; 2076 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 50	 sub	 esp, 80			; 00000050H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 2077 : 	float
; 2078 : 		theta;
; 2079 : 
; 2080 : 	object_3d_instance
; 2081 : 		*inst3d;
; 2082 : 
; 2083 : 	ASSERT (get_gunship_entity ());

  00009	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?gunship_entity@@3PAUENTITY@@A, 0 ; gunship_entity
  00010	75 18		 jne	 SHORT $LN2@damage_apa
  00012	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??damage_apache_virtual_cockpit_main_rotors@@YGXH@Z@4JA
  00017	83 c0 07	 add	 eax, 7
  0001a	50		 push	 eax
  0001b	68 00 00 00 00	 push	 OFFSET ??_C@_0FA@DHMOLMNF@c?3?2users?2nhv90?2projects?2eech?2ap@
  00020	68 00 00 00 00	 push	 OFFSET ??_C@_0BG@EANNPEON@get_gunship_entity?5?$CI?$CJ@
  00025	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN2@damage_apa:

; 2084 : 
; 2085 : 	ASSERT (virtual_cockpit_main_rotor_inst3d);

  0002a	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?virtual_cockpit_main_rotor_inst3d@@3PAUOBJECT_3D_INSTANCE@@A, 0
  00031	75 18		 jne	 SHORT $LN3@damage_apa
  00033	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??damage_apache_virtual_cockpit_main_rotors@@YGXH@Z@4JA
  00038	83 c0 09	 add	 eax, 9
  0003b	50		 push	 eax
  0003c	68 00 00 00 00	 push	 OFFSET ??_C@_0FA@DHMOLMNF@c?3?2users?2nhv90?2projects?2eech?2ap@
  00041	68 00 00 00 00	 push	 OFFSET ??_C@_0CC@MKOBILCB@virtual_cockpit_main_rotor_inst@
  00046	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN3@damage_apa:

; 2086 : 
; 2087 : 	inst3d = (object_3d_instance *) get_local_entity_ptr_value (get_gunship_entity (), PTR_TYPE_INSTANCE_3D_OBJECT);

  0004b	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?gunship_entity@@3PAUENTITY@@A, 0 ; gunship_entity
  00052	74 0c		 je	 SHORT $LN6@damage_apa
  00054	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gunship_entity@@3PAUENTITY@@A ; gunship_entity
  00059	8b 08		 mov	 ecx, DWORD PTR [eax]
  0005b	89 4d b4	 mov	 DWORD PTR tv80[ebp], ecx
  0005e	eb 21		 jmp	 SHORT $LN7@damage_apa
$LN6@damage_apa:
  00060	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??damage_apache_virtual_cockpit_main_rotors@@YGXH@Z@4JA
  00066	83 c2 0b	 add	 edx, 11			; 0000000bH
  00069	52		 push	 edx
  0006a	68 00 00 00 00	 push	 OFFSET ??_C@_0FA@DHMOLMNF@c?3?2users?2nhv90?2projects?2eech?2ap@
  0006f	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  00074	50		 push	 eax
  00075	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  0007a	c7 45 b4 00 00
	00 00		 mov	 DWORD PTR tv80[ebp], 0
$LN7@damage_apa:
  00081	b9 01 00 00 00	 mov	 ecx, 1
  00086	85 c9		 test	 ecx, ecx
  00088	74 09		 je	 SHORT $LN8@damage_apa
  0008a	c7 45 b0 02 00
	00 00		 mov	 DWORD PTR tv88[ebp], 2
  00091	eb 21		 jmp	 SHORT $LN9@damage_apa
$LN8@damage_apa:
  00093	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??damage_apache_virtual_cockpit_main_rotors@@YGXH@Z@4JA
  00099	83 c2 0b	 add	 edx, 11			; 0000000bH
  0009c	52		 push	 edx
  0009d	68 00 00 00 00	 push	 OFFSET ??_C@_0FA@DHMOLMNF@c?3?2users?2nhv90?2projects?2eech?2ap@
  000a2	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_ptr_type_message@@3PBDB ; overload_invalid_ptr_type_message
  000a7	50		 push	 eax
  000a8	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  000ad	c7 45 b0 00 00
	00 00		 mov	 DWORD PTR tv88[ebp], 0
$LN9@damage_apa:
  000b4	6a 02		 push	 2
  000b6	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gunship_entity@@3PAUENTITY@@A ; gunship_entity
  000bc	51		 push	 ecx
  000bd	6b 55 b4 50	 imul	 edx, DWORD PTR tv80[ebp], 80
  000c1	8b 45 b0	 mov	 eax, DWORD PTR tv88[ebp]
  000c4	8b 8c 82 00 00
	00 00		 mov	 ecx, DWORD PTR ?fn_get_local_entity_ptr_value@@3PAY0BE@P6GPAXPAUENTITY@@W4PTR_TYPES@@@ZA[edx+eax*4]
  000cb	ff d1		 call	 ecx
  000cd	89 45 f8	 mov	 DWORD PTR _inst3d$[ebp], eax

; 2088 : 
; 2089 : 	ASSERT (inst3d);

  000d0	83 7d f8 00	 cmp	 DWORD PTR _inst3d$[ebp], 0
  000d4	75 18		 jne	 SHORT $LN4@damage_apa
  000d6	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??damage_apache_virtual_cockpit_main_rotors@@YGXH@Z@4JA
  000db	83 c0 0d	 add	 eax, 13			; 0000000dH
  000de	50		 push	 eax
  000df	68 00 00 00 00	 push	 OFFSET ??_C@_0FA@DHMOLMNF@c?3?2users?2nhv90?2projects?2eech?2ap@
  000e4	68 00 00 00 00	 push	 OFFSET ??_C@_06DDNABPCD@inst3d@
  000e9	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN4@damage_apa:

; 2090 : 
; 2091 : 	theta = get_rotation_angle_of_helicopter_main_rotors (inst3d);

  000ee	8b 45 f8	 mov	 eax, DWORD PTR _inst3d$[ebp]
  000f1	50		 push	 eax
  000f2	e8 00 00 00 00	 call	 ?get_rotation_angle_of_helicopter_main_rotors@@YGMPAUOBJECT_3D_INSTANCE@@@Z ; get_rotation_angle_of_helicopter_main_rotors
  000f7	d9 5d fc	 fstp	 DWORD PTR _theta$[ebp]

; 2092 : 
; 2093 : 	set_rotation_angle_of_helicopter_main_rotors (virtual_cockpit_main_rotor_inst3d, theta);

  000fa	51		 push	 ecx
  000fb	f3 0f 10 45 fc	 movss	 xmm0, DWORD PTR _theta$[ebp]
  00100	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00105	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_main_rotor_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  0010a	50		 push	 eax
  0010b	e8 00 00 00 00	 call	 ?set_rotation_angle_of_helicopter_main_rotors@@YGXPAUOBJECT_3D_INSTANCE@@M@Z ; set_rotation_angle_of_helicopter_main_rotors

; 2094 : 
; 2095 : 	animate_helicopter_virtual_cockpit_main_rotors (get_gunship_entity (), virtual_cockpit_main_rotor_inst3d);

  00110	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_main_rotor_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  00115	50		 push	 eax
  00116	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gunship_entity@@3PAUENTITY@@A ; gunship_entity
  0011c	51		 push	 ecx
  0011d	e8 00 00 00 00	 call	 ?animate_helicopter_virtual_cockpit_main_rotors@@YGXPAUENTITY@@PAUOBJECT_3D_INSTANCE@@@Z ; animate_helicopter_virtual_cockpit_main_rotors

; 2096 : 
; 2097 : 	damage_helicopter_main_rotor_inst3d (virtual_cockpit_main_rotor_inst3d, seed);

  00122	8b 45 08	 mov	 eax, DWORD PTR _seed$[ebp]
  00125	50		 push	 eax
  00126	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?virtual_cockpit_main_rotor_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  0012c	51		 push	 ecx
  0012d	e8 00 00 00 00	 call	 ?damage_helicopter_main_rotor_inst3d@@YGHPAUOBJECT_3D_INSTANCE@@H@Z ; damage_helicopter_main_rotor_inst3d

; 2098 : }

  00132	5f		 pop	 edi
  00133	5e		 pop	 esi
  00134	5b		 pop	 ebx
  00135	8b e5		 mov	 esp, ebp
  00137	5d		 pop	 ebp
  00138	c2 04 00	 ret	 4
?damage_apache_virtual_cockpit_main_rotors@@YGXH@Z ENDP	; damage_apache_virtual_cockpit_main_rotors
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\gunships\cockpits\apache\ap_vckpt.c
;	COMDAT ?draw_apache_external_virtual_cockpit@@YGXIPAE@Z
_TEXT	SEGMENT
tv160 = -300						; size = 8
tv134 = -300						; size = 8
tv246 = -292						; size = 4
tv220 = -292						; size = 4
tv161 = -292						; size = 8
tv135 = -292						; size = 8
tv238 = -288						; size = 4
tv213 = -288						; size = 4
tv174 = -288						; size = 4
_roll$1 = -220						; size = 4
_pitch$2 = -216						; size = 4
_heading$3 = -212					; size = 4
_roll$4 = -208						; size = 4
_pitch$5 = -204						; size = 4
_heading$6 = -200					; size = 4
_inst3d$ = -196						; size = 4
_theta$ = -192						; size = 4
_search$ = -188						; size = 56
_vp$ = -132						; size = 48
_head_rotation$ = -84					; size = 36
_vp_world_position$ = -48				; size = 12
_vp_current_position$ = -36				; size = 12
_vp_cockpit_world_position$ = -24			; size = 12
_vp_position$ = -12					; size = 12
_flags$ = 8						; size = 4
_wiper_rle_graphic$ = 12				; size = 4
?draw_apache_external_virtual_cockpit@@YGXIPAE@Z PROC	; draw_apache_external_virtual_cockpit, COMDAT

; 1702 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec 2c 01 00
	00		 sub	 esp, 300		; 0000012cH
  00009	53		 push	 ebx
  0000a	56		 push	 esi
  0000b	57		 push	 edi

; 1703 : 	vec3d
; 1704 : 		vp_position,
; 1705 : 		vp_cockpit_world_position,
; 1706 : 		vp_current_position,
; 1707 : 		vp_world_position;
; 1708 : 
; 1709 : 	matrix3x3
; 1710 : 		head_rotation;
; 1711 : 
; 1712 : 	viewpoint
; 1713 : 		vp;
; 1714 : 
; 1715 : 	object_3d_sub_object_search_data
; 1716 : 		search;
; 1717 : 
; 1718 : 	float
; 1719 : 		theta;
; 1720 : 
; 1721 : 	object_3d_instance
; 1722 : 		*inst3d;
; 1723 : 
; 1724 : 	////////////////////////////////////////
; 1725 : 	//
; 1726 : 	// virtual cockpit viewpoint is placed at the main object origin
; 1727 : 	//
; 1728 : 	////////////////////////////////////////
; 1729 : 
; 1730 : 	if (custom_3d_models.arneh_ah64d_cockpit)

  0000c	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?custom_3d_models@@3Uinstalled_custom_3d_models@@A, 0
  00013	74 11		 je	 SHORT $LN2@draw_apach

; 1731 : 		get_apache_crew_viewpoint(&vp);

  00015	8d 85 7c ff ff
	ff		 lea	 eax, DWORD PTR _vp$[ebp]
  0001b	50		 push	 eax
  0001c	e8 00 00 00 00	 call	 ?get_apache_crew_viewpoint@@YGXPAUVIEWPOINT@@@Z ; get_apache_crew_viewpoint

; 1732 : 	else

  00021	e9 31 03 00 00	 jmp	 $LN7@draw_apach
$LN2@draw_apach:

; 1733 : 	{
; 1734 : 		if (get_view_mode () == VIEW_MODE_COCKPIT_PANEL_SPECIAL_APACHE_LHS_MFD)

  00026	83 3d 00 00 00
	00 1c		 cmp	 DWORD PTR ?view_mode@@3W4VIEW_MODES@@A, 28 ; view_mode, 0000001cH
  0002d	75 13		 jne	 SHORT $LN4@draw_apach

; 1735 : 		{
; 1736 : 			get_display_viewpoint (VIEW_MODE_COCKPIT_PANEL_SPECIAL_APACHE_LHS_MFD, &vp);

  0002f	8d 85 7c ff ff
	ff		 lea	 eax, DWORD PTR _vp$[ebp]
  00035	50		 push	 eax
  00036	6a 1c		 push	 28			; 0000001cH
  00038	e8 00 00 00 00	 call	 ?get_display_viewpoint@@YGXW4VIEW_MODES@@PAUVIEWPOINT@@@Z ; get_display_viewpoint
  0003d	e9 15 03 00 00	 jmp	 $LN7@draw_apach
$LN4@draw_apach:

; 1737 : 		}
; 1738 : 		else if (get_view_mode () == VIEW_MODE_COCKPIT_PANEL_SPECIAL_APACHE_RHS_MFD)

  00042	83 3d 00 00 00
	00 1d		 cmp	 DWORD PTR ?view_mode@@3W4VIEW_MODES@@A, 29 ; view_mode, 0000001dH
  00049	75 13		 jne	 SHORT $LN6@draw_apach

; 1739 : 		{
; 1740 : 			get_display_viewpoint (VIEW_MODE_COCKPIT_PANEL_SPECIAL_APACHE_RHS_MFD, &vp);

  0004b	8d 85 7c ff ff
	ff		 lea	 eax, DWORD PTR _vp$[ebp]
  00051	50		 push	 eax
  00052	6a 1d		 push	 29			; 0000001dH
  00054	e8 00 00 00 00	 call	 ?get_display_viewpoint@@YGXW4VIEW_MODES@@PAUVIEWPOINT@@@Z ; get_display_viewpoint

; 1741 : 		}
; 1742 : 		else

  00059	e9 f9 02 00 00	 jmp	 $LN7@draw_apach
$LN6@draw_apach:

; 1743 : 		{
; 1744 : 			vp_position.x = 0.0;

  0005e	0f 57 c0	 xorps	 xmm0, xmm0
  00061	f3 0f 11 45 f4	 movss	 DWORD PTR _vp_position$[ebp], xmm0

; 1745 : 			vp_position.y = 0.0;

  00066	0f 57 c0	 xorps	 xmm0, xmm0
  00069	f3 0f 11 45 f8	 movss	 DWORD PTR _vp_position$[ebp+4], xmm0

; 1746 : 			vp_position.z = 0.0;

  0006e	0f 57 c0	 xorps	 xmm0, xmm0
  00071	f3 0f 11 45 fc	 movss	 DWORD PTR _vp_position$[ebp+8], xmm0

; 1747 : 
; 1748 : 	//VJ wideview mod, date: 18-mar-03
; 1749 : 			if (get_global_wide_cockpit ())

  00076	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?wide_cockpit@@3HA, 0 ; wide_cockpit
  0007d	74 3c		 je	 SHORT $LN8@draw_apach

; 1750 : 			{
; 1751 : 			   vp_position.x = wide_cockpit_position[wide_cockpit_nr].c.x;

  0007f	6b 05 00 00 00
	00 24		 imul	 eax, DWORD PTR ?wide_cockpit_nr@@3HA, 36 ; wide_cockpit_nr
  00086	f3 0f 10 80 14
	00 00 00	 movss	 xmm0, DWORD PTR ?wide_cockpit_position@@3PAUCOCKPIT_POSITION@@A[eax+20]
  0008e	f3 0f 11 45 f4	 movss	 DWORD PTR _vp_position$[ebp], xmm0

; 1752 : 			   vp_position.y = wide_cockpit_position[wide_cockpit_nr].c.y;

  00093	6b 05 00 00 00
	00 24		 imul	 eax, DWORD PTR ?wide_cockpit_nr@@3HA, 36 ; wide_cockpit_nr
  0009a	f3 0f 10 80 18
	00 00 00	 movss	 xmm0, DWORD PTR ?wide_cockpit_position@@3PAUCOCKPIT_POSITION@@A[eax+24]
  000a2	f3 0f 11 45 f8	 movss	 DWORD PTR _vp_position$[ebp+4], xmm0

; 1753 : 			   vp_position.z = wide_cockpit_position[wide_cockpit_nr].c.z;

  000a7	6b 05 00 00 00
	00 24		 imul	 eax, DWORD PTR ?wide_cockpit_nr@@3HA, 36 ; wide_cockpit_nr
  000ae	f3 0f 10 80 1c
	00 00 00	 movss	 xmm0, DWORD PTR ?wide_cockpit_position@@3PAUCOCKPIT_POSITION@@A[eax+28]
  000b6	f3 0f 11 45 fc	 movss	 DWORD PTR _vp_position$[ebp+8], xmm0
$LN8@draw_apach:

; 1754 : 				//VJ 050207 included head pitch in fixed view setting
; 1755 : 	//			pilot_head_pitch_datum = rad ( wide_cockpit_position[wide_cockpit_nr].c.p );
; 1756 : 	//			if (edit_wide_cockpit)
; 1757 : 	//				pilot_head_pitch = pilot_head_pitch_datum;
; 1758 : 			}
; 1759 : 
; 1760 : 			vp_position.x += current_custom_cockpit_viewpoint.x;

  000bb	f3 0f 10 45 f4	 movss	 xmm0, DWORD PTR _vp_position$[ebp]
  000c0	f3 0f 58 05 00
	00 00 00	 addss	 xmm0, DWORD PTR ?current_custom_cockpit_viewpoint@@3UCOCKPIT_VIEW@@A
  000c8	f3 0f 11 45 f4	 movss	 DWORD PTR _vp_position$[ebp], xmm0

; 1761 : 			vp_position.y += current_custom_cockpit_viewpoint.y;

  000cd	f3 0f 10 45 f8	 movss	 xmm0, DWORD PTR _vp_position$[ebp+4]
  000d2	f3 0f 58 05 04
	00 00 00	 addss	 xmm0, DWORD PTR ?current_custom_cockpit_viewpoint@@3UCOCKPIT_VIEW@@A+4
  000da	f3 0f 11 45 f8	 movss	 DWORD PTR _vp_position$[ebp+4], xmm0

; 1762 : 			vp_position.z += current_custom_cockpit_viewpoint.z;

  000df	f3 0f 10 45 fc	 movss	 xmm0, DWORD PTR _vp_position$[ebp+8]
  000e4	f3 0f 58 05 08
	00 00 00	 addss	 xmm0, DWORD PTR ?current_custom_cockpit_viewpoint@@3UCOCKPIT_VIEW@@A+8
  000ec	f3 0f 11 45 fc	 movss	 DWORD PTR _vp_position$[ebp+8], xmm0

; 1763 : 
; 1764 : 			vp_position.x += bound(current_flight_dynamics->model_acceleration_vector.x * ONE_OVER_G, -3.0, 3.0) * 0.025 * command_line_g_force_head_movment_modifier;

  000f1	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_flight_dynamics@@3PAUDYNAMICS_TYPE@@A ; current_flight_dynamics
  000f6	f3 0f 10 80 48
	1c 00 00	 movss	 xmm0, DWORD PTR [eax+7240]
  000fe	f3 0f 59 05 00
	00 00 00	 mulss	 xmm0, DWORD PTR __real@3dd0c43d
  00106	f3 0f 5a c0	 cvtss2sd xmm0, xmm0
  0010a	f2 0f 10 0d 00
	00 00 00	 movsd	 xmm1, QWORD PTR __real@c008000000000000
  00112	66 0f 2f c8	 comisd	 xmm1, xmm0
  00116	76 12		 jbe	 SHORT $LN41@draw_apach
  00118	f2 0f 10 05 00
	00 00 00	 movsd	 xmm0, QWORD PTR __real@c008000000000000
  00120	f2 0f 11 85 dc
	fe ff ff	 movsd	 QWORD PTR tv135[ebp], xmm0
  00128	eb 68		 jmp	 SHORT $LN42@draw_apach
$LN41@draw_apach:
  0012a	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_flight_dynamics@@3PAUDYNAMICS_TYPE@@A ; current_flight_dynamics
  00130	f3 0f 10 81 48
	1c 00 00	 movss	 xmm0, DWORD PTR [ecx+7240]
  00138	f3 0f 59 05 00
	00 00 00	 mulss	 xmm0, DWORD PTR __real@3dd0c43d
  00140	f3 0f 5a c0	 cvtss2sd xmm0, xmm0
  00144	66 0f 2f 05 00
	00 00 00	 comisd	 xmm0, QWORD PTR __real@4008000000000000
  0014c	76 12		 jbe	 SHORT $LN39@draw_apach
  0014e	f2 0f 10 05 00
	00 00 00	 movsd	 xmm0, QWORD PTR __real@4008000000000000
  00156	f2 0f 11 85 d4
	fe ff ff	 movsd	 QWORD PTR tv134[ebp], xmm0
  0015e	eb 22		 jmp	 SHORT $LN40@draw_apach
$LN39@draw_apach:
  00160	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?current_flight_dynamics@@3PAUDYNAMICS_TYPE@@A ; current_flight_dynamics
  00166	f3 0f 10 82 48
	1c 00 00	 movss	 xmm0, DWORD PTR [edx+7240]
  0016e	f3 0f 59 05 00
	00 00 00	 mulss	 xmm0, DWORD PTR __real@3dd0c43d
  00176	f3 0f 5a c0	 cvtss2sd xmm0, xmm0
  0017a	f2 0f 11 85 d4
	fe ff ff	 movsd	 QWORD PTR tv134[ebp], xmm0
$LN40@draw_apach:
  00182	f2 0f 10 85 d4
	fe ff ff	 movsd	 xmm0, QWORD PTR tv134[ebp]
  0018a	f2 0f 11 85 dc
	fe ff ff	 movsd	 QWORD PTR tv135[ebp], xmm0
$LN42@draw_apach:
  00192	f2 0f 10 85 dc
	fe ff ff	 movsd	 xmm0, QWORD PTR tv135[ebp]
  0019a	f2 0f 59 05 00
	00 00 00	 mulsd	 xmm0, QWORD PTR __real@3f9999999999999a
  001a2	f3 0f 5a 0d 00
	00 00 00	 cvtss2sd xmm1, DWORD PTR ?command_line_g_force_head_movment_modifier@@3MA
  001aa	f2 0f 59 c1	 mulsd	 xmm0, xmm1
  001ae	f3 0f 5a 4d f4	 cvtss2sd xmm1, DWORD PTR _vp_position$[ebp]
  001b3	f2 0f 58 c8	 addsd	 xmm1, xmm0
  001b7	f2 0f 5a c1	 cvtsd2ss xmm0, xmm1
  001bb	f3 0f 11 45 f4	 movss	 DWORD PTR _vp_position$[ebp], xmm0

; 1765 : 			if (!current_flight_dynamics->auto_hover)   // arneh - auto hover has some weird dynamics which cause lots of g-forces, so disable head movement when auto hover is enabled

  001c0	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_flight_dynamics@@3PAUDYNAMICS_TYPE@@A ; current_flight_dynamics
  001c5	8b 88 28 25 00
	00		 mov	 ecx, DWORD PTR [eax+9512]
  001cb	c1 e9 07	 shr	 ecx, 7
  001ce	83 e1 07	 and	 ecx, 7
  001d1	0f 85 c3 00 00
	00		 jne	 $LN9@draw_apach

; 1766 : 				vp_position.y += bound(current_flight_dynamics->g_force.value - 1.0, -1.5, 5.0) * 0.025 * command_line_g_force_head_movment_modifier;

  001d7	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_flight_dynamics@@3PAUDYNAMICS_TYPE@@A ; current_flight_dynamics
  001dc	f3 0f 5a 80 5c
	24 00 00	 cvtss2sd xmm0, DWORD PTR [eax+9308]
  001e4	f2 0f 5c 05 00
	00 00 00	 subsd	 xmm0, QWORD PTR __real@3ff0000000000000
  001ec	f2 0f 10 0d 00
	00 00 00	 movsd	 xmm1, QWORD PTR __real@bff8000000000000
  001f4	66 0f 2f c8	 comisd	 xmm1, xmm0
  001f8	76 12		 jbe	 SHORT $LN45@draw_apach
  001fa	f2 0f 10 05 00
	00 00 00	 movsd	 xmm0, QWORD PTR __real@bff8000000000000
  00202	f2 0f 11 85 dc
	fe ff ff	 movsd	 QWORD PTR tv161[ebp], xmm0
  0020a	eb 60		 jmp	 SHORT $LN46@draw_apach
$LN45@draw_apach:
  0020c	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_flight_dynamics@@3PAUDYNAMICS_TYPE@@A ; current_flight_dynamics
  00212	f3 0f 5a 81 5c
	24 00 00	 cvtss2sd xmm0, DWORD PTR [ecx+9308]
  0021a	f2 0f 5c 05 00
	00 00 00	 subsd	 xmm0, QWORD PTR __real@3ff0000000000000
  00222	66 0f 2f 05 00
	00 00 00	 comisd	 xmm0, QWORD PTR __real@4014000000000000
  0022a	76 12		 jbe	 SHORT $LN43@draw_apach
  0022c	f2 0f 10 05 00
	00 00 00	 movsd	 xmm0, QWORD PTR __real@4014000000000000
  00234	f2 0f 11 85 d4
	fe ff ff	 movsd	 QWORD PTR tv160[ebp], xmm0
  0023c	eb 1e		 jmp	 SHORT $LN44@draw_apach
$LN43@draw_apach:
  0023e	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?current_flight_dynamics@@3PAUDYNAMICS_TYPE@@A ; current_flight_dynamics
  00244	f3 0f 5a 82 5c
	24 00 00	 cvtss2sd xmm0, DWORD PTR [edx+9308]
  0024c	f2 0f 5c 05 00
	00 00 00	 subsd	 xmm0, QWORD PTR __real@3ff0000000000000
  00254	f2 0f 11 85 d4
	fe ff ff	 movsd	 QWORD PTR tv160[ebp], xmm0
$LN44@draw_apach:
  0025c	f2 0f 10 85 d4
	fe ff ff	 movsd	 xmm0, QWORD PTR tv160[ebp]
  00264	f2 0f 11 85 dc
	fe ff ff	 movsd	 QWORD PTR tv161[ebp], xmm0
$LN46@draw_apach:
  0026c	f2 0f 10 85 dc
	fe ff ff	 movsd	 xmm0, QWORD PTR tv161[ebp]
  00274	f2 0f 59 05 00
	00 00 00	 mulsd	 xmm0, QWORD PTR __real@3f9999999999999a
  0027c	f3 0f 5a 0d 00
	00 00 00	 cvtss2sd xmm1, DWORD PTR ?command_line_g_force_head_movment_modifier@@3MA
  00284	f2 0f 59 c1	 mulsd	 xmm0, xmm1
  00288	f3 0f 5a 4d f8	 cvtss2sd xmm1, DWORD PTR _vp_position$[ebp+4]
  0028d	f2 0f 58 c8	 addsd	 xmm1, xmm0
  00291	f2 0f 5a c1	 cvtsd2ss xmm0, xmm1
  00295	f3 0f 11 45 f8	 movss	 DWORD PTR _vp_position$[ebp+4], xmm0
$LN9@draw_apach:

; 1767 : 
; 1768 : 			get_local_entity_attitude_matrix (get_gunship_entity (), vp.attitude);

  0029a	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?gunship_entity@@3PAUENTITY@@A, 0 ; gunship_entity
  002a1	74 0f		 je	 SHORT $LN47@draw_apach
  002a3	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gunship_entity@@3PAUENTITY@@A ; gunship_entity
  002a8	8b 08		 mov	 ecx, DWORD PTR [eax]
  002aa	89 8d e0 fe ff
	ff		 mov	 DWORD PTR tv174[ebp], ecx
  002b0	eb 24		 jmp	 SHORT $LN48@draw_apach
$LN47@draw_apach:
  002b2	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??draw_apache_external_virtual_cockpit@@YGXIPAE@Z@4JA
  002b8	83 c2 42	 add	 edx, 66			; 00000042H
  002bb	52		 push	 edx
  002bc	68 00 00 00 00	 push	 OFFSET ??_C@_0FA@DHMOLMNF@c?3?2users?2nhv90?2projects?2eech?2ap@
  002c1	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  002c6	50		 push	 eax
  002c7	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  002cc	c7 85 e0 fe ff
	ff 00 00 00 00	 mov	 DWORD PTR tv174[ebp], 0
$LN48@draw_apach:
  002d6	8d 4d 88	 lea	 ecx, DWORD PTR _vp$[ebp+12]
  002d9	51		 push	 ecx
  002da	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gunship_entity@@3PAUENTITY@@A ; gunship_entity
  002e0	52		 push	 edx
  002e1	8b 85 e0 fe ff
	ff		 mov	 eax, DWORD PTR tv174[ebp]
  002e7	8b 0c 85 00 00
	00 00		 mov	 ecx, DWORD PTR ?fn_get_local_entity_attitude_matrix@@3PAP6GXPAUENTITY@@QAY02M@ZA[eax*4]
  002ee	ff d1		 call	 ecx

; 1769 : 			get_3d_transformation_matrix(head_rotation, pilot_head_heading, -pilot_head_pitch, 0.0);

  002f0	51		 push	 ecx
  002f1	0f 57 c0	 xorps	 xmm0, xmm0
  002f4	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  002f9	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR ?pilot_head_pitch@@3MA
  00301	0f 57 05 00 00
	00 00		 xorps	 xmm0, DWORD PTR __xmm@80000000800000008000000080000000
  00308	51		 push	 ecx
  00309	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  0030e	51		 push	 ecx
  0030f	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR ?pilot_head_heading@@3MA
  00317	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  0031c	8d 45 ac	 lea	 eax, DWORD PTR _head_rotation$[ebp]
  0031f	50		 push	 eax
  00320	e8 00 00 00 00	 call	 ?get_3d_transformation_matrix@@YGXQAY02MMMM@Z ; get_3d_transformation_matrix

; 1770 : 
; 1771 : 			multiply_matrix3x3_vec3d(&vp_cockpit_world_position, head_rotation, &vp_position);

  00325	8d 45 f4	 lea	 eax, DWORD PTR _vp_position$[ebp]
  00328	50		 push	 eax
  00329	8d 4d ac	 lea	 ecx, DWORD PTR _head_rotation$[ebp]
  0032c	51		 push	 ecx
  0032d	8d 55 e8	 lea	 edx, DWORD PTR _vp_cockpit_world_position$[ebp]
  00330	52		 push	 edx
  00331	e8 00 00 00 00	 call	 ?multiply_matrix3x3_vec3d@@YGXPAUVEC3D@@QAY02$$CBMPBU1@@Z ; multiply_matrix3x3_vec3d

; 1772 : 
; 1773 : 			vp.x = vp_cockpit_world_position.x;

  00336	f3 0f 10 45 e8	 movss	 xmm0, DWORD PTR _vp_cockpit_world_position$[ebp]
  0033b	f3 0f 11 85 7c
	ff ff ff	 movss	 DWORD PTR _vp$[ebp], xmm0

; 1774 : 			vp.y = vp_cockpit_world_position.y;

  00343	f3 0f 10 45 ec	 movss	 xmm0, DWORD PTR _vp_cockpit_world_position$[ebp+4]
  00348	f3 0f 11 45 80	 movss	 DWORD PTR _vp$[ebp+4], xmm0

; 1775 : 			vp.z = vp_cockpit_world_position.z;

  0034d	f3 0f 10 45 f0	 movss	 xmm0, DWORD PTR _vp_cockpit_world_position$[ebp+8]
  00352	f3 0f 11 45 84	 movss	 DWORD PTR _vp$[ebp+8], xmm0
$LN7@draw_apach:

; 1776 : 		}
; 1777 : 	}
; 1778 : 
; 1779 : 	////////////////////////////////////////
; 1780 : 	//
; 1781 : 	// draw 3D scene without lighting
; 1782 : 	//
; 1783 : 	////////////////////////////////////////
; 1784 : 
; 1785 : 	if (flags & (VIRTUAL_COCKPIT_MAIN_ROTOR | VIRTUAL_COCKPIT_STOWED_WIPER | VIRTUAL_COCKPIT_MOVING_WIPER))

  00357	8b 45 08	 mov	 eax, DWORD PTR _flags$[ebp]
  0035a	25 00 d0 00 00	 and	 eax, 53248		; 0000d000H
  0035f	0f 84 16 03 00
	00		 je	 $LN11@draw_apach

; 1786 : 	{
; 1787 : 		set_3d_active_environment (main_3d_env);

  00365	a1 00 00 00 00	 mov	 eax, DWORD PTR ?main_3d_env@@3PAUENV_3D@@A ; main_3d_env
  0036a	50		 push	 eax
  0036b	e8 00 00 00 00	 call	 ?set_3d_active_environment@@YGXPAUENV_3D@@@Z ; set_3d_active_environment

; 1788 : 
; 1789 : //VJ 050108 wideview x coord used to clip apache cockpit
; 1790 : 		set_3d_view_distances (main_3d_env, 10.0+clipx, 0.1, 1.0, 0.0);

  00370	51		 push	 ecx
  00371	0f 57 c0	 xorps	 xmm0, xmm0
  00374	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00379	51		 push	 ecx
  0037a	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3f800000
  00382	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00387	51		 push	 ecx
  00388	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3dcccccd
  00390	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00395	f3 0f 5a 05 00
	00 00 00	 cvtss2sd xmm0, DWORD PTR ?clipx@@3MA
  0039d	f2 0f 58 05 00
	00 00 00	 addsd	 xmm0, QWORD PTR __real@4024000000000000
  003a5	f2 0f 5a c0	 cvtsd2ss xmm0, xmm0
  003a9	51		 push	 ecx
  003aa	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  003af	a1 00 00 00 00	 mov	 eax, DWORD PTR ?main_3d_env@@3PAUENV_3D@@A ; main_3d_env
  003b4	50		 push	 eax
  003b5	e8 00 00 00 00	 call	 ?set_3d_view_distances@@YGXPAUENV_3D@@MMMM@Z ; set_3d_view_distances

; 1791 : 
; 1792 : 		realise_3d_clip_extents (main_3d_env);

  003ba	a1 00 00 00 00	 mov	 eax, DWORD PTR ?main_3d_env@@3PAUENV_3D@@A ; main_3d_env
  003bf	50		 push	 eax
  003c0	e8 00 00 00 00	 call	 ?realise_3d_clip_extents@@YGXPAUENV_3D@@@Z ; realise_3d_clip_extents

; 1793 : 
; 1794 : 		recalculate_3d_environment_settings (main_3d_env);

  003c5	a1 00 00 00 00	 mov	 eax, DWORD PTR ?main_3d_env@@3PAUENV_3D@@A ; main_3d_env
  003ca	50		 push	 eax
  003cb	e8 00 00 00 00	 call	 ?recalculate_3d_environment_settings@@YGXPAUENV_3D@@@Z ; recalculate_3d_environment_settings

; 1795 : 
; 1796 : 		clear_zbuffer_screen ();

  003d0	e8 00 00 00 00	 call	 ?clear_zbuffer_screen@@YGXXZ ; clear_zbuffer_screen

; 1797 : 
; 1798 : 		if (begin_3d_scene ())

  003d5	e8 00 00 00 00	 call	 ?begin_3d_scene@@YGHXZ	; begin_3d_scene
  003da	85 c0		 test	 eax, eax
  003dc	0f 84 99 02 00
	00		 je	 $LN11@draw_apach

; 1799 : 		{
; 1800 : 			//
; 1801 : 			// main rotor
; 1802 : 			//
; 1803 : 
; 1804 : 			if (flags & VIRTUAL_COCKPIT_MAIN_ROTOR)

  003e2	8b 45 08	 mov	 eax, DWORD PTR _flags$[ebp]
  003e5	25 00 10 00 00	 and	 eax, 4096		; 00001000H
  003ea	0f 84 dd 01 00
	00		 je	 $LN13@draw_apach

; 1805 : 			{
; 1806 : 				if (!(get_helicopter_main_rotors_blurred (get_gunship_entity ()) && (!get_global_blurred_main_rotors_visible_from_cockpit ())))

  003f0	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gunship_entity@@3PAUENTITY@@A ; gunship_entity
  003f5	50		 push	 eax
  003f6	e8 00 00 00 00	 call	 ?get_helicopter_main_rotors_blurred@@YGHPAUENTITY@@@Z ; get_helicopter_main_rotors_blurred
  003fb	85 c0		 test	 eax, eax
  003fd	74 0d		 je	 SHORT $LN14@draw_apach
  003ff	83 3d 1c 00 00
	00 00		 cmp	 DWORD PTR ?global_options@@3UGLOBAL_OPTIONS_DATA@@A+28, 0
  00406	0f 84 c1 01 00
	00		 je	 $LN13@draw_apach
$LN14@draw_apach:

; 1807 : 				{
; 1808 : 					if (get_local_entity_int_value (get_gunship_entity (), INT_TYPE_MAIN_ROTOR_DAMAGED))

  0040c	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?gunship_entity@@3PAUENTITY@@A, 0 ; gunship_entity
  00413	74 0f		 je	 SHORT $LN49@draw_apach
  00415	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gunship_entity@@3PAUENTITY@@A ; gunship_entity
  0041a	8b 08		 mov	 ecx, DWORD PTR [eax]
  0041c	89 8d e0 fe ff
	ff		 mov	 DWORD PTR tv213[ebp], ecx
  00422	eb 20		 jmp	 SHORT $LN50@draw_apach
$LN49@draw_apach:
  00424	68 10 07 00 00	 push	 1808			; 00000710H
  00429	68 00 00 00 00	 push	 OFFSET ??_C@_0FA@DHMOLMNF@c?3?2users?2nhv90?2projects?2eech?2ap@
  0042e	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  00434	52		 push	 edx
  00435	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  0043a	c7 85 e0 fe ff
	ff 00 00 00 00	 mov	 DWORD PTR tv213[ebp], 0
$LN50@draw_apach:
  00444	b8 01 00 00 00	 mov	 eax, 1
  00449	85 c0		 test	 eax, eax
  0044b	74 0c		 je	 SHORT $LN51@draw_apach
  0044d	c7 85 dc fe ff
	ff 81 00 00 00	 mov	 DWORD PTR tv220[ebp], 129 ; 00000081H
  00457	eb 20		 jmp	 SHORT $LN52@draw_apach
$LN51@draw_apach:
  00459	68 10 07 00 00	 push	 1808			; 00000710H
  0045e	68 00 00 00 00	 push	 OFFSET ??_C@_0FA@DHMOLMNF@c?3?2users?2nhv90?2projects?2eech?2ap@
  00463	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?overload_invalid_int_type_message@@3PBDB ; overload_invalid_int_type_message
  00469	51		 push	 ecx
  0046a	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  0046f	c7 85 dc fe ff
	ff 00 00 00 00	 mov	 DWORD PTR tv220[ebp], 0
$LN52@draw_apach:
  00479	68 81 00 00 00	 push	 129			; 00000081H
  0047e	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gunship_entity@@3PAUENTITY@@A ; gunship_entity
  00484	52		 push	 edx
  00485	69 85 e0 fe ff
	ff 5c 04 00 00	 imul	 eax, DWORD PTR tv213[ebp], 1116
  0048f	8b 8d dc fe ff
	ff		 mov	 ecx, DWORD PTR tv220[ebp]
  00495	8b 94 88 00 00
	00 00		 mov	 edx, DWORD PTR ?fn_get_local_entity_int_value@@3PAY0BBH@P6GHPAUENTITY@@W4INT_TYPES@@@ZA[eax+ecx*4]
  0049c	ff d2		 call	 edx
  0049e	85 c0		 test	 eax, eax
  004a0	74 0f		 je	 SHORT $LN15@draw_apach

; 1809 : 					{
; 1810 : 						animate_damaged_helicopter_main_rotors (get_gunship_entity (), TRUE);

  004a2	6a 01		 push	 1
  004a4	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gunship_entity@@3PAUENTITY@@A ; gunship_entity
  004a9	50		 push	 eax
  004aa	e8 00 00 00 00	 call	 ?animate_damaged_helicopter_main_rotors@@YGXPAUENTITY@@H@Z ; animate_damaged_helicopter_main_rotors

; 1811 : 					}
; 1812 : 					else

  004af	eb 0f		 jmp	 SHORT $LN16@draw_apach
$LN15@draw_apach:

; 1813 : 					{
; 1814 : 						animate_helicopter_main_rotors (get_gunship_entity (), TRUE, FALSE);

  004b1	6a 00		 push	 0
  004b3	6a 01		 push	 1
  004b5	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gunship_entity@@3PAUENTITY@@A ; gunship_entity
  004ba	50		 push	 eax
  004bb	e8 00 00 00 00	 call	 ?animate_helicopter_main_rotors@@YGXPAUENTITY@@HH@Z ; animate_helicopter_main_rotors
$LN16@draw_apach:

; 1815 : 					}
; 1816 : 
; 1817 : 					inst3d = (object_3d_instance *) get_local_entity_ptr_value (get_gunship_entity (), PTR_TYPE_INSTANCE_3D_OBJECT);

  004c0	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?gunship_entity@@3PAUENTITY@@A, 0 ; gunship_entity
  004c7	74 0f		 je	 SHORT $LN53@draw_apach
  004c9	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gunship_entity@@3PAUENTITY@@A ; gunship_entity
  004ce	8b 08		 mov	 ecx, DWORD PTR [eax]
  004d0	89 8d e0 fe ff
	ff		 mov	 DWORD PTR tv238[ebp], ecx
  004d6	eb 24		 jmp	 SHORT $LN54@draw_apach
$LN53@draw_apach:
  004d8	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??draw_apache_external_virtual_cockpit@@YGXIPAE@Z@4JA
  004de	83 c2 73	 add	 edx, 115		; 00000073H
  004e1	52		 push	 edx
  004e2	68 00 00 00 00	 push	 OFFSET ??_C@_0FA@DHMOLMNF@c?3?2users?2nhv90?2projects?2eech?2ap@
  004e7	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  004ec	50		 push	 eax
  004ed	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  004f2	c7 85 e0 fe ff
	ff 00 00 00 00	 mov	 DWORD PTR tv238[ebp], 0
$LN54@draw_apach:
  004fc	b9 01 00 00 00	 mov	 ecx, 1
  00501	85 c9		 test	 ecx, ecx
  00503	74 0c		 je	 SHORT $LN55@draw_apach
  00505	c7 85 dc fe ff
	ff 02 00 00 00	 mov	 DWORD PTR tv246[ebp], 2
  0050f	eb 24		 jmp	 SHORT $LN56@draw_apach
$LN55@draw_apach:
  00511	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??draw_apache_external_virtual_cockpit@@YGXIPAE@Z@4JA
  00517	83 c2 73	 add	 edx, 115		; 00000073H
  0051a	52		 push	 edx
  0051b	68 00 00 00 00	 push	 OFFSET ??_C@_0FA@DHMOLMNF@c?3?2users?2nhv90?2projects?2eech?2ap@
  00520	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_ptr_type_message@@3PBDB ; overload_invalid_ptr_type_message
  00525	50		 push	 eax
  00526	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  0052b	c7 85 dc fe ff
	ff 00 00 00 00	 mov	 DWORD PTR tv246[ebp], 0
$LN56@draw_apach:
  00535	6a 02		 push	 2
  00537	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gunship_entity@@3PAUENTITY@@A ; gunship_entity
  0053d	51		 push	 ecx
  0053e	6b 95 e0 fe ff
	ff 50		 imul	 edx, DWORD PTR tv238[ebp], 80
  00545	8b 85 dc fe ff
	ff		 mov	 eax, DWORD PTR tv246[ebp]
  0054b	8b 8c 82 00 00
	00 00		 mov	 ecx, DWORD PTR ?fn_get_local_entity_ptr_value@@3PAY0BE@P6GPAXPAUENTITY@@W4PTR_TYPES@@@ZA[edx+eax*4]
  00552	ff d1		 call	 ecx
  00554	89 85 3c ff ff
	ff		 mov	 DWORD PTR _inst3d$[ebp], eax

; 1818 : 
; 1819 : 					theta = get_rotation_angle_of_helicopter_main_rotors (inst3d);

  0055a	8b 85 3c ff ff
	ff		 mov	 eax, DWORD PTR _inst3d$[ebp]
  00560	50		 push	 eax
  00561	e8 00 00 00 00	 call	 ?get_rotation_angle_of_helicopter_main_rotors@@YGMPAUOBJECT_3D_INSTANCE@@@Z ; get_rotation_angle_of_helicopter_main_rotors
  00566	d9 9d 40 ff ff
	ff		 fstp	 DWORD PTR _theta$[ebp]

; 1820 : 
; 1821 : 					set_rotation_angle_of_helicopter_main_rotors (virtual_cockpit_main_rotor_inst3d, theta);

  0056c	51		 push	 ecx
  0056d	f3 0f 10 85 40
	ff ff ff	 movss	 xmm0, DWORD PTR _theta$[ebp]
  00575	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  0057a	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_main_rotor_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  0057f	50		 push	 eax
  00580	e8 00 00 00 00	 call	 ?set_rotation_angle_of_helicopter_main_rotors@@YGXPAUOBJECT_3D_INSTANCE@@M@Z ; set_rotation_angle_of_helicopter_main_rotors

; 1822 : 
; 1823 : 					animate_helicopter_virtual_cockpit_main_rotors (get_gunship_entity (), virtual_cockpit_main_rotor_inst3d);

  00585	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_main_rotor_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  0058a	50		 push	 eax
  0058b	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?gunship_entity@@3PAUENTITY@@A ; gunship_entity
  00591	51		 push	 ecx
  00592	e8 00 00 00 00	 call	 ?animate_helicopter_virtual_cockpit_main_rotors@@YGXPAUENTITY@@PAUOBJECT_3D_INSTANCE@@@Z ; animate_helicopter_virtual_cockpit_main_rotors

; 1824 : 
; 1825 : 					virtual_cockpit_main_rotor_inst3d->vp = vp;

  00597	8b 3d 00 00 00
	00		 mov	 edi, DWORD PTR ?virtual_cockpit_main_rotor_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  0059d	83 c7 08	 add	 edi, 8
  005a0	b9 0c 00 00 00	 mov	 ecx, 12			; 0000000cH
  005a5	8d b5 7c ff ff
	ff		 lea	 esi, DWORD PTR _vp$[ebp]
  005ab	f3 a5		 rep movsd

; 1826 : 
; 1827 : 					insert_relative_object_into_3d_scene (OBJECT_3D_DRAW_TYPE_ZBUFFERED_OBJECT, &virtual_cockpit_main_rotor_inst3d->vp.position, virtual_cockpit_main_rotor_inst3d);

  005ad	51		 push	 ecx
  005ae	0f 57 c0	 xorps	 xmm0, xmm0
  005b1	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  005b6	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_main_rotor_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  005bb	50		 push	 eax
  005bc	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?virtual_cockpit_main_rotor_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  005c2	83 c1 08	 add	 ecx, 8
  005c5	51		 push	 ecx
  005c6	6a 02		 push	 2
  005c8	e8 00 00 00 00	 call	 ?insert_zbiased_relative_object_into_3d_scene@@YGXW4OBJECT_3D_DRAWING_TYPES@@PAUVEC3D@@PAXM@Z ; insert_zbiased_relative_object_into_3d_scene
$LN13@draw_apach:

; 1828 : 				}
; 1829 : 			}
; 1830 : 
; 1831 : 			// nose
; 1832 : 
; 1833 : 			if (custom_3d_models.arneh_ah64d_cockpit)

  005cd	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?custom_3d_models@@3Uinstalled_custom_3d_models@@A, 0
  005d4	74 64		 je	 SHORT $LN17@draw_apach

; 1834 : 			{
; 1835 : 				ASSERT(virtual_cockpit_nose_inst3d);

  005d6	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?virtual_cockpit_nose_inst3d@@3PAUOBJECT_3D_INSTANCE@@A, 0
  005dd	75 1a		 jne	 SHORT $LN18@draw_apach
  005df	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??draw_apache_external_virtual_cockpit@@YGXIPAE@Z@4JA
  005e4	05 85 00 00 00	 add	 eax, 133		; 00000085H
  005e9	50		 push	 eax
  005ea	68 00 00 00 00	 push	 OFFSET ??_C@_0FA@DHMOLMNF@c?3?2users?2nhv90?2projects?2eech?2ap@
  005ef	68 00 00 00 00	 push	 OFFSET ??_C@_0BM@NCGEHGDE@virtual_cockpit_nose_inst3d@
  005f4	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN18@draw_apach:

; 1836 : 				animate_pnvs(virtual_cockpit_nose_inst3d);

  005f9	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_nose_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  005fe	50		 push	 eax
  005ff	e8 00 00 00 00	 call	 ?animate_pnvs@@YGXPAUOBJECT_3D_INSTANCE@@@Z ; animate_pnvs

; 1837 : 				virtual_cockpit_nose_inst3d->vp = vp;

  00604	8b 3d 00 00 00
	00		 mov	 edi, DWORD PTR ?virtual_cockpit_nose_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  0060a	83 c7 08	 add	 edi, 8
  0060d	b9 0c 00 00 00	 mov	 ecx, 12			; 0000000cH
  00612	8d b5 7c ff ff
	ff		 lea	 esi, DWORD PTR _vp$[ebp]
  00618	f3 a5		 rep movsd

; 1838 : 				insert_relative_object_into_3d_scene (OBJECT_3D_DRAW_TYPE_ZBUFFERED_OBJECT, &virtual_cockpit_nose_inst3d->vp.position, virtual_cockpit_nose_inst3d);

  0061a	51		 push	 ecx
  0061b	0f 57 c0	 xorps	 xmm0, xmm0
  0061e	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00623	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_nose_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  00628	50		 push	 eax
  00629	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?virtual_cockpit_nose_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  0062f	83 c1 08	 add	 ecx, 8
  00632	51		 push	 ecx
  00633	6a 02		 push	 2
  00635	e8 00 00 00 00	 call	 ?insert_zbiased_relative_object_into_3d_scene@@YGXW4OBJECT_3D_DRAWING_TYPES@@PAUVEC3D@@PAXM@Z ; insert_zbiased_relative_object_into_3d_scene
$LN17@draw_apach:

; 1839 : 			}
; 1840 : 
; 1841 : 			//
; 1842 : 			// wiper
; 1843 : 			//
; 1844 : 
; 1845 : 			if (wiper_mode == WIPER_MODE_STOWED)

  0063a	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?wiper_mode@@3W4WIPER_MODES@@A, 0 ; wiper_mode
  00641	75 18		 jne	 SHORT $LN19@draw_apach

; 1846 : 			{
; 1847 : 				if (flags & VIRTUAL_COCKPIT_STOWED_WIPER)

  00643	8b 45 08	 mov	 eax, DWORD PTR _flags$[ebp]
  00646	25 00 40 00 00	 and	 eax, 16384		; 00004000H
  0064b	74 0c		 je	 SHORT $LN21@draw_apach

; 1848 : 				{
; 1849 : 					draw_apache_virtual_cockpit_wiper (&vp);

  0064d	8d 85 7c ff ff
	ff		 lea	 eax, DWORD PTR _vp$[ebp]
  00653	50		 push	 eax
  00654	e8 00 00 00 00	 call	 ?draw_apache_virtual_cockpit_wiper@@YGXPAUVIEWPOINT@@@Z ; draw_apache_virtual_cockpit_wiper
$LN21@draw_apach:

; 1850 : 				}
; 1851 : 			}
; 1852 : 			else

  00659	eb 16		 jmp	 SHORT $LN22@draw_apach
$LN19@draw_apach:

; 1853 : 			{
; 1854 : 				if (flags & VIRTUAL_COCKPIT_MOVING_WIPER)

  0065b	8b 45 08	 mov	 eax, DWORD PTR _flags$[ebp]
  0065e	25 00 80 00 00	 and	 eax, 32768		; 00008000H
  00663	74 0c		 je	 SHORT $LN22@draw_apach

; 1855 : 				{
; 1856 : 					draw_apache_virtual_cockpit_wiper (&vp);

  00665	8d 85 7c ff ff
	ff		 lea	 eax, DWORD PTR _vp$[ebp]
  0066b	50		 push	 eax
  0066c	e8 00 00 00 00	 call	 ?draw_apache_virtual_cockpit_wiper@@YGXPAUVIEWPOINT@@@Z ; draw_apache_virtual_cockpit_wiper
$LN22@draw_apach:

; 1857 : 				}
; 1858 : 			}
; 1859 : 
; 1860 : 			draw_3d_scene ();

  00671	e8 00 00 00 00	 call	 ?draw_3d_scene@@YGXXZ	; draw_3d_scene

; 1861 : 
; 1862 : 			end_3d_scene ();

  00676	e8 00 00 00 00	 call	 ?end_3d_scene@@YGXXZ	; end_3d_scene
$LN11@draw_apach:

; 1863 : 		}
; 1864 : 	}
; 1865 : 
; 1866 : 	////////////////////////////////////////
; 1867 : 	//
; 1868 : 	// draw 3D scene with lighting
; 1869 : 	//
; 1870 : 	////////////////////////////////////////
; 1871 : 
; 1872 : 	if (!custom_3d_models.arneh_ah64d_cockpit && (flags & (VIRTUAL_COCKPIT_COMPASS | VIRTUAL_COCKPIT_ADI | VIRTUAL_COCKPIT_LARGE_ADI)))

  0067b	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?custom_3d_models@@3Uinstalled_custom_3d_models@@A, 0
  00682	0f 85 73 03 00
	00		 jne	 $LN23@draw_apach
  00688	8b 45 08	 mov	 eax, DWORD PTR _flags$[ebp]
  0068b	25 80 05 00 00	 and	 eax, 1408		; 00000580H
  00690	0f 84 65 03 00
	00		 je	 $LN23@draw_apach

; 1873 : 	{
; 1874 : 		set_cockpit_lighting (vp.attitude);

  00696	8d 45 88	 lea	 eax, DWORD PTR _vp$[ebp+12]
  00699	50		 push	 eax
  0069a	e8 00 00 00 00	 call	 ?set_cockpit_lighting@@YGXQAY02M@Z ; set_cockpit_lighting

; 1875 : 
; 1876 : 		set_3d_active_environment (main_3d_single_light_env);

  0069f	a1 00 00 00 00	 mov	 eax, DWORD PTR ?main_3d_single_light_env@@3PAUENV_3D@@A ; main_3d_single_light_env
  006a4	50		 push	 eax
  006a5	e8 00 00 00 00	 call	 ?set_3d_active_environment@@YGXPAUENV_3D@@@Z ; set_3d_active_environment

; 1877 : 
; 1878 : 		set_3d_view_distances (main_3d_single_light_env, 10.0, 0.1, 1.0, 0.0);

  006aa	51		 push	 ecx
  006ab	0f 57 c0	 xorps	 xmm0, xmm0
  006ae	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  006b3	51		 push	 ecx
  006b4	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3f800000
  006bc	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  006c1	51		 push	 ecx
  006c2	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3dcccccd
  006ca	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  006cf	51		 push	 ecx
  006d0	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@41200000
  006d8	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  006dd	a1 00 00 00 00	 mov	 eax, DWORD PTR ?main_3d_single_light_env@@3PAUENV_3D@@A ; main_3d_single_light_env
  006e2	50		 push	 eax
  006e3	e8 00 00 00 00	 call	 ?set_3d_view_distances@@YGXPAUENV_3D@@MMMM@Z ; set_3d_view_distances

; 1879 : 
; 1880 : 		realise_3d_clip_extents (main_3d_single_light_env);

  006e8	a1 00 00 00 00	 mov	 eax, DWORD PTR ?main_3d_single_light_env@@3PAUENV_3D@@A ; main_3d_single_light_env
  006ed	50		 push	 eax
  006ee	e8 00 00 00 00	 call	 ?realise_3d_clip_extents@@YGXPAUENV_3D@@@Z ; realise_3d_clip_extents

; 1881 : 
; 1882 : 		clear_zbuffer_screen ();

  006f3	e8 00 00 00 00	 call	 ?clear_zbuffer_screen@@YGXXZ ; clear_zbuffer_screen

; 1883 : 
; 1884 : 		if (begin_3d_scene ())

  006f8	e8 00 00 00 00	 call	 ?begin_3d_scene@@YGHXZ	; begin_3d_scene
  006fd	85 c0		 test	 eax, eax
  006ff	0f 84 d5 02 00
	00		 je	 $LN24@draw_apach

; 1885 : 		{
; 1886 : 			//
; 1887 : 			// compass
; 1888 : 			//
; 1889 : 
; 1890 : 
; 1891 : 			vp_current_position = vp_position;

  00705	8b 45 f4	 mov	 eax, DWORD PTR _vp_position$[ebp]
  00708	89 45 dc	 mov	 DWORD PTR _vp_current_position$[ebp], eax
  0070b	8b 4d f8	 mov	 ecx, DWORD PTR _vp_position$[ebp+4]
  0070e	89 4d e0	 mov	 DWORD PTR _vp_current_position$[ebp+4], ecx
  00711	8b 55 fc	 mov	 edx, DWORD PTR _vp_position$[ebp+8]
  00714	89 55 e4	 mov	 DWORD PTR _vp_current_position$[ebp+8], edx

; 1892 : 
; 1893 : /*			if (get_global_wide_cockpit ())
; 1894 : 			{
; 1895 : 				vp_current_position.x += -0.018 + dx;
; 1896 : 				vp_current_position.y += 0.019 + dy;
; 1897 : 				vp_current_position.z += -0.049 + dz;
; 1898 : 			}
; 1899 : 			else */
; 1900 : 			{
; 1901 : 				vp_current_position.x += 0.003;

  00717	f3 0f 5a 45 dc	 cvtss2sd xmm0, DWORD PTR _vp_current_position$[ebp]
  0071c	f2 0f 58 05 00
	00 00 00	 addsd	 xmm0, QWORD PTR __real@3f689374bc6a7efa
  00724	f2 0f 5a c0	 cvtsd2ss xmm0, xmm0
  00728	f3 0f 11 45 dc	 movss	 DWORD PTR _vp_current_position$[ebp], xmm0

; 1902 : 				vp_current_position.y += 0.000;

  0072d	f3 0f 5a 45 e0	 cvtss2sd xmm0, DWORD PTR _vp_current_position$[ebp+4]
  00732	f2 0f 58 05 00
	00 00 00	 addsd	 xmm0, QWORD PTR __real@0000000000000000
  0073a	f2 0f 5a c0	 cvtsd2ss xmm0, xmm0
  0073e	f3 0f 11 45 e0	 movss	 DWORD PTR _vp_current_position$[ebp+4], xmm0

; 1903 : 				vp_current_position.z += -0.003;

  00743	f3 0f 5a 45 e4	 cvtss2sd xmm0, DWORD PTR _vp_current_position$[ebp+8]
  00748	f2 0f 58 05 00
	00 00 00	 addsd	 xmm0, QWORD PTR __real@bf689374bc6a7efa
  00750	f2 0f 5a c0	 cvtsd2ss xmm0, xmm0
  00754	f3 0f 11 45 e4	 movss	 DWORD PTR _vp_current_position$[ebp+8], xmm0

; 1904 : 			}
; 1905 : 
; 1906 : 			multiply_matrix3x3_vec3d(&vp_world_position, head_rotation, &vp_current_position);

  00759	8d 45 dc	 lea	 eax, DWORD PTR _vp_current_position$[ebp]
  0075c	50		 push	 eax
  0075d	8d 4d ac	 lea	 ecx, DWORD PTR _head_rotation$[ebp]
  00760	51		 push	 ecx
  00761	8d 55 d0	 lea	 edx, DWORD PTR _vp_world_position$[ebp]
  00764	52		 push	 edx
  00765	e8 00 00 00 00	 call	 ?multiply_matrix3x3_vec3d@@YGXPAUVEC3D@@QAY02$$CBMPBU1@@Z ; multiply_matrix3x3_vec3d

; 1907 : 
; 1908 : 			vp.x = vp_world_position.x;

  0076a	f3 0f 10 45 d0	 movss	 xmm0, DWORD PTR _vp_world_position$[ebp]
  0076f	f3 0f 11 85 7c
	ff ff ff	 movss	 DWORD PTR _vp$[ebp], xmm0

; 1909 : 			vp.y = vp_world_position.y;

  00777	f3 0f 10 45 d4	 movss	 xmm0, DWORD PTR _vp_world_position$[ebp+4]
  0077c	f3 0f 11 45 80	 movss	 DWORD PTR _vp$[ebp+4], xmm0

; 1910 : 			vp.z = vp_world_position.z;

  00781	f3 0f 10 45 d8	 movss	 xmm0, DWORD PTR _vp_world_position$[ebp+8]
  00786	f3 0f 11 45 84	 movss	 DWORD PTR _vp$[ebp+8], xmm0

; 1911 : 
; 1912 : 			if (flags & VIRTUAL_COCKPIT_COMPASS)

  0078b	8b 45 08	 mov	 eax, DWORD PTR _flags$[ebp]
  0078e	25 00 04 00 00	 and	 eax, 1024		; 00000400H
  00793	0f 84 85 00 00
	00		 je	 $LN25@draw_apach

; 1913 : 			{
; 1914 : 				search.search_depth = 0;

  00799	c7 85 4c ff ff
	ff 00 00 00 00	 mov	 DWORD PTR _search$[ebp+8], 0

; 1915 : 				search.search_object = virtual_cockpit_compass_inst3d;

  007a3	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_compass_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  007a8	89 85 44 ff ff
	ff		 mov	 DWORD PTR _search$[ebp], eax

; 1916 : 				search.sub_object_index = OBJECT_3D_SUB_OBJECT_APACHE_VIRTUAL_COCKPIT_COMPASS_HEADING_NULL;

  007ae	c7 85 50 ff ff
	ff 6e 00 00 00	 mov	 DWORD PTR _search$[ebp+12], 110 ; 0000006eH

; 1917 : 
; 1918 : 				if (find_object_3d_sub_object (&search) == SUB_OBJECT_SEARCH_RESULT_OBJECT_FOUND)

  007b8	8d 85 44 ff ff
	ff		 lea	 eax, DWORD PTR _search$[ebp]
  007be	50		 push	 eax
  007bf	e8 00 00 00 00	 call	 ?find_object_3d_sub_object@@YG?AW4SUB_OBJECT_SEARCH_RESULT_TYPES@@PAUOBJECT_3D_SUB_OBJECT_SEARCH_DATA@@@Z ; find_object_3d_sub_object
  007c4	83 f8 01	 cmp	 eax, 1
  007c7	75 1f		 jne	 SHORT $LN26@draw_apach

; 1919 : 				{
; 1920 : 					search.result_sub_object->relative_heading = -current_flight_dynamics->heading.value;

  007c9	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_flight_dynamics@@3PAUDYNAMICS_TYPE@@A ; current_flight_dynamics
  007ce	f3 0f 10 80 8c
	21 00 00	 movss	 xmm0, DWORD PTR [eax+8588]
  007d6	0f 57 05 00 00
	00 00		 xorps	 xmm0, DWORD PTR __xmm@80000000800000008000000080000000
  007dd	8b 8d 48 ff ff
	ff		 mov	 ecx, DWORD PTR _search$[ebp+4]
  007e3	f3 0f 11 41 18	 movss	 DWORD PTR [ecx+24], xmm0
$LN26@draw_apach:

; 1921 : 				}
; 1922 : 
; 1923 : 				virtual_cockpit_compass_inst3d->vp = vp;

  007e8	8b 3d 00 00 00
	00		 mov	 edi, DWORD PTR ?virtual_cockpit_compass_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  007ee	83 c7 08	 add	 edi, 8
  007f1	b9 0c 00 00 00	 mov	 ecx, 12			; 0000000cH
  007f6	8d b5 7c ff ff
	ff		 lea	 esi, DWORD PTR _vp$[ebp]
  007fc	f3 a5		 rep movsd

; 1924 : 
; 1925 : 				insert_relative_object_into_3d_scene (OBJECT_3D_DRAW_TYPE_ZBUFFERED_OBJECT, &virtual_cockpit_compass_inst3d->vp.position, virtual_cockpit_compass_inst3d);

  007fe	51		 push	 ecx
  007ff	0f 57 c0	 xorps	 xmm0, xmm0
  00802	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00807	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_compass_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  0080c	50		 push	 eax
  0080d	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?virtual_cockpit_compass_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  00813	83 c1 08	 add	 ecx, 8
  00816	51		 push	 ecx
  00817	6a 02		 push	 2
  00819	e8 00 00 00 00	 call	 ?insert_zbiased_relative_object_into_3d_scene@@YGXW4OBJECT_3D_DRAWING_TYPES@@PAUVEC3D@@PAXM@Z ; insert_zbiased_relative_object_into_3d_scene
$LN25@draw_apach:

; 1926 : 			}
; 1927 : 
; 1928 : 			//
; 1929 : 			// ADI
; 1930 : 			//
; 1931 : 
; 1932 : 			if (flags & VIRTUAL_COCKPIT_ADI)

  0081e	8b 45 08	 mov	 eax, DWORD PTR _flags$[ebp]
  00821	25 80 00 00 00	 and	 eax, 128		; 00000080H
  00826	0f 84 cb 00 00
	00		 je	 $LN27@draw_apach

; 1933 : 			{
; 1934 : 				search.search_depth = 0;

  0082c	c7 85 4c ff ff
	ff 00 00 00 00	 mov	 DWORD PTR _search$[ebp+8], 0

; 1935 : 				search.search_object = virtual_cockpit_adi_inst3d;

  00836	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_adi_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  0083b	89 85 44 ff ff
	ff		 mov	 DWORD PTR _search$[ebp], eax

; 1936 : 				search.sub_object_index = OBJECT_3D_SUB_OBJECT_APACHE_VIRTUAL_COCKPIT_ADI;

  00841	c7 85 50 ff ff
	ff 6c 00 00 00	 mov	 DWORD PTR _search$[ebp+12], 108 ; 0000006cH

; 1937 : 
; 1938 : 				if (find_object_3d_sub_object (&search) == SUB_OBJECT_SEARCH_RESULT_OBJECT_FOUND)

  0084b	8d 85 44 ff ff
	ff		 lea	 eax, DWORD PTR _search$[ebp]
  00851	50		 push	 eax
  00852	e8 00 00 00 00	 call	 ?find_object_3d_sub_object@@YG?AW4SUB_OBJECT_SEARCH_RESULT_TYPES@@PAUOBJECT_3D_SUB_OBJECT_SEARCH_DATA@@@Z ; find_object_3d_sub_object
  00857	83 f8 01	 cmp	 eax, 1
  0085a	75 65		 jne	 SHORT $LN28@draw_apach

; 1939 : 				{
; 1940 : 					float
; 1941 : 						heading,
; 1942 : 						pitch,
; 1943 : 						roll;
; 1944 : 
; 1945 : 					get_apache_virtual_cockpit_adi_angles (vp.attitude, &heading, &pitch, &roll);

  0085c	8d 85 30 ff ff
	ff		 lea	 eax, DWORD PTR _roll$4[ebp]
  00862	50		 push	 eax
  00863	8d 8d 34 ff ff
	ff		 lea	 ecx, DWORD PTR _pitch$5[ebp]
  00869	51		 push	 ecx
  0086a	8d 95 38 ff ff
	ff		 lea	 edx, DWORD PTR _heading$6[ebp]
  00870	52		 push	 edx
  00871	8d 45 88	 lea	 eax, DWORD PTR _vp$[ebp+12]
  00874	50		 push	 eax
  00875	e8 00 00 00 00	 call	 ?get_apache_virtual_cockpit_adi_angles@@YGXQAY02MPAM11@Z ; get_apache_virtual_cockpit_adi_angles

; 1946 : 
; 1947 : 					search.result_sub_object->relative_heading = -heading;

  0087a	f3 0f 10 85 38
	ff ff ff	 movss	 xmm0, DWORD PTR _heading$6[ebp]
  00882	0f 57 05 00 00
	00 00		 xorps	 xmm0, DWORD PTR __xmm@80000000800000008000000080000000
  00889	8b 85 48 ff ff
	ff		 mov	 eax, DWORD PTR _search$[ebp+4]
  0088f	f3 0f 11 40 18	 movss	 DWORD PTR [eax+24], xmm0

; 1948 : 
; 1949 : 					search.result_sub_object->relative_pitch = pitch;

  00894	8b 85 48 ff ff
	ff		 mov	 eax, DWORD PTR _search$[ebp+4]
  0089a	f3 0f 10 85 34
	ff ff ff	 movss	 xmm0, DWORD PTR _pitch$5[ebp]
  008a2	f3 0f 11 40 1c	 movss	 DWORD PTR [eax+28], xmm0

; 1950 : 
; 1951 : 					search.result_sub_object->relative_roll = -roll;

  008a7	f3 0f 10 85 30
	ff ff ff	 movss	 xmm0, DWORD PTR _roll$4[ebp]
  008af	0f 57 05 00 00
	00 00		 xorps	 xmm0, DWORD PTR __xmm@80000000800000008000000080000000
  008b6	8b 85 48 ff ff
	ff		 mov	 eax, DWORD PTR _search$[ebp+4]
  008bc	f3 0f 11 40 20	 movss	 DWORD PTR [eax+32], xmm0
$LN28@draw_apach:

; 1952 : 				}
; 1953 : 
; 1954 : 				virtual_cockpit_adi_inst3d->vp = vp;

  008c1	8b 3d 00 00 00
	00		 mov	 edi, DWORD PTR ?virtual_cockpit_adi_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  008c7	83 c7 08	 add	 edi, 8
  008ca	b9 0c 00 00 00	 mov	 ecx, 12			; 0000000cH
  008cf	8d b5 7c ff ff
	ff		 lea	 esi, DWORD PTR _vp$[ebp]
  008d5	f3 a5		 rep movsd

; 1955 : 
; 1956 : 				insert_relative_object_into_3d_scene (OBJECT_3D_DRAW_TYPE_ZBUFFERED_OBJECT, &virtual_cockpit_adi_inst3d->vp.position, virtual_cockpit_adi_inst3d);

  008d7	51		 push	 ecx
  008d8	0f 57 c0	 xorps	 xmm0, xmm0
  008db	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  008e0	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_adi_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  008e5	50		 push	 eax
  008e6	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?virtual_cockpit_adi_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  008ec	83 c1 08	 add	 ecx, 8
  008ef	51		 push	 ecx
  008f0	6a 02		 push	 2
  008f2	e8 00 00 00 00	 call	 ?insert_zbiased_relative_object_into_3d_scene@@YGXW4OBJECT_3D_DRAWING_TYPES@@PAUVEC3D@@PAXM@Z ; insert_zbiased_relative_object_into_3d_scene
$LN27@draw_apach:

; 1957 : 			}
; 1958 : 
; 1959 : 			//
; 1960 : 			// large ADI
; 1961 : 			//
; 1962 : 
; 1963 : 			if (flags & VIRTUAL_COCKPIT_LARGE_ADI)

  008f7	8b 45 08	 mov	 eax, DWORD PTR _flags$[ebp]
  008fa	25 00 01 00 00	 and	 eax, 256		; 00000100H
  008ff	0f 84 cb 00 00
	00		 je	 $LN29@draw_apach

; 1964 : 			{
; 1965 : 				search.search_depth = 0;

  00905	c7 85 4c ff ff
	ff 00 00 00 00	 mov	 DWORD PTR _search$[ebp+8], 0

; 1966 : 				search.search_object = virtual_cockpit_large_adi_inst3d;

  0090f	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_large_adi_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  00914	89 85 44 ff ff
	ff		 mov	 DWORD PTR _search$[ebp], eax

; 1967 : 				search.sub_object_index = OBJECT_3D_SUB_OBJECT_APACHE_VIRTUAL_COCKPIT_ADI;

  0091a	c7 85 50 ff ff
	ff 6c 00 00 00	 mov	 DWORD PTR _search$[ebp+12], 108 ; 0000006cH

; 1968 : 
; 1969 : 				if (find_object_3d_sub_object (&search) == SUB_OBJECT_SEARCH_RESULT_OBJECT_FOUND)

  00924	8d 85 44 ff ff
	ff		 lea	 eax, DWORD PTR _search$[ebp]
  0092a	50		 push	 eax
  0092b	e8 00 00 00 00	 call	 ?find_object_3d_sub_object@@YG?AW4SUB_OBJECT_SEARCH_RESULT_TYPES@@PAUOBJECT_3D_SUB_OBJECT_SEARCH_DATA@@@Z ; find_object_3d_sub_object
  00930	83 f8 01	 cmp	 eax, 1
  00933	75 65		 jne	 SHORT $LN30@draw_apach

; 1970 : 				{
; 1971 : 					float
; 1972 : 						heading,
; 1973 : 						pitch,
; 1974 : 						roll;
; 1975 : 
; 1976 : 					get_apache_virtual_cockpit_adi_angles (vp.attitude, &heading, &pitch, &roll);

  00935	8d 85 24 ff ff
	ff		 lea	 eax, DWORD PTR _roll$1[ebp]
  0093b	50		 push	 eax
  0093c	8d 8d 28 ff ff
	ff		 lea	 ecx, DWORD PTR _pitch$2[ebp]
  00942	51		 push	 ecx
  00943	8d 95 2c ff ff
	ff		 lea	 edx, DWORD PTR _heading$3[ebp]
  00949	52		 push	 edx
  0094a	8d 45 88	 lea	 eax, DWORD PTR _vp$[ebp+12]
  0094d	50		 push	 eax
  0094e	e8 00 00 00 00	 call	 ?get_apache_virtual_cockpit_adi_angles@@YGXQAY02MPAM11@Z ; get_apache_virtual_cockpit_adi_angles

; 1977 : 
; 1978 : 					search.result_sub_object->relative_heading = -heading;

  00953	f3 0f 10 85 2c
	ff ff ff	 movss	 xmm0, DWORD PTR _heading$3[ebp]
  0095b	0f 57 05 00 00
	00 00		 xorps	 xmm0, DWORD PTR __xmm@80000000800000008000000080000000
  00962	8b 85 48 ff ff
	ff		 mov	 eax, DWORD PTR _search$[ebp+4]
  00968	f3 0f 11 40 18	 movss	 DWORD PTR [eax+24], xmm0

; 1979 : 
; 1980 : 					search.result_sub_object->relative_pitch = pitch;

  0096d	8b 85 48 ff ff
	ff		 mov	 eax, DWORD PTR _search$[ebp+4]
  00973	f3 0f 10 85 28
	ff ff ff	 movss	 xmm0, DWORD PTR _pitch$2[ebp]
  0097b	f3 0f 11 40 1c	 movss	 DWORD PTR [eax+28], xmm0

; 1981 : 
; 1982 : 					search.result_sub_object->relative_roll = -roll;

  00980	f3 0f 10 85 24
	ff ff ff	 movss	 xmm0, DWORD PTR _roll$1[ebp]
  00988	0f 57 05 00 00
	00 00		 xorps	 xmm0, DWORD PTR __xmm@80000000800000008000000080000000
  0098f	8b 85 48 ff ff
	ff		 mov	 eax, DWORD PTR _search$[ebp+4]
  00995	f3 0f 11 40 20	 movss	 DWORD PTR [eax+32], xmm0
$LN30@draw_apach:

; 1983 : 				}
; 1984 : 
; 1985 : 				virtual_cockpit_large_adi_inst3d->vp = vp;

  0099a	8b 3d 00 00 00
	00		 mov	 edi, DWORD PTR ?virtual_cockpit_large_adi_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  009a0	83 c7 08	 add	 edi, 8
  009a3	b9 0c 00 00 00	 mov	 ecx, 12			; 0000000cH
  009a8	8d b5 7c ff ff
	ff		 lea	 esi, DWORD PTR _vp$[ebp]
  009ae	f3 a5		 rep movsd

; 1986 : 
; 1987 : 				insert_relative_object_into_3d_scene (OBJECT_3D_DRAW_TYPE_ZBUFFERED_OBJECT, &virtual_cockpit_large_adi_inst3d->vp.position, virtual_cockpit_large_adi_inst3d);

  009b0	51		 push	 ecx
  009b1	0f 57 c0	 xorps	 xmm0, xmm0
  009b4	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  009b9	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_large_adi_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  009be	50		 push	 eax
  009bf	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?virtual_cockpit_large_adi_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  009c5	83 c1 08	 add	 ecx, 8
  009c8	51		 push	 ecx
  009c9	6a 02		 push	 2
  009cb	e8 00 00 00 00	 call	 ?insert_zbiased_relative_object_into_3d_scene@@YGXW4OBJECT_3D_DRAWING_TYPES@@PAUVEC3D@@PAXM@Z ; insert_zbiased_relative_object_into_3d_scene
$LN29@draw_apach:

; 1988 : 			}
; 1989 : 
; 1990 : 			draw_3d_scene ();

  009d0	e8 00 00 00 00	 call	 ?draw_3d_scene@@YGXXZ	; draw_3d_scene

; 1991 : 
; 1992 : 			end_3d_scene ();

  009d5	e8 00 00 00 00	 call	 ?end_3d_scene@@YGXXZ	; end_3d_scene
$LN24@draw_apach:

; 1993 : 		}
; 1994 : 
; 1995 : 		vp.x = vp_cockpit_world_position.x;

  009da	f3 0f 10 45 e8	 movss	 xmm0, DWORD PTR _vp_cockpit_world_position$[ebp]
  009df	f3 0f 11 85 7c
	ff ff ff	 movss	 DWORD PTR _vp$[ebp], xmm0

; 1996 : 		vp.y = vp_cockpit_world_position.y;

  009e7	f3 0f 10 45 ec	 movss	 xmm0, DWORD PTR _vp_cockpit_world_position$[ebp+4]
  009ec	f3 0f 11 45 80	 movss	 DWORD PTR _vp$[ebp+4], xmm0

; 1997 : 		vp.z = vp_cockpit_world_position.z;

  009f1	f3 0f 10 45 f0	 movss	 xmm0, DWORD PTR _vp_cockpit_world_position$[ebp+8]
  009f6	f3 0f 11 45 84	 movss	 DWORD PTR _vp$[ebp+8], xmm0
$LN23@draw_apach:

; 1998 : 	}
; 1999 : 
; 2000 : 	////////////////////////////////////////
; 2001 : 	//
; 2002 : 	// rendered wiper
; 2003 : 	//
; 2004 : 	////////////////////////////////////////
; 2005 : 
; 2006 : 	if (flags & VIRTUAL_COCKPIT_RENDERED_WIPER)

  009fb	8b 45 08	 mov	 eax, DWORD PTR _flags$[ebp]
  009fe	25 00 20 00 00	 and	 eax, 8192		; 00002000H
  00a03	74 59		 je	 SHORT $LN34@draw_apach

; 2007 : 	{
; 2008 : 		if (wiper_mode == WIPER_MODE_STOWED)

  00a05	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?wiper_mode@@3W4WIPER_MODES@@A, 0 ; wiper_mode
  00a0c	75 50		 jne	 SHORT $LN34@draw_apach

; 2009 : 		{
; 2010 : 			ASSERT (wiper_rle_graphic);

  00a0e	83 7d 0c 00	 cmp	 DWORD PTR _wiper_rle_graphic$[ebp], 0
  00a12	75 1a		 jne	 SHORT $LN33@draw_apach
  00a14	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??draw_apache_external_virtual_cockpit@@YGXIPAE@Z@4JA
  00a19	05 34 01 00 00	 add	 eax, 308		; 00000134H
  00a1e	50		 push	 eax
  00a1f	68 00 00 00 00	 push	 OFFSET ??_C@_0FA@DHMOLMNF@c?3?2users?2nhv90?2projects?2eech?2ap@
  00a24	68 00 00 00 00	 push	 OFFSET ??_C@_0BC@ENKILJCA@wiper_rle_graphic@
  00a29	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN33@draw_apach:

; 2011 : 
; 2012 : 			if (lock_screen (active_screen))

  00a2e	a1 00 00 00 00	 mov	 eax, DWORD PTR ?active_screen@@3PAUSCREEN@@A ; active_screen
  00a33	50		 push	 eax
  00a34	e8 00 00 00 00	 call	 ?lock_screen@@YGHPAUSCREEN@@@Z ; lock_screen
  00a39	85 c0		 test	 eax, eax
  00a3b	74 21		 je	 SHORT $LN34@draw_apach

; 2013 : 			{
; 2014 : 				blit_rle_graphic (wiper_rle_graphic, ix_640_480, iy_640_480);

  00a3d	a1 00 00 00 00	 mov	 eax, DWORD PTR ?iy_640_480@@3HA ; iy_640_480
  00a42	50		 push	 eax
  00a43	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ix_640_480@@3HA ; ix_640_480
  00a49	51		 push	 ecx
  00a4a	8b 55 0c	 mov	 edx, DWORD PTR _wiper_rle_graphic$[ebp]
  00a4d	52		 push	 edx
  00a4e	e8 00 00 00 00	 call	 ?blit_rle_graphic@@YGXPBEHH@Z ; blit_rle_graphic

; 2015 : 
; 2016 : 				unlock_screen (active_screen);

  00a53	a1 00 00 00 00	 mov	 eax, DWORD PTR ?active_screen@@3PAUSCREEN@@A ; active_screen
  00a58	50		 push	 eax
  00a59	e8 00 00 00 00	 call	 ?unlock_screen@@YGHPAUSCREEN@@@Z ; unlock_screen
$LN34@draw_apach:

; 2017 : 			}
; 2018 : 		}
; 2019 : 	}
; 2020 : 
; 2021 : 	////////////////////////////////////////
; 2022 : 	//
; 2023 : 	// rain effect
; 2024 : 	//
; 2025 : 	////////////////////////////////////////
; 2026 : 
; 2027 : 	if (flags & VIRTUAL_COCKPIT_RAIN_EFFECT)

  00a5e	8b 45 08	 mov	 eax, DWORD PTR _flags$[ebp]
  00a61	25 00 00 01 00	 and	 eax, 65536		; 00010000H
  00a66	0f 84 90 00 00
	00		 je	 $LN37@draw_apach

; 2028 : 	{
; 2029 : 		if (rain_mode != RAIN_MODE_DRY)

  00a6c	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?rain_mode@@3W4RAIN_MODES@@A, 0 ; rain_mode
  00a73	0f 84 83 00 00
	00		 je	 $LN37@draw_apach

; 2030 : 		{
; 2031 : 			set_3d_active_environment (main_3d_env);

  00a79	a1 00 00 00 00	 mov	 eax, DWORD PTR ?main_3d_env@@3PAUENV_3D@@A ; main_3d_env
  00a7e	50		 push	 eax
  00a7f	e8 00 00 00 00	 call	 ?set_3d_active_environment@@YGXPAUENV_3D@@@Z ; set_3d_active_environment

; 2032 : 
; 2033 : 			set_3d_view_distances (main_3d_env, 10.0, 0.1, 1.0, 0.0);

  00a84	51		 push	 ecx
  00a85	0f 57 c0	 xorps	 xmm0, xmm0
  00a88	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00a8d	51		 push	 ecx
  00a8e	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3f800000
  00a96	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00a9b	51		 push	 ecx
  00a9c	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3dcccccd
  00aa4	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00aa9	51		 push	 ecx
  00aaa	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@41200000
  00ab2	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00ab7	a1 00 00 00 00	 mov	 eax, DWORD PTR ?main_3d_env@@3PAUENV_3D@@A ; main_3d_env
  00abc	50		 push	 eax
  00abd	e8 00 00 00 00	 call	 ?set_3d_view_distances@@YGXPAUENV_3D@@MMMM@Z ; set_3d_view_distances

; 2034 : 
; 2035 : 			realise_3d_clip_extents (main_3d_env);

  00ac2	a1 00 00 00 00	 mov	 eax, DWORD PTR ?main_3d_env@@3PAUENV_3D@@A ; main_3d_env
  00ac7	50		 push	 eax
  00ac8	e8 00 00 00 00	 call	 ?realise_3d_clip_extents@@YGXPAUENV_3D@@@Z ; realise_3d_clip_extents

; 2036 : 
; 2037 : 			recalculate_3d_environment_settings (main_3d_env);

  00acd	a1 00 00 00 00	 mov	 eax, DWORD PTR ?main_3d_env@@3PAUENV_3D@@A ; main_3d_env
  00ad2	50		 push	 eax
  00ad3	e8 00 00 00 00	 call	 ?recalculate_3d_environment_settings@@YGXPAUENV_3D@@@Z ; recalculate_3d_environment_settings

; 2038 : 
; 2039 : 			clear_zbuffer_screen ();

  00ad8	e8 00 00 00 00	 call	 ?clear_zbuffer_screen@@YGXXZ ; clear_zbuffer_screen

; 2040 : 
; 2041 : 			if (begin_3d_scene ())

  00add	e8 00 00 00 00	 call	 ?begin_3d_scene@@YGHXZ	; begin_3d_scene
  00ae2	85 c0		 test	 eax, eax
  00ae4	74 16		 je	 SHORT $LN37@draw_apach

; 2042 : 			{
; 2043 : 				draw_apache_virtual_cockpit_rain_effect (&vp);

  00ae6	8d 85 7c ff ff
	ff		 lea	 eax, DWORD PTR _vp$[ebp]
  00aec	50		 push	 eax
  00aed	e8 00 00 00 00	 call	 ?draw_apache_virtual_cockpit_rain_effect@@YGXPAUVIEWPOINT@@@Z ; draw_apache_virtual_cockpit_rain_effect

; 2044 : 
; 2045 : 				draw_3d_scene ();

  00af2	e8 00 00 00 00	 call	 ?draw_3d_scene@@YGXXZ	; draw_3d_scene

; 2046 : 
; 2047 : 				end_3d_scene ();

  00af7	e8 00 00 00 00	 call	 ?end_3d_scene@@YGXXZ	; end_3d_scene
$LN37@draw_apach:

; 2048 : 			}
; 2049 : 		}
; 2050 : 	}
; 2051 : 
; 2052 : 	////////////////////////////////////////
; 2053 : 	//
; 2054 : 	// tidy up
; 2055 : 	//
; 2056 : 	////////////////////////////////////////
; 2057 : 
; 2058 : 	#if RECOGNITION_GUIDE
; 2059 : 
; 2060 : 	set_3d_view_distances (main_3d_env, 10000.0, 100.0, 1.0, 0.0);
; 2061 : 
; 2062 : 	#else
; 2063 : 
; 2064 : 	set_3d_view_distances (main_3d_env, 10000.0, 1.0, 1.0, 0.0);

  00afc	51		 push	 ecx
  00afd	0f 57 c0	 xorps	 xmm0, xmm0
  00b00	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00b05	51		 push	 ecx
  00b06	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3f800000
  00b0e	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00b13	51		 push	 ecx
  00b14	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3f800000
  00b1c	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00b21	51		 push	 ecx
  00b22	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@461c4000
  00b2a	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00b2f	a1 00 00 00 00	 mov	 eax, DWORD PTR ?main_3d_env@@3PAUENV_3D@@A ; main_3d_env
  00b34	50		 push	 eax
  00b35	e8 00 00 00 00	 call	 ?set_3d_view_distances@@YGXPAUENV_3D@@MMMM@Z ; set_3d_view_distances

; 2065 : 
; 2066 : 	#endif
; 2067 : 
; 2068 : 	realise_3d_clip_extents (main_3d_env);

  00b3a	a1 00 00 00 00	 mov	 eax, DWORD PTR ?main_3d_env@@3PAUENV_3D@@A ; main_3d_env
  00b3f	50		 push	 eax
  00b40	e8 00 00 00 00	 call	 ?realise_3d_clip_extents@@YGXPAUENV_3D@@@Z ; realise_3d_clip_extents

; 2069 : }

  00b45	5f		 pop	 edi
  00b46	5e		 pop	 esi
  00b47	5b		 pop	 ebx
  00b48	8b e5		 mov	 esp, ebp
  00b4a	5d		 pop	 ebp
  00b4b	c2 08 00	 ret	 8
?draw_apache_external_virtual_cockpit@@YGXIPAE@Z ENDP	; draw_apache_external_virtual_cockpit
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\gunships\cockpits\apache\ap_vckpt.c
;	COMDAT ?draw_apache_internal_virtual_cockpit@@YGXI@Z
_TEXT	SEGMENT
tv162 = -296						; size = 8
tv140 = -296						; size = 8
tv660 = -292						; size = 4
tv242 = -292						; size = 4
tv654 = -288						; size = 4
tv236 = -288						; size = 4
tv163 = -288						; size = 8
tv141 = -288						; size = 8
tv647 = -284						; size = 4
tv422 = -284						; size = 4
tv409 = -284						; size = 4
tv399 = -284						; size = 4
tv229 = -284						; size = 4
tv176 = -284						; size = 4
_seconds$1 = -216					; size = 4
_minutes$2 = -212					; size = 4
_hours$3 = -208						; size = 4
_roll$4 = -204						; size = 4
_pitch$5 = -200						; size = 4
_heading$6 = -196					; size = 4
_virtual_cockpit_inst3d$ = -192				; size = 4
_search$ = -188						; size = 56
_vp_cockpit_world_position$ = -132			; size = 12
_vp_world_position$ = -120				; size = 12
_vp_current_position$ = -108				; size = 12
_vp_position$ = -96					; size = 12
_vp$ = -84						; size = 48
_head_rotation$ = -36					; size = 36
_flags$ = 8						; size = 4
?draw_apache_internal_virtual_cockpit@@YGXI@Z PROC	; draw_apache_internal_virtual_cockpit, COMDAT

; 877  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec 28 01 00
	00		 sub	 esp, 296		; 00000128H
  00009	53		 push	 ebx
  0000a	56		 push	 esi
  0000b	57		 push	 edi

; 878  : 	matrix3x3
; 879  : 		head_rotation;
; 880  : 
; 881  : 	viewpoint
; 882  : 		vp;
; 883  : 
; 884  : 	vec3d
; 885  : 		vp_position,
; 886  : 		vp_current_position,
; 887  : 		vp_world_position,
; 888  : 		vp_cockpit_world_position;
; 889  : 
; 890  : 	object_3d_sub_object_search_data
; 891  : 		search;
; 892  : 
; 893  : 	object_3d_instance
; 894  : 		*virtual_cockpit_inst3d;
; 895  : 
; 896  : 	////////////////////////////////////////
; 897  : 	//
; 898  : 	// virtual cockpit viewpoint is placed at the main object origin
; 899  : 	//
; 900  : 	////////////////////////////////////////
; 901  : 
; 902  : 	if (custom_3d_models.arneh_ah64d_cockpit)

  0000c	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?custom_3d_models@@3Uinstalled_custom_3d_models@@A, 0
  00013	74 0e		 je	 SHORT $LN6@draw_apach

; 903  : 		get_apache_crew_viewpoint(&vp);

  00015	8d 45 ac	 lea	 eax, DWORD PTR _vp$[ebp]
  00018	50		 push	 eax
  00019	e8 00 00 00 00	 call	 ?get_apache_crew_viewpoint@@YGXPAUVIEWPOINT@@@Z ; get_apache_crew_viewpoint

; 904  : 	else

  0001e	e9 4f 03 00 00	 jmp	 $LN11@draw_apach
$LN6@draw_apach:

; 905  : 	{
; 906  : 		if (get_view_mode () == VIEW_MODE_COCKPIT_PANEL_SPECIAL_APACHE_LHS_MFD)

  00023	83 3d 00 00 00
	00 1c		 cmp	 DWORD PTR ?view_mode@@3W4VIEW_MODES@@A, 28 ; view_mode, 0000001cH
  0002a	75 10		 jne	 SHORT $LN8@draw_apach

; 907  : 		{
; 908  : 			get_display_viewpoint (VIEW_MODE_COCKPIT_PANEL_SPECIAL_APACHE_LHS_MFD, &vp);

  0002c	8d 45 ac	 lea	 eax, DWORD PTR _vp$[ebp]
  0002f	50		 push	 eax
  00030	6a 1c		 push	 28			; 0000001cH
  00032	e8 00 00 00 00	 call	 ?get_display_viewpoint@@YGXW4VIEW_MODES@@PAUVIEWPOINT@@@Z ; get_display_viewpoint
  00037	e9 36 03 00 00	 jmp	 $LN11@draw_apach
$LN8@draw_apach:

; 909  : 		}
; 910  : 		else if (get_view_mode () == VIEW_MODE_COCKPIT_PANEL_SPECIAL_APACHE_RHS_MFD)

  0003c	83 3d 00 00 00
	00 1d		 cmp	 DWORD PTR ?view_mode@@3W4VIEW_MODES@@A, 29 ; view_mode, 0000001dH
  00043	75 10		 jne	 SHORT $LN10@draw_apach

; 911  : 		{
; 912  : 			get_display_viewpoint (VIEW_MODE_COCKPIT_PANEL_SPECIAL_APACHE_RHS_MFD, &vp);

  00045	8d 45 ac	 lea	 eax, DWORD PTR _vp$[ebp]
  00048	50		 push	 eax
  00049	6a 1d		 push	 29			; 0000001dH
  0004b	e8 00 00 00 00	 call	 ?get_display_viewpoint@@YGXW4VIEW_MODES@@PAUVIEWPOINT@@@Z ; get_display_viewpoint

; 913  : 		}
; 914  : 		else

  00050	e9 1d 03 00 00	 jmp	 $LN11@draw_apach
$LN10@draw_apach:

; 915  : 		{
; 916  : 			vp_position.x = 0.0;

  00055	0f 57 c0	 xorps	 xmm0, xmm0
  00058	f3 0f 11 45 a0	 movss	 DWORD PTR _vp_position$[ebp], xmm0

; 917  : 			vp_position.y = 0.0;

  0005d	0f 57 c0	 xorps	 xmm0, xmm0
  00060	f3 0f 11 45 a4	 movss	 DWORD PTR _vp_position$[ebp+4], xmm0

; 918  : 			vp_position.z = 0.0;

  00065	0f 57 c0	 xorps	 xmm0, xmm0
  00068	f3 0f 11 45 a8	 movss	 DWORD PTR _vp_position$[ebp+8], xmm0

; 919  : 
; 920  : 	//VJ wideview mod, date: 18-mar-03
; 921  : 			if (get_global_wide_cockpit ())

  0006d	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?wide_cockpit@@3HA, 0 ; wide_cockpit
  00074	74 74		 je	 SHORT $LN13@draw_apach

; 922  : 			{
; 923  : 			   vp_position.x = wide_cockpit_position[wide_cockpit_nr].c.x;

  00076	6b 05 00 00 00
	00 24		 imul	 eax, DWORD PTR ?wide_cockpit_nr@@3HA, 36 ; wide_cockpit_nr
  0007d	f3 0f 10 80 14
	00 00 00	 movss	 xmm0, DWORD PTR ?wide_cockpit_position@@3PAUCOCKPIT_POSITION@@A[eax+20]
  00085	f3 0f 11 45 a0	 movss	 DWORD PTR _vp_position$[ebp], xmm0

; 924  : 			   vp_position.y = wide_cockpit_position[wide_cockpit_nr].c.y;

  0008a	6b 05 00 00 00
	00 24		 imul	 eax, DWORD PTR ?wide_cockpit_nr@@3HA, 36 ; wide_cockpit_nr
  00091	f3 0f 10 80 18
	00 00 00	 movss	 xmm0, DWORD PTR ?wide_cockpit_position@@3PAUCOCKPIT_POSITION@@A[eax+24]
  00099	f3 0f 11 45 a4	 movss	 DWORD PTR _vp_position$[ebp+4], xmm0

; 925  : 			   vp_position.z = wide_cockpit_position[wide_cockpit_nr].c.z;

  0009e	6b 05 00 00 00
	00 24		 imul	 eax, DWORD PTR ?wide_cockpit_nr@@3HA, 36 ; wide_cockpit_nr
  000a5	f3 0f 10 80 1c
	00 00 00	 movss	 xmm0, DWORD PTR ?wide_cockpit_position@@3PAUCOCKPIT_POSITION@@A[eax+28]
  000ad	f3 0f 11 45 a8	 movss	 DWORD PTR _vp_position$[ebp+8], xmm0

; 926  : 				//VJ 050207 included head pitch in fixed view setting
; 927  : 				pilot_head_pitch_datum = rad ( wide_cockpit_position[wide_cockpit_nr].c.p );

  000b2	6b 05 00 00 00
	00 24		 imul	 eax, DWORD PTR ?wide_cockpit_nr@@3HA, 36 ; wide_cockpit_nr
  000b9	f3 0f 10 80 20
	00 00 00	 movss	 xmm0, DWORD PTR ?wide_cockpit_position@@3PAUCOCKPIT_POSITION@@A[eax+32]
  000c1	f3 0f 59 05 00
	00 00 00	 mulss	 xmm0, DWORD PTR __real@3c8efa35
  000c9	f3 0f 11 05 00
	00 00 00	 movss	 DWORD PTR ?pilot_head_pitch_datum@@3MA, xmm0

; 928  : 				if (edit_wide_cockpit)

  000d1	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?edit_wide_cockpit@@3HA, 0 ; edit_wide_cockpit
  000d8	74 10		 je	 SHORT $LN13@draw_apach

; 929  : 					pilot_head_pitch = pilot_head_pitch_datum;

  000da	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR ?pilot_head_pitch_datum@@3MA
  000e2	f3 0f 11 05 00
	00 00 00	 movss	 DWORD PTR ?pilot_head_pitch@@3MA, xmm0
$LN13@draw_apach:

; 930  : 			}
; 931  : 
; 932  : 			vp_position.x += current_custom_cockpit_viewpoint.x;

  000ea	f3 0f 10 45 a0	 movss	 xmm0, DWORD PTR _vp_position$[ebp]
  000ef	f3 0f 58 05 00
	00 00 00	 addss	 xmm0, DWORD PTR ?current_custom_cockpit_viewpoint@@3UCOCKPIT_VIEW@@A
  000f7	f3 0f 11 45 a0	 movss	 DWORD PTR _vp_position$[ebp], xmm0

; 933  : 			vp_position.y += current_custom_cockpit_viewpoint.y;

  000fc	f3 0f 10 45 a4	 movss	 xmm0, DWORD PTR _vp_position$[ebp+4]
  00101	f3 0f 58 05 04
	00 00 00	 addss	 xmm0, DWORD PTR ?current_custom_cockpit_viewpoint@@3UCOCKPIT_VIEW@@A+4
  00109	f3 0f 11 45 a4	 movss	 DWORD PTR _vp_position$[ebp+4], xmm0

; 934  : 			vp_position.z += current_custom_cockpit_viewpoint.z;

  0010e	f3 0f 10 45 a8	 movss	 xmm0, DWORD PTR _vp_position$[ebp+8]
  00113	f3 0f 58 05 08
	00 00 00	 addss	 xmm0, DWORD PTR ?current_custom_cockpit_viewpoint@@3UCOCKPIT_VIEW@@A+8
  0011b	f3 0f 11 45 a8	 movss	 DWORD PTR _vp_position$[ebp+8], xmm0

; 935  : 
; 936  : 			vp_position.x += bound(current_flight_dynamics->model_acceleration_vector.x * ONE_OVER_G, -3.0, 3.0) * 0.025 * command_line_g_force_head_movment_modifier;

  00120	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_flight_dynamics@@3PAUDYNAMICS_TYPE@@A ; current_flight_dynamics
  00125	f3 0f 10 80 48
	1c 00 00	 movss	 xmm0, DWORD PTR [eax+7240]
  0012d	f3 0f 59 05 00
	00 00 00	 mulss	 xmm0, DWORD PTR __real@3dd0c43d
  00135	f3 0f 5a c0	 cvtss2sd xmm0, xmm0
  00139	f2 0f 10 0d 00
	00 00 00	 movsd	 xmm1, QWORD PTR __real@c008000000000000
  00141	66 0f 2f c8	 comisd	 xmm1, xmm0
  00145	76 12		 jbe	 SHORT $LN74@draw_apach
  00147	f2 0f 10 05 00
	00 00 00	 movsd	 xmm0, QWORD PTR __real@c008000000000000
  0014f	f2 0f 11 85 e0
	fe ff ff	 movsd	 QWORD PTR tv141[ebp], xmm0
  00157	eb 68		 jmp	 SHORT $LN75@draw_apach
$LN74@draw_apach:
  00159	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_flight_dynamics@@3PAUDYNAMICS_TYPE@@A ; current_flight_dynamics
  0015f	f3 0f 10 81 48
	1c 00 00	 movss	 xmm0, DWORD PTR [ecx+7240]
  00167	f3 0f 59 05 00
	00 00 00	 mulss	 xmm0, DWORD PTR __real@3dd0c43d
  0016f	f3 0f 5a c0	 cvtss2sd xmm0, xmm0
  00173	66 0f 2f 05 00
	00 00 00	 comisd	 xmm0, QWORD PTR __real@4008000000000000
  0017b	76 12		 jbe	 SHORT $LN72@draw_apach
  0017d	f2 0f 10 05 00
	00 00 00	 movsd	 xmm0, QWORD PTR __real@4008000000000000
  00185	f2 0f 11 85 d8
	fe ff ff	 movsd	 QWORD PTR tv140[ebp], xmm0
  0018d	eb 22		 jmp	 SHORT $LN73@draw_apach
$LN72@draw_apach:
  0018f	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?current_flight_dynamics@@3PAUDYNAMICS_TYPE@@A ; current_flight_dynamics
  00195	f3 0f 10 82 48
	1c 00 00	 movss	 xmm0, DWORD PTR [edx+7240]
  0019d	f3 0f 59 05 00
	00 00 00	 mulss	 xmm0, DWORD PTR __real@3dd0c43d
  001a5	f3 0f 5a c0	 cvtss2sd xmm0, xmm0
  001a9	f2 0f 11 85 d8
	fe ff ff	 movsd	 QWORD PTR tv140[ebp], xmm0
$LN73@draw_apach:
  001b1	f2 0f 10 85 d8
	fe ff ff	 movsd	 xmm0, QWORD PTR tv140[ebp]
  001b9	f2 0f 11 85 e0
	fe ff ff	 movsd	 QWORD PTR tv141[ebp], xmm0
$LN75@draw_apach:
  001c1	f2 0f 10 85 e0
	fe ff ff	 movsd	 xmm0, QWORD PTR tv141[ebp]
  001c9	f2 0f 59 05 00
	00 00 00	 mulsd	 xmm0, QWORD PTR __real@3f9999999999999a
  001d1	f3 0f 5a 0d 00
	00 00 00	 cvtss2sd xmm1, DWORD PTR ?command_line_g_force_head_movment_modifier@@3MA
  001d9	f2 0f 59 c1	 mulsd	 xmm0, xmm1
  001dd	f3 0f 5a 4d a0	 cvtss2sd xmm1, DWORD PTR _vp_position$[ebp]
  001e2	f2 0f 58 c8	 addsd	 xmm1, xmm0
  001e6	f2 0f 5a c1	 cvtsd2ss xmm0, xmm1
  001ea	f3 0f 11 45 a0	 movss	 DWORD PTR _vp_position$[ebp], xmm0

; 937  : 			//if (!current_flight_dynamics->auto_hover)   // arneh - auto hover has some weird dynamics which cause lots of g-forces, so disable head movement when auto hover is enabled
; 938  : 			vp_position.y += bound(current_flight_dynamics->g_force.value - 1.0, -1.5, 5.0) * 0.025 * command_line_g_force_head_movment_modifier;

  001ef	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_flight_dynamics@@3PAUDYNAMICS_TYPE@@A ; current_flight_dynamics
  001f4	f3 0f 5a 80 5c
	24 00 00	 cvtss2sd xmm0, DWORD PTR [eax+9308]
  001fc	f2 0f 5c 05 00
	00 00 00	 subsd	 xmm0, QWORD PTR __real@3ff0000000000000
  00204	f2 0f 10 0d 00
	00 00 00	 movsd	 xmm1, QWORD PTR __real@bff8000000000000
  0020c	66 0f 2f c8	 comisd	 xmm1, xmm0
  00210	76 12		 jbe	 SHORT $LN78@draw_apach
  00212	f2 0f 10 05 00
	00 00 00	 movsd	 xmm0, QWORD PTR __real@bff8000000000000
  0021a	f2 0f 11 85 e0
	fe ff ff	 movsd	 QWORD PTR tv163[ebp], xmm0
  00222	eb 60		 jmp	 SHORT $LN79@draw_apach
$LN78@draw_apach:
  00224	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_flight_dynamics@@3PAUDYNAMICS_TYPE@@A ; current_flight_dynamics
  0022a	f3 0f 5a 81 5c
	24 00 00	 cvtss2sd xmm0, DWORD PTR [ecx+9308]
  00232	f2 0f 5c 05 00
	00 00 00	 subsd	 xmm0, QWORD PTR __real@3ff0000000000000
  0023a	66 0f 2f 05 00
	00 00 00	 comisd	 xmm0, QWORD PTR __real@4014000000000000
  00242	76 12		 jbe	 SHORT $LN76@draw_apach
  00244	f2 0f 10 05 00
	00 00 00	 movsd	 xmm0, QWORD PTR __real@4014000000000000
  0024c	f2 0f 11 85 d8
	fe ff ff	 movsd	 QWORD PTR tv162[ebp], xmm0
  00254	eb 1e		 jmp	 SHORT $LN77@draw_apach
$LN76@draw_apach:
  00256	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?current_flight_dynamics@@3PAUDYNAMICS_TYPE@@A ; current_flight_dynamics
  0025c	f3 0f 5a 82 5c
	24 00 00	 cvtss2sd xmm0, DWORD PTR [edx+9308]
  00264	f2 0f 5c 05 00
	00 00 00	 subsd	 xmm0, QWORD PTR __real@3ff0000000000000
  0026c	f2 0f 11 85 d8
	fe ff ff	 movsd	 QWORD PTR tv162[ebp], xmm0
$LN77@draw_apach:
  00274	f2 0f 10 85 d8
	fe ff ff	 movsd	 xmm0, QWORD PTR tv162[ebp]
  0027c	f2 0f 11 85 e0
	fe ff ff	 movsd	 QWORD PTR tv163[ebp], xmm0
$LN79@draw_apach:
  00284	f2 0f 10 85 e0
	fe ff ff	 movsd	 xmm0, QWORD PTR tv163[ebp]
  0028c	f2 0f 59 05 00
	00 00 00	 mulsd	 xmm0, QWORD PTR __real@3f9999999999999a
  00294	f3 0f 5a 0d 00
	00 00 00	 cvtss2sd xmm1, DWORD PTR ?command_line_g_force_head_movment_modifier@@3MA
  0029c	f2 0f 59 c1	 mulsd	 xmm0, xmm1
  002a0	f3 0f 5a 4d a4	 cvtss2sd xmm1, DWORD PTR _vp_position$[ebp+4]
  002a5	f2 0f 58 c8	 addsd	 xmm1, xmm0
  002a9	f2 0f 5a c1	 cvtsd2ss xmm0, xmm1
  002ad	f3 0f 11 45 a4	 movss	 DWORD PTR _vp_position$[ebp+4], xmm0

; 939  : 
; 940  : 			get_local_entity_attitude_matrix (get_gunship_entity (), vp.attitude);

  002b2	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?gunship_entity@@3PAUENTITY@@A, 0 ; gunship_entity
  002b9	74 0f		 je	 SHORT $LN80@draw_apach
  002bb	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gunship_entity@@3PAUENTITY@@A ; gunship_entity
  002c0	8b 08		 mov	 ecx, DWORD PTR [eax]
  002c2	89 8d e4 fe ff
	ff		 mov	 DWORD PTR tv176[ebp], ecx
  002c8	eb 24		 jmp	 SHORT $LN81@draw_apach
$LN80@draw_apach:
  002ca	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??draw_apache_internal_virtual_cockpit@@YGXI@Z@4JA
  002d0	83 c2 3f	 add	 edx, 63			; 0000003fH
  002d3	52		 push	 edx
  002d4	68 00 00 00 00	 push	 OFFSET ??_C@_0FA@DHMOLMNF@c?3?2users?2nhv90?2projects?2eech?2ap@
  002d9	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  002de	50		 push	 eax
  002df	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  002e4	c7 85 e4 fe ff
	ff 00 00 00 00	 mov	 DWORD PTR tv176[ebp], 0
$LN81@draw_apach:
  002ee	8d 4d b8	 lea	 ecx, DWORD PTR _vp$[ebp+12]
  002f1	51		 push	 ecx
  002f2	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?gunship_entity@@3PAUENTITY@@A ; gunship_entity
  002f8	52		 push	 edx
  002f9	8b 85 e4 fe ff
	ff		 mov	 eax, DWORD PTR tv176[ebp]
  002ff	8b 0c 85 00 00
	00 00		 mov	 ecx, DWORD PTR ?fn_get_local_entity_attitude_matrix@@3PAP6GXPAUENTITY@@QAY02M@ZA[eax*4]
  00306	ff d1		 call	 ecx

; 941  : 			get_3d_transformation_matrix(head_rotation, pilot_head_heading, -pilot_head_pitch, 0.0);

  00308	51		 push	 ecx
  00309	0f 57 c0	 xorps	 xmm0, xmm0
  0030c	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00311	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR ?pilot_head_pitch@@3MA
  00319	0f 57 05 00 00
	00 00		 xorps	 xmm0, DWORD PTR __xmm@80000000800000008000000080000000
  00320	51		 push	 ecx
  00321	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00326	51		 push	 ecx
  00327	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR ?pilot_head_heading@@3MA
  0032f	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00334	8d 45 dc	 lea	 eax, DWORD PTR _head_rotation$[ebp]
  00337	50		 push	 eax
  00338	e8 00 00 00 00	 call	 ?get_3d_transformation_matrix@@YGXQAY02MMMM@Z ; get_3d_transformation_matrix

; 942  : 
; 943  : 			multiply_matrix3x3_vec3d(&vp_cockpit_world_position, head_rotation, &vp_position);

  0033d	8d 45 a0	 lea	 eax, DWORD PTR _vp_position$[ebp]
  00340	50		 push	 eax
  00341	8d 4d dc	 lea	 ecx, DWORD PTR _head_rotation$[ebp]
  00344	51		 push	 ecx
  00345	8d 95 7c ff ff
	ff		 lea	 edx, DWORD PTR _vp_cockpit_world_position$[ebp]
  0034b	52		 push	 edx
  0034c	e8 00 00 00 00	 call	 ?multiply_matrix3x3_vec3d@@YGXPAUVEC3D@@QAY02$$CBMPBU1@@Z ; multiply_matrix3x3_vec3d

; 944  : 
; 945  : 			vp.x = vp_cockpit_world_position.x;

  00351	f3 0f 10 85 7c
	ff ff ff	 movss	 xmm0, DWORD PTR _vp_cockpit_world_position$[ebp]
  00359	f3 0f 11 45 ac	 movss	 DWORD PTR _vp$[ebp], xmm0

; 946  : 			vp.y = vp_cockpit_world_position.y;

  0035e	f3 0f 10 45 80	 movss	 xmm0, DWORD PTR _vp_cockpit_world_position$[ebp+4]
  00363	f3 0f 11 45 b0	 movss	 DWORD PTR _vp$[ebp+4], xmm0

; 947  : 			vp.z = vp_cockpit_world_position.z;

  00368	f3 0f 10 45 84	 movss	 xmm0, DWORD PTR _vp_cockpit_world_position$[ebp+8]
  0036d	f3 0f 11 45 b4	 movss	 DWORD PTR _vp$[ebp+8], xmm0
$LN11@draw_apach:

; 948  : 		}
; 949  : 	}
; 950  : 
; 951  : 	////////////////////////////////////////
; 952  : 	//
; 953  : 	// render displays onto textures (before draw 3D scenes)
; 954  : 	//
; 955  : 	////////////////////////////////////////
; 956  : 
; 957  : 	if (flags & VIRTUAL_COCKPIT_UPFRONT_DISPLAY)

  00372	8b 45 08	 mov	 eax, DWORD PTR _flags$[ebp]
  00375	25 00 00 08 00	 and	 eax, 524288		; 00080000H
  0037a	74 05		 je	 SHORT $LN14@draw_apach

; 958  : 	{
; 959  : 		draw_apache_upfront_display_on_texture ();

  0037c	e8 00 00 00 00	 call	 ?draw_apache_upfront_display_on_texture@@YGXXZ ; draw_apache_upfront_display_on_texture
$LN14@draw_apach:

; 960  : 	}
; 961  : 
; 962  : 	if (flags & VIRTUAL_COCKPIT_INSTRUMENT_NEEDLES)

  00381	8b 45 08	 mov	 eax, DWORD PTR _flags$[ebp]
  00384	25 00 00 02 00	 and	 eax, 131072		; 00020000H
  00389	74 05		 je	 SHORT $LN15@draw_apach

; 963  : 		draw_apache_altitude_counter();

  0038b	e8 00 00 00 00	 call	 ?draw_apache_altitude_counter@@YGXXZ ; draw_apache_altitude_counter
$LN15@draw_apach:

; 964  : 
; 965  : 	if (flags & VIRTUAL_COCKPIT_PILOT_LHS_MFD_DISPLAY)

  00390	8b 45 08	 mov	 eax, DWORD PTR _flags$[ebp]
  00393	83 e0 20	 and	 eax, 32			; 00000020H
  00396	74 07		 je	 SHORT $LN16@draw_apach

; 966  : 	{
; 967  : 		draw_apache_mfd_on_texture (MFD_LOCATION_PILOT_LHS);

  00398	6a 00		 push	 0
  0039a	e8 00 00 00 00	 call	 ?draw_apache_mfd_on_texture@@YGXW4MFD_LOCATIONS@@@Z ; draw_apache_mfd_on_texture
$LN16@draw_apach:

; 968  : 	}
; 969  : 
; 970  : 	if (flags & VIRTUAL_COCKPIT_RHS_MFD_DISPLAY)

  0039f	8b 45 08	 mov	 eax, DWORD PTR _flags$[ebp]
  003a2	83 e0 40	 and	 eax, 64			; 00000040H
  003a5	74 07		 je	 SHORT $LN17@draw_apach

; 971  : 	{
; 972  : 		draw_apache_mfd_on_texture (MFD_LOCATION_PILOT_RHS);

  003a7	6a 01		 push	 1
  003a9	e8 00 00 00 00	 call	 ?draw_apache_mfd_on_texture@@YGXW4MFD_LOCATIONS@@@Z ; draw_apache_mfd_on_texture
$LN17@draw_apach:

; 973  : 	}
; 974  : 
; 975  : 	if (flags & VIRTUAL_COCKPIT_CPG_LHS_MFD_DISPLAY)

  003ae	8b 45 08	 mov	 eax, DWORD PTR _flags$[ebp]
  003b1	25 00 00 20 00	 and	 eax, 2097152		; 00200000H
  003b6	74 07		 je	 SHORT $LN18@draw_apach

; 976  : 	{
; 977  : 		draw_apache_mfd_on_texture (MFD_LOCATION_CPG_LHS);

  003b8	6a 02		 push	 2
  003ba	e8 00 00 00 00	 call	 ?draw_apache_mfd_on_texture@@YGXW4MFD_LOCATIONS@@@Z ; draw_apache_mfd_on_texture
$LN18@draw_apach:

; 978  : 	}
; 979  : 
; 980  : 	if (flags & VIRTUAL_COCKPIT_CPG_RHS_MFD_DISPLAY)

  003bf	8b 45 08	 mov	 eax, DWORD PTR _flags$[ebp]
  003c2	25 00 00 40 00	 and	 eax, 4194304		; 00400000H
  003c7	74 07		 je	 SHORT $LN19@draw_apach

; 981  : 	{
; 982  : 		draw_apache_mfd_on_texture (MFD_LOCATION_CPG_RHS);

  003c9	6a 03		 push	 3
  003cb	e8 00 00 00 00	 call	 ?draw_apache_mfd_on_texture@@YGXW4MFD_LOCATIONS@@@Z ; draw_apache_mfd_on_texture
$LN19@draw_apach:

; 983  : 	}
; 984  : 
; 985  : 	if (flags & VIRTUAL_COCKPIT_ORT_DISPLAY && d3d_can_render_to_texture)

  003d0	8b 45 08	 mov	 eax, DWORD PTR _flags$[ebp]
  003d3	25 00 00 80 00	 and	 eax, 8388608		; 00800000H
  003d8	74 10		 je	 SHORT $LN20@draw_apach
  003da	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?d3d_can_render_to_texture@@3HA, 0 ; d3d_can_render_to_texture
  003e1	74 07		 je	 SHORT $LN20@draw_apach

; 986  : 		draw_apache_mfd_on_texture (MFD_LOCATION_ORT);

  003e3	6a 04		 push	 4
  003e5	e8 00 00 00 00	 call	 ?draw_apache_mfd_on_texture@@YGXW4MFD_LOCATIONS@@@Z ; draw_apache_mfd_on_texture
$LN20@draw_apach:

; 987  : 
; 988  : 	////////////////////////////////////////
; 989  : 	//
; 990  : 	// draw 3D scene with lighting
; 991  : 	//
; 992  : 	////////////////////////////////////////
; 993  : 
; 994  : 	if (flags & (VIRTUAL_COCKPIT_COCKPIT))

  003ea	8b 45 08	 mov	 eax, DWORD PTR _flags$[ebp]
  003ed	83 e0 01	 and	 eax, 1
  003f0	0f 84 32 06 00
	00		 je	 $LN22@draw_apach

; 995  : 	{
; 996  : //		set_cockpit_lighting (vp.attitude);
; 997  : 
; 998  : 		set_cockpit_white_lighting (vp.attitude);

  003f6	8d 45 b8	 lea	 eax, DWORD PTR _vp$[ebp+12]
  003f9	50		 push	 eax
  003fa	e8 00 00 00 00	 call	 ?set_cockpit_white_lighting@@YGXQAY02M@Z ; set_cockpit_white_lighting

; 999  : 
; 1000 : 		set_3d_active_environment (main_3d_single_light_env);

  003ff	a1 00 00 00 00	 mov	 eax, DWORD PTR ?main_3d_single_light_env@@3PAUENV_3D@@A ; main_3d_single_light_env
  00404	50		 push	 eax
  00405	e8 00 00 00 00	 call	 ?set_3d_active_environment@@YGXPAUENV_3D@@@Z ; set_3d_active_environment

; 1001 : 
; 1002 : 		set_3d_view_distances (main_3d_single_light_env, 10.0, 0.1, 1.0, 0.0);

  0040a	51		 push	 ecx
  0040b	0f 57 c0	 xorps	 xmm0, xmm0
  0040e	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00413	51		 push	 ecx
  00414	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3f800000
  0041c	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00421	51		 push	 ecx
  00422	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3dcccccd
  0042a	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  0042f	51		 push	 ecx
  00430	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@41200000
  00438	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  0043d	a1 00 00 00 00	 mov	 eax, DWORD PTR ?main_3d_single_light_env@@3PAUENV_3D@@A ; main_3d_single_light_env
  00442	50		 push	 eax
  00443	e8 00 00 00 00	 call	 ?set_3d_view_distances@@YGXPAUENV_3D@@MMMM@Z ; set_3d_view_distances

; 1003 : 
; 1004 : 		realise_3d_clip_extents (main_3d_single_light_env);

  00448	a1 00 00 00 00	 mov	 eax, DWORD PTR ?main_3d_single_light_env@@3PAUENV_3D@@A ; main_3d_single_light_env
  0044d	50		 push	 eax
  0044e	e8 00 00 00 00	 call	 ?realise_3d_clip_extents@@YGXPAUENV_3D@@@Z ; realise_3d_clip_extents

; 1005 : 
; 1006 : 		clear_zbuffer_screen ();

  00453	e8 00 00 00 00	 call	 ?clear_zbuffer_screen@@YGXXZ ; clear_zbuffer_screen

; 1007 : 
; 1008 : 		if (begin_3d_scene ())

  00458	e8 00 00 00 00	 call	 ?begin_3d_scene@@YGHXZ	; begin_3d_scene
  0045d	85 c0		 test	 eax, eax
  0045f	0f 84 c3 05 00
	00		 je	 $LN22@draw_apach

; 1009 : 		{
; 1010 : 			//
; 1011 : 			// virtual cockpit
; 1012 : 			//
; 1013 : 
; 1014 : 			if (flags & VIRTUAL_COCKPIT_COCKPIT)

  00465	8b 45 08	 mov	 eax, DWORD PTR _flags$[ebp]
  00468	83 e0 01	 and	 eax, 1
  0046b	0f 84 a8 05 00
	00		 je	 $LN31@draw_apach

; 1015 : 			{
; 1016 : 				if (custom_3d_models.arneh_ah64d_cockpit)

  00471	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?custom_3d_models@@3Uinstalled_custom_3d_models@@A, 0
  00478	74 10		 je	 SHORT $LN24@draw_apach

; 1017 : 					virtual_cockpit_inst3d = virtual_cockpit_level1_inst3d;

  0047a	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_level1_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  0047f	89 85 40 ff ff
	ff		 mov	 DWORD PTR _virtual_cockpit_inst3d$[ebp], eax

; 1018 : 				else

  00485	e9 dd 00 00 00	 jmp	 $LN2@draw_apach
$LN24@draw_apach:

; 1019 : 				{
; 1020 : 					switch (get_local_entity_int_value (get_session_entity (), INT_TYPE_DAY_SEGMENT_TYPE))

  0048a	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?session_entity@@3PAUENTITY@@A, 0 ; session_entity
  00491	74 0f		 je	 SHORT $LN82@draw_apach
  00493	a1 00 00 00 00	 mov	 eax, DWORD PTR ?session_entity@@3PAUENTITY@@A ; session_entity
  00498	8b 08		 mov	 ecx, DWORD PTR [eax]
  0049a	89 8d e4 fe ff
	ff		 mov	 DWORD PTR tv229[ebp], ecx
  004a0	eb 20		 jmp	 SHORT $LN83@draw_apach
$LN82@draw_apach:
  004a2	68 fc 03 00 00	 push	 1020			; 000003fcH
  004a7	68 00 00 00 00	 push	 OFFSET ??_C@_0FA@DHMOLMNF@c?3?2users?2nhv90?2projects?2eech?2ap@
  004ac	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  004b2	52		 push	 edx
  004b3	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  004b8	c7 85 e4 fe ff
	ff 00 00 00 00	 mov	 DWORD PTR tv229[ebp], 0
$LN83@draw_apach:
  004c2	b8 01 00 00 00	 mov	 eax, 1
  004c7	85 c0		 test	 eax, eax
  004c9	74 0c		 je	 SHORT $LN84@draw_apach
  004cb	c7 85 e0 fe ff
	ff 27 00 00 00	 mov	 DWORD PTR tv236[ebp], 39 ; 00000027H
  004d5	eb 20		 jmp	 SHORT $LN85@draw_apach
$LN84@draw_apach:
  004d7	68 fc 03 00 00	 push	 1020			; 000003fcH
  004dc	68 00 00 00 00	 push	 OFFSET ??_C@_0FA@DHMOLMNF@c?3?2users?2nhv90?2projects?2eech?2ap@
  004e1	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?overload_invalid_int_type_message@@3PBDB ; overload_invalid_int_type_message
  004e7	51		 push	 ecx
  004e8	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  004ed	c7 85 e0 fe ff
	ff 00 00 00 00	 mov	 DWORD PTR tv236[ebp], 0
$LN85@draw_apach:
  004f7	6a 27		 push	 39			; 00000027H
  004f9	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?session_entity@@3PAUENTITY@@A ; session_entity
  004ff	52		 push	 edx
  00500	69 85 e4 fe ff
	ff 5c 04 00 00	 imul	 eax, DWORD PTR tv229[ebp], 1116
  0050a	8b 8d e0 fe ff
	ff		 mov	 ecx, DWORD PTR tv236[ebp]
  00510	8b 94 88 00 00
	00 00		 mov	 edx, DWORD PTR ?fn_get_local_entity_int_value@@3PAY0BBH@P6GHPAUENTITY@@W4INT_TYPES@@@ZA[eax+ecx*4]
  00517	ff d2		 call	 edx
  00519	89 85 dc fe ff
	ff		 mov	 DWORD PTR tv242[ebp], eax
  0051f	83 bd dc fe ff
	ff 03		 cmp	 DWORD PTR tv242[ebp], 3
  00526	77 3f		 ja	 SHORT $LN2@draw_apach
  00528	8b 85 dc fe ff
	ff		 mov	 eax, DWORD PTR tv242[ebp]
  0052e	ff 24 85 00 00
	00 00		 jmp	 DWORD PTR $LN96@draw_apach[eax*4]
$LN26@draw_apach:

; 1021 : 					{
; 1022 : 						////////////////////////////////////////
; 1023 : 						case DAY_SEGMENT_TYPE_DAWN:
; 1024 : 						////////////////////////////////////////
; 1025 : 						{
; 1026 : 							virtual_cockpit_inst3d = virtual_cockpit_level2_inst3d;

  00535	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_level2_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  0053a	89 85 40 ff ff
	ff		 mov	 DWORD PTR _virtual_cockpit_inst3d$[ebp], eax

; 1027 : 
; 1028 : 							break;

  00540	eb 25		 jmp	 SHORT $LN2@draw_apach
$LN27@draw_apach:

; 1029 : 						}
; 1030 : 						////////////////////////////////////////
; 1031 : 						case DAY_SEGMENT_TYPE_DAY:
; 1032 : 						////////////////////////////////////////
; 1033 : 						{
; 1034 : 							virtual_cockpit_inst3d = virtual_cockpit_level1_inst3d;

  00542	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_level1_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  00547	89 85 40 ff ff
	ff		 mov	 DWORD PTR _virtual_cockpit_inst3d$[ebp], eax

; 1035 : 
; 1036 : 							break;

  0054d	eb 18		 jmp	 SHORT $LN2@draw_apach
$LN28@draw_apach:

; 1037 : 						}
; 1038 : 						////////////////////////////////////////
; 1039 : 						case DAY_SEGMENT_TYPE_DUSK:
; 1040 : 						////////////////////////////////////////
; 1041 : 						{
; 1042 : 							virtual_cockpit_inst3d = virtual_cockpit_level2_inst3d;

  0054f	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_level2_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  00554	89 85 40 ff ff
	ff		 mov	 DWORD PTR _virtual_cockpit_inst3d$[ebp], eax

; 1043 : 
; 1044 : 							break;

  0055a	eb 0b		 jmp	 SHORT $LN2@draw_apach
$LN29@draw_apach:

; 1045 : 						}
; 1046 : 						////////////////////////////////////////
; 1047 : 						case DAY_SEGMENT_TYPE_NIGHT:
; 1048 : 						////////////////////////////////////////
; 1049 : 						{
; 1050 : 							virtual_cockpit_inst3d = virtual_cockpit_level3_inst3d;

  0055c	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_level3_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  00561	89 85 40 ff ff
	ff		 mov	 DWORD PTR _virtual_cockpit_inst3d$[ebp], eax
$LN2@draw_apach:

; 1051 : 
; 1052 : 							break;
; 1053 : 						}
; 1054 : 					}
; 1055 : 				}
; 1056 : 
; 1057 : 				#if DEMO_VERSION
; 1058 : 
; 1059 : 				virtual_cockpit_inst3d = virtual_cockpit_level1_inst3d;
; 1060 : 
; 1061 : 				#endif
; 1062 : 
; 1063 : 				if (custom_3d_models.arneh_ah64d_cockpit)

  00567	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?custom_3d_models@@3Uinstalled_custom_3d_models@@A, 0
  0056e	74 0c		 je	 SHORT $LN30@draw_apach

; 1064 : 					animate_throttles(virtual_cockpit_inst3d);

  00570	8b 85 40 ff ff
	ff		 mov	 eax, DWORD PTR _virtual_cockpit_inst3d$[ebp]
  00576	50		 push	 eax
  00577	e8 00 00 00 00	 call	 ?animate_throttles@@YGXPAUOBJECT_3D_INSTANCE@@@Z ; animate_throttles
$LN30@draw_apach:

; 1065 : 
; 1066 : 				virtual_cockpit_inst3d->vp = vp;

  0057c	8b bd 40 ff ff
	ff		 mov	 edi, DWORD PTR _virtual_cockpit_inst3d$[ebp]
  00582	83 c7 08	 add	 edi, 8
  00585	b9 0c 00 00 00	 mov	 ecx, 12			; 0000000cH
  0058a	8d 75 ac	 lea	 esi, DWORD PTR _vp$[ebp]
  0058d	f3 a5		 rep movsd

; 1067 : 
; 1068 : 				insert_relative_object_into_3d_scene (OBJECT_3D_DRAW_TYPE_ZBUFFERED_OBJECT, &virtual_cockpit_inst3d->vp.position, virtual_cockpit_inst3d);

  0058f	51		 push	 ecx
  00590	0f 57 c0	 xorps	 xmm0, xmm0
  00593	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00598	8b 85 40 ff ff
	ff		 mov	 eax, DWORD PTR _virtual_cockpit_inst3d$[ebp]
  0059e	50		 push	 eax
  0059f	8b 8d 40 ff ff
	ff		 mov	 ecx, DWORD PTR _virtual_cockpit_inst3d$[ebp]
  005a5	83 c1 08	 add	 ecx, 8
  005a8	51		 push	 ecx
  005a9	6a 02		 push	 2
  005ab	e8 00 00 00 00	 call	 ?insert_zbiased_relative_object_into_3d_scene@@YGXW4OBJECT_3D_DRAWING_TYPES@@PAUVEC3D@@PAXM@Z ; insert_zbiased_relative_object_into_3d_scene

; 1069 : 
; 1070 : 				// with new cockpit we have to draw these in internal cockpit
; 1071 : 				if (custom_3d_models.arneh_ah64d_cockpit)

  005b0	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?custom_3d_models@@3Uinstalled_custom_3d_models@@A, 0
  005b7	0f 84 5c 04 00
	00		 je	 $LN31@draw_apach

; 1072 : 				{
; 1073 : 					// co-pilot head
; 1074 : 					animate_co_pilot_head(virtual_cockpit_inst3d);

  005bd	8b 85 40 ff ff
	ff		 mov	 eax, DWORD PTR _virtual_cockpit_inst3d$[ebp]
  005c3	50		 push	 eax
  005c4	e8 00 00 00 00	 call	 ?animate_co_pilot_head@@YGXPAUOBJECT_3D_INSTANCE@@@Z ; animate_co_pilot_head

; 1075 : 
; 1076 : 					// compass
; 1077 : 					{
; 1078 : 						search.search_depth = 0;

  005c9	c7 85 4c ff ff
	ff 00 00 00 00	 mov	 DWORD PTR _search$[ebp+8], 0

; 1079 : 						search.search_object = virtual_cockpit_compass_inst3d;

  005d3	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_compass_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  005d8	89 85 44 ff ff
	ff		 mov	 DWORD PTR _search$[ebp], eax

; 1080 : 						search.sub_object_index = OBJECT_3D_SUB_OBJECT_APACHE_VIRTUAL_COCKPIT_COMPASS_HEADING_NULL;

  005de	c7 85 50 ff ff
	ff 6e 00 00 00	 mov	 DWORD PTR _search$[ebp+12], 110 ; 0000006eH

; 1081 : 
; 1082 : 						if (find_object_3d_sub_object (&search) == SUB_OBJECT_SEARCH_RESULT_OBJECT_FOUND)

  005e8	8d 85 44 ff ff
	ff		 lea	 eax, DWORD PTR _search$[ebp]
  005ee	50		 push	 eax
  005ef	e8 00 00 00 00	 call	 ?find_object_3d_sub_object@@YG?AW4SUB_OBJECT_SEARCH_RESULT_TYPES@@PAUOBJECT_3D_SUB_OBJECT_SEARCH_DATA@@@Z ; find_object_3d_sub_object
  005f4	83 f8 01	 cmp	 eax, 1
  005f7	75 1f		 jne	 SHORT $LN32@draw_apach

; 1083 : 						{
; 1084 : 							search.result_sub_object->relative_heading = -current_flight_dynamics->heading.value;

  005f9	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_flight_dynamics@@3PAUDYNAMICS_TYPE@@A ; current_flight_dynamics
  005fe	f3 0f 10 80 8c
	21 00 00	 movss	 xmm0, DWORD PTR [eax+8588]
  00606	0f 57 05 00 00
	00 00		 xorps	 xmm0, DWORD PTR __xmm@80000000800000008000000080000000
  0060d	8b 8d 48 ff ff
	ff		 mov	 ecx, DWORD PTR _search$[ebp+4]
  00613	f3 0f 11 41 18	 movss	 DWORD PTR [ecx+24], xmm0
$LN32@draw_apach:

; 1085 : 						}
; 1086 : 
; 1087 : 						virtual_cockpit_compass_inst3d->vp = vp;

  00618	8b 3d 00 00 00
	00		 mov	 edi, DWORD PTR ?virtual_cockpit_compass_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  0061e	83 c7 08	 add	 edi, 8
  00621	b9 0c 00 00 00	 mov	 ecx, 12			; 0000000cH
  00626	8d 75 ac	 lea	 esi, DWORD PTR _vp$[ebp]
  00629	f3 a5		 rep movsd

; 1088 : 
; 1089 : 						insert_relative_object_into_3d_scene (OBJECT_3D_DRAW_TYPE_ZBUFFERED_OBJECT, &virtual_cockpit_compass_inst3d->vp.position, virtual_cockpit_compass_inst3d);

  0062b	51		 push	 ecx
  0062c	0f 57 c0	 xorps	 xmm0, xmm0
  0062f	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00634	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_compass_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  00639	50		 push	 eax
  0063a	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?virtual_cockpit_compass_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  00640	83 c1 08	 add	 ecx, 8
  00643	51		 push	 ecx
  00644	6a 02		 push	 2
  00646	e8 00 00 00 00	 call	 ?insert_zbiased_relative_object_into_3d_scene@@YGXW4OBJECT_3D_DRAWING_TYPES@@PAUVEC3D@@PAXM@Z ; insert_zbiased_relative_object_into_3d_scene

; 1090 : 					}
; 1091 : 
; 1092 : 					// ADI
; 1093 : 					{
; 1094 : 						search.search_depth = 0;

  0064b	c7 85 4c ff ff
	ff 00 00 00 00	 mov	 DWORD PTR _search$[ebp+8], 0

; 1095 : 						search.search_object = virtual_cockpit_adi_inst3d;

  00655	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_adi_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  0065a	89 85 44 ff ff
	ff		 mov	 DWORD PTR _search$[ebp], eax

; 1096 : 						search.sub_object_index = OBJECT_3D_SUB_OBJECT_APACHE_VIRTUAL_COCKPIT_ADI;

  00660	c7 85 50 ff ff
	ff 6c 00 00 00	 mov	 DWORD PTR _search$[ebp+12], 108 ; 0000006cH

; 1097 : 
; 1098 : 						if (find_object_3d_sub_object (&search) == SUB_OBJECT_SEARCH_RESULT_OBJECT_FOUND)

  0066a	8d 85 44 ff ff
	ff		 lea	 eax, DWORD PTR _search$[ebp]
  00670	50		 push	 eax
  00671	e8 00 00 00 00	 call	 ?find_object_3d_sub_object@@YG?AW4SUB_OBJECT_SEARCH_RESULT_TYPES@@PAUOBJECT_3D_SUB_OBJECT_SEARCH_DATA@@@Z ; find_object_3d_sub_object
  00676	83 f8 01	 cmp	 eax, 1
  00679	75 65		 jne	 SHORT $LN33@draw_apach

; 1099 : 						{
; 1100 : 							float
; 1101 : 								heading,
; 1102 : 								pitch,
; 1103 : 								roll;
; 1104 : 
; 1105 : 							get_apache_virtual_cockpit_adi_angles (vp.attitude, &heading, &pitch, &roll);

  0067b	8d 85 34 ff ff
	ff		 lea	 eax, DWORD PTR _roll$4[ebp]
  00681	50		 push	 eax
  00682	8d 8d 38 ff ff
	ff		 lea	 ecx, DWORD PTR _pitch$5[ebp]
  00688	51		 push	 ecx
  00689	8d 95 3c ff ff
	ff		 lea	 edx, DWORD PTR _heading$6[ebp]
  0068f	52		 push	 edx
  00690	8d 45 b8	 lea	 eax, DWORD PTR _vp$[ebp+12]
  00693	50		 push	 eax
  00694	e8 00 00 00 00	 call	 ?get_apache_virtual_cockpit_adi_angles@@YGXQAY02MPAM11@Z ; get_apache_virtual_cockpit_adi_angles

; 1106 : 
; 1107 : 							search.result_sub_object->relative_heading = -heading;

  00699	f3 0f 10 85 3c
	ff ff ff	 movss	 xmm0, DWORD PTR _heading$6[ebp]
  006a1	0f 57 05 00 00
	00 00		 xorps	 xmm0, DWORD PTR __xmm@80000000800000008000000080000000
  006a8	8b 85 48 ff ff
	ff		 mov	 eax, DWORD PTR _search$[ebp+4]
  006ae	f3 0f 11 40 18	 movss	 DWORD PTR [eax+24], xmm0

; 1108 : 
; 1109 : 							search.result_sub_object->relative_pitch = pitch;

  006b3	8b 85 48 ff ff
	ff		 mov	 eax, DWORD PTR _search$[ebp+4]
  006b9	f3 0f 10 85 38
	ff ff ff	 movss	 xmm0, DWORD PTR _pitch$5[ebp]
  006c1	f3 0f 11 40 1c	 movss	 DWORD PTR [eax+28], xmm0

; 1110 : 
; 1111 : 							search.result_sub_object->relative_roll = -roll;

  006c6	f3 0f 10 85 34
	ff ff ff	 movss	 xmm0, DWORD PTR _roll$4[ebp]
  006ce	0f 57 05 00 00
	00 00		 xorps	 xmm0, DWORD PTR __xmm@80000000800000008000000080000000
  006d5	8b 85 48 ff ff
	ff		 mov	 eax, DWORD PTR _search$[ebp+4]
  006db	f3 0f 11 40 20	 movss	 DWORD PTR [eax+32], xmm0
$LN33@draw_apach:

; 1112 : 						}
; 1113 : 
; 1114 : 						virtual_cockpit_adi_inst3d->vp = vp;

  006e0	8b 3d 00 00 00
	00		 mov	 edi, DWORD PTR ?virtual_cockpit_adi_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  006e6	83 c7 08	 add	 edi, 8
  006e9	b9 0c 00 00 00	 mov	 ecx, 12			; 0000000cH
  006ee	8d 75 ac	 lea	 esi, DWORD PTR _vp$[ebp]
  006f1	f3 a5		 rep movsd

; 1115 : 
; 1116 : 						insert_relative_object_into_3d_scene (OBJECT_3D_DRAW_TYPE_ZBUFFERED_OBJECT, &virtual_cockpit_adi_inst3d->vp.position, virtual_cockpit_adi_inst3d);

  006f3	51		 push	 ecx
  006f4	0f 57 c0	 xorps	 xmm0, xmm0
  006f7	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  006fc	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_adi_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  00701	50		 push	 eax
  00702	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?virtual_cockpit_adi_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  00708	83 c1 08	 add	 ecx, 8
  0070b	51		 push	 ecx
  0070c	6a 02		 push	 2
  0070e	e8 00 00 00 00	 call	 ?insert_zbiased_relative_object_into_3d_scene@@YGXW4OBJECT_3D_DRAWING_TYPES@@PAUVEC3D@@PAXM@Z ; insert_zbiased_relative_object_into_3d_scene

; 1117 : 					}
; 1118 : 
; 1119 : 					{
; 1120 : 						//
; 1121 : 						// airspeed
; 1122 : 						//
; 1123 : 
; 1124 : 						search.search_depth = 0;

  00713	c7 85 4c ff ff
	ff 00 00 00 00	 mov	 DWORD PTR _search$[ebp+8], 0

; 1125 : 						search.search_object = virtual_cockpit_instrument_needles_inst3d;

  0071d	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_instrument_needles_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  00722	89 85 44 ff ff
	ff		 mov	 DWORD PTR _search$[ebp], eax

; 1126 : 						search.sub_object_index = OBJECT_3D_SUB_OBJECT_APACHE_VIRTUAL_COCKPIT_AIRSPEED;

  00728	c7 85 50 ff ff
	ff 72 00 00 00	 mov	 DWORD PTR _search$[ebp+12], 114 ; 00000072H

; 1127 : 
; 1128 : 						if (find_object_3d_sub_object (&search) == SUB_OBJECT_SEARCH_RESULT_OBJECT_FOUND)

  00732	8d 85 44 ff ff
	ff		 lea	 eax, DWORD PTR _search$[ebp]
  00738	50		 push	 eax
  00739	e8 00 00 00 00	 call	 ?find_object_3d_sub_object@@YG?AW4SUB_OBJECT_SEARCH_RESULT_TYPES@@PAUOBJECT_3D_SUB_OBJECT_SEARCH_DATA@@@Z ; find_object_3d_sub_object
  0073e	83 f8 01	 cmp	 eax, 1
  00741	75 0e		 jne	 SHORT $LN34@draw_apach

; 1129 : 						{
; 1130 : 							search.result_sub_object->relative_roll = get_apache_virtual_cockpit_airspeed_indicator_needle_value ();

  00743	e8 00 00 00 00	 call	 ?get_apache_virtual_cockpit_airspeed_indicator_needle_value@@YGMXZ ; get_apache_virtual_cockpit_airspeed_indicator_needle_value
  00748	8b 85 48 ff ff
	ff		 mov	 eax, DWORD PTR _search$[ebp+4]
  0074e	d9 58 20	 fstp	 DWORD PTR [eax+32]
$LN34@draw_apach:

; 1131 : 						}
; 1132 : 					}
; 1133 : 
; 1134 : 					{
; 1135 : 						//
; 1136 : 						// altimeter
; 1137 : 						//
; 1138 : 
; 1139 : 						search.search_depth = 0;

  00751	c7 85 4c ff ff
	ff 00 00 00 00	 mov	 DWORD PTR _search$[ebp+8], 0

; 1140 : 						search.search_object = virtual_cockpit_instrument_needles_inst3d;

  0075b	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_instrument_needles_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  00760	89 85 44 ff ff
	ff		 mov	 DWORD PTR _search$[ebp], eax

; 1141 : 						search.sub_object_index = OBJECT_3D_SUB_OBJECT_APACHE_VIRTUAL_COCKPIT_ALTIMETER;

  00766	c7 85 50 ff ff
	ff 74 00 00 00	 mov	 DWORD PTR _search$[ebp+12], 116 ; 00000074H

; 1142 : 
; 1143 : 						if (find_object_3d_sub_object (&search) == SUB_OBJECT_SEARCH_RESULT_OBJECT_FOUND)

  00770	8d 85 44 ff ff
	ff		 lea	 eax, DWORD PTR _search$[ebp]
  00776	50		 push	 eax
  00777	e8 00 00 00 00	 call	 ?find_object_3d_sub_object@@YG?AW4SUB_OBJECT_SEARCH_RESULT_TYPES@@PAUOBJECT_3D_SUB_OBJECT_SEARCH_DATA@@@Z ; find_object_3d_sub_object
  0077c	83 f8 01	 cmp	 eax, 1
  0077f	75 2d		 jne	 SHORT $LN35@draw_apach

; 1144 : 						{
; 1145 : 							search.result_sub_object->visible_object = draw_virtual_cockpit_needles_on_fixed_cockpits;

  00781	a1 00 00 00 00	 mov	 eax, DWORD PTR ?draw_virtual_cockpit_needles_on_fixed_cockpits@@3HA ; draw_virtual_cockpit_needles_on_fixed_cockpits
  00786	83 e0 01	 and	 eax, 1
  00789	8b 8d 48 ff ff
	ff		 mov	 ecx, DWORD PTR _search$[ebp+4]
  0078f	8b 51 08	 mov	 edx, DWORD PTR [ecx+8]
  00792	83 e2 fe	 and	 edx, -2			; fffffffeH
  00795	0b d0		 or	 edx, eax
  00797	8b 85 48 ff ff
	ff		 mov	 eax, DWORD PTR _search$[ebp+4]
  0079d	89 50 08	 mov	 DWORD PTR [eax+8], edx

; 1146 : 							search.result_sub_object->relative_roll = get_apache_virtual_cockpit_barometric_altimeter_needle_value ();

  007a0	e8 00 00 00 00	 call	 ?get_apache_virtual_cockpit_barometric_altimeter_needle_value@@YGMXZ ; get_apache_virtual_cockpit_barometric_altimeter_needle_value
  007a5	8b 85 48 ff ff
	ff		 mov	 eax, DWORD PTR _search$[ebp+4]
  007ab	d9 58 20	 fstp	 DWORD PTR [eax+32]
$LN35@draw_apach:

; 1147 : 						}
; 1148 : 					}
; 1149 : 
; 1150 : 					virtual_cockpit_instrument_needles_inst3d->vp = vp;

  007ae	8b 3d 00 00 00
	00		 mov	 edi, DWORD PTR ?virtual_cockpit_instrument_needles_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  007b4	83 c7 08	 add	 edi, 8
  007b7	b9 0c 00 00 00	 mov	 ecx, 12			; 0000000cH
  007bc	8d 75 ac	 lea	 esi, DWORD PTR _vp$[ebp]
  007bf	f3 a5		 rep movsd

; 1151 : 					insert_relative_object_into_3d_scene (OBJECT_3D_DRAW_TYPE_ZBUFFERED_OBJECT, &virtual_cockpit_instrument_needles_inst3d->vp.position, virtual_cockpit_instrument_needles_inst3d);

  007c1	51		 push	 ecx
  007c2	0f 57 c0	 xorps	 xmm0, xmm0
  007c5	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  007ca	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_instrument_needles_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  007cf	50		 push	 eax
  007d0	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?virtual_cockpit_instrument_needles_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  007d6	83 c1 08	 add	 ecx, 8
  007d9	51		 push	 ecx
  007da	6a 02		 push	 2
  007dc	e8 00 00 00 00	 call	 ?insert_zbiased_relative_object_into_3d_scene@@YGXW4OBJECT_3D_DRAWING_TYPES@@PAUVEC3D@@PAXM@Z ; insert_zbiased_relative_object_into_3d_scene

; 1152 : 
; 1153 : 					{
; 1154 : 						//
; 1155 : 						// Fire warning lights
; 1156 : 						//
; 1157 : 						search.search_depth = 0;

  007e1	c7 85 4c ff ff
	ff 00 00 00 00	 mov	 DWORD PTR _search$[ebp+8], 0

; 1158 : 						search.search_object = virtual_cockpit_lights_inst3d;

  007eb	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_lights_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  007f0	89 85 44 ff ff
	ff		 mov	 DWORD PTR _search$[ebp], eax

; 1159 : 						search.sub_object_index = OBJECT_3D_SUB_OBJECT_ARNEH_AH64D_LIGHT_FIRE1;

  007f6	c7 85 50 ff ff
	ff 1f 01 00 00	 mov	 DWORD PTR _search$[ebp+12], 287 ; 0000011fH

; 1160 : 						if (find_object_3d_sub_object (&search) == SUB_OBJECT_SEARCH_RESULT_OBJECT_FOUND)

  00800	8d 85 44 ff ff
	ff		 lea	 eax, DWORD PTR _search$[ebp]
  00806	50		 push	 eax
  00807	e8 00 00 00 00	 call	 ?find_object_3d_sub_object@@YG?AW4SUB_OBJECT_SEARCH_RESULT_TYPES@@PAUOBJECT_3D_SUB_OBJECT_SEARCH_DATA@@@Z ; find_object_3d_sub_object
  0080c	83 f8 01	 cmp	 eax, 1
  0080f	75 25		 jne	 SHORT $LN36@draw_apach

; 1161 : 						{
; 1162 : 							search.result_sub_object->visible_object = apache_lamps.engine_1_fire;

  00811	a1 00 00 00 00	 mov	 eax, DWORD PTR ?apache_lamps@@3UAPACHE_LAMP_FLAGS@@A ; apache_lamps
  00816	c1 e8 09	 shr	 eax, 9
  00819	83 e0 01	 and	 eax, 1
  0081c	83 e0 01	 and	 eax, 1
  0081f	8b 8d 48 ff ff
	ff		 mov	 ecx, DWORD PTR _search$[ebp+4]
  00825	8b 51 08	 mov	 edx, DWORD PTR [ecx+8]
  00828	83 e2 fe	 and	 edx, -2			; fffffffeH
  0082b	0b d0		 or	 edx, eax
  0082d	8b 85 48 ff ff
	ff		 mov	 eax, DWORD PTR _search$[ebp+4]
  00833	89 50 08	 mov	 DWORD PTR [eax+8], edx
$LN36@draw_apach:

; 1163 : 						}
; 1164 : 
; 1165 : 						search.search_depth = 0;

  00836	c7 85 4c ff ff
	ff 00 00 00 00	 mov	 DWORD PTR _search$[ebp+8], 0

; 1166 : 						search.search_object = virtual_cockpit_lights_inst3d;

  00840	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_lights_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  00845	89 85 44 ff ff
	ff		 mov	 DWORD PTR _search$[ebp], eax

; 1167 : 						search.sub_object_index = OBJECT_3D_SUB_OBJECT_ARNEH_AH64D_LIGHT_FIRE2;

  0084b	c7 85 50 ff ff
	ff 20 01 00 00	 mov	 DWORD PTR _search$[ebp+12], 288 ; 00000120H

; 1168 : 						if (find_object_3d_sub_object (&search) == SUB_OBJECT_SEARCH_RESULT_OBJECT_FOUND)

  00855	8d 85 44 ff ff
	ff		 lea	 eax, DWORD PTR _search$[ebp]
  0085b	50		 push	 eax
  0085c	e8 00 00 00 00	 call	 ?find_object_3d_sub_object@@YG?AW4SUB_OBJECT_SEARCH_RESULT_TYPES@@PAUOBJECT_3D_SUB_OBJECT_SEARCH_DATA@@@Z ; find_object_3d_sub_object
  00861	83 f8 01	 cmp	 eax, 1
  00864	75 25		 jne	 SHORT $LN37@draw_apach

; 1169 : 						{
; 1170 : 							search.result_sub_object->visible_object = apache_lamps.engine_2_fire;

  00866	a1 00 00 00 00	 mov	 eax, DWORD PTR ?apache_lamps@@3UAPACHE_LAMP_FLAGS@@A ; apache_lamps
  0086b	c1 e8 0b	 shr	 eax, 11			; 0000000bH
  0086e	83 e0 01	 and	 eax, 1
  00871	83 e0 01	 and	 eax, 1
  00874	8b 8d 48 ff ff
	ff		 mov	 ecx, DWORD PTR _search$[ebp+4]
  0087a	8b 51 08	 mov	 edx, DWORD PTR [ecx+8]
  0087d	83 e2 fe	 and	 edx, -2			; fffffffeH
  00880	0b d0		 or	 edx, eax
  00882	8b 85 48 ff ff
	ff		 mov	 eax, DWORD PTR _search$[ebp+4]
  00888	89 50 08	 mov	 DWORD PTR [eax+8], edx
$LN37@draw_apach:

; 1171 : 						}
; 1172 : 					}
; 1173 : 
; 1174 : 					{
; 1175 : 						//
; 1176 : 						// Fire extinguisher lights
; 1177 : 						//
; 1178 : 						search.search_depth = 0;

  0088b	c7 85 4c ff ff
	ff 00 00 00 00	 mov	 DWORD PTR _search$[ebp+8], 0

; 1179 : 						search.search_object = virtual_cockpit_lights_inst3d;

  00895	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_lights_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  0089a	89 85 44 ff ff
	ff		 mov	 DWORD PTR _search$[ebp], eax

; 1180 : 						search.sub_object_index = OBJECT_3D_SUB_OBJECT_ARNEH_AH64D_LIGHT_EXT1;

  008a0	c7 85 50 ff ff
	ff 21 01 00 00	 mov	 DWORD PTR _search$[ebp+12], 289 ; 00000121H

; 1181 : 						if (find_object_3d_sub_object (&search) == SUB_OBJECT_SEARCH_RESULT_OBJECT_FOUND)

  008aa	8d 85 44 ff ff
	ff		 lea	 eax, DWORD PTR _search$[ebp]
  008b0	50		 push	 eax
  008b1	e8 00 00 00 00	 call	 ?find_object_3d_sub_object@@YG?AW4SUB_OBJECT_SEARCH_RESULT_TYPES@@PAUOBJECT_3D_SUB_OBJECT_SEARCH_DATA@@@Z ; find_object_3d_sub_object
  008b6	83 f8 01	 cmp	 eax, 1
  008b9	75 3f		 jne	 SHORT $LN38@draw_apach

; 1182 : 						{
; 1183 : 							search.result_sub_object->visible_object = fire_extinguisher_used > 0;

  008bb	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?fire_extinguisher_used@@3HA, 0 ; fire_extinguisher_used
  008c2	7e 0c		 jle	 SHORT $LN86@draw_apach
  008c4	c7 85 e4 fe ff
	ff 01 00 00 00	 mov	 DWORD PTR tv399[ebp], 1
  008ce	eb 0a		 jmp	 SHORT $LN87@draw_apach
$LN86@draw_apach:
  008d0	c7 85 e4 fe ff
	ff 00 00 00 00	 mov	 DWORD PTR tv399[ebp], 0
$LN87@draw_apach:
  008da	8b 85 e4 fe ff
	ff		 mov	 eax, DWORD PTR tv399[ebp]
  008e0	83 e0 01	 and	 eax, 1
  008e3	8b 8d 48 ff ff
	ff		 mov	 ecx, DWORD PTR _search$[ebp+4]
  008e9	8b 51 08	 mov	 edx, DWORD PTR [ecx+8]
  008ec	83 e2 fe	 and	 edx, -2			; fffffffeH
  008ef	0b d0		 or	 edx, eax
  008f1	8b 85 48 ff ff
	ff		 mov	 eax, DWORD PTR _search$[ebp+4]
  008f7	89 50 08	 mov	 DWORD PTR [eax+8], edx
$LN38@draw_apach:

; 1184 : 						}
; 1185 : 
; 1186 : 						search.search_depth = 0;

  008fa	c7 85 4c ff ff
	ff 00 00 00 00	 mov	 DWORD PTR _search$[ebp+8], 0

; 1187 : 						search.search_object = virtual_cockpit_lights_inst3d;

  00904	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_lights_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  00909	89 85 44 ff ff
	ff		 mov	 DWORD PTR _search$[ebp], eax

; 1188 : 						search.sub_object_index = OBJECT_3D_SUB_OBJECT_ARNEH_AH64D_LIGHT_EXT2;

  0090f	c7 85 50 ff ff
	ff 22 01 00 00	 mov	 DWORD PTR _search$[ebp+12], 290 ; 00000122H

; 1189 : 						if (find_object_3d_sub_object (&search) == SUB_OBJECT_SEARCH_RESULT_OBJECT_FOUND)

  00919	8d 85 44 ff ff
	ff		 lea	 eax, DWORD PTR _search$[ebp]
  0091f	50		 push	 eax
  00920	e8 00 00 00 00	 call	 ?find_object_3d_sub_object@@YG?AW4SUB_OBJECT_SEARCH_RESULT_TYPES@@PAUOBJECT_3D_SUB_OBJECT_SEARCH_DATA@@@Z ; find_object_3d_sub_object
  00925	83 f8 01	 cmp	 eax, 1
  00928	75 3f		 jne	 SHORT $LN39@draw_apach

; 1190 : 						{
; 1191 : 							search.result_sub_object->visible_object = fire_extinguisher_used > 1;

  0092a	83 3d 00 00 00
	00 01		 cmp	 DWORD PTR ?fire_extinguisher_used@@3HA, 1 ; fire_extinguisher_used
  00931	7e 0c		 jle	 SHORT $LN88@draw_apach
  00933	c7 85 e4 fe ff
	ff 01 00 00 00	 mov	 DWORD PTR tv409[ebp], 1
  0093d	eb 0a		 jmp	 SHORT $LN89@draw_apach
$LN88@draw_apach:
  0093f	c7 85 e4 fe ff
	ff 00 00 00 00	 mov	 DWORD PTR tv409[ebp], 0
$LN89@draw_apach:
  00949	8b 85 e4 fe ff
	ff		 mov	 eax, DWORD PTR tv409[ebp]
  0094f	83 e0 01	 and	 eax, 1
  00952	8b 8d 48 ff ff
	ff		 mov	 ecx, DWORD PTR _search$[ebp+4]
  00958	8b 51 08	 mov	 edx, DWORD PTR [ecx+8]
  0095b	83 e2 fe	 and	 edx, -2			; fffffffeH
  0095e	0b d0		 or	 edx, eax
  00960	8b 85 48 ff ff
	ff		 mov	 eax, DWORD PTR _search$[ebp+4]
  00966	89 50 08	 mov	 DWORD PTR [eax+8], edx
$LN39@draw_apach:

; 1192 : 						}
; 1193 : 					}
; 1194 : 
; 1195 : 					{
; 1196 : 						//
; 1197 : 						// APU lights
; 1198 : 						//
; 1199 : 						search.search_depth = 0;

  00969	c7 85 4c ff ff
	ff 00 00 00 00	 mov	 DWORD PTR _search$[ebp+8], 0

; 1200 : 						search.search_object = virtual_cockpit_lights_inst3d;

  00973	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_lights_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  00978	89 85 44 ff ff
	ff		 mov	 DWORD PTR _search$[ebp], eax

; 1201 : 						search.sub_object_index = OBJECT_3D_SUB_OBJECT_ARNEH_AH64D_LIGHT_APU;

  0097e	c7 85 50 ff ff
	ff 23 01 00 00	 mov	 DWORD PTR _search$[ebp+12], 291 ; 00000123H

; 1202 : 						if (find_object_3d_sub_object (&search) == SUB_OBJECT_SEARCH_RESULT_OBJECT_FOUND)

  00988	8d 85 44 ff ff
	ff		 lea	 eax, DWORD PTR _search$[ebp]
  0098e	50		 push	 eax
  0098f	e8 00 00 00 00	 call	 ?find_object_3d_sub_object@@YG?AW4SUB_OBJECT_SEARCH_RESULT_TYPES@@PAUOBJECT_3D_SUB_OBJECT_SEARCH_DATA@@@Z ; find_object_3d_sub_object
  00994	83 f8 01	 cmp	 eax, 1
  00997	75 4d		 jne	 SHORT $LN40@draw_apach

; 1203 : 						{
; 1204 : 							search.result_sub_object->visible_object = current_flight_dynamics->apu_rpm.value > 20.0;

  00999	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_flight_dynamics@@3PAUDYNAMICS_TYPE@@A ; current_flight_dynamics
  0099e	f3 0f 5a 80 3c
	1d 00 00	 cvtss2sd xmm0, DWORD PTR [eax+7484]
  009a6	66 0f 2f 05 00
	00 00 00	 comisd	 xmm0, QWORD PTR __real@4034000000000000
  009ae	76 0c		 jbe	 SHORT $LN90@draw_apach
  009b0	c7 85 e4 fe ff
	ff 01 00 00 00	 mov	 DWORD PTR tv422[ebp], 1
  009ba	eb 0a		 jmp	 SHORT $LN91@draw_apach
$LN90@draw_apach:
  009bc	c7 85 e4 fe ff
	ff 00 00 00 00	 mov	 DWORD PTR tv422[ebp], 0
$LN91@draw_apach:
  009c6	8b 8d e4 fe ff
	ff		 mov	 ecx, DWORD PTR tv422[ebp]
  009cc	83 e1 01	 and	 ecx, 1
  009cf	8b 95 48 ff ff
	ff		 mov	 edx, DWORD PTR _search$[ebp+4]
  009d5	8b 42 08	 mov	 eax, DWORD PTR [edx+8]
  009d8	83 e0 fe	 and	 eax, -2			; fffffffeH
  009db	0b c1		 or	 eax, ecx
  009dd	8b 8d 48 ff ff
	ff		 mov	 ecx, DWORD PTR _search$[ebp+4]
  009e3	89 41 08	 mov	 DWORD PTR [ecx+8], eax
$LN40@draw_apach:

; 1205 : 						}
; 1206 : 					}
; 1207 : 
; 1208 : 					virtual_cockpit_lights_inst3d->vp = vp;

  009e6	8b 3d 00 00 00
	00		 mov	 edi, DWORD PTR ?virtual_cockpit_lights_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  009ec	83 c7 08	 add	 edi, 8
  009ef	b9 0c 00 00 00	 mov	 ecx, 12			; 0000000cH
  009f4	8d 75 ac	 lea	 esi, DWORD PTR _vp$[ebp]
  009f7	f3 a5		 rep movsd

; 1209 : 					insert_relative_object_into_3d_scene (OBJECT_3D_DRAW_TYPE_ZBUFFERED_OBJECT, &virtual_cockpit_lights_inst3d->vp.position, virtual_cockpit_lights_inst3d);

  009f9	51		 push	 ecx
  009fa	0f 57 c0	 xorps	 xmm0, xmm0
  009fd	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00a02	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_lights_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  00a07	50		 push	 eax
  00a08	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?virtual_cockpit_lights_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  00a0e	83 c1 08	 add	 ecx, 8
  00a11	51		 push	 ecx
  00a12	6a 02		 push	 2
  00a14	e8 00 00 00 00	 call	 ?insert_zbiased_relative_object_into_3d_scene@@YGXW4OBJECT_3D_DRAWING_TYPES@@PAUVEC3D@@PAXM@Z ; insert_zbiased_relative_object_into_3d_scene
$LN31@draw_apach:

; 1210 : 				}
; 1211 : 			}
; 1212 : 
; 1213 : 			draw_3d_scene ();

  00a19	e8 00 00 00 00	 call	 ?draw_3d_scene@@YGXXZ	; draw_3d_scene

; 1214 : 
; 1215 : 			print_edit_wide_cockpit ();

  00a1e	e8 00 00 00 00	 call	 ?print_edit_wide_cockpit@@YGXXZ ; print_edit_wide_cockpit

; 1216 : 
; 1217 : 			end_3d_scene ();

  00a23	e8 00 00 00 00	 call	 ?end_3d_scene@@YGXXZ	; end_3d_scene
$LN22@draw_apach:

; 1218 : 		}
; 1219 : 	}
; 1220 : 
; 1221 : 	////////////////////////////////////////
; 1222 : 	//
; 1223 : 	// draw 3D scene with lighting
; 1224 : 	//
; 1225 : 	////////////////////////////////////////
; 1226 : 
; 1227 : 	if (!custom_3d_models.arneh_ah64d_cockpit && flags & (VIRTUAL_COCKPIT_INSTRUMENT_NEEDLES | VIRTUAL_COCKPIT_INSTRUMENT_LARGE_NEEDLES))

  00a28	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?custom_3d_models@@3Uinstalled_custom_3d_models@@A, 0
  00a2f	0f 85 6c 04 00
	00		 jne	 $LN42@draw_apach
  00a35	8b 45 08	 mov	 eax, DWORD PTR _flags$[ebp]
  00a38	25 00 00 06 00	 and	 eax, 393216		; 00060000H
  00a3d	0f 84 5e 04 00
	00		 je	 $LN42@draw_apach

; 1228 : 	{
; 1229 : 		set_cockpit_lighting (vp.attitude);

  00a43	8d 45 b8	 lea	 eax, DWORD PTR _vp$[ebp+12]
  00a46	50		 push	 eax
  00a47	e8 00 00 00 00	 call	 ?set_cockpit_lighting@@YGXQAY02M@Z ; set_cockpit_lighting

; 1230 : 
; 1231 : 		set_3d_active_environment (main_3d_single_light_env);

  00a4c	a1 00 00 00 00	 mov	 eax, DWORD PTR ?main_3d_single_light_env@@3PAUENV_3D@@A ; main_3d_single_light_env
  00a51	50		 push	 eax
  00a52	e8 00 00 00 00	 call	 ?set_3d_active_environment@@YGXPAUENV_3D@@@Z ; set_3d_active_environment

; 1232 : 
; 1233 : 		set_3d_view_distances (main_3d_single_light_env, 10.0, 0.1, 1.0, 0.0);

  00a57	51		 push	 ecx
  00a58	0f 57 c0	 xorps	 xmm0, xmm0
  00a5b	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00a60	51		 push	 ecx
  00a61	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3f800000
  00a69	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00a6e	51		 push	 ecx
  00a6f	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3dcccccd
  00a77	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00a7c	51		 push	 ecx
  00a7d	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@41200000
  00a85	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00a8a	a1 00 00 00 00	 mov	 eax, DWORD PTR ?main_3d_single_light_env@@3PAUENV_3D@@A ; main_3d_single_light_env
  00a8f	50		 push	 eax
  00a90	e8 00 00 00 00	 call	 ?set_3d_view_distances@@YGXPAUENV_3D@@MMMM@Z ; set_3d_view_distances

; 1234 : 
; 1235 : 		realise_3d_clip_extents (main_3d_single_light_env);

  00a95	a1 00 00 00 00	 mov	 eax, DWORD PTR ?main_3d_single_light_env@@3PAUENV_3D@@A ; main_3d_single_light_env
  00a9a	50		 push	 eax
  00a9b	e8 00 00 00 00	 call	 ?realise_3d_clip_extents@@YGXPAUENV_3D@@@Z ; realise_3d_clip_extents

; 1236 : 
; 1237 : 		clear_zbuffer_screen ();

  00aa0	e8 00 00 00 00	 call	 ?clear_zbuffer_screen@@YGXXZ ; clear_zbuffer_screen

; 1238 : 
; 1239 : 		if (begin_3d_scene ())

  00aa5	e8 00 00 00 00	 call	 ?begin_3d_scene@@YGHXZ	; begin_3d_scene
  00aaa	85 c0		 test	 eax, eax
  00aac	0f 84 ef 03 00
	00		 je	 $LN42@draw_apach

; 1240 : 		{
; 1241 : 			//
; 1242 : 			// instrument needles
; 1243 : 			//
; 1244 : 
; 1245 : 			if (flags & VIRTUAL_COCKPIT_INSTRUMENT_NEEDLES)

  00ab2	8b 45 08	 mov	 eax, DWORD PTR _flags$[ebp]
  00ab5	25 00 00 02 00	 and	 eax, 131072		; 00020000H
  00aba	0f 84 97 02 00
	00		 je	 $LN43@draw_apach

; 1246 : 			{
; 1247 : 				//
; 1248 : 				// ADI slip
; 1249 : 				//
; 1250 : 
; 1251 : 				search.search_depth = 0;

  00ac0	c7 85 4c ff ff
	ff 00 00 00 00	 mov	 DWORD PTR _search$[ebp+8], 0

; 1252 : 				search.search_object = virtual_cockpit_instrument_needles_inst3d;

  00aca	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_instrument_needles_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  00acf	89 85 44 ff ff
	ff		 mov	 DWORD PTR _search$[ebp], eax

; 1253 : 				search.sub_object_index = OBJECT_3D_SUB_OBJECT_APACHE_VIRTUAL_COCKPIT_ADI_SIDE_SLIP;

  00ad5	c7 85 50 ff ff
	ff 73 00 00 00	 mov	 DWORD PTR _search$[ebp+12], 115 ; 00000073H

; 1254 : 
; 1255 : 				if (find_object_3d_sub_object (&search) == SUB_OBJECT_SEARCH_RESULT_OBJECT_FOUND)

  00adf	8d 85 44 ff ff
	ff		 lea	 eax, DWORD PTR _search$[ebp]
  00ae5	50		 push	 eax
  00ae6	e8 00 00 00 00	 call	 ?find_object_3d_sub_object@@YG?AW4SUB_OBJECT_SEARCH_RESULT_TYPES@@PAUOBJECT_3D_SUB_OBJECT_SEARCH_DATA@@@Z ; find_object_3d_sub_object
  00aeb	83 f8 01	 cmp	 eax, 1
  00aee	75 0e		 jne	 SHORT $LN44@draw_apach

; 1256 : 				{
; 1257 : 					search.result_sub_object->relative_roll = get_apache_virtual_cockpit_adi_slip_indicator_needle_value ();

  00af0	e8 00 00 00 00	 call	 ?get_apache_virtual_cockpit_adi_slip_indicator_needle_value@@YGMXZ ; get_apache_virtual_cockpit_adi_slip_indicator_needle_value
  00af5	8b 85 48 ff ff
	ff		 mov	 eax, DWORD PTR _search$[ebp+4]
  00afb	d9 58 20	 fstp	 DWORD PTR [eax+32]
$LN44@draw_apach:

; 1258 : 				}
; 1259 : 
; 1260 : 				//
; 1261 : 				// airspeed
; 1262 : 				//
; 1263 : 
; 1264 : 				search.search_depth = 0;

  00afe	c7 85 4c ff ff
	ff 00 00 00 00	 mov	 DWORD PTR _search$[ebp+8], 0

; 1265 : 				search.search_object = virtual_cockpit_instrument_needles_inst3d;

  00b08	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_instrument_needles_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  00b0d	89 85 44 ff ff
	ff		 mov	 DWORD PTR _search$[ebp], eax

; 1266 : 				search.sub_object_index = OBJECT_3D_SUB_OBJECT_APACHE_VIRTUAL_COCKPIT_AIRSPEED;

  00b13	c7 85 50 ff ff
	ff 72 00 00 00	 mov	 DWORD PTR _search$[ebp+12], 114 ; 00000072H

; 1267 : 
; 1268 : 				if (find_object_3d_sub_object (&search) == SUB_OBJECT_SEARCH_RESULT_OBJECT_FOUND)

  00b1d	8d 85 44 ff ff
	ff		 lea	 eax, DWORD PTR _search$[ebp]
  00b23	50		 push	 eax
  00b24	e8 00 00 00 00	 call	 ?find_object_3d_sub_object@@YG?AW4SUB_OBJECT_SEARCH_RESULT_TYPES@@PAUOBJECT_3D_SUB_OBJECT_SEARCH_DATA@@@Z ; find_object_3d_sub_object
  00b29	83 f8 01	 cmp	 eax, 1
  00b2c	75 2d		 jne	 SHORT $LN45@draw_apach

; 1269 : 				{
; 1270 : 					search.result_sub_object->visible_object = draw_virtual_cockpit_needles_on_fixed_cockpits;

  00b2e	a1 00 00 00 00	 mov	 eax, DWORD PTR ?draw_virtual_cockpit_needles_on_fixed_cockpits@@3HA ; draw_virtual_cockpit_needles_on_fixed_cockpits
  00b33	83 e0 01	 and	 eax, 1
  00b36	8b 8d 48 ff ff
	ff		 mov	 ecx, DWORD PTR _search$[ebp+4]
  00b3c	8b 51 08	 mov	 edx, DWORD PTR [ecx+8]
  00b3f	83 e2 fe	 and	 edx, -2			; fffffffeH
  00b42	0b d0		 or	 edx, eax
  00b44	8b 85 48 ff ff
	ff		 mov	 eax, DWORD PTR _search$[ebp+4]
  00b4a	89 50 08	 mov	 DWORD PTR [eax+8], edx

; 1271 : 
; 1272 : 					search.result_sub_object->relative_roll = get_apache_virtual_cockpit_airspeed_indicator_needle_value ();

  00b4d	e8 00 00 00 00	 call	 ?get_apache_virtual_cockpit_airspeed_indicator_needle_value@@YGMXZ ; get_apache_virtual_cockpit_airspeed_indicator_needle_value
  00b52	8b 85 48 ff ff
	ff		 mov	 eax, DWORD PTR _search$[ebp+4]
  00b58	d9 58 20	 fstp	 DWORD PTR [eax+32]
$LN45@draw_apach:

; 1273 : 				}
; 1274 : 
; 1275 : 				//
; 1276 : 				// altimeter
; 1277 : 				//
; 1278 : 
; 1279 : 				search.search_depth = 0;

  00b5b	c7 85 4c ff ff
	ff 00 00 00 00	 mov	 DWORD PTR _search$[ebp+8], 0

; 1280 : 				search.search_object = virtual_cockpit_instrument_needles_inst3d;

  00b65	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_instrument_needles_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  00b6a	89 85 44 ff ff
	ff		 mov	 DWORD PTR _search$[ebp], eax

; 1281 : 				search.sub_object_index = OBJECT_3D_SUB_OBJECT_APACHE_VIRTUAL_COCKPIT_ALTIMETER;

  00b70	c7 85 50 ff ff
	ff 74 00 00 00	 mov	 DWORD PTR _search$[ebp+12], 116 ; 00000074H

; 1282 : 
; 1283 : 				if (find_object_3d_sub_object (&search) == SUB_OBJECT_SEARCH_RESULT_OBJECT_FOUND)

  00b7a	8d 85 44 ff ff
	ff		 lea	 eax, DWORD PTR _search$[ebp]
  00b80	50		 push	 eax
  00b81	e8 00 00 00 00	 call	 ?find_object_3d_sub_object@@YG?AW4SUB_OBJECT_SEARCH_RESULT_TYPES@@PAUOBJECT_3D_SUB_OBJECT_SEARCH_DATA@@@Z ; find_object_3d_sub_object
  00b86	83 f8 01	 cmp	 eax, 1
  00b89	75 2d		 jne	 SHORT $LN46@draw_apach

; 1284 : 				{
; 1285 : 					search.result_sub_object->visible_object = draw_virtual_cockpit_needles_on_fixed_cockpits;

  00b8b	a1 00 00 00 00	 mov	 eax, DWORD PTR ?draw_virtual_cockpit_needles_on_fixed_cockpits@@3HA ; draw_virtual_cockpit_needles_on_fixed_cockpits
  00b90	83 e0 01	 and	 eax, 1
  00b93	8b 8d 48 ff ff
	ff		 mov	 ecx, DWORD PTR _search$[ebp+4]
  00b99	8b 51 08	 mov	 edx, DWORD PTR [ecx+8]
  00b9c	83 e2 fe	 and	 edx, -2			; fffffffeH
  00b9f	0b d0		 or	 edx, eax
  00ba1	8b 85 48 ff ff
	ff		 mov	 eax, DWORD PTR _search$[ebp+4]
  00ba7	89 50 08	 mov	 DWORD PTR [eax+8], edx

; 1286 : 
; 1287 : 					search.result_sub_object->relative_roll = get_apache_virtual_cockpit_barometric_altimeter_needle_value ();

  00baa	e8 00 00 00 00	 call	 ?get_apache_virtual_cockpit_barometric_altimeter_needle_value@@YGMXZ ; get_apache_virtual_cockpit_barometric_altimeter_needle_value
  00baf	8b 85 48 ff ff
	ff		 mov	 eax, DWORD PTR _search$[ebp+4]
  00bb5	d9 58 20	 fstp	 DWORD PTR [eax+32]
$LN46@draw_apach:

; 1288 : 				}
; 1289 : 
; 1290 : 				//
; 1291 : 				// clock
; 1292 : 				//
; 1293 : 
; 1294 : 				{
; 1295 : 					float
; 1296 : 						hours,
; 1297 : 						minutes,
; 1298 : 						seconds;
; 1299 : 
; 1300 : 					//
; 1301 : 					// only read clock values if drawing virtual cockpit needles to prevent speeding up clock debug values
; 1302 : 					//
; 1303 : 
; 1304 : 					if (draw_virtual_cockpit_needles_on_fixed_cockpits)

  00bb8	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?draw_virtual_cockpit_needles_on_fixed_cockpits@@3HA, 0 ; draw_virtual_cockpit_needles_on_fixed_cockpits
  00bbf	74 1c		 je	 SHORT $LN47@draw_apach

; 1305 : 					{
; 1306 : 						get_apache_virtual_cockpit_clock_hand_values (&hours, &minutes, &seconds);

  00bc1	8d 85 28 ff ff
	ff		 lea	 eax, DWORD PTR _seconds$1[ebp]
  00bc7	50		 push	 eax
  00bc8	8d 8d 2c ff ff
	ff		 lea	 ecx, DWORD PTR _minutes$2[ebp]
  00bce	51		 push	 ecx
  00bcf	8d 95 30 ff ff
	ff		 lea	 edx, DWORD PTR _hours$3[ebp]
  00bd5	52		 push	 edx
  00bd6	e8 00 00 00 00	 call	 ?get_apache_virtual_cockpit_clock_hand_values@@YGXPAM00@Z ; get_apache_virtual_cockpit_clock_hand_values

; 1307 : 					}
; 1308 : 					else

  00bdb	eb 21		 jmp	 SHORT $LN48@draw_apach
$LN47@draw_apach:

; 1309 : 					{
; 1310 : 						hours = 0.0;

  00bdd	0f 57 c0	 xorps	 xmm0, xmm0
  00be0	f3 0f 11 85 30
	ff ff ff	 movss	 DWORD PTR _hours$3[ebp], xmm0

; 1311 : 						minutes = 0.0;

  00be8	0f 57 c0	 xorps	 xmm0, xmm0
  00beb	f3 0f 11 85 2c
	ff ff ff	 movss	 DWORD PTR _minutes$2[ebp], xmm0

; 1312 : 						seconds = 0.0;

  00bf3	0f 57 c0	 xorps	 xmm0, xmm0
  00bf6	f3 0f 11 85 28
	ff ff ff	 movss	 DWORD PTR _seconds$1[ebp], xmm0
$LN48@draw_apach:

; 1313 : 					}
; 1314 : 
; 1315 : 					//
; 1316 : 					// hour hand
; 1317 : 					//
; 1318 : 
; 1319 : 					search.search_depth = 0;

  00bfe	c7 85 4c ff ff
	ff 00 00 00 00	 mov	 DWORD PTR _search$[ebp+8], 0

; 1320 : 					search.search_object = virtual_cockpit_instrument_needles_inst3d;

  00c08	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_instrument_needles_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  00c0d	89 85 44 ff ff
	ff		 mov	 DWORD PTR _search$[ebp], eax

; 1321 : 					search.sub_object_index = OBJECT_3D_SUB_OBJECT_APACHE_VIRTUAL_COCKPIT_CLOCK_HOUR_HAND;

  00c13	c7 85 50 ff ff
	ff 75 00 00 00	 mov	 DWORD PTR _search$[ebp+12], 117 ; 00000075H

; 1322 : 
; 1323 : 					if (find_object_3d_sub_object (&search) == SUB_OBJECT_SEARCH_RESULT_OBJECT_FOUND)

  00c1d	8d 85 44 ff ff
	ff		 lea	 eax, DWORD PTR _search$[ebp]
  00c23	50		 push	 eax
  00c24	e8 00 00 00 00	 call	 ?find_object_3d_sub_object@@YG?AW4SUB_OBJECT_SEARCH_RESULT_TYPES@@PAUOBJECT_3D_SUB_OBJECT_SEARCH_DATA@@@Z ; find_object_3d_sub_object
  00c29	83 f8 01	 cmp	 eax, 1
  00c2c	75 32		 jne	 SHORT $LN49@draw_apach

; 1324 : 					{
; 1325 : 						search.result_sub_object->visible_object = draw_virtual_cockpit_needles_on_fixed_cockpits;

  00c2e	a1 00 00 00 00	 mov	 eax, DWORD PTR ?draw_virtual_cockpit_needles_on_fixed_cockpits@@3HA ; draw_virtual_cockpit_needles_on_fixed_cockpits
  00c33	83 e0 01	 and	 eax, 1
  00c36	8b 8d 48 ff ff
	ff		 mov	 ecx, DWORD PTR _search$[ebp+4]
  00c3c	8b 51 08	 mov	 edx, DWORD PTR [ecx+8]
  00c3f	83 e2 fe	 and	 edx, -2			; fffffffeH
  00c42	0b d0		 or	 edx, eax
  00c44	8b 85 48 ff ff
	ff		 mov	 eax, DWORD PTR _search$[ebp+4]
  00c4a	89 50 08	 mov	 DWORD PTR [eax+8], edx

; 1326 : 
; 1327 : 						search.result_sub_object->relative_roll = hours;

  00c4d	8b 85 48 ff ff
	ff		 mov	 eax, DWORD PTR _search$[ebp+4]
  00c53	f3 0f 10 85 30
	ff ff ff	 movss	 xmm0, DWORD PTR _hours$3[ebp]
  00c5b	f3 0f 11 40 20	 movss	 DWORD PTR [eax+32], xmm0
$LN49@draw_apach:

; 1328 : 					}
; 1329 : 
; 1330 : 					//
; 1331 : 					// minute hand
; 1332 : 					//
; 1333 : 
; 1334 : 					search.search_depth = 0;

  00c60	c7 85 4c ff ff
	ff 00 00 00 00	 mov	 DWORD PTR _search$[ebp+8], 0

; 1335 : 					search.search_object = virtual_cockpit_instrument_needles_inst3d;

  00c6a	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_instrument_needles_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  00c6f	89 85 44 ff ff
	ff		 mov	 DWORD PTR _search$[ebp], eax

; 1336 : 					search.sub_object_index = OBJECT_3D_SUB_OBJECT_APACHE_VIRTUAL_COCKPIT_CLOCK_MINUTE_HAND;

  00c75	c7 85 50 ff ff
	ff 77 00 00 00	 mov	 DWORD PTR _search$[ebp+12], 119 ; 00000077H

; 1337 : 
; 1338 : 					if (find_object_3d_sub_object (&search) == SUB_OBJECT_SEARCH_RESULT_OBJECT_FOUND)

  00c7f	8d 85 44 ff ff
	ff		 lea	 eax, DWORD PTR _search$[ebp]
  00c85	50		 push	 eax
  00c86	e8 00 00 00 00	 call	 ?find_object_3d_sub_object@@YG?AW4SUB_OBJECT_SEARCH_RESULT_TYPES@@PAUOBJECT_3D_SUB_OBJECT_SEARCH_DATA@@@Z ; find_object_3d_sub_object
  00c8b	83 f8 01	 cmp	 eax, 1
  00c8e	75 32		 jne	 SHORT $LN50@draw_apach

; 1339 : 					{
; 1340 : 						search.result_sub_object->visible_object = draw_virtual_cockpit_needles_on_fixed_cockpits;

  00c90	a1 00 00 00 00	 mov	 eax, DWORD PTR ?draw_virtual_cockpit_needles_on_fixed_cockpits@@3HA ; draw_virtual_cockpit_needles_on_fixed_cockpits
  00c95	83 e0 01	 and	 eax, 1
  00c98	8b 8d 48 ff ff
	ff		 mov	 ecx, DWORD PTR _search$[ebp+4]
  00c9e	8b 51 08	 mov	 edx, DWORD PTR [ecx+8]
  00ca1	83 e2 fe	 and	 edx, -2			; fffffffeH
  00ca4	0b d0		 or	 edx, eax
  00ca6	8b 85 48 ff ff
	ff		 mov	 eax, DWORD PTR _search$[ebp+4]
  00cac	89 50 08	 mov	 DWORD PTR [eax+8], edx

; 1341 : 
; 1342 : 						search.result_sub_object->relative_roll = minutes;

  00caf	8b 85 48 ff ff
	ff		 mov	 eax, DWORD PTR _search$[ebp+4]
  00cb5	f3 0f 10 85 2c
	ff ff ff	 movss	 xmm0, DWORD PTR _minutes$2[ebp]
  00cbd	f3 0f 11 40 20	 movss	 DWORD PTR [eax+32], xmm0
$LN50@draw_apach:

; 1343 : 					}
; 1344 : 
; 1345 : 					//
; 1346 : 					// second hand
; 1347 : 					//
; 1348 : 
; 1349 : 					search.search_depth = 0;

  00cc2	c7 85 4c ff ff
	ff 00 00 00 00	 mov	 DWORD PTR _search$[ebp+8], 0

; 1350 : 					search.search_object = virtual_cockpit_instrument_needles_inst3d;

  00ccc	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_instrument_needles_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  00cd1	89 85 44 ff ff
	ff		 mov	 DWORD PTR _search$[ebp], eax

; 1351 : 					search.sub_object_index = OBJECT_3D_SUB_OBJECT_APACHE_VIRTUAL_COCKPIT_CLOCK_SECOND_HAND;

  00cd7	c7 85 50 ff ff
	ff 76 00 00 00	 mov	 DWORD PTR _search$[ebp+12], 118 ; 00000076H

; 1352 : 
; 1353 : 					if (find_object_3d_sub_object (&search) == SUB_OBJECT_SEARCH_RESULT_OBJECT_FOUND)

  00ce1	8d 85 44 ff ff
	ff		 lea	 eax, DWORD PTR _search$[ebp]
  00ce7	50		 push	 eax
  00ce8	e8 00 00 00 00	 call	 ?find_object_3d_sub_object@@YG?AW4SUB_OBJECT_SEARCH_RESULT_TYPES@@PAUOBJECT_3D_SUB_OBJECT_SEARCH_DATA@@@Z ; find_object_3d_sub_object
  00ced	83 f8 01	 cmp	 eax, 1
  00cf0	75 32		 jne	 SHORT $LN51@draw_apach

; 1354 : 					{
; 1355 : 						search.result_sub_object->visible_object = draw_virtual_cockpit_needles_on_fixed_cockpits;

  00cf2	a1 00 00 00 00	 mov	 eax, DWORD PTR ?draw_virtual_cockpit_needles_on_fixed_cockpits@@3HA ; draw_virtual_cockpit_needles_on_fixed_cockpits
  00cf7	83 e0 01	 and	 eax, 1
  00cfa	8b 8d 48 ff ff
	ff		 mov	 ecx, DWORD PTR _search$[ebp+4]
  00d00	8b 51 08	 mov	 edx, DWORD PTR [ecx+8]
  00d03	83 e2 fe	 and	 edx, -2			; fffffffeH
  00d06	0b d0		 or	 edx, eax
  00d08	8b 85 48 ff ff
	ff		 mov	 eax, DWORD PTR _search$[ebp+4]
  00d0e	89 50 08	 mov	 DWORD PTR [eax+8], edx

; 1356 : 
; 1357 : 						search.result_sub_object->relative_roll = seconds;

  00d11	8b 85 48 ff ff
	ff		 mov	 eax, DWORD PTR _search$[ebp+4]
  00d17	f3 0f 10 85 28
	ff ff ff	 movss	 xmm0, DWORD PTR _seconds$1[ebp]
  00d1f	f3 0f 11 40 20	 movss	 DWORD PTR [eax+32], xmm0
$LN51@draw_apach:

; 1358 : 					}
; 1359 : 				}
; 1360 : 
; 1361 : /*
; 1362 :    				vp_current_position = vp_position;
; 1363 : 
; 1364 : 				vp_current_position.x += dx; // -0.019;
; 1365 : 				vp_current_position.y += dy; // + 0.024;
; 1366 : 				vp_current_position.z += dz; // -0.042;
; 1367 : 
; 1368 : 				multiply_matrix3x3_vec3d(&vp_world_position, head_rotation, &vp_current_position);
; 1369 : 
; 1370 : 				vp.x = vp_world_position.x;
; 1371 : 				vp.y = vp_world_position.y;
; 1372 : 				vp.z = vp_world_position.z;
; 1373 : */
; 1374 : 				virtual_cockpit_instrument_needles_inst3d->vp = vp;

  00d24	8b 3d 00 00 00
	00		 mov	 edi, DWORD PTR ?virtual_cockpit_instrument_needles_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  00d2a	83 c7 08	 add	 edi, 8
  00d2d	b9 0c 00 00 00	 mov	 ecx, 12			; 0000000cH
  00d32	8d 75 ac	 lea	 esi, DWORD PTR _vp$[ebp]
  00d35	f3 a5		 rep movsd

; 1375 : 
; 1376 : 				insert_relative_object_into_3d_scene (OBJECT_3D_DRAW_TYPE_ZBUFFERED_OBJECT, &virtual_cockpit_instrument_needles_inst3d->vp.position, virtual_cockpit_instrument_needles_inst3d);

  00d37	51		 push	 ecx
  00d38	0f 57 c0	 xorps	 xmm0, xmm0
  00d3b	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00d40	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_instrument_needles_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  00d45	50		 push	 eax
  00d46	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?virtual_cockpit_instrument_needles_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  00d4c	83 c1 08	 add	 ecx, 8
  00d4f	51		 push	 ecx
  00d50	6a 02		 push	 2
  00d52	e8 00 00 00 00	 call	 ?insert_zbiased_relative_object_into_3d_scene@@YGXW4OBJECT_3D_DRAWING_TYPES@@PAUVEC3D@@PAXM@Z ; insert_zbiased_relative_object_into_3d_scene
$LN43@draw_apach:

; 1377 : 			}
; 1378 : 
; 1379 : 			//
; 1380 : 			// instrument large needles
; 1381 : 			//
; 1382 : 
; 1383 : 			if (flags & VIRTUAL_COCKPIT_INSTRUMENT_LARGE_NEEDLES)

  00d57	8b 45 08	 mov	 eax, DWORD PTR _flags$[ebp]
  00d5a	25 00 00 04 00	 and	 eax, 262144		; 00040000H
  00d5f	0f 84 32 01 00
	00		 je	 $LN52@draw_apach

; 1384 : 			{
; 1385 : 				//
; 1386 : 				// ADI slip
; 1387 : 				//
; 1388 : 
; 1389 : 				search.search_depth = 0;

  00d65	c7 85 4c ff ff
	ff 00 00 00 00	 mov	 DWORD PTR _search$[ebp+8], 0

; 1390 : 				search.search_object = virtual_cockpit_instrument_large_needles_inst3d;

  00d6f	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_instrument_large_needles_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  00d74	89 85 44 ff ff
	ff		 mov	 DWORD PTR _search$[ebp], eax

; 1391 : 				search.sub_object_index = OBJECT_3D_SUB_OBJECT_APACHE_VIRTUAL_COCKPIT_ADI_SIDE_SLIP;

  00d7a	c7 85 50 ff ff
	ff 73 00 00 00	 mov	 DWORD PTR _search$[ebp+12], 115 ; 00000073H

; 1392 : 
; 1393 : 				if (find_object_3d_sub_object (&search) == SUB_OBJECT_SEARCH_RESULT_OBJECT_FOUND)

  00d84	8d 85 44 ff ff
	ff		 lea	 eax, DWORD PTR _search$[ebp]
  00d8a	50		 push	 eax
  00d8b	e8 00 00 00 00	 call	 ?find_object_3d_sub_object@@YG?AW4SUB_OBJECT_SEARCH_RESULT_TYPES@@PAUOBJECT_3D_SUB_OBJECT_SEARCH_DATA@@@Z ; find_object_3d_sub_object
  00d90	83 f8 01	 cmp	 eax, 1
  00d93	75 0e		 jne	 SHORT $LN53@draw_apach

; 1394 : 				{
; 1395 : 					search.result_sub_object->relative_roll = get_apache_virtual_cockpit_adi_slip_indicator_needle_value ();

  00d95	e8 00 00 00 00	 call	 ?get_apache_virtual_cockpit_adi_slip_indicator_needle_value@@YGMXZ ; get_apache_virtual_cockpit_adi_slip_indicator_needle_value
  00d9a	8b 85 48 ff ff
	ff		 mov	 eax, DWORD PTR _search$[ebp+4]
  00da0	d9 58 20	 fstp	 DWORD PTR [eax+32]
$LN53@draw_apach:

; 1396 : 				}
; 1397 : 
; 1398 : 				//
; 1399 : 				// airspeed
; 1400 : 				//
; 1401 : 
; 1402 : 				search.search_depth = 0;

  00da3	c7 85 4c ff ff
	ff 00 00 00 00	 mov	 DWORD PTR _search$[ebp+8], 0

; 1403 : 				search.search_object = virtual_cockpit_instrument_large_needles_inst3d;

  00dad	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_instrument_large_needles_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  00db2	89 85 44 ff ff
	ff		 mov	 DWORD PTR _search$[ebp], eax

; 1404 : 				search.sub_object_index = OBJECT_3D_SUB_OBJECT_APACHE_VIRTUAL_COCKPIT_AIRSPEED;

  00db8	c7 85 50 ff ff
	ff 72 00 00 00	 mov	 DWORD PTR _search$[ebp+12], 114 ; 00000072H

; 1405 : 
; 1406 : 				if (find_object_3d_sub_object (&search) == SUB_OBJECT_SEARCH_RESULT_OBJECT_FOUND)

  00dc2	8d 85 44 ff ff
	ff		 lea	 eax, DWORD PTR _search$[ebp]
  00dc8	50		 push	 eax
  00dc9	e8 00 00 00 00	 call	 ?find_object_3d_sub_object@@YG?AW4SUB_OBJECT_SEARCH_RESULT_TYPES@@PAUOBJECT_3D_SUB_OBJECT_SEARCH_DATA@@@Z ; find_object_3d_sub_object
  00dce	83 f8 01	 cmp	 eax, 1
  00dd1	75 0e		 jne	 SHORT $LN54@draw_apach

; 1407 : 				{
; 1408 : 					search.result_sub_object->relative_roll = get_apache_virtual_cockpit_airspeed_indicator_needle_value ();

  00dd3	e8 00 00 00 00	 call	 ?get_apache_virtual_cockpit_airspeed_indicator_needle_value@@YGMXZ ; get_apache_virtual_cockpit_airspeed_indicator_needle_value
  00dd8	8b 85 48 ff ff
	ff		 mov	 eax, DWORD PTR _search$[ebp+4]
  00dde	d9 58 20	 fstp	 DWORD PTR [eax+32]
$LN54@draw_apach:

; 1409 : 				}
; 1410 : 
; 1411 : 				vp_current_position = vp_position;

  00de1	8b 45 a0	 mov	 eax, DWORD PTR _vp_position$[ebp]
  00de4	89 45 94	 mov	 DWORD PTR _vp_current_position$[ebp], eax
  00de7	8b 4d a4	 mov	 ecx, DWORD PTR _vp_position$[ebp+4]
  00dea	89 4d 98	 mov	 DWORD PTR _vp_current_position$[ebp+4], ecx
  00ded	8b 55 a8	 mov	 edx, DWORD PTR _vp_position$[ebp+8]
  00df0	89 55 9c	 mov	 DWORD PTR _vp_current_position$[ebp+8], edx

; 1412 : 
; 1413 : 				vp_current_position.x += -0.019;

  00df3	f3 0f 5a 45 94	 cvtss2sd xmm0, DWORD PTR _vp_current_position$[ebp]
  00df8	f2 0f 58 05 00
	00 00 00	 addsd	 xmm0, QWORD PTR __real@bf9374bc6a7ef9db
  00e00	f2 0f 5a c0	 cvtsd2ss xmm0, xmm0
  00e04	f3 0f 11 45 94	 movss	 DWORD PTR _vp_current_position$[ebp], xmm0

; 1414 : 				vp_current_position.y += 0.024;

  00e09	f3 0f 5a 45 98	 cvtss2sd xmm0, DWORD PTR _vp_current_position$[ebp+4]
  00e0e	f2 0f 58 05 00
	00 00 00	 addsd	 xmm0, QWORD PTR __real@3f989374bc6a7efa
  00e16	f2 0f 5a c0	 cvtsd2ss xmm0, xmm0
  00e1a	f3 0f 11 45 98	 movss	 DWORD PTR _vp_current_position$[ebp+4], xmm0

; 1415 : 				vp_current_position.z += -0.042;

  00e1f	f3 0f 5a 45 9c	 cvtss2sd xmm0, DWORD PTR _vp_current_position$[ebp+8]
  00e24	f2 0f 58 05 00
	00 00 00	 addsd	 xmm0, QWORD PTR __real@bfa5810624dd2f1b
  00e2c	f2 0f 5a c0	 cvtsd2ss xmm0, xmm0
  00e30	f3 0f 11 45 9c	 movss	 DWORD PTR _vp_current_position$[ebp+8], xmm0

; 1416 : 
; 1417 : 				multiply_matrix3x3_vec3d(&vp_world_position, head_rotation, &vp_current_position);

  00e35	8d 45 94	 lea	 eax, DWORD PTR _vp_current_position$[ebp]
  00e38	50		 push	 eax
  00e39	8d 4d dc	 lea	 ecx, DWORD PTR _head_rotation$[ebp]
  00e3c	51		 push	 ecx
  00e3d	8d 55 88	 lea	 edx, DWORD PTR _vp_world_position$[ebp]
  00e40	52		 push	 edx
  00e41	e8 00 00 00 00	 call	 ?multiply_matrix3x3_vec3d@@YGXPAUVEC3D@@QAY02$$CBMPBU1@@Z ; multiply_matrix3x3_vec3d

; 1418 : 
; 1419 : 				vp.x = vp_world_position.x;

  00e46	f3 0f 10 45 88	 movss	 xmm0, DWORD PTR _vp_world_position$[ebp]
  00e4b	f3 0f 11 45 ac	 movss	 DWORD PTR _vp$[ebp], xmm0

; 1420 : 				vp.y = vp_world_position.y;

  00e50	f3 0f 10 45 8c	 movss	 xmm0, DWORD PTR _vp_world_position$[ebp+4]
  00e55	f3 0f 11 45 b0	 movss	 DWORD PTR _vp$[ebp+4], xmm0

; 1421 : 				vp.z = vp_world_position.z;

  00e5a	f3 0f 10 45 90	 movss	 xmm0, DWORD PTR _vp_world_position$[ebp+8]
  00e5f	f3 0f 11 45 b4	 movss	 DWORD PTR _vp$[ebp+8], xmm0

; 1422 : 
; 1423 : 				virtual_cockpit_instrument_large_needles_inst3d->vp = vp;

  00e64	8b 3d 00 00 00
	00		 mov	 edi, DWORD PTR ?virtual_cockpit_instrument_large_needles_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  00e6a	83 c7 08	 add	 edi, 8
  00e6d	b9 0c 00 00 00	 mov	 ecx, 12			; 0000000cH
  00e72	8d 75 ac	 lea	 esi, DWORD PTR _vp$[ebp]
  00e75	f3 a5		 rep movsd

; 1424 : 
; 1425 : 				insert_relative_object_into_3d_scene (OBJECT_3D_DRAW_TYPE_ZBUFFERED_OBJECT, &virtual_cockpit_instrument_large_needles_inst3d->vp.position, virtual_cockpit_instrument_large_needles_inst3d);

  00e77	51		 push	 ecx
  00e78	0f 57 c0	 xorps	 xmm0, xmm0
  00e7b	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00e80	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_instrument_large_needles_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  00e85	50		 push	 eax
  00e86	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?virtual_cockpit_instrument_large_needles_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  00e8c	83 c1 08	 add	 ecx, 8
  00e8f	51		 push	 ecx
  00e90	6a 02		 push	 2
  00e92	e8 00 00 00 00	 call	 ?insert_zbiased_relative_object_into_3d_scene@@YGXW4OBJECT_3D_DRAWING_TYPES@@PAUVEC3D@@PAXM@Z ; insert_zbiased_relative_object_into_3d_scene
$LN52@draw_apach:

; 1426 : 			}
; 1427 : 
; 1428 : 			draw_3d_scene ();

  00e97	e8 00 00 00 00	 call	 ?draw_3d_scene@@YGXXZ	; draw_3d_scene

; 1429 : 
; 1430 : 			end_3d_scene ();

  00e9c	e8 00 00 00 00	 call	 ?end_3d_scene@@YGXXZ	; end_3d_scene
$LN42@draw_apach:

; 1431 : 		}
; 1432 : 	}
; 1433 : 
; 1434 : 	////////////////////////////////////////
; 1435 : 	//
; 1436 : 	// draw 3D scene without lighting
; 1437 : 	//
; 1438 : 	////////////////////////////////////////
; 1439 : 
; 1440 : 	if (!custom_3d_models.arneh_ah64d_cockpit)

  00ea1	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?custom_3d_models@@3Uinstalled_custom_3d_models@@A, 0
  00ea8	0f 85 b1 02 00
	00		 jne	 $LN60@draw_apach

; 1441 : 	{
; 1442 : 		if
; 1443 : 		(
; 1444 : 			(flags & VIRTUAL_COCKPIT_DISPLAY_VIEW) &&
; 1445 : 			(flags & VIRTUAL_COCKPIT_LHS_MFD_DISPLAY) &&

  00eae	8b 45 08	 mov	 eax, DWORD PTR _flags$[ebp]
  00eb1	25 00 00 10 00	 and	 eax, 1048576		; 00100000H
  00eb6	0f 84 fa 00 00
	00		 je	 $LN56@draw_apach
  00ebc	8b 45 08	 mov	 eax, DWORD PTR _flags$[ebp]
  00ebf	83 e0 20	 and	 eax, 32			; 00000020H
  00ec2	0f 84 ee 00 00
	00		 je	 $LN56@draw_apach
  00ec8	8b 45 08	 mov	 eax, DWORD PTR _flags$[ebp]
  00ecb	83 e0 40	 and	 eax, 64			; 00000040H
  00ece	0f 84 e2 00 00
	00		 je	 $LN56@draw_apach

; 1446 : 			(flags & VIRTUAL_COCKPIT_RHS_MFD_DISPLAY)
; 1447 : 		)
; 1448 : 		{
; 1449 : 			set_3d_active_environment (main_3d_env);

  00ed4	a1 00 00 00 00	 mov	 eax, DWORD PTR ?main_3d_env@@3PAUENV_3D@@A ; main_3d_env
  00ed9	50		 push	 eax
  00eda	e8 00 00 00 00	 call	 ?set_3d_active_environment@@YGXPAUENV_3D@@@Z ; set_3d_active_environment

; 1450 : 
; 1451 : 			set_3d_view_distances (main_3d_env, 10.0, 0.1, 1.0, 0.0);

  00edf	51		 push	 ecx
  00ee0	0f 57 c0	 xorps	 xmm0, xmm0
  00ee3	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00ee8	51		 push	 ecx
  00ee9	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3f800000
  00ef1	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00ef6	51		 push	 ecx
  00ef7	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3dcccccd
  00eff	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00f04	51		 push	 ecx
  00f05	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@41200000
  00f0d	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00f12	a1 00 00 00 00	 mov	 eax, DWORD PTR ?main_3d_env@@3PAUENV_3D@@A ; main_3d_env
  00f17	50		 push	 eax
  00f18	e8 00 00 00 00	 call	 ?set_3d_view_distances@@YGXPAUENV_3D@@MMMM@Z ; set_3d_view_distances

; 1452 : 
; 1453 : 			realise_3d_clip_extents (main_3d_env);

  00f1d	a1 00 00 00 00	 mov	 eax, DWORD PTR ?main_3d_env@@3PAUENV_3D@@A ; main_3d_env
  00f22	50		 push	 eax
  00f23	e8 00 00 00 00	 call	 ?realise_3d_clip_extents@@YGXPAUENV_3D@@@Z ; realise_3d_clip_extents

; 1454 : 
; 1455 : 			recalculate_3d_environment_settings (main_3d_env);

  00f28	a1 00 00 00 00	 mov	 eax, DWORD PTR ?main_3d_env@@3PAUENV_3D@@A ; main_3d_env
  00f2d	50		 push	 eax
  00f2e	e8 00 00 00 00	 call	 ?recalculate_3d_environment_settings@@YGXPAUENV_3D@@@Z ; recalculate_3d_environment_settings

; 1456 : 
; 1457 : 			clear_zbuffer_screen ();

  00f33	e8 00 00 00 00	 call	 ?clear_zbuffer_screen@@YGXXZ ; clear_zbuffer_screen

; 1458 : 
; 1459 : 			if (begin_3d_scene ())

  00f38	e8 00 00 00 00	 call	 ?begin_3d_scene@@YGHXZ	; begin_3d_scene
  00f3d	85 c0		 test	 eax, eax
  00f3f	74 70		 je	 SHORT $LN58@draw_apach

; 1460 : 			{
; 1461 : 				//
; 1462 : 				// lhs mfd
; 1463 : 				//
; 1464 : 
; 1465 : 				virtual_cockpit_display_view_mfd_inst3d->vp = vp;

  00f41	8b 3d 00 00 00
	00		 mov	 edi, DWORD PTR ?virtual_cockpit_display_view_mfd_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  00f47	83 c7 08	 add	 edi, 8
  00f4a	b9 0c 00 00 00	 mov	 ecx, 12			; 0000000cH
  00f4f	8d 75 ac	 lea	 esi, DWORD PTR _vp$[ebp]
  00f52	f3 a5		 rep movsd

; 1466 : 
; 1467 : 				insert_relative_object_into_3d_scene (OBJECT_3D_DRAW_TYPE_ZBUFFERED_OBJECT, &virtual_cockpit_display_view_mfd_inst3d->vp.position, virtual_cockpit_display_view_mfd_inst3d);

  00f54	51		 push	 ecx
  00f55	0f 57 c0	 xorps	 xmm0, xmm0
  00f58	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00f5d	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_display_view_mfd_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  00f62	50		 push	 eax
  00f63	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?virtual_cockpit_display_view_mfd_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  00f69	83 c1 08	 add	 ecx, 8
  00f6c	51		 push	 ecx
  00f6d	6a 02		 push	 2
  00f6f	e8 00 00 00 00	 call	 ?insert_zbiased_relative_object_into_3d_scene@@YGXW4OBJECT_3D_DRAWING_TYPES@@PAUVEC3D@@PAXM@Z ; insert_zbiased_relative_object_into_3d_scene

; 1468 : 
; 1469 : 				//
; 1470 : 				// rhs mfd
; 1471 : 				//
; 1472 : 
; 1473 : 				virtual_cockpit_display_view_mfd_inst3d->vp = vp;

  00f74	8b 3d 00 00 00
	00		 mov	 edi, DWORD PTR ?virtual_cockpit_display_view_mfd_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  00f7a	83 c7 08	 add	 edi, 8
  00f7d	b9 0c 00 00 00	 mov	 ecx, 12			; 0000000cH
  00f82	8d 75 ac	 lea	 esi, DWORD PTR _vp$[ebp]
  00f85	f3 a5		 rep movsd

; 1474 : 
; 1475 : 				insert_relative_object_into_3d_scene (OBJECT_3D_DRAW_TYPE_ZBUFFERED_OBJECT, &virtual_cockpit_display_view_mfd_inst3d->vp.position, virtual_cockpit_display_view_mfd_inst3d);

  00f87	51		 push	 ecx
  00f88	0f 57 c0	 xorps	 xmm0, xmm0
  00f8b	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00f90	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_display_view_mfd_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  00f95	50		 push	 eax
  00f96	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?virtual_cockpit_display_view_mfd_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  00f9c	83 c1 08	 add	 ecx, 8
  00f9f	51		 push	 ecx
  00fa0	6a 02		 push	 2
  00fa2	e8 00 00 00 00	 call	 ?insert_zbiased_relative_object_into_3d_scene@@YGXW4OBJECT_3D_DRAWING_TYPES@@PAUVEC3D@@PAXM@Z ; insert_zbiased_relative_object_into_3d_scene

; 1476 : 
; 1477 : 				draw_3d_scene ();

  00fa7	e8 00 00 00 00	 call	 ?draw_3d_scene@@YGXXZ	; draw_3d_scene

; 1478 : 
; 1479 : 				end_3d_scene ();

  00fac	e8 00 00 00 00	 call	 ?end_3d_scene@@YGXXZ	; end_3d_scene
$LN58@draw_apach:

; 1480 : 			}
; 1481 : 		}
; 1482 : 		else

  00fb1	e9 a9 01 00 00	 jmp	 $LN60@draw_apach
$LN56@draw_apach:

; 1483 : 		{
; 1484 : 			if (flags & (VIRTUAL_COCKPIT_UPFRONT_DISPLAY | VIRTUAL_COCKPIT_LHS_MFD_DISPLAY | VIRTUAL_COCKPIT_RHS_MFD_DISPLAY))

  00fb6	8b 45 08	 mov	 eax, DWORD PTR _flags$[ebp]
  00fb9	25 60 00 08 00	 and	 eax, 524384		; 00080060H
  00fbe	0f 84 9b 01 00
	00		 je	 $LN60@draw_apach

; 1485 : 			{
; 1486 : 				set_3d_active_environment (main_3d_env);

  00fc4	a1 00 00 00 00	 mov	 eax, DWORD PTR ?main_3d_env@@3PAUENV_3D@@A ; main_3d_env
  00fc9	50		 push	 eax
  00fca	e8 00 00 00 00	 call	 ?set_3d_active_environment@@YGXPAUENV_3D@@@Z ; set_3d_active_environment

; 1487 : 
; 1488 : 				set_3d_view_distances (main_3d_env, 10.0, 0.1, 1.0, 0.0);

  00fcf	51		 push	 ecx
  00fd0	0f 57 c0	 xorps	 xmm0, xmm0
  00fd3	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00fd8	51		 push	 ecx
  00fd9	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3f800000
  00fe1	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00fe6	51		 push	 ecx
  00fe7	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3dcccccd
  00fef	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00ff4	51		 push	 ecx
  00ff5	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@41200000
  00ffd	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  01002	a1 00 00 00 00	 mov	 eax, DWORD PTR ?main_3d_env@@3PAUENV_3D@@A ; main_3d_env
  01007	50		 push	 eax
  01008	e8 00 00 00 00	 call	 ?set_3d_view_distances@@YGXPAUENV_3D@@MMMM@Z ; set_3d_view_distances

; 1489 : 
; 1490 : 				realise_3d_clip_extents (main_3d_env);

  0100d	a1 00 00 00 00	 mov	 eax, DWORD PTR ?main_3d_env@@3PAUENV_3D@@A ; main_3d_env
  01012	50		 push	 eax
  01013	e8 00 00 00 00	 call	 ?realise_3d_clip_extents@@YGXPAUENV_3D@@@Z ; realise_3d_clip_extents

; 1491 : 
; 1492 : 				recalculate_3d_environment_settings (main_3d_env);

  01018	a1 00 00 00 00	 mov	 eax, DWORD PTR ?main_3d_env@@3PAUENV_3D@@A ; main_3d_env
  0101d	50		 push	 eax
  0101e	e8 00 00 00 00	 call	 ?recalculate_3d_environment_settings@@YGXPAUENV_3D@@@Z ; recalculate_3d_environment_settings

; 1493 : 
; 1494 : 				clear_zbuffer_screen ();

  01023	e8 00 00 00 00	 call	 ?clear_zbuffer_screen@@YGXXZ ; clear_zbuffer_screen

; 1495 : 
; 1496 : 				if (begin_3d_scene ())

  01028	e8 00 00 00 00	 call	 ?begin_3d_scene@@YGHXZ	; begin_3d_scene
  0102d	85 c0		 test	 eax, eax
  0102f	0f 84 2a 01 00
	00		 je	 $LN60@draw_apach

; 1497 : 				{
; 1498 : 					//
; 1499 : 					// up-front display
; 1500 : 					//
; 1501 : 
; 1502 : 					if (flags & VIRTUAL_COCKPIT_UPFRONT_DISPLAY)

  01035	8b 45 08	 mov	 eax, DWORD PTR _flags$[ebp]
  01038	25 00 00 08 00	 and	 eax, 524288		; 00080000H
  0103d	74 33		 je	 SHORT $LN61@draw_apach

; 1503 : 					{
; 1504 : 						virtual_cockpit_upfront_display_inst3d->vp = vp;

  0103f	8b 3d 00 00 00
	00		 mov	 edi, DWORD PTR ?virtual_cockpit_upfront_display_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  01045	83 c7 08	 add	 edi, 8
  01048	b9 0c 00 00 00	 mov	 ecx, 12			; 0000000cH
  0104d	8d 75 ac	 lea	 esi, DWORD PTR _vp$[ebp]
  01050	f3 a5		 rep movsd

; 1505 : 
; 1506 : 						insert_relative_object_into_3d_scene (OBJECT_3D_DRAW_TYPE_ZBUFFERED_OBJECT, &virtual_cockpit_upfront_display_inst3d->vp.position, virtual_cockpit_upfront_display_inst3d);

  01052	51		 push	 ecx
  01053	0f 57 c0	 xorps	 xmm0, xmm0
  01056	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  0105b	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_upfront_display_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  01060	50		 push	 eax
  01061	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?virtual_cockpit_upfront_display_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  01067	83 c1 08	 add	 ecx, 8
  0106a	51		 push	 ecx
  0106b	6a 02		 push	 2
  0106d	e8 00 00 00 00	 call	 ?insert_zbiased_relative_object_into_3d_scene@@YGXW4OBJECT_3D_DRAWING_TYPES@@PAUVEC3D@@PAXM@Z ; insert_zbiased_relative_object_into_3d_scene
$LN61@draw_apach:

; 1507 : 					}
; 1508 : 
; 1509 : 					vp_current_position = vp_position;

  01072	8b 45 a0	 mov	 eax, DWORD PTR _vp_position$[ebp]
  01075	89 45 94	 mov	 DWORD PTR _vp_current_position$[ebp], eax
  01078	8b 4d a4	 mov	 ecx, DWORD PTR _vp_position$[ebp+4]
  0107b	89 4d 98	 mov	 DWORD PTR _vp_current_position$[ebp+4], ecx
  0107e	8b 55 a8	 mov	 edx, DWORD PTR _vp_position$[ebp+8]
  01081	89 55 9c	 mov	 DWORD PTR _vp_current_position$[ebp+8], edx

; 1510 : 
; 1511 : 					vp_current_position.y += 0.008;

  01084	f3 0f 5a 45 98	 cvtss2sd xmm0, DWORD PTR _vp_current_position$[ebp+4]
  01089	f2 0f 58 05 00
	00 00 00	 addsd	 xmm0, QWORD PTR __real@3f80624dd2f1a9fc
  01091	f2 0f 5a c0	 cvtsd2ss xmm0, xmm0
  01095	f3 0f 11 45 98	 movss	 DWORD PTR _vp_current_position$[ebp+4], xmm0

; 1512 : 					vp_current_position.z += 0.005;

  0109a	f3 0f 5a 45 9c	 cvtss2sd xmm0, DWORD PTR _vp_current_position$[ebp+8]
  0109f	f2 0f 58 05 00
	00 00 00	 addsd	 xmm0, QWORD PTR __real@3f747ae147ae147b
  010a7	f2 0f 5a c0	 cvtsd2ss xmm0, xmm0
  010ab	f3 0f 11 45 9c	 movss	 DWORD PTR _vp_current_position$[ebp+8], xmm0

; 1513 : 
; 1514 : 					multiply_matrix3x3_vec3d(&vp_world_position, head_rotation, &vp_current_position);

  010b0	8d 45 94	 lea	 eax, DWORD PTR _vp_current_position$[ebp]
  010b3	50		 push	 eax
  010b4	8d 4d dc	 lea	 ecx, DWORD PTR _head_rotation$[ebp]
  010b7	51		 push	 ecx
  010b8	8d 55 88	 lea	 edx, DWORD PTR _vp_world_position$[ebp]
  010bb	52		 push	 edx
  010bc	e8 00 00 00 00	 call	 ?multiply_matrix3x3_vec3d@@YGXPAUVEC3D@@QAY02$$CBMPBU1@@Z ; multiply_matrix3x3_vec3d

; 1515 : 
; 1516 : 					vp.x = vp_world_position.x;

  010c1	f3 0f 10 45 88	 movss	 xmm0, DWORD PTR _vp_world_position$[ebp]
  010c6	f3 0f 11 45 ac	 movss	 DWORD PTR _vp$[ebp], xmm0

; 1517 : 					vp.y = vp_world_position.y;

  010cb	f3 0f 10 45 8c	 movss	 xmm0, DWORD PTR _vp_world_position$[ebp+4]
  010d0	f3 0f 11 45 b0	 movss	 DWORD PTR _vp$[ebp+4], xmm0

; 1518 : 					vp.z = vp_world_position.z;

  010d5	f3 0f 10 45 90	 movss	 xmm0, DWORD PTR _vp_world_position$[ebp+8]
  010da	f3 0f 11 45 b4	 movss	 DWORD PTR _vp$[ebp+8], xmm0

; 1519 : 
; 1520 : 					//
; 1521 : 					// lhs mfd
; 1522 : 					//
; 1523 : 
; 1524 : 					if (flags & VIRTUAL_COCKPIT_LHS_MFD_DISPLAY)

  010df	8b 45 08	 mov	 eax, DWORD PTR _flags$[ebp]
  010e2	83 e0 20	 and	 eax, 32			; 00000020H
  010e5	74 33		 je	 SHORT $LN62@draw_apach

; 1525 : 					{
; 1526 : 						virtual_cockpit_lhs_mfd_inst3d->vp = vp;

  010e7	8b 3d 00 00 00
	00		 mov	 edi, DWORD PTR ?virtual_cockpit_lhs_mfd_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  010ed	83 c7 08	 add	 edi, 8
  010f0	b9 0c 00 00 00	 mov	 ecx, 12			; 0000000cH
  010f5	8d 75 ac	 lea	 esi, DWORD PTR _vp$[ebp]
  010f8	f3 a5		 rep movsd

; 1527 : 
; 1528 : 						insert_relative_object_into_3d_scene (OBJECT_3D_DRAW_TYPE_ZBUFFERED_OBJECT, &virtual_cockpit_lhs_mfd_inst3d->vp.position, virtual_cockpit_lhs_mfd_inst3d);

  010fa	51		 push	 ecx
  010fb	0f 57 c0	 xorps	 xmm0, xmm0
  010fe	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  01103	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_lhs_mfd_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  01108	50		 push	 eax
  01109	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?virtual_cockpit_lhs_mfd_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  0110f	83 c1 08	 add	 ecx, 8
  01112	51		 push	 ecx
  01113	6a 02		 push	 2
  01115	e8 00 00 00 00	 call	 ?insert_zbiased_relative_object_into_3d_scene@@YGXW4OBJECT_3D_DRAWING_TYPES@@PAUVEC3D@@PAXM@Z ; insert_zbiased_relative_object_into_3d_scene
$LN62@draw_apach:

; 1529 : 					}
; 1530 : 
; 1531 : 					//
; 1532 : 					// rhs mfd
; 1533 : 					//
; 1534 : 
; 1535 : 					if (flags & VIRTUAL_COCKPIT_RHS_MFD_DISPLAY)

  0111a	8b 45 08	 mov	 eax, DWORD PTR _flags$[ebp]
  0111d	83 e0 40	 and	 eax, 64			; 00000040H
  01120	74 33		 je	 SHORT $LN63@draw_apach

; 1536 : 					{
; 1537 : 						virtual_cockpit_rhs_mfd_inst3d->vp = vp;

  01122	8b 3d 00 00 00
	00		 mov	 edi, DWORD PTR ?virtual_cockpit_rhs_mfd_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  01128	83 c7 08	 add	 edi, 8
  0112b	b9 0c 00 00 00	 mov	 ecx, 12			; 0000000cH
  01130	8d 75 ac	 lea	 esi, DWORD PTR _vp$[ebp]
  01133	f3 a5		 rep movsd

; 1538 : 
; 1539 : 						insert_relative_object_into_3d_scene (OBJECT_3D_DRAW_TYPE_ZBUFFERED_OBJECT, &virtual_cockpit_rhs_mfd_inst3d->vp.position, virtual_cockpit_rhs_mfd_inst3d);

  01135	51		 push	 ecx
  01136	0f 57 c0	 xorps	 xmm0, xmm0
  01139	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  0113e	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_rhs_mfd_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  01143	50		 push	 eax
  01144	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?virtual_cockpit_rhs_mfd_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  0114a	83 c1 08	 add	 ecx, 8
  0114d	51		 push	 ecx
  0114e	6a 02		 push	 2
  01150	e8 00 00 00 00	 call	 ?insert_zbiased_relative_object_into_3d_scene@@YGXW4OBJECT_3D_DRAWING_TYPES@@PAUVEC3D@@PAXM@Z ; insert_zbiased_relative_object_into_3d_scene
$LN63@draw_apach:

; 1540 : 					}
; 1541 : 
; 1542 : 					draw_3d_scene ();

  01155	e8 00 00 00 00	 call	 ?draw_3d_scene@@YGXXZ	; draw_3d_scene

; 1543 : 
; 1544 : 					end_3d_scene ();

  0115a	e8 00 00 00 00	 call	 ?end_3d_scene@@YGXXZ	; end_3d_scene
$LN60@draw_apach:

; 1545 : 				}
; 1546 : 			}
; 1547 : 		}
; 1548 : 	}
; 1549 : 
; 1550 : 	////////////////////////////////////////
; 1551 : 	//
; 1552 : 	// draw 3D scene with lighting
; 1553 : 	//
; 1554 : 	////////////////////////////////////////
; 1555 : 
; 1556 : 	if (get_view_mode () != VIEW_MODE_COCKPIT_PANEL_SPECIAL_APACHE_LHS_MFD
; 1557 : 		&& get_view_mode () != VIEW_MODE_COCKPIT_PANEL_SPECIAL_APACHE_RHS_MFD)

  0115f	83 3d 00 00 00
	00 1c		 cmp	 DWORD PTR ?view_mode@@3W4VIEW_MODES@@A, 28 ; view_mode, 0000001cH
  01166	74 2a		 je	 SHORT $LN64@draw_apach
  01168	83 3d 00 00 00
	00 1d		 cmp	 DWORD PTR ?view_mode@@3W4VIEW_MODES@@A, 29 ; view_mode, 0000001dH
  0116f	74 21		 je	 SHORT $LN64@draw_apach

; 1558 : 	{
; 1559 : 		vp.x = vp_cockpit_world_position.x;

  01171	f3 0f 10 85 7c
	ff ff ff	 movss	 xmm0, DWORD PTR _vp_cockpit_world_position$[ebp]
  01179	f3 0f 11 45 ac	 movss	 DWORD PTR _vp$[ebp], xmm0

; 1560 : 		vp.y = vp_cockpit_world_position.y;

  0117e	f3 0f 10 45 80	 movss	 xmm0, DWORD PTR _vp_cockpit_world_position$[ebp+4]
  01183	f3 0f 11 45 b0	 movss	 DWORD PTR _vp$[ebp+4], xmm0

; 1561 : 		vp.z = vp_cockpit_world_position.z;

  01188	f3 0f 10 45 84	 movss	 xmm0, DWORD PTR _vp_cockpit_world_position$[ebp+8]
  0118d	f3 0f 11 45 b4	 movss	 DWORD PTR _vp$[ebp+8], xmm0
$LN64@draw_apach:

; 1562 : 	}
; 1563 : 
; 1564 : 	//
; 1565 : 	// draw fillet to mask TADS display
; 1566 : 	//
; 1567 : 
; 1568 : 	if
; 1569 : 	(!custom_3d_models.arneh_ah64d_cockpit &&
; 1570 : 		(d3d_can_render_to_texture) &&
; 1571 : 		//always draw fillet not only with tads
; 1572 : 		//(get_apache_tads_display_visible ()) &&
; 1573 : 		(flags & (VIRTUAL_COCKPIT_COCKPIT)) &&
; 1574 : 		(flags & (VIRTUAL_COCKPIT_LHS_MFD_DISPLAY)) &&

  01192	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?custom_3d_models@@3Uinstalled_custom_3d_models@@A, 0
  01199	0f 85 bb 01 00
	00		 jne	 $LN66@draw_apach
  0119f	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?d3d_can_render_to_texture@@3HA, 0 ; d3d_can_render_to_texture
  011a6	0f 84 ae 01 00
	00		 je	 $LN66@draw_apach
  011ac	8b 45 08	 mov	 eax, DWORD PTR _flags$[ebp]
  011af	83 e0 01	 and	 eax, 1
  011b2	0f 84 a2 01 00
	00		 je	 $LN66@draw_apach
  011b8	8b 45 08	 mov	 eax, DWORD PTR _flags$[ebp]
  011bb	83 e0 20	 and	 eax, 32			; 00000020H
  011be	0f 84 96 01 00
	00		 je	 $LN66@draw_apach
  011c4	8b 45 08	 mov	 eax, DWORD PTR _flags$[ebp]
  011c7	83 e0 40	 and	 eax, 64			; 00000040H
  011ca	0f 84 8a 01 00
	00		 je	 $LN66@draw_apach

; 1575 : 		(flags & (VIRTUAL_COCKPIT_RHS_MFD_DISPLAY))
; 1576 : 	)
; 1577 : 	{
; 1578 : 		set_cockpit_white_lighting (vp.attitude);

  011d0	8d 45 b8	 lea	 eax, DWORD PTR _vp$[ebp+12]
  011d3	50		 push	 eax
  011d4	e8 00 00 00 00	 call	 ?set_cockpit_white_lighting@@YGXQAY02M@Z ; set_cockpit_white_lighting

; 1579 : 
; 1580 : 		set_3d_active_environment (main_3d_single_light_env);

  011d9	a1 00 00 00 00	 mov	 eax, DWORD PTR ?main_3d_single_light_env@@3PAUENV_3D@@A ; main_3d_single_light_env
  011de	50		 push	 eax
  011df	e8 00 00 00 00	 call	 ?set_3d_active_environment@@YGXPAUENV_3D@@@Z ; set_3d_active_environment

; 1581 : 
; 1582 : 		set_3d_view_distances (main_3d_single_light_env, 10.0, 0.1, 1.0, 0.0);

  011e4	51		 push	 ecx
  011e5	0f 57 c0	 xorps	 xmm0, xmm0
  011e8	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  011ed	51		 push	 ecx
  011ee	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3f800000
  011f6	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  011fb	51		 push	 ecx
  011fc	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3dcccccd
  01204	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  01209	51		 push	 ecx
  0120a	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@41200000
  01212	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  01217	a1 00 00 00 00	 mov	 eax, DWORD PTR ?main_3d_single_light_env@@3PAUENV_3D@@A ; main_3d_single_light_env
  0121c	50		 push	 eax
  0121d	e8 00 00 00 00	 call	 ?set_3d_view_distances@@YGXPAUENV_3D@@MMMM@Z ; set_3d_view_distances

; 1583 : 
; 1584 : 		realise_3d_clip_extents (main_3d_single_light_env);

  01222	a1 00 00 00 00	 mov	 eax, DWORD PTR ?main_3d_single_light_env@@3PAUENV_3D@@A ; main_3d_single_light_env
  01227	50		 push	 eax
  01228	e8 00 00 00 00	 call	 ?realise_3d_clip_extents@@YGXPAUENV_3D@@@Z ; realise_3d_clip_extents

; 1585 : 
; 1586 : 		clear_zbuffer_screen ();

  0122d	e8 00 00 00 00	 call	 ?clear_zbuffer_screen@@YGXXZ ; clear_zbuffer_screen

; 1587 : 
; 1588 : 		if (begin_3d_scene ())

  01232	e8 00 00 00 00	 call	 ?begin_3d_scene@@YGHXZ	; begin_3d_scene
  01237	85 c0		 test	 eax, eax
  01239	0f 84 1b 01 00
	00		 je	 $LN66@draw_apach

; 1589 : 		{
; 1590 : 			switch (get_local_entity_int_value (get_session_entity (), INT_TYPE_DAY_SEGMENT_TYPE))

  0123f	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?session_entity@@3PAUENTITY@@A, 0 ; session_entity
  01246	74 0f		 je	 SHORT $LN92@draw_apach
  01248	a1 00 00 00 00	 mov	 eax, DWORD PTR ?session_entity@@3PAUENTITY@@A ; session_entity
  0124d	8b 08		 mov	 ecx, DWORD PTR [eax]
  0124f	89 8d e4 fe ff
	ff		 mov	 DWORD PTR tv647[ebp], ecx
  01255	eb 20		 jmp	 SHORT $LN93@draw_apach
$LN92@draw_apach:
  01257	68 36 06 00 00	 push	 1590			; 00000636H
  0125c	68 00 00 00 00	 push	 OFFSET ??_C@_0FA@DHMOLMNF@c?3?2users?2nhv90?2projects?2eech?2ap@
  01261	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  01267	52		 push	 edx
  01268	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  0126d	c7 85 e4 fe ff
	ff 00 00 00 00	 mov	 DWORD PTR tv647[ebp], 0
$LN93@draw_apach:
  01277	b8 01 00 00 00	 mov	 eax, 1
  0127c	85 c0		 test	 eax, eax
  0127e	74 0c		 je	 SHORT $LN94@draw_apach
  01280	c7 85 e0 fe ff
	ff 27 00 00 00	 mov	 DWORD PTR tv654[ebp], 39 ; 00000027H
  0128a	eb 20		 jmp	 SHORT $LN95@draw_apach
$LN94@draw_apach:
  0128c	68 36 06 00 00	 push	 1590			; 00000636H
  01291	68 00 00 00 00	 push	 OFFSET ??_C@_0FA@DHMOLMNF@c?3?2users?2nhv90?2projects?2eech?2ap@
  01296	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?overload_invalid_int_type_message@@3PBDB ; overload_invalid_int_type_message
  0129c	51		 push	 ecx
  0129d	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  012a2	c7 85 e0 fe ff
	ff 00 00 00 00	 mov	 DWORD PTR tv654[ebp], 0
$LN95@draw_apach:
  012ac	6a 27		 push	 39			; 00000027H
  012ae	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?session_entity@@3PAUENTITY@@A ; session_entity
  012b4	52		 push	 edx
  012b5	69 85 e4 fe ff
	ff 5c 04 00 00	 imul	 eax, DWORD PTR tv647[ebp], 1116
  012bf	8b 8d e0 fe ff
	ff		 mov	 ecx, DWORD PTR tv654[ebp]
  012c5	8b 94 88 00 00
	00 00		 mov	 edx, DWORD PTR ?fn_get_local_entity_int_value@@3PAY0BBH@P6GHPAUENTITY@@W4INT_TYPES@@@ZA[eax+ecx*4]
  012cc	ff d2		 call	 edx
  012ce	89 85 dc fe ff
	ff		 mov	 DWORD PTR tv660[ebp], eax
  012d4	83 bd dc fe ff
	ff 03		 cmp	 DWORD PTR tv660[ebp], 3
  012db	77 3f		 ja	 SHORT $LN4@draw_apach
  012dd	8b 85 dc fe ff
	ff		 mov	 eax, DWORD PTR tv660[ebp]
  012e3	ff 24 85 00 00
	00 00		 jmp	 DWORD PTR $LN97@draw_apach[eax*4]
$LN67@draw_apach:

; 1591 : 			{
; 1592 : 				////////////////////////////////////////
; 1593 : 				case DAY_SEGMENT_TYPE_DAWN:
; 1594 : 				////////////////////////////////////////
; 1595 : 				{
; 1596 : 					virtual_cockpit_inst3d = virtual_cockpit_fillet_level2_inst3d;

  012ea	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_fillet_level2_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  012ef	89 85 40 ff ff
	ff		 mov	 DWORD PTR _virtual_cockpit_inst3d$[ebp], eax

; 1597 : 
; 1598 : 					break;

  012f5	eb 25		 jmp	 SHORT $LN4@draw_apach
$LN68@draw_apach:

; 1599 : 				}
; 1600 : 				////////////////////////////////////////
; 1601 : 				case DAY_SEGMENT_TYPE_DAY:
; 1602 : 				////////////////////////////////////////
; 1603 : 				{
; 1604 : 					virtual_cockpit_inst3d = virtual_cockpit_fillet_level1_inst3d;

  012f7	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_fillet_level1_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  012fc	89 85 40 ff ff
	ff		 mov	 DWORD PTR _virtual_cockpit_inst3d$[ebp], eax

; 1605 : 
; 1606 : 					break;

  01302	eb 18		 jmp	 SHORT $LN4@draw_apach
$LN69@draw_apach:

; 1607 : 				}
; 1608 : 				////////////////////////////////////////
; 1609 : 				case DAY_SEGMENT_TYPE_DUSK:
; 1610 : 				////////////////////////////////////////
; 1611 : 				{
; 1612 : 					virtual_cockpit_inst3d = virtual_cockpit_fillet_level2_inst3d;

  01304	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_fillet_level2_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  01309	89 85 40 ff ff
	ff		 mov	 DWORD PTR _virtual_cockpit_inst3d$[ebp], eax

; 1613 : 
; 1614 : 					break;

  0130f	eb 0b		 jmp	 SHORT $LN4@draw_apach
$LN70@draw_apach:

; 1615 : 				}
; 1616 : 				////////////////////////////////////////
; 1617 : 				case DAY_SEGMENT_TYPE_NIGHT:
; 1618 : 				////////////////////////////////////////
; 1619 : 				{
; 1620 : 					virtual_cockpit_inst3d = virtual_cockpit_fillet_level3_inst3d;

  01311	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_fillet_level3_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  01316	89 85 40 ff ff
	ff		 mov	 DWORD PTR _virtual_cockpit_inst3d$[ebp], eax
$LN4@draw_apach:

; 1621 : 
; 1622 : 					break;
; 1623 : 				}
; 1624 : 			}
; 1625 : 
; 1626 : 			#if DEMO_VERSION
; 1627 : 
; 1628 : 			virtual_cockpit_inst3d = virtual_cockpit_fillet_level1_inst3d;
; 1629 : 
; 1630 : 			#endif
; 1631 : 
; 1632 : 			virtual_cockpit_inst3d->vp = vp;

  0131c	8b bd 40 ff ff
	ff		 mov	 edi, DWORD PTR _virtual_cockpit_inst3d$[ebp]
  01322	83 c7 08	 add	 edi, 8
  01325	b9 0c 00 00 00	 mov	 ecx, 12			; 0000000cH
  0132a	8d 75 ac	 lea	 esi, DWORD PTR _vp$[ebp]
  0132d	f3 a5		 rep movsd

; 1633 : 
; 1634 : 			insert_relative_object_into_3d_scene (OBJECT_3D_DRAW_TYPE_ZBUFFERED_OBJECT, &virtual_cockpit_inst3d->vp.position, virtual_cockpit_inst3d);

  0132f	51		 push	 ecx
  01330	0f 57 c0	 xorps	 xmm0, xmm0
  01333	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  01338	8b 85 40 ff ff
	ff		 mov	 eax, DWORD PTR _virtual_cockpit_inst3d$[ebp]
  0133e	50		 push	 eax
  0133f	8b 8d 40 ff ff
	ff		 mov	 ecx, DWORD PTR _virtual_cockpit_inst3d$[ebp]
  01345	83 c1 08	 add	 ecx, 8
  01348	51		 push	 ecx
  01349	6a 02		 push	 2
  0134b	e8 00 00 00 00	 call	 ?insert_zbiased_relative_object_into_3d_scene@@YGXW4OBJECT_3D_DRAWING_TYPES@@PAUVEC3D@@PAXM@Z ; insert_zbiased_relative_object_into_3d_scene

; 1635 : 
; 1636 : 			draw_3d_scene ();

  01350	e8 00 00 00 00	 call	 ?draw_3d_scene@@YGXXZ	; draw_3d_scene

; 1637 : 
; 1638 : 			end_3d_scene ();

  01355	e8 00 00 00 00	 call	 ?end_3d_scene@@YGXXZ	; end_3d_scene
$LN66@draw_apach:

; 1639 : 		}
; 1640 : 	}
; 1641 : 
; 1642 : //VJ wideview mod, date: 18-mar-03
; 1643 : #if DEBUG_MODULE
; 1644 : 	if (check_key(DIK_NUMPAD7))
; 1645 : 	{
; 1646 : 		system_sleep(20);
; 1647 : 		dy+= 0.001;
; 1648 : 	}
; 1649 : 	if (check_key(DIK_NUMPAD9))
; 1650 : 	{
; 1651 : 		system_sleep(20);
; 1652 : 		dy-= 0.001;
; 1653 : 	}
; 1654 : 	if (check_key(DIK_NUMPADSLASH))
; 1655 : 	{
; 1656 : 		system_sleep(20);
; 1657 : 		dx+= 0.001;
; 1658 : 	}
; 1659 : 	if (check_key(DIK_NUMPADSTAR))
; 1660 : 	{
; 1661 : 		system_sleep(20);
; 1662 : 		dx-= 0.001;
; 1663 : 	}
; 1664 : 	if (check_key(DIK_NUMPADMINUS))
; 1665 : 	{
; 1666 : 		system_sleep(20);
; 1667 : 		dz+= 0.001;
; 1668 : 	}
; 1669 : 	if (check_key(DIK_NUMPADPLUS))
; 1670 : 	{
; 1671 : 		system_sleep(20);
; 1672 : 		dz-= 0.001;
; 1673 : 	}
; 1674 : #endif
; 1675 : 
; 1676 : 	move_edit_wide_cockpit ();

  0135a	e8 00 00 00 00	 call	 ?move_edit_wide_cockpit@@YGXXZ ; move_edit_wide_cockpit

; 1677 : 
; 1678 : 	////////////////////////////////////////
; 1679 : 	//
; 1680 : 	// tidy up
; 1681 : 	//
; 1682 : 	////////////////////////////////////////
; 1683 : 
; 1684 : 	#if RECOGNITION_GUIDE
; 1685 : 
; 1686 : 	set_3d_view_distances (main_3d_env, 10000.0, 100.0, 1.0, 0.0);
; 1687 : 
; 1688 : 	#else
; 1689 : 
; 1690 : 	set_3d_view_distances (main_3d_env, 10000.0, 1.0, 1.0, 0.0);

  0135f	51		 push	 ecx
  01360	0f 57 c0	 xorps	 xmm0, xmm0
  01363	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  01368	51		 push	 ecx
  01369	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3f800000
  01371	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  01376	51		 push	 ecx
  01377	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3f800000
  0137f	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  01384	51		 push	 ecx
  01385	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@461c4000
  0138d	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  01392	a1 00 00 00 00	 mov	 eax, DWORD PTR ?main_3d_env@@3PAUENV_3D@@A ; main_3d_env
  01397	50		 push	 eax
  01398	e8 00 00 00 00	 call	 ?set_3d_view_distances@@YGXPAUENV_3D@@MMMM@Z ; set_3d_view_distances

; 1691 : 
; 1692 : 	#endif
; 1693 : 
; 1694 : 	realise_3d_clip_extents (main_3d_env);

  0139d	a1 00 00 00 00	 mov	 eax, DWORD PTR ?main_3d_env@@3PAUENV_3D@@A ; main_3d_env
  013a2	50		 push	 eax
  013a3	e8 00 00 00 00	 call	 ?realise_3d_clip_extents@@YGXPAUENV_3D@@@Z ; realise_3d_clip_extents

; 1695 : }

  013a8	5f		 pop	 edi
  013a9	5e		 pop	 esi
  013aa	5b		 pop	 ebx
  013ab	8b e5		 mov	 esp, ebp
  013ad	5d		 pop	 ebp
  013ae	c2 04 00	 ret	 4
  013b1	0f 1f 00	 npad	 3
$LN96@draw_apach:
  013b4	00 00 00 00	 DD	 $LN26@draw_apach
  013b8	00 00 00 00	 DD	 $LN27@draw_apach
  013bc	00 00 00 00	 DD	 $LN28@draw_apach
  013c0	00 00 00 00	 DD	 $LN29@draw_apach
$LN97@draw_apach:
  013c4	00 00 00 00	 DD	 $LN67@draw_apach
  013c8	00 00 00 00	 DD	 $LN68@draw_apach
  013cc	00 00 00 00	 DD	 $LN69@draw_apach
  013d0	00 00 00 00	 DD	 $LN70@draw_apach
?draw_apache_internal_virtual_cockpit@@YGXI@Z ENDP	; draw_apache_internal_virtual_cockpit
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\gunships\cockpits\apache\ap_vckpt.c
;	COMDAT ?update_apache_virtual_cockpit@@YGXXZ
_TEXT	SEGMENT
?update_apache_virtual_cockpit@@YGXXZ PROC		; update_apache_virtual_cockpit, COMDAT

; 339  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 340  : }

  00009	5f		 pop	 edi
  0000a	5e		 pop	 esi
  0000b	5b		 pop	 ebx
  0000c	8b e5		 mov	 esp, ebp
  0000e	5d		 pop	 ebp
  0000f	c3		 ret	 0
?update_apache_virtual_cockpit@@YGXXZ ENDP		; update_apache_virtual_cockpit
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\gunships\cockpits\apache\ap_vckpt.c
;	COMDAT ?deinitialise_apache_virtual_cockpit@@YGXXZ
_TEXT	SEGMENT
?deinitialise_apache_virtual_cockpit@@YGXXZ PROC	; deinitialise_apache_virtual_cockpit, COMDAT

; 278  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 279  : 	//
; 280  : 	// 3D instances
; 281  : 	//
; 282  : 
; 283  : 	if (custom_3d_models.arneh_ah64d_cockpit)

  00009	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?custom_3d_models@@3Uinstalled_custom_3d_models@@A, 0
  00010	74 23		 je	 SHORT $LN2@deinitiali

; 284  : 	{
; 285  : 		destruct_3d_object(virtual_cockpit_level1_inst3d);

  00012	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_level1_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  00017	50		 push	 eax
  00018	e8 00 00 00 00	 call	 ?destruct_3d_object@@YGXPAUOBJECT_3D_INSTANCE@@@Z ; destruct_3d_object

; 286  : 		destruct_3d_object(virtual_cockpit_nose_inst3d);

  0001d	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_nose_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  00022	50		 push	 eax
  00023	e8 00 00 00 00	 call	 ?destruct_3d_object@@YGXPAUOBJECT_3D_INSTANCE@@@Z ; destruct_3d_object

; 287  : 		destruct_3d_object(virtual_cockpit_lights_inst3d);

  00028	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_lights_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  0002d	50		 push	 eax
  0002e	e8 00 00 00 00	 call	 ?destruct_3d_object@@YGXPAUOBJECT_3D_INSTANCE@@@Z ; destruct_3d_object

; 288  : 	}
; 289  : 	else

  00033	eb 42		 jmp	 SHORT $LN3@deinitiali
$LN2@deinitiali:

; 290  : 	{
; 291  : 		destruct_3d_object (virtual_cockpit_level1_inst3d);

  00035	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_level1_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  0003a	50		 push	 eax
  0003b	e8 00 00 00 00	 call	 ?destruct_3d_object@@YGXPAUOBJECT_3D_INSTANCE@@@Z ; destruct_3d_object

; 292  : 		destruct_3d_object (virtual_cockpit_level2_inst3d);

  00040	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_level2_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  00045	50		 push	 eax
  00046	e8 00 00 00 00	 call	 ?destruct_3d_object@@YGXPAUOBJECT_3D_INSTANCE@@@Z ; destruct_3d_object

; 293  : 		destruct_3d_object (virtual_cockpit_level3_inst3d);

  0004b	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_level3_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  00050	50		 push	 eax
  00051	e8 00 00 00 00	 call	 ?destruct_3d_object@@YGXPAUOBJECT_3D_INSTANCE@@@Z ; destruct_3d_object

; 294  : 		destruct_3d_object (virtual_cockpit_fillet_level1_inst3d);

  00056	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_fillet_level1_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  0005b	50		 push	 eax
  0005c	e8 00 00 00 00	 call	 ?destruct_3d_object@@YGXPAUOBJECT_3D_INSTANCE@@@Z ; destruct_3d_object

; 295  : 		destruct_3d_object (virtual_cockpit_fillet_level2_inst3d);

  00061	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_fillet_level2_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  00066	50		 push	 eax
  00067	e8 00 00 00 00	 call	 ?destruct_3d_object@@YGXPAUOBJECT_3D_INSTANCE@@@Z ; destruct_3d_object

; 296  : 		destruct_3d_object (virtual_cockpit_fillet_level3_inst3d);

  0006c	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_fillet_level3_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  00071	50		 push	 eax
  00072	e8 00 00 00 00	 call	 ?destruct_3d_object@@YGXPAUOBJECT_3D_INSTANCE@@@Z ; destruct_3d_object
$LN3@deinitiali:

; 297  : 	}
; 298  : 
; 299  : 	destruct_3d_object (virtual_cockpit_main_rotor_inst3d);

  00077	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_main_rotor_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  0007c	50		 push	 eax
  0007d	e8 00 00 00 00	 call	 ?destruct_3d_object@@YGXPAUOBJECT_3D_INSTANCE@@@Z ; destruct_3d_object

; 300  : 
; 301  : 	destruct_3d_object (virtual_cockpit_adi_inst3d);

  00082	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_adi_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  00087	50		 push	 eax
  00088	e8 00 00 00 00	 call	 ?destruct_3d_object@@YGXPAUOBJECT_3D_INSTANCE@@@Z ; destruct_3d_object

; 302  : 
; 303  : 	destruct_3d_object (virtual_cockpit_large_adi_inst3d);

  0008d	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_large_adi_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  00092	50		 push	 eax
  00093	e8 00 00 00 00	 call	 ?destruct_3d_object@@YGXPAUOBJECT_3D_INSTANCE@@@Z ; destruct_3d_object

; 304  : 
; 305  : 	destruct_3d_object (virtual_cockpit_compass_inst3d);

  00098	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_compass_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  0009d	50		 push	 eax
  0009e	e8 00 00 00 00	 call	 ?destruct_3d_object@@YGXPAUOBJECT_3D_INSTANCE@@@Z ; destruct_3d_object

; 306  : 
; 307  : 	destruct_3d_object (virtual_cockpit_instrument_needles_inst3d);

  000a3	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_instrument_needles_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  000a8	50		 push	 eax
  000a9	e8 00 00 00 00	 call	 ?destruct_3d_object@@YGXPAUOBJECT_3D_INSTANCE@@@Z ; destruct_3d_object

; 308  : 
; 309  : 	destruct_3d_object (virtual_cockpit_instrument_large_needles_inst3d);

  000ae	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_instrument_large_needles_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  000b3	50		 push	 eax
  000b4	e8 00 00 00 00	 call	 ?destruct_3d_object@@YGXPAUOBJECT_3D_INSTANCE@@@Z ; destruct_3d_object

; 310  : 
; 311  : 	destruct_3d_object (virtual_cockpit_upfront_display_inst3d);

  000b9	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_upfront_display_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  000be	50		 push	 eax
  000bf	e8 00 00 00 00	 call	 ?destruct_3d_object@@YGXPAUOBJECT_3D_INSTANCE@@@Z ; destruct_3d_object

; 312  : 
; 313  : 	destruct_3d_object (virtual_cockpit_lhs_mfd_inst3d);

  000c4	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_lhs_mfd_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  000c9	50		 push	 eax
  000ca	e8 00 00 00 00	 call	 ?destruct_3d_object@@YGXPAUOBJECT_3D_INSTANCE@@@Z ; destruct_3d_object

; 314  : 
; 315  : 	destruct_3d_object (virtual_cockpit_rhs_mfd_inst3d);

  000cf	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_rhs_mfd_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  000d4	50		 push	 eax
  000d5	e8 00 00 00 00	 call	 ?destruct_3d_object@@YGXPAUOBJECT_3D_INSTANCE@@@Z ; destruct_3d_object

; 316  : 
; 317  : 	destruct_3d_object (virtual_cockpit_display_view_mfd_inst3d);

  000da	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_display_view_mfd_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  000df	50		 push	 eax
  000e0	e8 00 00 00 00	 call	 ?destruct_3d_object@@YGXPAUOBJECT_3D_INSTANCE@@@Z ; destruct_3d_object

; 318  : 
; 319  : 	//
; 320  : 	// wipers and rain
; 321  : 	//
; 322  : 
; 323  : 	deinitialise_apache_virtual_cockpit_wiper_and_rain_effect ();

  000e5	e8 00 00 00 00	 call	 ?deinitialise_apache_virtual_cockpit_wiper_and_rain_effect@@YGXXZ ; deinitialise_apache_virtual_cockpit_wiper_and_rain_effect

; 324  : 
; 325  : 	//
; 326  : 	// virtual cockpit cameras
; 327  : 	//
; 328  : 
; 329  : 	deinitialise_common_virtual_cockpit_cameras ();

  000ea	e8 00 00 00 00	 call	 ?deinitialise_common_virtual_cockpit_cameras@@YGXXZ ; deinitialise_common_virtual_cockpit_cameras

; 330  : 
; 331  : 	deinitialise_altitude_counter();

  000ef	e8 00 00 00 00	 call	 ?deinitialise_altitude_counter@@YGXXZ ; deinitialise_altitude_counter

; 332  : }

  000f4	5f		 pop	 edi
  000f5	5e		 pop	 esi
  000f6	5b		 pop	 ebx
  000f7	8b e5		 mov	 esp, ebp
  000f9	5d		 pop	 ebp
  000fa	c3		 ret	 0
?deinitialise_apache_virtual_cockpit@@YGXXZ ENDP	; deinitialise_apache_virtual_cockpit
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\gunships\cockpits\apache\ap_vckpt.c
;	COMDAT ?initialise_apache_virtual_cockpit@@YGXXZ
_TEXT	SEGMENT
_search$1 = -60						; size = 56
_index$2 = -4						; size = 4
?initialise_apache_virtual_cockpit@@YGXXZ PROC		; initialise_apache_virtual_cockpit, COMDAT

; 130  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 7c	 sub	 esp, 124		; 0000007cH
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 131  : 	//
; 132  : 	// 3D instances
; 133  : 	//
; 134  : 
; 135  : 	virtual_cockpit_inst3d = NULL;

  00009	c7 05 00 00 00
	00 00 00 00 00	 mov	 DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A, 0 ; virtual_cockpit_inst3d

; 136  : 
; 137  : 	pilot_head_pitch_datum = rad(wide_cockpit_position[WIDEVIEW_APACHE_PILOT].c.p);

  00013	b8 24 00 00 00	 mov	 eax, 36			; 00000024H
  00018	c1 e0 02	 shl	 eax, 2
  0001b	f3 0f 10 80 20
	00 00 00	 movss	 xmm0, DWORD PTR ?wide_cockpit_position@@3PAUCOCKPIT_POSITION@@A[eax+32]
  00023	f3 0f 59 05 00
	00 00 00	 mulss	 xmm0, DWORD PTR __real@3c8efa35
  0002b	f3 0f 11 05 00
	00 00 00	 movss	 DWORD PTR ?pilot_head_pitch_datum@@3MA, xmm0

; 138  : 	co_pilot_head_pitch_datum = rad(wide_cockpit_position[WIDEVIEW_APACHE_COPILOT].c.p);

  00033	b8 24 00 00 00	 mov	 eax, 36			; 00000024H
  00038	6b c8 05	 imul	 ecx, eax, 5
  0003b	f3 0f 10 81 20
	00 00 00	 movss	 xmm0, DWORD PTR ?wide_cockpit_position@@3PAUCOCKPIT_POSITION@@A[ecx+32]
  00043	f3 0f 59 05 00
	00 00 00	 mulss	 xmm0, DWORD PTR __real@3c8efa35
  0004b	f3 0f 11 05 00
	00 00 00	 movss	 DWORD PTR ?co_pilot_head_pitch_datum@@3MA, xmm0

; 139  : 
; 140  : 	if (custom_3d_models.arneh_ah64d_cockpit)

  00053	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?custom_3d_models@@3Uinstalled_custom_3d_models@@A, 0
  0005a	0f 84 91 00 00
	00		 je	 $LN5@initialise

; 141  : 	{
; 142  : 		virtual_cockpit_level1_inst3d = construct_3d_object (OBJECT_3D_ARNEH_AH64D_COCKPIT);

  00060	68 cb 0a 00 00	 push	 2763			; 00000acbH
  00065	e8 00 00 00 00	 call	 ?construct_3d_object@@YGPAUOBJECT_3D_INSTANCE@@H@Z ; construct_3d_object
  0006a	a3 00 00 00 00	 mov	 DWORD PTR ?virtual_cockpit_level1_inst3d@@3PAUOBJECT_3D_INSTANCE@@A, eax

; 143  : 		virtual_cockpit_nose_inst3d = construct_3d_object(OBJECT_3D_ARNEH_AH64D_VCKPT_NOSE);

  0006f	68 cc 0a 00 00	 push	 2764			; 00000accH
  00074	e8 00 00 00 00	 call	 ?construct_3d_object@@YGPAUOBJECT_3D_INSTANCE@@H@Z ; construct_3d_object
  00079	a3 00 00 00 00	 mov	 DWORD PTR ?virtual_cockpit_nose_inst3d@@3PAUOBJECT_3D_INSTANCE@@A, eax

; 144  : 
; 145  : 		virtual_cockpit_adi_inst3d = construct_3d_object (OBJECT_3D_ARNEH_AH64D_INSTRUMENTS_ADI);

  0007e	68 cf 0a 00 00	 push	 2767			; 00000acfH
  00083	e8 00 00 00 00	 call	 ?construct_3d_object@@YGPAUOBJECT_3D_INSTANCE@@H@Z ; construct_3d_object
  00088	a3 00 00 00 00	 mov	 DWORD PTR ?virtual_cockpit_adi_inst3d@@3PAUOBJECT_3D_INSTANCE@@A, eax

; 146  : 		virtual_cockpit_compass_inst3d = construct_3d_object (OBJECT_3D_ARNEH_AH64D_INSTRUMENTS_COMPASS);

  0008d	68 d0 0a 00 00	 push	 2768			; 00000ad0H
  00092	e8 00 00 00 00	 call	 ?construct_3d_object@@YGPAUOBJECT_3D_INSTANCE@@H@Z ; construct_3d_object
  00097	a3 00 00 00 00	 mov	 DWORD PTR ?virtual_cockpit_compass_inst3d@@3PAUOBJECT_3D_INSTANCE@@A, eax

; 147  : 		virtual_cockpit_instrument_needles_inst3d = construct_3d_object (OBJECT_3D_ARNEH_AH64D_INSTRUMENTS_NEEDLES);

  0009c	68 d1 0a 00 00	 push	 2769			; 00000ad1H
  000a1	e8 00 00 00 00	 call	 ?construct_3d_object@@YGPAUOBJECT_3D_INSTANCE@@H@Z ; construct_3d_object
  000a6	a3 00 00 00 00	 mov	 DWORD PTR ?virtual_cockpit_instrument_needles_inst3d@@3PAUOBJECT_3D_INSTANCE@@A, eax

; 148  : 
; 149  : 		virtual_cockpit_lights_inst3d = construct_3d_object(OBJECT_3D_ARNEH_AH64D_VCKPT_FIRE_WARNING_LIGHT);

  000ab	68 cd 0a 00 00	 push	 2765			; 00000acdH
  000b0	e8 00 00 00 00	 call	 ?construct_3d_object@@YGPAUOBJECT_3D_INSTANCE@@H@Z ; construct_3d_object
  000b5	a3 00 00 00 00	 mov	 DWORD PTR ?virtual_cockpit_lights_inst3d@@3PAUOBJECT_3D_INSTANCE@@A, eax

; 150  : 
; 151  : 		virtual_cockpit_level2_inst3d = NULL;

  000ba	c7 05 00 00 00
	00 00 00 00 00	 mov	 DWORD PTR ?virtual_cockpit_level2_inst3d@@3PAUOBJECT_3D_INSTANCE@@A, 0

; 152  : 		virtual_cockpit_level3_inst3d = NULL;

  000c4	c7 05 00 00 00
	00 00 00 00 00	 mov	 DWORD PTR ?virtual_cockpit_level3_inst3d@@3PAUOBJECT_3D_INSTANCE@@A, 0

; 153  : 		virtual_cockpit_fillet_level1_inst3d = NULL;

  000ce	c7 05 00 00 00
	00 00 00 00 00	 mov	 DWORD PTR ?virtual_cockpit_fillet_level1_inst3d@@3PAUOBJECT_3D_INSTANCE@@A, 0

; 154  : 		virtual_cockpit_fillet_level2_inst3d = NULL;

  000d8	c7 05 00 00 00
	00 00 00 00 00	 mov	 DWORD PTR ?virtual_cockpit_fillet_level2_inst3d@@3PAUOBJECT_3D_INSTANCE@@A, 0

; 155  : 		virtual_cockpit_fillet_level3_inst3d = NULL;

  000e2	c7 05 00 00 00
	00 00 00 00 00	 mov	 DWORD PTR ?virtual_cockpit_fillet_level3_inst3d@@3PAUOBJECT_3D_INSTANCE@@A, 0

; 156  : 	}
; 157  : 	else

  000ec	e9 9b 00 00 00	 jmp	 $LN6@initialise
$LN5@initialise:

; 158  : 	{
; 159  : 		virtual_cockpit_level1_inst3d = construct_3d_object (OBJECT_3D_APACHE_VIRTUAL_COCKPIT_LEVEL1);

  000f1	68 e0 04 00 00	 push	 1248			; 000004e0H
  000f6	e8 00 00 00 00	 call	 ?construct_3d_object@@YGPAUOBJECT_3D_INSTANCE@@H@Z ; construct_3d_object
  000fb	a3 00 00 00 00	 mov	 DWORD PTR ?virtual_cockpit_level1_inst3d@@3PAUOBJECT_3D_INSTANCE@@A, eax

; 160  : 		virtual_cockpit_level2_inst3d = construct_3d_object (OBJECT_3D_APACHE_VIRTUAL_COCKPIT_LEVEL2);

  00100	68 eb 04 00 00	 push	 1259			; 000004ebH
  00105	e8 00 00 00 00	 call	 ?construct_3d_object@@YGPAUOBJECT_3D_INSTANCE@@H@Z ; construct_3d_object
  0010a	a3 00 00 00 00	 mov	 DWORD PTR ?virtual_cockpit_level2_inst3d@@3PAUOBJECT_3D_INSTANCE@@A, eax

; 161  : 		virtual_cockpit_level3_inst3d = construct_3d_object (OBJECT_3D_APACHE_VIRTUAL_COCKPIT_LEVEL3);

  0010f	68 e7 04 00 00	 push	 1255			; 000004e7H
  00114	e8 00 00 00 00	 call	 ?construct_3d_object@@YGPAUOBJECT_3D_INSTANCE@@H@Z ; construct_3d_object
  00119	a3 00 00 00 00	 mov	 DWORD PTR ?virtual_cockpit_level3_inst3d@@3PAUOBJECT_3D_INSTANCE@@A, eax

; 162  : 
; 163  : 		virtual_cockpit_fillet_level1_inst3d = construct_3d_object (OBJECT_3D_APACHE_VIRTUAL_COCKPIT_LEVEL1_FILLET);

  0011e	68 e1 04 00 00	 push	 1249			; 000004e1H
  00123	e8 00 00 00 00	 call	 ?construct_3d_object@@YGPAUOBJECT_3D_INSTANCE@@H@Z ; construct_3d_object
  00128	a3 00 00 00 00	 mov	 DWORD PTR ?virtual_cockpit_fillet_level1_inst3d@@3PAUOBJECT_3D_INSTANCE@@A, eax

; 164  : 		virtual_cockpit_fillet_level2_inst3d = construct_3d_object (OBJECT_3D_APACHE_VIRTUAL_COCKPIT_LEVEL2_FILLET);

  0012d	68 ec 04 00 00	 push	 1260			; 000004ecH
  00132	e8 00 00 00 00	 call	 ?construct_3d_object@@YGPAUOBJECT_3D_INSTANCE@@H@Z ; construct_3d_object
  00137	a3 00 00 00 00	 mov	 DWORD PTR ?virtual_cockpit_fillet_level2_inst3d@@3PAUOBJECT_3D_INSTANCE@@A, eax

; 165  : 		virtual_cockpit_fillet_level3_inst3d = construct_3d_object (OBJECT_3D_APACHE_VIRTUAL_COCKPIT_LEVEL3_FILLET);

  0013c	68 e8 04 00 00	 push	 1256			; 000004e8H
  00141	e8 00 00 00 00	 call	 ?construct_3d_object@@YGPAUOBJECT_3D_INSTANCE@@H@Z ; construct_3d_object
  00146	a3 00 00 00 00	 mov	 DWORD PTR ?virtual_cockpit_fillet_level3_inst3d@@3PAUOBJECT_3D_INSTANCE@@A, eax

; 166  : 
; 167  : 		virtual_cockpit_adi_inst3d = construct_3d_object (OBJECT_3D_APACHE_VIRTUAL_COCKPIT_INSTRUMENTS_ADI);

  0014b	68 de 04 00 00	 push	 1246			; 000004deH
  00150	e8 00 00 00 00	 call	 ?construct_3d_object@@YGPAUOBJECT_3D_INSTANCE@@H@Z ; construct_3d_object
  00155	a3 00 00 00 00	 mov	 DWORD PTR ?virtual_cockpit_adi_inst3d@@3PAUOBJECT_3D_INSTANCE@@A, eax

; 168  : 		virtual_cockpit_compass_inst3d = construct_3d_object (OBJECT_3D_APACHE_VIRTUAL_COCKPIT_INSTRUMENTS_COMPASS);

  0015a	68 df 04 00 00	 push	 1247			; 000004dfH
  0015f	e8 00 00 00 00	 call	 ?construct_3d_object@@YGPAUOBJECT_3D_INSTANCE@@H@Z ; construct_3d_object
  00164	a3 00 00 00 00	 mov	 DWORD PTR ?virtual_cockpit_compass_inst3d@@3PAUOBJECT_3D_INSTANCE@@A, eax

; 169  : 		virtual_cockpit_instrument_needles_inst3d = construct_3d_object (OBJECT_3D_APACHE_VIRTUAL_COCKPIT_INSTRUMENTS_NEEDLES);

  00169	68 e6 04 00 00	 push	 1254			; 000004e6H
  0016e	e8 00 00 00 00	 call	 ?construct_3d_object@@YGPAUOBJECT_3D_INSTANCE@@H@Z ; construct_3d_object
  00173	a3 00 00 00 00	 mov	 DWORD PTR ?virtual_cockpit_instrument_needles_inst3d@@3PAUOBJECT_3D_INSTANCE@@A, eax

; 170  : 
; 171  : 		virtual_cockpit_nose_inst3d = NULL;

  00178	c7 05 00 00 00
	00 00 00 00 00	 mov	 DWORD PTR ?virtual_cockpit_nose_inst3d@@3PAUOBJECT_3D_INSTANCE@@A, 0

; 172  : 		virtual_cockpit_lights_inst3d = NULL;

  00182	c7 05 00 00 00
	00 00 00 00 00	 mov	 DWORD PTR ?virtual_cockpit_lights_inst3d@@3PAUOBJECT_3D_INSTANCE@@A, 0
$LN6@initialise:

; 173  : 	}
; 174  : 
; 175  : 	virtual_cockpit_main_rotor_inst3d = construct_3d_object (OBJECT_3D_ARNEH_AH64D_VCKPT_MAIN_ROTOR);

  0018c	68 ce 0a 00 00	 push	 2766			; 00000aceH
  00191	e8 00 00 00 00	 call	 ?construct_3d_object@@YGPAUOBJECT_3D_INSTANCE@@H@Z ; construct_3d_object
  00196	a3 00 00 00 00	 mov	 DWORD PTR ?virtual_cockpit_main_rotor_inst3d@@3PAUOBJECT_3D_INSTANCE@@A, eax

; 176  : 
; 177  : 	virtual_cockpit_large_adi_inst3d = construct_3d_object (OBJECT_3D_APACHE_VIRTUAL_COCKPIT_INSTRUMENTS_LARGE_ADI);

  0019b	68 e2 04 00 00	 push	 1250			; 000004e2H
  001a0	e8 00 00 00 00	 call	 ?construct_3d_object@@YGPAUOBJECT_3D_INSTANCE@@H@Z ; construct_3d_object
  001a5	a3 00 00 00 00	 mov	 DWORD PTR ?virtual_cockpit_large_adi_inst3d@@3PAUOBJECT_3D_INSTANCE@@A, eax

; 178  : 	virtual_cockpit_instrument_large_needles_inst3d = construct_3d_object (OBJECT_3D_APACHE_VIRTUAL_COCKPIT_INSTRUMENTS_LARGE_NEEDLES);

  001aa	68 e3 04 00 00	 push	 1251			; 000004e3H
  001af	e8 00 00 00 00	 call	 ?construct_3d_object@@YGPAUOBJECT_3D_INSTANCE@@H@Z ; construct_3d_object
  001b4	a3 00 00 00 00	 mov	 DWORD PTR ?virtual_cockpit_instrument_large_needles_inst3d@@3PAUOBJECT_3D_INSTANCE@@A, eax

; 179  : 
; 180  : 	virtual_cockpit_upfront_display_inst3d = construct_3d_object (OBJECT_3D_APACHE_VIRTUAL_COCKPIT_DISPLAYS_UPFRONT);

  001b9	68 ed 04 00 00	 push	 1261			; 000004edH
  001be	e8 00 00 00 00	 call	 ?construct_3d_object@@YGPAUOBJECT_3D_INSTANCE@@H@Z ; construct_3d_object
  001c3	a3 00 00 00 00	 mov	 DWORD PTR ?virtual_cockpit_upfront_display_inst3d@@3PAUOBJECT_3D_INSTANCE@@A, eax

; 181  : 	virtual_cockpit_lhs_mfd_inst3d = construct_3d_object (OBJECT_3D_APACHE_VIRTUAL_COCKPIT_DISPLAYS_LHS_MFD);

  001c8	68 e4 04 00 00	 push	 1252			; 000004e4H
  001cd	e8 00 00 00 00	 call	 ?construct_3d_object@@YGPAUOBJECT_3D_INSTANCE@@H@Z ; construct_3d_object
  001d2	a3 00 00 00 00	 mov	 DWORD PTR ?virtual_cockpit_lhs_mfd_inst3d@@3PAUOBJECT_3D_INSTANCE@@A, eax

; 182  : 	virtual_cockpit_rhs_mfd_inst3d = construct_3d_object (OBJECT_3D_APACHE_VIRTUAL_COCKPIT_DISPLAYS_RHS_MFD);

  001d7	68 e9 04 00 00	 push	 1257			; 000004e9H
  001dc	e8 00 00 00 00	 call	 ?construct_3d_object@@YGPAUOBJECT_3D_INSTANCE@@H@Z ; construct_3d_object
  001e1	a3 00 00 00 00	 mov	 DWORD PTR ?virtual_cockpit_rhs_mfd_inst3d@@3PAUOBJECT_3D_INSTANCE@@A, eax

; 183  : 	virtual_cockpit_display_view_mfd_inst3d = construct_3d_object (OBJECT_3D_APACHE_VIRTUAL_COCKPIT_MFD_DISPLAYS_NEW);

  001e6	68 e5 04 00 00	 push	 1253			; 000004e5H
  001eb	e8 00 00 00 00	 call	 ?construct_3d_object@@YGPAUOBJECT_3D_INSTANCE@@H@Z ; construct_3d_object
  001f0	a3 00 00 00 00	 mov	 DWORD PTR ?virtual_cockpit_display_view_mfd_inst3d@@3PAUOBJECT_3D_INSTANCE@@A, eax

; 184  : 
; 185  : 	//
; 186  : 	// wipers and rain
; 187  : 	//
; 188  : 
; 189  : 	initialise_apache_virtual_cockpit_wiper_and_rain_effect ();

  001f5	e8 00 00 00 00	 call	 ?initialise_apache_virtual_cockpit_wiper_and_rain_effect@@YGXXZ ; initialise_apache_virtual_cockpit_wiper_and_rain_effect

; 190  : 
; 191  : 	//
; 192  : 	// virtual cockpit cameras
; 193  : 	//
; 194  : 
; 195  : 	initialise_common_virtual_cockpit_cameras ();

  001fa	e8 00 00 00 00	 call	 ?initialise_common_virtual_cockpit_cameras@@YGXXZ ; initialise_common_virtual_cockpit_cameras

; 196  : 
; 197  : 	initialise_altitude_counter();

  001ff	e8 00 00 00 00	 call	 ?initialise_altitude_counter@@YGXXZ ; initialise_altitude_counter

; 198  : 
; 199  : //VJ 050208 cleaing up wideview
; 200  : 	wide_cockpit_nr = WIDEVIEW_APACHE_PILOT;

  00204	c7 05 00 00 00
	00 04 00 00 00	 mov	 DWORD PTR ?wide_cockpit_nr@@3HA, 4 ; wide_cockpit_nr

; 201  : 	set_global_wide_cockpit(TRUE);

  0020e	c7 05 00 00 00
	00 01 00 00 00	 mov	 DWORD PTR ?wide_cockpit@@3HA, 1 ; wide_cockpit

; 202  : 
; 203  : #ifdef DEBUG  // don't limit in debug (for all practical purposes
; 204  : 	// pilot limits
; 205  : 	head_limits[0][0].x = -10;

  00218	b8 18 00 00 00	 mov	 eax, 24			; 00000018H
  0021d	6b c8 00	 imul	 ecx, eax, 0
  00220	ba 0c 00 00 00	 mov	 edx, 12			; 0000000cH
  00225	6b c2 00	 imul	 eax, edx, 0
  00228	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@c1200000
  00230	f3 0f 11 84 01
	00 00 00 00	 movss	 DWORD PTR ?head_limits@@3PAY01UVEC3D@@A[ecx+eax], xmm0

; 206  : 	head_limits[0][1].x =  10;

  00239	b8 18 00 00 00	 mov	 eax, 24			; 00000018H
  0023e	6b c8 00	 imul	 ecx, eax, 0
  00241	ba 0c 00 00 00	 mov	 edx, 12			; 0000000cH
  00246	c1 e2 00	 shl	 edx, 0
  00249	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@41200000
  00251	f3 0f 11 84 11
	00 00 00 00	 movss	 DWORD PTR ?head_limits@@3PAY01UVEC3D@@A[ecx+edx], xmm0

; 207  : 	head_limits[0][0].y = -10;

  0025a	b8 18 00 00 00	 mov	 eax, 24			; 00000018H
  0025f	6b c8 00	 imul	 ecx, eax, 0
  00262	ba 0c 00 00 00	 mov	 edx, 12			; 0000000cH
  00267	6b c2 00	 imul	 eax, edx, 0
  0026a	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@c1200000
  00272	f3 0f 11 84 01
	04 00 00 00	 movss	 DWORD PTR ?head_limits@@3PAY01UVEC3D@@A[ecx+eax+4], xmm0

; 208  : 	head_limits[0][1].y =  10;

  0027b	b8 18 00 00 00	 mov	 eax, 24			; 00000018H
  00280	6b c8 00	 imul	 ecx, eax, 0
  00283	ba 0c 00 00 00	 mov	 edx, 12			; 0000000cH
  00288	c1 e2 00	 shl	 edx, 0
  0028b	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@41200000
  00293	f3 0f 11 84 11
	04 00 00 00	 movss	 DWORD PTR ?head_limits@@3PAY01UVEC3D@@A[ecx+edx+4], xmm0

; 209  : 	head_limits[0][0].z = -10;

  0029c	b8 18 00 00 00	 mov	 eax, 24			; 00000018H
  002a1	6b c8 00	 imul	 ecx, eax, 0
  002a4	ba 0c 00 00 00	 mov	 edx, 12			; 0000000cH
  002a9	6b c2 00	 imul	 eax, edx, 0
  002ac	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@c1200000
  002b4	f3 0f 11 84 01
	08 00 00 00	 movss	 DWORD PTR ?head_limits@@3PAY01UVEC3D@@A[ecx+eax+8], xmm0

; 210  : 	head_limits[0][1].z =  10;

  002bd	b8 18 00 00 00	 mov	 eax, 24			; 00000018H
  002c2	6b c8 00	 imul	 ecx, eax, 0
  002c5	ba 0c 00 00 00	 mov	 edx, 12			; 0000000cH
  002ca	c1 e2 00	 shl	 edx, 0
  002cd	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@41200000
  002d5	f3 0f 11 84 11
	08 00 00 00	 movss	 DWORD PTR ?head_limits@@3PAY01UVEC3D@@A[ecx+edx+8], xmm0

; 211  : 
; 212  : 	// co-pilot limits
; 213  : 	head_limits[1][0].x = -10;

  002de	b8 18 00 00 00	 mov	 eax, 24			; 00000018H
  002e3	c1 e0 00	 shl	 eax, 0
  002e6	b9 0c 00 00 00	 mov	 ecx, 12			; 0000000cH
  002eb	6b d1 00	 imul	 edx, ecx, 0
  002ee	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@c1200000
  002f6	f3 0f 11 84 10
	00 00 00 00	 movss	 DWORD PTR ?head_limits@@3PAY01UVEC3D@@A[eax+edx], xmm0

; 214  : 	head_limits[1][1].x =  10;

  002ff	b8 18 00 00 00	 mov	 eax, 24			; 00000018H
  00304	c1 e0 00	 shl	 eax, 0
  00307	b9 0c 00 00 00	 mov	 ecx, 12			; 0000000cH
  0030c	c1 e1 00	 shl	 ecx, 0
  0030f	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@41200000
  00317	f3 0f 11 84 08
	00 00 00 00	 movss	 DWORD PTR ?head_limits@@3PAY01UVEC3D@@A[eax+ecx], xmm0

; 215  : 	head_limits[1][0].y = -10;

  00320	b8 18 00 00 00	 mov	 eax, 24			; 00000018H
  00325	c1 e0 00	 shl	 eax, 0
  00328	b9 0c 00 00 00	 mov	 ecx, 12			; 0000000cH
  0032d	6b d1 00	 imul	 edx, ecx, 0
  00330	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@c1200000
  00338	f3 0f 11 84 10
	04 00 00 00	 movss	 DWORD PTR ?head_limits@@3PAY01UVEC3D@@A[eax+edx+4], xmm0

; 216  : 	head_limits[1][1].y =  10;

  00341	b8 18 00 00 00	 mov	 eax, 24			; 00000018H
  00346	c1 e0 00	 shl	 eax, 0
  00349	b9 0c 00 00 00	 mov	 ecx, 12			; 0000000cH
  0034e	c1 e1 00	 shl	 ecx, 0
  00351	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@41200000
  00359	f3 0f 11 84 08
	04 00 00 00	 movss	 DWORD PTR ?head_limits@@3PAY01UVEC3D@@A[eax+ecx+4], xmm0

; 217  : 	head_limits[1][0].z = -10;

  00362	b8 18 00 00 00	 mov	 eax, 24			; 00000018H
  00367	c1 e0 00	 shl	 eax, 0
  0036a	b9 0c 00 00 00	 mov	 ecx, 12			; 0000000cH
  0036f	6b d1 00	 imul	 edx, ecx, 0
  00372	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@c1200000
  0037a	f3 0f 11 84 10
	08 00 00 00	 movss	 DWORD PTR ?head_limits@@3PAY01UVEC3D@@A[eax+edx+8], xmm0

; 218  : 	head_limits[1][1].z =  10;

  00383	b8 18 00 00 00	 mov	 eax, 24			; 00000018H
  00388	c1 e0 00	 shl	 eax, 0
  0038b	b9 0c 00 00 00	 mov	 ecx, 12			; 0000000cH
  00390	c1 e1 00	 shl	 ecx, 0
  00393	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@41200000
  0039b	f3 0f 11 84 08
	08 00 00 00	 movss	 DWORD PTR ?head_limits@@3PAY01UVEC3D@@A[eax+ecx+8], xmm0

; 219  : #else
; 220  : 	// pilot limits
; 221  : 	head_limits[0][0].x = -0.25;
; 222  : 	head_limits[0][1].x =  0.25;
; 223  : 	head_limits[0][0].y = -0.3;
; 224  : 	head_limits[0][1].y =  0.3;
; 225  : 	head_limits[0][0].z = -0.10;
; 226  : 	head_limits[0][1].z =  0.50;
; 227  : 
; 228  : 	// co-pilot limits
; 229  : 	head_limits[1][0].x = -0.2;
; 230  : 	head_limits[1][1].x =  0.2;
; 231  : 	head_limits[1][0].y = -0.2;
; 232  : 	head_limits[1][1].y =  0.2;
; 233  : 	head_limits[1][0].z = -0.05;
; 234  : 	head_limits[1][1].z =  0.3;
; 235  : #endif
; 236  : 
; 237  : 	if (custom_3d_models.arneh_ah64d_cockpit)  // move instruments to where they are in this cockpit

  003a4	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?custom_3d_models@@3Uinstalled_custom_3d_models@@A, 0
  003ab	0f 84 8e 00 00
	00		 je	 $LN3@initialise

; 238  : 	{
; 239  : 		object_3d_sub_object_index_numbers
; 240  : 			index;
; 241  : 
; 242  : 		throttle_pitch_1 = 0;

  003b1	0f 57 c0	 xorps	 xmm0, xmm0
  003b4	f3 0f 11 05 00
	00 00 00	 movss	 DWORD PTR ?throttle_pitch_1@@3MA, xmm0

; 243  : 		throttle_pitch_2 = 0;

  003bc	0f 57 c0	 xorps	 xmm0, xmm0
  003bf	f3 0f 11 05 00
	00 00 00	 movss	 DWORD PTR ?throttle_pitch_2@@3MA, xmm0

; 244  : 
; 245  : 		// co-pilot's helmet
; 246  : 		initialise_co_pilot_head_animations();

  003c7	e8 00 00 00 00	 call	 ?initialise_co_pilot_head_animations@@YGXXZ ; initialise_co_pilot_head_animations

; 247  : 
; 248  : 		virtual_cockpit_inst3d = virtual_cockpit_level1_inst3d;

  003cc	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_level1_inst3d@@3PAUOBJECT_3D_INSTANCE@@A
  003d1	a3 00 00 00 00	 mov	 DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A, eax ; virtual_cockpit_inst3d

; 249  : 
; 250  : 		// MFD view is too high for pilot in ees file, so move it down 5 cm
; 251  : 		for (index = OBJECT_3D_SUB_OBJECT_COCKPIT_VIEW_MFD_LHS_1; index <= OBJECT_3D_SUB_OBJECT_COCKPIT_VIEW_MFD_RHS_1; index += (OBJECT_3D_SUB_OBJECT_COCKPIT_VIEW_MFD_RHS_1 - OBJECT_3D_SUB_OBJECT_COCKPIT_VIEW_MFD_LHS_1))

  003d6	c7 45 fc c9 00
	00 00		 mov	 DWORD PTR _index$2[ebp], 201 ; 000000c9H
  003dd	eb 09		 jmp	 SHORT $LN4@initialise
$LN2@initialise:
  003df	8b 45 fc	 mov	 eax, DWORD PTR _index$2[ebp]
  003e2	83 c0 02	 add	 eax, 2
  003e5	89 45 fc	 mov	 DWORD PTR _index$2[ebp], eax
$LN4@initialise:
  003e8	81 7d fc cb 00
	00 00		 cmp	 DWORD PTR _index$2[ebp], 203 ; 000000cbH
  003ef	7f 4e		 jg	 SHORT $LN3@initialise

; 252  : 		{
; 253  : 			object_3d_sub_object_search_data
; 254  : 				search;
; 255  : 
; 256  : 			search.search_depth = 0;

  003f1	c7 45 cc 00 00
	00 00		 mov	 DWORD PTR _search$1[ebp+8], 0

; 257  : 			search.search_object = virtual_cockpit_inst3d;

  003f8	a1 00 00 00 00	 mov	 eax, DWORD PTR ?virtual_cockpit_inst3d@@3PAUOBJECT_3D_INSTANCE@@A ; virtual_cockpit_inst3d
  003fd	89 45 c4	 mov	 DWORD PTR _search$1[ebp], eax

; 258  : 			search.sub_object_index = index;

  00400	8b 45 fc	 mov	 eax, DWORD PTR _index$2[ebp]
  00403	89 45 d0	 mov	 DWORD PTR _search$1[ebp+12], eax

; 259  : 
; 260  : 			if (find_object_3d_sub_object (&search) != SUB_OBJECT_SEARCH_RESULT_OBJECT_FOUND)

  00406	8d 45 c4	 lea	 eax, DWORD PTR _search$1[ebp]
  00409	50		 push	 eax
  0040a	e8 00 00 00 00	 call	 ?find_object_3d_sub_object@@YG?AW4SUB_OBJECT_SEARCH_RESULT_TYPES@@PAUOBJECT_3D_SUB_OBJECT_SEARCH_DATA@@@Z ; find_object_3d_sub_object
  0040f	83 f8 01	 cmp	 eax, 1
  00412	74 0d		 je	 SHORT $LN8@initialise

; 261  : 				debug_fatal ("Failed to locate display viewpoint in virtual cockpit");

  00414	68 00 00 00 00	 push	 OFFSET ??_C@_0DG@OCDOFANO@Failed?5to?5locate?5display?5viewpo@
  00419	e8 00 00 00 00	 call	 ?debug_fatal@@YAXPBDZZ	; debug_fatal
  0041e	83 c4 04	 add	 esp, 4
$LN8@initialise:

; 262  : 
; 263  : 			search.result_sub_object->relative_position.y -= 0.05;

  00421	8b 45 c8	 mov	 eax, DWORD PTR _search$1[ebp+4]
  00424	f3 0f 5a 40 10	 cvtss2sd xmm0, DWORD PTR [eax+16]
  00429	f2 0f 5c 05 00
	00 00 00	 subsd	 xmm0, QWORD PTR __real@3fa999999999999a
  00431	f2 0f 5a c0	 cvtsd2ss xmm0, xmm0
  00435	8b 4d c8	 mov	 ecx, DWORD PTR _search$1[ebp+4]
  00438	f3 0f 11 41 10	 movss	 DWORD PTR [ecx+16], xmm0

; 264  : 		}

  0043d	eb a0		 jmp	 SHORT $LN2@initialise
$LN3@initialise:

; 265  : 
; 266  : 	}
; 267  : 
; 268  : #if DEBUG_MODULE
; 269  : 	dx = 0; dy = 0; dz = 0;
; 270  : #endif
; 271  : }

  0043f	5f		 pop	 edi
  00440	5e		 pop	 esi
  00441	5b		 pop	 ebx
  00442	8b e5		 mov	 esp, ebp
  00444	5d		 pop	 ebp
  00445	c3		 ret	 0
?initialise_apache_virtual_cockpit@@YGXXZ ENDP		; initialise_apache_virtual_cockpit
_TEXT	ENDS
END
