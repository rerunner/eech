; Listing generated by Microsoft (R) Optimizing Compiler Version 19.16.27045.0 

	TITLE	C:\Users\nhv90\Projects\eech\aphavoc\source\app3d\3d_main.c
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB MSVCRTD
INCLUDELIB OLDNAMES

PUBLIC	?set_full_screen_viewport@@YGXXZ		; set_full_screen_viewport
PUBLIC	?set_main_3d_params@@YGXW4DISPLAY_3D_TINTS@@W4DISPLAY_3D_LIGHT_LEVELS@@W4DISPLAY_3D_NOISE_LEVELS@@MMMMMM@Z ; set_main_3d_params
PUBLIC	?set_main_3d_full_screen_params@@YGXW4DISPLAY_3D_TINTS@@W4DISPLAY_3D_LIGHT_LEVELS@@W4DISPLAY_3D_NOISE_LEVELS@@@Z ; set_main_3d_full_screen_params
PUBLIC	?set_pilots_full_screen_params@@YGXH@Z		; set_pilots_full_screen_params
PUBLIC	?set_main_3d_inset_target_screen_params@@YGXXZ	; set_main_3d_inset_target_screen_params
PUBLIC	?set_crew_view_full_screen_params@@YGXXZ	; set_crew_view_full_screen_params
PUBLIC	?draw_main_3d_scene@@YGXPAUVIEWPOINT@@@Z	; draw_main_3d_scene
PUBLIC	?__LINE__Var@?0??draw_main_3d_scene@@YGXPAUVIEWPOINT@@@Z@4JA ; `draw_main_3d_scene'::`1'::__LINE__Var
PUBLIC	??_C@_0DM@CHGKHKKP@c?3?2users?2nhv90?2projects?2eech?2ap@ ; `string'
PUBLIC	??_C@_02HPPNELPJ@vp@				; `string'
PUBLIC	__real@3f50624dd2f1a9fc
PUBLIC	__real@3f8604da
PUBLIC	__real@3f9999999999999a
PUBLIC	__real@3fd0000000000000
PUBLIC	__real@3fe0000000000000
PUBLIC	__real@3fe7333333333333
EXTRN	?process_assert@@YGXPBD0H@Z:PROC		; process_assert
EXTRN	?set_viewport@@YGXMMMM@Z:PROC			; set_viewport
EXTRN	?set_3d_viewport@@YGXPAUENV_3D@@MMMM@Z:PROC	; set_3d_viewport
EXTRN	?set_3d_origin@@YGXPAUENV_3D@@MM@Z:PROC		; set_3d_origin
EXTRN	?set_3d_viewcone@@YGXPAUENV_3D@@MMMM@Z:PROC	; set_3d_viewcone
EXTRN	?get_height_view_angle@@YGMM@Z:PROC		; get_height_view_angle
EXTRN	?draw_application_3d_scene@@YGXXZ:PROC		; draw_application_3d_scene
EXTRN	?set_application_display_3d_mode@@YGXW4DISPLAY_3D_TINTS@@W4DISPLAY_3D_LIGHT_LEVELS@@W4DISPLAY_3D_NOISE_LEVELS@@@Z:PROC ; set_application_display_3d_mode
EXTRN	?global_PNVS_level@@3HA:DWORD			; global_PNVS_level
EXTRN	?gunship_sides@@3PAW4ENTITY_SIDES@@A:BYTE	; gunship_sides
EXTRN	?global_options@@3UGLOBAL_OPTIONS_DATA@@A:BYTE	; global_options
EXTRN	?full_screen_width@@3MA:DWORD			; full_screen_width
EXTRN	?full_screen_height@@3MA:DWORD			; full_screen_height
EXTRN	?full_screen_x_min@@3MA:DWORD			; full_screen_x_min
EXTRN	?full_screen_y_min@@3MA:DWORD			; full_screen_y_min
EXTRN	?full_screen_x_max@@3MA:DWORD			; full_screen_x_max
EXTRN	?full_screen_y_max@@3MA:DWORD			; full_screen_y_max
EXTRN	?full_screen_width_view_angle@@3MA:DWORD	; full_screen_width_view_angle
EXTRN	?full_screen_height_view_angle@@3MA:DWORD	; full_screen_height_view_angle
EXTRN	?main_3d_env@@3PAUENV_3D@@A:DWORD		; main_3d_env
EXTRN	?main_3d_single_light_env@@3PAUENV_3D@@A:DWORD	; main_3d_single_light_env
EXTRN	?main_vp@@3UVIEWPOINT@@A:BYTE			; main_vp
EXTRN	?application_3d_rain_active@@3HA:DWORD		; application_3d_rain_active
EXTRN	__fltused:DWORD
;	COMDAT __real@3fe7333333333333
CONST	SEGMENT
__real@3fe7333333333333 DQ 03fe7333333333333r	; 0.725
CONST	ENDS
;	COMDAT __real@3fe0000000000000
CONST	SEGMENT
__real@3fe0000000000000 DQ 03fe0000000000000r	; 0.5
CONST	ENDS
;	COMDAT __real@3fd0000000000000
CONST	SEGMENT
__real@3fd0000000000000 DQ 03fd0000000000000r	; 0.25
CONST	ENDS
;	COMDAT __real@3f9999999999999a
CONST	SEGMENT
__real@3f9999999999999a DQ 03f9999999999999ar	; 0.025
CONST	ENDS
;	COMDAT __real@3f8604da
CONST	SEGMENT
__real@3f8604da DD 03f8604dar			; 1.04702
CONST	ENDS
;	COMDAT __real@3f50624dd2f1a9fc
CONST	SEGMENT
__real@3f50624dd2f1a9fc DQ 03f50624dd2f1a9fcr	; 0.001
CONST	ENDS
;	COMDAT ??_C@_02HPPNELPJ@vp@
CONST	SEGMENT
??_C@_02HPPNELPJ@vp@ DB 'vp', 00H			; `string'
CONST	ENDS
;	COMDAT ??_C@_0DM@CHGKHKKP@c?3?2users?2nhv90?2projects?2eech?2ap@
CONST	SEGMENT
??_C@_0DM@CHGKHKKP@c?3?2users?2nhv90?2projects?2eech?2ap@ DB 'c:\users\nh'
	DB	'v90\projects\eech\aphavoc\source\app3d\3d_main.c', 00H ; `string'
CONST	ENDS
;	COMDAT ?__LINE__Var@?0??draw_main_3d_scene@@YGXPAUVIEWPOINT@@@Z@4JA
_DATA	SEGMENT
?__LINE__Var@?0??draw_main_3d_scene@@YGXPAUVIEWPOINT@@@Z@4JA DD 0e3H ; `draw_main_3d_scene'::`1'::__LINE__Var
_DATA	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\app3d\3d_main.c
;	COMDAT ?draw_main_3d_scene@@YGXPAUVIEWPOINT@@@Z
_TEXT	SEGMENT
_tmp$ = -48						; size = 48
_vp$ = 8						; size = 4
?draw_main_3d_scene@@YGXPAUVIEWPOINT@@@Z PROC		; draw_main_3d_scene, COMDAT

; 227  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 70	 sub	 esp, 112		; 00000070H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 228  : 	viewpoint
; 229  : 		tmp;
; 230  : 
; 231  : 	ASSERT (vp);

  00009	83 7d 08 00	 cmp	 DWORD PTR _vp$[ebp], 0
  0000d	75 18		 jne	 SHORT $LN2@draw_main_
  0000f	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??draw_main_3d_scene@@YGXPAUVIEWPOINT@@@Z@4JA
  00014	83 c0 04	 add	 eax, 4
  00017	50		 push	 eax
  00018	68 00 00 00 00	 push	 OFFSET ??_C@_0DM@CHGKHKKP@c?3?2users?2nhv90?2projects?2eech?2ap@
  0001d	68 00 00 00 00	 push	 OFFSET ??_C@_02HPPNELPJ@vp@
  00022	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN2@draw_main_:

; 232  : 
; 233  : 	if (vp != &main_vp)

  00027	81 7d 08 00 00
	00 00		 cmp	 DWORD PTR _vp$[ebp], OFFSET ?main_vp@@3UVIEWPOINT@@A ; main_vp
  0002e	74 1e		 je	 SHORT $LN3@draw_main_

; 234  : 	{
; 235  : 		tmp = main_vp;

  00030	b9 0c 00 00 00	 mov	 ecx, 12			; 0000000cH
  00035	be 00 00 00 00	 mov	 esi, OFFSET ?main_vp@@3UVIEWPOINT@@A ; main_vp
  0003a	8d 7d d0	 lea	 edi, DWORD PTR _tmp$[ebp]
  0003d	f3 a5		 rep movsd

; 236  : 
; 237  : 		main_vp = *vp;

  0003f	b9 0c 00 00 00	 mov	 ecx, 12			; 0000000cH
  00044	8b 75 08	 mov	 esi, DWORD PTR _vp$[ebp]
  00047	bf 00 00 00 00	 mov	 edi, OFFSET ?main_vp@@3UVIEWPOINT@@A ; main_vp
  0004c	f3 a5		 rep movsd
$LN3@draw_main_:

; 238  : 	}
; 239  : 
; 240  : 	draw_application_3d_scene ();

  0004e	e8 00 00 00 00	 call	 ?draw_application_3d_scene@@YGXXZ ; draw_application_3d_scene

; 241  : 
; 242  : 	if (vp != &main_vp)

  00053	81 7d 08 00 00
	00 00		 cmp	 DWORD PTR _vp$[ebp], OFFSET ?main_vp@@3UVIEWPOINT@@A ; main_vp
  0005a	74 0f		 je	 SHORT $LN1@draw_main_

; 243  : 	{
; 244  : 		main_vp = tmp;

  0005c	b9 0c 00 00 00	 mov	 ecx, 12			; 0000000cH
  00061	8d 75 d0	 lea	 esi, DWORD PTR _tmp$[ebp]
  00064	bf 00 00 00 00	 mov	 edi, OFFSET ?main_vp@@3UVIEWPOINT@@A ; main_vp
  00069	f3 a5		 rep movsd
$LN1@draw_main_:

; 245  : 	}
; 246  : }

  0006b	5f		 pop	 edi
  0006c	5e		 pop	 esi
  0006d	5b		 pop	 ebx
  0006e	8b e5		 mov	 esp, ebp
  00070	5d		 pop	 ebp
  00071	c2 04 00	 ret	 4
?draw_main_3d_scene@@YGXPAUVIEWPOINT@@@Z ENDP		; draw_main_3d_scene
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\app3d\3d_main.c
;	COMDAT ?set_crew_view_full_screen_params@@YGXXZ
_TEXT	SEGMENT
?set_crew_view_full_screen_params@@YGXXZ PROC		; set_crew_view_full_screen_params, COMDAT

; 207  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 208  : 	set_main_3d_params

  00009	51		 push	 ecx
  0000a	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3f8604da
  00012	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00017	e8 00 00 00 00	 call	 ?get_height_view_angle@@YGMM@Z ; get_height_view_angle
  0001c	51		 push	 ecx
  0001d	d9 1c 24	 fstp	 DWORD PTR [esp]
  00020	51		 push	 ecx
  00021	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3f8604da
  00029	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  0002e	51		 push	 ecx
  0002f	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR ?full_screen_height@@3MA
  00037	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  0003c	51		 push	 ecx
  0003d	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR ?full_screen_width@@3MA
  00045	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  0004a	51		 push	 ecx
  0004b	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR ?full_screen_y_min@@3MA
  00053	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00058	51		 push	 ecx
  00059	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR ?full_screen_x_min@@3MA
  00061	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00066	6a 00		 push	 0
  00068	6a 02		 push	 2
  0006a	6a 00		 push	 0
  0006c	e8 00 00 00 00	 call	 ?set_main_3d_params@@YGXW4DISPLAY_3D_TINTS@@W4DISPLAY_3D_LIGHT_LEVELS@@W4DISPLAY_3D_NOISE_LEVELS@@MMMMMM@Z ; set_main_3d_params

; 209  : 	(
; 210  : 		DISPLAY_3D_TINT_CLEAR,
; 211  : 		DISPLAY_3D_LIGHT_LEVEL_HIGH,
; 212  : 		DISPLAY_3D_NOISE_LEVEL_NONE,
; 213  : 		full_screen_x_min,
; 214  : 		full_screen_y_min,
; 215  : 		full_screen_width,
; 216  : 		full_screen_height,
; 217  : 		rad (59.99),
; 218  : 		get_height_view_angle (rad (59.99))
; 219  : 	);
; 220  : }

  00071	5f		 pop	 edi
  00072	5e		 pop	 esi
  00073	5b		 pop	 ebx
  00074	8b e5		 mov	 esp, ebp
  00076	5d		 pop	 ebp
  00077	c3		 ret	 0
?set_crew_view_full_screen_params@@YGXXZ ENDP		; set_crew_view_full_screen_params
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\app3d\3d_main.c
;	COMDAT ?set_main_3d_inset_target_screen_params@@YGXXZ
_TEXT	SEGMENT
?set_main_3d_inset_target_screen_params@@YGXXZ PROC	; set_main_3d_inset_target_screen_params, COMDAT

; 185  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 186  : 	set_main_3d_params

  00009	51		 push	 ecx
  0000a	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR ?full_screen_height_view_angle@@3MA
  00012	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00017	51		 push	 ecx
  00018	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR ?full_screen_width_view_angle@@3MA
  00020	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00025	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR ?full_screen_y_max@@3MA
  0002d	f3 0f 5c 05 00
	00 00 00	 subss	 xmm0, DWORD PTR ?full_screen_y_min@@3MA
  00035	f3 0f 5a c0	 cvtss2sd xmm0, xmm0
  00039	f2 0f 59 05 00
	00 00 00	 mulsd	 xmm0, QWORD PTR __real@3fd0000000000000
  00041	f2 0f 5a c0	 cvtsd2ss xmm0, xmm0
  00045	51		 push	 ecx
  00046	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  0004b	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR ?full_screen_x_max@@3MA
  00053	f3 0f 5c 05 00
	00 00 00	 subss	 xmm0, DWORD PTR ?full_screen_x_min@@3MA
  0005b	f3 0f 5a c0	 cvtss2sd xmm0, xmm0
  0005f	f2 0f 59 05 00
	00 00 00	 mulsd	 xmm0, QWORD PTR __real@3fd0000000000000
  00067	f2 0f 5a c0	 cvtsd2ss xmm0, xmm0
  0006b	51		 push	 ecx
  0006c	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00071	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR ?full_screen_y_max@@3MA
  00079	f3 0f 5c 05 00
	00 00 00	 subss	 xmm0, DWORD PTR ?full_screen_y_min@@3MA
  00081	f3 0f 5a c0	 cvtss2sd xmm0, xmm0
  00085	f2 0f 59 05 00
	00 00 00	 mulsd	 xmm0, QWORD PTR __real@3f9999999999999a
  0008d	f2 0f 5a c0	 cvtsd2ss xmm0, xmm0
  00091	51		 push	 ecx
  00092	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00097	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR ?full_screen_x_max@@3MA
  0009f	f3 0f 5c 05 00
	00 00 00	 subss	 xmm0, DWORD PTR ?full_screen_x_min@@3MA
  000a7	f3 0f 5a c0	 cvtss2sd xmm0, xmm0
  000ab	f2 0f 59 05 00
	00 00 00	 mulsd	 xmm0, QWORD PTR __real@3fe7333333333333
  000b3	f2 0f 5a c0	 cvtsd2ss xmm0, xmm0
  000b7	51		 push	 ecx
  000b8	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  000bd	6a 00		 push	 0
  000bf	6a 02		 push	 2
  000c1	6a 00		 push	 0
  000c3	e8 00 00 00 00	 call	 ?set_main_3d_params@@YGXW4DISPLAY_3D_TINTS@@W4DISPLAY_3D_LIGHT_LEVELS@@W4DISPLAY_3D_NOISE_LEVELS@@MMMMMM@Z ; set_main_3d_params

; 187  : 	(
; 188  : 		DISPLAY_3D_TINT_CLEAR,
; 189  : 		DISPLAY_3D_LIGHT_LEVEL_HIGH,
; 190  : 		DISPLAY_3D_NOISE_LEVEL_NONE,
; 191  : 		(full_screen_x_max - full_screen_x_min) * (1.0 - 0.25 - 0.025),
; 192  : 		(full_screen_y_max - full_screen_y_min) * 0.025,
; 193  : 		(full_screen_x_max - full_screen_x_min) * 0.25,
; 194  : 		(full_screen_y_max - full_screen_y_min) * 0.25,
; 195  : 		full_screen_width_view_angle,
; 196  : 		full_screen_height_view_angle
; 197  : 	);
; 198  : 
; 199  : 	application_3d_rain_active = FALSE;

  000c8	c7 05 00 00 00
	00 00 00 00 00	 mov	 DWORD PTR ?application_3d_rain_active@@3HA, 0 ; application_3d_rain_active

; 200  : }

  000d2	5f		 pop	 edi
  000d3	5e		 pop	 esi
  000d4	5b		 pop	 ebx
  000d5	8b e5		 mov	 esp, ebp
  000d7	5d		 pop	 ebp
  000d8	c3		 ret	 0
?set_main_3d_inset_target_screen_params@@YGXXZ ENDP	; set_main_3d_inset_target_screen_params
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\app3d\3d_main.c
;	COMDAT ?set_pilots_full_screen_params@@YGXH@Z
_TEXT	SEGMENT
tv69 = -76						; size = 4
tv68 = -76						; size = 4
_level$ = -8						; size = 4
_tint$ = -4						; size = 4
_night_vision_system_active$ = 8			; size = 4
?set_pilots_full_screen_params@@YGXH@Z PROC		; set_pilots_full_screen_params, COMDAT

; 141  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 4c	 sub	 esp, 76			; 0000004cH
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 142  : 	display_3d_tints
; 143  : 		tint;
; 144  : 	display_3d_light_levels
; 145  : 		level;
; 146  : 
; 147  : 	if (night_vision_system_active)

  00009	83 7d 08 00	 cmp	 DWORD PTR _night_vision_system_active$[ebp], 0
  0000d	74 54		 je	 SHORT $LN4@set_pilots

; 148  : 	{
; 149  : 		tint = gunship_sides[get_global_gunship_type ()] != ENTITY_SIDE_RED_FORCE ? DISPLAY_3D_TINT_GREEN : DISPLAY_3D_TINT_BLUE;

  0000f	a1 0c 00 00 00	 mov	 eax, DWORD PTR ?global_options@@3UGLOBAL_OPTIONS_DATA@@A+12
  00014	83 3c 85 00 00
	00 00 02	 cmp	 DWORD PTR ?gunship_sides@@3PAW4ENTITY_SIDES@@A[eax*4], 2
  0001c	74 09		 je	 SHORT $LN10@set_pilots
  0001e	c7 45 b4 03 00
	00 00		 mov	 DWORD PTR tv68[ebp], 3
  00025	eb 07		 jmp	 SHORT $LN11@set_pilots
$LN10@set_pilots:
  00027	c7 45 b4 09 00
	00 00		 mov	 DWORD PTR tv68[ebp], 9
$LN11@set_pilots:
  0002e	8b 4d b4	 mov	 ecx, DWORD PTR tv68[ebp]
  00031	89 4d fc	 mov	 DWORD PTR _tint$[ebp], ecx

; 150  : //VJ 050818 PNVS brighness levels
; 151  : // switched 0 and 2 so high level is default by GCsDriver 08-12-2007
; 152  : 		switch (global_PNVS_level)

  00034	a1 00 00 00 00	 mov	 eax, DWORD PTR ?global_PNVS_level@@3HA ; global_PNVS_level
  00039	89 45 b4	 mov	 DWORD PTR tv69[ebp], eax
  0003c	83 7d b4 01	 cmp	 DWORD PTR tv69[ebp], 1
  00040	74 0f		 je	 SHORT $LN7@set_pilots
  00042	83 7d b4 02	 cmp	 DWORD PTR tv69[ebp], 2
  00046	74 12		 je	 SHORT $LN8@set_pilots

; 153  : 		{
; 154  : 			default:
; 155  : 			case 0 :
; 156  : 				{
; 157  : 					level = DISPLAY_3D_LIGHT_LEVEL_HIGH;

  00048	c7 45 f8 02 00
	00 00		 mov	 DWORD PTR _level$[ebp], 2

; 158  : 					break;

  0004f	eb 10		 jmp	 SHORT $LN2@set_pilots
$LN7@set_pilots:

; 159  : 				}
; 160  : 			case 1:
; 161  : 				{
; 162  : 					level = DISPLAY_3D_LIGHT_LEVEL_MEDIUM;

  00051	c7 45 f8 01 00
	00 00		 mov	 DWORD PTR _level$[ebp], 1

; 163  : 					break;

  00058	eb 07		 jmp	 SHORT $LN2@set_pilots
$LN8@set_pilots:

; 164  : 				}
; 165  : 			case 2:
; 166  : 				{
; 167  : 					level = DISPLAY_3D_LIGHT_LEVEL_LOW;

  0005a	c7 45 f8 00 00
	00 00		 mov	 DWORD PTR _level$[ebp], 0
$LN2@set_pilots:

; 168  : 					break;
; 169  : 				}
; 170  : 		}
; 171  : 	}
; 172  : 	else

  00061	eb 0e		 jmp	 SHORT $LN5@set_pilots
$LN4@set_pilots:

; 173  : 	{
; 174  : 		tint = DISPLAY_3D_TINT_CLEAR;

  00063	c7 45 fc 00 00
	00 00		 mov	 DWORD PTR _tint$[ebp], 0

; 175  : 		level = DISPLAY_3D_LIGHT_LEVEL_HIGH;

  0006a	c7 45 f8 02 00
	00 00		 mov	 DWORD PTR _level$[ebp], 2
$LN5@set_pilots:

; 176  : 	}
; 177  : 	set_main_3d_full_screen_params (tint, level, DISPLAY_3D_NOISE_LEVEL_NONE);

  00071	6a 00		 push	 0
  00073	8b 45 f8	 mov	 eax, DWORD PTR _level$[ebp]
  00076	50		 push	 eax
  00077	8b 4d fc	 mov	 ecx, DWORD PTR _tint$[ebp]
  0007a	51		 push	 ecx
  0007b	e8 00 00 00 00	 call	 ?set_main_3d_full_screen_params@@YGXW4DISPLAY_3D_TINTS@@W4DISPLAY_3D_LIGHT_LEVELS@@W4DISPLAY_3D_NOISE_LEVELS@@@Z ; set_main_3d_full_screen_params

; 178  : }

  00080	5f		 pop	 edi
  00081	5e		 pop	 esi
  00082	5b		 pop	 ebx
  00083	8b e5		 mov	 esp, ebp
  00085	5d		 pop	 ebp
  00086	c2 04 00	 ret	 4
?set_pilots_full_screen_params@@YGXH@Z ENDP		; set_pilots_full_screen_params
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\app3d\3d_main.c
;	COMDAT ?set_main_3d_full_screen_params@@YGXW4DISPLAY_3D_TINTS@@W4DISPLAY_3D_LIGHT_LEVELS@@W4DISPLAY_3D_NOISE_LEVELS@@@Z
_TEXT	SEGMENT
_tint$ = 8						; size = 4
_light_level$ = 12					; size = 4
_noise_level$ = 16					; size = 4
?set_main_3d_full_screen_params@@YGXW4DISPLAY_3D_TINTS@@W4DISPLAY_3D_LIGHT_LEVELS@@W4DISPLAY_3D_NOISE_LEVELS@@@Z PROC ; set_main_3d_full_screen_params, COMDAT

; 121  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 122  : 	set_main_3d_params

  00009	51		 push	 ecx
  0000a	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR ?full_screen_height_view_angle@@3MA
  00012	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00017	51		 push	 ecx
  00018	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR ?full_screen_width_view_angle@@3MA
  00020	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00025	51		 push	 ecx
  00026	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR ?full_screen_height@@3MA
  0002e	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00033	51		 push	 ecx
  00034	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR ?full_screen_width@@3MA
  0003c	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00041	51		 push	 ecx
  00042	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR ?full_screen_y_min@@3MA
  0004a	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  0004f	51		 push	 ecx
  00050	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR ?full_screen_x_min@@3MA
  00058	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  0005d	8b 45 10	 mov	 eax, DWORD PTR _noise_level$[ebp]
  00060	50		 push	 eax
  00061	8b 4d 0c	 mov	 ecx, DWORD PTR _light_level$[ebp]
  00064	51		 push	 ecx
  00065	8b 55 08	 mov	 edx, DWORD PTR _tint$[ebp]
  00068	52		 push	 edx
  00069	e8 00 00 00 00	 call	 ?set_main_3d_params@@YGXW4DISPLAY_3D_TINTS@@W4DISPLAY_3D_LIGHT_LEVELS@@W4DISPLAY_3D_NOISE_LEVELS@@MMMMMM@Z ; set_main_3d_params

; 123  : 	(
; 124  : 		tint,
; 125  : 		light_level,
; 126  : 		noise_level,
; 127  : 		full_screen_x_min,
; 128  : 		full_screen_y_min,
; 129  : 		full_screen_width,
; 130  : 		full_screen_height,
; 131  : 		full_screen_width_view_angle,
; 132  : 		full_screen_height_view_angle
; 133  : 	);
; 134  : }

  0006e	5f		 pop	 edi
  0006f	5e		 pop	 esi
  00070	5b		 pop	 ebx
  00071	8b e5		 mov	 esp, ebp
  00073	5d		 pop	 ebp
  00074	c2 0c 00	 ret	 12			; 0000000cH
?set_main_3d_full_screen_params@@YGXW4DISPLAY_3D_TINTS@@W4DISPLAY_3D_LIGHT_LEVELS@@W4DISPLAY_3D_NOISE_LEVELS@@@Z ENDP ; set_main_3d_full_screen_params
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\app3d\3d_main.c
;	COMDAT ?set_main_3d_params@@YGXW4DISPLAY_3D_TINTS@@W4DISPLAY_3D_LIGHT_LEVELS@@W4DISPLAY_3D_NOISE_LEVELS@@MMMMMM@Z
_TEXT	SEGMENT
_tint$ = 8						; size = 4
_light_level$ = 12					; size = 4
_noise_level$ = 16					; size = 4
_x$ = 20						; size = 4
_y$ = 24						; size = 4
_width$ = 28						; size = 4
_height$ = 32						; size = 4
_width_view_angle$ = 36					; size = 4
_height_view_angle$ = 40				; size = 4
?set_main_3d_params@@YGXW4DISPLAY_3D_TINTS@@W4DISPLAY_3D_LIGHT_LEVELS@@W4DISPLAY_3D_NOISE_LEVELS@@MMMMMM@Z PROC ; set_main_3d_params, COMDAT

; 94   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 95   : 	set_3d_viewport (main_3d_env, x, y, x + width - 0.001, y + height - 0.001);

  00009	f3 0f 10 45 18	 movss	 xmm0, DWORD PTR _y$[ebp]
  0000e	f3 0f 58 45 20	 addss	 xmm0, DWORD PTR _height$[ebp]
  00013	f3 0f 5a c0	 cvtss2sd xmm0, xmm0
  00017	f2 0f 5c 05 00
	00 00 00	 subsd	 xmm0, QWORD PTR __real@3f50624dd2f1a9fc
  0001f	f2 0f 5a c0	 cvtsd2ss xmm0, xmm0
  00023	51		 push	 ecx
  00024	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00029	f3 0f 10 45 14	 movss	 xmm0, DWORD PTR _x$[ebp]
  0002e	f3 0f 58 45 1c	 addss	 xmm0, DWORD PTR _width$[ebp]
  00033	f3 0f 5a c0	 cvtss2sd xmm0, xmm0
  00037	f2 0f 5c 05 00
	00 00 00	 subsd	 xmm0, QWORD PTR __real@3f50624dd2f1a9fc
  0003f	f2 0f 5a c0	 cvtsd2ss xmm0, xmm0
  00043	51		 push	 ecx
  00044	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00049	51		 push	 ecx
  0004a	f3 0f 10 45 18	 movss	 xmm0, DWORD PTR _y$[ebp]
  0004f	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00054	51		 push	 ecx
  00055	f3 0f 10 45 14	 movss	 xmm0, DWORD PTR _x$[ebp]
  0005a	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  0005f	a1 00 00 00 00	 mov	 eax, DWORD PTR ?main_3d_env@@3PAUENV_3D@@A ; main_3d_env
  00064	50		 push	 eax
  00065	e8 00 00 00 00	 call	 ?set_3d_viewport@@YGXPAUENV_3D@@MMMM@Z ; set_3d_viewport

; 96   : 
; 97   : 	set_3d_origin (main_3d_env, x + (width * 0.5), y + (height * 0.5));

  0006a	f3 0f 5a 45 18	 cvtss2sd xmm0, DWORD PTR _y$[ebp]
  0006f	f3 0f 5a 4d 20	 cvtss2sd xmm1, DWORD PTR _height$[ebp]
  00074	f2 0f 59 0d 00
	00 00 00	 mulsd	 xmm1, QWORD PTR __real@3fe0000000000000
  0007c	f2 0f 58 c1	 addsd	 xmm0, xmm1
  00080	f2 0f 5a c0	 cvtsd2ss xmm0, xmm0
  00084	51		 push	 ecx
  00085	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  0008a	f3 0f 5a 45 14	 cvtss2sd xmm0, DWORD PTR _x$[ebp]
  0008f	f3 0f 5a 4d 1c	 cvtss2sd xmm1, DWORD PTR _width$[ebp]
  00094	f2 0f 59 0d 00
	00 00 00	 mulsd	 xmm1, QWORD PTR __real@3fe0000000000000
  0009c	f2 0f 58 c1	 addsd	 xmm0, xmm1
  000a0	f2 0f 5a c0	 cvtsd2ss xmm0, xmm0
  000a4	51		 push	 ecx
  000a5	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  000aa	a1 00 00 00 00	 mov	 eax, DWORD PTR ?main_3d_env@@3PAUENV_3D@@A ; main_3d_env
  000af	50		 push	 eax
  000b0	e8 00 00 00 00	 call	 ?set_3d_origin@@YGXPAUENV_3D@@MM@Z ; set_3d_origin

; 98   : 
; 99   : 	set_3d_viewcone (main_3d_env, width, height, width_view_angle, height_view_angle);

  000b5	51		 push	 ecx
  000b6	f3 0f 10 45 28	 movss	 xmm0, DWORD PTR _height_view_angle$[ebp]
  000bb	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  000c0	51		 push	 ecx
  000c1	f3 0f 10 45 24	 movss	 xmm0, DWORD PTR _width_view_angle$[ebp]
  000c6	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  000cb	51		 push	 ecx
  000cc	f3 0f 10 45 20	 movss	 xmm0, DWORD PTR _height$[ebp]
  000d1	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  000d6	51		 push	 ecx
  000d7	f3 0f 10 45 1c	 movss	 xmm0, DWORD PTR _width$[ebp]
  000dc	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  000e1	a1 00 00 00 00	 mov	 eax, DWORD PTR ?main_3d_env@@3PAUENV_3D@@A ; main_3d_env
  000e6	50		 push	 eax
  000e7	e8 00 00 00 00	 call	 ?set_3d_viewcone@@YGXPAUENV_3D@@MMMM@Z ; set_3d_viewcone

; 100  : 
; 101  : 	set_application_display_3d_mode (tint, light_level, noise_level);

  000ec	8b 45 10	 mov	 eax, DWORD PTR _noise_level$[ebp]
  000ef	50		 push	 eax
  000f0	8b 4d 0c	 mov	 ecx, DWORD PTR _light_level$[ebp]
  000f3	51		 push	 ecx
  000f4	8b 55 08	 mov	 edx, DWORD PTR _tint$[ebp]
  000f7	52		 push	 edx
  000f8	e8 00 00 00 00	 call	 ?set_application_display_3d_mode@@YGXW4DISPLAY_3D_TINTS@@W4DISPLAY_3D_LIGHT_LEVELS@@W4DISPLAY_3D_NOISE_LEVELS@@@Z ; set_application_display_3d_mode

; 102  : 
; 103  : 	application_3d_rain_active = TRUE;

  000fd	c7 05 00 00 00
	00 01 00 00 00	 mov	 DWORD PTR ?application_3d_rain_active@@3HA, 1 ; application_3d_rain_active

; 104  : 
; 105  : 	//
; 106  : 	// keep single light environment in sync (for Apache & Havoc virtual cockpits)
; 107  : 	//
; 108  : 
; 109  : 	set_3d_viewport (main_3d_single_light_env, x, y, x + width - 0.001, y + height - 0.001);

  00107	f3 0f 10 45 18	 movss	 xmm0, DWORD PTR _y$[ebp]
  0010c	f3 0f 58 45 20	 addss	 xmm0, DWORD PTR _height$[ebp]
  00111	f3 0f 5a c0	 cvtss2sd xmm0, xmm0
  00115	f2 0f 5c 05 00
	00 00 00	 subsd	 xmm0, QWORD PTR __real@3f50624dd2f1a9fc
  0011d	f2 0f 5a c0	 cvtsd2ss xmm0, xmm0
  00121	51		 push	 ecx
  00122	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00127	f3 0f 10 45 14	 movss	 xmm0, DWORD PTR _x$[ebp]
  0012c	f3 0f 58 45 1c	 addss	 xmm0, DWORD PTR _width$[ebp]
  00131	f3 0f 5a c0	 cvtss2sd xmm0, xmm0
  00135	f2 0f 5c 05 00
	00 00 00	 subsd	 xmm0, QWORD PTR __real@3f50624dd2f1a9fc
  0013d	f2 0f 5a c0	 cvtsd2ss xmm0, xmm0
  00141	51		 push	 ecx
  00142	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00147	51		 push	 ecx
  00148	f3 0f 10 45 18	 movss	 xmm0, DWORD PTR _y$[ebp]
  0014d	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00152	51		 push	 ecx
  00153	f3 0f 10 45 14	 movss	 xmm0, DWORD PTR _x$[ebp]
  00158	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  0015d	a1 00 00 00 00	 mov	 eax, DWORD PTR ?main_3d_single_light_env@@3PAUENV_3D@@A ; main_3d_single_light_env
  00162	50		 push	 eax
  00163	e8 00 00 00 00	 call	 ?set_3d_viewport@@YGXPAUENV_3D@@MMMM@Z ; set_3d_viewport

; 110  : 
; 111  : 	set_3d_origin (main_3d_single_light_env, x + (width * 0.5), y + (height * 0.5));

  00168	f3 0f 5a 45 18	 cvtss2sd xmm0, DWORD PTR _y$[ebp]
  0016d	f3 0f 5a 4d 20	 cvtss2sd xmm1, DWORD PTR _height$[ebp]
  00172	f2 0f 59 0d 00
	00 00 00	 mulsd	 xmm1, QWORD PTR __real@3fe0000000000000
  0017a	f2 0f 58 c1	 addsd	 xmm0, xmm1
  0017e	f2 0f 5a c0	 cvtsd2ss xmm0, xmm0
  00182	51		 push	 ecx
  00183	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00188	f3 0f 5a 45 14	 cvtss2sd xmm0, DWORD PTR _x$[ebp]
  0018d	f3 0f 5a 4d 1c	 cvtss2sd xmm1, DWORD PTR _width$[ebp]
  00192	f2 0f 59 0d 00
	00 00 00	 mulsd	 xmm1, QWORD PTR __real@3fe0000000000000
  0019a	f2 0f 58 c1	 addsd	 xmm0, xmm1
  0019e	f2 0f 5a c0	 cvtsd2ss xmm0, xmm0
  001a2	51		 push	 ecx
  001a3	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  001a8	a1 00 00 00 00	 mov	 eax, DWORD PTR ?main_3d_single_light_env@@3PAUENV_3D@@A ; main_3d_single_light_env
  001ad	50		 push	 eax
  001ae	e8 00 00 00 00	 call	 ?set_3d_origin@@YGXPAUENV_3D@@MM@Z ; set_3d_origin

; 112  : 
; 113  : 	set_3d_viewcone (main_3d_single_light_env, width, height, width_view_angle, height_view_angle);

  001b3	51		 push	 ecx
  001b4	f3 0f 10 45 28	 movss	 xmm0, DWORD PTR _height_view_angle$[ebp]
  001b9	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  001be	51		 push	 ecx
  001bf	f3 0f 10 45 24	 movss	 xmm0, DWORD PTR _width_view_angle$[ebp]
  001c4	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  001c9	51		 push	 ecx
  001ca	f3 0f 10 45 20	 movss	 xmm0, DWORD PTR _height$[ebp]
  001cf	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  001d4	51		 push	 ecx
  001d5	f3 0f 10 45 1c	 movss	 xmm0, DWORD PTR _width$[ebp]
  001da	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  001df	a1 00 00 00 00	 mov	 eax, DWORD PTR ?main_3d_single_light_env@@3PAUENV_3D@@A ; main_3d_single_light_env
  001e4	50		 push	 eax
  001e5	e8 00 00 00 00	 call	 ?set_3d_viewcone@@YGXPAUENV_3D@@MMMM@Z ; set_3d_viewcone

; 114  : }

  001ea	5f		 pop	 edi
  001eb	5e		 pop	 esi
  001ec	5b		 pop	 ebx
  001ed	8b e5		 mov	 esp, ebp
  001ef	5d		 pop	 ebp
  001f0	c2 24 00	 ret	 36			; 00000024H
?set_main_3d_params@@YGXW4DISPLAY_3D_TINTS@@W4DISPLAY_3D_LIGHT_LEVELS@@W4DISPLAY_3D_NOISE_LEVELS@@MMMMMM@Z ENDP ; set_main_3d_params
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\app3d\3d_main.c
;	COMDAT ?set_full_screen_viewport@@YGXXZ
_TEXT	SEGMENT
?set_full_screen_viewport@@YGXXZ PROC			; set_full_screen_viewport, COMDAT

; 74   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 75   : 	set_viewport (full_screen_x_min, full_screen_y_min, full_screen_x_max, full_screen_y_max);

  00009	51		 push	 ecx
  0000a	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR ?full_screen_y_max@@3MA
  00012	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00017	51		 push	 ecx
  00018	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR ?full_screen_x_max@@3MA
  00020	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00025	51		 push	 ecx
  00026	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR ?full_screen_y_min@@3MA
  0002e	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00033	51		 push	 ecx
  00034	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR ?full_screen_x_min@@3MA
  0003c	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00041	e8 00 00 00 00	 call	 ?set_viewport@@YGXMMMM@Z ; set_viewport

; 76   : }

  00046	5f		 pop	 edi
  00047	5e		 pop	 esi
  00048	5b		 pop	 ebx
  00049	8b e5		 mov	 esp, ebp
  0004b	5d		 pop	 ebp
  0004c	c3		 ret	 0
?set_full_screen_viewport@@YGXXZ ENDP			; set_full_screen_viewport
_TEXT	ENDS
END
