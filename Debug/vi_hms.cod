; Listing generated by Microsoft (R) Optimizing Compiler Version 19.16.27045.0 

	TITLE	C:\Users\nhv90\Projects\eech\aphavoc\source\gunships\avionics\viper\vi_hms.c
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB MSVCRTD
INCLUDELIB OLDNAMES

PUBLIC	?initialise_viper_hms@@YGXXZ			; initialise_viper_hms
PUBLIC	?deinitialise_viper_hms@@YGXXZ			; deinitialise_viper_hms
PUBLIC	?update_viper_hms@@YGXXZ			; update_viper_hms
PUBLIC	__real@3f490fdb
PUBLIC	__real@451c4000
PUBLIC	__real@459c4000
EXTRN	?select_next_hms_target@@YGXXZ:PROC		; select_next_hms_target
EXTRN	?select_previous_hms_target@@YGXXZ:PROC		; select_previous_hms_target
EXTRN	?select_next_designated_hms_target@@YGXXZ:PROC	; select_next_designated_hms_target
EXTRN	?select_previous_designated_hms_target@@YGXXZ:PROC ; select_previous_designated_hms_target
EXTRN	?global_options@@3UGLOBAL_OPTIONS_DATA@@A:BYTE	; global_options
EXTRN	?single_target_acquisition_system_select_next_target_key@@3HA:DWORD ; single_target_acquisition_system_select_next_target_key
EXTRN	?single_target_acquisition_system_select_previous_target_key@@3HA:DWORD ; single_target_acquisition_system_select_previous_target_key
EXTRN	?single_target_acquisition_system_select_next_designated_key@@3HA:DWORD ; single_target_acquisition_system_select_next_designated_key
EXTRN	?single_target_acquisition_system_select_previous_designated_key@@3HA:DWORD ; single_target_acquisition_system_select_previous_designated_key
EXTRN	?hms_max_visual_range@@3MA:DWORD		; hms_max_visual_range
EXTRN	?hms_max_field_of_view@@3MA:DWORD		; hms_max_field_of_view
EXTRN	__fltused:DWORD
;	COMDAT __real@459c4000
CONST	SEGMENT
__real@459c4000 DD 0459c4000r			; 5000
CONST	ENDS
;	COMDAT __real@451c4000
CONST	SEGMENT
__real@451c4000 DD 0451c4000r			; 2500
CONST	ENDS
;	COMDAT __real@3f490fdb
CONST	SEGMENT
__real@3f490fdb DD 03f490fdbr			; 0.785398
CONST	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\gunships\avionics\viper\vi_hms.c
;	COMDAT ?update_viper_hms@@YGXXZ
_TEXT	SEGMENT
?update_viper_hms@@YGXXZ PROC				; update_viper_hms, COMDAT

; 100  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 101  : 	if (get_global_simple_avionics ())

  00009	83 3d 6c 03 00
	00 00		 cmp	 DWORD PTR ?global_options@@3UGLOBAL_OPTIONS_DATA@@A+876, 0
  00010	74 22		 je	 SHORT $LN10@update_vip

; 102  : 	{
; 103  : 		hms_max_visual_range		= 5000.0;

  00012	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@459c4000
  0001a	f3 0f 11 05 00
	00 00 00	 movss	 DWORD PTR ?hms_max_visual_range@@3MA, xmm0

; 104  : 		hms_max_field_of_view	= rad (45.0);

  00022	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3f490fdb
  0002a	f3 0f 11 05 00
	00 00 00	 movss	 DWORD PTR ?hms_max_field_of_view@@3MA, xmm0

; 105  : 	}
; 106  : 	else

  00032	eb 20		 jmp	 SHORT $LN11@update_vip
$LN10@update_vip:

; 107  : 	{
; 108  : 		hms_max_visual_range		= 2500.0;

  00034	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@451c4000
  0003c	f3 0f 11 05 00
	00 00 00	 movss	 DWORD PTR ?hms_max_visual_range@@3MA, xmm0

; 109  : 		hms_max_field_of_view	= rad (45.0);

  00044	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3f490fdb
  0004c	f3 0f 11 05 00
	00 00 00	 movss	 DWORD PTR ?hms_max_field_of_view@@3MA, xmm0
$LN11@update_vip:

; 110  : 	}
; 111  : 
; 112  : 	////////////////////////////////////////
; 113  : 
; 114  : 	while (single_target_acquisition_system_select_next_target_key)

  00054	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?single_target_acquisition_system_select_next_target_key@@3HA, 0 ; single_target_acquisition_system_select_next_target_key
  0005b	74 14		 je	 SHORT $LN3@update_vip

; 115  : 	{
; 116  : 		select_next_hms_target ();

  0005d	e8 00 00 00 00	 call	 ?select_next_hms_target@@YGXXZ ; select_next_hms_target

; 117  : 
; 118  : 		single_target_acquisition_system_select_next_target_key--;

  00062	a1 00 00 00 00	 mov	 eax, DWORD PTR ?single_target_acquisition_system_select_next_target_key@@3HA ; single_target_acquisition_system_select_next_target_key
  00067	83 e8 01	 sub	 eax, 1
  0006a	a3 00 00 00 00	 mov	 DWORD PTR ?single_target_acquisition_system_select_next_target_key@@3HA, eax ; single_target_acquisition_system_select_next_target_key

; 119  : 	}

  0006f	eb e3		 jmp	 SHORT $LN11@update_vip
$LN3@update_vip:

; 120  : 
; 121  : 	////////////////////////////////////////
; 122  : 
; 123  : 	while (single_target_acquisition_system_select_previous_target_key)

  00071	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?single_target_acquisition_system_select_previous_target_key@@3HA, 0 ; single_target_acquisition_system_select_previous_target_key
  00078	74 14		 je	 SHORT $LN5@update_vip

; 124  : 	{
; 125  : 		select_previous_hms_target ();

  0007a	e8 00 00 00 00	 call	 ?select_previous_hms_target@@YGXXZ ; select_previous_hms_target

; 126  : 
; 127  : 		single_target_acquisition_system_select_previous_target_key--;

  0007f	a1 00 00 00 00	 mov	 eax, DWORD PTR ?single_target_acquisition_system_select_previous_target_key@@3HA ; single_target_acquisition_system_select_previous_target_key
  00084	83 e8 01	 sub	 eax, 1
  00087	a3 00 00 00 00	 mov	 DWORD PTR ?single_target_acquisition_system_select_previous_target_key@@3HA, eax ; single_target_acquisition_system_select_previous_target_key

; 128  : 	}

  0008c	eb e3		 jmp	 SHORT $LN3@update_vip
$LN5@update_vip:

; 129  : 
; 130  : // Jabberwock 031107 Designated targets
; 131  : 	
; 132  : 	while (single_target_acquisition_system_select_next_designated_key)

  0008e	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?single_target_acquisition_system_select_next_designated_key@@3HA, 0 ; single_target_acquisition_system_select_next_designated_key
  00095	74 14		 je	 SHORT $LN7@update_vip

; 133  : 	{
; 134  : 		select_next_designated_hms_target ();

  00097	e8 00 00 00 00	 call	 ?select_next_designated_hms_target@@YGXXZ ; select_next_designated_hms_target

; 135  : 
; 136  : 		single_target_acquisition_system_select_next_designated_key--;

  0009c	a1 00 00 00 00	 mov	 eax, DWORD PTR ?single_target_acquisition_system_select_next_designated_key@@3HA ; single_target_acquisition_system_select_next_designated_key
  000a1	83 e8 01	 sub	 eax, 1
  000a4	a3 00 00 00 00	 mov	 DWORD PTR ?single_target_acquisition_system_select_next_designated_key@@3HA, eax ; single_target_acquisition_system_select_next_designated_key

; 137  : 	}

  000a9	eb e3		 jmp	 SHORT $LN5@update_vip
$LN7@update_vip:

; 138  : 
; 139  : 	////////////////////////////////////////
; 140  : 
; 141  : 	while (single_target_acquisition_system_select_previous_designated_key)

  000ab	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?single_target_acquisition_system_select_previous_designated_key@@3HA, 0 ; single_target_acquisition_system_select_previous_designated_key
  000b2	74 14		 je	 SHORT $LN9@update_vip

; 142  : 	{
; 143  : 		select_previous_designated_hms_target ();

  000b4	e8 00 00 00 00	 call	 ?select_previous_designated_hms_target@@YGXXZ ; select_previous_designated_hms_target

; 144  : 
; 145  : 		single_target_acquisition_system_select_previous_designated_key--;

  000b9	a1 00 00 00 00	 mov	 eax, DWORD PTR ?single_target_acquisition_system_select_previous_designated_key@@3HA ; single_target_acquisition_system_select_previous_designated_key
  000be	83 e8 01	 sub	 eax, 1
  000c1	a3 00 00 00 00	 mov	 DWORD PTR ?single_target_acquisition_system_select_previous_designated_key@@3HA, eax ; single_target_acquisition_system_select_previous_designated_key

; 146  : 	}	

  000c6	eb e3		 jmp	 SHORT $LN7@update_vip
$LN9@update_vip:

; 147  : 
; 148  : // Jabberwock 031107 ends	
; 149  : }

  000c8	5f		 pop	 edi
  000c9	5e		 pop	 esi
  000ca	5b		 pop	 ebx
  000cb	8b e5		 mov	 esp, ebp
  000cd	5d		 pop	 ebp
  000ce	c3		 ret	 0
?update_viper_hms@@YGXXZ ENDP				; update_viper_hms
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\gunships\avionics\viper\vi_hms.c
;	COMDAT ?deinitialise_viper_hms@@YGXXZ
_TEXT	SEGMENT
?deinitialise_viper_hms@@YGXXZ PROC			; deinitialise_viper_hms, COMDAT

; 92   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 93   : }

  00009	5f		 pop	 edi
  0000a	5e		 pop	 esi
  0000b	5b		 pop	 ebx
  0000c	8b e5		 mov	 esp, ebp
  0000e	5d		 pop	 ebp
  0000f	c3		 ret	 0
?deinitialise_viper_hms@@YGXXZ ENDP			; deinitialise_viper_hms
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\gunships\avionics\viper\vi_hms.c
;	COMDAT ?initialise_viper_hms@@YGXXZ
_TEXT	SEGMENT
?initialise_viper_hms@@YGXXZ PROC			; initialise_viper_hms, COMDAT

; 74   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 75   : 	if (get_global_simple_avionics ())

  00009	83 3d 6c 03 00
	00 00		 cmp	 DWORD PTR ?global_options@@3UGLOBAL_OPTIONS_DATA@@A+876, 0
  00010	74 22		 je	 SHORT $LN2@initialise

; 76   : 	{
; 77   : 		hms_max_visual_range		= 5000.0;

  00012	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@459c4000
  0001a	f3 0f 11 05 00
	00 00 00	 movss	 DWORD PTR ?hms_max_visual_range@@3MA, xmm0

; 78   : 		hms_max_field_of_view	= rad (45.0);

  00022	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3f490fdb
  0002a	f3 0f 11 05 00
	00 00 00	 movss	 DWORD PTR ?hms_max_field_of_view@@3MA, xmm0

; 79   : 	}
; 80   : 	else

  00032	eb 20		 jmp	 SHORT $LN3@initialise
$LN2@initialise:

; 81   : 	{
; 82   : 		hms_max_visual_range		= 2500.0;

  00034	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@451c4000
  0003c	f3 0f 11 05 00
	00 00 00	 movss	 DWORD PTR ?hms_max_visual_range@@3MA, xmm0

; 83   : 		hms_max_field_of_view	= rad (45.0);

  00044	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3f490fdb
  0004c	f3 0f 11 05 00
	00 00 00	 movss	 DWORD PTR ?hms_max_field_of_view@@3MA, xmm0
$LN3@initialise:

; 84   : 	}
; 85   : };

  00054	5f		 pop	 edi
  00055	5e		 pop	 esi
  00056	5b		 pop	 ebx
  00057	8b e5		 mov	 esp, ebp
  00059	5d		 pop	 ebp
  0005a	c3		 ret	 0
?initialise_viper_hms@@YGXXZ ENDP			; initialise_viper_hms
_TEXT	ENDS
END
