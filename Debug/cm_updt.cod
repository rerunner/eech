; Listing generated by Microsoft (R) Optimizing Compiler Version 19.16.27045.0 

	TITLE	C:\Users\nhv90\Projects\eech\aphavoc\source\entity\special\camera\cm_updt.c
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB MSVCRTD
INCLUDELIB OLDNAMES

PUBLIC	?overload_camera_update_functions@@YGXXZ	; overload_camera_update_functions
PUBLIC	?__LINE__Var@?0??update_server@@YGXPAUENTITY@@@Z@4JA ; `update_server'::`1'::__LINE__Var
PUBLIC	??_C@_0EM@NIODLCFE@c?3?2users?2nhv90?2projects?2eech?2ap@ ; `string'
PUBLIC	??_C@_0BK@NIGJPCBN@raw?9?$DOexternal_view_entity@ ; `string'
PUBLIC	??_C@_0BJ@HJPODAMB@Invalid?5camera?5mode?5?$DN?5?$CFd@ ; `string'
EXTRN	?process_assert@@YGXPBD0H@Z:PROC		; process_assert
EXTRN	?debug_fatal@@YAXPBDZZ:PROC			; debug_fatal
EXTRN	?update_building_camera@@YGXPAUCAMERA@@@Z:PROC	; update_building_camera
EXTRN	?update_chase_camera@@YGXPAUCAMERA@@@Z:PROC	; update_chase_camera
EXTRN	?update_cinematic_camera@@YGXPAUCAMERA@@@Z:PROC	; update_cinematic_camera
EXTRN	?update_debriefing_camera@@YGXPAUCAMERA@@@Z:PROC ; update_debriefing_camera
EXTRN	?update_drop_camera@@YGXPAUCAMERA@@@Z:PROC	; update_drop_camera
EXTRN	?update_eject_camera@@YGXPAUCAMERA@@@Z:PROC	; update_eject_camera
EXTRN	?update_end_of_mission_camera@@YGXPAUCAMERA@@@Z:PROC ; update_end_of_mission_camera
EXTRN	?update_weapon_explosion_camera@@YGXPAUCAMERA@@@Z:PROC ; update_weapon_explosion_camera
EXTRN	?update_fly_by_camera@@YGXPAUCAMERA@@@Z:PROC	; update_fly_by_camera
EXTRN	?update_free_camera@@YGXPAUCAMERA@@@Z:PROC	; update_free_camera
EXTRN	?update_recognition_guide_top_view_camera@@YGXPAUCAMERA@@@Z:PROC ; update_recognition_guide_top_view_camera
EXTRN	?update_recognition_guide_side_view_camera@@YGXPAUCAMERA@@@Z:PROC ; update_recognition_guide_side_view_camera
EXTRN	?update_recognition_guide_front_view_camera@@YGXPAUCAMERA@@@Z:PROC ; update_recognition_guide_front_view_camera
EXTRN	?update_recognition_guide_3d_view_camera@@YGXPAUCAMERA@@@Z:PROC ; update_recognition_guide_3d_view_camera
EXTRN	?update_static_camera@@YGXPAUCAMERA@@@Z:PROC	; update_static_camera
EXTRN	?update_satellite_camera@@YGXPAUCAMERA@@@Z:PROC	; update_satellite_camera
EXTRN	?update_weapon_camera@@YGXPAUCAMERA@@@Z:PROC	; update_weapon_camera
EXTRN	?fn_update_client_server_entity@@3PAY01P6GXPAUENTITY@@@ZA:BYTE ; fn_update_client_server_entity
EXTRN	?view_mode@@3W4VIEW_MODES@@A:DWORD		; view_mode
;	COMDAT ??_C@_0BJ@HJPODAMB@Invalid?5camera?5mode?5?$DN?5?$CFd@
CONST	SEGMENT
??_C@_0BJ@HJPODAMB@Invalid?5camera?5mode?5?$DN?5?$CFd@ DB 'Invalid camera'
	DB	' mode = %d', 00H				; `string'
CONST	ENDS
;	COMDAT ??_C@_0BK@NIGJPCBN@raw?9?$DOexternal_view_entity@
CONST	SEGMENT
??_C@_0BK@NIGJPCBN@raw?9?$DOexternal_view_entity@ DB 'raw->external_view_'
	DB	'entity', 00H				; `string'
CONST	ENDS
;	COMDAT ??_C@_0EM@NIODLCFE@c?3?2users?2nhv90?2projects?2eech?2ap@
CONST	SEGMENT
??_C@_0EM@NIODLCFE@c?3?2users?2nhv90?2projects?2eech?2ap@ DB 'c:\users\nh'
	DB	'v90\projects\eech\aphavoc\source\entity\special\camera\cm_upd'
	DB	't.c', 00H					; `string'
CONST	ENDS
;	COMDAT ?__LINE__Var@?0??update_server@@YGXPAUENTITY@@@Z@4JA
_DATA	SEGMENT
?__LINE__Var@?0??update_server@@YGXPAUENTITY@@@Z@4JA DD 059H ; `update_server'::`1'::__LINE__Var
_DATA	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\entity\special\camera\cm_updt.c
;	COMDAT ?update_server@@YGXPAUENTITY@@@Z
_TEXT	SEGMENT
tv73 = -72						; size = 4
_raw$ = -4						; size = 4
_en$ = 8						; size = 4
?update_server@@YGXPAUENTITY@@@Z PROC			; update_server, COMDAT

; 89   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 48	 sub	 esp, 72			; 00000048H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 90   : 	camera
; 91   : 		*raw;
; 92   : 
; 93   : 	raw = (camera *) get_local_entity_data (en);

  00009	8b 45 08	 mov	 eax, DWORD PTR _en$[ebp]
  0000c	8b 48 04	 mov	 ecx, DWORD PTR [eax+4]
  0000f	89 4d fc	 mov	 DWORD PTR _raw$[ebp], ecx

; 94   : 
; 95   : 	ASSERT (raw->external_view_entity);

  00012	8b 45 fc	 mov	 eax, DWORD PTR _raw$[ebp]
  00015	83 b8 24 01 00
	00 00		 cmp	 DWORD PTR [eax+292], 0
  0001c	75 18		 jne	 SHORT $LN4@update_ser
  0001e	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??update_server@@YGXPAUENTITY@@@Z@4JA
  00023	83 c0 06	 add	 eax, 6
  00026	50		 push	 eax
  00027	68 00 00 00 00	 push	 OFFSET ??_C@_0EM@NIODLCFE@c?3?2users?2nhv90?2projects?2eech?2ap@
  0002c	68 00 00 00 00	 push	 OFFSET ??_C@_0BK@NIGJPCBN@raw?9?$DOexternal_view_entity@
  00031	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN4@update_ser:

; 96   : 
; 97   : 	//
; 98   : 	// update camera
; 99   : 	//
; 100  : 
; 101  : 	if (get_view_mode () == VIEW_MODE_EXTERNAL)

  00036	83 3d 00 00 00
	00 2a		 cmp	 DWORD PTR ?view_mode@@3W4VIEW_MODES@@A, 42 ; view_mode, 0000002aH
  0003d	0f 85 01 01 00
	00		 jne	 $LN1@update_ser

; 102  : 	{
; 103  : 		switch (raw->camera_mode)

  00043	8b 45 fc	 mov	 eax, DWORD PTR _raw$[ebp]
  00046	8b 48 3c	 mov	 ecx, DWORD PTR [eax+60]
  00049	89 4d b8	 mov	 DWORD PTR tv73[ebp], ecx
  0004c	83 7d b8 10	 cmp	 DWORD PTR tv73[ebp], 16	; 00000010H
  00050	0f 87 da 00 00
	00		 ja	 $LN23@update_ser
  00056	8b 55 b8	 mov	 edx, DWORD PTR tv73[ebp]
  00059	ff 24 95 00 00
	00 00		 jmp	 DWORD PTR $LN25@update_ser[edx*4]
$LN6@update_ser:

; 104  : 		{
; 105  : 			////////////////////////////////////////
; 106  : 			case CAMERA_MODE_CHASE:
; 107  : 			////////////////////////////////////////
; 108  : 			{
; 109  : 				update_chase_camera (raw);

  00060	8b 45 fc	 mov	 eax, DWORD PTR _raw$[ebp]
  00063	50		 push	 eax
  00064	e8 00 00 00 00	 call	 ?update_chase_camera@@YGXPAUCAMERA@@@Z ; update_chase_camera

; 110  : 
; 111  : 				break;

  00069	e9 d6 00 00 00	 jmp	 $LN1@update_ser
$LN7@update_ser:

; 112  : 			}
; 113  : 			////////////////////////////////////////
; 114  : 			case CAMERA_MODE_END_OF_MISSION:
; 115  : 			////////////////////////////////////////
; 116  : 			{
; 117  : 				update_end_of_mission_camera (raw);

  0006e	8b 45 fc	 mov	 eax, DWORD PTR _raw$[ebp]
  00071	50		 push	 eax
  00072	e8 00 00 00 00	 call	 ?update_end_of_mission_camera@@YGXPAUCAMERA@@@Z ; update_end_of_mission_camera

; 118  : 
; 119  : 				break;

  00077	e9 c8 00 00 00	 jmp	 $LN1@update_ser
$LN8@update_ser:

; 120  : 			}
; 121  : 			////////////////////////////////////////
; 122  : 			case CAMERA_MODE_DROP:
; 123  : 			////////////////////////////////////////
; 124  : 			{
; 125  : 				update_drop_camera (raw);

  0007c	8b 45 fc	 mov	 eax, DWORD PTR _raw$[ebp]
  0007f	50		 push	 eax
  00080	e8 00 00 00 00	 call	 ?update_drop_camera@@YGXPAUCAMERA@@@Z ; update_drop_camera

; 126  : 
; 127  : 				break;

  00085	e9 ba 00 00 00	 jmp	 $LN1@update_ser
$LN9@update_ser:

; 128  : 			}
; 129  : 			////////////////////////////////////////
; 130  : 			case CAMERA_MODE_STATIC:
; 131  : 			////////////////////////////////////////
; 132  : 			{
; 133  : 				update_static_camera (raw);

  0008a	8b 45 fc	 mov	 eax, DWORD PTR _raw$[ebp]
  0008d	50		 push	 eax
  0008e	e8 00 00 00 00	 call	 ?update_static_camera@@YGXPAUCAMERA@@@Z ; update_static_camera

; 134  : 
; 135  : 				break;

  00093	e9 ac 00 00 00	 jmp	 $LN1@update_ser
$LN10@update_ser:

; 136  : 			}
; 137  : 			
; 138  : 			// Jabberwock 031009 Satellite view
; 139  : 			////////////////////////////////////////
; 140  : 			case CAMERA_MODE_SATELLITE:
; 141  : 			////////////////////////////////////////
; 142  : 			{
; 143  : 				update_satellite_camera (raw);

  00098	8b 45 fc	 mov	 eax, DWORD PTR _raw$[ebp]
  0009b	50		 push	 eax
  0009c	e8 00 00 00 00	 call	 ?update_satellite_camera@@YGXPAUCAMERA@@@Z ; update_satellite_camera

; 144  : 
; 145  : 				break;

  000a1	e9 9e 00 00 00	 jmp	 $LN1@update_ser
$LN11@update_ser:

; 146  : 			}
; 147  : 			// Jabberwock 031009 ends
; 148  : 			
; 149  : 			////////////////////////////////////////
; 150  : 			case CAMERA_MODE_EJECT:
; 151  : 			////////////////////////////////////////
; 152  : 			{
; 153  : 				update_eject_camera (raw);

  000a6	8b 45 fc	 mov	 eax, DWORD PTR _raw$[ebp]
  000a9	50		 push	 eax
  000aa	e8 00 00 00 00	 call	 ?update_eject_camera@@YGXPAUCAMERA@@@Z ; update_eject_camera

; 154  : 
; 155  : 				break;

  000af	e9 90 00 00 00	 jmp	 $LN1@update_ser
$LN12@update_ser:

; 156  : 			}
; 157  : 			////////////////////////////////////////
; 158  : 			case CAMERA_MODE_FLY_BY:
; 159  : 			////////////////////////////////////////
; 160  : 			{
; 161  : 				update_fly_by_camera (raw);

  000b4	8b 45 fc	 mov	 eax, DWORD PTR _raw$[ebp]
  000b7	50		 push	 eax
  000b8	e8 00 00 00 00	 call	 ?update_fly_by_camera@@YGXPAUCAMERA@@@Z ; update_fly_by_camera

; 162  : 
; 163  : 				break;

  000bd	e9 82 00 00 00	 jmp	 $LN1@update_ser
$LN13@update_ser:

; 164  : 			}
; 165  : 			////////////////////////////////////////
; 166  : 			case CAMERA_MODE_CINEMATIC:
; 167  : 			////////////////////////////////////////
; 168  : 			{
; 169  : 				update_cinematic_camera (raw);

  000c2	8b 45 fc	 mov	 eax, DWORD PTR _raw$[ebp]
  000c5	50		 push	 eax
  000c6	e8 00 00 00 00	 call	 ?update_cinematic_camera@@YGXPAUCAMERA@@@Z ; update_cinematic_camera

; 170  : 
; 171  : 				break;

  000cb	eb 77		 jmp	 SHORT $LN1@update_ser
$LN14@update_ser:

; 172  : 			}
; 173  : 			////////////////////////////////////////
; 174  : 			case CAMERA_MODE_BUILDING:
; 175  : 			////////////////////////////////////////
; 176  : 			{
; 177  : 				update_building_camera (raw);

  000cd	8b 45 fc	 mov	 eax, DWORD PTR _raw$[ebp]
  000d0	50		 push	 eax
  000d1	e8 00 00 00 00	 call	 ?update_building_camera@@YGXPAUCAMERA@@@Z ; update_building_camera

; 178  : 
; 179  : 				break;

  000d6	eb 6c		 jmp	 SHORT $LN1@update_ser
$LN15@update_ser:

; 180  : 			}
; 181  : 			////////////////////////////////////////
; 182  : 			case CAMERA_MODE_WEAPON:
; 183  : 			////////////////////////////////////////
; 184  : 			{
; 185  : 				update_weapon_camera (raw);

  000d8	8b 45 fc	 mov	 eax, DWORD PTR _raw$[ebp]
  000db	50		 push	 eax
  000dc	e8 00 00 00 00	 call	 ?update_weapon_camera@@YGXPAUCAMERA@@@Z ; update_weapon_camera

; 186  : 
; 187  : 				break;

  000e1	eb 61		 jmp	 SHORT $LN1@update_ser
$LN16@update_ser:

; 188  : 			}
; 189  : 			////////////////////////////////////////
; 190  : 			case CAMERA_MODE_WEAPON_EXPLOSION:
; 191  : 			////////////////////////////////////////
; 192  : 			{
; 193  : 				update_weapon_explosion_camera (raw);

  000e3	8b 45 fc	 mov	 eax, DWORD PTR _raw$[ebp]
  000e6	50		 push	 eax
  000e7	e8 00 00 00 00	 call	 ?update_weapon_explosion_camera@@YGXPAUCAMERA@@@Z ; update_weapon_explosion_camera

; 194  : 
; 195  : 				break;

  000ec	eb 56		 jmp	 SHORT $LN1@update_ser
$LN17@update_ser:

; 196  : 			}
; 197  : 			////////////////////////////////////////
; 198  : 			case CAMERA_MODE_DEBRIEFING:
; 199  : 			////////////////////////////////////////
; 200  : 			{
; 201  : 				update_debriefing_camera (raw);

  000ee	8b 45 fc	 mov	 eax, DWORD PTR _raw$[ebp]
  000f1	50		 push	 eax
  000f2	e8 00 00 00 00	 call	 ?update_debriefing_camera@@YGXPAUCAMERA@@@Z ; update_debriefing_camera

; 202  : 
; 203  : 				break;

  000f7	eb 4b		 jmp	 SHORT $LN1@update_ser
$LN18@update_ser:

; 204  : 			}
; 205  : 			////////////////////////////////////////
; 206  : 			case CAMERA_MODE_RECOGNITION_GUIDE_TOP_VIEW:
; 207  : 			////////////////////////////////////////
; 208  : 			{
; 209  : 				update_recognition_guide_top_view_camera (raw);

  000f9	8b 45 fc	 mov	 eax, DWORD PTR _raw$[ebp]
  000fc	50		 push	 eax
  000fd	e8 00 00 00 00	 call	 ?update_recognition_guide_top_view_camera@@YGXPAUCAMERA@@@Z ; update_recognition_guide_top_view_camera

; 210  : 
; 211  : 				break;

  00102	eb 40		 jmp	 SHORT $LN1@update_ser
$LN19@update_ser:

; 212  : 			}
; 213  : 			////////////////////////////////////////
; 214  : 			case CAMERA_MODE_RECOGNITION_GUIDE_SIDE_VIEW:
; 215  : 			////////////////////////////////////////
; 216  : 			{
; 217  : 				update_recognition_guide_side_view_camera (raw);

  00104	8b 45 fc	 mov	 eax, DWORD PTR _raw$[ebp]
  00107	50		 push	 eax
  00108	e8 00 00 00 00	 call	 ?update_recognition_guide_side_view_camera@@YGXPAUCAMERA@@@Z ; update_recognition_guide_side_view_camera

; 218  : 
; 219  : 				break;

  0010d	eb 35		 jmp	 SHORT $LN1@update_ser
$LN20@update_ser:

; 220  : 			}
; 221  : 			////////////////////////////////////////
; 222  : 			case CAMERA_MODE_RECOGNITION_GUIDE_FRONT_VIEW:
; 223  : 			////////////////////////////////////////
; 224  : 			{
; 225  : 				update_recognition_guide_front_view_camera (raw);

  0010f	8b 45 fc	 mov	 eax, DWORD PTR _raw$[ebp]
  00112	50		 push	 eax
  00113	e8 00 00 00 00	 call	 ?update_recognition_guide_front_view_camera@@YGXPAUCAMERA@@@Z ; update_recognition_guide_front_view_camera

; 226  : 
; 227  : 				break;

  00118	eb 2a		 jmp	 SHORT $LN1@update_ser
$LN21@update_ser:

; 228  : 			}
; 229  : 			////////////////////////////////////////
; 230  : 			case CAMERA_MODE_RECOGNITION_GUIDE_3D_VIEW:
; 231  : 			////////////////////////////////////////
; 232  : 			{
; 233  : 				update_recognition_guide_3d_view_camera (raw);

  0011a	8b 45 fc	 mov	 eax, DWORD PTR _raw$[ebp]
  0011d	50		 push	 eax
  0011e	e8 00 00 00 00	 call	 ?update_recognition_guide_3d_view_camera@@YGXPAUCAMERA@@@Z ; update_recognition_guide_3d_view_camera

; 234  : 
; 235  : 				break;

  00123	eb 1f		 jmp	 SHORT $LN1@update_ser
$LN22@update_ser:

; 236  : 			}
; 237  : 			////////////////////////////////////////
; 238  : 			case CAMERA_MODE_FREE:
; 239  : 			////////////////////////////////////////
; 240  : 			{
; 241  : 				update_free_camera (raw);

  00125	8b 45 fc	 mov	 eax, DWORD PTR _raw$[ebp]
  00128	50		 push	 eax
  00129	e8 00 00 00 00	 call	 ?update_free_camera@@YGXPAUCAMERA@@@Z ; update_free_camera

; 242  : 
; 243  : 				break;

  0012e	eb 14		 jmp	 SHORT $LN1@update_ser
$LN23@update_ser:

; 244  : 			}
; 245  : 			////////////////////////////////////////
; 246  : 			default:
; 247  : 			////////////////////////////////////////
; 248  : 			{
; 249  : 				debug_fatal ("Invalid camera mode = %d", raw->camera_mode);

  00130	8b 45 fc	 mov	 eax, DWORD PTR _raw$[ebp]
  00133	8b 48 3c	 mov	 ecx, DWORD PTR [eax+60]
  00136	51		 push	 ecx
  00137	68 00 00 00 00	 push	 OFFSET ??_C@_0BJ@HJPODAMB@Invalid?5camera?5mode?5?$DN?5?$CFd@
  0013c	e8 00 00 00 00	 call	 ?debug_fatal@@YAXPBDZZ	; debug_fatal
  00141	83 c4 08	 add	 esp, 8
$LN1@update_ser:

; 250  : 
; 251  : 				break;
; 252  : 			}
; 253  : 		}
; 254  : 	}
; 255  : }

  00144	5f		 pop	 edi
  00145	5e		 pop	 esi
  00146	5b		 pop	 ebx
  00147	8b e5		 mov	 esp, ebp
  00149	5d		 pop	 ebp
  0014a	c2 04 00	 ret	 4
  0014d	0f 1f 00	 npad	 3
$LN25@update_ser:
  00150	00 00 00 00	 DD	 $LN6@update_ser
  00154	00 00 00 00	 DD	 $LN7@update_ser
  00158	00 00 00 00	 DD	 $LN8@update_ser
  0015c	00 00 00 00	 DD	 $LN9@update_ser
  00160	00 00 00 00	 DD	 $LN10@update_ser
  00164	00 00 00 00	 DD	 $LN11@update_ser
  00168	00 00 00 00	 DD	 $LN12@update_ser
  0016c	00 00 00 00	 DD	 $LN13@update_ser
  00170	00 00 00 00	 DD	 $LN14@update_ser
  00174	00 00 00 00	 DD	 $LN15@update_ser
  00178	00 00 00 00	 DD	 $LN16@update_ser
  0017c	00 00 00 00	 DD	 $LN17@update_ser
  00180	00 00 00 00	 DD	 $LN18@update_ser
  00184	00 00 00 00	 DD	 $LN19@update_ser
  00188	00 00 00 00	 DD	 $LN20@update_ser
  0018c	00 00 00 00	 DD	 $LN21@update_ser
  00190	00 00 00 00	 DD	 $LN22@update_ser
?update_server@@YGXPAUENTITY@@@Z ENDP			; update_server
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\entity\special\camera\cm_updt.c
;	COMDAT ?overload_camera_update_functions@@YGXXZ
_TEXT	SEGMENT
?overload_camera_update_functions@@YGXXZ PROC		; overload_camera_update_functions, COMDAT

; 262  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 263  : 	fn_update_client_server_entity[ENTITY_TYPE_CAMERA][COMMS_MODEL_SERVER] = update_server;

  00009	b8 08 00 00 00	 mov	 eax, 8
  0000e	6b c8 03	 imul	 ecx, eax, 3
  00011	ba 04 00 00 00	 mov	 edx, 4
  00016	6b c2 00	 imul	 eax, edx, 0
  00019	c7 84 01 00 00
	00 00 00 00 00
	00		 mov	 DWORD PTR ?fn_update_client_server_entity@@3PAY01P6GXPAUENTITY@@@ZA[ecx+eax], OFFSET ?update_server@@YGXPAUENTITY@@@Z ; update_server

; 264  : 
; 265  : 	fn_update_client_server_entity[ENTITY_TYPE_CAMERA][COMMS_MODEL_CLIENT] = update_server;

  00024	b8 08 00 00 00	 mov	 eax, 8
  00029	6b c8 03	 imul	 ecx, eax, 3
  0002c	ba 04 00 00 00	 mov	 edx, 4
  00031	c1 e2 00	 shl	 edx, 0
  00034	c7 84 11 00 00
	00 00 00 00 00
	00		 mov	 DWORD PTR ?fn_update_client_server_entity@@3PAY01P6GXPAUENTITY@@@ZA[ecx+edx], OFFSET ?update_server@@YGXPAUENTITY@@@Z ; update_server

; 266  : }

  0003f	5f		 pop	 edi
  00040	5e		 pop	 esi
  00041	5b		 pop	 ebx
  00042	8b e5		 mov	 esp, ebp
  00044	5d		 pop	 ebp
  00045	c3		 ret	 0
?overload_camera_update_functions@@YGXXZ ENDP		; overload_camera_update_functions
_TEXT	ENDS
END
