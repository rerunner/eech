; Listing generated by Microsoft (R) Optimizing Compiler Version 19.16.27045.0 

	TITLE	C:\Users\nhv90\Projects\eech\aphavoc\source\gunships\views\vm_init.c
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB MSVCRTD
INCLUDELIB OLDNAMES

PUBLIC	?initialise_views@@YGXXZ			; initialise_views
PUBLIC	?deinitialise_views@@YGXXZ			; deinitialise_views
PUBLIC	??_C@_0BB@MHKEEPPN@view?5mode?5events@		; `string'
EXTRN	?push_event_overlay@@YGXP6GXXZPBD@Z:PROC	; push_event_overlay
EXTRN	?pop_event@@YGXP6GXXZ@Z:PROC			; pop_event
EXTRN	?notify_local_entity@@YAHW4ENTITY_MESSAGES@@PAUENTITY@@1ZZ:PROC ; notify_local_entity
EXTRN	?initialise_status_message@@YGXXZ:PROC		; initialise_status_message
EXTRN	?set_view_mode_events@@YGXXZ:PROC		; set_view_mode_events
EXTRN	?initialise_view_events@@YGXXZ:PROC		; initialise_view_events
EXTRN	?initialise_external_view@@YGXXZ:PROC		; initialise_external_view
EXTRN	?deinitialise_external_view@@YGXXZ:PROC		; deinitialise_external_view
EXTRN	?initialise_fixed_cockpit_view@@YGXXZ:PROC	; initialise_fixed_cockpit_view
EXTRN	?deinitialise_fixed_cockpit_view@@YGXXZ:PROC	; deinitialise_fixed_cockpit_view
EXTRN	?set_view_mode@@YGHW4VIEW_MODES@@@Z:PROC	; set_view_mode
EXTRN	?initialise_view_menu@@YGXXZ:PROC		; initialise_view_menu
EXTRN	?deinitialise_view_menu@@YGXXZ:PROC		; deinitialise_view_menu
EXTRN	?initialise_safe_view@@YGXXZ:PROC		; initialise_safe_view
EXTRN	?deinitialise_safe_view@@YGXXZ:PROC		; deinitialise_safe_view
EXTRN	?initialise_virtual_cockpit_view@@YGXXZ:PROC	; initialise_virtual_cockpit_view
EXTRN	?deinitialise_virtual_cockpit_view@@YGXXZ:PROC	; deinitialise_virtual_cockpit_view
EXTRN	?system_one_over_delta_time@@3MA:DWORD		; system_one_over_delta_time
EXTRN	?gunship_entity@@3PAUENTITY@@A:DWORD		; gunship_entity
EXTRN	?camera_entity@@3PAUENTITY@@A:DWORD		; camera_entity
EXTRN	?view_mode@@3W4VIEW_MODES@@A:DWORD		; view_mode
EXTRN	?framerate@@3MA:DWORD				; framerate
EXTRN	?timeframes@@3MA:DWORD				; timeframes
EXTRN	?frames@@3HA:DWORD				; frames
EXTRN	__fltused:DWORD
;	COMDAT ??_C@_0BB@MHKEEPPN@view?5mode?5events@
CONST	SEGMENT
??_C@_0BB@MHKEEPPN@view?5mode?5events@ DB 'view mode events', 00H ; `string'
CONST	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\gunships\views\vm_init.c
;	COMDAT ?deinitialise_views@@YGXXZ
_TEXT	SEGMENT
?deinitialise_views@@YGXXZ PROC				; deinitialise_views, COMDAT

; 129  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 130  : 	pop_event (set_view_mode_events);

  00009	68 00 00 00 00	 push	 OFFSET ?set_view_mode_events@@YGXXZ ; set_view_mode_events
  0000e	e8 00 00 00 00	 call	 ?pop_event@@YGXP6GXXZ@Z	; pop_event

; 131  : 
; 132  : 	deinitialise_fixed_cockpit_view ();

  00013	e8 00 00 00 00	 call	 ?deinitialise_fixed_cockpit_view@@YGXXZ ; deinitialise_fixed_cockpit_view

; 133  : 
; 134  : 	deinitialise_virtual_cockpit_view ();

  00018	e8 00 00 00 00	 call	 ?deinitialise_virtual_cockpit_view@@YGXXZ ; deinitialise_virtual_cockpit_view

; 135  : 
; 136  : 	deinitialise_external_view ();

  0001d	e8 00 00 00 00	 call	 ?deinitialise_external_view@@YGXXZ ; deinitialise_external_view

; 137  : 
; 138  : 	deinitialise_safe_view ();

  00022	e8 00 00 00 00	 call	 ?deinitialise_safe_view@@YGXXZ ; deinitialise_safe_view

; 139  : 
; 140  : 	deinitialise_view_menu ();

  00027	e8 00 00 00 00	 call	 ?deinitialise_view_menu@@YGXXZ ; deinitialise_view_menu

; 141  : }

  0002c	5f		 pop	 edi
  0002d	5e		 pop	 esi
  0002e	5b		 pop	 ebx
  0002f	8b e5		 mov	 esp, ebp
  00031	5d		 pop	 ebp
  00032	c3		 ret	 0
?deinitialise_views@@YGXXZ ENDP				; deinitialise_views
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\gunships\views\vm_init.c
;	COMDAT ?initialise_views@@YGXXZ
_TEXT	SEGMENT
?initialise_views@@YGXXZ PROC				; initialise_views, COMDAT

; 74   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 75   : 	initialise_fixed_cockpit_view ();

  00009	e8 00 00 00 00	 call	 ?initialise_fixed_cockpit_view@@YGXXZ ; initialise_fixed_cockpit_view

; 76   : 
; 77   : 	initialise_virtual_cockpit_view ();

  0000e	e8 00 00 00 00	 call	 ?initialise_virtual_cockpit_view@@YGXXZ ; initialise_virtual_cockpit_view

; 78   : 
; 79   : 	initialise_external_view ();

  00013	e8 00 00 00 00	 call	 ?initialise_external_view@@YGXXZ ; initialise_external_view

; 80   : 
; 81   : 	initialise_safe_view ();

  00018	e8 00 00 00 00	 call	 ?initialise_safe_view@@YGXXZ ; initialise_safe_view

; 82   : 
; 83   : 	initialise_view_menu ();

  0001d	e8 00 00 00 00	 call	 ?initialise_view_menu@@YGXXZ ; initialise_view_menu

; 84   : 
; 85   : 	initialise_status_message ();

  00022	e8 00 00 00 00	 call	 ?initialise_status_message@@YGXXZ ; initialise_status_message

; 86   : 
; 87   : 	//
; 88   : 	// set safe view mode
; 89   : 	//
; 90   : 
; 91   : 	view_mode = VIEW_MODE_SAFE;

  00027	c7 05 00 00 00
	00 2b 00 00 00	 mov	 DWORD PTR ?view_mode@@3W4VIEW_MODES@@A, 43 ; view_mode, 0000002bH

; 92   : 
; 93   : 	if (get_gunship_entity ())

  00031	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?gunship_entity@@3PAUENTITY@@A, 0 ; gunship_entity
  00038	74 09		 je	 SHORT $LN2@initialise

; 94   : 	{
; 95   : 		set_view_mode (VIEW_MODE_COCKPIT_PANEL_LEVEL_AHEAD);

  0003a	6a 11		 push	 17			; 00000011H
  0003c	e8 00 00 00 00	 call	 ?set_view_mode@@YGHW4VIEW_MODES@@@Z ; set_view_mode

; 96   : 	}
; 97   : 	else

  00041	eb 28		 jmp	 SHORT $LN5@initialise
$LN2@initialise:

; 98   : 	{
; 99   : 		if (set_view_mode (VIEW_MODE_EXTERNAL))

  00043	6a 2a		 push	 42			; 0000002aH
  00045	e8 00 00 00 00	 call	 ?set_view_mode@@YGHW4VIEW_MODES@@@Z ; set_view_mode
  0004a	85 c0		 test	 eax, eax
  0004c	74 16		 je	 SHORT $LN4@initialise

; 100  : 		{
; 101  : 			notify_local_entity (ENTITY_MESSAGE_SET_CAMERA_ACTION, get_camera_entity (), NULL, CAMERA_ACTION_AUTO_EDIT);

  0004e	6a 0d		 push	 13			; 0000000dH
  00050	6a 00		 push	 0
  00052	a1 00 00 00 00	 mov	 eax, DWORD PTR ?camera_entity@@3PAUENTITY@@A ; camera_entity
  00057	50		 push	 eax
  00058	6a 2f		 push	 47			; 0000002fH
  0005a	e8 00 00 00 00	 call	 ?notify_local_entity@@YAHW4ENTITY_MESSAGES@@PAUENTITY@@1ZZ ; notify_local_entity
  0005f	83 c4 10	 add	 esp, 16			; 00000010H

; 102  : 		}
; 103  : 		else

  00062	eb 07		 jmp	 SHORT $LN5@initialise
$LN4@initialise:

; 104  : 		{
; 105  : 			set_view_mode (VIEW_MODE_SAFE);

  00064	6a 2b		 push	 43			; 0000002bH
  00066	e8 00 00 00 00	 call	 ?set_view_mode@@YGHW4VIEW_MODES@@@Z ; set_view_mode
$LN5@initialise:

; 106  : 		}
; 107  : 	}
; 108  : 
; 109  : 	//
; 110  : 	// set events once everything else has been initialised
; 111  : 	//
; 112  : 
; 113  : 	initialise_view_events ();

  0006b	e8 00 00 00 00	 call	 ?initialise_view_events@@YGXXZ ; initialise_view_events

; 114  : 
; 115  : 	push_event_overlay (set_view_mode_events, "view mode events");

  00070	68 00 00 00 00	 push	 OFFSET ??_C@_0BB@MHKEEPPN@view?5mode?5events@
  00075	68 00 00 00 00	 push	 OFFSET ?set_view_mode_events@@YGXXZ ; set_view_mode_events
  0007a	e8 00 00 00 00	 call	 ?push_event_overlay@@YGXP6GXXZPBD@Z ; push_event_overlay

; 116  : 	
; 117  : //VJ framerate 24-mar-03	
; 118  : 	framerate = get_one_over_delta_time ();

  0007f	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR ?system_one_over_delta_time@@3MA
  00087	f3 0f 11 05 00
	00 00 00	 movss	 DWORD PTR ?framerate@@3MA, xmm0

; 119  : 	timeframes = 0;

  0008f	0f 57 c0	 xorps	 xmm0, xmm0
  00092	f3 0f 11 05 00
	00 00 00	 movss	 DWORD PTR ?timeframes@@3MA, xmm0

; 120  : 	frames = 0;	

  0009a	c7 05 00 00 00
	00 00 00 00 00	 mov	 DWORD PTR ?frames@@3HA, 0 ; frames

; 121  : 	
; 122  : }

  000a4	5f		 pop	 edi
  000a5	5e		 pop	 esi
  000a6	5b		 pop	 ebx
  000a7	8b e5		 mov	 esp, ebp
  000a9	5d		 pop	 ebp
  000aa	c3		 ret	 0
?initialise_views@@YGXXZ ENDP				; initialise_views
_TEXT	ENDS
END
