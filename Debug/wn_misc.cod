; Listing generated by Microsoft (R) Optimizing Compiler Version 19.16.27045.0 

	TITLE	C:\Users\nhv90\Projects\eech\aphavoc\source\entity\mobile\weapon\wn_misc.c
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB MSVCRTD
INCLUDELIB OLDNAMES

PUBLIC	?get_local_entity_weapon_load_weight@@YGMPAUENTITY@@@Z ; get_local_entity_weapon_load_weight
PUBLIC	?get_local_entity_weapon_count@@YGHPAUENTITY@@H@Z ; get_local_entity_weapon_count
PUBLIC	?check_weapon_on_hardpoint@@YGHW4WEAPON_CONFIG_TYPES@@HH@Z ; check_weapon_on_hardpoint
PUBLIC	?check_hardpoint_clean@@YGHW4WEAPON_CONFIG_TYPES@@H@Z ; check_hardpoint_clean
PUBLIC	?get_local_entity_weapon_load@@YGXPAUENTITY@@QAUweapon_count@@I@Z ; get_local_entity_weapon_load
PUBLIC	?set_local_entity_weapon_damage@@YGXPAUENTITY@@HHH@Z ; set_local_entity_weapon_damage
PUBLIC	?set_client_server_entity_weapon_damage@@YGXPAUENTITY@@HHH@Z ; set_client_server_entity_weapon_damage
PUBLIC	?get_local_entity_weapon_hardpoint_info@@YGHPAUENTITY@@HHPAH11@Z ; get_local_entity_weapon_hardpoint_info
PUBLIC	?set_comanche_stub_wing_visibility@@YGXPAUENTITY@@@Z ; set_comanche_stub_wing_visibility
PUBLIC	?get_comanche_stub_wings_attached@@YGHPAUENTITY@@@Z ; get_comanche_stub_wings_attached
PUBLIC	?__LINE__Var@?0??get_local_entity_weapon_load@@YGXPAUENTITY@@QAUweapon_count@@I@Z@4JA ; `get_local_entity_weapon_load'::`1'::__LINE__Var
PUBLIC	??_C@_0EL@LINJNLBM@c?3?2users?2nhv90?2projects?2eech?2ap@ ; `string'
PUBLIC	??_C@_02LFNMGJAP@en@				; `string'
PUBLIC	??_C@_0M@GDGEIKCK@weapon_load@			; `string'
PUBLIC	??_C@_0BE@GIGFKLFM@max_num_weapons?5?$DO?50@	; `string'
PUBLIC	?__LINE__Var@?0??get_local_entity_weapon_load_weight@@YGMPAUENTITY@@@Z@4JA ; `get_local_entity_weapon_load_weight'::`1'::__LINE__Var
PUBLIC	?__LINE__Var@?0??get_local_entity_weapon_count@@YGHPAUENTITY@@H@Z@4JA ; `get_local_entity_weapon_count'::`1'::__LINE__Var
PUBLIC	??_C@_0CP@MAFEAOFK@entity_sub_type_weapon_valid?5?$CIw@ ; `string'
PUBLIC	?__LINE__Var@?0??set_local_entity_weapon_damage@@YGXPAUENTITY@@HHH@Z@4JA ; `set_local_entity_weapon_damage'::`1'::__LINE__Var
PUBLIC	?__LINE__Var@?0??set_client_server_entity_weapon_damage@@YGXPAUENTITY@@HHH@Z@4JA ; `set_client_server_entity_weapon_damage'::`1'::__LINE__Var
PUBLIC	?__LINE__Var@?0??get_local_entity_weapon_hardpoint_info@@YGHPAUENTITY@@HHPAH11@Z@4JA ; `get_local_entity_weapon_hardpoint_info'::`1'::__LINE__Var
PUBLIC	??_C@_0BA@GBEOFMFG@weapon_sub_type@		; `string'
PUBLIC	??_C@_06EBGNBFIA@number@			; `string'
PUBLIC	??_C@_07BKPJODCN@damaged@			; `string'
PUBLIC	?__LINE__Var@?0??set_comanche_stub_wing_visibility@@YGXPAUENTITY@@@Z@4JA ; `set_comanche_stub_wing_visibility'::`1'::__LINE__Var
PUBLIC	??_C@_0CH@EBNCOBJM@weapon_config_type_valid?5?$CIconfi@ ; `string'
PUBLIC	??_C@_06DDNABPCD@inst3d@			; `string'
PUBLIC	?__LINE__Var@?0??get_comanche_stub_wings_attached@@YGHPAUENTITY@@@Z@4JA ; `get_comanche_stub_wings_attached'::`1'::__LINE__Var
EXTRN	?process_assert@@YGXPBD0H@Z:PROC		; process_assert
EXTRN	?find_object_3d_sub_object@@YG?AW4SUB_OBJECT_SEARCH_RESULT_TYPES@@PAUOBJECT_3D_SUB_OBJECT_SEARCH_DATA@@@Z:PROC ; find_object_3d_sub_object
EXTRN	?transmit_entity_comms_message@@YAXW4ENTITY_COMMS_MESSAGES@@PAUENTITY@@ZZ:PROC ; transmit_entity_comms_message
EXTRN	?null_entity_pointer_message@@3PBDB:DWORD	; null_entity_pointer_message
EXTRN	?system_comms_model@@3W4COMMS_MODEL_TYPES@@A:DWORD ; system_comms_model
EXTRN	?system_comms_data_flow@@3W4COMMS_DATA_FLOW_TYPES@@A:DWORD ; system_comms_data_flow
EXTRN	?overload_invalid_int_type_message@@3PBDB:DWORD	; overload_invalid_int_type_message
EXTRN	?fn_get_local_entity_int_value@@3PAY0BBH@P6GHPAUENTITY@@W4INT_TYPES@@@ZA:BYTE ; fn_get_local_entity_int_value
EXTRN	?overload_invalid_ptr_type_message@@3PBDB:DWORD	; overload_invalid_ptr_type_message
EXTRN	?fn_get_local_entity_ptr_value@@3PAY0BE@P6GPAXPAUENTITY@@W4PTR_TYPES@@@ZA:BYTE ; fn_get_local_entity_ptr_value
EXTRN	?weapon_database@@3PAUWEAPON_DATA@@A:BYTE	; weapon_database
EXTRN	?weapon_config_database@@3PAY0CA@UWEAPON_PACKAGE@@A:BYTE ; weapon_config_database
EXTRN	__fltused:DWORD
;	COMDAT ?__LINE__Var@?0??get_comanche_stub_wings_attached@@YGHPAUENTITY@@@Z@4JA
_DATA	SEGMENT
?__LINE__Var@?0??get_comanche_stub_wings_attached@@YGHPAUENTITY@@@Z@4JA DD 023cH ; `get_comanche_stub_wings_attached'::`1'::__LINE__Var
_DATA	ENDS
;	COMDAT ??_C@_06DDNABPCD@inst3d@
CONST	SEGMENT
??_C@_06DDNABPCD@inst3d@ DB 'inst3d', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_0CH@EBNCOBJM@weapon_config_type_valid?5?$CIconfi@
CONST	SEGMENT
??_C@_0CH@EBNCOBJM@weapon_config_type_valid?5?$CIconfi@ DB 'weapon_config'
	DB	'_type_valid (config_type)', 00H		; `string'
CONST	ENDS
;	COMDAT ?__LINE__Var@?0??set_comanche_stub_wing_visibility@@YGXPAUENTITY@@@Z@4JA
_DATA	SEGMENT
?__LINE__Var@?0??set_comanche_stub_wing_visibility@@YGXPAUENTITY@@@Z@4JA DD 01dfH ; `set_comanche_stub_wing_visibility'::`1'::__LINE__Var
_DATA	ENDS
;	COMDAT ??_C@_07BKPJODCN@damaged@
CONST	SEGMENT
??_C@_07BKPJODCN@damaged@ DB 'damaged', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_06EBGNBFIA@number@
CONST	SEGMENT
??_C@_06EBGNBFIA@number@ DB 'number', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_0BA@GBEOFMFG@weapon_sub_type@
CONST	SEGMENT
??_C@_0BA@GBEOFMFG@weapon_sub_type@ DB 'weapon_sub_type', 00H ; `string'
CONST	ENDS
;	COMDAT ?__LINE__Var@?0??get_local_entity_weapon_hardpoint_info@@YGHPAUENTITY@@HHPAH11@Z@4JA
_DATA	SEGMENT
?__LINE__Var@?0??get_local_entity_weapon_hardpoint_info@@YGHPAUENTITY@@HHPAH11@Z@4JA DD 018bH ; `get_local_entity_weapon_hardpoint_info'::`1'::__LINE__Var
_DATA	ENDS
;	COMDAT ?__LINE__Var@?0??set_client_server_entity_weapon_damage@@YGXPAUENTITY@@HHH@Z@4JA
_DATA	SEGMENT
?__LINE__Var@?0??set_client_server_entity_weapon_damage@@YGXPAUENTITY@@HHH@Z@4JA DD 0156H ; `set_client_server_entity_weapon_damage'::`1'::__LINE__Var
_DATA	ENDS
;	COMDAT ?__LINE__Var@?0??set_local_entity_weapon_damage@@YGXPAUENTITY@@HHH@Z@4JA
_DATA	SEGMENT
?__LINE__Var@?0??set_local_entity_weapon_damage@@YGXPAUENTITY@@HHH@Z@4JA DD 011fH ; `set_local_entity_weapon_damage'::`1'::__LINE__Var
_DATA	ENDS
;	COMDAT ??_C@_0CP@MAFEAOFK@entity_sub_type_weapon_valid?5?$CIw@
CONST	SEGMENT
??_C@_0CP@MAFEAOFK@entity_sub_type_weapon_valid?5?$CIw@ DB 'entity_sub_ty'
	DB	'pe_weapon_valid (weapon_sub_type)', 00H	; `string'
CONST	ENDS
;	COMDAT ?__LINE__Var@?0??get_local_entity_weapon_count@@YGHPAUENTITY@@H@Z@4JA
_DATA	SEGMENT
?__LINE__Var@?0??get_local_entity_weapon_count@@YGHPAUENTITY@@H@Z@4JA DD 0b7H ; `get_local_entity_weapon_count'::`1'::__LINE__Var
_DATA	ENDS
;	COMDAT ?__LINE__Var@?0??get_local_entity_weapon_load_weight@@YGMPAUENTITY@@@Z@4JA
_DATA	SEGMENT
?__LINE__Var@?0??get_local_entity_weapon_load_weight@@YGMPAUENTITY@@@Z@4JA DD 087H ; `get_local_entity_weapon_load_weight'::`1'::__LINE__Var
_DATA	ENDS
;	COMDAT ??_C@_0BE@GIGFKLFM@max_num_weapons?5?$DO?50@
CONST	SEGMENT
??_C@_0BE@GIGFKLFM@max_num_weapons?5?$DO?50@ DB 'max_num_weapons > 0', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0M@GDGEIKCK@weapon_load@
CONST	SEGMENT
??_C@_0M@GDGEIKCK@weapon_load@ DB 'weapon_load', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_02LFNMGJAP@en@
CONST	SEGMENT
??_C@_02LFNMGJAP@en@ DB 'en', 00H			; `string'
CONST	ENDS
;	COMDAT ??_C@_0EL@LINJNLBM@c?3?2users?2nhv90?2projects?2eech?2ap@
CONST	SEGMENT
??_C@_0EL@LINJNLBM@c?3?2users?2nhv90?2projects?2eech?2ap@ DB 'c:\users\nh'
	DB	'v90\projects\eech\aphavoc\source\entity\mobile\weapon\wn_misc'
	DB	'.c', 00H					; `string'
CONST	ENDS
;	COMDAT ?__LINE__Var@?0??get_local_entity_weapon_load@@YGXPAUENTITY@@QAUweapon_count@@I@Z@4JA
_DATA	SEGMENT
?__LINE__Var@?0??get_local_entity_weapon_load@@YGXPAUENTITY@@QAUweapon_count@@I@Z@4JA DD 050H ; `get_local_entity_weapon_load'::`1'::__LINE__Var
_DATA	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\entity\mobile\weapon\wn_misc.c
;	COMDAT ?get_comanche_stub_wings_attached@@YGHPAUENTITY@@@Z
_TEXT	SEGMENT
tv155 = -84						; size = 4
tv134 = -84						; size = 4
tv81 = -84						; size = 4
tv147 = -80						; size = 4
tv94 = -80						; size = 4
tv74 = -80						; size = 4
_package$ = -12						; size = 4
_config_type$ = -8					; size = 4
_package_status$ = -4					; size = 4
_en$ = 8						; size = 4
?get_comanche_stub_wings_attached@@YGHPAUENTITY@@@Z PROC ; get_comanche_stub_wings_attached, COMDAT

; 572  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 54	 sub	 esp, 84			; 00000054H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 573  : 	weapon_package_status
; 574  : 		*package_status;
; 575  : 
; 576  : 	weapon_config_types
; 577  : 		config_type;
; 578  : 
; 579  : 	int
; 580  : 		package;
; 581  : 
; 582  : 	ASSERT (en);

  00009	83 7d 08 00	 cmp	 DWORD PTR _en$[ebp], 0
  0000d	75 18		 jne	 SHORT $LN5@get_comanc
  0000f	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??get_comanche_stub_wings_attached@@YGHPAUENTITY@@@Z@4JA
  00014	83 c0 0a	 add	 eax, 10			; 0000000aH
  00017	50		 push	 eax
  00018	68 00 00 00 00	 push	 OFFSET ??_C@_0EL@LINJNLBM@c?3?2users?2nhv90?2projects?2eech?2ap@
  0001d	68 00 00 00 00	 push	 OFFSET ??_C@_02LFNMGJAP@en@
  00022	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN5@get_comanc:

; 583  : 
; 584  : 	if (get_local_entity_int_value (en, INT_TYPE_ENTITY_SUB_TYPE) != ENTITY_SUB_TYPE_AIRCRAFT_RAH66_COMANCHE)

  00027	83 7d 08 00	 cmp	 DWORD PTR _en$[ebp], 0
  0002b	74 0a		 je	 SHORT $LN14@get_comanc
  0002d	8b 45 08	 mov	 eax, DWORD PTR _en$[ebp]
  00030	8b 08		 mov	 ecx, DWORD PTR [eax]
  00032	89 4d b0	 mov	 DWORD PTR tv74[ebp], ecx
  00035	eb 1d		 jmp	 SHORT $LN15@get_comanc
$LN14@get_comanc:
  00037	68 48 02 00 00	 push	 584			; 00000248H
  0003c	68 00 00 00 00	 push	 OFFSET ??_C@_0EL@LINJNLBM@c?3?2users?2nhv90?2projects?2eech?2ap@
  00041	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  00047	52		 push	 edx
  00048	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  0004d	c7 45 b0 00 00
	00 00		 mov	 DWORD PTR tv74[ebp], 0
$LN15@get_comanc:
  00054	b8 01 00 00 00	 mov	 eax, 1
  00059	85 c0		 test	 eax, eax
  0005b	74 09		 je	 SHORT $LN16@get_comanc
  0005d	c7 45 ac 34 00
	00 00		 mov	 DWORD PTR tv81[ebp], 52	; 00000034H
  00064	eb 1d		 jmp	 SHORT $LN17@get_comanc
$LN16@get_comanc:
  00066	68 48 02 00 00	 push	 584			; 00000248H
  0006b	68 00 00 00 00	 push	 OFFSET ??_C@_0EL@LINJNLBM@c?3?2users?2nhv90?2projects?2eech?2ap@
  00070	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?overload_invalid_int_type_message@@3PBDB ; overload_invalid_int_type_message
  00076	51		 push	 ecx
  00077	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  0007c	c7 45 ac 00 00
	00 00		 mov	 DWORD PTR tv81[ebp], 0
$LN17@get_comanc:
  00083	6a 34		 push	 52			; 00000034H
  00085	8b 55 08	 mov	 edx, DWORD PTR _en$[ebp]
  00088	52		 push	 edx
  00089	69 45 b0 5c 04
	00 00		 imul	 eax, DWORD PTR tv74[ebp], 1116
  00090	8b 4d ac	 mov	 ecx, DWORD PTR tv81[ebp]
  00093	8b 94 88 00 00
	00 00		 mov	 edx, DWORD PTR ?fn_get_local_entity_int_value@@3PAY0BBH@P6GHPAUENTITY@@W4INT_TYPES@@@ZA[eax+ecx*4]
  0009a	ff d2		 call	 edx
  0009c	83 f8 02	 cmp	 eax, 2
  0009f	74 07		 je	 SHORT $LN6@get_comanc

; 585  : 	{
; 586  : 		return (FALSE);

  000a1	33 c0		 xor	 eax, eax
  000a3	e9 95 01 00 00	 jmp	 $LN1@get_comanc
$LN6@get_comanc:

; 587  : 	}
; 588  : 
; 589  : 	//
; 590  : 	// search packages for stub wings (include empty and damaged weapons)
; 591  : 	//
; 592  : 
; 593  : 	package_status = (weapon_package_status *) get_local_entity_ptr_value (en, PTR_TYPE_WEAPON_PACKAGE_STATUS_ARRAY);

  000a8	83 7d 08 00	 cmp	 DWORD PTR _en$[ebp], 0
  000ac	74 0a		 je	 SHORT $LN18@get_comanc
  000ae	8b 45 08	 mov	 eax, DWORD PTR _en$[ebp]
  000b1	8b 08		 mov	 ecx, DWORD PTR [eax]
  000b3	89 4d b0	 mov	 DWORD PTR tv94[ebp], ecx
  000b6	eb 21		 jmp	 SHORT $LN19@get_comanc
$LN18@get_comanc:
  000b8	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??get_comanche_stub_wings_attached@@YGHPAUENTITY@@@Z@4JA
  000be	83 c2 15	 add	 edx, 21			; 00000015H
  000c1	52		 push	 edx
  000c2	68 00 00 00 00	 push	 OFFSET ??_C@_0EL@LINJNLBM@c?3?2users?2nhv90?2projects?2eech?2ap@
  000c7	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  000cc	50		 push	 eax
  000cd	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  000d2	c7 45 b0 00 00
	00 00		 mov	 DWORD PTR tv94[ebp], 0
$LN19@get_comanc:
  000d9	b9 01 00 00 00	 mov	 ecx, 1
  000de	85 c9		 test	 ecx, ecx
  000e0	74 09		 je	 SHORT $LN20@get_comanc
  000e2	c7 45 ac 13 00
	00 00		 mov	 DWORD PTR tv134[ebp], 19 ; 00000013H
  000e9	eb 21		 jmp	 SHORT $LN21@get_comanc
$LN20@get_comanc:
  000eb	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??get_comanche_stub_wings_attached@@YGHPAUENTITY@@@Z@4JA
  000f1	83 c2 15	 add	 edx, 21			; 00000015H
  000f4	52		 push	 edx
  000f5	68 00 00 00 00	 push	 OFFSET ??_C@_0EL@LINJNLBM@c?3?2users?2nhv90?2projects?2eech?2ap@
  000fa	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_ptr_type_message@@3PBDB ; overload_invalid_ptr_type_message
  000ff	50		 push	 eax
  00100	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00105	c7 45 ac 00 00
	00 00		 mov	 DWORD PTR tv134[ebp], 0
$LN21@get_comanc:
  0010c	6a 13		 push	 19			; 00000013H
  0010e	8b 4d 08	 mov	 ecx, DWORD PTR _en$[ebp]
  00111	51		 push	 ecx
  00112	6b 55 b0 50	 imul	 edx, DWORD PTR tv94[ebp], 80
  00116	8b 45 ac	 mov	 eax, DWORD PTR tv134[ebp]
  00119	8b 8c 82 00 00
	00 00		 mov	 ecx, DWORD PTR ?fn_get_local_entity_ptr_value@@3PAY0BE@P6GPAXPAUENTITY@@W4PTR_TYPES@@@ZA[edx+eax*4]
  00120	ff d1		 call	 ecx
  00122	89 45 fc	 mov	 DWORD PTR _package_status$[ebp], eax

; 594  : 
; 595  : 	if (package_status)

  00125	83 7d fc 00	 cmp	 DWORD PTR _package_status$[ebp], 0
  00129	0f 84 0c 01 00
	00		 je	 $LN7@get_comanc

; 596  : 	{
; 597  : 		config_type = (weapon_config_types) get_local_entity_int_value (en, INT_TYPE_WEAPON_CONFIG_TYPE);

  0012f	83 7d 08 00	 cmp	 DWORD PTR _en$[ebp], 0
  00133	74 0a		 je	 SHORT $LN22@get_comanc
  00135	8b 45 08	 mov	 eax, DWORD PTR _en$[ebp]
  00138	8b 08		 mov	 ecx, DWORD PTR [eax]
  0013a	89 4d b0	 mov	 DWORD PTR tv147[ebp], ecx
  0013d	eb 21		 jmp	 SHORT $LN23@get_comanc
$LN22@get_comanc:
  0013f	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??get_comanche_stub_wings_attached@@YGHPAUENTITY@@@Z@4JA
  00145	83 c2 19	 add	 edx, 25			; 00000019H
  00148	52		 push	 edx
  00149	68 00 00 00 00	 push	 OFFSET ??_C@_0EL@LINJNLBM@c?3?2users?2nhv90?2projects?2eech?2ap@
  0014e	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  00153	50		 push	 eax
  00154	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00159	c7 45 b0 00 00
	00 00		 mov	 DWORD PTR tv147[ebp], 0
$LN23@get_comanc:
  00160	b9 01 00 00 00	 mov	 ecx, 1
  00165	85 c9		 test	 ecx, ecx
  00167	74 09		 je	 SHORT $LN24@get_comanc
  00169	c7 45 ac 05 01
	00 00		 mov	 DWORD PTR tv155[ebp], 261 ; 00000105H
  00170	eb 21		 jmp	 SHORT $LN25@get_comanc
$LN24@get_comanc:
  00172	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??get_comanche_stub_wings_attached@@YGHPAUENTITY@@@Z@4JA
  00178	83 c2 19	 add	 edx, 25			; 00000019H
  0017b	52		 push	 edx
  0017c	68 00 00 00 00	 push	 OFFSET ??_C@_0EL@LINJNLBM@c?3?2users?2nhv90?2projects?2eech?2ap@
  00181	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_int_type_message@@3PBDB ; overload_invalid_int_type_message
  00186	50		 push	 eax
  00187	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  0018c	c7 45 ac 00 00
	00 00		 mov	 DWORD PTR tv155[ebp], 0
$LN25@get_comanc:
  00193	68 05 01 00 00	 push	 261			; 00000105H
  00198	8b 4d 08	 mov	 ecx, DWORD PTR _en$[ebp]
  0019b	51		 push	 ecx
  0019c	69 55 b0 5c 04
	00 00		 imul	 edx, DWORD PTR tv147[ebp], 1116
  001a3	8b 45 ac	 mov	 eax, DWORD PTR tv155[ebp]
  001a6	8b 8c 82 00 00
	00 00		 mov	 ecx, DWORD PTR ?fn_get_local_entity_int_value@@3PAY0BBH@P6GHPAUENTITY@@W4INT_TYPES@@@ZA[edx+eax*4]
  001ad	ff d1		 call	 ecx
  001af	89 45 f8	 mov	 DWORD PTR _config_type$[ebp], eax

; 598  : 
; 599  : 		ASSERT (weapon_config_type_valid (config_type));

  001b2	83 7d f8 00	 cmp	 DWORD PTR _config_type$[ebp], 0
  001b6	7c 09		 jl	 SHORT $LN9@get_comanc
  001b8	81 7d f8 cc 02
	00 00		 cmp	 DWORD PTR _config_type$[ebp], 716 ; 000002ccH
  001bf	7c 18		 jl	 SHORT $LN8@get_comanc
$LN9@get_comanc:
  001c1	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??get_comanche_stub_wings_attached@@YGHPAUENTITY@@@Z@4JA
  001c6	83 c0 1b	 add	 eax, 27			; 0000001bH
  001c9	50		 push	 eax
  001ca	68 00 00 00 00	 push	 OFFSET ??_C@_0EL@LINJNLBM@c?3?2users?2nhv90?2projects?2eech?2ap@
  001cf	68 00 00 00 00	 push	 OFFSET ??_C@_0CH@EBNCOBJM@weapon_config_type_valid?5?$CIconfi@
  001d4	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN8@get_comanc:

; 600  : 
; 601  : 		for (package = 0; package < NUM_WEAPON_PACKAGES; package++)

  001d9	c7 45 f4 00 00
	00 00		 mov	 DWORD PTR _package$[ebp], 0
  001e0	eb 09		 jmp	 SHORT $LN4@get_comanc
$LN2@get_comanc:
  001e2	8b 45 f4	 mov	 eax, DWORD PTR _package$[ebp]
  001e5	83 c0 01	 add	 eax, 1
  001e8	89 45 f4	 mov	 DWORD PTR _package$[ebp], eax
$LN4@get_comanc:
  001eb	83 7d f4 20	 cmp	 DWORD PTR _package$[ebp], 32 ; 00000020H
  001ef	7d 4a		 jge	 SHORT $LN7@get_comanc

; 602  : 		{
; 603  : 			if (weapon_config_database[config_type][package].sub_type == ENTITY_SUB_TYPE_WEAPON_NO_WEAPON)

  001f1	69 45 f8 80 09
	00 00		 imul	 eax, DWORD PTR _config_type$[ebp], 2432
  001f8	6b 4d f4 4c	 imul	 ecx, DWORD PTR _package$[ebp], 76
  001fc	83 bc 08 00 00
	00 00 00	 cmp	 DWORD PTR ?weapon_config_database@@3PAY0CA@UWEAPON_PACKAGE@@A[eax+ecx], 0
  00204	75 02		 jne	 SHORT $LN10@get_comanc

; 604  : 			{
; 605  : 				break;

  00206	eb 33		 jmp	 SHORT $LN7@get_comanc
$LN10@get_comanc:

; 606  : 			}
; 607  : 
; 608  : 			if
; 609  : 			(
; 610  : 				(weapon_config_database[config_type][package].heading_depth == COMANCHE_LHS_STUB_WING) ||

  00208	69 45 f8 80 09
	00 00		 imul	 eax, DWORD PTR _config_type$[ebp], 2432
  0020f	6b 4d f4 4c	 imul	 ecx, DWORD PTR _package$[ebp], 76
  00213	83 bc 08 08 00
	00 00 00	 cmp	 DWORD PTR ?weapon_config_database@@3PAY0CA@UWEAPON_PACKAGE@@A[eax+ecx+8], 0
  0021b	74 15		 je	 SHORT $LN12@get_comanc
  0021d	69 45 f8 80 09
	00 00		 imul	 eax, DWORD PTR _config_type$[ebp], 2432
  00224	6b 4d f4 4c	 imul	 ecx, DWORD PTR _package$[ebp], 76
  00228	83 bc 08 08 00
	00 00 01	 cmp	 DWORD PTR ?weapon_config_database@@3PAY0CA@UWEAPON_PACKAGE@@A[eax+ecx+8], 1
  00230	75 07		 jne	 SHORT $LN11@get_comanc
$LN12@get_comanc:

; 611  : 				(weapon_config_database[config_type][package].heading_depth == COMANCHE_RHS_STUB_WING)
; 612  : 			)
; 613  : 			{
; 614  : 				return (TRUE);

  00232	b8 01 00 00 00	 mov	 eax, 1
  00237	eb 04		 jmp	 SHORT $LN1@get_comanc
$LN11@get_comanc:

; 615  : 			}
; 616  : 		}

  00239	eb a7		 jmp	 SHORT $LN2@get_comanc
$LN7@get_comanc:

; 617  : 	}
; 618  : 
; 619  : 	return (FALSE);

  0023b	33 c0		 xor	 eax, eax
$LN1@get_comanc:

; 620  : }

  0023d	5f		 pop	 edi
  0023e	5e		 pop	 esi
  0023f	5b		 pop	 ebx
  00240	8b e5		 mov	 esp, ebp
  00242	5d		 pop	 ebp
  00243	c2 04 00	 ret	 4
?get_comanche_stub_wings_attached@@YGHPAUENTITY@@@Z ENDP ; get_comanche_stub_wings_attached
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\entity\mobile\weapon\wn_misc.c
;	COMDAT ?set_comanche_stub_wing_visibility@@YGXPAUENTITY@@@Z
_TEXT	SEGMENT
tv201 = -152						; size = 4
tv155 = -152						; size = 4
tv134 = -152						; size = 4
tv81 = -152						; size = 4
tv193 = -148						; size = 4
tv147 = -148						; size = 4
tv94 = -148						; size = 4
tv74 = -148						; size = 4
_stub_wings_required$ = -80				; size = 4
_package$ = -76						; size = 4
_depth$ = -72						; size = 4
_inst3d$ = -68						; size = 4
_search$ = -64						; size = 56
_config_type$ = -8					; size = 4
_package_status$ = -4					; size = 4
_en$ = 8						; size = 4
?set_comanche_stub_wing_visibility@@YGXPAUENTITY@@@Z PROC ; set_comanche_stub_wing_visibility, COMDAT

; 479  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec 98 00 00
	00		 sub	 esp, 152		; 00000098H
  00009	53		 push	 ebx
  0000a	56		 push	 esi
  0000b	57		 push	 edi

; 480  : 	weapon_package_status
; 481  : 		*package_status;
; 482  : 
; 483  : 	weapon_config_types
; 484  : 		config_type;
; 485  : 
; 486  : 	object_3d_sub_object_search_data
; 487  : 		search;
; 488  : 
; 489  : 	object_3d_instance
; 490  : 		*inst3d;
; 491  : 
; 492  : 	int
; 493  : 		depth,
; 494  : 		package,
; 495  : 		stub_wings_required;
; 496  : 
; 497  : 	ASSERT (en);

  0000c	83 7d 08 00	 cmp	 DWORD PTR _en$[ebp], 0
  00010	75 18		 jne	 SHORT $LN7@set_comanc
  00012	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??set_comanche_stub_wing_visibility@@YGXPAUENTITY@@@Z@4JA
  00017	83 c0 12	 add	 eax, 18			; 00000012H
  0001a	50		 push	 eax
  0001b	68 00 00 00 00	 push	 OFFSET ??_C@_0EL@LINJNLBM@c?3?2users?2nhv90?2projects?2eech?2ap@
  00020	68 00 00 00 00	 push	 OFFSET ??_C@_02LFNMGJAP@en@
  00025	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN7@set_comanc:

; 498  : 
; 499  : 	if (get_local_entity_int_value (en, INT_TYPE_ENTITY_SUB_TYPE) != ENTITY_SUB_TYPE_AIRCRAFT_RAH66_COMANCHE)

  0002a	83 7d 08 00	 cmp	 DWORD PTR _en$[ebp], 0
  0002e	74 0d		 je	 SHORT $LN19@set_comanc
  00030	8b 45 08	 mov	 eax, DWORD PTR _en$[ebp]
  00033	8b 08		 mov	 ecx, DWORD PTR [eax]
  00035	89 8d 6c ff ff
	ff		 mov	 DWORD PTR tv74[ebp], ecx
  0003b	eb 20		 jmp	 SHORT $LN20@set_comanc
$LN19@set_comanc:
  0003d	68 f3 01 00 00	 push	 499			; 000001f3H
  00042	68 00 00 00 00	 push	 OFFSET ??_C@_0EL@LINJNLBM@c?3?2users?2nhv90?2projects?2eech?2ap@
  00047	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  0004d	52		 push	 edx
  0004e	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00053	c7 85 6c ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv74[ebp], 0
$LN20@set_comanc:
  0005d	b8 01 00 00 00	 mov	 eax, 1
  00062	85 c0		 test	 eax, eax
  00064	74 0c		 je	 SHORT $LN21@set_comanc
  00066	c7 85 68 ff ff
	ff 34 00 00 00	 mov	 DWORD PTR tv81[ebp], 52	; 00000034H
  00070	eb 20		 jmp	 SHORT $LN22@set_comanc
$LN21@set_comanc:
  00072	68 f3 01 00 00	 push	 499			; 000001f3H
  00077	68 00 00 00 00	 push	 OFFSET ??_C@_0EL@LINJNLBM@c?3?2users?2nhv90?2projects?2eech?2ap@
  0007c	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?overload_invalid_int_type_message@@3PBDB ; overload_invalid_int_type_message
  00082	51		 push	 ecx
  00083	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00088	c7 85 68 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv81[ebp], 0
$LN22@set_comanc:
  00092	6a 34		 push	 52			; 00000034H
  00094	8b 55 08	 mov	 edx, DWORD PTR _en$[ebp]
  00097	52		 push	 edx
  00098	69 85 6c ff ff
	ff 5c 04 00 00	 imul	 eax, DWORD PTR tv74[ebp], 1116
  000a2	8b 8d 68 ff ff
	ff		 mov	 ecx, DWORD PTR tv81[ebp]
  000a8	8b 94 88 00 00
	00 00		 mov	 edx, DWORD PTR ?fn_get_local_entity_int_value@@3PAY0BBH@P6GHPAUENTITY@@W4INT_TYPES@@@ZA[eax+ecx*4]
  000af	ff d2		 call	 edx
  000b1	83 f8 02	 cmp	 eax, 2
  000b4	74 05		 je	 SHORT $LN8@set_comanc

; 500  : 	{
; 501  : 		return;

  000b6	e9 c4 02 00 00	 jmp	 $LN1@set_comanc
$LN8@set_comanc:

; 502  : 	}
; 503  : 
; 504  : 	//
; 505  : 	// search packages for stub wings (include empty and damaged weapons)
; 506  : 	//
; 507  : 
; 508  : 	stub_wings_required = FALSE;

  000bb	c7 45 b0 00 00
	00 00		 mov	 DWORD PTR _stub_wings_required$[ebp], 0

; 509  : 
; 510  : 	package_status = (weapon_package_status *) get_local_entity_ptr_value (en, PTR_TYPE_WEAPON_PACKAGE_STATUS_ARRAY);

  000c2	83 7d 08 00	 cmp	 DWORD PTR _en$[ebp], 0
  000c6	74 0d		 je	 SHORT $LN23@set_comanc
  000c8	8b 45 08	 mov	 eax, DWORD PTR _en$[ebp]
  000cb	8b 08		 mov	 ecx, DWORD PTR [eax]
  000cd	89 8d 6c ff ff
	ff		 mov	 DWORD PTR tv94[ebp], ecx
  000d3	eb 24		 jmp	 SHORT $LN24@set_comanc
$LN23@set_comanc:
  000d5	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??set_comanche_stub_wing_visibility@@YGXPAUENTITY@@@Z@4JA
  000db	83 c2 1f	 add	 edx, 31			; 0000001fH
  000de	52		 push	 edx
  000df	68 00 00 00 00	 push	 OFFSET ??_C@_0EL@LINJNLBM@c?3?2users?2nhv90?2projects?2eech?2ap@
  000e4	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  000e9	50		 push	 eax
  000ea	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  000ef	c7 85 6c ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv94[ebp], 0
$LN24@set_comanc:
  000f9	b9 01 00 00 00	 mov	 ecx, 1
  000fe	85 c9		 test	 ecx, ecx
  00100	74 0c		 je	 SHORT $LN25@set_comanc
  00102	c7 85 68 ff ff
	ff 13 00 00 00	 mov	 DWORD PTR tv134[ebp], 19 ; 00000013H
  0010c	eb 24		 jmp	 SHORT $LN26@set_comanc
$LN25@set_comanc:
  0010e	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??set_comanche_stub_wing_visibility@@YGXPAUENTITY@@@Z@4JA
  00114	83 c2 1f	 add	 edx, 31			; 0000001fH
  00117	52		 push	 edx
  00118	68 00 00 00 00	 push	 OFFSET ??_C@_0EL@LINJNLBM@c?3?2users?2nhv90?2projects?2eech?2ap@
  0011d	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_ptr_type_message@@3PBDB ; overload_invalid_ptr_type_message
  00122	50		 push	 eax
  00123	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00128	c7 85 68 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv134[ebp], 0
$LN26@set_comanc:
  00132	6a 13		 push	 19			; 00000013H
  00134	8b 4d 08	 mov	 ecx, DWORD PTR _en$[ebp]
  00137	51		 push	 ecx
  00138	6b 95 6c ff ff
	ff 50		 imul	 edx, DWORD PTR tv94[ebp], 80
  0013f	8b 85 68 ff ff
	ff		 mov	 eax, DWORD PTR tv134[ebp]
  00145	8b 8c 82 00 00
	00 00		 mov	 ecx, DWORD PTR ?fn_get_local_entity_ptr_value@@3PAY0BE@P6GPAXPAUENTITY@@W4PTR_TYPES@@@ZA[edx+eax*4]
  0014c	ff d1		 call	 ecx
  0014e	89 45 fc	 mov	 DWORD PTR _package_status$[ebp], eax

; 511  : 
; 512  : 	if (package_status)

  00151	83 7d fc 00	 cmp	 DWORD PTR _package_status$[ebp], 0
  00155	0f 84 20 01 00
	00		 je	 $LN9@set_comanc

; 513  : 	{
; 514  : 		config_type = (weapon_config_types) get_local_entity_int_value (en, INT_TYPE_WEAPON_CONFIG_TYPE);

  0015b	83 7d 08 00	 cmp	 DWORD PTR _en$[ebp], 0
  0015f	74 0d		 je	 SHORT $LN27@set_comanc
  00161	8b 45 08	 mov	 eax, DWORD PTR _en$[ebp]
  00164	8b 08		 mov	 ecx, DWORD PTR [eax]
  00166	89 8d 6c ff ff
	ff		 mov	 DWORD PTR tv147[ebp], ecx
  0016c	eb 24		 jmp	 SHORT $LN28@set_comanc
$LN27@set_comanc:
  0016e	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??set_comanche_stub_wing_visibility@@YGXPAUENTITY@@@Z@4JA
  00174	83 c2 23	 add	 edx, 35			; 00000023H
  00177	52		 push	 edx
  00178	68 00 00 00 00	 push	 OFFSET ??_C@_0EL@LINJNLBM@c?3?2users?2nhv90?2projects?2eech?2ap@
  0017d	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  00182	50		 push	 eax
  00183	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00188	c7 85 6c ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv147[ebp], 0
$LN28@set_comanc:
  00192	b9 01 00 00 00	 mov	 ecx, 1
  00197	85 c9		 test	 ecx, ecx
  00199	74 0c		 je	 SHORT $LN29@set_comanc
  0019b	c7 85 68 ff ff
	ff 05 01 00 00	 mov	 DWORD PTR tv155[ebp], 261 ; 00000105H
  001a5	eb 24		 jmp	 SHORT $LN30@set_comanc
$LN29@set_comanc:
  001a7	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??set_comanche_stub_wing_visibility@@YGXPAUENTITY@@@Z@4JA
  001ad	83 c2 23	 add	 edx, 35			; 00000023H
  001b0	52		 push	 edx
  001b1	68 00 00 00 00	 push	 OFFSET ??_C@_0EL@LINJNLBM@c?3?2users?2nhv90?2projects?2eech?2ap@
  001b6	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_int_type_message@@3PBDB ; overload_invalid_int_type_message
  001bb	50		 push	 eax
  001bc	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  001c1	c7 85 68 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv155[ebp], 0
$LN30@set_comanc:
  001cb	68 05 01 00 00	 push	 261			; 00000105H
  001d0	8b 4d 08	 mov	 ecx, DWORD PTR _en$[ebp]
  001d3	51		 push	 ecx
  001d4	69 95 6c ff ff
	ff 5c 04 00 00	 imul	 edx, DWORD PTR tv147[ebp], 1116
  001de	8b 85 68 ff ff
	ff		 mov	 eax, DWORD PTR tv155[ebp]
  001e4	8b 8c 82 00 00
	00 00		 mov	 ecx, DWORD PTR ?fn_get_local_entity_int_value@@3PAY0BBH@P6GHPAUENTITY@@W4INT_TYPES@@@ZA[edx+eax*4]
  001eb	ff d1		 call	 ecx
  001ed	89 45 f8	 mov	 DWORD PTR _config_type$[ebp], eax

; 515  : 
; 516  : 		ASSERT (weapon_config_type_valid (config_type));

  001f0	83 7d f8 00	 cmp	 DWORD PTR _config_type$[ebp], 0
  001f4	7c 09		 jl	 SHORT $LN11@set_comanc
  001f6	81 7d f8 cc 02
	00 00		 cmp	 DWORD PTR _config_type$[ebp], 716 ; 000002ccH
  001fd	7c 18		 jl	 SHORT $LN10@set_comanc
$LN11@set_comanc:
  001ff	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??set_comanche_stub_wing_visibility@@YGXPAUENTITY@@@Z@4JA
  00204	83 c0 25	 add	 eax, 37			; 00000025H
  00207	50		 push	 eax
  00208	68 00 00 00 00	 push	 OFFSET ??_C@_0EL@LINJNLBM@c?3?2users?2nhv90?2projects?2eech?2ap@
  0020d	68 00 00 00 00	 push	 OFFSET ??_C@_0CH@EBNCOBJM@weapon_config_type_valid?5?$CIconfi@
  00212	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN10@set_comanc:

; 517  : 
; 518  : 		for (package = 0; package < NUM_WEAPON_PACKAGES; package++)

  00217	c7 45 b4 00 00
	00 00		 mov	 DWORD PTR _package$[ebp], 0
  0021e	eb 09		 jmp	 SHORT $LN4@set_comanc
$LN2@set_comanc:
  00220	8b 45 b4	 mov	 eax, DWORD PTR _package$[ebp]
  00223	83 c0 01	 add	 eax, 1
  00226	89 45 b4	 mov	 DWORD PTR _package$[ebp], eax
$LN4@set_comanc:
  00229	83 7d b4 20	 cmp	 DWORD PTR _package$[ebp], 32 ; 00000020H
  0022d	7d 4c		 jge	 SHORT $LN9@set_comanc

; 519  : 		{
; 520  : 			if (weapon_config_database[config_type][package].sub_type == ENTITY_SUB_TYPE_WEAPON_NO_WEAPON)

  0022f	69 45 f8 80 09
	00 00		 imul	 eax, DWORD PTR _config_type$[ebp], 2432
  00236	6b 4d b4 4c	 imul	 ecx, DWORD PTR _package$[ebp], 76
  0023a	83 bc 08 00 00
	00 00 00	 cmp	 DWORD PTR ?weapon_config_database@@3PAY0CA@UWEAPON_PACKAGE@@A[eax+ecx], 0
  00242	75 02		 jne	 SHORT $LN12@set_comanc

; 521  : 			{
; 522  : 				break;

  00244	eb 35		 jmp	 SHORT $LN9@set_comanc
$LN12@set_comanc:

; 523  : 			}
; 524  : 
; 525  : 			if
; 526  : 			(
; 527  : 				(weapon_config_database[config_type][package].heading_depth == COMANCHE_LHS_STUB_WING) ||

  00246	69 45 f8 80 09
	00 00		 imul	 eax, DWORD PTR _config_type$[ebp], 2432
  0024d	6b 4d b4 4c	 imul	 ecx, DWORD PTR _package$[ebp], 76
  00251	83 bc 08 08 00
	00 00 00	 cmp	 DWORD PTR ?weapon_config_database@@3PAY0CA@UWEAPON_PACKAGE@@A[eax+ecx+8], 0
  00259	74 15		 je	 SHORT $LN14@set_comanc
  0025b	69 45 f8 80 09
	00 00		 imul	 eax, DWORD PTR _config_type$[ebp], 2432
  00262	6b 4d b4 4c	 imul	 ecx, DWORD PTR _package$[ebp], 76
  00266	83 bc 08 08 00
	00 00 01	 cmp	 DWORD PTR ?weapon_config_database@@3PAY0CA@UWEAPON_PACKAGE@@A[eax+ecx+8], 1
  0026e	75 09		 jne	 SHORT $LN13@set_comanc
$LN14@set_comanc:

; 528  : 				(weapon_config_database[config_type][package].heading_depth == COMANCHE_RHS_STUB_WING)
; 529  : 			)
; 530  : 			{
; 531  : 				stub_wings_required = TRUE;

  00270	c7 45 b0 01 00
	00 00		 mov	 DWORD PTR _stub_wings_required$[ebp], 1

; 532  : 
; 533  : 				break;

  00277	eb 02		 jmp	 SHORT $LN9@set_comanc
$LN13@set_comanc:

; 534  : 			}
; 535  : 		}

  00279	eb a5		 jmp	 SHORT $LN2@set_comanc
$LN9@set_comanc:

; 536  : 	}
; 537  : 
; 538  : 	//
; 539  : 	// set visibility status
; 540  : 	//
; 541  : 
; 542  : 	inst3d = (object_3d_instance *) get_local_entity_ptr_value (en, PTR_TYPE_INSTANCE_3D_OBJECT);

  0027b	83 7d 08 00	 cmp	 DWORD PTR _en$[ebp], 0
  0027f	74 0d		 je	 SHORT $LN31@set_comanc
  00281	8b 45 08	 mov	 eax, DWORD PTR _en$[ebp]
  00284	8b 08		 mov	 ecx, DWORD PTR [eax]
  00286	89 8d 6c ff ff
	ff		 mov	 DWORD PTR tv193[ebp], ecx
  0028c	eb 24		 jmp	 SHORT $LN32@set_comanc
$LN31@set_comanc:
  0028e	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??set_comanche_stub_wing_visibility@@YGXPAUENTITY@@@Z@4JA
  00294	83 c2 3f	 add	 edx, 63			; 0000003fH
  00297	52		 push	 edx
  00298	68 00 00 00 00	 push	 OFFSET ??_C@_0EL@LINJNLBM@c?3?2users?2nhv90?2projects?2eech?2ap@
  0029d	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  002a2	50		 push	 eax
  002a3	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  002a8	c7 85 6c ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv193[ebp], 0
$LN32@set_comanc:
  002b2	b9 01 00 00 00	 mov	 ecx, 1
  002b7	85 c9		 test	 ecx, ecx
  002b9	74 0c		 je	 SHORT $LN33@set_comanc
  002bb	c7 85 68 ff ff
	ff 02 00 00 00	 mov	 DWORD PTR tv201[ebp], 2
  002c5	eb 24		 jmp	 SHORT $LN34@set_comanc
$LN33@set_comanc:
  002c7	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??set_comanche_stub_wing_visibility@@YGXPAUENTITY@@@Z@4JA
  002cd	83 c2 3f	 add	 edx, 63			; 0000003fH
  002d0	52		 push	 edx
  002d1	68 00 00 00 00	 push	 OFFSET ??_C@_0EL@LINJNLBM@c?3?2users?2nhv90?2projects?2eech?2ap@
  002d6	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_ptr_type_message@@3PBDB ; overload_invalid_ptr_type_message
  002db	50		 push	 eax
  002dc	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  002e1	c7 85 68 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv201[ebp], 0
$LN34@set_comanc:
  002eb	6a 02		 push	 2
  002ed	8b 4d 08	 mov	 ecx, DWORD PTR _en$[ebp]
  002f0	51		 push	 ecx
  002f1	6b 95 6c ff ff
	ff 50		 imul	 edx, DWORD PTR tv193[ebp], 80
  002f8	8b 85 68 ff ff
	ff		 mov	 eax, DWORD PTR tv201[ebp]
  002fe	8b 8c 82 00 00
	00 00		 mov	 ecx, DWORD PTR ?fn_get_local_entity_ptr_value@@3PAY0BE@P6GPAXPAUENTITY@@W4PTR_TYPES@@@ZA[edx+eax*4]
  00305	ff d1		 call	 ecx
  00307	89 45 bc	 mov	 DWORD PTR _inst3d$[ebp], eax

; 543  : 
; 544  : 	ASSERT (inst3d);

  0030a	83 7d bc 00	 cmp	 DWORD PTR _inst3d$[ebp], 0
  0030e	75 18		 jne	 SHORT $LN15@set_comanc
  00310	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??set_comanche_stub_wing_visibility@@YGXPAUENTITY@@@Z@4JA
  00315	83 c0 41	 add	 eax, 65			; 00000041H
  00318	50		 push	 eax
  00319	68 00 00 00 00	 push	 OFFSET ??_C@_0EL@LINJNLBM@c?3?2users?2nhv90?2projects?2eech?2ap@
  0031e	68 00 00 00 00	 push	 OFFSET ??_C@_06DDNABPCD@inst3d@
  00323	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN15@set_comanc:

; 545  : 
; 546  : 	depth = 0;

  00328	c7 45 b8 00 00
	00 00		 mov	 DWORD PTR _depth$[ebp], 0
$LN5@set_comanc:

; 547  : 
; 548  : 	while (TRUE)

  0032f	b8 01 00 00 00	 mov	 eax, 1
  00334	85 c0		 test	 eax, eax
  00336	74 47		 je	 SHORT $LN1@set_comanc

; 549  : 	{
; 550  : 		search.search_object = inst3d;

  00338	8b 45 bc	 mov	 eax, DWORD PTR _inst3d$[ebp]
  0033b	89 45 c0	 mov	 DWORD PTR _search$[ebp], eax

; 551  : 		search.search_depth = depth;

  0033e	8b 45 b8	 mov	 eax, DWORD PTR _depth$[ebp]
  00341	89 45 c8	 mov	 DWORD PTR _search$[ebp+8], eax

; 552  : 		search.sub_object_index = OBJECT_3D_SUB_OBJECT_STUBWINGS;

  00344	c7 45 cc f1 00
	00 00		 mov	 DWORD PTR _search$[ebp+12], 241 ; 000000f1H

; 553  : 
; 554  : 		if (find_object_3d_sub_object (&search) == SUB_OBJECT_SEARCH_RESULT_OBJECT_FOUND)

  0034b	8d 45 c0	 lea	 eax, DWORD PTR _search$[ebp]
  0034e	50		 push	 eax
  0034f	e8 00 00 00 00	 call	 ?find_object_3d_sub_object@@YG?AW4SUB_OBJECT_SEARCH_RESULT_TYPES@@PAUOBJECT_3D_SUB_OBJECT_SEARCH_DATA@@@Z ; find_object_3d_sub_object
  00354	83 f8 01	 cmp	 eax, 1
  00357	75 19		 jne	 SHORT $LN16@set_comanc

; 555  : 		{
; 556  : 			search.result_sub_object->visible_object = stub_wings_required;

  00359	8b 45 b0	 mov	 eax, DWORD PTR _stub_wings_required$[ebp]
  0035c	83 e0 01	 and	 eax, 1
  0035f	8b 4d c4	 mov	 ecx, DWORD PTR _search$[ebp+4]
  00362	8b 51 08	 mov	 edx, DWORD PTR [ecx+8]
  00365	83 e2 fe	 and	 edx, -2			; fffffffeH
  00368	0b d0		 or	 edx, eax
  0036a	8b 45 c4	 mov	 eax, DWORD PTR _search$[ebp+4]
  0036d	89 50 08	 mov	 DWORD PTR [eax+8], edx

; 557  : 		}
; 558  : 		else

  00370	eb 02		 jmp	 SHORT $LN17@set_comanc
$LN16@set_comanc:

; 559  : 		{
; 560  : 			break;

  00372	eb 0b		 jmp	 SHORT $LN1@set_comanc
$LN17@set_comanc:

; 561  : 		}
; 562  : 
; 563  : 		depth++;

  00374	8b 45 b8	 mov	 eax, DWORD PTR _depth$[ebp]
  00377	83 c0 01	 add	 eax, 1
  0037a	89 45 b8	 mov	 DWORD PTR _depth$[ebp], eax

; 564  : 	}

  0037d	eb b0		 jmp	 SHORT $LN5@set_comanc
$LN1@set_comanc:

; 565  : }

  0037f	5f		 pop	 edi
  00380	5e		 pop	 esi
  00381	5b		 pop	 ebx
  00382	8b e5		 mov	 esp, ebp
  00384	5d		 pop	 ebp
  00385	c2 04 00	 ret	 4
?set_comanche_stub_wing_visibility@@YGXPAUENTITY@@@Z ENDP ; set_comanche_stub_wing_visibility
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\entity\mobile\weapon\wn_misc.c
;	COMDAT ?get_local_entity_weapon_hardpoint_info@@YGHPAUENTITY@@HHPAH11@Z
_TEXT	SEGMENT
tv151 = -88						; size = 4
tv130 = -88						; size = 4
tv143 = -84						; size = 4
tv90 = -84						; size = 4
_config_type$ = -16					; size = 4
_package_status$ = -12					; size = 4
_result$ = -8						; size = 4
_package$ = -4						; size = 4
_en$ = 8						; size = 4
_heading_depth$ = 12					; size = 4
_given_weapon_sub_type$ = 16				; size = 4
_weapon_sub_type$ = 20					; size = 4
_number$ = 24						; size = 4
_damaged$ = 28						; size = 4
?get_local_entity_weapon_hardpoint_info@@YGHPAUENTITY@@HHPAH11@Z PROC ; get_local_entity_weapon_hardpoint_info, COMDAT

; 395  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 58	 sub	 esp, 88			; 00000058H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 396  : 	int
; 397  : 		package,
; 398  : 		result;
; 399  : 
; 400  : 	weapon_package_status
; 401  : 		*package_status;
; 402  : 
; 403  : 	weapon_config_types
; 404  : 		config_type;
; 405  : 
; 406  : 	ASSERT (en);

  00009	83 7d 08 00	 cmp	 DWORD PTR _en$[ebp], 0
  0000d	75 18		 jne	 SHORT $LN5@get_local_
  0000f	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??get_local_entity_weapon_hardpoint_info@@YGHPAUENTITY@@HHPAH11@Z@4JA
  00014	83 c0 0b	 add	 eax, 11			; 0000000bH
  00017	50		 push	 eax
  00018	68 00 00 00 00	 push	 OFFSET ??_C@_0EL@LINJNLBM@c?3?2users?2nhv90?2projects?2eech?2ap@
  0001d	68 00 00 00 00	 push	 OFFSET ??_C@_02LFNMGJAP@en@
  00022	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN5@get_local_:

; 407  : 
; 408  : 	ASSERT (weapon_sub_type);

  00027	83 7d 14 00	 cmp	 DWORD PTR _weapon_sub_type$[ebp], 0
  0002b	75 18		 jne	 SHORT $LN6@get_local_
  0002d	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??get_local_entity_weapon_hardpoint_info@@YGHPAUENTITY@@HHPAH11@Z@4JA
  00032	83 c0 0d	 add	 eax, 13			; 0000000dH
  00035	50		 push	 eax
  00036	68 00 00 00 00	 push	 OFFSET ??_C@_0EL@LINJNLBM@c?3?2users?2nhv90?2projects?2eech?2ap@
  0003b	68 00 00 00 00	 push	 OFFSET ??_C@_0BA@GBEOFMFG@weapon_sub_type@
  00040	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN6@get_local_:

; 409  : 
; 410  : 	ASSERT (number);

  00045	83 7d 18 00	 cmp	 DWORD PTR _number$[ebp], 0
  00049	75 18		 jne	 SHORT $LN7@get_local_
  0004b	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??get_local_entity_weapon_hardpoint_info@@YGHPAUENTITY@@HHPAH11@Z@4JA
  00050	83 c0 0f	 add	 eax, 15			; 0000000fH
  00053	50		 push	 eax
  00054	68 00 00 00 00	 push	 OFFSET ??_C@_0EL@LINJNLBM@c?3?2users?2nhv90?2projects?2eech?2ap@
  00059	68 00 00 00 00	 push	 OFFSET ??_C@_06EBGNBFIA@number@
  0005e	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN7@get_local_:

; 411  : 
; 412  : 	ASSERT (damaged);

  00063	83 7d 1c 00	 cmp	 DWORD PTR _damaged$[ebp], 0
  00067	75 18		 jne	 SHORT $LN8@get_local_
  00069	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??get_local_entity_weapon_hardpoint_info@@YGHPAUENTITY@@HHPAH11@Z@4JA
  0006e	83 c0 11	 add	 eax, 17			; 00000011H
  00071	50		 push	 eax
  00072	68 00 00 00 00	 push	 OFFSET ??_C@_0EL@LINJNLBM@c?3?2users?2nhv90?2projects?2eech?2ap@
  00077	68 00 00 00 00	 push	 OFFSET ??_C@_07BKPJODCN@damaged@
  0007c	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN8@get_local_:

; 413  : 
; 414  : 	*weapon_sub_type = ENTITY_SUB_TYPE_WEAPON_NO_WEAPON;

  00081	8b 45 14	 mov	 eax, DWORD PTR _weapon_sub_type$[ebp]
  00084	c7 00 00 00 00
	00		 mov	 DWORD PTR [eax], 0

; 415  : 
; 416  : 	*number = 0;

  0008a	8b 45 18	 mov	 eax, DWORD PTR _number$[ebp]
  0008d	c7 00 00 00 00
	00		 mov	 DWORD PTR [eax], 0

; 417  : 
; 418  : 	*damaged = FALSE;

  00093	8b 45 1c	 mov	 eax, DWORD PTR _damaged$[ebp]
  00096	c7 00 00 00 00
	00		 mov	 DWORD PTR [eax], 0

; 419  : 
; 420  : 	result = FALSE;

  0009c	c7 45 f8 00 00
	00 00		 mov	 DWORD PTR _result$[ebp], 0

; 421  : 
; 422  : 	package_status = (weapon_package_status *) get_local_entity_ptr_value (en, PTR_TYPE_WEAPON_PACKAGE_STATUS_ARRAY);

  000a3	83 7d 08 00	 cmp	 DWORD PTR _en$[ebp], 0
  000a7	74 0a		 je	 SHORT $LN17@get_local_
  000a9	8b 45 08	 mov	 eax, DWORD PTR _en$[ebp]
  000ac	8b 08		 mov	 ecx, DWORD PTR [eax]
  000ae	89 4d ac	 mov	 DWORD PTR tv90[ebp], ecx
  000b1	eb 21		 jmp	 SHORT $LN18@get_local_
$LN17@get_local_:
  000b3	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??get_local_entity_weapon_hardpoint_info@@YGHPAUENTITY@@HHPAH11@Z@4JA
  000b9	83 c2 1b	 add	 edx, 27			; 0000001bH
  000bc	52		 push	 edx
  000bd	68 00 00 00 00	 push	 OFFSET ??_C@_0EL@LINJNLBM@c?3?2users?2nhv90?2projects?2eech?2ap@
  000c2	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  000c7	50		 push	 eax
  000c8	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  000cd	c7 45 ac 00 00
	00 00		 mov	 DWORD PTR tv90[ebp], 0
$LN18@get_local_:
  000d4	b9 01 00 00 00	 mov	 ecx, 1
  000d9	85 c9		 test	 ecx, ecx
  000db	74 09		 je	 SHORT $LN19@get_local_
  000dd	c7 45 a8 13 00
	00 00		 mov	 DWORD PTR tv130[ebp], 19 ; 00000013H
  000e4	eb 21		 jmp	 SHORT $LN20@get_local_
$LN19@get_local_:
  000e6	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??get_local_entity_weapon_hardpoint_info@@YGHPAUENTITY@@HHPAH11@Z@4JA
  000ec	83 c2 1b	 add	 edx, 27			; 0000001bH
  000ef	52		 push	 edx
  000f0	68 00 00 00 00	 push	 OFFSET ??_C@_0EL@LINJNLBM@c?3?2users?2nhv90?2projects?2eech?2ap@
  000f5	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_ptr_type_message@@3PBDB ; overload_invalid_ptr_type_message
  000fa	50		 push	 eax
  000fb	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00100	c7 45 a8 00 00
	00 00		 mov	 DWORD PTR tv130[ebp], 0
$LN20@get_local_:
  00107	6a 13		 push	 19			; 00000013H
  00109	8b 4d 08	 mov	 ecx, DWORD PTR _en$[ebp]
  0010c	51		 push	 ecx
  0010d	6b 55 ac 50	 imul	 edx, DWORD PTR tv90[ebp], 80
  00111	8b 45 a8	 mov	 eax, DWORD PTR tv130[ebp]
  00114	8b 8c 82 00 00
	00 00		 mov	 ecx, DWORD PTR ?fn_get_local_entity_ptr_value@@3PAY0BE@P6GPAXPAUENTITY@@W4PTR_TYPES@@@ZA[edx+eax*4]
  0011b	ff d1		 call	 ecx
  0011d	89 45 f4	 mov	 DWORD PTR _package_status$[ebp], eax

; 423  : 
; 424  : 	if (package_status)

  00120	83 7d f4 00	 cmp	 DWORD PTR _package_status$[ebp], 0
  00124	0f 84 95 01 00
	00		 je	 $LN9@get_local_

; 425  : 	{
; 426  : 		config_type = (weapon_config_types) get_local_entity_int_value (en, INT_TYPE_WEAPON_CONFIG_TYPE);

  0012a	83 7d 08 00	 cmp	 DWORD PTR _en$[ebp], 0
  0012e	74 0a		 je	 SHORT $LN21@get_local_
  00130	8b 45 08	 mov	 eax, DWORD PTR _en$[ebp]
  00133	8b 08		 mov	 ecx, DWORD PTR [eax]
  00135	89 4d ac	 mov	 DWORD PTR tv143[ebp], ecx
  00138	eb 21		 jmp	 SHORT $LN22@get_local_
$LN21@get_local_:
  0013a	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??get_local_entity_weapon_hardpoint_info@@YGHPAUENTITY@@HHPAH11@Z@4JA
  00140	83 c2 1f	 add	 edx, 31			; 0000001fH
  00143	52		 push	 edx
  00144	68 00 00 00 00	 push	 OFFSET ??_C@_0EL@LINJNLBM@c?3?2users?2nhv90?2projects?2eech?2ap@
  00149	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  0014e	50		 push	 eax
  0014f	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00154	c7 45 ac 00 00
	00 00		 mov	 DWORD PTR tv143[ebp], 0
$LN22@get_local_:
  0015b	b9 01 00 00 00	 mov	 ecx, 1
  00160	85 c9		 test	 ecx, ecx
  00162	74 09		 je	 SHORT $LN23@get_local_
  00164	c7 45 a8 05 01
	00 00		 mov	 DWORD PTR tv151[ebp], 261 ; 00000105H
  0016b	eb 21		 jmp	 SHORT $LN24@get_local_
$LN23@get_local_:
  0016d	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??get_local_entity_weapon_hardpoint_info@@YGHPAUENTITY@@HHPAH11@Z@4JA
  00173	83 c2 1f	 add	 edx, 31			; 0000001fH
  00176	52		 push	 edx
  00177	68 00 00 00 00	 push	 OFFSET ??_C@_0EL@LINJNLBM@c?3?2users?2nhv90?2projects?2eech?2ap@
  0017c	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_int_type_message@@3PBDB ; overload_invalid_int_type_message
  00181	50		 push	 eax
  00182	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00187	c7 45 a8 00 00
	00 00		 mov	 DWORD PTR tv151[ebp], 0
$LN24@get_local_:
  0018e	68 05 01 00 00	 push	 261			; 00000105H
  00193	8b 4d 08	 mov	 ecx, DWORD PTR _en$[ebp]
  00196	51		 push	 ecx
  00197	69 55 ac 5c 04
	00 00		 imul	 edx, DWORD PTR tv143[ebp], 1116
  0019e	8b 45 a8	 mov	 eax, DWORD PTR tv151[ebp]
  001a1	8b 8c 82 00 00
	00 00		 mov	 ecx, DWORD PTR ?fn_get_local_entity_int_value@@3PAY0BBH@P6GHPAUENTITY@@W4INT_TYPES@@@ZA[edx+eax*4]
  001a8	ff d1		 call	 ecx
  001aa	89 45 f0	 mov	 DWORD PTR _config_type$[ebp], eax

; 427  : 
; 428  : 		for (package = 0; package < NUM_WEAPON_PACKAGES; package++)

  001ad	c7 45 fc 00 00
	00 00		 mov	 DWORD PTR _package$[ebp], 0
  001b4	eb 09		 jmp	 SHORT $LN4@get_local_
$LN2@get_local_:
  001b6	8b 45 fc	 mov	 eax, DWORD PTR _package$[ebp]
  001b9	83 c0 01	 add	 eax, 1
  001bc	89 45 fc	 mov	 DWORD PTR _package$[ebp], eax
$LN4@get_local_:
  001bf	83 7d fc 20	 cmp	 DWORD PTR _package$[ebp], 32 ; 00000020H
  001c3	0f 8d f6 00 00
	00		 jge	 $LN9@get_local_

; 429  : 		{
; 430  : 			if (weapon_config_database[config_type][package].sub_type == ENTITY_SUB_TYPE_WEAPON_NO_WEAPON)

  001c9	69 45 f0 80 09
	00 00		 imul	 eax, DWORD PTR _config_type$[ebp], 2432
  001d0	6b 4d fc 4c	 imul	 ecx, DWORD PTR _package$[ebp], 76
  001d4	83 bc 08 00 00
	00 00 00	 cmp	 DWORD PTR ?weapon_config_database@@3PAY0CA@UWEAPON_PACKAGE@@A[eax+ecx], 0
  001dc	75 05		 jne	 SHORT $LN10@get_local_

; 431  : 			{
; 432  : 				break;

  001de	e9 dc 00 00 00	 jmp	 $LN9@get_local_
$LN10@get_local_:

; 433  : 			}
; 434  : 
; 435  : 			if (given_weapon_sub_type == ENTITY_SUB_TYPE_WEAPON_NO_WEAPON)

  001e3	83 7d 10 00	 cmp	 DWORD PTR _given_weapon_sub_type$[ebp], 0
  001e7	75 5e		 jne	 SHORT $LN11@get_local_

; 436  : 			{
; 437  : 				if (weapon_config_database[config_type][package].heading_depth == heading_depth)

  001e9	69 45 f0 80 09
	00 00		 imul	 eax, DWORD PTR _config_type$[ebp], 2432
  001f0	6b 4d fc 4c	 imul	 ecx, DWORD PTR _package$[ebp], 76
  001f4	8b 94 08 08 00
	00 00		 mov	 edx, DWORD PTR ?weapon_config_database@@3PAY0CA@UWEAPON_PACKAGE@@A[eax+ecx+8]
  001fb	3b 55 0c	 cmp	 edx, DWORD PTR _heading_depth$[ebp]
  001fe	75 45		 jne	 SHORT $LN13@get_local_

; 438  : 				{
; 439  : 					*weapon_sub_type = weapon_config_database[config_type][package].sub_type;

  00200	69 45 f0 80 09
	00 00		 imul	 eax, DWORD PTR _config_type$[ebp], 2432
  00207	6b 4d fc 4c	 imul	 ecx, DWORD PTR _package$[ebp], 76
  0020b	8b 55 14	 mov	 edx, DWORD PTR _weapon_sub_type$[ebp]
  0020e	8b 84 08 00 00
	00 00		 mov	 eax, DWORD PTR ?weapon_config_database@@3PAY0CA@UWEAPON_PACKAGE@@A[eax+ecx]
  00215	89 02		 mov	 DWORD PTR [edx], eax

; 440  : 
; 441  : 					*number = package_status[package].number;

  00217	8b 45 fc	 mov	 eax, DWORD PTR _package$[ebp]
  0021a	c1 e0 04	 shl	 eax, 4
  0021d	8b 4d f4	 mov	 ecx, DWORD PTR _package_status$[ebp]
  00220	0f b7 14 01	 movzx	 edx, WORD PTR [ecx+eax]
  00224	8b 45 18	 mov	 eax, DWORD PTR _number$[ebp]
  00227	89 10		 mov	 DWORD PTR [eax], edx

; 442  : 
; 443  : 					*damaged = package_status[package].damaged;

  00229	8b 45 fc	 mov	 eax, DWORD PTR _package$[ebp]
  0022c	c1 e0 04	 shl	 eax, 4
  0022f	8b 4d f4	 mov	 ecx, DWORD PTR _package_status$[ebp]
  00232	0f b7 54 01 02	 movzx	 edx, WORD PTR [ecx+eax+2]
  00237	8b 45 1c	 mov	 eax, DWORD PTR _damaged$[ebp]
  0023a	89 10		 mov	 DWORD PTR [eax], edx

; 444  : 
; 445  : 					result = TRUE;

  0023c	c7 45 f8 01 00
	00 00		 mov	 DWORD PTR _result$[ebp], 1

; 446  : 
; 447  : 					break;

  00243	eb 7a		 jmp	 SHORT $LN9@get_local_
$LN13@get_local_:

; 448  : 				}
; 449  : 			}
; 450  : 			else

  00245	eb 73		 jmp	 SHORT $LN12@get_local_
$LN11@get_local_:

; 451  : 			{
; 452  : 				if (weapon_config_database[config_type][package].sub_type == given_weapon_sub_type)

  00247	69 45 f0 80 09
	00 00		 imul	 eax, DWORD PTR _config_type$[ebp], 2432
  0024e	6b 4d fc 4c	 imul	 ecx, DWORD PTR _package$[ebp], 76
  00252	8b 94 08 00 00
	00 00		 mov	 edx, DWORD PTR ?weapon_config_database@@3PAY0CA@UWEAPON_PACKAGE@@A[eax+ecx]
  00259	3b 55 10	 cmp	 edx, DWORD PTR _given_weapon_sub_type$[ebp]
  0025c	75 5c		 jne	 SHORT $LN12@get_local_

; 453  : 				{
; 454  : 					if (weapon_config_database[config_type][package].heading_depth == heading_depth)

  0025e	69 45 f0 80 09
	00 00		 imul	 eax, DWORD PTR _config_type$[ebp], 2432
  00265	6b 4d fc 4c	 imul	 ecx, DWORD PTR _package$[ebp], 76
  00269	8b 94 08 08 00
	00 00		 mov	 edx, DWORD PTR ?weapon_config_database@@3PAY0CA@UWEAPON_PACKAGE@@A[eax+ecx+8]
  00270	3b 55 0c	 cmp	 edx, DWORD PTR _heading_depth$[ebp]
  00273	75 45		 jne	 SHORT $LN12@get_local_

; 455  : 					{
; 456  : 						*weapon_sub_type = weapon_config_database[config_type][package].sub_type;

  00275	69 45 f0 80 09
	00 00		 imul	 eax, DWORD PTR _config_type$[ebp], 2432
  0027c	6b 4d fc 4c	 imul	 ecx, DWORD PTR _package$[ebp], 76
  00280	8b 55 14	 mov	 edx, DWORD PTR _weapon_sub_type$[ebp]
  00283	8b 84 08 00 00
	00 00		 mov	 eax, DWORD PTR ?weapon_config_database@@3PAY0CA@UWEAPON_PACKAGE@@A[eax+ecx]
  0028a	89 02		 mov	 DWORD PTR [edx], eax

; 457  : 
; 458  : 						*number = package_status[package].number;

  0028c	8b 45 fc	 mov	 eax, DWORD PTR _package$[ebp]
  0028f	c1 e0 04	 shl	 eax, 4
  00292	8b 4d f4	 mov	 ecx, DWORD PTR _package_status$[ebp]
  00295	0f b7 14 01	 movzx	 edx, WORD PTR [ecx+eax]
  00299	8b 45 18	 mov	 eax, DWORD PTR _number$[ebp]
  0029c	89 10		 mov	 DWORD PTR [eax], edx

; 459  : 
; 460  : 						*damaged = package_status[package].damaged;

  0029e	8b 45 fc	 mov	 eax, DWORD PTR _package$[ebp]
  002a1	c1 e0 04	 shl	 eax, 4
  002a4	8b 4d f4	 mov	 ecx, DWORD PTR _package_status$[ebp]
  002a7	0f b7 54 01 02	 movzx	 edx, WORD PTR [ecx+eax+2]
  002ac	8b 45 1c	 mov	 eax, DWORD PTR _damaged$[ebp]
  002af	89 10		 mov	 DWORD PTR [eax], edx

; 461  : 
; 462  : 						result = TRUE;

  002b1	c7 45 f8 01 00
	00 00		 mov	 DWORD PTR _result$[ebp], 1

; 463  : 
; 464  : 						break;

  002b8	eb 05		 jmp	 SHORT $LN9@get_local_
$LN12@get_local_:

; 465  : 					}
; 466  : 				}
; 467  : 			}
; 468  : 		}

  002ba	e9 f7 fe ff ff	 jmp	 $LN2@get_local_
$LN9@get_local_:

; 469  : 	}
; 470  : 
; 471  : 	return (result);

  002bf	8b 45 f8	 mov	 eax, DWORD PTR _result$[ebp]

; 472  : }

  002c2	5f		 pop	 edi
  002c3	5e		 pop	 esi
  002c4	5b		 pop	 ebx
  002c5	8b e5		 mov	 esp, ebp
  002c7	5d		 pop	 ebp
  002c8	c2 18 00	 ret	 24			; 00000018H
?get_local_entity_weapon_hardpoint_info@@YGHPAUENTITY@@HHPAH11@Z ENDP ; get_local_entity_weapon_hardpoint_info
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\entity\mobile\weapon\wn_misc.c
;	COMDAT ?set_client_server_entity_weapon_damage@@YGXPAUENTITY@@HHH@Z
_TEXT	SEGMENT
_en$ = 8						; size = 4
_heading_depth$ = 12					; size = 4
_weapon_sub_type$ = 16					; size = 4
_damage$ = 20						; size = 4
?set_client_server_entity_weapon_damage@@YGXPAUENTITY@@HHH@Z PROC ; set_client_server_entity_weapon_damage, COMDAT

; 342  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 343  : 	ASSERT (en);

  00009	83 7d 08 00	 cmp	 DWORD PTR _en$[ebp], 0
  0000d	75 18		 jne	 SHORT $LN2@set_client
  0000f	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??set_client_server_entity_weapon_damage@@YGXPAUENTITY@@HHH@Z@4JA
  00014	83 c0 01	 add	 eax, 1
  00017	50		 push	 eax
  00018	68 00 00 00 00	 push	 OFFSET ??_C@_0EL@LINJNLBM@c?3?2users?2nhv90?2projects?2eech?2ap@
  0001d	68 00 00 00 00	 push	 OFFSET ??_C@_02LFNMGJAP@en@
  00022	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN2@set_client:

; 344  : 
; 345  : 	if (get_comms_model () == COMMS_MODEL_SERVER)

  00027	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?system_comms_model@@3W4COMMS_MODEL_TYPES@@A, 0 ; system_comms_model
  0002e	75 31		 jne	 SHORT $LN3@set_client

; 346  : 	{
; 347  : 		////////////////////////////////////////
; 348  : 		//
; 349  : 		// SERVER/TX and SERVER/RX
; 350  : 		//
; 351  : 		////////////////////////////////////////
; 352  : 
; 353  : 		set_local_entity_weapon_damage (en, heading_depth, weapon_sub_type, damage);

  00030	8b 45 14	 mov	 eax, DWORD PTR _damage$[ebp]
  00033	50		 push	 eax
  00034	8b 4d 10	 mov	 ecx, DWORD PTR _weapon_sub_type$[ebp]
  00037	51		 push	 ecx
  00038	8b 55 0c	 mov	 edx, DWORD PTR _heading_depth$[ebp]
  0003b	52		 push	 edx
  0003c	8b 45 08	 mov	 eax, DWORD PTR _en$[ebp]
  0003f	50		 push	 eax
  00040	e8 00 00 00 00	 call	 ?set_local_entity_weapon_damage@@YGXPAUENTITY@@HHH@Z ; set_local_entity_weapon_damage

; 354  : 
; 355  : 		transmit_entity_comms_message (ENTITY_COMMS_DAMAGE_WEAPON_PACKAGE, en, heading_depth, weapon_sub_type, damage);

  00045	8b 45 14	 mov	 eax, DWORD PTR _damage$[ebp]
  00048	50		 push	 eax
  00049	8b 4d 10	 mov	 ecx, DWORD PTR _weapon_sub_type$[ebp]
  0004c	51		 push	 ecx
  0004d	8b 55 0c	 mov	 edx, DWORD PTR _heading_depth$[ebp]
  00050	52		 push	 edx
  00051	8b 45 08	 mov	 eax, DWORD PTR _en$[ebp]
  00054	50		 push	 eax
  00055	6a 11		 push	 17			; 00000011H
  00057	e8 00 00 00 00	 call	 ?transmit_entity_comms_message@@YAXW4ENTITY_COMMS_MESSAGES@@PAUENTITY@@ZZ ; transmit_entity_comms_message
  0005c	83 c4 14	 add	 esp, 20			; 00000014H

; 356  : 	}
; 357  : 	else

  0005f	eb 3a		 jmp	 SHORT $LN1@set_client
$LN3@set_client:

; 358  : 	{
; 359  : 		if (get_comms_data_flow () == COMMS_DATA_FLOW_TX)

  00061	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?system_comms_data_flow@@3W4COMMS_DATA_FLOW_TYPES@@A, 0 ; system_comms_data_flow
  00068	75 1c		 jne	 SHORT $LN5@set_client

; 360  : 		{
; 361  : 			////////////////////////////////////////
; 362  : 			//
; 363  : 			// CLIENT/TX
; 364  : 			//
; 365  : 			////////////////////////////////////////
; 366  : 
; 367  : 			transmit_entity_comms_message (ENTITY_COMMS_DAMAGE_WEAPON_PACKAGE, en, heading_depth, weapon_sub_type, damage);

  0006a	8b 45 14	 mov	 eax, DWORD PTR _damage$[ebp]
  0006d	50		 push	 eax
  0006e	8b 4d 10	 mov	 ecx, DWORD PTR _weapon_sub_type$[ebp]
  00071	51		 push	 ecx
  00072	8b 55 0c	 mov	 edx, DWORD PTR _heading_depth$[ebp]
  00075	52		 push	 edx
  00076	8b 45 08	 mov	 eax, DWORD PTR _en$[ebp]
  00079	50		 push	 eax
  0007a	6a 11		 push	 17			; 00000011H
  0007c	e8 00 00 00 00	 call	 ?transmit_entity_comms_message@@YAXW4ENTITY_COMMS_MESSAGES@@PAUENTITY@@ZZ ; transmit_entity_comms_message
  00081	83 c4 14	 add	 esp, 20			; 00000014H

; 368  : 		}
; 369  : 		else

  00084	eb 15		 jmp	 SHORT $LN1@set_client
$LN5@set_client:

; 370  : 		{
; 371  : 			////////////////////////////////////////
; 372  : 			//
; 373  : 			// CLIENT/RX
; 374  : 			//
; 375  : 			////////////////////////////////////////
; 376  : 
; 377  : 			set_local_entity_weapon_damage (en, heading_depth, weapon_sub_type, damage);

  00086	8b 45 14	 mov	 eax, DWORD PTR _damage$[ebp]
  00089	50		 push	 eax
  0008a	8b 4d 10	 mov	 ecx, DWORD PTR _weapon_sub_type$[ebp]
  0008d	51		 push	 ecx
  0008e	8b 55 0c	 mov	 edx, DWORD PTR _heading_depth$[ebp]
  00091	52		 push	 edx
  00092	8b 45 08	 mov	 eax, DWORD PTR _en$[ebp]
  00095	50		 push	 eax
  00096	e8 00 00 00 00	 call	 ?set_local_entity_weapon_damage@@YGXPAUENTITY@@HHH@Z ; set_local_entity_weapon_damage
$LN1@set_client:

; 378  : 		}
; 379  : 	}
; 380  : }

  0009b	5f		 pop	 edi
  0009c	5e		 pop	 esi
  0009d	5b		 pop	 ebx
  0009e	8b e5		 mov	 esp, ebp
  000a0	5d		 pop	 ebp
  000a1	c2 10 00	 ret	 16			; 00000010H
?set_client_server_entity_weapon_damage@@YGXPAUENTITY@@HHH@Z ENDP ; set_client_server_entity_weapon_damage
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\entity\mobile\weapon\wn_misc.c
;	COMDAT ?set_local_entity_weapon_damage@@YGXPAUENTITY@@HHH@Z
_TEXT	SEGMENT
tv136 = -84						; size = 4
tv83 = -84						; size = 4
tv128 = -80						; size = 4
tv75 = -80						; size = 4
_config_type$ = -12					; size = 4
_package_status$ = -8					; size = 4
_package$ = -4						; size = 4
_en$ = 8						; size = 4
_heading_depth$ = 12					; size = 4
_weapon_sub_type$ = 16					; size = 4
_damage$ = 20						; size = 4
?set_local_entity_weapon_damage@@YGXPAUENTITY@@HHH@Z PROC ; set_local_entity_weapon_damage, COMDAT

; 287  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 54	 sub	 esp, 84			; 00000054H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 288  : 	int
; 289  : 		package;
; 290  : 
; 291  : 	weapon_package_status
; 292  : 		*package_status;
; 293  : 
; 294  : 	weapon_config_types
; 295  : 		config_type;
; 296  : 
; 297  : 	ASSERT (en);

  00009	83 7d 08 00	 cmp	 DWORD PTR _en$[ebp], 0
  0000d	75 18		 jne	 SHORT $LN5@set_local_
  0000f	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??set_local_entity_weapon_damage@@YGXPAUENTITY@@HHH@Z@4JA
  00014	83 c0 0a	 add	 eax, 10			; 0000000aH
  00017	50		 push	 eax
  00018	68 00 00 00 00	 push	 OFFSET ??_C@_0EL@LINJNLBM@c?3?2users?2nhv90?2projects?2eech?2ap@
  0001d	68 00 00 00 00	 push	 OFFSET ??_C@_02LFNMGJAP@en@
  00022	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN5@set_local_:

; 298  : 
; 299  : 	package_status = (weapon_package_status *) get_local_entity_ptr_value (en, PTR_TYPE_WEAPON_PACKAGE_STATUS_ARRAY);

  00027	83 7d 08 00	 cmp	 DWORD PTR _en$[ebp], 0
  0002b	74 0a		 je	 SHORT $LN14@set_local_
  0002d	8b 45 08	 mov	 eax, DWORD PTR _en$[ebp]
  00030	8b 08		 mov	 ecx, DWORD PTR [eax]
  00032	89 4d b0	 mov	 DWORD PTR tv75[ebp], ecx
  00035	eb 21		 jmp	 SHORT $LN15@set_local_
$LN14@set_local_:
  00037	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??set_local_entity_weapon_damage@@YGXPAUENTITY@@HHH@Z@4JA
  0003d	83 c2 0c	 add	 edx, 12			; 0000000cH
  00040	52		 push	 edx
  00041	68 00 00 00 00	 push	 OFFSET ??_C@_0EL@LINJNLBM@c?3?2users?2nhv90?2projects?2eech?2ap@
  00046	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  0004b	50		 push	 eax
  0004c	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00051	c7 45 b0 00 00
	00 00		 mov	 DWORD PTR tv75[ebp], 0
$LN15@set_local_:
  00058	b9 01 00 00 00	 mov	 ecx, 1
  0005d	85 c9		 test	 ecx, ecx
  0005f	74 09		 je	 SHORT $LN16@set_local_
  00061	c7 45 ac 13 00
	00 00		 mov	 DWORD PTR tv83[ebp], 19	; 00000013H
  00068	eb 21		 jmp	 SHORT $LN17@set_local_
$LN16@set_local_:
  0006a	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??set_local_entity_weapon_damage@@YGXPAUENTITY@@HHH@Z@4JA
  00070	83 c2 0c	 add	 edx, 12			; 0000000cH
  00073	52		 push	 edx
  00074	68 00 00 00 00	 push	 OFFSET ??_C@_0EL@LINJNLBM@c?3?2users?2nhv90?2projects?2eech?2ap@
  00079	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_ptr_type_message@@3PBDB ; overload_invalid_ptr_type_message
  0007e	50		 push	 eax
  0007f	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00084	c7 45 ac 00 00
	00 00		 mov	 DWORD PTR tv83[ebp], 0
$LN17@set_local_:
  0008b	6a 13		 push	 19			; 00000013H
  0008d	8b 4d 08	 mov	 ecx, DWORD PTR _en$[ebp]
  00090	51		 push	 ecx
  00091	6b 55 b0 50	 imul	 edx, DWORD PTR tv75[ebp], 80
  00095	8b 45 ac	 mov	 eax, DWORD PTR tv83[ebp]
  00098	8b 8c 82 00 00
	00 00		 mov	 ecx, DWORD PTR ?fn_get_local_entity_ptr_value@@3PAY0BE@P6GPAXPAUENTITY@@W4PTR_TYPES@@@ZA[edx+eax*4]
  0009f	ff d1		 call	 ecx
  000a1	89 45 f8	 mov	 DWORD PTR _package_status$[ebp], eax

; 300  : 
; 301  : 	if (package_status)

  000a4	83 7d f8 00	 cmp	 DWORD PTR _package_status$[ebp], 0
  000a8	0f 84 30 01 00
	00		 je	 $LN1@set_local_

; 302  : 	{
; 303  : 		config_type = (weapon_config_types) get_local_entity_int_value (en, INT_TYPE_WEAPON_CONFIG_TYPE);

  000ae	83 7d 08 00	 cmp	 DWORD PTR _en$[ebp], 0
  000b2	74 0a		 je	 SHORT $LN18@set_local_
  000b4	8b 45 08	 mov	 eax, DWORD PTR _en$[ebp]
  000b7	8b 08		 mov	 ecx, DWORD PTR [eax]
  000b9	89 4d b0	 mov	 DWORD PTR tv128[ebp], ecx
  000bc	eb 21		 jmp	 SHORT $LN19@set_local_
$LN18@set_local_:
  000be	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??set_local_entity_weapon_damage@@YGXPAUENTITY@@HHH@Z@4JA
  000c4	83 c2 10	 add	 edx, 16			; 00000010H
  000c7	52		 push	 edx
  000c8	68 00 00 00 00	 push	 OFFSET ??_C@_0EL@LINJNLBM@c?3?2users?2nhv90?2projects?2eech?2ap@
  000cd	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  000d2	50		 push	 eax
  000d3	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  000d8	c7 45 b0 00 00
	00 00		 mov	 DWORD PTR tv128[ebp], 0
$LN19@set_local_:
  000df	b9 01 00 00 00	 mov	 ecx, 1
  000e4	85 c9		 test	 ecx, ecx
  000e6	74 09		 je	 SHORT $LN20@set_local_
  000e8	c7 45 ac 05 01
	00 00		 mov	 DWORD PTR tv136[ebp], 261 ; 00000105H
  000ef	eb 21		 jmp	 SHORT $LN21@set_local_
$LN20@set_local_:
  000f1	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??set_local_entity_weapon_damage@@YGXPAUENTITY@@HHH@Z@4JA
  000f7	83 c2 10	 add	 edx, 16			; 00000010H
  000fa	52		 push	 edx
  000fb	68 00 00 00 00	 push	 OFFSET ??_C@_0EL@LINJNLBM@c?3?2users?2nhv90?2projects?2eech?2ap@
  00100	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_int_type_message@@3PBDB ; overload_invalid_int_type_message
  00105	50		 push	 eax
  00106	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  0010b	c7 45 ac 00 00
	00 00		 mov	 DWORD PTR tv136[ebp], 0
$LN21@set_local_:
  00112	68 05 01 00 00	 push	 261			; 00000105H
  00117	8b 4d 08	 mov	 ecx, DWORD PTR _en$[ebp]
  0011a	51		 push	 ecx
  0011b	69 55 b0 5c 04
	00 00		 imul	 edx, DWORD PTR tv128[ebp], 1116
  00122	8b 45 ac	 mov	 eax, DWORD PTR tv136[ebp]
  00125	8b 8c 82 00 00
	00 00		 mov	 ecx, DWORD PTR ?fn_get_local_entity_int_value@@3PAY0BBH@P6GHPAUENTITY@@W4INT_TYPES@@@ZA[edx+eax*4]
  0012c	ff d1		 call	 ecx
  0012e	89 45 f4	 mov	 DWORD PTR _config_type$[ebp], eax

; 304  : 
; 305  : 		for (package = 0; package < NUM_WEAPON_PACKAGES; package++)

  00131	c7 45 fc 00 00
	00 00		 mov	 DWORD PTR _package$[ebp], 0
  00138	eb 09		 jmp	 SHORT $LN4@set_local_
$LN2@set_local_:
  0013a	8b 45 fc	 mov	 eax, DWORD PTR _package$[ebp]
  0013d	83 c0 01	 add	 eax, 1
  00140	89 45 fc	 mov	 DWORD PTR _package$[ebp], eax
$LN4@set_local_:
  00143	83 7d fc 20	 cmp	 DWORD PTR _package$[ebp], 32 ; 00000020H
  00147	0f 8d 91 00 00
	00		 jge	 $LN1@set_local_

; 306  : 		{
; 307  : 			if (weapon_config_database[config_type][package].sub_type == ENTITY_SUB_TYPE_WEAPON_NO_WEAPON)

  0014d	69 45 f4 80 09
	00 00		 imul	 eax, DWORD PTR _config_type$[ebp], 2432
  00154	6b 4d fc 4c	 imul	 ecx, DWORD PTR _package$[ebp], 76
  00158	83 bc 08 00 00
	00 00 00	 cmp	 DWORD PTR ?weapon_config_database@@3PAY0CA@UWEAPON_PACKAGE@@A[eax+ecx], 0
  00160	75 02		 jne	 SHORT $LN7@set_local_

; 308  : 			{
; 309  : 				break;

  00162	eb 7a		 jmp	 SHORT $LN1@set_local_
$LN7@set_local_:

; 310  : 			}
; 311  : 
; 312  : 			if (weapon_sub_type == ENTITY_SUB_TYPE_WEAPON_NO_WEAPON)

  00164	83 7d 10 00	 cmp	 DWORD PTR _weapon_sub_type$[ebp], 0
  00168	75 2d		 jne	 SHORT $LN8@set_local_

; 313  : 			{
; 314  : 				if (weapon_config_database[config_type][package].heading_depth == heading_depth)

  0016a	69 45 f4 80 09
	00 00		 imul	 eax, DWORD PTR _config_type$[ebp], 2432
  00171	6b 4d fc 4c	 imul	 ecx, DWORD PTR _package$[ebp], 76
  00175	8b 94 08 08 00
	00 00		 mov	 edx, DWORD PTR ?weapon_config_database@@3PAY0CA@UWEAPON_PACKAGE@@A[eax+ecx+8]
  0017c	3b 55 0c	 cmp	 edx, DWORD PTR _heading_depth$[ebp]
  0017f	75 14		 jne	 SHORT $LN10@set_local_

; 315  : 				{
; 316  : 					package_status[package].damaged = damage;

  00181	8b 45 fc	 mov	 eax, DWORD PTR _package$[ebp]
  00184	c1 e0 04	 shl	 eax, 4
  00187	8b 4d f8	 mov	 ecx, DWORD PTR _package_status$[ebp]
  0018a	66 8b 55 14	 mov	 dx, WORD PTR _damage$[ebp]
  0018e	66 89 54 01 02	 mov	 WORD PTR [ecx+eax+2], dx

; 317  : 
; 318  : 					break;

  00193	eb 49		 jmp	 SHORT $LN1@set_local_
$LN10@set_local_:

; 319  : 				}
; 320  : 			}
; 321  : 			else

  00195	eb 42		 jmp	 SHORT $LN9@set_local_
$LN8@set_local_:

; 322  : 			{
; 323  : 				if (weapon_config_database[config_type][package].sub_type == weapon_sub_type)

  00197	69 45 f4 80 09
	00 00		 imul	 eax, DWORD PTR _config_type$[ebp], 2432
  0019e	6b 4d fc 4c	 imul	 ecx, DWORD PTR _package$[ebp], 76
  001a2	8b 94 08 00 00
	00 00		 mov	 edx, DWORD PTR ?weapon_config_database@@3PAY0CA@UWEAPON_PACKAGE@@A[eax+ecx]
  001a9	3b 55 10	 cmp	 edx, DWORD PTR _weapon_sub_type$[ebp]
  001ac	75 2b		 jne	 SHORT $LN9@set_local_

; 324  : 				{
; 325  : 					if (weapon_config_database[config_type][package].heading_depth == heading_depth)

  001ae	69 45 f4 80 09
	00 00		 imul	 eax, DWORD PTR _config_type$[ebp], 2432
  001b5	6b 4d fc 4c	 imul	 ecx, DWORD PTR _package$[ebp], 76
  001b9	8b 94 08 08 00
	00 00		 mov	 edx, DWORD PTR ?weapon_config_database@@3PAY0CA@UWEAPON_PACKAGE@@A[eax+ecx+8]
  001c0	3b 55 0c	 cmp	 edx, DWORD PTR _heading_depth$[ebp]
  001c3	75 14		 jne	 SHORT $LN9@set_local_

; 326  : 					{
; 327  : 						package_status[package].damaged = damage;

  001c5	8b 45 fc	 mov	 eax, DWORD PTR _package$[ebp]
  001c8	c1 e0 04	 shl	 eax, 4
  001cb	8b 4d f8	 mov	 ecx, DWORD PTR _package_status$[ebp]
  001ce	66 8b 55 14	 mov	 dx, WORD PTR _damage$[ebp]
  001d2	66 89 54 01 02	 mov	 WORD PTR [ecx+eax+2], dx

; 328  : 
; 329  : 						break;

  001d7	eb 05		 jmp	 SHORT $LN1@set_local_
$LN9@set_local_:

; 330  : 					}
; 331  : 				}
; 332  : 			}
; 333  : 		}

  001d9	e9 5c ff ff ff	 jmp	 $LN2@set_local_
$LN1@set_local_:

; 334  : 	}
; 335  : }

  001de	5f		 pop	 edi
  001df	5e		 pop	 esi
  001e0	5b		 pop	 ebx
  001e1	8b e5		 mov	 esp, ebp
  001e3	5d		 pop	 ebp
  001e4	c2 10 00	 ret	 16			; 00000010H
?set_local_entity_weapon_damage@@YGXPAUENTITY@@HHH@Z ENDP ; set_local_entity_weapon_damage
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\entity\mobile\weapon\wn_misc.c
;	COMDAT ?get_local_entity_weapon_load@@YGXPAUENTITY@@QAUweapon_count@@I@Z
_TEXT	SEGMENT
tv146 = -100						; size = 4
tv93 = -100						; size = 4
tv138 = -96						; size = 4
tv85 = -96						; size = 4
_i$1 = -28						; size = 4
_number$2 = -24						; size = 4
_weapon_type$3 = -20					; size = 4
_config_type$4 = -16					; size = 4
_package$5 = -12					; size = 4
_next_free$ = -8					; size = 4
_package_status$ = -4					; size = 4
_en$ = 8						; size = 4
_weapon_load$ = 12					; size = 4
_max_num_weapons$ = 16					; size = 4
?get_local_entity_weapon_load@@YGXPAUENTITY@@QAUweapon_count@@I@Z PROC ; get_local_entity_weapon_load, COMDAT

; 80   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 64	 sub	 esp, 100		; 00000064H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 81   : 	weapon_package_status
; 82   : 		*package_status;
; 83   : 
; 84   : 	unsigned next_free = 0;

  00009	c7 45 f8 00 00
	00 00		 mov	 DWORD PTR _next_free$[ebp], 0

; 85   : 
; 86   : 	ASSERT(en);

  00010	83 7d 08 00	 cmp	 DWORD PTR _en$[ebp], 0
  00014	75 18		 jne	 SHORT $LN8@get_local_
  00016	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??get_local_entity_weapon_load@@YGXPAUENTITY@@QAUweapon_count@@I@Z@4JA
  0001b	83 c0 06	 add	 eax, 6
  0001e	50		 push	 eax
  0001f	68 00 00 00 00	 push	 OFFSET ??_C@_0EL@LINJNLBM@c?3?2users?2nhv90?2projects?2eech?2ap@
  00024	68 00 00 00 00	 push	 OFFSET ??_C@_02LFNMGJAP@en@
  00029	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN8@get_local_:

; 87   : 	ASSERT(weapon_load);

  0002e	83 7d 0c 00	 cmp	 DWORD PTR _weapon_load$[ebp], 0
  00032	75 18		 jne	 SHORT $LN9@get_local_
  00034	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??get_local_entity_weapon_load@@YGXPAUENTITY@@QAUweapon_count@@I@Z@4JA
  00039	83 c0 07	 add	 eax, 7
  0003c	50		 push	 eax
  0003d	68 00 00 00 00	 push	 OFFSET ??_C@_0EL@LINJNLBM@c?3?2users?2nhv90?2projects?2eech?2ap@
  00042	68 00 00 00 00	 push	 OFFSET ??_C@_0M@GDGEIKCK@weapon_load@
  00047	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN9@get_local_:

; 88   : 	ASSERT(max_num_weapons > 0);

  0004c	83 7d 10 00	 cmp	 DWORD PTR _max_num_weapons$[ebp], 0
  00050	77 18		 ja	 SHORT $LN10@get_local_
  00052	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??get_local_entity_weapon_load@@YGXPAUENTITY@@QAUweapon_count@@I@Z@4JA
  00057	83 c0 08	 add	 eax, 8
  0005a	50		 push	 eax
  0005b	68 00 00 00 00	 push	 OFFSET ??_C@_0EL@LINJNLBM@c?3?2users?2nhv90?2projects?2eech?2ap@
  00060	68 00 00 00 00	 push	 OFFSET ??_C@_0BE@GIGFKLFM@max_num_weapons?5?$DO?50@
  00065	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN10@get_local_:

; 89   : 
; 90   : 	package_status = (weapon_package_status *) get_local_entity_ptr_value(en, PTR_TYPE_WEAPON_PACKAGE_STATUS_ARRAY);

  0006a	83 7d 08 00	 cmp	 DWORD PTR _en$[ebp], 0
  0006e	74 0a		 je	 SHORT $LN17@get_local_
  00070	8b 45 08	 mov	 eax, DWORD PTR _en$[ebp]
  00073	8b 08		 mov	 ecx, DWORD PTR [eax]
  00075	89 4d a0	 mov	 DWORD PTR tv85[ebp], ecx
  00078	eb 21		 jmp	 SHORT $LN18@get_local_
$LN17@get_local_:
  0007a	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??get_local_entity_weapon_load@@YGXPAUENTITY@@QAUweapon_count@@I@Z@4JA
  00080	83 c2 0a	 add	 edx, 10			; 0000000aH
  00083	52		 push	 edx
  00084	68 00 00 00 00	 push	 OFFSET ??_C@_0EL@LINJNLBM@c?3?2users?2nhv90?2projects?2eech?2ap@
  00089	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  0008e	50		 push	 eax
  0008f	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00094	c7 45 a0 00 00
	00 00		 mov	 DWORD PTR tv85[ebp], 0
$LN18@get_local_:
  0009b	b9 01 00 00 00	 mov	 ecx, 1
  000a0	85 c9		 test	 ecx, ecx
  000a2	74 09		 je	 SHORT $LN19@get_local_
  000a4	c7 45 9c 13 00
	00 00		 mov	 DWORD PTR tv93[ebp], 19	; 00000013H
  000ab	eb 21		 jmp	 SHORT $LN20@get_local_
$LN19@get_local_:
  000ad	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??get_local_entity_weapon_load@@YGXPAUENTITY@@QAUweapon_count@@I@Z@4JA
  000b3	83 c2 0a	 add	 edx, 10			; 0000000aH
  000b6	52		 push	 edx
  000b7	68 00 00 00 00	 push	 OFFSET ??_C@_0EL@LINJNLBM@c?3?2users?2nhv90?2projects?2eech?2ap@
  000bc	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_ptr_type_message@@3PBDB ; overload_invalid_ptr_type_message
  000c1	50		 push	 eax
  000c2	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  000c7	c7 45 9c 00 00
	00 00		 mov	 DWORD PTR tv93[ebp], 0
$LN20@get_local_:
  000ce	6a 13		 push	 19			; 00000013H
  000d0	8b 4d 08	 mov	 ecx, DWORD PTR _en$[ebp]
  000d3	51		 push	 ecx
  000d4	6b 55 a0 50	 imul	 edx, DWORD PTR tv85[ebp], 80
  000d8	8b 45 9c	 mov	 eax, DWORD PTR tv93[ebp]
  000db	8b 8c 82 00 00
	00 00		 mov	 ecx, DWORD PTR ?fn_get_local_entity_ptr_value@@3PAY0BE@P6GPAXPAUENTITY@@W4PTR_TYPES@@@ZA[edx+eax*4]
  000e2	ff d1		 call	 ecx
  000e4	89 45 fc	 mov	 DWORD PTR _package_status$[ebp], eax

; 91   : 
; 92   : 	if (package_status)

  000e7	83 7d fc 00	 cmp	 DWORD PTR _package_status$[ebp], 0
  000eb	0f 84 77 01 00
	00		 je	 $LN11@get_local_

; 93   : 	{
; 94   : 		int package;
; 95   : 		weapon_config_types config_type = (weapon_config_types) get_local_entity_int_value (en, INT_TYPE_WEAPON_CONFIG_TYPE);

  000f1	83 7d 08 00	 cmp	 DWORD PTR _en$[ebp], 0
  000f5	74 0a		 je	 SHORT $LN21@get_local_
  000f7	8b 45 08	 mov	 eax, DWORD PTR _en$[ebp]
  000fa	8b 08		 mov	 ecx, DWORD PTR [eax]
  000fc	89 4d a0	 mov	 DWORD PTR tv138[ebp], ecx
  000ff	eb 21		 jmp	 SHORT $LN22@get_local_
$LN21@get_local_:
  00101	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??get_local_entity_weapon_load@@YGXPAUENTITY@@QAUweapon_count@@I@Z@4JA
  00107	83 c2 0f	 add	 edx, 15			; 0000000fH
  0010a	52		 push	 edx
  0010b	68 00 00 00 00	 push	 OFFSET ??_C@_0EL@LINJNLBM@c?3?2users?2nhv90?2projects?2eech?2ap@
  00110	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  00115	50		 push	 eax
  00116	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  0011b	c7 45 a0 00 00
	00 00		 mov	 DWORD PTR tv138[ebp], 0
$LN22@get_local_:
  00122	b9 01 00 00 00	 mov	 ecx, 1
  00127	85 c9		 test	 ecx, ecx
  00129	74 09		 je	 SHORT $LN23@get_local_
  0012b	c7 45 9c 05 01
	00 00		 mov	 DWORD PTR tv146[ebp], 261 ; 00000105H
  00132	eb 21		 jmp	 SHORT $LN24@get_local_
$LN23@get_local_:
  00134	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??get_local_entity_weapon_load@@YGXPAUENTITY@@QAUweapon_count@@I@Z@4JA
  0013a	83 c2 0f	 add	 edx, 15			; 0000000fH
  0013d	52		 push	 edx
  0013e	68 00 00 00 00	 push	 OFFSET ??_C@_0EL@LINJNLBM@c?3?2users?2nhv90?2projects?2eech?2ap@
  00143	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_int_type_message@@3PBDB ; overload_invalid_int_type_message
  00148	50		 push	 eax
  00149	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  0014e	c7 45 9c 00 00
	00 00		 mov	 DWORD PTR tv146[ebp], 0
$LN24@get_local_:
  00155	68 05 01 00 00	 push	 261			; 00000105H
  0015a	8b 4d 08	 mov	 ecx, DWORD PTR _en$[ebp]
  0015d	51		 push	 ecx
  0015e	69 55 a0 5c 04
	00 00		 imul	 edx, DWORD PTR tv138[ebp], 1116
  00165	8b 45 9c	 mov	 eax, DWORD PTR tv146[ebp]
  00168	8b 8c 82 00 00
	00 00		 mov	 ecx, DWORD PTR ?fn_get_local_entity_int_value@@3PAY0BBH@P6GHPAUENTITY@@W4INT_TYPES@@@ZA[edx+eax*4]
  0016f	ff d1		 call	 ecx
  00171	89 45 f0	 mov	 DWORD PTR _config_type$4[ebp], eax

; 96   : 
; 97   : 		for (package = 0; package < NUM_WEAPON_PACKAGES; package++)

  00174	c7 45 f4 00 00
	00 00		 mov	 DWORD PTR _package$5[ebp], 0
  0017b	eb 09		 jmp	 SHORT $LN4@get_local_
$LN2@get_local_:
  0017d	8b 45 f4	 mov	 eax, DWORD PTR _package$5[ebp]
  00180	83 c0 01	 add	 eax, 1
  00183	89 45 f4	 mov	 DWORD PTR _package$5[ebp], eax
$LN4@get_local_:
  00186	83 7d f4 20	 cmp	 DWORD PTR _package$5[ebp], 32 ; 00000020H
  0018a	0f 8d d8 00 00
	00		 jge	 $LN11@get_local_

; 98   : 		{
; 99   : 			entity_sub_types weapon_type;
; 100  : 			int number;
; 101  : 
; 102  : 			if (weapon_config_database[config_type][package].sub_type == ENTITY_SUB_TYPE_WEAPON_NO_WEAPON)

  00190	69 45 f0 80 09
	00 00		 imul	 eax, DWORD PTR _config_type$4[ebp], 2432
  00197	6b 4d f4 4c	 imul	 ecx, DWORD PTR _package$5[ebp], 76
  0019b	83 bc 08 00 00
	00 00 00	 cmp	 DWORD PTR ?weapon_config_database@@3PAY0CA@UWEAPON_PACKAGE@@A[eax+ecx], 0
  001a3	75 05		 jne	 SHORT $LN12@get_local_

; 103  : 				break;

  001a5	e9 be 00 00 00	 jmp	 $LN11@get_local_
$LN12@get_local_:

; 104  : 
; 105  : 			if (!package_status[package].damaged)

  001aa	8b 45 f4	 mov	 eax, DWORD PTR _package$5[ebp]
  001ad	c1 e0 04	 shl	 eax, 4
  001b0	8b 4d fc	 mov	 ecx, DWORD PTR _package_status$[ebp]
  001b3	0f b7 54 01 02	 movzx	 edx, WORD PTR [ecx+eax+2]
  001b8	85 d2		 test	 edx, edx
  001ba	0f 85 a3 00 00
	00		 jne	 $LN13@get_local_

; 106  : 			{
; 107  : 				unsigned i;
; 108  : 
; 109  : 				weapon_type = weapon_config_database[config_type][package].sub_type;

  001c0	69 45 f0 80 09
	00 00		 imul	 eax, DWORD PTR _config_type$4[ebp], 2432
  001c7	6b 4d f4 4c	 imul	 ecx, DWORD PTR _package$5[ebp], 76
  001cb	8b 94 08 00 00
	00 00		 mov	 edx, DWORD PTR ?weapon_config_database@@3PAY0CA@UWEAPON_PACKAGE@@A[eax+ecx]
  001d2	89 55 ec	 mov	 DWORD PTR _weapon_type$3[ebp], edx

; 110  : 				number = package_status[package].number;

  001d5	8b 45 f4	 mov	 eax, DWORD PTR _package$5[ebp]
  001d8	c1 e0 04	 shl	 eax, 4
  001db	8b 4d fc	 mov	 ecx, DWORD PTR _package_status$[ebp]
  001de	0f b7 14 01	 movzx	 edx, WORD PTR [ecx+eax]
  001e2	89 55 e8	 mov	 DWORD PTR _number$2[ebp], edx

; 111  : 
; 112  : 				for (i=0; i < next_free; i++)

  001e5	c7 45 e4 00 00
	00 00		 mov	 DWORD PTR _i$1[ebp], 0
  001ec	eb 09		 jmp	 SHORT $LN7@get_local_
$LN5@get_local_:
  001ee	8b 45 e4	 mov	 eax, DWORD PTR _i$1[ebp]
  001f1	83 c0 01	 add	 eax, 1
  001f4	89 45 e4	 mov	 DWORD PTR _i$1[ebp], eax
$LN7@get_local_:
  001f7	8b 45 e4	 mov	 eax, DWORD PTR _i$1[ebp]
  001fa	3b 45 f8	 cmp	 eax, DWORD PTR _next_free$[ebp]
  001fd	73 29		 jae	 SHORT $LN6@get_local_

; 113  : 				{
; 114  : 					if (weapon_load[i].weapon_type == weapon_type)

  001ff	8b 45 e4	 mov	 eax, DWORD PTR _i$1[ebp]
  00202	8b 4d 0c	 mov	 ecx, DWORD PTR _weapon_load$[ebp]
  00205	8b 14 c1	 mov	 edx, DWORD PTR [ecx+eax*8]
  00208	3b 55 ec	 cmp	 edx, DWORD PTR _weapon_type$3[ebp]
  0020b	75 19		 jne	 SHORT $LN14@get_local_

; 115  : 					{
; 116  : 						weapon_load[i].count += number;

  0020d	8b 45 e4	 mov	 eax, DWORD PTR _i$1[ebp]
  00210	8b 4d 0c	 mov	 ecx, DWORD PTR _weapon_load$[ebp]
  00213	8b 54 c1 04	 mov	 edx, DWORD PTR [ecx+eax*8+4]
  00217	03 55 e8	 add	 edx, DWORD PTR _number$2[ebp]
  0021a	8b 45 e4	 mov	 eax, DWORD PTR _i$1[ebp]
  0021d	8b 4d 0c	 mov	 ecx, DWORD PTR _weapon_load$[ebp]
  00220	89 54 c1 04	 mov	 DWORD PTR [ecx+eax*8+4], edx

; 117  : 						break;

  00224	eb 02		 jmp	 SHORT $LN6@get_local_
$LN14@get_local_:

; 118  : 					}
; 119  : 				}

  00226	eb c6		 jmp	 SHORT $LN5@get_local_
$LN6@get_local_:

; 120  : 
; 121  : 				if (i == next_free && next_free <= max_num_weapons-1 && weapon_type != ENTITY_SUB_TYPE_WEAPON_NO_WEAPON)  // weapon not in array already

  00228	8b 45 e4	 mov	 eax, DWORD PTR _i$1[ebp]
  0022b	3b 45 f8	 cmp	 eax, DWORD PTR _next_free$[ebp]
  0022e	75 33		 jne	 SHORT $LN13@get_local_
  00230	8b 45 10	 mov	 eax, DWORD PTR _max_num_weapons$[ebp]
  00233	83 e8 01	 sub	 eax, 1
  00236	39 45 f8	 cmp	 DWORD PTR _next_free$[ebp], eax
  00239	77 28		 ja	 SHORT $LN13@get_local_
  0023b	83 7d ec 00	 cmp	 DWORD PTR _weapon_type$3[ebp], 0
  0023f	74 22		 je	 SHORT $LN13@get_local_

; 122  : 				{
; 123  : 					next_free++;

  00241	8b 45 f8	 mov	 eax, DWORD PTR _next_free$[ebp]
  00244	83 c0 01	 add	 eax, 1
  00247	89 45 f8	 mov	 DWORD PTR _next_free$[ebp], eax

; 124  : 					weapon_load[i].weapon_type = weapon_type;

  0024a	8b 45 e4	 mov	 eax, DWORD PTR _i$1[ebp]
  0024d	8b 4d 0c	 mov	 ecx, DWORD PTR _weapon_load$[ebp]
  00250	8b 55 ec	 mov	 edx, DWORD PTR _weapon_type$3[ebp]
  00253	89 14 c1	 mov	 DWORD PTR [ecx+eax*8], edx

; 125  : 					weapon_load[i].count = number;

  00256	8b 45 e4	 mov	 eax, DWORD PTR _i$1[ebp]
  00259	8b 4d 0c	 mov	 ecx, DWORD PTR _weapon_load$[ebp]
  0025c	8b 55 e8	 mov	 edx, DWORD PTR _number$2[ebp]
  0025f	89 54 c1 04	 mov	 DWORD PTR [ecx+eax*8+4], edx
$LN13@get_local_:

; 126  : 				}
; 127  : 			}
; 128  : 		}

  00263	e9 15 ff ff ff	 jmp	 $LN2@get_local_
$LN11@get_local_:

; 129  : 	}
; 130  : 
; 131  : 	weapon_load[next_free].weapon_type = ENTITY_SUB_TYPE_WEAPON_NO_WEAPON;

  00268	8b 45 f8	 mov	 eax, DWORD PTR _next_free$[ebp]
  0026b	8b 4d 0c	 mov	 ecx, DWORD PTR _weapon_load$[ebp]
  0026e	c7 04 c1 00 00
	00 00		 mov	 DWORD PTR [ecx+eax*8], 0

; 132  : }

  00275	5f		 pop	 edi
  00276	5e		 pop	 esi
  00277	5b		 pop	 ebx
  00278	8b e5		 mov	 esp, ebp
  0027a	5d		 pop	 ebp
  0027b	c2 0c 00	 ret	 12			; 0000000cH
?get_local_entity_weapon_load@@YGXPAUENTITY@@QAUweapon_count@@I@Z ENDP ; get_local_entity_weapon_load
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\entity\mobile\weapon\wn_misc.c
;	COMDAT ?check_hardpoint_clean@@YGHW4WEAPON_CONFIG_TYPES@@H@Z
_TEXT	SEGMENT
_package$ = -4						; size = 4
_config_type$ = 8					; size = 4
_heading_depth$ = 12					; size = 4
?check_hardpoint_clean@@YGHW4WEAPON_CONFIG_TYPES@@H@Z PROC ; check_hardpoint_clean, COMDAT

; 262  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 44	 sub	 esp, 68			; 00000044H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 263  : 	int
; 264  : 		package;
; 265  : 
; 266  : 	for (package = 0; package < NUM_WEAPON_PACKAGES; package++)

  00009	c7 45 fc 00 00
	00 00		 mov	 DWORD PTR _package$[ebp], 0
  00010	eb 09		 jmp	 SHORT $LN4@check_hard
$LN2@check_hard:
  00012	8b 45 fc	 mov	 eax, DWORD PTR _package$[ebp]
  00015	83 c0 01	 add	 eax, 1
  00018	89 45 fc	 mov	 DWORD PTR _package$[ebp], eax
$LN4@check_hard:
  0001b	83 7d fc 20	 cmp	 DWORD PTR _package$[ebp], 32 ; 00000020H
  0001f	7d 39		 jge	 SHORT $LN3@check_hard

; 267  : 	{
; 268  : 		if (weapon_config_database[config_type][package].sub_type == ENTITY_SUB_TYPE_WEAPON_NO_WEAPON)

  00021	69 45 08 80 09
	00 00		 imul	 eax, DWORD PTR _config_type$[ebp], 2432
  00028	6b 4d fc 4c	 imul	 ecx, DWORD PTR _package$[ebp], 76
  0002c	83 bc 08 00 00
	00 00 00	 cmp	 DWORD PTR ?weapon_config_database@@3PAY0CA@UWEAPON_PACKAGE@@A[eax+ecx], 0
  00034	75 07		 jne	 SHORT $LN5@check_hard

; 269  : 		{
; 270  : 			return (TRUE);

  00036	b8 01 00 00 00	 mov	 eax, 1
  0003b	eb 22		 jmp	 SHORT $LN1@check_hard
$LN5@check_hard:

; 271  : 		}
; 272  : 
; 273  : 		if (weapon_config_database[config_type][package].heading_depth == heading_depth)

  0003d	69 45 08 80 09
	00 00		 imul	 eax, DWORD PTR _config_type$[ebp], 2432
  00044	6b 4d fc 4c	 imul	 ecx, DWORD PTR _package$[ebp], 76
  00048	8b 94 08 08 00
	00 00		 mov	 edx, DWORD PTR ?weapon_config_database@@3PAY0CA@UWEAPON_PACKAGE@@A[eax+ecx+8]
  0004f	3b 55 0c	 cmp	 edx, DWORD PTR _heading_depth$[ebp]
  00052	75 04		 jne	 SHORT $LN6@check_hard

; 274  : 		{
; 275  : 			return (FALSE);

  00054	33 c0		 xor	 eax, eax
  00056	eb 07		 jmp	 SHORT $LN1@check_hard
$LN6@check_hard:

; 276  : 		}
; 277  : 	}

  00058	eb b8		 jmp	 SHORT $LN2@check_hard
$LN3@check_hard:

; 278  : 
; 279  : 	return (TRUE);

  0005a	b8 01 00 00 00	 mov	 eax, 1
$LN1@check_hard:

; 280  : }

  0005f	5f		 pop	 edi
  00060	5e		 pop	 esi
  00061	5b		 pop	 ebx
  00062	8b e5		 mov	 esp, ebp
  00064	5d		 pop	 ebp
  00065	c2 08 00	 ret	 8
?check_hardpoint_clean@@YGHW4WEAPON_CONFIG_TYPES@@H@Z ENDP ; check_hardpoint_clean
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\entity\mobile\weapon\wn_misc.c
;	COMDAT ?check_weapon_on_hardpoint@@YGHW4WEAPON_CONFIG_TYPES@@HH@Z
_TEXT	SEGMENT
_package$ = -4						; size = 4
_config_type$ = 8					; size = 4
_weapon_sub_type$ = 12					; size = 4
_heading_depth$ = 16					; size = 4
?check_weapon_on_hardpoint@@YGHW4WEAPON_CONFIG_TYPES@@HH@Z PROC ; check_weapon_on_hardpoint, COMDAT

; 234  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 44	 sub	 esp, 68			; 00000044H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 235  : 	int
; 236  : 		package;
; 237  : 
; 238  : 	for (package = 0; package < NUM_WEAPON_PACKAGES; package++)

  00009	c7 45 fc 00 00
	00 00		 mov	 DWORD PTR _package$[ebp], 0
  00010	eb 09		 jmp	 SHORT $LN4@check_weap
$LN2@check_weap:
  00012	8b 45 fc	 mov	 eax, DWORD PTR _package$[ebp]
  00015	83 c0 01	 add	 eax, 1
  00018	89 45 fc	 mov	 DWORD PTR _package$[ebp], eax
$LN4@check_weap:
  0001b	83 7d fc 20	 cmp	 DWORD PTR _package$[ebp], 32 ; 00000020H
  0001f	7d 50		 jge	 SHORT $LN3@check_weap

; 239  : 	{
; 240  : 		if (weapon_config_database[config_type][package].sub_type == ENTITY_SUB_TYPE_WEAPON_NO_WEAPON)

  00021	69 45 08 80 09
	00 00		 imul	 eax, DWORD PTR _config_type$[ebp], 2432
  00028	6b 4d fc 4c	 imul	 ecx, DWORD PTR _package$[ebp], 76
  0002c	83 bc 08 00 00
	00 00 00	 cmp	 DWORD PTR ?weapon_config_database@@3PAY0CA@UWEAPON_PACKAGE@@A[eax+ecx], 0
  00034	75 04		 jne	 SHORT $LN5@check_weap

; 241  : 		{
; 242  : 			return (FALSE);

  00036	33 c0		 xor	 eax, eax
  00038	eb 39		 jmp	 SHORT $LN1@check_weap
$LN5@check_weap:

; 243  : 		}
; 244  : 
; 245  : 		if (weapon_config_database[config_type][package].sub_type == weapon_sub_type)

  0003a	69 45 08 80 09
	00 00		 imul	 eax, DWORD PTR _config_type$[ebp], 2432
  00041	6b 4d fc 4c	 imul	 ecx, DWORD PTR _package$[ebp], 76
  00045	8b 94 08 00 00
	00 00		 mov	 edx, DWORD PTR ?weapon_config_database@@3PAY0CA@UWEAPON_PACKAGE@@A[eax+ecx]
  0004c	3b 55 0c	 cmp	 edx, DWORD PTR _weapon_sub_type$[ebp]
  0004f	75 1e		 jne	 SHORT $LN6@check_weap

; 246  : 		{
; 247  : 			if (weapon_config_database[config_type][package].heading_depth == heading_depth)

  00051	69 45 08 80 09
	00 00		 imul	 eax, DWORD PTR _config_type$[ebp], 2432
  00058	6b 4d fc 4c	 imul	 ecx, DWORD PTR _package$[ebp], 76
  0005c	8b 94 08 08 00
	00 00		 mov	 edx, DWORD PTR ?weapon_config_database@@3PAY0CA@UWEAPON_PACKAGE@@A[eax+ecx+8]
  00063	3b 55 10	 cmp	 edx, DWORD PTR _heading_depth$[ebp]
  00066	75 07		 jne	 SHORT $LN6@check_weap

; 248  : 			{
; 249  : 				return (TRUE);

  00068	b8 01 00 00 00	 mov	 eax, 1
  0006d	eb 04		 jmp	 SHORT $LN1@check_weap
$LN6@check_weap:

; 250  : 			}
; 251  : 		}
; 252  : 	}

  0006f	eb a1		 jmp	 SHORT $LN2@check_weap
$LN3@check_weap:

; 253  : 
; 254  : 	return (FALSE);

  00071	33 c0		 xor	 eax, eax
$LN1@check_weap:

; 255  : }

  00073	5f		 pop	 edi
  00074	5e		 pop	 esi
  00075	5b		 pop	 ebx
  00076	8b e5		 mov	 esp, ebp
  00078	5d		 pop	 ebp
  00079	c2 0c 00	 ret	 12			; 0000000cH
?check_weapon_on_hardpoint@@YGHW4WEAPON_CONFIG_TYPES@@HH@Z ENDP ; check_weapon_on_hardpoint
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\entity\mobile\weapon\wn_misc.c
;	COMDAT ?get_local_entity_weapon_count@@YGHPAUENTITY@@H@Z
_TEXT	SEGMENT
tv143 = -88						; size = 4
tv90 = -88						; size = 4
tv135 = -84						; size = 4
tv82 = -84						; size = 4
_config_type$ = -16					; size = 4
_package_status$ = -12					; size = 4
_package$ = -8						; size = 4
_weapon_count$ = -4					; size = 4
_en$ = 8						; size = 4
_weapon_sub_type$ = 12					; size = 4
?get_local_entity_weapon_count@@YGHPAUENTITY@@H@Z PROC	; get_local_entity_weapon_count, COMDAT

; 183  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 58	 sub	 esp, 88			; 00000058H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 184  : 	int
; 185  : 		weapon_count,
; 186  : 		package;
; 187  : 
; 188  : 	weapon_package_status
; 189  : 		*package_status;
; 190  : 
; 191  : 	weapon_config_types
; 192  : 		config_type;
; 193  : 
; 194  : 	ASSERT (en);

  00009	83 7d 08 00	 cmp	 DWORD PTR _en$[ebp], 0
  0000d	75 18		 jne	 SHORT $LN5@get_local_
  0000f	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??get_local_entity_weapon_count@@YGHPAUENTITY@@H@Z@4JA
  00014	83 c0 0b	 add	 eax, 11			; 0000000bH
  00017	50		 push	 eax
  00018	68 00 00 00 00	 push	 OFFSET ??_C@_0EL@LINJNLBM@c?3?2users?2nhv90?2projects?2eech?2ap@
  0001d	68 00 00 00 00	 push	 OFFSET ??_C@_02LFNMGJAP@en@
  00022	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN5@get_local_:

; 195  : 
; 196  : 	ASSERT (entity_sub_type_weapon_valid (weapon_sub_type));

  00027	83 7d 0c 00	 cmp	 DWORD PTR _weapon_sub_type$[ebp], 0
  0002b	7c 06		 jl	 SHORT $LN7@get_local_
  0002d	83 7d 0c 4c	 cmp	 DWORD PTR _weapon_sub_type$[ebp], 76 ; 0000004cH
  00031	7c 18		 jl	 SHORT $LN6@get_local_
$LN7@get_local_:
  00033	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??get_local_entity_weapon_count@@YGHPAUENTITY@@H@Z@4JA
  00038	83 c0 0d	 add	 eax, 13			; 0000000dH
  0003b	50		 push	 eax
  0003c	68 00 00 00 00	 push	 OFFSET ??_C@_0EL@LINJNLBM@c?3?2users?2nhv90?2projects?2eech?2ap@
  00041	68 00 00 00 00	 push	 OFFSET ??_C@_0CP@MAFEAOFK@entity_sub_type_weapon_valid?5?$CIw@
  00046	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN6@get_local_:

; 197  : 
; 198  : 	weapon_count = 0;

  0004b	c7 45 fc 00 00
	00 00		 mov	 DWORD PTR _weapon_count$[ebp], 0

; 199  : 
; 200  : 	if (weapon_sub_type != ENTITY_SUB_TYPE_WEAPON_NO_WEAPON)

  00052	83 7d 0c 00	 cmp	 DWORD PTR _weapon_sub_type$[ebp], 0
  00056	0f 84 77 01 00
	00		 je	 $LN8@get_local_

; 201  : 	{
; 202  : 		package_status = (weapon_package_status *) get_local_entity_ptr_value (en, PTR_TYPE_WEAPON_PACKAGE_STATUS_ARRAY);

  0005c	83 7d 08 00	 cmp	 DWORD PTR _en$[ebp], 0
  00060	74 0a		 je	 SHORT $LN14@get_local_
  00062	8b 45 08	 mov	 eax, DWORD PTR _en$[ebp]
  00065	8b 08		 mov	 ecx, DWORD PTR [eax]
  00067	89 4d ac	 mov	 DWORD PTR tv82[ebp], ecx
  0006a	eb 21		 jmp	 SHORT $LN15@get_local_
$LN14@get_local_:
  0006c	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??get_local_entity_weapon_count@@YGHPAUENTITY@@H@Z@4JA
  00072	83 c2 13	 add	 edx, 19			; 00000013H
  00075	52		 push	 edx
  00076	68 00 00 00 00	 push	 OFFSET ??_C@_0EL@LINJNLBM@c?3?2users?2nhv90?2projects?2eech?2ap@
  0007b	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  00080	50		 push	 eax
  00081	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00086	c7 45 ac 00 00
	00 00		 mov	 DWORD PTR tv82[ebp], 0
$LN15@get_local_:
  0008d	b9 01 00 00 00	 mov	 ecx, 1
  00092	85 c9		 test	 ecx, ecx
  00094	74 09		 je	 SHORT $LN16@get_local_
  00096	c7 45 a8 13 00
	00 00		 mov	 DWORD PTR tv90[ebp], 19	; 00000013H
  0009d	eb 21		 jmp	 SHORT $LN17@get_local_
$LN16@get_local_:
  0009f	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??get_local_entity_weapon_count@@YGHPAUENTITY@@H@Z@4JA
  000a5	83 c2 13	 add	 edx, 19			; 00000013H
  000a8	52		 push	 edx
  000a9	68 00 00 00 00	 push	 OFFSET ??_C@_0EL@LINJNLBM@c?3?2users?2nhv90?2projects?2eech?2ap@
  000ae	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_ptr_type_message@@3PBDB ; overload_invalid_ptr_type_message
  000b3	50		 push	 eax
  000b4	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  000b9	c7 45 a8 00 00
	00 00		 mov	 DWORD PTR tv90[ebp], 0
$LN17@get_local_:
  000c0	6a 13		 push	 19			; 00000013H
  000c2	8b 4d 08	 mov	 ecx, DWORD PTR _en$[ebp]
  000c5	51		 push	 ecx
  000c6	6b 55 ac 50	 imul	 edx, DWORD PTR tv82[ebp], 80
  000ca	8b 45 a8	 mov	 eax, DWORD PTR tv90[ebp]
  000cd	8b 8c 82 00 00
	00 00		 mov	 ecx, DWORD PTR ?fn_get_local_entity_ptr_value@@3PAY0BE@P6GPAXPAUENTITY@@W4PTR_TYPES@@@ZA[edx+eax*4]
  000d4	ff d1		 call	 ecx
  000d6	89 45 f4	 mov	 DWORD PTR _package_status$[ebp], eax

; 203  : 
; 204  : 		if (package_status)

  000d9	83 7d f4 00	 cmp	 DWORD PTR _package_status$[ebp], 0
  000dd	0f 84 f0 00 00
	00		 je	 $LN8@get_local_

; 205  : 		{
; 206  : 			config_type = (weapon_config_types) get_local_entity_int_value (en, INT_TYPE_WEAPON_CONFIG_TYPE);

  000e3	83 7d 08 00	 cmp	 DWORD PTR _en$[ebp], 0
  000e7	74 0a		 je	 SHORT $LN18@get_local_
  000e9	8b 45 08	 mov	 eax, DWORD PTR _en$[ebp]
  000ec	8b 08		 mov	 ecx, DWORD PTR [eax]
  000ee	89 4d ac	 mov	 DWORD PTR tv135[ebp], ecx
  000f1	eb 21		 jmp	 SHORT $LN19@get_local_
$LN18@get_local_:
  000f3	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??get_local_entity_weapon_count@@YGHPAUENTITY@@H@Z@4JA
  000f9	83 c2 17	 add	 edx, 23			; 00000017H
  000fc	52		 push	 edx
  000fd	68 00 00 00 00	 push	 OFFSET ??_C@_0EL@LINJNLBM@c?3?2users?2nhv90?2projects?2eech?2ap@
  00102	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  00107	50		 push	 eax
  00108	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  0010d	c7 45 ac 00 00
	00 00		 mov	 DWORD PTR tv135[ebp], 0
$LN19@get_local_:
  00114	b9 01 00 00 00	 mov	 ecx, 1
  00119	85 c9		 test	 ecx, ecx
  0011b	74 09		 je	 SHORT $LN20@get_local_
  0011d	c7 45 a8 05 01
	00 00		 mov	 DWORD PTR tv143[ebp], 261 ; 00000105H
  00124	eb 21		 jmp	 SHORT $LN21@get_local_
$LN20@get_local_:
  00126	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??get_local_entity_weapon_count@@YGHPAUENTITY@@H@Z@4JA
  0012c	83 c2 17	 add	 edx, 23			; 00000017H
  0012f	52		 push	 edx
  00130	68 00 00 00 00	 push	 OFFSET ??_C@_0EL@LINJNLBM@c?3?2users?2nhv90?2projects?2eech?2ap@
  00135	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_int_type_message@@3PBDB ; overload_invalid_int_type_message
  0013a	50		 push	 eax
  0013b	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00140	c7 45 a8 00 00
	00 00		 mov	 DWORD PTR tv143[ebp], 0
$LN21@get_local_:
  00147	68 05 01 00 00	 push	 261			; 00000105H
  0014c	8b 4d 08	 mov	 ecx, DWORD PTR _en$[ebp]
  0014f	51		 push	 ecx
  00150	69 55 ac 5c 04
	00 00		 imul	 edx, DWORD PTR tv135[ebp], 1116
  00157	8b 45 a8	 mov	 eax, DWORD PTR tv143[ebp]
  0015a	8b 8c 82 00 00
	00 00		 mov	 ecx, DWORD PTR ?fn_get_local_entity_int_value@@3PAY0BBH@P6GHPAUENTITY@@W4INT_TYPES@@@ZA[edx+eax*4]
  00161	ff d1		 call	 ecx
  00163	89 45 f0	 mov	 DWORD PTR _config_type$[ebp], eax

; 207  : 
; 208  : 			for (package = 0; package < NUM_WEAPON_PACKAGES; package++)

  00166	c7 45 f8 00 00
	00 00		 mov	 DWORD PTR _package$[ebp], 0
  0016d	eb 09		 jmp	 SHORT $LN4@get_local_
$LN2@get_local_:
  0016f	8b 45 f8	 mov	 eax, DWORD PTR _package$[ebp]
  00172	83 c0 01	 add	 eax, 1
  00175	89 45 f8	 mov	 DWORD PTR _package$[ebp], eax
$LN4@get_local_:
  00178	83 7d f8 20	 cmp	 DWORD PTR _package$[ebp], 32 ; 00000020H
  0017c	7d 55		 jge	 SHORT $LN8@get_local_

; 209  : 			{
; 210  : 				if (weapon_config_database[config_type][package].sub_type == ENTITY_SUB_TYPE_WEAPON_NO_WEAPON)

  0017e	69 45 f0 80 09
	00 00		 imul	 eax, DWORD PTR _config_type$[ebp], 2432
  00185	6b 4d f8 4c	 imul	 ecx, DWORD PTR _package$[ebp], 76
  00189	83 bc 08 00 00
	00 00 00	 cmp	 DWORD PTR ?weapon_config_database@@3PAY0CA@UWEAPON_PACKAGE@@A[eax+ecx], 0
  00191	75 02		 jne	 SHORT $LN10@get_local_

; 211  : 				{
; 212  : 					break;

  00193	eb 3e		 jmp	 SHORT $LN8@get_local_
$LN10@get_local_:

; 213  : 				}
; 214  : 
; 215  : 				if (weapon_config_database[config_type][package].sub_type == weapon_sub_type)

  00195	69 45 f0 80 09
	00 00		 imul	 eax, DWORD PTR _config_type$[ebp], 2432
  0019c	6b 4d f8 4c	 imul	 ecx, DWORD PTR _package$[ebp], 76
  001a0	8b 94 08 00 00
	00 00		 mov	 edx, DWORD PTR ?weapon_config_database@@3PAY0CA@UWEAPON_PACKAGE@@A[eax+ecx]
  001a7	3b 55 0c	 cmp	 edx, DWORD PTR _weapon_sub_type$[ebp]
  001aa	75 25		 jne	 SHORT $LN11@get_local_

; 216  : 				{
; 217  : 					if (!package_status[package].damaged)

  001ac	8b 45 f8	 mov	 eax, DWORD PTR _package$[ebp]
  001af	c1 e0 04	 shl	 eax, 4
  001b2	8b 4d f4	 mov	 ecx, DWORD PTR _package_status$[ebp]
  001b5	0f b7 54 01 02	 movzx	 edx, WORD PTR [ecx+eax+2]
  001ba	85 d2		 test	 edx, edx
  001bc	75 13		 jne	 SHORT $LN11@get_local_

; 218  : 					{
; 219  : 						weapon_count += package_status[package].number;

  001be	8b 45 f8	 mov	 eax, DWORD PTR _package$[ebp]
  001c1	c1 e0 04	 shl	 eax, 4
  001c4	8b 4d f4	 mov	 ecx, DWORD PTR _package_status$[ebp]
  001c7	0f b7 14 01	 movzx	 edx, WORD PTR [ecx+eax]
  001cb	03 55 fc	 add	 edx, DWORD PTR _weapon_count$[ebp]
  001ce	89 55 fc	 mov	 DWORD PTR _weapon_count$[ebp], edx
$LN11@get_local_:

; 220  : 					}
; 221  : 				}
; 222  : 			}

  001d1	eb 9c		 jmp	 SHORT $LN2@get_local_
$LN8@get_local_:

; 223  : 		}
; 224  : 	}
; 225  : 
; 226  : 	return (weapon_count);

  001d3	8b 45 fc	 mov	 eax, DWORD PTR _weapon_count$[ebp]

; 227  : }

  001d6	5f		 pop	 edi
  001d7	5e		 pop	 esi
  001d8	5b		 pop	 ebx
  001d9	8b e5		 mov	 esp, ebp
  001db	5d		 pop	 ebp
  001dc	c2 08 00	 ret	 8
?get_local_entity_weapon_count@@YGHPAUENTITY@@H@Z ENDP	; get_local_entity_weapon_count
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\entity\mobile\weapon\wn_misc.c
;	COMDAT ?get_local_entity_weapon_load_weight@@YGMPAUENTITY@@@Z
_TEXT	SEGMENT
tv136 = -96						; size = 4
tv83 = -96						; size = 4
tv128 = -92						; size = 4
tv75 = -92						; size = 4
_package$ = -24						; size = 4
_config_type$ = -20					; size = 4
_package_status$ = -16					; size = 4
_package_weight$ = -12					; size = 4
_weapon_weight$ = -8					; size = 4
_weapon_load_weight$ = -4				; size = 4
_en$ = 8						; size = 4
?get_local_entity_weapon_load_weight@@YGMPAUENTITY@@@Z PROC ; get_local_entity_weapon_load_weight, COMDAT

; 135  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 60	 sub	 esp, 96			; 00000060H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 136  : 	float
; 137  : 		weapon_load_weight,
; 138  : 		weapon_weight,
; 139  : 		package_weight;
; 140  : 
; 141  : 	weapon_package_status
; 142  : 		*package_status;
; 143  : 
; 144  : 	weapon_config_types
; 145  : 		config_type;
; 146  : 
; 147  : 	int
; 148  : 		package;
; 149  : 
; 150  : 	ASSERT (en);

  00009	83 7d 08 00	 cmp	 DWORD PTR _en$[ebp], 0
  0000d	75 18		 jne	 SHORT $LN5@get_local_
  0000f	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??get_local_entity_weapon_load_weight@@YGMPAUENTITY@@@Z@4JA
  00014	83 c0 0f	 add	 eax, 15			; 0000000fH
  00017	50		 push	 eax
  00018	68 00 00 00 00	 push	 OFFSET ??_C@_0EL@LINJNLBM@c?3?2users?2nhv90?2projects?2eech?2ap@
  0001d	68 00 00 00 00	 push	 OFFSET ??_C@_02LFNMGJAP@en@
  00022	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN5@get_local_:

; 151  : 
; 152  : 	weapon_load_weight = 0.0;

  00027	0f 57 c0	 xorps	 xmm0, xmm0
  0002a	f3 0f 11 45 fc	 movss	 DWORD PTR _weapon_load_weight$[ebp], xmm0

; 153  : 
; 154  : 	package_status = (weapon_package_status *) get_local_entity_ptr_value (en, PTR_TYPE_WEAPON_PACKAGE_STATUS_ARRAY);

  0002f	83 7d 08 00	 cmp	 DWORD PTR _en$[ebp], 0
  00033	74 0a		 je	 SHORT $LN9@get_local_
  00035	8b 45 08	 mov	 eax, DWORD PTR _en$[ebp]
  00038	8b 08		 mov	 ecx, DWORD PTR [eax]
  0003a	89 4d a4	 mov	 DWORD PTR tv75[ebp], ecx
  0003d	eb 21		 jmp	 SHORT $LN10@get_local_
$LN9@get_local_:
  0003f	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??get_local_entity_weapon_load_weight@@YGMPAUENTITY@@@Z@4JA
  00045	83 c2 13	 add	 edx, 19			; 00000013H
  00048	52		 push	 edx
  00049	68 00 00 00 00	 push	 OFFSET ??_C@_0EL@LINJNLBM@c?3?2users?2nhv90?2projects?2eech?2ap@
  0004e	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  00053	50		 push	 eax
  00054	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00059	c7 45 a4 00 00
	00 00		 mov	 DWORD PTR tv75[ebp], 0
$LN10@get_local_:
  00060	b9 01 00 00 00	 mov	 ecx, 1
  00065	85 c9		 test	 ecx, ecx
  00067	74 09		 je	 SHORT $LN11@get_local_
  00069	c7 45 a0 13 00
	00 00		 mov	 DWORD PTR tv83[ebp], 19	; 00000013H
  00070	eb 21		 jmp	 SHORT $LN12@get_local_
$LN11@get_local_:
  00072	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??get_local_entity_weapon_load_weight@@YGMPAUENTITY@@@Z@4JA
  00078	83 c2 13	 add	 edx, 19			; 00000013H
  0007b	52		 push	 edx
  0007c	68 00 00 00 00	 push	 OFFSET ??_C@_0EL@LINJNLBM@c?3?2users?2nhv90?2projects?2eech?2ap@
  00081	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_ptr_type_message@@3PBDB ; overload_invalid_ptr_type_message
  00086	50		 push	 eax
  00087	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  0008c	c7 45 a0 00 00
	00 00		 mov	 DWORD PTR tv83[ebp], 0
$LN12@get_local_:
  00093	6a 13		 push	 19			; 00000013H
  00095	8b 4d 08	 mov	 ecx, DWORD PTR _en$[ebp]
  00098	51		 push	 ecx
  00099	6b 55 a4 50	 imul	 edx, DWORD PTR tv75[ebp], 80
  0009d	8b 45 a0	 mov	 eax, DWORD PTR tv83[ebp]
  000a0	8b 8c 82 00 00
	00 00		 mov	 ecx, DWORD PTR ?fn_get_local_entity_ptr_value@@3PAY0BE@P6GPAXPAUENTITY@@W4PTR_TYPES@@@ZA[edx+eax*4]
  000a7	ff d1		 call	 ecx
  000a9	89 45 f0	 mov	 DWORD PTR _package_status$[ebp], eax

; 155  : 
; 156  : 	if (package_status)

  000ac	83 7d f0 00	 cmp	 DWORD PTR _package_status$[ebp], 0
  000b0	0f 84 01 01 00
	00		 je	 $LN3@get_local_

; 157  : 	{
; 158  : 		config_type = (weapon_config_types) get_local_entity_int_value (en, INT_TYPE_WEAPON_CONFIG_TYPE);

  000b6	83 7d 08 00	 cmp	 DWORD PTR _en$[ebp], 0
  000ba	74 0a		 je	 SHORT $LN13@get_local_
  000bc	8b 45 08	 mov	 eax, DWORD PTR _en$[ebp]
  000bf	8b 08		 mov	 ecx, DWORD PTR [eax]
  000c1	89 4d a4	 mov	 DWORD PTR tv128[ebp], ecx
  000c4	eb 21		 jmp	 SHORT $LN14@get_local_
$LN13@get_local_:
  000c6	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??get_local_entity_weapon_load_weight@@YGMPAUENTITY@@@Z@4JA
  000cc	83 c2 17	 add	 edx, 23			; 00000017H
  000cf	52		 push	 edx
  000d0	68 00 00 00 00	 push	 OFFSET ??_C@_0EL@LINJNLBM@c?3?2users?2nhv90?2projects?2eech?2ap@
  000d5	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  000da	50		 push	 eax
  000db	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  000e0	c7 45 a4 00 00
	00 00		 mov	 DWORD PTR tv128[ebp], 0
$LN14@get_local_:
  000e7	b9 01 00 00 00	 mov	 ecx, 1
  000ec	85 c9		 test	 ecx, ecx
  000ee	74 09		 je	 SHORT $LN15@get_local_
  000f0	c7 45 a0 05 01
	00 00		 mov	 DWORD PTR tv136[ebp], 261 ; 00000105H
  000f7	eb 21		 jmp	 SHORT $LN16@get_local_
$LN15@get_local_:
  000f9	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??get_local_entity_weapon_load_weight@@YGMPAUENTITY@@@Z@4JA
  000ff	83 c2 17	 add	 edx, 23			; 00000017H
  00102	52		 push	 edx
  00103	68 00 00 00 00	 push	 OFFSET ??_C@_0EL@LINJNLBM@c?3?2users?2nhv90?2projects?2eech?2ap@
  00108	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_int_type_message@@3PBDB ; overload_invalid_int_type_message
  0010d	50		 push	 eax
  0010e	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00113	c7 45 a0 00 00
	00 00		 mov	 DWORD PTR tv136[ebp], 0
$LN16@get_local_:
  0011a	68 05 01 00 00	 push	 261			; 00000105H
  0011f	8b 4d 08	 mov	 ecx, DWORD PTR _en$[ebp]
  00122	51		 push	 ecx
  00123	69 55 a4 5c 04
	00 00		 imul	 edx, DWORD PTR tv128[ebp], 1116
  0012a	8b 45 a0	 mov	 eax, DWORD PTR tv136[ebp]
  0012d	8b 8c 82 00 00
	00 00		 mov	 ecx, DWORD PTR ?fn_get_local_entity_int_value@@3PAY0BBH@P6GHPAUENTITY@@W4INT_TYPES@@@ZA[edx+eax*4]
  00134	ff d1		 call	 ecx
  00136	89 45 ec	 mov	 DWORD PTR _config_type$[ebp], eax

; 159  : 
; 160  : 		for (package = 0; package < NUM_WEAPON_PACKAGES; package++)

  00139	c7 45 e8 00 00
	00 00		 mov	 DWORD PTR _package$[ebp], 0
  00140	eb 09		 jmp	 SHORT $LN4@get_local_
$LN2@get_local_:
  00142	8b 45 e8	 mov	 eax, DWORD PTR _package$[ebp]
  00145	83 c0 01	 add	 eax, 1
  00148	89 45 e8	 mov	 DWORD PTR _package$[ebp], eax
$LN4@get_local_:
  0014b	83 7d e8 20	 cmp	 DWORD PTR _package$[ebp], 32 ; 00000020H
  0014f	7d 66		 jge	 SHORT $LN3@get_local_

; 161  : 		{
; 162  : 			if (weapon_config_database[config_type][package].sub_type == ENTITY_SUB_TYPE_WEAPON_NO_WEAPON)

  00151	69 45 ec 80 09
	00 00		 imul	 eax, DWORD PTR _config_type$[ebp], 2432
  00158	6b 4d e8 4c	 imul	 ecx, DWORD PTR _package$[ebp], 76
  0015c	83 bc 08 00 00
	00 00 00	 cmp	 DWORD PTR ?weapon_config_database@@3PAY0CA@UWEAPON_PACKAGE@@A[eax+ecx], 0
  00164	75 02		 jne	 SHORT $LN7@get_local_

; 163  : 			{
; 164  : 				break;

  00166	eb 4f		 jmp	 SHORT $LN3@get_local_
$LN7@get_local_:

; 165  : 			}
; 166  : 
; 167  : 			weapon_weight = weapon_database[weapon_config_database[config_type][package].sub_type].weight;

  00168	69 45 ec 80 09
	00 00		 imul	 eax, DWORD PTR _config_type$[ebp], 2432
  0016f	6b 4d e8 4c	 imul	 ecx, DWORD PTR _package$[ebp], 76
  00173	69 94 08 00 00
	00 00 e0 00 00
	00		 imul	 edx, DWORD PTR ?weapon_config_database@@3PAY0CA@UWEAPON_PACKAGE@@A[eax+ecx], 224
  0017e	f3 0f 10 82 88
	00 00 00	 movss	 xmm0, DWORD PTR ?weapon_database@@3PAUWEAPON_DATA@@A[edx+136]
  00186	f3 0f 11 45 f8	 movss	 DWORD PTR _weapon_weight$[ebp], xmm0

; 168  : 
; 169  : 			package_weight = weapon_weight * package_status[package].number;

  0018b	8b 45 e8	 mov	 eax, DWORD PTR _package$[ebp]
  0018e	c1 e0 04	 shl	 eax, 4
  00191	8b 4d f0	 mov	 ecx, DWORD PTR _package_status$[ebp]
  00194	0f b7 14 01	 movzx	 edx, WORD PTR [ecx+eax]
  00198	f3 0f 2a c2	 cvtsi2ss xmm0, edx
  0019c	f3 0f 59 45 f8	 mulss	 xmm0, DWORD PTR _weapon_weight$[ebp]
  001a1	f3 0f 11 45 f4	 movss	 DWORD PTR _package_weight$[ebp], xmm0

; 170  : 
; 171  : 			weapon_load_weight += package_weight;

  001a6	f3 0f 10 45 fc	 movss	 xmm0, DWORD PTR _weapon_load_weight$[ebp]
  001ab	f3 0f 58 45 f4	 addss	 xmm0, DWORD PTR _package_weight$[ebp]
  001b0	f3 0f 11 45 fc	 movss	 DWORD PTR _weapon_load_weight$[ebp], xmm0

; 172  : 		}

  001b5	eb 8b		 jmp	 SHORT $LN2@get_local_
$LN3@get_local_:

; 173  : 	}
; 174  : 
; 175  : 	return (weapon_load_weight);

  001b7	d9 45 fc	 fld	 DWORD PTR _weapon_load_weight$[ebp]

; 176  : }

  001ba	5f		 pop	 edi
  001bb	5e		 pop	 esi
  001bc	5b		 pop	 ebx
  001bd	8b e5		 mov	 esp, ebp
  001bf	5d		 pop	 ebp
  001c0	c2 04 00	 ret	 4
?get_local_entity_weapon_load_weight@@YGMPAUENTITY@@@Z ENDP ; get_local_entity_weapon_load_weight
_TEXT	ENDS
END
