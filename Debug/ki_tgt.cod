; Listing generated by Microsoft (R) Optimizing Compiler Version 19.16.27045.0 

	TITLE	C:\Users\nhv90\Projects\eech\aphavoc\source\gunships\avionics\kiowa\ki_tgt.c
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB MSVCRTD
INCLUDELIB OLDNAMES

PUBLIC	?initialise_kiowa_target_acquisition_systems@@YGXXZ ; initialise_kiowa_target_acquisition_systems
PUBLIC	?deinitialise_kiowa_target_acquisition_systems@@YGXXZ ; deinitialise_kiowa_target_acquisition_systems
PUBLIC	?select_kiowa_target_acquisition_system@@YGXW4TARGET_ACQUISITION_SYSTEMS@@@Z ; select_kiowa_target_acquisition_system
PUBLIC	?update_kiowa_target_acquisition_system@@YGXXZ	; update_kiowa_target_acquisition_system
PUBLIC	?centre_kiowa_target_acquisition_system@@YGXXZ	; centre_kiowa_target_acquisition_system
PUBLIC	?toggle_kiowa_show_allied_targets@@YGXXZ	; toggle_kiowa_show_allied_targets
PUBLIC	?toggle_kiowa_auto_target@@YGXXZ		; toggle_kiowa_auto_target
PUBLIC	?toggle_kiowa_lock_target@@YGXXZ		; toggle_kiowa_lock_target
PUBLIC	?set_kiowa_lock_target@@YGXH@Z			; set_kiowa_lock_target
PUBLIC	??_C@_0CH@DDKDNBNH@Invalid?5target?5acquisition?5syst@ ; `string'
PUBLIC	?__LINE__Var@?0??update_kiowa_target_acquisition_system@@YGXXZ@4JA ; `update_kiowa_target_acquisition_system'::`1'::__LINE__Var
PUBLIC	??_C@_0EN@LMEJKOIH@c?3?2users?2nhv90?2projects?2eech?2ap@ ; `string'
EXTRN	?process_assert@@YGXPBD0H@Z:PROC		; process_assert
EXTRN	?debug_fatal@@YAXPBDZZ:PROC			; debug_fatal
EXTRN	?reset_common_target_acquisition_system_keys@@YGXXZ:PROC ; reset_common_target_acquisition_system_keys
EXTRN	?set_gunship_target@@YGXPAUENTITY@@@Z:PROC	; set_gunship_target
EXTRN	?play_common_cpg_target_acquisition_system_speech@@YGXW4TARGET_ACQUISITION_SYSTEMS@@0H@Z:PROC ; play_common_cpg_target_acquisition_system_speech
EXTRN	?update_common_eo@@YGXXZ:PROC			; update_common_eo
EXTRN	?activate_common_eo@@YGXXZ:PROC			; activate_common_eo
EXTRN	?deactivate_common_eo@@YGXXZ:PROC		; deactivate_common_eo
EXTRN	?slave_common_eo_to_current_target@@YGXXZ:PROC	; slave_common_eo_to_current_target
EXTRN	?copy_eo_zoom@@YGXPAUEO_PARAMS_DYNAMIC_MOVE@@0@Z:PROC ; copy_eo_zoom
EXTRN	?laser_is_active@@YGHXZ:PROC			; laser_is_active
EXTRN	?set_laser_is_active@@YGXH@Z:PROC		; set_laser_is_active
EXTRN	?toggle_eo_lock@@YGXXZ:PROC			; toggle_eo_lock
EXTRN	?set_eo_lock@@YGXH@Z:PROC			; set_eo_lock
EXTRN	?update_weapon_lock_type@@YGXW4TARGET_ACQUISITION_SYSTEMS@@@Z:PROC ; update_weapon_lock_type
EXTRN	?initialise_kiowa_eo@@YGXXZ:PROC		; initialise_kiowa_eo
EXTRN	?deinitialise_kiowa_eo@@YGXXZ:PROC		; deinitialise_kiowa_eo
EXTRN	?update_kiowa_eo@@YGXPAUEO_PARAMS_DYNAMIC_MOVE@@@Z:PROC ; update_kiowa_eo
EXTRN	?centre_kiowa_eo@@YGXXZ:PROC			; centre_kiowa_eo
EXTRN	?slave_kiowa_eo_to_current_target@@YGXXZ:PROC	; slave_kiowa_eo_to_current_target
EXTRN	?initialise_kiowa_hms@@YGXXZ:PROC		; initialise_kiowa_hms
EXTRN	?deinitialise_kiowa_hms@@YGXXZ:PROC		; deinitialise_kiowa_hms
EXTRN	?select_kiowa_tads_main_mfd@@YGXXZ:PROC		; select_kiowa_tads_main_mfd
EXTRN	?command_line_manual_laser_radar@@3HA:DWORD	; command_line_manual_laser_radar
EXTRN	?command_line_targeting_system_auto_page@@3HA:DWORD ; command_line_targeting_system_auto_page
EXTRN	?null_entity_pointer_message@@3PBDB:DWORD	; null_entity_pointer_message
EXTRN	?system_comms_model@@3W4COMMS_MODEL_TYPES@@A:DWORD ; system_comms_model
EXTRN	?overload_invalid_list_type_message@@3PBDB:DWORD ; overload_invalid_list_type_message
EXTRN	?fn_get_local_entity_parent@@3PAY0CN@P6GPAUENTITY@@PAU1@W4LIST_TYPES@@@ZA:BYTE ; fn_get_local_entity_parent
EXTRN	?overload_invalid_int_type_message@@3PBDB:DWORD	; overload_invalid_int_type_message
EXTRN	?fn_set_client_server_entity_int_value@@3PAY1BBH@1P6GXPAUENTITY@@W4INT_TYPES@@H@ZA:BYTE ; fn_set_client_server_entity_int_value
EXTRN	?fn_get_local_entity_int_value@@3PAY0BBH@P6GHPAUENTITY@@W4INT_TYPES@@@ZA:BYTE ; fn_get_local_entity_int_value
EXTRN	?gunship_entity@@3PAUENTITY@@A:DWORD		; gunship_entity
EXTRN	?target_acquisition_system@@3W4TARGET_ACQUISITION_SYSTEMS@@A:DWORD ; target_acquisition_system
EXTRN	?target_locked@@3HA:DWORD			; target_locked
EXTRN	?hud_mode@@3W4HUD_MODES@@A:DWORD		; hud_mode
EXTRN	?previous_hud_mode@@3W4HUD_MODES@@A:DWORD	; previous_hud_mode
EXTRN	?kiowa_damage@@3TKIOWA_DAMAGE_FLAGS@@A:DWORD	; kiowa_damage
EXTRN	?kiowa_flir@@3UEO_PARAMS_DYNAMIC_MOVE@@A:BYTE	; kiowa_flir
EXTRN	?kiowa_dtv@@3UEO_PARAMS_DYNAMIC_MOVE@@A:BYTE	; kiowa_dtv
;	COMDAT ??_C@_0EN@LMEJKOIH@c?3?2users?2nhv90?2projects?2eech?2ap@
CONST	SEGMENT
??_C@_0EN@LMEJKOIH@c?3?2users?2nhv90?2projects?2eech?2ap@ DB 'c:\users\nh'
	DB	'v90\projects\eech\aphavoc\source\gunships\avionics\kiowa\ki_t'
	DB	'gt.c', 00H					; `string'
CONST	ENDS
;	COMDAT ?__LINE__Var@?0??update_kiowa_target_acquisition_system@@YGXXZ@4JA
_DATA	SEGMENT
?__LINE__Var@?0??update_kiowa_target_acquisition_system@@YGXXZ@4JA DD 0fbH ; `update_kiowa_target_acquisition_system'::`1'::__LINE__Var
_DATA	ENDS
;	COMDAT ??_C@_0CH@DDKDNBNH@Invalid?5target?5acquisition?5syst@
CONST	SEGMENT
??_C@_0CH@DDKDNBNH@Invalid?5target?5acquisition?5syst@ DB 'Invalid target'
	DB	' acquisition system = %d', 00H		; `string'
CONST	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\gunships\avionics\kiowa\ki_tgt.c
;	COMDAT ?deselect_kiowa_target_acquisition_system@@YGXW4TARGET_ACQUISITION_SYSTEMS@@@Z
_TEXT	SEGMENT
tv64 = -68						; size = 4
_system$ = 8						; size = 4
?deselect_kiowa_target_acquisition_system@@YGXW4TARGET_ACQUISITION_SYSTEMS@@@Z PROC ; deselect_kiowa_target_acquisition_system, COMDAT

; 102  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 44	 sub	 esp, 68			; 00000044H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 103  : 	switch (system)

  00009	8b 45 08	 mov	 eax, DWORD PTR _system$[ebp]
  0000c	89 45 bc	 mov	 DWORD PTR tv64[ebp], eax
  0000f	83 7d bc 00	 cmp	 DWORD PTR tv64[ebp], 0
  00013	74 0e		 je	 SHORT $LN4@deselect_k
  00015	83 7d bc 03	 cmp	 DWORD PTR tv64[ebp], 3
  00019	74 1a		 je	 SHORT $LN6@deselect_k
  0001b	83 7d bc 04	 cmp	 DWORD PTR tv64[ebp], 4
  0001f	74 2a		 je	 SHORT $LN7@deselect_k
  00021	eb 3e		 jmp	 SHORT $LN8@deselect_k
$LN4@deselect_k:

; 104  : 	{
; 105  : 		////////////////////////////////////////
; 106  : 		case TARGET_ACQUISITION_SYSTEM_OFF:
; 107  : 		////////////////////////////////////////
; 108  : 		{
; 109  : 			// laser is on in all modes but OFF in automatic mode
; 110  : 			if (!command_line_manual_laser_radar)

  00023	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?command_line_manual_laser_radar@@3HA, 0 ; command_line_manual_laser_radar
  0002a	75 07		 jne	 SHORT $LN5@deselect_k

; 111  : 				set_laser_is_active(TRUE);

  0002c	6a 01		 push	 1
  0002e	e8 00 00 00 00	 call	 ?set_laser_is_active@@YGXH@Z ; set_laser_is_active
$LN5@deselect_k:

; 112  : 			
; 113  : 			break;

  00033	eb 3d		 jmp	 SHORT $LN1@deselect_k
$LN6@deselect_k:

; 114  : 		}
; 115  : 		////////////////////////////////////////
; 116  : 		case TARGET_ACQUISITION_SYSTEM_FLIR:
; 117  : 		////////////////////////////////////////
; 118  : 		{
; 119  : 			deactivate_common_eo ();

  00035	e8 00 00 00 00	 call	 ?deactivate_common_eo@@YGXXZ ; deactivate_common_eo

; 120  : 
; 121  : 			copy_eo_zoom(&kiowa_flir, &kiowa_dtv);

  0003a	68 00 00 00 00	 push	 OFFSET ?kiowa_dtv@@3UEO_PARAMS_DYNAMIC_MOVE@@A ; kiowa_dtv
  0003f	68 00 00 00 00	 push	 OFFSET ?kiowa_flir@@3UEO_PARAMS_DYNAMIC_MOVE@@A ; kiowa_flir
  00044	e8 00 00 00 00	 call	 ?copy_eo_zoom@@YGXPAUEO_PARAMS_DYNAMIC_MOVE@@0@Z ; copy_eo_zoom

; 122  : 
; 123  : 			break;

  00049	eb 27		 jmp	 SHORT $LN1@deselect_k
$LN7@deselect_k:

; 124  : 		}
; 125  : 		////////////////////////////////////////
; 126  : 		case TARGET_ACQUISITION_SYSTEM_DTV:
; 127  : 		////////////////////////////////////////
; 128  : 		{
; 129  : 			deactivate_common_eo ();

  0004b	e8 00 00 00 00	 call	 ?deactivate_common_eo@@YGXXZ ; deactivate_common_eo

; 130  : 
; 131  : 			copy_eo_zoom(&kiowa_dtv, &kiowa_flir);

  00050	68 00 00 00 00	 push	 OFFSET ?kiowa_flir@@3UEO_PARAMS_DYNAMIC_MOVE@@A ; kiowa_flir
  00055	68 00 00 00 00	 push	 OFFSET ?kiowa_dtv@@3UEO_PARAMS_DYNAMIC_MOVE@@A ; kiowa_dtv
  0005a	e8 00 00 00 00	 call	 ?copy_eo_zoom@@YGXPAUEO_PARAMS_DYNAMIC_MOVE@@0@Z ; copy_eo_zoom

; 132  : 
; 133  : 			break;

  0005f	eb 11		 jmp	 SHORT $LN1@deselect_k
$LN8@deselect_k:

; 134  : 		}
; 135  : 		////////////////////////////////////////
; 136  : 		default:
; 137  : 		////////////////////////////////////////
; 138  : 		{
; 139  : 			debug_fatal ("Invalid target acquisition system = %d", system);

  00061	8b 45 08	 mov	 eax, DWORD PTR _system$[ebp]
  00064	50		 push	 eax
  00065	68 00 00 00 00	 push	 OFFSET ??_C@_0CH@DDKDNBNH@Invalid?5target?5acquisition?5syst@
  0006a	e8 00 00 00 00	 call	 ?debug_fatal@@YAXPBDZZ	; debug_fatal
  0006f	83 c4 08	 add	 esp, 8
$LN1@deselect_k:

; 140  : 
; 141  : 			break;
; 142  : 		}
; 143  : 	}
; 144  : }

  00072	5f		 pop	 edi
  00073	5e		 pop	 esi
  00074	5b		 pop	 ebx
  00075	8b e5		 mov	 esp, ebp
  00077	5d		 pop	 ebp
  00078	c2 04 00	 ret	 4
?deselect_kiowa_target_acquisition_system@@YGXW4TARGET_ACQUISITION_SYSTEMS@@@Z ENDP ; deselect_kiowa_target_acquisition_system
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\gunships\avionics\kiowa\ki_tgt.c
;	COMDAT ?set_kiowa_lock_target@@YGXH@Z
_TEXT	SEGMENT
tv64 = -68						; size = 4
_lock$ = 8						; size = 4
?set_kiowa_lock_target@@YGXH@Z PROC			; set_kiowa_lock_target, COMDAT

; 486  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 44	 sub	 esp, 68			; 00000044H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 487  : 	switch (target_acquisition_system)

  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ?target_acquisition_system@@3W4TARGET_ACQUISITION_SYSTEMS@@A ; target_acquisition_system
  0000e	89 45 bc	 mov	 DWORD PTR tv64[ebp], eax
  00011	83 7d bc 03	 cmp	 DWORD PTR tv64[ebp], 3
  00015	7c 13		 jl	 SHORT $LN1@set_kiowa_
  00017	83 7d bc 04	 cmp	 DWORD PTR tv64[ebp], 4
  0001b	7e 04		 jle	 SHORT $LN5@set_kiowa_
  0001d	eb 0b		 jmp	 SHORT $LN1@set_kiowa_

; 488  : 	{
; 489  : 		////////////////////////////////////////
; 490  : 		case TARGET_ACQUISITION_SYSTEM_OFF:
; 491  : 		////////////////////////////////////////
; 492  : 		{
; 493  : 			break;

  0001f	eb 09		 jmp	 SHORT $LN1@set_kiowa_
$LN5@set_kiowa_:

; 494  : 		}
; 495  : 		////////////////////////////////////////
; 496  : 		case TARGET_ACQUISITION_SYSTEM_FLIR:
; 497  : 		case TARGET_ACQUISITION_SYSTEM_DTV:
; 498  : 		////////////////////////////////////////
; 499  : 		{
; 500  : 			set_eo_lock(lock);

  00021	8b 45 08	 mov	 eax, DWORD PTR _lock$[ebp]
  00024	50		 push	 eax
  00025	e8 00 00 00 00	 call	 ?set_eo_lock@@YGXH@Z	; set_eo_lock
$LN1@set_kiowa_:

; 501  : 
; 502  : 			break;
; 503  : 		}
; 504  : 		////////////////////////////////////////
; 505  : 	}
; 506  : }

  0002a	5f		 pop	 edi
  0002b	5e		 pop	 esi
  0002c	5b		 pop	 ebx
  0002d	8b e5		 mov	 esp, ebp
  0002f	5d		 pop	 ebp
  00030	c2 04 00	 ret	 4
?set_kiowa_lock_target@@YGXH@Z ENDP			; set_kiowa_lock_target
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\gunships\avionics\kiowa\ki_tgt.c
;	COMDAT ?toggle_kiowa_lock_target@@YGXXZ
_TEXT	SEGMENT
tv64 = -68						; size = 4
?toggle_kiowa_lock_target@@YGXXZ PROC			; toggle_kiowa_lock_target, COMDAT

; 459  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 44	 sub	 esp, 68			; 00000044H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 460  : 	switch (target_acquisition_system)

  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ?target_acquisition_system@@3W4TARGET_ACQUISITION_SYSTEMS@@A ; target_acquisition_system
  0000e	89 45 bc	 mov	 DWORD PTR tv64[ebp], eax
  00011	83 7d bc 03	 cmp	 DWORD PTR tv64[ebp], 3
  00015	7c 0f		 jl	 SHORT $LN1@toggle_kio
  00017	83 7d bc 04	 cmp	 DWORD PTR tv64[ebp], 4
  0001b	7e 04		 jle	 SHORT $LN5@toggle_kio
  0001d	eb 07		 jmp	 SHORT $LN1@toggle_kio

; 461  : 	{
; 462  : 		////////////////////////////////////////
; 463  : 		case TARGET_ACQUISITION_SYSTEM_OFF:
; 464  : 		////////////////////////////////////////
; 465  : 		{
; 466  : 			break;

  0001f	eb 05		 jmp	 SHORT $LN1@toggle_kio
$LN5@toggle_kio:

; 467  : 		}
; 468  : 		////////////////////////////////////////
; 469  : 		case TARGET_ACQUISITION_SYSTEM_FLIR:
; 470  : 		case TARGET_ACQUISITION_SYSTEM_DTV:
; 471  : 		////////////////////////////////////////
; 472  : 		{
; 473  : 			toggle_eo_lock();

  00021	e8 00 00 00 00	 call	 ?toggle_eo_lock@@YGXXZ	; toggle_eo_lock
$LN1@toggle_kio:

; 474  : 
; 475  : 			break;
; 476  : 		}
; 477  : 		////////////////////////////////////////
; 478  : 	}
; 479  : }

  00026	5f		 pop	 edi
  00027	5e		 pop	 esi
  00028	5b		 pop	 ebx
  00029	8b e5		 mov	 esp, ebp
  0002b	5d		 pop	 ebp
  0002c	c3		 ret	 0
?toggle_kiowa_lock_target@@YGXXZ ENDP			; toggle_kiowa_lock_target
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\gunships\avionics\kiowa\ki_tgt.c
;	COMDAT ?toggle_kiowa_auto_target@@YGXXZ
_TEXT	SEGMENT
tv64 = -68						; size = 4
?toggle_kiowa_auto_target@@YGXXZ PROC			; toggle_kiowa_auto_target, COMDAT

; 429  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 44	 sub	 esp, 68			; 00000044H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 430  : 	switch (target_acquisition_system)

  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ?target_acquisition_system@@3W4TARGET_ACQUISITION_SYSTEMS@@A ; target_acquisition_system
  0000e	89 45 bc	 mov	 DWORD PTR tv64[ebp], eax

; 431  : 	{
; 432  : 		////////////////////////////////////////
; 433  : 		case TARGET_ACQUISITION_SYSTEM_OFF:
; 434  : 		////////////////////////////////////////
; 435  : 		{
; 436  : 			break;
; 437  : 		}
; 438  : 		////////////////////////////////////////
; 439  : 		case TARGET_ACQUISITION_SYSTEM_FLIR:
; 440  : 		////////////////////////////////////////
; 441  : 		{
; 442  : 			break;
; 443  : 		}
; 444  : 		////////////////////////////////////////
; 445  : 		case TARGET_ACQUISITION_SYSTEM_DTV:
; 446  : 		////////////////////////////////////////
; 447  : 		{
; 448  : 			break;
; 449  : 		}
; 450  : 		////////////////////////////////////////
; 451  : 	}
; 452  : }

  00011	5f		 pop	 edi
  00012	5e		 pop	 esi
  00013	5b		 pop	 ebx
  00014	8b e5		 mov	 esp, ebp
  00016	5d		 pop	 ebp
  00017	c3		 ret	 0
?toggle_kiowa_auto_target@@YGXXZ ENDP			; toggle_kiowa_auto_target
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\gunships\avionics\kiowa\ki_tgt.c
;	COMDAT ?toggle_kiowa_show_allied_targets@@YGXXZ
_TEXT	SEGMENT
tv64 = -68						; size = 4
?toggle_kiowa_show_allied_targets@@YGXXZ PROC		; toggle_kiowa_show_allied_targets, COMDAT

; 399  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 44	 sub	 esp, 68			; 00000044H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 400  : 	switch (target_acquisition_system)

  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ?target_acquisition_system@@3W4TARGET_ACQUISITION_SYSTEMS@@A ; target_acquisition_system
  0000e	89 45 bc	 mov	 DWORD PTR tv64[ebp], eax

; 401  : 	{
; 402  : 		////////////////////////////////////////
; 403  : 		case TARGET_ACQUISITION_SYSTEM_OFF:
; 404  : 		////////////////////////////////////////
; 405  : 		{
; 406  : 			break;
; 407  : 		}
; 408  : 		////////////////////////////////////////
; 409  : 		case TARGET_ACQUISITION_SYSTEM_FLIR:
; 410  : 		////////////////////////////////////////
; 411  : 		{
; 412  : 			break;
; 413  : 		}
; 414  : 		////////////////////////////////////////
; 415  : 		case TARGET_ACQUISITION_SYSTEM_DTV:
; 416  : 		////////////////////////////////////////
; 417  : 		{
; 418  : 			break;
; 419  : 		}
; 420  : 		////////////////////////////////////////
; 421  : 	}
; 422  : }

  00011	5f		 pop	 edi
  00012	5e		 pop	 esi
  00013	5b		 pop	 ebx
  00014	8b e5		 mov	 esp, ebp
  00016	5d		 pop	 ebp
  00017	c3		 ret	 0
?toggle_kiowa_show_allied_targets@@YGXXZ ENDP		; toggle_kiowa_show_allied_targets
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\gunships\avionics\kiowa\ki_tgt.c
;	COMDAT ?centre_kiowa_target_acquisition_system@@YGXXZ
_TEXT	SEGMENT
tv64 = -68						; size = 4
?centre_kiowa_target_acquisition_system@@YGXXZ PROC	; centre_kiowa_target_acquisition_system, COMDAT

; 365  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 44	 sub	 esp, 68			; 00000044H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 366  : 	switch (target_acquisition_system)

  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ?target_acquisition_system@@3W4TARGET_ACQUISITION_SYSTEMS@@A ; target_acquisition_system
  0000e	89 45 bc	 mov	 DWORD PTR tv64[ebp], eax
  00011	83 7d bc 03	 cmp	 DWORD PTR tv64[ebp], 3
  00015	74 0a		 je	 SHORT $LN5@centre_kio
  00017	83 7d bc 04	 cmp	 DWORD PTR tv64[ebp], 4
  0001b	74 0b		 je	 SHORT $LN6@centre_kio
  0001d	eb 0e		 jmp	 SHORT $LN1@centre_kio

; 367  : 	{
; 368  : 		////////////////////////////////////////
; 369  : 		case TARGET_ACQUISITION_SYSTEM_OFF:
; 370  : 		////////////////////////////////////////
; 371  : 		{
; 372  : 			break;

  0001f	eb 0c		 jmp	 SHORT $LN1@centre_kio
$LN5@centre_kio:

; 373  : 		}
; 374  : 		////////////////////////////////////////
; 375  : 		case TARGET_ACQUISITION_SYSTEM_FLIR:
; 376  : 		////////////////////////////////////////
; 377  : 		{
; 378  : 			centre_kiowa_eo ();

  00021	e8 00 00 00 00	 call	 ?centre_kiowa_eo@@YGXXZ	; centre_kiowa_eo

; 379  : 
; 380  : 			break;

  00026	eb 05		 jmp	 SHORT $LN1@centre_kio
$LN6@centre_kio:

; 381  : 		}
; 382  : 		////////////////////////////////////////
; 383  : 		case TARGET_ACQUISITION_SYSTEM_DTV:
; 384  : 		////////////////////////////////////////
; 385  : 		{
; 386  : 			centre_kiowa_eo ();

  00028	e8 00 00 00 00	 call	 ?centre_kiowa_eo@@YGXXZ	; centre_kiowa_eo
$LN1@centre_kio:

; 387  : 
; 388  : 			break;
; 389  : 		}
; 390  : 		////////////////////////////////////////
; 391  : 	}
; 392  : }

  0002d	5f		 pop	 edi
  0002e	5e		 pop	 esi
  0002f	5b		 pop	 ebx
  00030	8b e5		 mov	 esp, ebp
  00032	5d		 pop	 ebp
  00033	c3		 ret	 0
?centre_kiowa_target_acquisition_system@@YGXXZ ENDP	; centre_kiowa_target_acquisition_system
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\gunships\avionics\kiowa\ki_tgt.c
;	COMDAT ?update_kiowa_target_acquisition_system@@YGXXZ
_TEXT	SEGMENT
tv210 = -88						; size = 4
tv189 = -88						; size = 4
tv164 = -88						; size = 4
tv143 = -88						; size = 4
tv87 = -88						; size = 4
tv202 = -84						; size = 4
tv182 = -84						; size = 4
tv173 = -84						; size = 4
tv156 = -84						; size = 4
tv136 = -84						; size = 4
tv130 = -84						; size = 4
tv79 = -84						; size = 4
tv64 = -84						; size = 4
_los_to_target$1 = -16					; size = 4
_laser_on$2 = -12					; size = 4
_target$3 = -8						; size = 4
_source$4 = -4						; size = 4
?update_kiowa_target_acquisition_system@@YGXXZ PROC	; update_kiowa_target_acquisition_system, COMDAT

; 251  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 58	 sub	 esp, 88			; 00000058H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 252  : 	switch (target_acquisition_system)

  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ?target_acquisition_system@@3W4TARGET_ACQUISITION_SYSTEMS@@A ; target_acquisition_system
  0000e	89 45 ac	 mov	 DWORD PTR tv64[ebp], eax
  00011	83 7d ac 00	 cmp	 DWORD PTR tv64[ebp], 0
  00015	74 0e		 je	 SHORT $LN6@update_kio
  00017	83 7d ac 03	 cmp	 DWORD PTR tv64[ebp], 3
  0001b	74 25		 je	 SHORT $LN7@update_kio
  0001d	83 7d ac 04	 cmp	 DWORD PTR tv64[ebp], 4
  00021	74 37		 je	 SHORT $LN8@update_kio
  00023	eb 4b		 jmp	 SHORT $LN2@update_kio
$LN6@update_kio:

; 253  : 	{
; 254  : 		////////////////////////////////////////
; 255  : 		case TARGET_ACQUISITION_SYSTEM_OFF:
; 256  : 		////////////////////////////////////////
; 257  : 		{
; 258  : 			target_locked = FALSE;

  00025	c7 05 00 00 00
	00 00 00 00 00	 mov	 DWORD PTR ?target_locked@@3HA, 0 ; target_locked

; 259  : 
; 260  : 			update_weapon_lock_type (TARGET_ACQUISITION_SYSTEM_OFF);

  0002f	6a 00		 push	 0
  00031	e8 00 00 00 00	 call	 ?update_weapon_lock_type@@YGXW4TARGET_ACQUISITION_SYSTEMS@@@Z ; update_weapon_lock_type

; 261  : 
; 262  : 			slave_common_eo_to_current_target ();

  00036	e8 00 00 00 00	 call	 ?slave_common_eo_to_current_target@@YGXXZ ; slave_common_eo_to_current_target

; 263  : 
; 264  : 			slave_kiowa_eo_to_current_target ();

  0003b	e8 00 00 00 00	 call	 ?slave_kiowa_eo_to_current_target@@YGXXZ ; slave_kiowa_eo_to_current_target

; 265  : 
; 266  : 			break;

  00040	eb 2e		 jmp	 SHORT $LN2@update_kio
$LN7@update_kio:

; 267  : 		}
; 268  : 		////////////////////////////////////////
; 269  : 		case TARGET_ACQUISITION_SYSTEM_FLIR:
; 270  : 		////////////////////////////////////////
; 271  : 		{
; 272  : 			update_kiowa_eo (&kiowa_flir);

  00042	68 00 00 00 00	 push	 OFFSET ?kiowa_flir@@3UEO_PARAMS_DYNAMIC_MOVE@@A ; kiowa_flir
  00047	e8 00 00 00 00	 call	 ?update_kiowa_eo@@YGXPAUEO_PARAMS_DYNAMIC_MOVE@@@Z ; update_kiowa_eo

; 273  : 
; 274  : 			update_common_eo ();

  0004c	e8 00 00 00 00	 call	 ?update_common_eo@@YGXXZ ; update_common_eo

; 275  : 
; 276  : 			update_weapon_lock_type (TARGET_ACQUISITION_SYSTEM_FLIR);

  00051	6a 03		 push	 3
  00053	e8 00 00 00 00	 call	 ?update_weapon_lock_type@@YGXW4TARGET_ACQUISITION_SYSTEMS@@@Z ; update_weapon_lock_type

; 277  : 
; 278  : 			break;

  00058	eb 16		 jmp	 SHORT $LN2@update_kio
$LN8@update_kio:

; 279  : 		}
; 280  : 		////////////////////////////////////////
; 281  : 		case TARGET_ACQUISITION_SYSTEM_DTV:
; 282  : 		////////////////////////////////////////
; 283  : 		{
; 284  : 			update_kiowa_eo (&kiowa_dtv);

  0005a	68 00 00 00 00	 push	 OFFSET ?kiowa_dtv@@3UEO_PARAMS_DYNAMIC_MOVE@@A ; kiowa_dtv
  0005f	e8 00 00 00 00	 call	 ?update_kiowa_eo@@YGXPAUEO_PARAMS_DYNAMIC_MOVE@@@Z ; update_kiowa_eo

; 285  : 
; 286  : 			update_common_eo ();

  00064	e8 00 00 00 00	 call	 ?update_common_eo@@YGXXZ ; update_common_eo

; 287  : 
; 288  : 			update_weapon_lock_type (TARGET_ACQUISITION_SYSTEM_DTV);

  00069	6a 04		 push	 4
  0006b	e8 00 00 00 00	 call	 ?update_weapon_lock_type@@YGXW4TARGET_ACQUISITION_SYSTEMS@@@Z ; update_weapon_lock_type
$LN2@update_kio:

; 289  : 
; 290  : 			break;
; 291  : 		}
; 292  : 		////////////////////////////////////////
; 293  : 	}
; 294  : 
; 295  : 	////////////////////////////////////////
; 296  : 	//
; 297  : 	// radar / laser / los to target
; 298  : 	//
; 299  : 	////////////////////////////////////////
; 300  : 
; 301  : 	{
; 302  : 		entity
; 303  : 			*source,
; 304  : 			*target;
; 305  : 
; 306  : 		int
; 307  : 			laser_on,
; 308  : 			los_to_target;
; 309  : 
; 310  : 		source = get_gunship_entity ();

  00070	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gunship_entity@@3PAUENTITY@@A ; gunship_entity
  00075	89 45 fc	 mov	 DWORD PTR _source$4[ebp], eax

; 311  : 
; 312  : 		target = get_local_entity_parent (source, LIST_TYPE_TARGET);

  00078	83 7d fc 00	 cmp	 DWORD PTR _source$4[ebp], 0
  0007c	74 0a		 je	 SHORT $LN16@update_kio
  0007e	8b 45 fc	 mov	 eax, DWORD PTR _source$4[ebp]
  00081	8b 08		 mov	 ecx, DWORD PTR [eax]
  00083	89 4d ac	 mov	 DWORD PTR tv79[ebp], ecx
  00086	eb 21		 jmp	 SHORT $LN17@update_kio
$LN16@update_kio:
  00088	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??update_kiowa_target_acquisition_system@@YGXXZ@4JA
  0008e	83 c2 3d	 add	 edx, 61			; 0000003dH
  00091	52		 push	 edx
  00092	68 00 00 00 00	 push	 OFFSET ??_C@_0EN@LMEJKOIH@c?3?2users?2nhv90?2projects?2eech?2ap@
  00097	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  0009c	50		 push	 eax
  0009d	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  000a2	c7 45 ac 00 00
	00 00		 mov	 DWORD PTR tv79[ebp], 0
$LN17@update_kio:
  000a9	b9 01 00 00 00	 mov	 ecx, 1
  000ae	85 c9		 test	 ecx, ecx
  000b0	74 09		 je	 SHORT $LN18@update_kio
  000b2	c7 45 a8 26 00
	00 00		 mov	 DWORD PTR tv87[ebp], 38	; 00000026H
  000b9	eb 21		 jmp	 SHORT $LN19@update_kio
$LN18@update_kio:
  000bb	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??update_kiowa_target_acquisition_system@@YGXXZ@4JA
  000c1	83 c2 3d	 add	 edx, 61			; 0000003dH
  000c4	52		 push	 edx
  000c5	68 00 00 00 00	 push	 OFFSET ??_C@_0EN@LMEJKOIH@c?3?2users?2nhv90?2projects?2eech?2ap@
  000ca	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_list_type_message@@3PBDB ; overload_invalid_list_type_message
  000cf	50		 push	 eax
  000d0	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  000d5	c7 45 a8 00 00
	00 00		 mov	 DWORD PTR tv87[ebp], 0
$LN19@update_kio:
  000dc	6a 26		 push	 38			; 00000026H
  000de	8b 4d fc	 mov	 ecx, DWORD PTR _source$4[ebp]
  000e1	51		 push	 ecx
  000e2	69 55 ac b4 00
	00 00		 imul	 edx, DWORD PTR tv79[ebp], 180
  000e9	8b 45 a8	 mov	 eax, DWORD PTR tv87[ebp]
  000ec	8b 8c 82 00 00
	00 00		 mov	 ecx, DWORD PTR ?fn_get_local_entity_parent@@3PAY0CN@P6GPAUENTITY@@PAU1@W4LIST_TYPES@@@ZA[edx+eax*4]
  000f3	ff d1		 call	 ecx
  000f5	89 45 f8	 mov	 DWORD PTR _target$3[ebp], eax

; 313  : 
; 314  : 		//
; 315  : 		// laser on/off
; 316  : 		//
; 317  : 
; 318  : 		laser_on = laser_is_active() && !kiowa_damage.laser_designator;

  000f8	e8 00 00 00 00	 call	 ?laser_is_active@@YGHXZ	; laser_is_active
  000fd	85 c0		 test	 eax, eax
  000ff	74 16		 je	 SHORT $LN20@update_kio
  00101	a1 00 00 00 00	 mov	 eax, DWORD PTR ?kiowa_damage@@3TKIOWA_DAMAGE_FLAGS@@A ; kiowa_damage
  00106	c1 e8 02	 shr	 eax, 2
  00109	83 e0 01	 and	 eax, 1
  0010c	75 09		 jne	 SHORT $LN20@update_kio
  0010e	c7 45 ac 01 00
	00 00		 mov	 DWORD PTR tv130[ebp], 1
  00115	eb 07		 jmp	 SHORT $LN21@update_kio
$LN20@update_kio:
  00117	c7 45 ac 00 00
	00 00		 mov	 DWORD PTR tv130[ebp], 0
$LN21@update_kio:
  0011e	8b 4d ac	 mov	 ecx, DWORD PTR tv130[ebp]
  00121	89 4d f4	 mov	 DWORD PTR _laser_on$2[ebp], ecx

; 319  : 
; 320  : 		if (laser_on != get_local_entity_int_value (source, INT_TYPE_LASER_ON))

  00124	83 7d fc 00	 cmp	 DWORD PTR _source$4[ebp], 0
  00128	74 0a		 je	 SHORT $LN22@update_kio
  0012a	8b 45 fc	 mov	 eax, DWORD PTR _source$4[ebp]
  0012d	8b 08		 mov	 ecx, DWORD PTR [eax]
  0012f	89 4d ac	 mov	 DWORD PTR tv136[ebp], ecx
  00132	eb 1d		 jmp	 SHORT $LN23@update_kio
$LN22@update_kio:
  00134	68 40 01 00 00	 push	 320			; 00000140H
  00139	68 00 00 00 00	 push	 OFFSET ??_C@_0EN@LMEJKOIH@c?3?2users?2nhv90?2projects?2eech?2ap@
  0013e	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  00144	52		 push	 edx
  00145	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  0014a	c7 45 ac 00 00
	00 00		 mov	 DWORD PTR tv136[ebp], 0
$LN23@update_kio:
  00151	b8 01 00 00 00	 mov	 eax, 1
  00156	85 c0		 test	 eax, eax
  00158	74 09		 je	 SHORT $LN24@update_kio
  0015a	c7 45 a8 78 00
	00 00		 mov	 DWORD PTR tv143[ebp], 120 ; 00000078H
  00161	eb 1d		 jmp	 SHORT $LN25@update_kio
$LN24@update_kio:
  00163	68 40 01 00 00	 push	 320			; 00000140H
  00168	68 00 00 00 00	 push	 OFFSET ??_C@_0EN@LMEJKOIH@c?3?2users?2nhv90?2projects?2eech?2ap@
  0016d	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?overload_invalid_int_type_message@@3PBDB ; overload_invalid_int_type_message
  00173	51		 push	 ecx
  00174	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00179	c7 45 a8 00 00
	00 00		 mov	 DWORD PTR tv143[ebp], 0
$LN25@update_kio:
  00180	6a 78		 push	 120			; 00000078H
  00182	8b 55 fc	 mov	 edx, DWORD PTR _source$4[ebp]
  00185	52		 push	 edx
  00186	69 45 ac 5c 04
	00 00		 imul	 eax, DWORD PTR tv136[ebp], 1116
  0018d	8b 4d a8	 mov	 ecx, DWORD PTR tv143[ebp]
  00190	8b 94 88 00 00
	00 00		 mov	 edx, DWORD PTR ?fn_get_local_entity_int_value@@3PAY0BBH@P6GHPAUENTITY@@W4INT_TYPES@@@ZA[eax+ecx*4]
  00197	ff d2		 call	 edx
  00199	39 45 f4	 cmp	 DWORD PTR _laser_on$2[ebp], eax
  0019c	0f 84 89 00 00
	00		 je	 $LN9@update_kio

; 321  : 		{
; 322  : 			set_client_server_entity_int_value (source, INT_TYPE_LASER_ON, laser_on);

  001a2	83 7d fc 00	 cmp	 DWORD PTR _source$4[ebp], 0
  001a6	74 0a		 je	 SHORT $LN26@update_kio
  001a8	8b 45 fc	 mov	 eax, DWORD PTR _source$4[ebp]
  001ab	8b 08		 mov	 ecx, DWORD PTR [eax]
  001ad	89 4d ac	 mov	 DWORD PTR tv156[ebp], ecx
  001b0	eb 21		 jmp	 SHORT $LN27@update_kio
$LN26@update_kio:
  001b2	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??update_kiowa_target_acquisition_system@@YGXXZ@4JA
  001b8	83 c2 47	 add	 edx, 71			; 00000047H
  001bb	52		 push	 edx
  001bc	68 00 00 00 00	 push	 OFFSET ??_C@_0EN@LMEJKOIH@c?3?2users?2nhv90?2projects?2eech?2ap@
  001c1	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  001c6	50		 push	 eax
  001c7	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  001cc	c7 45 ac 00 00
	00 00		 mov	 DWORD PTR tv156[ebp], 0
$LN27@update_kio:
  001d3	b9 01 00 00 00	 mov	 ecx, 1
  001d8	85 c9		 test	 ecx, ecx
  001da	74 09		 je	 SHORT $LN28@update_kio
  001dc	c7 45 a8 78 00
	00 00		 mov	 DWORD PTR tv164[ebp], 120 ; 00000078H
  001e3	eb 21		 jmp	 SHORT $LN29@update_kio
$LN28@update_kio:
  001e5	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??update_kiowa_target_acquisition_system@@YGXXZ@4JA
  001eb	83 c2 47	 add	 edx, 71			; 00000047H
  001ee	52		 push	 edx
  001ef	68 00 00 00 00	 push	 OFFSET ??_C@_0EN@LMEJKOIH@c?3?2users?2nhv90?2projects?2eech?2ap@
  001f4	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_int_type_message@@3PBDB ; overload_invalid_int_type_message
  001f9	50		 push	 eax
  001fa	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  001ff	c7 45 a8 00 00
	00 00		 mov	 DWORD PTR tv164[ebp], 0
$LN29@update_kio:
  00206	8b 4d f4	 mov	 ecx, DWORD PTR _laser_on$2[ebp]
  00209	51		 push	 ecx
  0020a	6a 78		 push	 120			; 00000078H
  0020c	8b 55 fc	 mov	 edx, DWORD PTR _source$4[ebp]
  0020f	52		 push	 edx
  00210	69 45 ac b8 08
	00 00		 imul	 eax, DWORD PTR tv156[ebp], 2232
  00217	8b 4d a8	 mov	 ecx, DWORD PTR tv164[ebp]
  0021a	8d 94 c8 00 00
	00 00		 lea	 edx, DWORD PTR ?fn_set_client_server_entity_int_value@@3PAY1BBH@1P6GXPAUENTITY@@W4INT_TYPES@@H@ZA[eax+ecx*8]
  00221	a1 00 00 00 00	 mov	 eax, DWORD PTR ?system_comms_model@@3W4COMMS_MODEL_TYPES@@A ; system_comms_model
  00226	8b 0c 82	 mov	 ecx, DWORD PTR [edx+eax*4]
  00229	ff d1		 call	 ecx
$LN9@update_kio:

; 323  : 		}
; 324  : 
; 325  : 		//
; 326  : 		// line of sight to target
; 327  : 		//
; 328  : 
; 329  : 		if (target)

  0022b	83 7d f8 00	 cmp	 DWORD PTR _target$3[ebp], 0
  0022f	74 2e		 je	 SHORT $LN10@update_kio

; 330  : 		{
; 331  : 			switch (target_acquisition_system)

  00231	a1 00 00 00 00	 mov	 eax, DWORD PTR ?target_acquisition_system@@3W4TARGET_ACQUISITION_SYSTEMS@@A ; target_acquisition_system
  00236	89 45 ac	 mov	 DWORD PTR tv173[ebp], eax
  00239	83 7d ac 00	 cmp	 DWORD PTR tv173[ebp], 0
  0023d	74 0e		 je	 SHORT $LN12@update_kio
  0023f	83 7d ac 02	 cmp	 DWORD PTR tv173[ebp], 2
  00243	7e 18		 jle	 SHORT $LN4@update_kio
  00245	83 7d ac 04	 cmp	 DWORD PTR tv173[ebp], 4
  00249	7e 0b		 jle	 SHORT $LN13@update_kio
  0024b	eb 10		 jmp	 SHORT $LN4@update_kio
$LN12@update_kio:

; 332  : 			{
; 333  : 				case TARGET_ACQUISITION_SYSTEM_OFF:
; 334  : 				{
; 335  : 					los_to_target = FALSE;

  0024d	c7 45 f0 00 00
	00 00		 mov	 DWORD PTR _los_to_target$1[ebp], 0

; 336  : 
; 337  : 					break;

  00254	eb 07		 jmp	 SHORT $LN4@update_kio
$LN13@update_kio:

; 338  : 				}
; 339  : 				case TARGET_ACQUISITION_SYSTEM_FLIR:
; 340  : 				case TARGET_ACQUISITION_SYSTEM_DTV:
; 341  : 				{
; 342  : 					los_to_target = TRUE;

  00256	c7 45 f0 01 00
	00 00		 mov	 DWORD PTR _los_to_target$1[ebp], 1
$LN4@update_kio:

; 343  : 
; 344  : 					break;
; 345  : 				}
; 346  : 			}
; 347  : 		}
; 348  : 		else

  0025d	eb 07		 jmp	 SHORT $LN11@update_kio
$LN10@update_kio:

; 349  : 		{
; 350  : 			los_to_target = FALSE;

  0025f	c7 45 f0 00 00
	00 00		 mov	 DWORD PTR _los_to_target$1[ebp], 0
$LN11@update_kio:

; 351  : 		}
; 352  : 
; 353  : 		if (los_to_target != get_local_entity_int_value (source, INT_TYPE_LOS_TO_TARGET))

  00266	83 7d fc 00	 cmp	 DWORD PTR _source$4[ebp], 0
  0026a	74 0a		 je	 SHORT $LN30@update_kio
  0026c	8b 45 fc	 mov	 eax, DWORD PTR _source$4[ebp]
  0026f	8b 08		 mov	 ecx, DWORD PTR [eax]
  00271	89 4d ac	 mov	 DWORD PTR tv182[ebp], ecx
  00274	eb 1d		 jmp	 SHORT $LN31@update_kio
$LN30@update_kio:
  00276	68 61 01 00 00	 push	 353			; 00000161H
  0027b	68 00 00 00 00	 push	 OFFSET ??_C@_0EN@LMEJKOIH@c?3?2users?2nhv90?2projects?2eech?2ap@
  00280	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  00286	52		 push	 edx
  00287	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  0028c	c7 45 ac 00 00
	00 00		 mov	 DWORD PTR tv182[ebp], 0
$LN31@update_kio:
  00293	b8 01 00 00 00	 mov	 eax, 1
  00298	85 c0		 test	 eax, eax
  0029a	74 09		 je	 SHORT $LN32@update_kio
  0029c	c7 45 a8 80 00
	00 00		 mov	 DWORD PTR tv189[ebp], 128 ; 00000080H
  002a3	eb 1d		 jmp	 SHORT $LN33@update_kio
$LN32@update_kio:
  002a5	68 61 01 00 00	 push	 353			; 00000161H
  002aa	68 00 00 00 00	 push	 OFFSET ??_C@_0EN@LMEJKOIH@c?3?2users?2nhv90?2projects?2eech?2ap@
  002af	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?overload_invalid_int_type_message@@3PBDB ; overload_invalid_int_type_message
  002b5	51		 push	 ecx
  002b6	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  002bb	c7 45 a8 00 00
	00 00		 mov	 DWORD PTR tv189[ebp], 0
$LN33@update_kio:
  002c2	68 80 00 00 00	 push	 128			; 00000080H
  002c7	8b 55 fc	 mov	 edx, DWORD PTR _source$4[ebp]
  002ca	52		 push	 edx
  002cb	69 45 ac 5c 04
	00 00		 imul	 eax, DWORD PTR tv182[ebp], 1116
  002d2	8b 4d a8	 mov	 ecx, DWORD PTR tv189[ebp]
  002d5	8b 94 88 00 00
	00 00		 mov	 edx, DWORD PTR ?fn_get_local_entity_int_value@@3PAY0BBH@P6GHPAUENTITY@@W4INT_TYPES@@@ZA[eax+ecx*4]
  002dc	ff d2		 call	 edx
  002de	39 45 f0	 cmp	 DWORD PTR _los_to_target$1[ebp], eax
  002e1	0f 84 8c 00 00
	00		 je	 $LN1@update_kio

; 354  : 		{
; 355  : 			set_client_server_entity_int_value (source, INT_TYPE_LOS_TO_TARGET, los_to_target);

  002e7	83 7d fc 00	 cmp	 DWORD PTR _source$4[ebp], 0
  002eb	74 0a		 je	 SHORT $LN34@update_kio
  002ed	8b 45 fc	 mov	 eax, DWORD PTR _source$4[ebp]
  002f0	8b 08		 mov	 ecx, DWORD PTR [eax]
  002f2	89 4d ac	 mov	 DWORD PTR tv202[ebp], ecx
  002f5	eb 21		 jmp	 SHORT $LN35@update_kio
$LN34@update_kio:
  002f7	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??update_kiowa_target_acquisition_system@@YGXXZ@4JA
  002fd	83 c2 68	 add	 edx, 104		; 00000068H
  00300	52		 push	 edx
  00301	68 00 00 00 00	 push	 OFFSET ??_C@_0EN@LMEJKOIH@c?3?2users?2nhv90?2projects?2eech?2ap@
  00306	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  0030b	50		 push	 eax
  0030c	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00311	c7 45 ac 00 00
	00 00		 mov	 DWORD PTR tv202[ebp], 0
$LN35@update_kio:
  00318	b9 01 00 00 00	 mov	 ecx, 1
  0031d	85 c9		 test	 ecx, ecx
  0031f	74 09		 je	 SHORT $LN36@update_kio
  00321	c7 45 a8 80 00
	00 00		 mov	 DWORD PTR tv210[ebp], 128 ; 00000080H
  00328	eb 21		 jmp	 SHORT $LN37@update_kio
$LN36@update_kio:
  0032a	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??update_kiowa_target_acquisition_system@@YGXXZ@4JA
  00330	83 c2 68	 add	 edx, 104		; 00000068H
  00333	52		 push	 edx
  00334	68 00 00 00 00	 push	 OFFSET ??_C@_0EN@LMEJKOIH@c?3?2users?2nhv90?2projects?2eech?2ap@
  00339	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_int_type_message@@3PBDB ; overload_invalid_int_type_message
  0033e	50		 push	 eax
  0033f	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00344	c7 45 a8 00 00
	00 00		 mov	 DWORD PTR tv210[ebp], 0
$LN37@update_kio:
  0034b	8b 4d f0	 mov	 ecx, DWORD PTR _los_to_target$1[ebp]
  0034e	51		 push	 ecx
  0034f	68 80 00 00 00	 push	 128			; 00000080H
  00354	8b 55 fc	 mov	 edx, DWORD PTR _source$4[ebp]
  00357	52		 push	 edx
  00358	69 45 ac b8 08
	00 00		 imul	 eax, DWORD PTR tv202[ebp], 2232
  0035f	8b 4d a8	 mov	 ecx, DWORD PTR tv210[ebp]
  00362	8d 94 c8 00 00
	00 00		 lea	 edx, DWORD PTR ?fn_set_client_server_entity_int_value@@3PAY1BBH@1P6GXPAUENTITY@@W4INT_TYPES@@H@ZA[eax+ecx*8]
  00369	a1 00 00 00 00	 mov	 eax, DWORD PTR ?system_comms_model@@3W4COMMS_MODEL_TYPES@@A ; system_comms_model
  0036e	8b 0c 82	 mov	 ecx, DWORD PTR [edx+eax*4]
  00371	ff d1		 call	 ecx
$LN1@update_kio:

; 356  : 		}
; 357  : 	}
; 358  : }

  00373	5f		 pop	 edi
  00374	5e		 pop	 esi
  00375	5b		 pop	 ebx
  00376	8b e5		 mov	 esp, ebp
  00378	5d		 pop	 ebp
  00379	c3		 ret	 0
?update_kiowa_target_acquisition_system@@YGXXZ ENDP	; update_kiowa_target_acquisition_system
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\gunships\avionics\kiowa\ki_tgt.c
;	COMDAT ?select_kiowa_target_acquisition_system@@YGXW4TARGET_ACQUISITION_SYSTEMS@@@Z
_TEXT	SEGMENT
tv65 = -80						; size = 4
_damaged$ = -12						; size = 4
_old_system$ = -8					; size = 4
_new_system$ = -4					; size = 4
_system$ = 8						; size = 4
?select_kiowa_target_acquisition_system@@YGXW4TARGET_ACQUISITION_SYSTEMS@@@Z PROC ; select_kiowa_target_acquisition_system, COMDAT

; 151  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 50	 sub	 esp, 80			; 00000050H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 152  : 	target_acquisition_systems
; 153  : 		new_system,
; 154  : 		old_system;
; 155  : 
; 156  : 	int
; 157  : 		damaged;
; 158  : 
; 159  : 	new_system = system;

  00009	8b 45 08	 mov	 eax, DWORD PTR _system$[ebp]
  0000c	89 45 fc	 mov	 DWORD PTR _new_system$[ebp], eax

; 160  : 	old_system = target_acquisition_system;

  0000f	a1 00 00 00 00	 mov	 eax, DWORD PTR ?target_acquisition_system@@3W4TARGET_ACQUISITION_SYSTEMS@@A ; target_acquisition_system
  00014	89 45 f8	 mov	 DWORD PTR _old_system$[ebp], eax

; 161  : 
; 162  : 	damaged = FALSE;

  00017	c7 45 f4 00 00
	00 00		 mov	 DWORD PTR _damaged$[ebp], 0

; 163  : 
; 164  : 	reset_common_target_acquisition_system_keys ();

  0001e	e8 00 00 00 00	 call	 ?reset_common_target_acquisition_system_keys@@YGXXZ ; reset_common_target_acquisition_system_keys

; 165  : 
; 166  : 	deselect_kiowa_target_acquisition_system (target_acquisition_system);

  00023	a1 00 00 00 00	 mov	 eax, DWORD PTR ?target_acquisition_system@@3W4TARGET_ACQUISITION_SYSTEMS@@A ; target_acquisition_system
  00028	50		 push	 eax
  00029	e8 00 00 00 00	 call	 ?deselect_kiowa_target_acquisition_system@@YGXW4TARGET_ACQUISITION_SYSTEMS@@@Z ; deselect_kiowa_target_acquisition_system

; 167  : 
; 168  : 	switch (system)

  0002e	8b 45 08	 mov	 eax, DWORD PTR _system$[ebp]
  00031	89 45 b0	 mov	 DWORD PTR tv65[ebp], eax
  00034	83 7d b0 00	 cmp	 DWORD PTR tv65[ebp], 0
  00038	74 11		 je	 SHORT $LN4@select_kio
  0003a	83 7d b0 03	 cmp	 DWORD PTR tv65[ebp], 3
  0003e	74 2f		 je	 SHORT $LN6@select_kio
  00040	83 7d b0 04	 cmp	 DWORD PTR tv65[ebp], 4
  00044	74 78		 je	 SHORT $LN10@select_kio
  00046	e9 c6 00 00 00	 jmp	 $LN14@select_kio
$LN4@select_kio:

; 169  : 	{
; 170  : 		////////////////////////////////////////
; 171  : 		case TARGET_ACQUISITION_SYSTEM_OFF:
; 172  : 		////////////////////////////////////////
; 173  : 		{
; 174  : 			target_acquisition_system = system;

  0004b	8b 45 08	 mov	 eax, DWORD PTR _system$[ebp]
  0004e	a3 00 00 00 00	 mov	 DWORD PTR ?target_acquisition_system@@3W4TARGET_ACQUISITION_SYSTEMS@@A, eax ; target_acquisition_system

; 175  : 
; 176  : 			set_gunship_target (NULL);

  00053	6a 00		 push	 0
  00055	e8 00 00 00 00	 call	 ?set_gunship_target@@YGXPAUENTITY@@@Z ; set_gunship_target

; 177  : 
; 178  : 			if (!command_line_manual_laser_radar)

  0005a	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?command_line_manual_laser_radar@@3HA, 0 ; command_line_manual_laser_radar
  00061	75 07		 jne	 SHORT $LN5@select_kio

; 179  : 				set_laser_is_active(FALSE);

  00063	6a 00		 push	 0
  00065	e8 00 00 00 00	 call	 ?set_laser_is_active@@YGXH@Z ; set_laser_is_active
$LN5@select_kio:

; 180  : 
; 181  : 			#if 0
; 182  : 
; 183  : 			hud_mode = previous_hud_mode;
; 184  : 
; 185  : 			#endif
; 186  : 
; 187  : 			break;

  0006a	e9 b3 00 00 00	 jmp	 $LN2@select_kio
$LN6@select_kio:

; 188  : 		}
; 189  : 		////////////////////////////////////////
; 190  : 		case TARGET_ACQUISITION_SYSTEM_FLIR:
; 191  : 		////////////////////////////////////////
; 192  : 		{
; 193  : 			if (!kiowa_damage.flir)

  0006f	a1 00 00 00 00	 mov	 eax, DWORD PTR ?kiowa_damage@@3TKIOWA_DAMAGE_FLAGS@@A ; kiowa_damage
  00074	83 e0 01	 and	 eax, 1
  00077	75 38		 jne	 SHORT $LN7@select_kio

; 194  : 			{
; 195  : 				target_acquisition_system = system;

  00079	8b 45 08	 mov	 eax, DWORD PTR _system$[ebp]
  0007c	a3 00 00 00 00	 mov	 DWORD PTR ?target_acquisition_system@@3W4TARGET_ACQUISITION_SYSTEMS@@A, eax ; target_acquisition_system

; 196  : 
; 197  : 				activate_common_eo ();

  00081	e8 00 00 00 00	 call	 ?activate_common_eo@@YGXXZ ; activate_common_eo

; 198  : 
; 199  : 				if (command_line_targeting_system_auto_page)

  00086	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?command_line_targeting_system_auto_page@@3HA, 0 ; command_line_targeting_system_auto_page
  0008d	74 05		 je	 SHORT $LN8@select_kio

; 200  : 					select_kiowa_tads_main_mfd ();

  0008f	e8 00 00 00 00	 call	 ?select_kiowa_tads_main_mfd@@YGXXZ ; select_kiowa_tads_main_mfd
$LN8@select_kio:

; 201  : 
; 202  : 				if (hud_mode != HUD_MODE_WEAPON)

  00094	83 3d 00 00 00
	00 02		 cmp	 DWORD PTR ?hud_mode@@3W4HUD_MODES@@A, 2 ; hud_mode
  0009b	74 0a		 je	 SHORT $LN9@select_kio

; 203  : 					previous_hud_mode = hud_mode;

  0009d	a1 00 00 00 00	 mov	 eax, DWORD PTR ?hud_mode@@3W4HUD_MODES@@A ; hud_mode
  000a2	a3 00 00 00 00	 mov	 DWORD PTR ?previous_hud_mode@@3W4HUD_MODES@@A, eax ; previous_hud_mode
$LN9@select_kio:

; 204  : 				hud_mode = HUD_MODE_WEAPON;

  000a7	c7 05 00 00 00
	00 02 00 00 00	 mov	 DWORD PTR ?hud_mode@@3W4HUD_MODES@@A, 2 ; hud_mode
$LN7@select_kio:

; 205  : 			}
; 206  : 
; 207  : 			damaged = kiowa_damage.flir;

  000b1	a1 00 00 00 00	 mov	 eax, DWORD PTR ?kiowa_damage@@3TKIOWA_DAMAGE_FLAGS@@A ; kiowa_damage
  000b6	83 e0 01	 and	 eax, 1
  000b9	89 45 f4	 mov	 DWORD PTR _damaged$[ebp], eax

; 208  : 
; 209  : 			break;

  000bc	eb 64		 jmp	 SHORT $LN2@select_kio
$LN10@select_kio:

; 210  : 		}
; 211  : 		////////////////////////////////////////
; 212  : 		case TARGET_ACQUISITION_SYSTEM_DTV:
; 213  : 		////////////////////////////////////////
; 214  : 		{
; 215  : 			if (!kiowa_damage.dtv)

  000be	a1 00 00 00 00	 mov	 eax, DWORD PTR ?kiowa_damage@@3TKIOWA_DAMAGE_FLAGS@@A ; kiowa_damage
  000c3	d1 e8		 shr	 eax, 1
  000c5	83 e0 01	 and	 eax, 1
  000c8	75 38		 jne	 SHORT $LN11@select_kio

; 216  : 			{
; 217  : 				target_acquisition_system = system;

  000ca	8b 45 08	 mov	 eax, DWORD PTR _system$[ebp]
  000cd	a3 00 00 00 00	 mov	 DWORD PTR ?target_acquisition_system@@3W4TARGET_ACQUISITION_SYSTEMS@@A, eax ; target_acquisition_system

; 218  : 
; 219  : 				activate_common_eo ();

  000d2	e8 00 00 00 00	 call	 ?activate_common_eo@@YGXXZ ; activate_common_eo

; 220  : 
; 221  : 				if (command_line_targeting_system_auto_page)

  000d7	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?command_line_targeting_system_auto_page@@3HA, 0 ; command_line_targeting_system_auto_page
  000de	74 05		 je	 SHORT $LN12@select_kio

; 222  : 					select_kiowa_tads_main_mfd ();

  000e0	e8 00 00 00 00	 call	 ?select_kiowa_tads_main_mfd@@YGXXZ ; select_kiowa_tads_main_mfd
$LN12@select_kio:

; 223  : 
; 224  : 				if (hud_mode != HUD_MODE_WEAPON)

  000e5	83 3d 00 00 00
	00 02		 cmp	 DWORD PTR ?hud_mode@@3W4HUD_MODES@@A, 2 ; hud_mode
  000ec	74 0a		 je	 SHORT $LN13@select_kio

; 225  : 					previous_hud_mode = hud_mode;

  000ee	a1 00 00 00 00	 mov	 eax, DWORD PTR ?hud_mode@@3W4HUD_MODES@@A ; hud_mode
  000f3	a3 00 00 00 00	 mov	 DWORD PTR ?previous_hud_mode@@3W4HUD_MODES@@A, eax ; previous_hud_mode
$LN13@select_kio:

; 226  : 				hud_mode = HUD_MODE_WEAPON;

  000f8	c7 05 00 00 00
	00 02 00 00 00	 mov	 DWORD PTR ?hud_mode@@3W4HUD_MODES@@A, 2 ; hud_mode
$LN11@select_kio:

; 227  : 			}
; 228  : 
; 229  : 			damaged = kiowa_damage.dtv;

  00102	a1 00 00 00 00	 mov	 eax, DWORD PTR ?kiowa_damage@@3TKIOWA_DAMAGE_FLAGS@@A ; kiowa_damage
  00107	d1 e8		 shr	 eax, 1
  00109	83 e0 01	 and	 eax, 1
  0010c	89 45 f4	 mov	 DWORD PTR _damaged$[ebp], eax

; 230  : 
; 231  : 			break;

  0010f	eb 11		 jmp	 SHORT $LN2@select_kio
$LN14@select_kio:

; 232  : 		}
; 233  : 		////////////////////////////////////////
; 234  : 		default:
; 235  : 		////////////////////////////////////////
; 236  : 		{
; 237  : 			debug_fatal ("Invalid target acquisition system = %d", system);

  00111	8b 45 08	 mov	 eax, DWORD PTR _system$[ebp]
  00114	50		 push	 eax
  00115	68 00 00 00 00	 push	 OFFSET ??_C@_0CH@DDKDNBNH@Invalid?5target?5acquisition?5syst@
  0011a	e8 00 00 00 00	 call	 ?debug_fatal@@YAXPBDZZ	; debug_fatal
  0011f	83 c4 08	 add	 esp, 8
$LN2@select_kio:

; 238  : 
; 239  : 			break;
; 240  : 		}
; 241  : 	}
; 242  : 
; 243  : 	play_common_cpg_target_acquisition_system_speech (new_system, old_system, damaged);

  00122	8b 45 f4	 mov	 eax, DWORD PTR _damaged$[ebp]
  00125	50		 push	 eax
  00126	8b 4d f8	 mov	 ecx, DWORD PTR _old_system$[ebp]
  00129	51		 push	 ecx
  0012a	8b 55 fc	 mov	 edx, DWORD PTR _new_system$[ebp]
  0012d	52		 push	 edx
  0012e	e8 00 00 00 00	 call	 ?play_common_cpg_target_acquisition_system_speech@@YGXW4TARGET_ACQUISITION_SYSTEMS@@0H@Z ; play_common_cpg_target_acquisition_system_speech

; 244  : }

  00133	5f		 pop	 edi
  00134	5e		 pop	 esi
  00135	5b		 pop	 ebx
  00136	8b e5		 mov	 esp, ebp
  00138	5d		 pop	 ebp
  00139	c2 04 00	 ret	 4
?select_kiowa_target_acquisition_system@@YGXW4TARGET_ACQUISITION_SYSTEMS@@@Z ENDP ; select_kiowa_target_acquisition_system
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\gunships\avionics\kiowa\ki_tgt.c
;	COMDAT ?deinitialise_kiowa_target_acquisition_systems@@YGXXZ
_TEXT	SEGMENT
?deinitialise_kiowa_target_acquisition_systems@@YGXXZ PROC ; deinitialise_kiowa_target_acquisition_systems, COMDAT

; 91   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 92   : 	deinitialise_kiowa_eo ();

  00009	e8 00 00 00 00	 call	 ?deinitialise_kiowa_eo@@YGXXZ ; deinitialise_kiowa_eo

; 93   : 
; 94   : 	deinitialise_kiowa_hms ();

  0000e	e8 00 00 00 00	 call	 ?deinitialise_kiowa_hms@@YGXXZ ; deinitialise_kiowa_hms

; 95   : }

  00013	5f		 pop	 edi
  00014	5e		 pop	 esi
  00015	5b		 pop	 ebx
  00016	8b e5		 mov	 esp, ebp
  00018	5d		 pop	 ebp
  00019	c3		 ret	 0
?deinitialise_kiowa_target_acquisition_systems@@YGXXZ ENDP ; deinitialise_kiowa_target_acquisition_systems
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\gunships\avionics\kiowa\ki_tgt.c
;	COMDAT ?initialise_kiowa_target_acquisition_systems@@YGXXZ
_TEXT	SEGMENT
?initialise_kiowa_target_acquisition_systems@@YGXXZ PROC ; initialise_kiowa_target_acquisition_systems, COMDAT

; 80   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 81   : 	initialise_kiowa_eo ();

  00009	e8 00 00 00 00	 call	 ?initialise_kiowa_eo@@YGXXZ ; initialise_kiowa_eo

; 82   : 
; 83   : 	initialise_kiowa_hms ();

  0000e	e8 00 00 00 00	 call	 ?initialise_kiowa_hms@@YGXXZ ; initialise_kiowa_hms

; 84   : }

  00013	5f		 pop	 edi
  00014	5e		 pop	 esi
  00015	5b		 pop	 ebx
  00016	8b e5		 mov	 esp, ebp
  00018	5d		 pop	 ebp
  00019	c3		 ret	 0
?initialise_kiowa_target_acquisition_systems@@YGXXZ ENDP ; initialise_kiowa_target_acquisition_systems
_TEXT	ENDS
END
