; Listing generated by Microsoft (R) Optimizing Compiler Version 19.16.27045.0 

	TITLE	C:\Users\nhv90\Projects\eech\modules\userint2\ui_obj\menu\menu.c
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB MSVCRTD
INCLUDELIB OLDNAMES

PUBLIC	?current_menu@@3PAUUI_OBJECT@@A			; current_menu
_BSS	SEGMENT
?current_menu@@3PAUUI_OBJECT@@A DD 01H DUP (?)		; current_menu
_BSS	ENDS
PUBLIC	?push_ui_menu@@YGXPAUUI_OBJECT@@0@Z		; push_ui_menu
PUBLIC	?pop_ui_menu@@YGHPAUUI_OBJECT@@@Z		; pop_ui_menu
PUBLIC	?__LINE__Var@?0??push_ui_menu@@YGXPAUUI_OBJECT@@0@Z@4JA ; `push_ui_menu'::`1'::__LINE__Var
PUBLIC	??_C@_0EB@DGAOEODL@c?3?2users?2nhv90?2projects?2eech?2mo@ ; `string'
PUBLIC	??_C@_0CH@EKDDBELO@this_stack?9?$DOtype?5?$DN?$DN?5UI_TYPE_MEN@ ; `string'
EXTRN	?process_assert@@YGXPBD0H@Z:PROC		; process_assert
EXTRN	?fn_set_ui_object_drawable@@3PAP6GXPAUUI_OBJECT@@H@ZA:BYTE ; fn_set_ui_object_drawable
_BSS	SEGMENT
?menu_stack_size@@3HA DD 01H DUP (?)			; menu_stack_size
_BSS	ENDS
;	COMDAT ??_C@_0CH@EKDDBELO@this_stack?9?$DOtype?5?$DN?$DN?5UI_TYPE_MEN@
CONST	SEGMENT
??_C@_0CH@EKDDBELO@this_stack?9?$DOtype?5?$DN?$DN?5UI_TYPE_MEN@ DB 'this_'
	DB	'stack->type == UI_TYPE_MENU_STACK', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_0EB@DGAOEODL@c?3?2users?2nhv90?2projects?2eech?2mo@
CONST	SEGMENT
??_C@_0EB@DGAOEODL@c?3?2users?2nhv90?2projects?2eech?2mo@ DB 'c:\users\nh'
	DB	'v90\projects\eech\modules\userint2\ui_obj\menu\menu.c', 00H ; `string'
CONST	ENDS
;	COMDAT ?__LINE__Var@?0??push_ui_menu@@YGXPAUUI_OBJECT@@0@Z@4JA
_DATA	SEGMENT
?__LINE__Var@?0??push_ui_menu@@YGXPAUUI_OBJECT@@0@Z@4JA DD 054H ; `push_ui_menu'::`1'::__LINE__Var
_DATA	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\modules\userint2\ui_obj\menu\menu.c
;	COMDAT ?pop_ui_menu@@YGHPAUUI_OBJECT@@@Z
_TEXT	SEGMENT
_stack_head$ = -4					; size = 4
_this_stack$ = 8					; size = 4
?pop_ui_menu@@YGHPAUUI_OBJECT@@@Z PROC			; pop_ui_menu, COMDAT

; 170  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 44	 sub	 esp, 68			; 00000044H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 171  : 
; 172  : 	ui_object
; 173  : 		*stack_head;
; 174  : 
; 175  : 	// store menu to pop and unlink it and destroy it.
; 176  : 
; 177  : 	stack_head = this_stack->stack_head;

  00009	8b 45 08	 mov	 eax, DWORD PTR _this_stack$[ebp]
  0000c	8b 48 10	 mov	 ecx, DWORD PTR [eax+16]
  0000f	89 4d fc	 mov	 DWORD PTR _stack_head$[ebp], ecx

; 178  : 
; 179  : 	if (stack_head)

  00012	83 7d fc 00	 cmp	 DWORD PTR _stack_head$[ebp], 0
  00016	74 5f		 je	 SHORT $LN2@pop_ui_men

; 180  : 	{
; 181  : 	
; 182  : 		set_ui_object_drawable (stack_head, FALSE);

  00018	6a 00		 push	 0
  0001a	8b 45 fc	 mov	 eax, DWORD PTR _stack_head$[ebp]
  0001d	50		 push	 eax
  0001e	8b 4d fc	 mov	 ecx, DWORD PTR _stack_head$[ebp]
  00021	8b 11		 mov	 edx, DWORD PTR [ecx]
  00023	8b 04 95 00 00
	00 00		 mov	 eax, DWORD PTR ?fn_set_ui_object_drawable@@3PAP6GXPAUUI_OBJECT@@H@ZA[edx*4]
  0002a	ff d0		 call	 eax

; 183  : 
; 184  : 		stack_head = stack_head->stack_next;

  0002c	8b 45 fc	 mov	 eax, DWORD PTR _stack_head$[ebp]
  0002f	8b 48 14	 mov	 ecx, DWORD PTR [eax+20]
  00032	89 4d fc	 mov	 DWORD PTR _stack_head$[ebp], ecx

; 185  : 
; 186  : 		this_stack->stack_head = stack_head;

  00035	8b 45 08	 mov	 eax, DWORD PTR _this_stack$[ebp]
  00038	8b 4d fc	 mov	 ecx, DWORD PTR _stack_head$[ebp]
  0003b	89 48 10	 mov	 DWORD PTR [eax+16], ecx

; 187  : 	
; 188  : 		if (stack_head)

  0003e	83 7d fc 00	 cmp	 DWORD PTR _stack_head$[ebp], 0
  00042	74 20		 je	 SHORT $LN4@pop_ui_men

; 189  : 		{
; 190  : 
; 191  : 			stack_head->stack_prev = NULL;

  00044	8b 45 fc	 mov	 eax, DWORD PTR _stack_head$[ebp]
  00047	c7 40 18 00 00
	00 00		 mov	 DWORD PTR [eax+24], 0

; 192  : 
; 193  : 			set_ui_object_drawable (stack_head, TRUE);

  0004e	6a 01		 push	 1
  00050	8b 45 fc	 mov	 eax, DWORD PTR _stack_head$[ebp]
  00053	50		 push	 eax
  00054	8b 4d fc	 mov	 ecx, DWORD PTR _stack_head$[ebp]
  00057	8b 11		 mov	 edx, DWORD PTR [ecx]
  00059	8b 04 95 00 00
	00 00		 mov	 eax, DWORD PTR ?fn_set_ui_object_drawable@@3PAP6GXPAUUI_OBJECT@@H@ZA[edx*4]
  00060	ff d0		 call	 eax

; 194  : 		}
; 195  : 		else

  00062	eb 04		 jmp	 SHORT $LN5@pop_ui_men
$LN4@pop_ui_men:

; 196  : 		{
; 197  : 
; 198  : 			// empty stack
; 199  : 
; 200  : 			return FALSE;

  00064	33 c0		 xor	 eax, eax
  00066	eb 18		 jmp	 SHORT $LN1@pop_ui_men
$LN5@pop_ui_men:

; 201  : 		}
; 202  : 
; 203  : 		menu_stack_size --;

  00068	a1 00 00 00 00	 mov	 eax, DWORD PTR ?menu_stack_size@@3HA
  0006d	83 e8 01	 sub	 eax, 1
  00070	a3 00 00 00 00	 mov	 DWORD PTR ?menu_stack_size@@3HA, eax

; 204  : 	}
; 205  : 	else

  00075	eb 04		 jmp	 SHORT $LN3@pop_ui_men
$LN2@pop_ui_men:

; 206  : 	{
; 207  : 
; 208  : 		return FALSE;

  00077	33 c0		 xor	 eax, eax
  00079	eb 05		 jmp	 SHORT $LN1@pop_ui_men
$LN3@pop_ui_men:

; 209  : 	}
; 210  : 
; 211  : 	return TRUE;

  0007b	b8 01 00 00 00	 mov	 eax, 1
$LN1@pop_ui_men:

; 212  : }

  00080	5f		 pop	 edi
  00081	5e		 pop	 esi
  00082	5b		 pop	 ebx
  00083	8b e5		 mov	 esp, ebp
  00085	5d		 pop	 ebp
  00086	c2 04 00	 ret	 4
?pop_ui_menu@@YGHPAUUI_OBJECT@@@Z ENDP			; pop_ui_menu
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\modules\userint2\ui_obj\menu\menu.c
;	COMDAT ?push_ui_menu@@YGXPAUUI_OBJECT@@0@Z
_TEXT	SEGMENT
_stack_search$ = -8					; size = 4
_stack_head$ = -4					; size = 4
_this_stack$ = 8					; size = 4
_obj$ = 12						; size = 4
?push_ui_menu@@YGXPAUUI_OBJECT@@0@Z PROC		; push_ui_menu, COMDAT

; 84   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 48	 sub	 esp, 72			; 00000048H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 85   : 
; 86   : 	ui_object
; 87   : 		*stack_head,
; 88   : 		*stack_search;
; 89   : 
; 90   : 	ASSERT (this_stack->type == UI_TYPE_MENU_STACK);

  00009	8b 45 08	 mov	 eax, DWORD PTR _this_stack$[ebp]
  0000c	83 38 0f	 cmp	 DWORD PTR [eax], 15	; 0000000fH
  0000f	74 18		 je	 SHORT $LN6@push_ui_me
  00011	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??push_ui_menu@@YGXPAUUI_OBJECT@@0@Z@4JA
  00016	83 c0 06	 add	 eax, 6
  00019	50		 push	 eax
  0001a	68 00 00 00 00	 push	 OFFSET ??_C@_0EB@DGAOEODL@c?3?2users?2nhv90?2projects?2eech?2mo@
  0001f	68 00 00 00 00	 push	 OFFSET ??_C@_0CH@EKDDBELO@this_stack?9?$DOtype?5?$DN?$DN?5UI_TYPE_MEN@
  00024	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN6@push_ui_me:

; 91   : 
; 92   : 	// check if already on stack
; 93   : 
; 94   : 	stack_head = this_stack->stack_head;

  00029	8b 45 08	 mov	 eax, DWORD PTR _this_stack$[ebp]
  0002c	8b 48 10	 mov	 ecx, DWORD PTR [eax+16]
  0002f	89 4d fc	 mov	 DWORD PTR _stack_head$[ebp], ecx

; 95   : 
; 96   : 	stack_search = stack_head;

  00032	8b 45 fc	 mov	 eax, DWORD PTR _stack_head$[ebp]
  00035	89 45 f8	 mov	 DWORD PTR _stack_search$[ebp], eax
$LN2@push_ui_me:

; 97   : 
; 98   : 	while (stack_search)

  00038	83 7d f8 00	 cmp	 DWORD PTR _stack_search$[ebp], 0
  0003c	74 3a		 je	 SHORT $LN3@push_ui_me

; 99   : 	{
; 100  : 
; 101  : 		// menu found on stack
; 102  : 
; 103  : 		if (stack_search == obj)

  0003e	8b 45 f8	 mov	 eax, DWORD PTR _stack_search$[ebp]
  00041	3b 45 0c	 cmp	 eax, DWORD PTR _obj$[ebp]
  00044	75 27		 jne	 SHORT $LN7@push_ui_me

; 104  : 		{
; 105  : 
; 106  : 			// pop all down to this menu
; 107  : 
; 108  : 			stack_search = stack_head;

  00046	8b 45 fc	 mov	 eax, DWORD PTR _stack_head$[ebp]
  00049	89 45 f8	 mov	 DWORD PTR _stack_search$[ebp], eax
$LN4@push_ui_me:

; 109  : 
; 110  : 			while (stack_search != obj)

  0004c	8b 45 f8	 mov	 eax, DWORD PTR _stack_search$[ebp]
  0004f	3b 45 0c	 cmp	 eax, DWORD PTR _obj$[ebp]
  00052	74 14		 je	 SHORT $LN5@push_ui_me

; 111  : 			{
; 112  : 
; 113  : 				pop_ui_menu (this_stack);

  00054	8b 45 08	 mov	 eax, DWORD PTR _this_stack$[ebp]
  00057	50		 push	 eax
  00058	e8 00 00 00 00	 call	 ?pop_ui_menu@@YGHPAUUI_OBJECT@@@Z ; pop_ui_menu

; 114  : 
; 115  : 				stack_search = stack_search->stack_next;

  0005d	8b 45 f8	 mov	 eax, DWORD PTR _stack_search$[ebp]
  00060	8b 48 14	 mov	 ecx, DWORD PTR [eax+20]
  00063	89 4d f8	 mov	 DWORD PTR _stack_search$[ebp], ecx

; 116  : 			}

  00066	eb e4		 jmp	 SHORT $LN4@push_ui_me
$LN5@push_ui_me:

; 117  : 	
; 118  : 			return;

  00068	e9 dd 00 00 00	 jmp	 $LN1@push_ui_me
$LN7@push_ui_me:

; 119  : 		}
; 120  : 
; 121  : 		stack_search = stack_search->stack_next;

  0006d	8b 45 f8	 mov	 eax, DWORD PTR _stack_search$[ebp]
  00070	8b 48 14	 mov	 ecx, DWORD PTR [eax+20]
  00073	89 4d f8	 mov	 DWORD PTR _stack_search$[ebp], ecx

; 122  : 	}

  00076	eb c0		 jmp	 SHORT $LN2@push_ui_me
$LN3@push_ui_me:

; 123  : 
; 124  : 	// add new menu
; 125  : 
; 126  : 	obj->stack_next = stack_head;

  00078	8b 45 0c	 mov	 eax, DWORD PTR _obj$[ebp]
  0007b	8b 4d fc	 mov	 ecx, DWORD PTR _stack_head$[ebp]
  0007e	89 48 14	 mov	 DWORD PTR [eax+20], ecx

; 127  : 
; 128  : 	// first menu on stack
; 129  : 
; 130  : 	if (!stack_head)

  00081	83 7d fc 00	 cmp	 DWORD PTR _stack_head$[ebp], 0
  00085	75 59		 jne	 SHORT $LN8@push_ui_me

; 131  : 	{
; 132  : 
; 133  : 		this_stack->stack_head = obj;

  00087	8b 45 08	 mov	 eax, DWORD PTR _this_stack$[ebp]
  0008a	8b 4d 0c	 mov	 ecx, DWORD PTR _obj$[ebp]
  0008d	89 48 10	 mov	 DWORD PTR [eax+16], ecx

; 134  : 
; 135  : 		stack_head = this_stack->stack_head;

  00090	8b 45 08	 mov	 eax, DWORD PTR _this_stack$[ebp]
  00093	8b 48 10	 mov	 ecx, DWORD PTR [eax+16]
  00096	89 4d fc	 mov	 DWORD PTR _stack_head$[ebp], ecx

; 136  : 
; 137  : 		obj->stack_prev = NULL;

  00099	8b 45 0c	 mov	 eax, DWORD PTR _obj$[ebp]
  0009c	c7 40 18 00 00
	00 00		 mov	 DWORD PTR [eax+24], 0

; 138  : 
; 139  : 		obj->stack_next = NULL;

  000a3	8b 45 0c	 mov	 eax, DWORD PTR _obj$[ebp]
  000a6	c7 40 14 00 00
	00 00		 mov	 DWORD PTR [eax+20], 0

; 140  : 
; 141  : 		stack_head->stack_id = menu_stack_size ++;

  000ad	8b 45 fc	 mov	 eax, DWORD PTR _stack_head$[ebp]
  000b0	66 8b 0d 00 00
	00 00		 mov	 cx, WORD PTR ?menu_stack_size@@3HA
  000b7	66 89 48 1c	 mov	 WORD PTR [eax+28], cx
  000bb	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?menu_stack_size@@3HA
  000c1	83 c2 01	 add	 edx, 1
  000c4	89 15 00 00 00
	00		 mov	 DWORD PTR ?menu_stack_size@@3HA, edx

; 142  : 
; 143  : 		set_ui_object_drawable (stack_head, TRUE);

  000ca	6a 01		 push	 1
  000cc	8b 45 fc	 mov	 eax, DWORD PTR _stack_head$[ebp]
  000cf	50		 push	 eax
  000d0	8b 4d fc	 mov	 ecx, DWORD PTR _stack_head$[ebp]
  000d3	8b 11		 mov	 edx, DWORD PTR [ecx]
  000d5	8b 04 95 00 00
	00 00		 mov	 eax, DWORD PTR ?fn_set_ui_object_drawable@@3PAP6GXPAUUI_OBJECT@@H@ZA[edx*4]
  000dc	ff d0		 call	 eax

; 144  : 
; 145  : 		return;

  000de	eb 6a		 jmp	 SHORT $LN1@push_ui_me
$LN8@push_ui_me:

; 146  : 	}
; 147  : 
; 148  : 	// add menu to head of stack
; 149  : 
; 150  : 	set_ui_object_drawable (stack_head, FALSE);

  000e0	6a 00		 push	 0
  000e2	8b 45 fc	 mov	 eax, DWORD PTR _stack_head$[ebp]
  000e5	50		 push	 eax
  000e6	8b 4d fc	 mov	 ecx, DWORD PTR _stack_head$[ebp]
  000e9	8b 11		 mov	 edx, DWORD PTR [ecx]
  000eb	8b 04 95 00 00
	00 00		 mov	 eax, DWORD PTR ?fn_set_ui_object_drawable@@3PAP6GXPAUUI_OBJECT@@H@ZA[edx*4]
  000f2	ff d0		 call	 eax

; 151  : 
; 152  : 	stack_head->stack_prev = obj;

  000f4	8b 45 fc	 mov	 eax, DWORD PTR _stack_head$[ebp]
  000f7	8b 4d 0c	 mov	 ecx, DWORD PTR _obj$[ebp]
  000fa	89 48 18	 mov	 DWORD PTR [eax+24], ecx

; 153  : 
; 154  : 	this_stack->stack_head = obj;

  000fd	8b 45 08	 mov	 eax, DWORD PTR _this_stack$[ebp]
  00100	8b 4d 0c	 mov	 ecx, DWORD PTR _obj$[ebp]
  00103	89 48 10	 mov	 DWORD PTR [eax+16], ecx

; 155  : 
; 156  : 	stack_head = this_stack->stack_head;

  00106	8b 45 08	 mov	 eax, DWORD PTR _this_stack$[ebp]
  00109	8b 48 10	 mov	 ecx, DWORD PTR [eax+16]
  0010c	89 4d fc	 mov	 DWORD PTR _stack_head$[ebp], ecx

; 157  : 
; 158  : 	stack_head->stack_id = menu_stack_size ++;

  0010f	8b 45 fc	 mov	 eax, DWORD PTR _stack_head$[ebp]
  00112	66 8b 0d 00 00
	00 00		 mov	 cx, WORD PTR ?menu_stack_size@@3HA
  00119	66 89 48 1c	 mov	 WORD PTR [eax+28], cx
  0011d	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?menu_stack_size@@3HA
  00123	83 c2 01	 add	 edx, 1
  00126	89 15 00 00 00
	00		 mov	 DWORD PTR ?menu_stack_size@@3HA, edx

; 159  : 
; 160  : 	set_ui_object_drawable (stack_head, TRUE);

  0012c	6a 01		 push	 1
  0012e	8b 45 fc	 mov	 eax, DWORD PTR _stack_head$[ebp]
  00131	50		 push	 eax
  00132	8b 4d fc	 mov	 ecx, DWORD PTR _stack_head$[ebp]
  00135	8b 11		 mov	 edx, DWORD PTR [ecx]
  00137	8b 04 95 00 00
	00 00		 mov	 eax, DWORD PTR ?fn_set_ui_object_drawable@@3PAP6GXPAUUI_OBJECT@@H@ZA[edx*4]
  0013e	ff d0		 call	 eax

; 161  : 
; 162  : 	obj->stack_prev = NULL;

  00140	8b 45 0c	 mov	 eax, DWORD PTR _obj$[ebp]
  00143	c7 40 18 00 00
	00 00		 mov	 DWORD PTR [eax+24], 0
$LN1@push_ui_me:

; 163  : }

  0014a	5f		 pop	 edi
  0014b	5e		 pop	 esi
  0014c	5b		 pop	 ebx
  0014d	8b e5		 mov	 esp, ebp
  0014f	5d		 pop	 ebp
  00150	c2 08 00	 ret	 8
?push_ui_menu@@YGXPAUUI_OBJECT@@0@Z ENDP		; push_ui_menu
_TEXT	ENDS
END
