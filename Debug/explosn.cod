; Listing generated by Microsoft (R) Optimizing Compiler Version 19.16.27045.0 

	TITLE	C:\Users\nhv90\Projects\eech\aphavoc\source\entity\special\effect\explosn\explosn.c
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB MSVCRTD
INCLUDELIB OLDNAMES

PUBLIC	_fabsf
PUBLIC	?fabs@@YGMM@Z					; fabs
PUBLIC	?create_meta_explosion@@YGHW4META_EXPLOSION_TYPES@@PAUVEC3D@@PAUENTITY@@PAH@Z ; create_meta_explosion
PUBLIC	?count_entities_in_meta_explosion@@YGHW4META_EXPLOSION_TYPES@@@Z ; count_entities_in_meta_explosion
PUBLIC	?create_client_server_weapon_killed_explosion_effect@@YGXPAUENTITY@@@Z ; create_client_server_weapon_killed_explosion_effect
PUBLIC	?create_client_server_object_killed_explosion_effect@@YGXPAUENTITY@@@Z ; create_client_server_object_killed_explosion_effect
PUBLIC	?create_client_server_object_hit_ground_explosion_effect@@YGXPAUENTITY@@H@Z ; create_client_server_object_hit_ground_explosion_effect
PUBLIC	?__LINE__Var@?0??create_meta_explosion@@YGHW4META_EXPLOSION_TYPES@@PAUVEC3D@@PAUENTITY@@PAH@Z@4JA ; `create_meta_explosion'::`1'::__LINE__Var
PUBLIC	??_C@_0FE@MFECPMIC@c?3?2users?2nhv90?2projects?2eech?2ap@ ; `string'
PUBLIC	??_C@_09DGPOGGIJ@type?5?$DO?$DN?50@		; `string'
PUBLIC	??_C@_0CA@ENHOKOHL@type?5?$DM?5NUM_META_EXPLOSION_TYPES@ ; `string'
PUBLIC	??_C@_0CB@KOIJNGHI@type?5?$CB?$DN?5META_EXPLOSION_TYPE_NON@ ; `string'
PUBLIC	??_C@_0CG@OCMINFIH@EXPLOSION?5?3?5Unknown?5component?5t@ ; `string'
PUBLIC	?__LINE__Var@?0??create_meta_explosion_sprites@@YGHPAUMETA_EXPLOSION_COMPONENT@@PAUVEC3D@@PAUENTITY@@PAH@Z@4JA ; `create_meta_explosion_sprites'::`1'::__LINE__Var
PUBLIC	??_C@_06MLKDMCBD@parent@			; `string'
PUBLIC	?__LINE__Var@?0??count_entities_in_meta_explosion@@YGHW4META_EXPLOSION_TYPES@@@Z@4JA ; `count_entities_in_meta_explosion'::`1'::__LINE__Var
PUBLIC	?__LINE__Var@?0??create_client_server_weapon_killed_explosion_effect@@YGXPAUENTITY@@@Z@4JA ; `create_client_server_weapon_killed_explosion_effect'::`1'::__LINE__Var
PUBLIC	??_C@_02LFNMGJAP@en@				; `string'
PUBLIC	??_C@_0CJ@DMBLBJBK@get_comms_model?5?$CI?$CJ?5?$DN?$DN?5COMMS_MOD@ ; `string'
PUBLIC	??_C@_0CK@ECMOGPAJ@EXPLOSN?5?3?5Invalid?5weapon?5kill?5c@ ; `string'
PUBLIC	?__LINE__Var@?0??damage_objects_within_explosion_damage_radius@@YGXPAUENTITY@@0W4META_EXPLOSION_TYPES@@@Z@4JA ; `damage_objects_within_explosion_damage_radius'::`1'::__LINE__Var
PUBLIC	??_C@_0EC@HBNEJKBC@Damage?5level?5reduced?5from?5?$CF?42f?5@ ; `string'
PUBLIC	?__LINE__Var@?0??create_client_server_object_hit_ground_explosion_effect@@YGXPAUENTITY@@H@Z@4JA ; `create_client_server_object_hit_ground_explosion_effect'::`1'::__LINE__Var
PUBLIC	?__LINE__Var@?0??create_client_server_object_killed_explosion_effect@@YGXPAUENTITY@@@Z@4JA ; `create_client_server_object_killed_explosion_effect'::`1'::__LINE__Var
PUBLIC	?__LINE__Var@?0??create_client_server_explosion_effect@@YGXW4META_EXPLOSION_TYPES@@PAUVEC3D@@PAUENTITY@@@Z@4JA ; `create_client_server_explosion_effect'::`1'::__LINE__Var
PUBLIC	??_C@_05IOMEMJEC@count@				; `string'
PUBLIC	__real@0000000000000000
PUBLIC	__real@3f00002000400080
PUBLIC	__real@3f10000000000000
PUBLIC	__real@3f800000
PUBLIC	__real@3fc00000
PUBLIC	__real@3fe0000000000000
PUBLIC	__real@3ff0000000000000
PUBLIC	__real@3ff921fb60000000
PUBLIC	__real@400921fb60000000
PUBLIC	__real@401c000000000000
PUBLIC	__real@40e0000000000000
PUBLIC	__xmm@80000000000000008000000000000000
PUBLIC	__xmm@80000000800000008000000080000000
EXTRN	__imp__rand:PROC
EXTRN	_memset:PROC
EXTRN	_fabs:PROC
EXTRN	?process_assert@@YGXPBD0H@Z:PROC		; process_assert
EXTRN	?convert_float_to_int@@YGXMPAH@Z:PROC		; convert_float_to_int
EXTRN	?debug_fatal@@YAXPBDZZ:PROC			; debug_fatal
EXTRN	?debug_log@@YAXPBDZZ:PROC			; debug_log
EXTRN	?malloc_fast_memory@@YGPAXI@Z:PROC		; malloc_fast_memory
EXTRN	?free_mem@@YGXPAX@Z:PROC			; free_mem
EXTRN	?get_3d_vector_magnitude@@YGMPBUVEC3D@@@Z:PROC	; get_3d_vector_magnitude
EXTRN	?get_3d_unit_vector_from_heading_and_pitch@@YGXPAUVEC3D@@MM@Z:PROC ; get_3d_unit_vector_from_heading_and_pitch
EXTRN	?get_sqr_3d_range@@YGMPBUVEC3D@@0@Z:PROC	; get_sqr_3d_range
EXTRN	?get_object_3d_bounding_box@@YGPAUOBJECT_3D_BOUNDS@@H@Z:PROC ; get_object_3d_bounding_box
EXTRN	?get_3d_terrain_point_data@@YGMMMPAUTERRAIN_3D_POINT_DATA@@@Z:PROC ; get_3d_terrain_point_data
EXTRN	?bound_position_to_map_volume@@YGHPAUVEC3D@@@Z:PROC ; bound_position_to_map_volume
EXTRN	?notify_local_entity@@YAHW4ENTITY_MESSAGES@@PAUENTITY@@1ZZ:PROC ; notify_local_entity
EXTRN	?create_local_entity@@YAPAUENTITY@@W4ENTITY_TYPES@@HZZ:PROC ; create_local_entity
EXTRN	?transmit_entity_comms_message@@YAXW4ENTITY_COMMS_MESSAGES@@PAUENTITY@@ZZ:PROC ; transmit_entity_comms_message
EXTRN	?create_client_server_weapon_hit_ground_crater@@YGXPAUENTITY@@PAUVEC3D@@@Z:PROC ; create_client_server_weapon_hit_ground_crater
EXTRN	?get_suitable_weapon_explosion_type@@YG?AW4META_EXPLOSION_TYPES@@PAUENTITY@@W4WEAPON_KILL_CODES@@@Z:PROC ; get_suitable_weapon_explosion_type
EXTRN	?create_client_server_meta_smoke_list_specified_offset@@YGHW4META_SMOKE_LIST_TYPES@@PAUENTITY@@PAUVEC3D@@@Z:PROC ; create_client_server_meta_smoke_list_specified_offset
EXTRN	?create_local_sound_effect_entity@@YGPAUENTITY@@HPAU1@W4ENTITY_SIDES@@HW4SOUND_CHANNEL_TYPES@@W4SOUND_LOCALITY_TYPES@@PAUVEC3D@@MMHHHPAH@Z:PROC ; create_local_sound_effect_entity
EXTRN	?get_local_sector_entity@@YGPAUENTITY@@PAUVEC3D@@@Z:PROC ; get_local_sector_entity
EXTRN	?get_terrain_type_class@@YG?AW4TERRAIN_CLASSES@@H@Z:PROC ; get_terrain_type_class
EXTRN	?get_terrain_type_draw_crater@@YGHH@Z:PROC	; get_terrain_type_draw_crater
EXTRN	?add_map_event@@YGXHMMM@Z:PROC			; add_map_event
EXTRN	?random_number_seed@@3HA:DWORD			; random_number_seed
EXTRN	?null_entity_pointer_message@@3PBDB:DWORD	; null_entity_pointer_message
EXTRN	?system_comms_model@@3W4COMMS_MODEL_TYPES@@A:DWORD ; system_comms_model
EXTRN	?system_comms_data_flow@@3W4COMMS_DATA_FLOW_TYPES@@A:DWORD ; system_comms_data_flow
EXTRN	?world_map@@3UWORLD_MAP_DATA@@A:BYTE		; world_map
EXTRN	?overload_invalid_list_type_message@@3PBDB:DWORD ; overload_invalid_list_type_message
EXTRN	?fn_get_local_entity_first_child@@3PAY0CN@P6GPAUENTITY@@PAU1@W4LIST_TYPES@@@ZA:BYTE ; fn_get_local_entity_first_child
EXTRN	?fn_get_local_entity_parent@@3PAY0CN@P6GPAUENTITY@@PAU1@W4LIST_TYPES@@@ZA:BYTE ; fn_get_local_entity_parent
EXTRN	?fn_get_local_entity_child_succ@@3PAY0CN@P6GPAUENTITY@@PAU1@W4LIST_TYPES@@@ZA:BYTE ; fn_get_local_entity_child_succ
EXTRN	?force_local_entity_create_stack_attributes@@3HA:DWORD ; force_local_entity_create_stack_attributes
EXTRN	?overload_invalid_int_type_message@@3PBDB:DWORD	; overload_invalid_int_type_message
EXTRN	?fn_get_local_entity_int_value@@3PAY0BBH@P6GHPAUENTITY@@W4INT_TYPES@@@ZA:BYTE ; fn_get_local_entity_int_value
EXTRN	?overload_invalid_vec3d_type_message@@3PBDB:DWORD ; overload_invalid_vec3d_type_message
EXTRN	?fn_get_local_entity_vec3d@@3PAY0BI@P6GXPAUENTITY@@W4VEC3D_TYPES@@PAUVEC3D@@@ZA:BYTE ; fn_get_local_entity_vec3d
EXTRN	?fn_get_local_entity_vec3d_ptr@@3PAY0BI@P6GPAUVEC3D@@PAUENTITY@@W4VEC3D_TYPES@@@ZA:BYTE ; fn_get_local_entity_vec3d_ptr
EXTRN	?entities@@3PAUENTITY@@A:DWORD			; entities
EXTRN	?meta_explosion_database@@3PAUMETA_EXPLOSION_DATA@@A:BYTE ; meta_explosion_database
EXTRN	?smoke_list_database@@3PAUSMOKE_LIST_DATA@@A:DWORD ; smoke_list_database
EXTRN	?entity_sector_map@@3PAPAUENTITY@@A:DWORD	; entity_sector_map
EXTRN	?null_sector_entity_map_pointer_message@@3PBDB:DWORD ; null_sector_entity_map_pointer_message
EXTRN	__fltused:DWORD
;	COMDAT __xmm@80000000800000008000000080000000
CONST	SEGMENT
__xmm@80000000800000008000000080000000 DB 00H, 00H, 00H, 080H, 00H, 00H, 00H
	DB	080H, 00H, 00H, 00H, 080H, 00H, 00H, 00H, 080H
CONST	ENDS
;	COMDAT __xmm@80000000000000008000000000000000
CONST	SEGMENT
__xmm@80000000000000008000000000000000 DB 00H, 00H, 00H, 00H, 00H, 00H, 00H
	DB	080H, 00H, 00H, 00H, 00H, 00H, 00H, 00H, 080H
CONST	ENDS
;	COMDAT __real@40e0000000000000
CONST	SEGMENT
__real@40e0000000000000 DQ 040e0000000000000r	; 32768
CONST	ENDS
;	COMDAT __real@401c000000000000
CONST	SEGMENT
__real@401c000000000000 DQ 0401c000000000000r	; 7
CONST	ENDS
;	COMDAT __real@400921fb60000000
CONST	SEGMENT
__real@400921fb60000000 DQ 0400921fb60000000r	; 3.14159
CONST	ENDS
;	COMDAT __real@3ff921fb60000000
CONST	SEGMENT
__real@3ff921fb60000000 DQ 03ff921fb60000000r	; 1.5708
CONST	ENDS
;	COMDAT __real@3ff0000000000000
CONST	SEGMENT
__real@3ff0000000000000 DQ 03ff0000000000000r	; 1
CONST	ENDS
;	COMDAT __real@3fe0000000000000
CONST	SEGMENT
__real@3fe0000000000000 DQ 03fe0000000000000r	; 0.5
CONST	ENDS
;	COMDAT __real@3fc00000
CONST	SEGMENT
__real@3fc00000 DD 03fc00000r			; 1.5
CONST	ENDS
;	COMDAT __real@3f800000
CONST	SEGMENT
__real@3f800000 DD 03f800000r			; 1
CONST	ENDS
;	COMDAT __real@3f10000000000000
CONST	SEGMENT
__real@3f10000000000000 DQ 03f10000000000000r	; 6.10352e-05
CONST	ENDS
;	COMDAT __real@3f00002000400080
CONST	SEGMENT
__real@3f00002000400080 DQ 03f00002000400080r	; 3.05185e-05
CONST	ENDS
;	COMDAT __real@0000000000000000
CONST	SEGMENT
__real@0000000000000000 DQ 00000000000000000r	; 0
CONST	ENDS
;	COMDAT ??_C@_05IOMEMJEC@count@
CONST	SEGMENT
??_C@_05IOMEMJEC@count@ DB 'count', 00H			; `string'
CONST	ENDS
;	COMDAT ?__LINE__Var@?0??create_client_server_explosion_effect@@YGXW4META_EXPLOSION_TYPES@@PAUVEC3D@@PAUENTITY@@@Z@4JA
_DATA	SEGMENT
?__LINE__Var@?0??create_client_server_explosion_effect@@YGXW4META_EXPLOSION_TYPES@@PAUVEC3D@@PAUENTITY@@@Z@4JA DD 0508H ; `create_client_server_explosion_effect'::`1'::__LINE__Var
_DATA	ENDS
;	COMDAT ?__LINE__Var@?0??create_client_server_object_killed_explosion_effect@@YGXPAUENTITY@@@Z@4JA
_DATA	SEGMENT
?__LINE__Var@?0??create_client_server_object_killed_explosion_effect@@YGXPAUENTITY@@@Z@4JA DD 046fH ; `create_client_server_object_killed_explosion_effect'::`1'::__LINE__Var
_DATA	ENDS
;	COMDAT ?__LINE__Var@?0??create_client_server_object_hit_ground_explosion_effect@@YGXPAUENTITY@@H@Z@4JA
_DATA	SEGMENT
?__LINE__Var@?0??create_client_server_object_hit_ground_explosion_effect@@YGXPAUENTITY@@H@Z@4JA DD 044bH ; `create_client_server_object_hit_ground_explosion_effect'::`1'::__LINE__Var
_DATA	ENDS
;	COMDAT ??_C@_0EC@HBNEJKBC@Damage?5level?5reduced?5from?5?$CF?42f?5@
CONST	SEGMENT
??_C@_0EC@HBNEJKBC@Damage?5level?5reduced?5from?5?$CF?42f?5@ DB 'Damage l'
	DB	'evel reduced from %.2f to %.2f for armour piercing charge', 00H ; `string'
CONST	ENDS
;	COMDAT ?__LINE__Var@?0??damage_objects_within_explosion_damage_radius@@YGXPAUENTITY@@0W4META_EXPLOSION_TYPES@@@Z@4JA
_DATA	SEGMENT
?__LINE__Var@?0??damage_objects_within_explosion_damage_radius@@YGXPAUENTITY@@0W4META_EXPLOSION_TYPES@@@Z@4JA DD 03baH ; `damage_objects_within_explosion_damage_radius'::`1'::__LINE__Var
_DATA	ENDS
;	COMDAT ??_C@_0CK@ECMOGPAJ@EXPLOSN?5?3?5Invalid?5weapon?5kill?5c@
CONST	SEGMENT
??_C@_0CK@ECMOGPAJ@EXPLOSN?5?3?5Invalid?5weapon?5kill?5c@ DB 'EXPLOSN : I'
	DB	'nvalid weapon kill code ( %d )', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_0CJ@DMBLBJBK@get_comms_model?5?$CI?$CJ?5?$DN?$DN?5COMMS_MOD@
CONST	SEGMENT
??_C@_0CJ@DMBLBJBK@get_comms_model?5?$CI?$CJ?5?$DN?$DN?5COMMS_MOD@ DB 'ge'
	DB	't_comms_model () == COMMS_MODEL_SERVER', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_02LFNMGJAP@en@
CONST	SEGMENT
??_C@_02LFNMGJAP@en@ DB 'en', 00H			; `string'
CONST	ENDS
;	COMDAT ?__LINE__Var@?0??create_client_server_weapon_killed_explosion_effect@@YGXPAUENTITY@@@Z@4JA
_DATA	SEGMENT
?__LINE__Var@?0??create_client_server_weapon_killed_explosion_effect@@YGXPAUENTITY@@@Z@4JA DD 031eH ; `create_client_server_weapon_killed_explosion_effect'::`1'::__LINE__Var
_DATA	ENDS
;	COMDAT ?__LINE__Var@?0??count_entities_in_meta_explosion@@YGHW4META_EXPLOSION_TYPES@@@Z@4JA
_DATA	SEGMENT
?__LINE__Var@?0??count_entities_in_meta_explosion@@YGHW4META_EXPLOSION_TYPES@@@Z@4JA DD 02d7H ; `count_entities_in_meta_explosion'::`1'::__LINE__Var
_DATA	ENDS
;	COMDAT ??_C@_06MLKDMCBD@parent@
CONST	SEGMENT
??_C@_06MLKDMCBD@parent@ DB 'parent', 00H		; `string'
CONST	ENDS
;	COMDAT ?__LINE__Var@?0??create_meta_explosion_sprites@@YGHPAUMETA_EXPLOSION_COMPONENT@@PAUVEC3D@@PAUENTITY@@PAH@Z@4JA
_DATA	SEGMENT
?__LINE__Var@?0??create_meta_explosion_sprites@@YGHPAUMETA_EXPLOSION_COMPONENT@@PAUVEC3D@@PAUENTITY@@PAH@Z@4JA DD 0c4H ; `create_meta_explosion_sprites'::`1'::__LINE__Var
_DATA	ENDS
;	COMDAT ??_C@_0CG@OCMINFIH@EXPLOSION?5?3?5Unknown?5component?5t@
CONST	SEGMENT
??_C@_0CG@OCMINFIH@EXPLOSION?5?3?5Unknown?5component?5t@ DB 'EXPLOSION : '
	DB	'Unknown component type %d', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_0CB@KOIJNGHI@type?5?$CB?$DN?5META_EXPLOSION_TYPE_NON@
CONST	SEGMENT
??_C@_0CB@KOIJNGHI@type?5?$CB?$DN?5META_EXPLOSION_TYPE_NON@ DB 'type != M'
	DB	'ETA_EXPLOSION_TYPE_NONE', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_0CA@ENHOKOHL@type?5?$DM?5NUM_META_EXPLOSION_TYPES@
CONST	SEGMENT
??_C@_0CA@ENHOKOHL@type?5?$DM?5NUM_META_EXPLOSION_TYPES@ DB 'type < NUM_M'
	DB	'ETA_EXPLOSION_TYPES', 00H			; `string'
CONST	ENDS
;	COMDAT ??_C@_09DGPOGGIJ@type?5?$DO?$DN?50@
CONST	SEGMENT
??_C@_09DGPOGGIJ@type?5?$DO?$DN?50@ DB 'type >= 0', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_0FE@MFECPMIC@c?3?2users?2nhv90?2projects?2eech?2ap@
CONST	SEGMENT
??_C@_0FE@MFECPMIC@c?3?2users?2nhv90?2projects?2eech?2ap@ DB 'c:\users\nh'
	DB	'v90\projects\eech\aphavoc\source\entity\special\effect\explos'
	DB	'n\explosn.c', 00H				; `string'
CONST	ENDS
;	COMDAT ?__LINE__Var@?0??create_meta_explosion@@YGHW4META_EXPLOSION_TYPES@@PAUVEC3D@@PAUENTITY@@PAH@Z@4JA
_DATA	SEGMENT
?__LINE__Var@?0??create_meta_explosion@@YGHW4META_EXPLOSION_TYPES@@PAUVEC3D@@PAUENTITY@@PAH@Z@4JA DD 068H ; `create_meta_explosion'::`1'::__LINE__Var
_DATA	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\entity\special\effect\explosn\explosn.c
;	COMDAT ?create_client_server_explosion_effect@@YGXW4META_EXPLOSION_TYPES@@PAUVEC3D@@PAUENTITY@@@Z
_TEXT	SEGMENT
_entity_index_list$ = -12				; size = 4
_count$ = -8						; size = 4
_loop$ = -4						; size = 4
_type$ = 8						; size = 4
_position$ = 12						; size = 4
_parent$ = 16						; size = 4
?create_client_server_explosion_effect@@YGXW4META_EXPLOSION_TYPES@@PAUVEC3D@@PAUENTITY@@@Z PROC ; create_client_server_explosion_effect, COMDAT

; 1288 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 4c	 sub	 esp, 76			; 0000004cH
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 1289 : 	int
; 1290 : 		loop,
; 1291 : 		count,
; 1292 : 		*entity_index_list;
; 1293 : 
; 1294 : 	ASSERT (get_comms_model () == COMMS_MODEL_SERVER);

  00009	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?system_comms_model@@3W4COMMS_MODEL_TYPES@@A, 0 ; system_comms_model
  00010	74 18		 je	 SHORT $LN5@create_cli
  00012	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??create_client_server_explosion_effect@@YGXW4META_EXPLOSION_TYPES@@PAUVEC3D@@PAUENTITY@@@Z@4JA
  00017	83 c0 06	 add	 eax, 6
  0001a	50		 push	 eax
  0001b	68 00 00 00 00	 push	 OFFSET ??_C@_0FE@MFECPMIC@c?3?2users?2nhv90?2projects?2eech?2ap@
  00020	68 00 00 00 00	 push	 OFFSET ??_C@_0CJ@DMBLBJBK@get_comms_model?5?$CI?$CJ?5?$DN?$DN?5COMMS_MOD@
  00025	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN5@create_cli:

; 1295 : 
; 1296 : 	//
; 1297 : 	// create an array of entity index numbers and fill them all with ENTITY_INDEX_DONT_CARE
; 1298 : 	//
; 1299 : 
; 1300 : 	count = count_entities_in_meta_explosion (type);

  0002a	8b 45 08	 mov	 eax, DWORD PTR _type$[ebp]
  0002d	50		 push	 eax
  0002e	e8 00 00 00 00	 call	 ?count_entities_in_meta_explosion@@YGHW4META_EXPLOSION_TYPES@@@Z ; count_entities_in_meta_explosion
  00033	89 45 f8	 mov	 DWORD PTR _count$[ebp], eax

; 1301 : 
; 1302 : 	ASSERT (count);

  00036	83 7d f8 00	 cmp	 DWORD PTR _count$[ebp], 0
  0003a	75 18		 jne	 SHORT $LN6@create_cli
  0003c	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??create_client_server_explosion_effect@@YGXW4META_EXPLOSION_TYPES@@PAUVEC3D@@PAUENTITY@@@Z@4JA
  00041	83 c0 0e	 add	 eax, 14			; 0000000eH
  00044	50		 push	 eax
  00045	68 00 00 00 00	 push	 OFFSET ??_C@_0FE@MFECPMIC@c?3?2users?2nhv90?2projects?2eech?2ap@
  0004a	68 00 00 00 00	 push	 OFFSET ??_C@_05IOMEMJEC@count@
  0004f	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN6@create_cli:

; 1303 : 
; 1304 : 	entity_index_list = (int *) malloc_fast_mem (sizeof (int) * count);

  00054	8b 45 f8	 mov	 eax, DWORD PTR _count$[ebp]
  00057	c1 e0 02	 shl	 eax, 2
  0005a	50		 push	 eax
  0005b	e8 00 00 00 00	 call	 ?malloc_fast_memory@@YGPAXI@Z ; malloc_fast_memory
  00060	89 45 f4	 mov	 DWORD PTR _entity_index_list$[ebp], eax

; 1305 : 
; 1306 : 	for ( loop = 0 ; loop < count ; loop ++ )

  00063	c7 45 fc 00 00
	00 00		 mov	 DWORD PTR _loop$[ebp], 0
  0006a	eb 09		 jmp	 SHORT $LN4@create_cli
$LN2@create_cli:
  0006c	8b 45 fc	 mov	 eax, DWORD PTR _loop$[ebp]
  0006f	83 c0 01	 add	 eax, 1
  00072	89 45 fc	 mov	 DWORD PTR _loop$[ebp], eax
$LN4@create_cli:
  00075	8b 45 fc	 mov	 eax, DWORD PTR _loop$[ebp]
  00078	3b 45 f8	 cmp	 eax, DWORD PTR _count$[ebp]
  0007b	7d 0f		 jge	 SHORT $LN3@create_cli

; 1307 : 	{
; 1308 : 		entity_index_list [loop] = ENTITY_INDEX_DONT_CARE;

  0007d	8b 45 fc	 mov	 eax, DWORD PTR _loop$[ebp]
  00080	8b 4d f4	 mov	 ecx, DWORD PTR _entity_index_list$[ebp]
  00083	c7 04 81 ff ff
	ff ff		 mov	 DWORD PTR [ecx+eax*4], -1

; 1309 : 	}

  0008a	eb e0		 jmp	 SHORT $LN2@create_cli
$LN3@create_cli:

; 1310 : 
; 1311 : 	//
; 1312 : 	// call the create function which will create the entities on the server, and also fill in the entity index list
; 1313 : 	//
; 1314 : 
; 1315 : 	create_meta_explosion (type, position, parent, entity_index_list);

  0008c	8b 45 f4	 mov	 eax, DWORD PTR _entity_index_list$[ebp]
  0008f	50		 push	 eax
  00090	8b 4d 10	 mov	 ecx, DWORD PTR _parent$[ebp]
  00093	51		 push	 ecx
  00094	8b 55 0c	 mov	 edx, DWORD PTR _position$[ebp]
  00097	52		 push	 edx
  00098	8b 45 08	 mov	 eax, DWORD PTR _type$[ebp]
  0009b	50		 push	 eax
  0009c	e8 00 00 00 00	 call	 ?create_meta_explosion@@YGHW4META_EXPLOSION_TYPES@@PAUVEC3D@@PAUENTITY@@PAH@Z ; create_meta_explosion

; 1316 : 
; 1317 : 	//
; 1318 : 	// now notify the clients to create same explosion and pass them the list of indices to use
; 1319 : 	//
; 1320 : 
; 1321 : 	transmit_entity_comms_message

  000a1	8b 45 f4	 mov	 eax, DWORD PTR _entity_index_list$[ebp]
  000a4	50		 push	 eax
  000a5	8b 4d 10	 mov	 ecx, DWORD PTR _parent$[ebp]
  000a8	51		 push	 ecx
  000a9	8b 55 0c	 mov	 edx, DWORD PTR _position$[ebp]
  000ac	52		 push	 edx
  000ad	8b 45 08	 mov	 eax, DWORD PTR _type$[ebp]
  000b0	50		 push	 eax
  000b1	6a 00		 push	 0
  000b3	6a 09		 push	 9
  000b5	e8 00 00 00 00	 call	 ?transmit_entity_comms_message@@YAXW4ENTITY_COMMS_MESSAGES@@PAUENTITY@@ZZ ; transmit_entity_comms_message
  000ba	83 c4 18	 add	 esp, 24			; 00000018H

; 1322 : 	(
; 1323 : 		ENTITY_COMMS_CREATE_META_EXPLOSION,
; 1324 : 		NULL,
; 1325 : 		type,
; 1326 : 		position,
; 1327 : 		parent,
; 1328 : 		entity_index_list
; 1329 : 	);
; 1330 : 
; 1331 : 	//
; 1332 : 	//
; 1333 : 	//
; 1334 : 
; 1335 : 	free_mem (entity_index_list);

  000bd	8b 45 f4	 mov	 eax, DWORD PTR _entity_index_list$[ebp]
  000c0	50		 push	 eax
  000c1	e8 00 00 00 00	 call	 ?free_mem@@YGXPAX@Z	; free_mem

; 1336 : }

  000c6	5f		 pop	 edi
  000c7	5e		 pop	 esi
  000c8	5b		 pop	 ebx
  000c9	8b e5		 mov	 esp, ebp
  000cb	5d		 pop	 ebp
  000cc	c2 0c 00	 ret	 12			; 0000000cH
?create_client_server_explosion_effect@@YGXW4META_EXPLOSION_TYPES@@PAUVEC3D@@PAUENTITY@@@Z ENDP ; create_client_server_explosion_effect
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\entity\special\effect\explosn\explosn.c
;	COMDAT ?create_client_server_flammable_object_explosion_effect@@YGXPAUENTITY@@PAUVEC3D@@H@Z
_TEXT	SEGMENT
tv64 = -68						; size = 4
_en$ = 8						; size = 4
_pos$ = 12						; size = 4
_explosive_power$ = 16					; size = 4
?create_client_server_flammable_object_explosion_effect@@YGXPAUENTITY@@PAUVEC3D@@H@Z PROC ; create_client_server_flammable_object_explosion_effect, COMDAT

; 1267 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 44	 sub	 esp, 68			; 00000044H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 1268 : 	//
; 1269 : 	// currently only used for "smoking boots" on infantry...
; 1270 : 	//
; 1271 : 
; 1272 : 	switch (explosive_power)

  00009	8b 45 10	 mov	 eax, DWORD PTR _explosive_power$[ebp]
  0000c	89 45 bc	 mov	 DWORD PTR tv64[ebp], eax
  0000f	83 7d bc 01	 cmp	 DWORD PTR tv64[ebp], 1
  00013	74 02		 je	 SHORT $LN4@create_cli
  00015	eb 0d		 jmp	 SHORT $LN1@create_cli
$LN4@create_cli:

; 1273 : 	{
; 1274 : 		case EXPLOSIVE_POWER_LOW:
; 1275 : 		{
; 1276 : 			create_client_server_meta_smoke_list_specified_offset (META_SMOKE_LIST_TYPE_SMALL_FIRE_SHORT_DURATION, en, NULL);

  00017	6a 00		 push	 0
  00019	8b 45 08	 mov	 eax, DWORD PTR _en$[ebp]
  0001c	50		 push	 eax
  0001d	6a 06		 push	 6
  0001f	e8 00 00 00 00	 call	 ?create_client_server_meta_smoke_list_specified_offset@@YGHW4META_SMOKE_LIST_TYPES@@PAUENTITY@@PAUVEC3D@@@Z ; create_client_server_meta_smoke_list_specified_offset
$LN1@create_cli:

; 1277 : 
; 1278 : 			break;
; 1279 : 		}
; 1280 : 	}
; 1281 : }

  00024	5f		 pop	 edi
  00025	5e		 pop	 esi
  00026	5b		 pop	 ebx
  00027	8b e5		 mov	 esp, ebp
  00029	5d		 pop	 ebp
  0002a	c2 0c 00	 ret	 12			; 0000000cH
?create_client_server_flammable_object_explosion_effect@@YGXPAUENTITY@@PAUVEC3D@@H@Z ENDP ; create_client_server_flammable_object_explosion_effect
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\entity\special\effect\explosn\explosn.c
;	COMDAT ?create_client_server_explosive_object_explosion_effect@@YGXPAUENTITY@@PAUVEC3D@@H@Z
_TEXT	SEGMENT
tv64 = -72						; size = 4
_type$ = -4						; size = 4
_en$ = 8						; size = 4
_pos$ = 12						; size = 4
_explosive_power$ = 16					; size = 4
?create_client_server_explosive_object_explosion_effect@@YGXPAUENTITY@@PAUVEC3D@@H@Z PROC ; create_client_server_explosive_object_explosion_effect, COMDAT

; 1223 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 48	 sub	 esp, 72			; 00000048H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 1224 : 	meta_explosion_types
; 1225 : 		type;
; 1226 : 
; 1227 : 	switch (explosive_power)

  00009	8b 45 10	 mov	 eax, DWORD PTR _explosive_power$[ebp]
  0000c	89 45 b8	 mov	 DWORD PTR tv64[ebp], eax
  0000f	83 7d b8 01	 cmp	 DWORD PTR tv64[ebp], 1
  00013	74 0e		 je	 SHORT $LN4@create_cli
  00015	83 7d b8 02	 cmp	 DWORD PTR tv64[ebp], 2
  00019	74 11		 je	 SHORT $LN5@create_cli
  0001b	83 7d b8 03	 cmp	 DWORD PTR tv64[ebp], 3
  0001f	74 14		 je	 SHORT $LN6@create_cli
  00021	eb 1b		 jmp	 SHORT $LN7@create_cli
$LN4@create_cli:

; 1228 : 	{
; 1229 : 		case EXPLOSIVE_POWER_LOW:
; 1230 : 		{
; 1231 : 			type = SMALL_EXPLOSIVE_OBJECT_META_EXPLOSION;

  00023	c7 45 fc 0c 00
	00 00		 mov	 DWORD PTR _type$[ebp], 12 ; 0000000cH

; 1232 : 
; 1233 : 			break;

  0002a	eb 14		 jmp	 SHORT $LN2@create_cli
$LN5@create_cli:

; 1234 : 		}
; 1235 : 		case EXPLOSIVE_POWER_MEDIUM:
; 1236 : 		{
; 1237 : 			type = MEDIUM_EXPLOSIVE_OBJECT_META_EXPLOSION;

  0002c	c7 45 fc 0d 00
	00 00		 mov	 DWORD PTR _type$[ebp], 13 ; 0000000dH

; 1238 : 
; 1239 : 			break;

  00033	eb 0b		 jmp	 SHORT $LN2@create_cli
$LN6@create_cli:

; 1240 : 		}
; 1241 : 		case EXPLOSIVE_POWER_HIGH:
; 1242 : 		{
; 1243 : 			type = LARGE_EXPLOSIVE_OBJECT_META_EXPLOSION;

  00035	c7 45 fc 0e 00
	00 00		 mov	 DWORD PTR _type$[ebp], 14 ; 0000000eH

; 1244 : 
; 1245 : 			break;

  0003c	eb 02		 jmp	 SHORT $LN2@create_cli
$LN7@create_cli:

; 1246 : 		}
; 1247 : 		default:
; 1248 : 		{
; 1249 : 			return;

  0003e	eb 11		 jmp	 SHORT $LN1@create_cli
$LN2@create_cli:

; 1250 : 		}
; 1251 : 	}
; 1252 : 
; 1253 : 	#if DEBUG_MODULE
; 1254 : 
; 1255 : 	debug_log ("EXPLOSN : Creating Object Killed Explosive effect, type %d, at %f, %f ( object %s )", type, pos->x, pos->z, entity_type_names [en->type]);
; 1256 : 
; 1257 : 	#endif
; 1258 : 
; 1259 : 	create_client_server_explosion_effect (type, pos, en);

  00040	8b 45 08	 mov	 eax, DWORD PTR _en$[ebp]
  00043	50		 push	 eax
  00044	8b 4d 0c	 mov	 ecx, DWORD PTR _pos$[ebp]
  00047	51		 push	 ecx
  00048	8b 55 fc	 mov	 edx, DWORD PTR _type$[ebp]
  0004b	52		 push	 edx
  0004c	e8 00 00 00 00	 call	 ?create_client_server_explosion_effect@@YGXW4META_EXPLOSION_TYPES@@PAUVEC3D@@PAUENTITY@@@Z ; create_client_server_explosion_effect
$LN1@create_cli:

; 1260 : }

  00051	5f		 pop	 edi
  00052	5e		 pop	 esi
  00053	5b		 pop	 ebx
  00054	8b e5		 mov	 esp, ebp
  00056	5d		 pop	 ebp
  00057	c2 0c 00	 ret	 12			; 0000000cH
?create_client_server_explosive_object_explosion_effect@@YGXPAUENTITY@@PAUVEC3D@@H@Z ENDP ; create_client_server_explosive_object_explosion_effect
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\entity\special\effect\explosn\explosn.c
;	COMDAT ?create_client_server_dust_object_explosion_effect@@YGXPAUENTITY@@PAUVEC3D@@H@Z
_TEXT	SEGMENT
tv64 = -72						; size = 4
_type$ = -4						; size = 4
_en$ = 8						; size = 4
_pos$ = 12						; size = 4
_explosive_power$ = 16					; size = 4
?create_client_server_dust_object_explosion_effect@@YGXPAUENTITY@@PAUVEC3D@@H@Z PROC ; create_client_server_dust_object_explosion_effect, COMDAT

; 1179 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 48	 sub	 esp, 72			; 00000048H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 1180 : 	meta_explosion_types
; 1181 : 		type;
; 1182 : 
; 1183 : 	switch (explosive_power)

  00009	8b 45 10	 mov	 eax, DWORD PTR _explosive_power$[ebp]
  0000c	89 45 b8	 mov	 DWORD PTR tv64[ebp], eax
  0000f	83 7d b8 01	 cmp	 DWORD PTR tv64[ebp], 1
  00013	74 0e		 je	 SHORT $LN4@create_cli
  00015	83 7d b8 02	 cmp	 DWORD PTR tv64[ebp], 2
  00019	74 11		 je	 SHORT $LN5@create_cli
  0001b	83 7d b8 03	 cmp	 DWORD PTR tv64[ebp], 3
  0001f	74 14		 je	 SHORT $LN6@create_cli
  00021	eb 1b		 jmp	 SHORT $LN7@create_cli
$LN4@create_cli:

; 1184 : 	{
; 1185 : 		case EXPLOSIVE_POWER_LOW:
; 1186 : 		{
; 1187 : 			type = SMALL_DUST_META_EXPLOSION;

  00023	c7 45 fc 09 00
	00 00		 mov	 DWORD PTR _type$[ebp], 9

; 1188 : 
; 1189 : 			break;

  0002a	eb 14		 jmp	 SHORT $LN2@create_cli
$LN5@create_cli:

; 1190 : 		}
; 1191 : 		case EXPLOSIVE_POWER_MEDIUM:
; 1192 : 		{
; 1193 : 			type = MEDIUM_DUST_META_EXPLOSION;

  0002c	c7 45 fc 0a 00
	00 00		 mov	 DWORD PTR _type$[ebp], 10 ; 0000000aH

; 1194 : 
; 1195 : 			break;

  00033	eb 0b		 jmp	 SHORT $LN2@create_cli
$LN6@create_cli:

; 1196 : 		}
; 1197 : 		case EXPLOSIVE_POWER_HIGH:
; 1198 : 		{
; 1199 : 			type = LARGE_DUST_META_EXPLOSION;

  00035	c7 45 fc 0b 00
	00 00		 mov	 DWORD PTR _type$[ebp], 11 ; 0000000bH

; 1200 : 
; 1201 : 			break;

  0003c	eb 02		 jmp	 SHORT $LN2@create_cli
$LN7@create_cli:

; 1202 : 		}
; 1203 : 		default:
; 1204 : 		{
; 1205 : 			return;

  0003e	eb 11		 jmp	 SHORT $LN1@create_cli
$LN2@create_cli:

; 1206 : 		}
; 1207 : 	}
; 1208 : 
; 1209 : 	#if DEBUG_MODULE
; 1210 : 
; 1211 : 	debug_log ("EXPLOSN : Creating Object Killed Dust effect, type %d, at %f, %f ( object %s )", type, pos->x, pos->z, entity_type_names [en->type]);
; 1212 : 
; 1213 : 	#endif
; 1214 : 
; 1215 : 	create_client_server_explosion_effect (type, pos, en);

  00040	8b 45 08	 mov	 eax, DWORD PTR _en$[ebp]
  00043	50		 push	 eax
  00044	8b 4d 0c	 mov	 ecx, DWORD PTR _pos$[ebp]
  00047	51		 push	 ecx
  00048	8b 55 fc	 mov	 edx, DWORD PTR _type$[ebp]
  0004b	52		 push	 edx
  0004c	e8 00 00 00 00	 call	 ?create_client_server_explosion_effect@@YGXW4META_EXPLOSION_TYPES@@PAUVEC3D@@PAUENTITY@@@Z ; create_client_server_explosion_effect
$LN1@create_cli:

; 1216 : }

  00051	5f		 pop	 edi
  00052	5e		 pop	 esi
  00053	5b		 pop	 ebx
  00054	8b e5		 mov	 esp, ebp
  00056	5d		 pop	 ebp
  00057	c2 0c 00	 ret	 12			; 0000000cH
?create_client_server_dust_object_explosion_effect@@YGXPAUENTITY@@PAUVEC3D@@H@Z ENDP ; create_client_server_dust_object_explosion_effect
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\entity\special\effect\explosn\explosn.c
;	COMDAT ?damage_objects_within_explosion_damage_radius@@YGXPAUENTITY@@0W4META_EXPLOSION_TYPES@@@Z
_TEXT	SEGMENT
tv334 = -140						; size = 4
tv299 = -140						; size = 4
tv280 = -140						; size = 4
tv253 = -140						; size = 4
tv232 = -140						; size = 4
tv212 = -140						; size = 4
tv190 = -140						; size = 4
tv156 = -140						; size = 4
tv152 = -140						; size = 4
tv148 = -140						; size = 4
tv144 = -140						; size = 4
tv84 = -140						; size = 4
tv326 = -136						; size = 4
tv292 = -136						; size = 4
tv273 = -136						; size = 4
tv245 = -136						; size = 4
tv225 = -136						; size = 4
tv219 = -136						; size = 4
tv204 = -136						; size = 4
tv182 = -136						; size = 4
tv175 = -136						; size = 4
tv157 = -136						; size = 4
tv153 = -136						; size = 4
tv149 = -136						; size = 4
tv145 = -136						; size = 4
tv76 = -136						; size = 4
_x$1 = -68						; size = 4
_object$ = -64						; size = 4
_sect$ = -60						; size = 4
_object_position$ = -56					; size = 4
_explosion_position$ = -52				; size = 4
_max_sector_z$ = -48					; size = 4
_min_sector_z$ = -44					; size = 4
_max_sector_x$ = -40					; size = 4
_min_sector_x$ = -36					; size = 4
_sz$ = -32						; size = 4
_sx$ = -28						; size = 4
_damage_modifier$ = -24					; size = 4
_damage_radius$ = -20					; size = 4
_temp_z$ = -16						; size = 4
_temp_x$ = -12						; size = 4
_range$ = -8						; size = 4
_R$ = -4						; size = 4
_en$ = 8						; size = 4
_target$ = 12						; size = 4
_type$ = 16						; size = 4
?damage_objects_within_explosion_damage_radius@@YGXPAUENTITY@@0W4META_EXPLOSION_TYPES@@@Z PROC ; damage_objects_within_explosion_damage_radius, COMDAT

; 954  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec 8c 00 00
	00		 sub	 esp, 140		; 0000008cH
  00009	53		 push	 ebx
  0000a	56		 push	 esi
  0000b	57		 push	 edi

; 955  : 	float
; 956  : 		R,
; 957  : 		range,
; 958  : 		temp_x,
; 959  : 		temp_z,
; 960  : 		damage_radius,
; 961  : 		damage_modifier;
; 962  : 
; 963  : 	int
; 964  : 		sx,
; 965  : 		sz,
; 966  : 		min_sector_x,
; 967  : 		max_sector_x,
; 968  : 		min_sector_z,
; 969  : 		max_sector_z;
; 970  : 
; 971  : 	vec3d
; 972  : 		*explosion_position,
; 973  : 		*object_position;
; 974  : 
; 975  : 	entity
; 976  : 		*sect,
; 977  : 		*object;
; 978  : 
; 979  : 	damage_radius = meta_explosion_database[ type ].damage_radius;

  0000c	8b 45 10	 mov	 eax, DWORD PTR _type$[ebp]
  0000f	c1 e0 04	 shl	 eax, 4
  00012	f3 0f 10 80 04
	00 00 00	 movss	 xmm0, DWORD PTR ?meta_explosion_database@@3PAUMETA_EXPLOSION_DATA@@A[eax+4]
  0001a	f3 0f 11 45 ec	 movss	 DWORD PTR _damage_radius$[ebp], xmm0

; 980  : 
; 981  : 	if (damage_radius == 0.0)

  0001f	f3 0f 5a 45 ec	 cvtss2sd xmm0, DWORD PTR _damage_radius$[ebp]
  00024	66 0f 2e 05 00
	00 00 00	 ucomisd xmm0, QWORD PTR __real@0000000000000000
  0002c	9f		 lahf
  0002d	f6 c4 44	 test	 ah, 68			; 00000044H
  00030	7a 05		 jp	 SHORT $LN12@damage_obj

; 982  : 	{
; 983  : 		return;

  00032	e9 52 08 00 00	 jmp	 $LN1@damage_obj
$LN12@damage_obj:

; 984  : 	}
; 985  : 
; 986  : 	R = damage_radius * damage_radius;

  00037	f3 0f 10 45 ec	 movss	 xmm0, DWORD PTR _damage_radius$[ebp]
  0003c	f3 0f 59 45 ec	 mulss	 xmm0, DWORD PTR _damage_radius$[ebp]
  00041	f3 0f 11 45 fc	 movss	 DWORD PTR _R$[ebp], xmm0

; 987  : 
; 988  : 	explosion_position = get_local_entity_vec3d_ptr (en, VEC3D_TYPE_POSITION);

  00046	83 7d 08 00	 cmp	 DWORD PTR _en$[ebp], 0
  0004a	74 0d		 je	 SHORT $LN21@damage_obj
  0004c	8b 45 08	 mov	 eax, DWORD PTR _en$[ebp]
  0004f	8b 08		 mov	 ecx, DWORD PTR [eax]
  00051	89 8d 78 ff ff
	ff		 mov	 DWORD PTR tv76[ebp], ecx
  00057	eb 24		 jmp	 SHORT $LN22@damage_obj
$LN21@damage_obj:
  00059	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??damage_objects_within_explosion_damage_radius@@YGXPAUENTITY@@0W4META_EXPLOSION_TYPES@@@Z@4JA
  0005f	83 c2 22	 add	 edx, 34			; 00000022H
  00062	52		 push	 edx
  00063	68 00 00 00 00	 push	 OFFSET ??_C@_0FE@MFECPMIC@c?3?2users?2nhv90?2projects?2eech?2ap@
  00068	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  0006d	50		 push	 eax
  0006e	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00073	c7 85 78 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv76[ebp], 0
$LN22@damage_obj:
  0007d	b9 01 00 00 00	 mov	 ecx, 1
  00082	85 c9		 test	 ecx, ecx
  00084	74 0c		 je	 SHORT $LN23@damage_obj
  00086	c7 85 74 ff ff
	ff 08 00 00 00	 mov	 DWORD PTR tv84[ebp], 8
  00090	eb 24		 jmp	 SHORT $LN24@damage_obj
$LN23@damage_obj:
  00092	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??damage_objects_within_explosion_damage_radius@@YGXPAUENTITY@@0W4META_EXPLOSION_TYPES@@@Z@4JA
  00098	83 c2 22	 add	 edx, 34			; 00000022H
  0009b	52		 push	 edx
  0009c	68 00 00 00 00	 push	 OFFSET ??_C@_0FE@MFECPMIC@c?3?2users?2nhv90?2projects?2eech?2ap@
  000a1	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_vec3d_type_message@@3PBDB ; overload_invalid_vec3d_type_message
  000a6	50		 push	 eax
  000a7	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  000ac	c7 85 74 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv84[ebp], 0
$LN24@damage_obj:
  000b6	6a 08		 push	 8
  000b8	8b 4d 08	 mov	 ecx, DWORD PTR _en$[ebp]
  000bb	51		 push	 ecx
  000bc	6b 95 78 ff ff
	ff 60		 imul	 edx, DWORD PTR tv76[ebp], 96
  000c3	8b 85 74 ff ff
	ff		 mov	 eax, DWORD PTR tv84[ebp]
  000c9	8b 8c 82 00 00
	00 00		 mov	 ecx, DWORD PTR ?fn_get_local_entity_vec3d_ptr@@3PAY0BI@P6GPAUVEC3D@@PAUENTITY@@W4VEC3D_TYPES@@@ZA[edx+eax*4]
  000d0	ff d1		 call	 ecx
  000d2	89 45 cc	 mov	 DWORD PTR _explosion_position$[ebp], eax

; 989  : 
; 990  : 	temp_x = explosion_position->x - damage_radius;

  000d5	8b 45 cc	 mov	 eax, DWORD PTR _explosion_position$[ebp]
  000d8	f3 0f 10 00	 movss	 xmm0, DWORD PTR [eax]
  000dc	f3 0f 5c 45 ec	 subss	 xmm0, DWORD PTR _damage_radius$[ebp]
  000e1	f3 0f 11 45 f4	 movss	 DWORD PTR _temp_x$[ebp], xmm0

; 991  : 	temp_z = explosion_position->z - damage_radius;

  000e6	8b 45 cc	 mov	 eax, DWORD PTR _explosion_position$[ebp]
  000e9	f3 0f 10 40 08	 movss	 xmm0, DWORD PTR [eax+8]
  000ee	f3 0f 5c 45 ec	 subss	 xmm0, DWORD PTR _damage_radius$[ebp]
  000f3	f3 0f 11 45 f0	 movss	 DWORD PTR _temp_z$[ebp], xmm0

; 992  : 
; 993  : 	get_x_sector (min_sector_x, temp_x);

  000f8	8d 45 dc	 lea	 eax, DWORD PTR _min_sector_x$[ebp]
  000fb	50		 push	 eax
  000fc	51		 push	 ecx
  000fd	f3 0f 10 45 f4	 movss	 xmm0, DWORD PTR _temp_x$[ebp]
  00102	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00107	e8 00 00 00 00	 call	 ?convert_float_to_int@@YGXMPAH@Z ; convert_float_to_int
  0010c	8b 45 dc	 mov	 eax, DWORD PTR _min_sector_x$[ebp]
  0010f	99		 cdq
  00110	f7 3d 00 00 00
	00		 idiv	 DWORD PTR ?world_map@@3UWORLD_MAP_DATA@@A
  00116	89 45 dc	 mov	 DWORD PTR _min_sector_x$[ebp], eax

; 994  : 	get_z_sector (min_sector_z, temp_z);

  00119	8d 45 d4	 lea	 eax, DWORD PTR _min_sector_z$[ebp]
  0011c	50		 push	 eax
  0011d	51		 push	 ecx
  0011e	f3 0f 10 45 f0	 movss	 xmm0, DWORD PTR _temp_z$[ebp]
  00123	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00128	e8 00 00 00 00	 call	 ?convert_float_to_int@@YGXMPAH@Z ; convert_float_to_int
  0012d	8b 45 d4	 mov	 eax, DWORD PTR _min_sector_z$[ebp]
  00130	99		 cdq
  00131	f7 3d 00 00 00
	00		 idiv	 DWORD PTR ?world_map@@3UWORLD_MAP_DATA@@A
  00137	89 45 d4	 mov	 DWORD PTR _min_sector_z$[ebp], eax

; 995  : 
; 996  : 	temp_x = explosion_position->x + damage_radius;

  0013a	8b 45 cc	 mov	 eax, DWORD PTR _explosion_position$[ebp]
  0013d	f3 0f 10 00	 movss	 xmm0, DWORD PTR [eax]
  00141	f3 0f 58 45 ec	 addss	 xmm0, DWORD PTR _damage_radius$[ebp]
  00146	f3 0f 11 45 f4	 movss	 DWORD PTR _temp_x$[ebp], xmm0

; 997  : 	temp_z = explosion_position->z + damage_radius;

  0014b	8b 45 cc	 mov	 eax, DWORD PTR _explosion_position$[ebp]
  0014e	f3 0f 10 40 08	 movss	 xmm0, DWORD PTR [eax+8]
  00153	f3 0f 58 45 ec	 addss	 xmm0, DWORD PTR _damage_radius$[ebp]
  00158	f3 0f 11 45 f0	 movss	 DWORD PTR _temp_z$[ebp], xmm0

; 998  : 
; 999  : 	get_x_sector (max_sector_x, temp_x);

  0015d	8d 45 d8	 lea	 eax, DWORD PTR _max_sector_x$[ebp]
  00160	50		 push	 eax
  00161	51		 push	 ecx
  00162	f3 0f 10 45 f4	 movss	 xmm0, DWORD PTR _temp_x$[ebp]
  00167	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  0016c	e8 00 00 00 00	 call	 ?convert_float_to_int@@YGXMPAH@Z ; convert_float_to_int
  00171	8b 45 d8	 mov	 eax, DWORD PTR _max_sector_x$[ebp]
  00174	99		 cdq
  00175	f7 3d 00 00 00
	00		 idiv	 DWORD PTR ?world_map@@3UWORLD_MAP_DATA@@A
  0017b	89 45 d8	 mov	 DWORD PTR _max_sector_x$[ebp], eax

; 1000 : 	get_z_sector (max_sector_z, temp_z);

  0017e	8d 45 d0	 lea	 eax, DWORD PTR _max_sector_z$[ebp]
  00181	50		 push	 eax
  00182	51		 push	 ecx
  00183	f3 0f 10 45 f0	 movss	 xmm0, DWORD PTR _temp_z$[ebp]
  00188	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  0018d	e8 00 00 00 00	 call	 ?convert_float_to_int@@YGXMPAH@Z ; convert_float_to_int
  00192	8b 45 d0	 mov	 eax, DWORD PTR _max_sector_z$[ebp]
  00195	99		 cdq
  00196	f7 3d 00 00 00
	00		 idiv	 DWORD PTR ?world_map@@3UWORLD_MAP_DATA@@A
  0019c	89 45 d0	 mov	 DWORD PTR _max_sector_z$[ebp], eax

; 1001 : 
; 1002 : 	min_sector_x = bound (min_sector_x, MIN_MAP_X_SECTOR, MAX_MAP_X_SECTOR);

  0019f	8b 45 dc	 mov	 eax, DWORD PTR _min_sector_x$[ebp]
  001a2	3b 05 14 00 00
	00		 cmp	 eax, DWORD PTR ?world_map@@3UWORLD_MAP_DATA@@A+20
  001a8	7d 0e		 jge	 SHORT $LN27@damage_obj
  001aa	8b 0d 14 00 00
	00		 mov	 ecx, DWORD PTR ?world_map@@3UWORLD_MAP_DATA@@A+20
  001b0	89 8d 78 ff ff
	ff		 mov	 DWORD PTR tv145[ebp], ecx
  001b6	eb 2d		 jmp	 SHORT $LN28@damage_obj
$LN27@damage_obj:
  001b8	8b 55 dc	 mov	 edx, DWORD PTR _min_sector_x$[ebp]
  001bb	3b 15 1c 00 00
	00		 cmp	 edx, DWORD PTR ?world_map@@3UWORLD_MAP_DATA@@A+28
  001c1	7e 0d		 jle	 SHORT $LN25@damage_obj
  001c3	a1 1c 00 00 00	 mov	 eax, DWORD PTR ?world_map@@3UWORLD_MAP_DATA@@A+28
  001c8	89 85 74 ff ff
	ff		 mov	 DWORD PTR tv144[ebp], eax
  001ce	eb 09		 jmp	 SHORT $LN26@damage_obj
$LN25@damage_obj:
  001d0	8b 4d dc	 mov	 ecx, DWORD PTR _min_sector_x$[ebp]
  001d3	89 8d 74 ff ff
	ff		 mov	 DWORD PTR tv144[ebp], ecx
$LN26@damage_obj:
  001d9	8b 95 74 ff ff
	ff		 mov	 edx, DWORD PTR tv144[ebp]
  001df	89 95 78 ff ff
	ff		 mov	 DWORD PTR tv145[ebp], edx
$LN28@damage_obj:
  001e5	8b 85 78 ff ff
	ff		 mov	 eax, DWORD PTR tv145[ebp]
  001eb	89 45 dc	 mov	 DWORD PTR _min_sector_x$[ebp], eax

; 1003 : 	max_sector_x = bound (max_sector_x, MIN_MAP_X_SECTOR, MAX_MAP_X_SECTOR);

  001ee	8b 45 d8	 mov	 eax, DWORD PTR _max_sector_x$[ebp]
  001f1	3b 05 14 00 00
	00		 cmp	 eax, DWORD PTR ?world_map@@3UWORLD_MAP_DATA@@A+20
  001f7	7d 0e		 jge	 SHORT $LN31@damage_obj
  001f9	8b 0d 14 00 00
	00		 mov	 ecx, DWORD PTR ?world_map@@3UWORLD_MAP_DATA@@A+20
  001ff	89 8d 78 ff ff
	ff		 mov	 DWORD PTR tv149[ebp], ecx
  00205	eb 2d		 jmp	 SHORT $LN32@damage_obj
$LN31@damage_obj:
  00207	8b 55 d8	 mov	 edx, DWORD PTR _max_sector_x$[ebp]
  0020a	3b 15 1c 00 00
	00		 cmp	 edx, DWORD PTR ?world_map@@3UWORLD_MAP_DATA@@A+28
  00210	7e 0d		 jle	 SHORT $LN29@damage_obj
  00212	a1 1c 00 00 00	 mov	 eax, DWORD PTR ?world_map@@3UWORLD_MAP_DATA@@A+28
  00217	89 85 74 ff ff
	ff		 mov	 DWORD PTR tv148[ebp], eax
  0021d	eb 09		 jmp	 SHORT $LN30@damage_obj
$LN29@damage_obj:
  0021f	8b 4d d8	 mov	 ecx, DWORD PTR _max_sector_x$[ebp]
  00222	89 8d 74 ff ff
	ff		 mov	 DWORD PTR tv148[ebp], ecx
$LN30@damage_obj:
  00228	8b 95 74 ff ff
	ff		 mov	 edx, DWORD PTR tv148[ebp]
  0022e	89 95 78 ff ff
	ff		 mov	 DWORD PTR tv149[ebp], edx
$LN32@damage_obj:
  00234	8b 85 78 ff ff
	ff		 mov	 eax, DWORD PTR tv149[ebp]
  0023a	89 45 d8	 mov	 DWORD PTR _max_sector_x$[ebp], eax

; 1004 : 
; 1005 : 	min_sector_z = bound (min_sector_z, MIN_MAP_Z_SECTOR, MAX_MAP_Z_SECTOR);

  0023d	8b 45 d4	 mov	 eax, DWORD PTR _min_sector_z$[ebp]
  00240	3b 05 18 00 00
	00		 cmp	 eax, DWORD PTR ?world_map@@3UWORLD_MAP_DATA@@A+24
  00246	7d 0e		 jge	 SHORT $LN35@damage_obj
  00248	8b 0d 18 00 00
	00		 mov	 ecx, DWORD PTR ?world_map@@3UWORLD_MAP_DATA@@A+24
  0024e	89 8d 78 ff ff
	ff		 mov	 DWORD PTR tv153[ebp], ecx
  00254	eb 2d		 jmp	 SHORT $LN36@damage_obj
$LN35@damage_obj:
  00256	8b 55 d4	 mov	 edx, DWORD PTR _min_sector_z$[ebp]
  00259	3b 15 20 00 00
	00		 cmp	 edx, DWORD PTR ?world_map@@3UWORLD_MAP_DATA@@A+32
  0025f	7e 0d		 jle	 SHORT $LN33@damage_obj
  00261	a1 20 00 00 00	 mov	 eax, DWORD PTR ?world_map@@3UWORLD_MAP_DATA@@A+32
  00266	89 85 74 ff ff
	ff		 mov	 DWORD PTR tv152[ebp], eax
  0026c	eb 09		 jmp	 SHORT $LN34@damage_obj
$LN33@damage_obj:
  0026e	8b 4d d4	 mov	 ecx, DWORD PTR _min_sector_z$[ebp]
  00271	89 8d 74 ff ff
	ff		 mov	 DWORD PTR tv152[ebp], ecx
$LN34@damage_obj:
  00277	8b 95 74 ff ff
	ff		 mov	 edx, DWORD PTR tv152[ebp]
  0027d	89 95 78 ff ff
	ff		 mov	 DWORD PTR tv153[ebp], edx
$LN36@damage_obj:
  00283	8b 85 78 ff ff
	ff		 mov	 eax, DWORD PTR tv153[ebp]
  00289	89 45 d4	 mov	 DWORD PTR _min_sector_z$[ebp], eax

; 1006 : 	max_sector_z = bound (max_sector_z, MIN_MAP_Z_SECTOR, MAX_MAP_Z_SECTOR);

  0028c	8b 45 d0	 mov	 eax, DWORD PTR _max_sector_z$[ebp]
  0028f	3b 05 18 00 00
	00		 cmp	 eax, DWORD PTR ?world_map@@3UWORLD_MAP_DATA@@A+24
  00295	7d 0e		 jge	 SHORT $LN39@damage_obj
  00297	8b 0d 18 00 00
	00		 mov	 ecx, DWORD PTR ?world_map@@3UWORLD_MAP_DATA@@A+24
  0029d	89 8d 78 ff ff
	ff		 mov	 DWORD PTR tv157[ebp], ecx
  002a3	eb 2d		 jmp	 SHORT $LN40@damage_obj
$LN39@damage_obj:
  002a5	8b 55 d0	 mov	 edx, DWORD PTR _max_sector_z$[ebp]
  002a8	3b 15 20 00 00
	00		 cmp	 edx, DWORD PTR ?world_map@@3UWORLD_MAP_DATA@@A+32
  002ae	7e 0d		 jle	 SHORT $LN37@damage_obj
  002b0	a1 20 00 00 00	 mov	 eax, DWORD PTR ?world_map@@3UWORLD_MAP_DATA@@A+32
  002b5	89 85 74 ff ff
	ff		 mov	 DWORD PTR tv156[ebp], eax
  002bb	eb 09		 jmp	 SHORT $LN38@damage_obj
$LN37@damage_obj:
  002bd	8b 4d d0	 mov	 ecx, DWORD PTR _max_sector_z$[ebp]
  002c0	89 8d 74 ff ff
	ff		 mov	 DWORD PTR tv156[ebp], ecx
$LN38@damage_obj:
  002c6	8b 95 74 ff ff
	ff		 mov	 edx, DWORD PTR tv156[ebp]
  002cc	89 95 78 ff ff
	ff		 mov	 DWORD PTR tv157[ebp], edx
$LN40@damage_obj:
  002d2	8b 85 78 ff ff
	ff		 mov	 eax, DWORD PTR tv157[ebp]
  002d8	89 45 d0	 mov	 DWORD PTR _max_sector_z$[ebp], eax

; 1007 : 
; 1008 : 	for (sz = min_sector_z; sz <= max_sector_z; sz ++)

  002db	8b 45 d4	 mov	 eax, DWORD PTR _min_sector_z$[ebp]
  002de	89 45 e0	 mov	 DWORD PTR _sz$[ebp], eax
  002e1	eb 09		 jmp	 SHORT $LN4@damage_obj
$LN2@damage_obj:
  002e3	8b 45 e0	 mov	 eax, DWORD PTR _sz$[ebp]
  002e6	83 c0 01	 add	 eax, 1
  002e9	89 45 e0	 mov	 DWORD PTR _sz$[ebp], eax
$LN4@damage_obj:
  002ec	8b 45 e0	 mov	 eax, DWORD PTR _sz$[ebp]
  002ef	3b 45 d0	 cmp	 eax, DWORD PTR _max_sector_z$[ebp]
  002f2	0f 8f 91 05 00
	00		 jg	 $LN3@damage_obj

; 1009 : 	{
; 1010 : 		for (sx = min_sector_x; sx <= max_sector_x; sx ++)

  002f8	8b 45 dc	 mov	 eax, DWORD PTR _min_sector_x$[ebp]
  002fb	89 45 e4	 mov	 DWORD PTR _sx$[ebp], eax
  002fe	eb 09		 jmp	 SHORT $LN7@damage_obj
$LN5@damage_obj:
  00300	8b 45 e4	 mov	 eax, DWORD PTR _sx$[ebp]
  00303	83 c0 01	 add	 eax, 1
  00306	89 45 e4	 mov	 DWORD PTR _sx$[ebp], eax
$LN7@damage_obj:
  00309	8b 45 e4	 mov	 eax, DWORD PTR _sx$[ebp]
  0030c	3b 45 d8	 cmp	 eax, DWORD PTR _max_sector_x$[ebp]
  0030f	0f 8f 6f 05 00
	00		 jg	 $LN6@damage_obj

; 1011 : 		{
; 1012 : 			sect = get_local_raw_sector_entity (sx, sz);

  00315	8b 45 e0	 mov	 eax, DWORD PTR _sz$[ebp]
  00318	0f af 05 08 00
	00 00		 imul	 eax, DWORD PTR ?world_map@@3UWORLD_MAP_DATA@@A+8
  0031f	03 45 e4	 add	 eax, DWORD PTR _sx$[ebp]
  00322	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?entity_sector_map@@3PAPAUENTITY@@A ; entity_sector_map
  00328	83 3c 81 00	 cmp	 DWORD PTR [ecx+eax*4], 0
  0032c	74 1d		 je	 SHORT $LN41@damage_obj
  0032e	8b 55 e0	 mov	 edx, DWORD PTR _sz$[ebp]
  00331	0f af 15 08 00
	00 00		 imul	 edx, DWORD PTR ?world_map@@3UWORLD_MAP_DATA@@A+8
  00338	03 55 e4	 add	 edx, DWORD PTR _sx$[ebp]
  0033b	a1 00 00 00 00	 mov	 eax, DWORD PTR ?entity_sector_map@@3PAPAUENTITY@@A ; entity_sector_map
  00340	8b 0c 90	 mov	 ecx, DWORD PTR [eax+edx*4]
  00343	89 8d 78 ff ff
	ff		 mov	 DWORD PTR tv175[ebp], ecx
  00349	eb 24		 jmp	 SHORT $LN42@damage_obj
$LN41@damage_obj:
  0034b	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??damage_objects_within_explosion_damage_radius@@YGXPAUENTITY@@0W4META_EXPLOSION_TYPES@@@Z@4JA
  00351	83 c2 3a	 add	 edx, 58			; 0000003aH
  00354	52		 push	 edx
  00355	68 00 00 00 00	 push	 OFFSET ??_C@_0FE@MFECPMIC@c?3?2users?2nhv90?2projects?2eech?2ap@
  0035a	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_sector_entity_map_pointer_message@@3PBDB ; null_sector_entity_map_pointer_message
  0035f	50		 push	 eax
  00360	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00365	c7 85 78 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv175[ebp], 0
$LN42@damage_obj:
  0036f	8b 8d 78 ff ff
	ff		 mov	 ecx, DWORD PTR tv175[ebp]
  00375	89 4d c4	 mov	 DWORD PTR _sect$[ebp], ecx

; 1013 : 
; 1014 : 			//
; 1015 : 			// search for damagable objects
; 1016 : 			//
; 1017 : 
; 1018 : 			object = get_local_entity_first_child (sect, LIST_TYPE_SECTOR);

  00378	83 7d c4 00	 cmp	 DWORD PTR _sect$[ebp], 0
  0037c	74 0d		 je	 SHORT $LN43@damage_obj
  0037e	8b 45 c4	 mov	 eax, DWORD PTR _sect$[ebp]
  00381	8b 08		 mov	 ecx, DWORD PTR [eax]
  00383	89 8d 78 ff ff
	ff		 mov	 DWORD PTR tv182[ebp], ecx
  00389	eb 24		 jmp	 SHORT $LN44@damage_obj
$LN43@damage_obj:
  0038b	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??damage_objects_within_explosion_damage_radius@@YGXPAUENTITY@@0W4META_EXPLOSION_TYPES@@@Z@4JA
  00391	83 c2 40	 add	 edx, 64			; 00000040H
  00394	52		 push	 edx
  00395	68 00 00 00 00	 push	 OFFSET ??_C@_0FE@MFECPMIC@c?3?2users?2nhv90?2projects?2eech?2ap@
  0039a	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  0039f	50		 push	 eax
  003a0	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  003a5	c7 85 78 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv182[ebp], 0
$LN44@damage_obj:
  003af	b9 01 00 00 00	 mov	 ecx, 1
  003b4	85 c9		 test	 ecx, ecx
  003b6	74 0c		 je	 SHORT $LN45@damage_obj
  003b8	c7 85 74 ff ff
	ff 21 00 00 00	 mov	 DWORD PTR tv190[ebp], 33 ; 00000021H
  003c2	eb 24		 jmp	 SHORT $LN46@damage_obj
$LN45@damage_obj:
  003c4	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??damage_objects_within_explosion_damage_radius@@YGXPAUENTITY@@0W4META_EXPLOSION_TYPES@@@Z@4JA
  003ca	83 c2 40	 add	 edx, 64			; 00000040H
  003cd	52		 push	 edx
  003ce	68 00 00 00 00	 push	 OFFSET ??_C@_0FE@MFECPMIC@c?3?2users?2nhv90?2projects?2eech?2ap@
  003d3	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_list_type_message@@3PBDB ; overload_invalid_list_type_message
  003d8	50		 push	 eax
  003d9	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  003de	c7 85 74 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv190[ebp], 0
$LN46@damage_obj:
  003e8	6a 21		 push	 33			; 00000021H
  003ea	8b 4d c4	 mov	 ecx, DWORD PTR _sect$[ebp]
  003ed	51		 push	 ecx
  003ee	69 95 78 ff ff
	ff b4 00 00 00	 imul	 edx, DWORD PTR tv182[ebp], 180
  003f8	8b 85 74 ff ff
	ff		 mov	 eax, DWORD PTR tv190[ebp]
  003fe	8b 8c 82 00 00
	00 00		 mov	 ecx, DWORD PTR ?fn_get_local_entity_first_child@@3PAY0CN@P6GPAUENTITY@@PAU1@W4LIST_TYPES@@@ZA[edx+eax*4]
  00405	ff d1		 call	 ecx
  00407	89 45 c0	 mov	 DWORD PTR _object$[ebp], eax
$LN71@damage_obj:

; 1019 : 
; 1020 : 			while (object)

  0040a	83 7d c0 00	 cmp	 DWORD PTR _object$[ebp], 0
  0040e	0f 84 6b 04 00
	00		 je	 $LN9@damage_obj

; 1021 : 			{
; 1022 : 				if (object == target)

  00414	8b 45 c0	 mov	 eax, DWORD PTR _object$[ebp]
  00417	3b 45 0c	 cmp	 eax, DWORD PTR _target$[ebp]
  0041a	0f 85 97 00 00
	00		 jne	 $LN13@damage_obj

; 1023 : 				{
; 1024 : 					//
; 1025 : 					// skip target, as it is dealt with elsewhere
; 1026 : 					//
; 1027 : 
; 1028 : 					object = get_local_entity_child_succ (object, LIST_TYPE_SECTOR);

  00420	83 7d c0 00	 cmp	 DWORD PTR _object$[ebp], 0
  00424	74 0d		 je	 SHORT $LN47@damage_obj
  00426	8b 45 c0	 mov	 eax, DWORD PTR _object$[ebp]
  00429	8b 08		 mov	 ecx, DWORD PTR [eax]
  0042b	89 8d 78 ff ff
	ff		 mov	 DWORD PTR tv204[ebp], ecx
  00431	eb 24		 jmp	 SHORT $LN48@damage_obj
$LN47@damage_obj:
  00433	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??damage_objects_within_explosion_damage_radius@@YGXPAUENTITY@@0W4META_EXPLOSION_TYPES@@@Z@4JA
  00439	83 c2 4a	 add	 edx, 74			; 0000004aH
  0043c	52		 push	 edx
  0043d	68 00 00 00 00	 push	 OFFSET ??_C@_0FE@MFECPMIC@c?3?2users?2nhv90?2projects?2eech?2ap@
  00442	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  00447	50		 push	 eax
  00448	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  0044d	c7 85 78 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv204[ebp], 0
$LN48@damage_obj:
  00457	b9 01 00 00 00	 mov	 ecx, 1
  0045c	85 c9		 test	 ecx, ecx
  0045e	74 0c		 je	 SHORT $LN49@damage_obj
  00460	c7 85 74 ff ff
	ff 21 00 00 00	 mov	 DWORD PTR tv212[ebp], 33 ; 00000021H
  0046a	eb 24		 jmp	 SHORT $LN50@damage_obj
$LN49@damage_obj:
  0046c	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??damage_objects_within_explosion_damage_radius@@YGXPAUENTITY@@0W4META_EXPLOSION_TYPES@@@Z@4JA
  00472	83 c2 4a	 add	 edx, 74			; 0000004aH
  00475	52		 push	 edx
  00476	68 00 00 00 00	 push	 OFFSET ??_C@_0FE@MFECPMIC@c?3?2users?2nhv90?2projects?2eech?2ap@
  0047b	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_list_type_message@@3PBDB ; overload_invalid_list_type_message
  00480	50		 push	 eax
  00481	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00486	c7 85 74 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv212[ebp], 0
$LN50@damage_obj:
  00490	6a 21		 push	 33			; 00000021H
  00492	8b 4d c0	 mov	 ecx, DWORD PTR _object$[ebp]
  00495	51		 push	 ecx
  00496	69 95 78 ff ff
	ff b4 00 00 00	 imul	 edx, DWORD PTR tv204[ebp], 180
  004a0	8b 85 74 ff ff
	ff		 mov	 eax, DWORD PTR tv212[ebp]
  004a6	8b 8c 82 00 00
	00 00		 mov	 ecx, DWORD PTR ?fn_get_local_entity_child_succ@@3PAY0CN@P6GPAUENTITY@@PAU1@W4LIST_TYPES@@@ZA[edx+eax*4]
  004ad	ff d1		 call	 ecx
  004af	89 45 c0	 mov	 DWORD PTR _object$[ebp], eax

; 1029 : 
; 1030 : 					continue;

  004b2	e9 53 ff ff ff	 jmp	 $LN71@damage_obj
$LN13@damage_obj:

; 1031 : 				}
; 1032 : 
; 1033 : 				switch (object->type)

  004b7	8b 45 c0	 mov	 eax, DWORD PTR _object$[ebp]
  004ba	8b 08		 mov	 ecx, DWORD PTR [eax]
  004bc	89 8d 78 ff ff
	ff		 mov	 DWORD PTR tv219[ebp], ecx
  004c2	8b 95 78 ff ff
	ff		 mov	 edx, DWORD PTR tv219[ebp]
  004c8	83 ea 01	 sub	 edx, 1
  004cb	89 95 78 ff ff
	ff		 mov	 DWORD PTR tv219[ebp], edx
  004d1	83 bd 78 ff ff
	ff 1d		 cmp	 DWORD PTR tv219[ebp], 29 ; 0000001dH
  004d8	0f 87 04 03 00
	00		 ja	 $LN10@damage_obj
  004de	8b 85 78 ff ff
	ff		 mov	 eax, DWORD PTR tv219[ebp]
  004e4	0f b6 88 00 00
	00 00		 movzx	 ecx, BYTE PTR $LN72@damage_obj[eax]
  004eb	ff 24 8d 00 00
	00 00		 jmp	 DWORD PTR $LN73@damage_obj[ecx*4]
$LN14@damage_obj:

; 1034 : 				{
; 1035 : 					case ENTITY_TYPE_ANTI_AIRCRAFT:
; 1036 : 					case ENTITY_TYPE_CITY_BUILDING:
; 1037 : 					case ENTITY_TYPE_FIXED_WING:
; 1038 : 					case ENTITY_TYPE_HELICOPTER:
; 1039 : 					case ENTITY_TYPE_PERSON:
; 1040 : 					case ENTITY_TYPE_PYLON:
; 1041 : 					case ENTITY_TYPE_ROUTED_VEHICLE:
; 1042 : 					case ENTITY_TYPE_SCENIC:
; 1043 : 					case ENTITY_TYPE_SEGMENT:
; 1044 : 					case ENTITY_TYPE_SHIP_VEHICLE:
; 1045 : 					case ENTITY_TYPE_SITE:
; 1046 : 					case ENTITY_TYPE_SITE_UPDATABLE:
; 1047 : 					{
; 1048 : 						if (get_local_entity_int_value (object, INT_TYPE_ALIVE))

  004f2	83 7d c0 00	 cmp	 DWORD PTR _object$[ebp], 0
  004f6	74 0d		 je	 SHORT $LN51@damage_obj
  004f8	8b 45 c0	 mov	 eax, DWORD PTR _object$[ebp]
  004fb	8b 08		 mov	 ecx, DWORD PTR [eax]
  004fd	89 8d 78 ff ff
	ff		 mov	 DWORD PTR tv225[ebp], ecx
  00503	eb 20		 jmp	 SHORT $LN52@damage_obj
$LN51@damage_obj:
  00505	68 18 04 00 00	 push	 1048			; 00000418H
  0050a	68 00 00 00 00	 push	 OFFSET ??_C@_0FE@MFECPMIC@c?3?2users?2nhv90?2projects?2eech?2ap@
  0050f	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  00515	52		 push	 edx
  00516	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  0051b	c7 85 78 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv225[ebp], 0
$LN52@damage_obj:
  00525	b8 01 00 00 00	 mov	 eax, 1
  0052a	85 c0		 test	 eax, eax
  0052c	74 0c		 je	 SHORT $LN53@damage_obj
  0052e	c7 85 74 ff ff
	ff 07 00 00 00	 mov	 DWORD PTR tv232[ebp], 7
  00538	eb 20		 jmp	 SHORT $LN54@damage_obj
$LN53@damage_obj:
  0053a	68 18 04 00 00	 push	 1048			; 00000418H
  0053f	68 00 00 00 00	 push	 OFFSET ??_C@_0FE@MFECPMIC@c?3?2users?2nhv90?2projects?2eech?2ap@
  00544	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?overload_invalid_int_type_message@@3PBDB ; overload_invalid_int_type_message
  0054a	51		 push	 ecx
  0054b	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00550	c7 85 74 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv232[ebp], 0
$LN54@damage_obj:
  0055a	6a 07		 push	 7
  0055c	8b 55 c0	 mov	 edx, DWORD PTR _object$[ebp]
  0055f	52		 push	 edx
  00560	69 85 78 ff ff
	ff 5c 04 00 00	 imul	 eax, DWORD PTR tv225[ebp], 1116
  0056a	8b 8d 74 ff ff
	ff		 mov	 ecx, DWORD PTR tv232[ebp]
  00570	8b 94 88 00 00
	00 00		 mov	 edx, DWORD PTR ?fn_get_local_entity_int_value@@3PAY0BBH@P6GHPAUENTITY@@W4INT_TYPES@@@ZA[eax+ecx*4]
  00577	ff d2		 call	 edx
  00579	85 c0		 test	 eax, eax
  0057b	0f 84 61 02 00
	00		 je	 $LN17@damage_obj

; 1049 : 						{
; 1050 : 							object_position = get_local_entity_vec3d_ptr (object, VEC3D_TYPE_POSITION);

  00581	83 7d c0 00	 cmp	 DWORD PTR _object$[ebp], 0
  00585	74 0d		 je	 SHORT $LN55@damage_obj
  00587	8b 45 c0	 mov	 eax, DWORD PTR _object$[ebp]
  0058a	8b 08		 mov	 ecx, DWORD PTR [eax]
  0058c	89 8d 78 ff ff
	ff		 mov	 DWORD PTR tv245[ebp], ecx
  00592	eb 24		 jmp	 SHORT $LN56@damage_obj
$LN55@damage_obj:
  00594	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??damage_objects_within_explosion_damage_radius@@YGXPAUENTITY@@0W4META_EXPLOSION_TYPES@@@Z@4JA
  0059a	83 c2 60	 add	 edx, 96			; 00000060H
  0059d	52		 push	 edx
  0059e	68 00 00 00 00	 push	 OFFSET ??_C@_0FE@MFECPMIC@c?3?2users?2nhv90?2projects?2eech?2ap@
  005a3	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  005a8	50		 push	 eax
  005a9	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  005ae	c7 85 78 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv245[ebp], 0
$LN56@damage_obj:
  005b8	b9 01 00 00 00	 mov	 ecx, 1
  005bd	85 c9		 test	 ecx, ecx
  005bf	74 0c		 je	 SHORT $LN57@damage_obj
  005c1	c7 85 74 ff ff
	ff 08 00 00 00	 mov	 DWORD PTR tv253[ebp], 8
  005cb	eb 24		 jmp	 SHORT $LN58@damage_obj
$LN57@damage_obj:
  005cd	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??damage_objects_within_explosion_damage_radius@@YGXPAUENTITY@@0W4META_EXPLOSION_TYPES@@@Z@4JA
  005d3	83 c2 60	 add	 edx, 96			; 00000060H
  005d6	52		 push	 edx
  005d7	68 00 00 00 00	 push	 OFFSET ??_C@_0FE@MFECPMIC@c?3?2users?2nhv90?2projects?2eech?2ap@
  005dc	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_vec3d_type_message@@3PBDB ; overload_invalid_vec3d_type_message
  005e1	50		 push	 eax
  005e2	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  005e7	c7 85 74 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv253[ebp], 0
$LN58@damage_obj:
  005f1	6a 08		 push	 8
  005f3	8b 4d c0	 mov	 ecx, DWORD PTR _object$[ebp]
  005f6	51		 push	 ecx
  005f7	6b 95 78 ff ff
	ff 60		 imul	 edx, DWORD PTR tv245[ebp], 96
  005fe	8b 85 74 ff ff
	ff		 mov	 eax, DWORD PTR tv253[ebp]
  00604	8b 8c 82 00 00
	00 00		 mov	 ecx, DWORD PTR ?fn_get_local_entity_vec3d_ptr@@3PAY0BI@P6GPAUVEC3D@@PAUENTITY@@W4VEC3D_TYPES@@@ZA[edx+eax*4]
  0060b	ff d1		 call	 ecx
  0060d	89 45 c8	 mov	 DWORD PTR _object_position$[ebp], eax

; 1051 : 
; 1052 : 							if (object_position)

  00610	83 7d c8 00	 cmp	 DWORD PTR _object_position$[ebp], 0
  00614	0f 84 c8 01 00
	00		 je	 $LN17@damage_obj

; 1053 : 							{
; 1054 : 								range = get_sqr_3d_range (explosion_position, object_position);

  0061a	8b 45 c8	 mov	 eax, DWORD PTR _object_position$[ebp]
  0061d	50		 push	 eax
  0061e	8b 4d cc	 mov	 ecx, DWORD PTR _explosion_position$[ebp]
  00621	51		 push	 ecx
  00622	e8 00 00 00 00	 call	 ?get_sqr_3d_range@@YGMPBUVEC3D@@0@Z ; get_sqr_3d_range
  00627	d9 5d f8	 fstp	 DWORD PTR _range$[ebp]

; 1055 : 
; 1056 : 								if (range < R)

  0062a	f3 0f 10 45 fc	 movss	 xmm0, DWORD PTR _R$[ebp]
  0062f	0f 2f 45 f8	 comiss	 xmm0, DWORD PTR _range$[ebp]
  00633	0f 86 a9 01 00
	00		 jbe	 $LN17@damage_obj

; 1057 : 								{
; 1058 : 									float
; 1059 : 										x;
; 1060 : 
; 1061 : 									x = (range / R);

  00639	f3 0f 10 45 f8	 movss	 xmm0, DWORD PTR _range$[ebp]
  0063e	f3 0f 5e 45 fc	 divss	 xmm0, DWORD PTR _R$[ebp]
  00643	f3 0f 11 45 bc	 movss	 DWORD PTR _x$1[ebp], xmm0

; 1062 : 									
; 1063 : 									damage_modifier = 1.0 - x;

  00648	f3 0f 5a 45 bc	 cvtss2sd xmm0, DWORD PTR _x$1[ebp]
  0064d	f2 0f 10 0d 00
	00 00 00	 movsd	 xmm1, QWORD PTR __real@3ff0000000000000
  00655	f2 0f 5c c8	 subsd	 xmm1, xmm0
  00659	f2 0f 5a c1	 cvtsd2ss xmm0, xmm1
  0065d	f3 0f 11 45 e8	 movss	 DWORD PTR _damage_modifier$[ebp], xmm0

; 1064 : 
; 1065 : 									// arneh - for armour piercing warheads (i.e. shaped charge), damage is much less severe for targets not hit directly
; 1066 : 									if (get_local_entity_int_value (en, INT_TYPE_WEAPON_WARHEAD_TYPE) == WEAPON_WARHEAD_TYPE_HIGH_EXPLOSIVE_ANTI_TANK
; 1067 : 										|| get_local_entity_int_value (en, INT_TYPE_WEAPON_WARHEAD_TYPE) == WEAPON_WARHEAD_TYPE_ARMOUR_PIERCING)

  00662	83 7d 08 00	 cmp	 DWORD PTR _en$[ebp], 0
  00666	74 0d		 je	 SHORT $LN59@damage_obj
  00668	8b 45 08	 mov	 eax, DWORD PTR _en$[ebp]
  0066b	8b 08		 mov	 ecx, DWORD PTR [eax]
  0066d	89 8d 78 ff ff
	ff		 mov	 DWORD PTR tv273[ebp], ecx
  00673	eb 20		 jmp	 SHORT $LN60@damage_obj
$LN59@damage_obj:
  00675	68 2a 04 00 00	 push	 1066			; 0000042aH
  0067a	68 00 00 00 00	 push	 OFFSET ??_C@_0FE@MFECPMIC@c?3?2users?2nhv90?2projects?2eech?2ap@
  0067f	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  00685	52		 push	 edx
  00686	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  0068b	c7 85 78 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv273[ebp], 0
$LN60@damage_obj:
  00695	b8 01 00 00 00	 mov	 eax, 1
  0069a	85 c0		 test	 eax, eax
  0069c	74 0c		 je	 SHORT $LN61@damage_obj
  0069e	c7 85 74 ff ff
	ff 10 01 00 00	 mov	 DWORD PTR tv280[ebp], 272 ; 00000110H
  006a8	eb 20		 jmp	 SHORT $LN62@damage_obj
$LN61@damage_obj:
  006aa	68 2a 04 00 00	 push	 1066			; 0000042aH
  006af	68 00 00 00 00	 push	 OFFSET ??_C@_0FE@MFECPMIC@c?3?2users?2nhv90?2projects?2eech?2ap@
  006b4	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?overload_invalid_int_type_message@@3PBDB ; overload_invalid_int_type_message
  006ba	51		 push	 ecx
  006bb	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  006c0	c7 85 74 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv280[ebp], 0
$LN62@damage_obj:
  006ca	68 10 01 00 00	 push	 272			; 00000110H
  006cf	8b 55 08	 mov	 edx, DWORD PTR _en$[ebp]
  006d2	52		 push	 edx
  006d3	69 85 78 ff ff
	ff 5c 04 00 00	 imul	 eax, DWORD PTR tv273[ebp], 1116
  006dd	8b 8d 74 ff ff
	ff		 mov	 ecx, DWORD PTR tv280[ebp]
  006e3	8b 94 88 00 00
	00 00		 mov	 edx, DWORD PTR ?fn_get_local_entity_int_value@@3PAY0BBH@P6GHPAUENTITY@@W4INT_TYPES@@@ZA[eax+ecx*4]
  006ea	ff d2		 call	 edx
  006ec	83 f8 04	 cmp	 eax, 4
  006ef	0f 84 8f 00 00
	00		 je	 $LN19@damage_obj
  006f5	83 7d 08 00	 cmp	 DWORD PTR _en$[ebp], 0
  006f9	74 0d		 je	 SHORT $LN63@damage_obj
  006fb	8b 45 08	 mov	 eax, DWORD PTR _en$[ebp]
  006fe	8b 08		 mov	 ecx, DWORD PTR [eax]
  00700	89 8d 78 ff ff
	ff		 mov	 DWORD PTR tv292[ebp], ecx
  00706	eb 20		 jmp	 SHORT $LN64@damage_obj
$LN63@damage_obj:
  00708	68 2b 04 00 00	 push	 1067			; 0000042bH
  0070d	68 00 00 00 00	 push	 OFFSET ??_C@_0FE@MFECPMIC@c?3?2users?2nhv90?2projects?2eech?2ap@
  00712	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  00718	52		 push	 edx
  00719	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  0071e	c7 85 78 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv292[ebp], 0
$LN64@damage_obj:
  00728	b8 01 00 00 00	 mov	 eax, 1
  0072d	85 c0		 test	 eax, eax
  0072f	74 0c		 je	 SHORT $LN65@damage_obj
  00731	c7 85 74 ff ff
	ff 10 01 00 00	 mov	 DWORD PTR tv299[ebp], 272 ; 00000110H
  0073b	eb 20		 jmp	 SHORT $LN66@damage_obj
$LN65@damage_obj:
  0073d	68 2b 04 00 00	 push	 1067			; 0000042bH
  00742	68 00 00 00 00	 push	 OFFSET ??_C@_0FE@MFECPMIC@c?3?2users?2nhv90?2projects?2eech?2ap@
  00747	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?overload_invalid_int_type_message@@3PBDB ; overload_invalid_int_type_message
  0074d	51		 push	 ecx
  0074e	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00753	c7 85 74 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv299[ebp], 0
$LN66@damage_obj:
  0075d	68 10 01 00 00	 push	 272			; 00000110H
  00762	8b 55 08	 mov	 edx, DWORD PTR _en$[ebp]
  00765	52		 push	 edx
  00766	69 85 78 ff ff
	ff 5c 04 00 00	 imul	 eax, DWORD PTR tv292[ebp], 1116
  00770	8b 8d 74 ff ff
	ff		 mov	 ecx, DWORD PTR tv299[ebp]
  00776	8b 94 88 00 00
	00 00		 mov	 edx, DWORD PTR ?fn_get_local_entity_int_value@@3PAY0BBH@P6GHPAUENTITY@@W4INT_TYPES@@@ZA[eax+ecx*4]
  0077d	ff d2		 call	 edx
  0077f	83 f8 03	 cmp	 eax, 3
  00782	75 3f		 jne	 SHORT $LN18@damage_obj
$LN19@damage_obj:

; 1068 : 									{
; 1069 : 										debug_log("Damage level reduced from %.2f to %.2f for armour piercing charge", damage_modifier, damage_modifier*damage_modifier);

  00784	f3 0f 10 45 e8	 movss	 xmm0, DWORD PTR _damage_modifier$[ebp]
  00789	f3 0f 59 45 e8	 mulss	 xmm0, DWORD PTR _damage_modifier$[ebp]
  0078e	f3 0f 5a c0	 cvtss2sd xmm0, xmm0
  00792	83 ec 08	 sub	 esp, 8
  00795	f2 0f 11 04 24	 movsd	 QWORD PTR [esp], xmm0
  0079a	f3 0f 5a 45 e8	 cvtss2sd xmm0, DWORD PTR _damage_modifier$[ebp]
  0079f	83 ec 08	 sub	 esp, 8
  007a2	f2 0f 11 04 24	 movsd	 QWORD PTR [esp], xmm0
  007a7	68 00 00 00 00	 push	 OFFSET ??_C@_0EC@HBNEJKBC@Damage?5level?5reduced?5from?5?$CF?42f?5@
  007ac	e8 00 00 00 00	 call	 ?debug_log@@YAXPBDZZ	; debug_log
  007b1	83 c4 14	 add	 esp, 20			; 00000014H

; 1070 : 										damage_modifier *= damage_modifier;

  007b4	f3 0f 10 45 e8	 movss	 xmm0, DWORD PTR _damage_modifier$[ebp]
  007b9	f3 0f 59 45 e8	 mulss	 xmm0, DWORD PTR _damage_modifier$[ebp]
  007be	f3 0f 11 45 e8	 movss	 DWORD PTR _damage_modifier$[ebp], xmm0
$LN18@damage_obj:

; 1071 : 									}
; 1072 : 
; 1073 : 									#if DEBUG_MODULE
; 1074 : 									
; 1075 : 									debug_filtered_log ("EXPLOSN : range %.2f, damage radius %.2f --> damage modifier = %f", range, R, damage_modifier);
; 1076 : 
; 1077 : 									#endif
; 1078 : 
; 1079 : 									notify_local_entity (ENTITY_MESSAGE_COLLISION, object, en, damage_modifier);

  007c3	f3 0f 5a 45 e8	 cvtss2sd xmm0, DWORD PTR _damage_modifier$[ebp]
  007c8	83 ec 08	 sub	 esp, 8
  007cb	f2 0f 11 04 24	 movsd	 QWORD PTR [esp], xmm0
  007d0	8b 45 08	 mov	 eax, DWORD PTR _en$[ebp]
  007d3	50		 push	 eax
  007d4	8b 4d c0	 mov	 ecx, DWORD PTR _object$[ebp]
  007d7	51		 push	 ecx
  007d8	6a 07		 push	 7
  007da	e8 00 00 00 00	 call	 ?notify_local_entity@@YAHW4ENTITY_MESSAGES@@PAUENTITY@@1ZZ ; notify_local_entity
  007df	83 c4 14	 add	 esp, 20			; 00000014H
$LN17@damage_obj:
$LN10@damage_obj:

; 1080 : 								}
; 1081 : 							}
; 1082 : 						}
; 1083 : 
; 1084 : 						break;
; 1085 : 					}
; 1086 : 				}
; 1087 : 
; 1088 : 				object = get_local_entity_child_succ (object, LIST_TYPE_SECTOR);

  007e2	83 7d c0 00	 cmp	 DWORD PTR _object$[ebp], 0
  007e6	74 0d		 je	 SHORT $LN67@damage_obj
  007e8	8b 45 c0	 mov	 eax, DWORD PTR _object$[ebp]
  007eb	8b 08		 mov	 ecx, DWORD PTR [eax]
  007ed	89 8d 78 ff ff
	ff		 mov	 DWORD PTR tv326[ebp], ecx
  007f3	eb 27		 jmp	 SHORT $LN68@damage_obj
$LN67@damage_obj:
  007f5	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??damage_objects_within_explosion_damage_radius@@YGXPAUENTITY@@0W4META_EXPLOSION_TYPES@@@Z@4JA
  007fb	81 c2 86 00 00
	00		 add	 edx, 134		; 00000086H
  00801	52		 push	 edx
  00802	68 00 00 00 00	 push	 OFFSET ??_C@_0FE@MFECPMIC@c?3?2users?2nhv90?2projects?2eech?2ap@
  00807	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  0080c	50		 push	 eax
  0080d	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00812	c7 85 78 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv326[ebp], 0
$LN68@damage_obj:
  0081c	b9 01 00 00 00	 mov	 ecx, 1
  00821	85 c9		 test	 ecx, ecx
  00823	74 0c		 je	 SHORT $LN69@damage_obj
  00825	c7 85 74 ff ff
	ff 21 00 00 00	 mov	 DWORD PTR tv334[ebp], 33 ; 00000021H
  0082f	eb 27		 jmp	 SHORT $LN70@damage_obj
$LN69@damage_obj:
  00831	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??damage_objects_within_explosion_damage_radius@@YGXPAUENTITY@@0W4META_EXPLOSION_TYPES@@@Z@4JA
  00837	81 c2 86 00 00
	00		 add	 edx, 134		; 00000086H
  0083d	52		 push	 edx
  0083e	68 00 00 00 00	 push	 OFFSET ??_C@_0FE@MFECPMIC@c?3?2users?2nhv90?2projects?2eech?2ap@
  00843	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_list_type_message@@3PBDB ; overload_invalid_list_type_message
  00848	50		 push	 eax
  00849	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  0084e	c7 85 74 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv334[ebp], 0
$LN70@damage_obj:
  00858	6a 21		 push	 33			; 00000021H
  0085a	8b 4d c0	 mov	 ecx, DWORD PTR _object$[ebp]
  0085d	51		 push	 ecx
  0085e	69 95 78 ff ff
	ff b4 00 00 00	 imul	 edx, DWORD PTR tv326[ebp], 180
  00868	8b 85 74 ff ff
	ff		 mov	 eax, DWORD PTR tv334[ebp]
  0086e	8b 8c 82 00 00
	00 00		 mov	 ecx, DWORD PTR ?fn_get_local_entity_child_succ@@3PAY0CN@P6GPAUENTITY@@PAU1@W4LIST_TYPES@@@ZA[edx+eax*4]
  00875	ff d1		 call	 ecx
  00877	89 45 c0	 mov	 DWORD PTR _object$[ebp], eax

; 1089 : 			}

  0087a	e9 8b fb ff ff	 jmp	 $LN71@damage_obj
$LN9@damage_obj:

; 1090 : 		}

  0087f	e9 7c fa ff ff	 jmp	 $LN5@damage_obj
$LN6@damage_obj:

; 1091 : 	}

  00884	e9 5a fa ff ff	 jmp	 $LN2@damage_obj
$LN3@damage_obj:
$LN1@damage_obj:

; 1092 : }

  00889	5f		 pop	 edi
  0088a	5e		 pop	 esi
  0088b	5b		 pop	 ebx
  0088c	8b e5		 mov	 esp, ebp
  0088e	5d		 pop	 ebp
  0088f	c2 0c 00	 ret	 12			; 0000000cH
  00892	66 90		 npad	 2
$LN73@damage_obj:
  00894	00 00 00 00	 DD	 $LN14@damage_obj
  00898	00 00 00 00	 DD	 $LN10@damage_obj
$LN72@damage_obj:
  0089c	00		 DB	 0
  0089d	01		 DB	 1
  0089e	01		 DB	 1
  0089f	01		 DB	 1
  008a0	01		 DB	 1
  008a1	00		 DB	 0
  008a2	01		 DB	 1
  008a3	01		 DB	 1
  008a4	01		 DB	 1
  008a5	00		 DB	 0
  008a6	01		 DB	 1
  008a7	01		 DB	 1
  008a8	01		 DB	 1
  008a9	00		 DB	 0
  008aa	01		 DB	 1
  008ab	01		 DB	 1
  008ac	01		 DB	 1
  008ad	01		 DB	 1
  008ae	00		 DB	 0
  008af	01		 DB	 1
  008b0	00		 DB	 0
  008b1	01		 DB	 1
  008b2	00		 DB	 0
  008b3	00		 DB	 0
  008b4	01		 DB	 1
  008b5	00		 DB	 0
  008b6	01		 DB	 1
  008b7	00		 DB	 0
  008b8	00		 DB	 0
  008b9	00		 DB	 0
?damage_objects_within_explosion_damage_radius@@YGXPAUENTITY@@0W4META_EXPLOSION_TYPES@@@Z ENDP ; damage_objects_within_explosion_damage_radius
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\entity\special\effect\explosn\explosn.c
;	COMDAT ?create_meta_explosion_sound_effect@@YGHPAUMETA_EXPLOSION_COMPONENT@@PAUVEC3D@@PAH@Z
_TEXT	SEGMENT
tv85 = -76						; size = 4
_sampleToUse$ = -8					; size = 4
_new_entity$ = -4					; size = 4
_explosion_component$ = 8				; size = 4
_position$ = 12						; size = 4
_entity_index_list$ = 16				; size = 4
?create_meta_explosion_sound_effect@@YGHPAUMETA_EXPLOSION_COMPONENT@@PAUVEC3D@@PAH@Z PROC ; create_meta_explosion_sound_effect, COMDAT

; 655  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 4c	 sub	 esp, 76			; 0000004cH
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 656  : 	entity
; 657  : 		*new_entity;
; 658  : 	int sampleToUse;
; 659  : 
; 660  : 	#if DEBUG_MODULE >= 2
; 661  : 
; 662  : 	debug_log("EXPLOSION : creating sound effect" );
; 663  : 
; 664  : 	debug_log( "index : %d", entity_index_list[ 0 ] );
; 665  : 
; 666  : 	#endif
; 667  : 
; 668  : 
; 669  : 	if ((explosion_component->sound_type == SOUND_SAMPLE_INDEX_EXPLOSION_DISTANT_1) || 
; 670  : 		(explosion_component->sound_type == SOUND_SAMPLE_INDEX_EXPLOSION_DISTANT_2) ||
; 671  : 		(explosion_component->sound_type == SOUND_SAMPLE_INDEX_EXPLOSION_DISTANT_3) ||
; 672  : 		(explosion_component->sound_type == SOUND_SAMPLE_INDEX_EXPLOSION_DISTANT_4) ||
; 673  : 		(explosion_component->sound_type == SOUND_SAMPLE_INDEX_EXPLOSION_DISTANT_5) ||
; 674  : 		(explosion_component->sound_type == SOUND_SAMPLE_INDEX_EXPLOSION_DISTANT_6) ||

  00009	8b 45 08	 mov	 eax, DWORD PTR _explosion_component$[ebp]
  0000c	81 78 04 d1 07
	00 00		 cmp	 DWORD PTR [eax+4], 2001	; 000007d1H
  00013	74 4c		 je	 SHORT $LN5@create_met
  00015	8b 45 08	 mov	 eax, DWORD PTR _explosion_component$[ebp]
  00018	81 78 04 d2 07
	00 00		 cmp	 DWORD PTR [eax+4], 2002	; 000007d2H
  0001f	74 40		 je	 SHORT $LN5@create_met
  00021	8b 45 08	 mov	 eax, DWORD PTR _explosion_component$[ebp]
  00024	81 78 04 d3 07
	00 00		 cmp	 DWORD PTR [eax+4], 2003	; 000007d3H
  0002b	74 34		 je	 SHORT $LN5@create_met
  0002d	8b 45 08	 mov	 eax, DWORD PTR _explosion_component$[ebp]
  00030	81 78 04 d4 07
	00 00		 cmp	 DWORD PTR [eax+4], 2004	; 000007d4H
  00037	74 28		 je	 SHORT $LN5@create_met
  00039	8b 45 08	 mov	 eax, DWORD PTR _explosion_component$[ebp]
  0003c	81 78 04 d5 07
	00 00		 cmp	 DWORD PTR [eax+4], 2005	; 000007d5H
  00043	74 1c		 je	 SHORT $LN5@create_met
  00045	8b 45 08	 mov	 eax, DWORD PTR _explosion_component$[ebp]
  00048	81 78 04 d6 07
	00 00		 cmp	 DWORD PTR [eax+4], 2006	; 000007d6H
  0004f	74 10		 je	 SHORT $LN5@create_met
  00051	8b 45 08	 mov	 eax, DWORD PTR _explosion_component$[ebp]
  00054	81 78 04 d7 07
	00 00		 cmp	 DWORD PTR [eax+4], 2007	; 000007d7H
  0005b	0f 85 a1 00 00
	00		 jne	 $LN2@create_met
$LN5@create_met:

; 675  : 		(explosion_component->sound_type == SOUND_SAMPLE_INDEX_EXPLOSION_DISTANT_7))
; 676  : 	{
; 677  : 		sampleToUse = 1 + (int) (7.0*rand()/(RAND_MAX+1.0));

  00061	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__rand
  00067	f2 0f 2a c0	 cvtsi2sd xmm0, eax
  0006b	f2 0f 59 05 00
	00 00 00	 mulsd	 xmm0, QWORD PTR __real@401c000000000000
  00073	f2 0f 5e 05 00
	00 00 00	 divsd	 xmm0, QWORD PTR __real@40e0000000000000
  0007b	f2 0f 2c c0	 cvttsd2si eax, xmm0
  0007f	83 c0 01	 add	 eax, 1
  00082	89 45 f8	 mov	 DWORD PTR _sampleToUse$[ebp], eax

; 678  : 		switch(sampleToUse)

  00085	8b 45 f8	 mov	 eax, DWORD PTR _sampleToUse$[ebp]
  00088	89 45 b4	 mov	 DWORD PTR tv85[ebp], eax
  0008b	8b 4d b4	 mov	 ecx, DWORD PTR tv85[ebp]
  0008e	83 e9 01	 sub	 ecx, 1
  00091	89 4d b4	 mov	 DWORD PTR tv85[ebp], ecx
  00094	83 7d b4 06	 cmp	 DWORD PTR tv85[ebp], 6
  00098	77 5e		 ja	 SHORT $LN13@create_met
  0009a	8b 55 b4	 mov	 edx, DWORD PTR tv85[ebp]
  0009d	ff 24 95 00 00
	00 00		 jmp	 DWORD PTR $LN15@create_met[edx*4]
$LN6@create_met:

; 679  : 		{
; 680  : 			case 1:	explosion_component->sound_type = SOUND_SAMPLE_INDEX_EXPLOSION_DISTANT_1;

  000a4	8b 45 08	 mov	 eax, DWORD PTR _explosion_component$[ebp]
  000a7	c7 40 04 d1 07
	00 00		 mov	 DWORD PTR [eax+4], 2001	; 000007d1H

; 681  : 					break;

  000ae	eb 52		 jmp	 SHORT $LN2@create_met
$LN7@create_met:

; 682  : 			case 2:	explosion_component->sound_type = SOUND_SAMPLE_INDEX_EXPLOSION_DISTANT_2;

  000b0	8b 45 08	 mov	 eax, DWORD PTR _explosion_component$[ebp]
  000b3	c7 40 04 d2 07
	00 00		 mov	 DWORD PTR [eax+4], 2002	; 000007d2H

; 683  : 					break;

  000ba	eb 46		 jmp	 SHORT $LN2@create_met
$LN8@create_met:

; 684  : 			case 3:	explosion_component->sound_type = SOUND_SAMPLE_INDEX_EXPLOSION_DISTANT_3;

  000bc	8b 45 08	 mov	 eax, DWORD PTR _explosion_component$[ebp]
  000bf	c7 40 04 d3 07
	00 00		 mov	 DWORD PTR [eax+4], 2003	; 000007d3H

; 685  : 					break;

  000c6	eb 3a		 jmp	 SHORT $LN2@create_met
$LN9@create_met:

; 686  : 			case 4:	explosion_component->sound_type = SOUND_SAMPLE_INDEX_EXPLOSION_DISTANT_4;

  000c8	8b 45 08	 mov	 eax, DWORD PTR _explosion_component$[ebp]
  000cb	c7 40 04 d4 07
	00 00		 mov	 DWORD PTR [eax+4], 2004	; 000007d4H

; 687  : 					break;

  000d2	eb 2e		 jmp	 SHORT $LN2@create_met
$LN10@create_met:

; 688  : 			case 5:	explosion_component->sound_type = SOUND_SAMPLE_INDEX_EXPLOSION_DISTANT_5;

  000d4	8b 45 08	 mov	 eax, DWORD PTR _explosion_component$[ebp]
  000d7	c7 40 04 d5 07
	00 00		 mov	 DWORD PTR [eax+4], 2005	; 000007d5H

; 689  : 					break;

  000de	eb 22		 jmp	 SHORT $LN2@create_met
$LN11@create_met:

; 690  : 			case 6:	explosion_component->sound_type = SOUND_SAMPLE_INDEX_EXPLOSION_DISTANT_6;

  000e0	8b 45 08	 mov	 eax, DWORD PTR _explosion_component$[ebp]
  000e3	c7 40 04 d6 07
	00 00		 mov	 DWORD PTR [eax+4], 2006	; 000007d6H

; 691  : 					break;

  000ea	eb 16		 jmp	 SHORT $LN2@create_met
$LN12@create_met:

; 692  : 			case 7:	explosion_component->sound_type = SOUND_SAMPLE_INDEX_EXPLOSION_DISTANT_7;

  000ec	8b 45 08	 mov	 eax, DWORD PTR _explosion_component$[ebp]
  000ef	c7 40 04 d7 07
	00 00		 mov	 DWORD PTR [eax+4], 2007	; 000007d7H

; 693  : 					break;

  000f6	eb 0a		 jmp	 SHORT $LN2@create_met
$LN13@create_met:

; 694  : 			default:	explosion_component->sound_type = SOUND_SAMPLE_INDEX_EXPLOSION_DISTANT_1;

  000f8	8b 45 08	 mov	 eax, DWORD PTR _explosion_component$[ebp]
  000fb	c7 40 04 d1 07
	00 00		 mov	 DWORD PTR [eax+4], 2001	; 000007d1H
$LN2@create_met:

; 695  : 					break;
; 696  : 		}
; 697  : 	}
; 698  : 
; 699  : 
; 700  : 	new_entity = create_local_sound_effect_entity

  00102	8b 45 08	 mov	 eax, DWORD PTR _explosion_component$[ebp]
  00105	83 c0 04	 add	 eax, 4
  00108	50		 push	 eax
  00109	6a 01		 push	 1
  0010b	6a 00		 push	 0
  0010d	6a 01		 push	 1
  0010f	51		 push	 ecx
  00110	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3f800000
  00118	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  0011d	8b 4d 08	 mov	 ecx, DWORD PTR _explosion_component$[ebp]
  00120	51		 push	 ecx
  00121	f3 0f 10 41 08	 movss	 xmm0, DWORD PTR [ecx+8]
  00126	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  0012b	8b 55 0c	 mov	 edx, DWORD PTR _position$[ebp]
  0012e	52		 push	 edx
  0012f	6a 00		 push	 0
  00131	6a 00		 push	 0
  00133	6a 1a		 push	 26			; 0000001aH
  00135	6a 00		 push	 0
  00137	8b 45 0c	 mov	 eax, DWORD PTR _position$[ebp]
  0013a	50		 push	 eax
  0013b	e8 00 00 00 00	 call	 ?get_local_sector_entity@@YGPAUENTITY@@PAUVEC3D@@@Z ; get_local_sector_entity
  00140	50		 push	 eax
  00141	b9 04 00 00 00	 mov	 ecx, 4
  00146	6b d1 00	 imul	 edx, ecx, 0
  00149	8b 45 10	 mov	 eax, DWORD PTR _entity_index_list$[ebp]
  0014c	8b 0c 10	 mov	 ecx, DWORD PTR [eax+edx]
  0014f	51		 push	 ecx
  00150	e8 00 00 00 00	 call	 ?create_local_sound_effect_entity@@YGPAUENTITY@@HPAU1@W4ENTITY_SIDES@@HW4SOUND_CHANNEL_TYPES@@W4SOUND_LOCALITY_TYPES@@PAUVEC3D@@MMHHHPAH@Z ; create_local_sound_effect_entity
  00155	89 45 fc	 mov	 DWORD PTR _new_entity$[ebp], eax

; 701  : 	(
; 702  : 		entity_index_list [0],
; 703  : 		get_local_sector_entity (position),
; 704  : 		ENTITY_SIDE_NEUTRAL,
; 705  : 		ENTITY_SUB_TYPE_EFFECT_SOUND_MISC,
; 706  : 		SOUND_CHANNEL_SOUND_EFFECT,
; 707  : 		SOUND_LOCALITY_ALL,
; 708  : 		position,										// position
; 709  : 		explosion_component->sound_volume,		// amplification
; 710  : 		1.0,						// Werewolf pitch
; 711  : 		TRUE,												// valid sound effect
; 712  : 		FALSE,											// looping
; 713  : 		1,													// sample count
; 714  : 		&(explosion_component->sound_type)		// sample index list
; 715  : 	);
; 716  : 
; 717  : 	entity_index_list[ 0 ] = get_local_entity_index( new_entity );

  00158	8b 45 fc	 mov	 eax, DWORD PTR _new_entity$[ebp]
  0015b	2b 05 00 00 00
	00		 sub	 eax, DWORD PTR ?entities@@3PAUENTITY@@A ; entities
  00161	c1 f8 04	 sar	 eax, 4
  00164	b9 04 00 00 00	 mov	 ecx, 4
  00169	6b d1 00	 imul	 edx, ecx, 0
  0016c	8b 4d 10	 mov	 ecx, DWORD PTR _entity_index_list$[ebp]
  0016f	89 04 11	 mov	 DWORD PTR [ecx+edx], eax

; 718  : 
; 719  : 	return 1;

  00172	b8 01 00 00 00	 mov	 eax, 1

; 720  : }

  00177	5f		 pop	 edi
  00178	5e		 pop	 esi
  00179	5b		 pop	 ebx
  0017a	8b e5		 mov	 esp, ebp
  0017c	5d		 pop	 ebp
  0017d	c2 0c 00	 ret	 12			; 0000000cH
$LN15@create_met:
  00180	00 00 00 00	 DD	 $LN6@create_met
  00184	00 00 00 00	 DD	 $LN7@create_met
  00188	00 00 00 00	 DD	 $LN8@create_met
  0018c	00 00 00 00	 DD	 $LN9@create_met
  00190	00 00 00 00	 DD	 $LN10@create_met
  00194	00 00 00 00	 DD	 $LN11@create_met
  00198	00 00 00 00	 DD	 $LN12@create_met
?create_meta_explosion_sound_effect@@YGHPAUMETA_EXPLOSION_COMPONENT@@PAUVEC3D@@PAH@Z ENDP ; create_meta_explosion_sound_effect
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\entity\special\effect\explosn\explosn.c
;	COMDAT ?create_meta_explosion_smoke_trails@@YGHPAUMETA_EXPLOSION_COMPONENT@@PAUVEC3D@@PAUENTITY@@PAH@Z
_TEXT	SEGMENT
tv81 = -96						; size = 4
tv74 = -92						; size = 4
_iv$ = -24						; size = 4
_effect_list_parent$ = -20				; size = 4
_new_entity$ = -16					; size = 4
_trail_type$ = -12					; size = 4
_count$ = -8						; size = 4
_loop$ = -4						; size = 4
_explosion_component$ = 8				; size = 4
_position$ = 12						; size = 4
_parent$ = 16						; size = 4
_entity_index_list$ = 20				; size = 4
?create_meta_explosion_smoke_trails@@YGHPAUMETA_EXPLOSION_COMPONENT@@PAUVEC3D@@PAUENTITY@@PAH@Z PROC ; create_meta_explosion_smoke_trails, COMDAT

; 572  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 60	 sub	 esp, 96			; 00000060H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 573  : 
; 574  : 	int
; 575  : 		loop,
; 576  : 		count,
; 577  : 		trail_type;
; 578  : 
; 579  : 	entity
; 580  : 		*new_entity,
; 581  : 		*effect_list_parent;
; 582  : 
; 583  : 	vec3d
; 584  : 		*iv;
; 585  : 
; 586  : 	count = explosion_component->trail_count;

  00009	8b 45 08	 mov	 eax, DWORD PTR _explosion_component$[ebp]
  0000c	8b 48 04	 mov	 ecx, DWORD PTR [eax+4]
  0000f	89 4d f8	 mov	 DWORD PTR _count$[ebp], ecx

; 587  : 
; 588  : 	if ( count < 1 )

  00012	83 7d f8 01	 cmp	 DWORD PTR _count$[ebp], 1
  00016	7d 07		 jge	 SHORT $LN5@create_met

; 589  : 	{
; 590  : 		return 0;

  00018	33 c0		 xor	 eax, eax
  0001a	e9 f8 01 00 00	 jmp	 $LN1@create_met
$LN5@create_met:

; 591  : 	}
; 592  : 
; 593  : 	#if DEBUG_MODULE >= 2
; 594  : 
; 595  : 	debug_log("EXPLOSION : creating %d smoke trails", count );
; 596  : 
; 597  : 	#endif
; 598  : 
; 599  : 	trail_type = explosion_component->trail_type;

  0001f	8b 45 08	 mov	 eax, DWORD PTR _explosion_component$[ebp]
  00022	8b 48 08	 mov	 ecx, DWORD PTR [eax+8]
  00025	89 4d f4	 mov	 DWORD PTR _trail_type$[ebp], ecx

; 600  : 
; 601  : 	iv = &(explosion_component->initial_velocity);

  00028	8b 45 08	 mov	 eax, DWORD PTR _explosion_component$[ebp]
  0002b	83 c0 18	 add	 eax, 24			; 00000018H
  0002e	89 45 e8	 mov	 DWORD PTR _iv$[ebp], eax

; 602  : 
; 603  : 	//
; 604  : 	// some smoke lists should not be linked to a parent, even though a parent entity is passed across ( for position ref etc.. )
; 605  : 	//
; 606  : 
; 607  : 	if ((!parent) || (!get_local_entity_int_value (parent, INT_TYPE_IDENTIFY_MOBILE)) || (!smoke_list_database [trail_type].lock_to_parent))

  00031	83 7d 10 00	 cmp	 DWORD PTR _parent$[ebp], 0
  00035	0f 84 97 00 00
	00		 je	 $LN8@create_met
  0003b	83 7d 10 00	 cmp	 DWORD PTR _parent$[ebp], 0
  0003f	74 0a		 je	 SHORT $LN10@create_met
  00041	8b 45 10	 mov	 eax, DWORD PTR _parent$[ebp]
  00044	8b 08		 mov	 ecx, DWORD PTR [eax]
  00046	89 4d a4	 mov	 DWORD PTR tv74[ebp], ecx
  00049	eb 1d		 jmp	 SHORT $LN11@create_met
$LN10@create_met:
  0004b	68 5f 02 00 00	 push	 607			; 0000025fH
  00050	68 00 00 00 00	 push	 OFFSET ??_C@_0FE@MFECPMIC@c?3?2users?2nhv90?2projects?2eech?2ap@
  00055	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  0005b	52		 push	 edx
  0005c	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00061	c7 45 a4 00 00
	00 00		 mov	 DWORD PTR tv74[ebp], 0
$LN11@create_met:
  00068	b8 01 00 00 00	 mov	 eax, 1
  0006d	85 c0		 test	 eax, eax
  0006f	74 09		 je	 SHORT $LN12@create_met
  00071	c7 45 a0 5d 00
	00 00		 mov	 DWORD PTR tv81[ebp], 93	; 0000005dH
  00078	eb 1d		 jmp	 SHORT $LN13@create_met
$LN12@create_met:
  0007a	68 5f 02 00 00	 push	 607			; 0000025fH
  0007f	68 00 00 00 00	 push	 OFFSET ??_C@_0FE@MFECPMIC@c?3?2users?2nhv90?2projects?2eech?2ap@
  00084	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?overload_invalid_int_type_message@@3PBDB ; overload_invalid_int_type_message
  0008a	51		 push	 ecx
  0008b	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00090	c7 45 a0 00 00
	00 00		 mov	 DWORD PTR tv81[ebp], 0
$LN13@create_met:
  00097	6a 5d		 push	 93			; 0000005dH
  00099	8b 55 10	 mov	 edx, DWORD PTR _parent$[ebp]
  0009c	52		 push	 edx
  0009d	69 45 a4 5c 04
	00 00		 imul	 eax, DWORD PTR tv74[ebp], 1116
  000a4	8b 4d a0	 mov	 ecx, DWORD PTR tv81[ebp]
  000a7	8b 94 88 00 00
	00 00		 mov	 edx, DWORD PTR ?fn_get_local_entity_int_value@@3PAY0BBH@P6GHPAUENTITY@@W4INT_TYPES@@@ZA[eax+ecx*4]
  000ae	ff d2		 call	 edx
  000b0	85 c0		 test	 eax, eax
  000b2	74 1e		 je	 SHORT $LN8@create_met
  000b4	6b 45 f4 44	 imul	 eax, DWORD PTR _trail_type$[ebp], 68
  000b8	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?smoke_list_database@@3PAUSMOKE_LIST_DATA@@A ; smoke_list_database
  000be	66 8b 54 01 40	 mov	 dx, WORD PTR [ecx+eax+64]
  000c3	66 c1 ea 04	 shr	 dx, 4
  000c7	66 83 e2 01	 and	 dx, 1
  000cb	0f b7 c2	 movzx	 eax, dx
  000ce	85 c0		 test	 eax, eax
  000d0	75 09		 jne	 SHORT $LN6@create_met
$LN8@create_met:

; 608  : 	{
; 609  : 		effect_list_parent = NULL;

  000d2	c7 45 ec 00 00
	00 00		 mov	 DWORD PTR _effect_list_parent$[ebp], 0

; 610  : 	}
; 611  : 	else

  000d9	eb 06		 jmp	 SHORT $LN7@create_met
$LN6@create_met:

; 612  : 	{
; 613  : 		effect_list_parent = parent;

  000db	8b 45 10	 mov	 eax, DWORD PTR _parent$[ebp]
  000de	89 45 ec	 mov	 DWORD PTR _effect_list_parent$[ebp], eax
$LN7@create_met:

; 614  : 	}
; 615  : 
; 616  : 	//
; 617  : 	// create smoke trails
; 618  : 	//
; 619  : 
; 620  : 	for ( loop = 0 ; loop < count ; loop ++ )

  000e1	c7 45 fc 00 00
	00 00		 mov	 DWORD PTR _loop$[ebp], 0
  000e8	eb 09		 jmp	 SHORT $LN4@create_met
$LN2@create_met:
  000ea	8b 45 fc	 mov	 eax, DWORD PTR _loop$[ebp]
  000ed	83 c0 01	 add	 eax, 1
  000f0	89 45 fc	 mov	 DWORD PTR _loop$[ebp], eax
$LN4@create_met:
  000f3	8b 45 fc	 mov	 eax, DWORD PTR _loop$[ebp]
  000f6	3b 45 f8	 cmp	 eax, DWORD PTR _count$[ebp]
  000f9	0f 8d 15 01 00
	00		 jge	 $LN3@create_met

; 621  : 	{
; 622  : 		#if DEBUG_MODULE >= 2
; 623  : 
; 624  : 		debug_log( "index : %d", entity_index_list[ loop ] );
; 625  : 
; 626  : 		#endif
; 627  : 
; 628  : 		new_entity = create_local_entity

  000ff	6a 00		 push	 0
  00101	8b 45 0c	 mov	 eax, DWORD PTR _position$[ebp]
  00104	f3 0f 10 40 08	 movss	 xmm0, DWORD PTR [eax+8]
  00109	f3 0f 5a c0	 cvtss2sd xmm0, xmm0
  0010d	83 ec 08	 sub	 esp, 8
  00110	f2 0f 11 04 24	 movsd	 QWORD PTR [esp], xmm0
  00115	8b 4d 0c	 mov	 ecx, DWORD PTR _position$[ebp]
  00118	f3 0f 10 41 04	 movss	 xmm0, DWORD PTR [ecx+4]
  0011d	f3 0f 5a c0	 cvtss2sd xmm0, xmm0
  00121	83 ec 08	 sub	 esp, 8
  00124	f2 0f 11 04 24	 movsd	 QWORD PTR [esp], xmm0
  00129	8b 55 0c	 mov	 edx, DWORD PTR _position$[ebp]
  0012c	f3 0f 10 02	 movss	 xmm0, DWORD PTR [edx]
  00130	f3 0f 5a c0	 cvtss2sd xmm0, xmm0
  00134	83 ec 08	 sub	 esp, 8
  00137	f2 0f 11 04 24	 movsd	 QWORD PTR [esp], xmm0
  0013c	6a 08		 push	 8
  0013e	6a 09		 push	 9
  00140	8b 45 e8	 mov	 eax, DWORD PTR _iv$[ebp]
  00143	f3 0f 10 40 08	 movss	 xmm0, DWORD PTR [eax+8]
  00148	f3 0f 5a c0	 cvtss2sd xmm0, xmm0
  0014c	83 ec 08	 sub	 esp, 8
  0014f	f2 0f 11 04 24	 movsd	 QWORD PTR [esp], xmm0
  00154	8b 4d e8	 mov	 ecx, DWORD PTR _iv$[ebp]
  00157	f3 0f 10 41 04	 movss	 xmm0, DWORD PTR [ecx+4]
  0015c	f3 0f 5a c0	 cvtss2sd xmm0, xmm0
  00160	83 ec 08	 sub	 esp, 8
  00163	f2 0f 11 04 24	 movsd	 QWORD PTR [esp], xmm0
  00168	8b 55 e8	 mov	 edx, DWORD PTR _iv$[ebp]
  0016b	f3 0f 10 02	 movss	 xmm0, DWORD PTR [edx]
  0016f	f3 0f 5a c0	 cvtss2sd xmm0, xmm0
  00173	83 ec 08	 sub	 esp, 8
  00176	f2 0f 11 04 24	 movsd	 QWORD PTR [esp], xmm0
  0017b	6a 05		 push	 5
  0017d	6a 09		 push	 9
  0017f	8b 45 08	 mov	 eax, DWORD PTR _explosion_component$[ebp]
  00182	f3 0f 10 40 14	 movss	 xmm0, DWORD PTR [eax+20]
  00187	f3 0f 5a c0	 cvtss2sd xmm0, xmm0
  0018b	83 ec 08	 sub	 esp, 8
  0018e	f2 0f 11 04 24	 movsd	 QWORD PTR [esp], xmm0
  00193	6a 76		 push	 118			; 00000076H
  00195	6a 04		 push	 4
  00197	8b 4d 08	 mov	 ecx, DWORD PTR _explosion_component$[ebp]
  0019a	f3 0f 10 41 10	 movss	 xmm0, DWORD PTR [ecx+16]
  0019f	f3 0f 5a c0	 cvtss2sd xmm0, xmm0
  001a3	83 ec 08	 sub	 esp, 8
  001a6	f2 0f 11 04 24	 movsd	 QWORD PTR [esp], xmm0
  001ab	6a 2d		 push	 45			; 0000002dH
  001ad	6a 04		 push	 4
  001af	8b 55 08	 mov	 edx, DWORD PTR _explosion_component$[ebp]
  001b2	f3 0f 10 42 0c	 movss	 xmm0, DWORD PTR [edx+12]
  001b7	f3 0f 5a c0	 cvtss2sd xmm0, xmm0
  001bb	83 ec 08	 sub	 esp, 8
  001be	f2 0f 11 04 24	 movsd	 QWORD PTR [esp], xmm0
  001c3	6a 32		 push	 50			; 00000032H
  001c5	6a 04		 push	 4
  001c7	8b 45 f4	 mov	 eax, DWORD PTR _trail_type$[ebp]
  001ca	50		 push	 eax
  001cb	68 bd 00 00 00	 push	 189			; 000000bdH
  001d0	6a 05		 push	 5
  001d2	6a 03		 push	 3
  001d4	6a 34		 push	 52			; 00000034H
  001d6	6a 05		 push	 5
  001d8	8b 4d ec	 mov	 ecx, DWORD PTR _effect_list_parent$[ebp]
  001db	51		 push	 ecx
  001dc	6a 24		 push	 36			; 00000024H
  001de	6a 06		 push	 6
  001e0	8b 55 fc	 mov	 edx, DWORD PTR _loop$[ebp]
  001e3	8b 45 14	 mov	 eax, DWORD PTR _entity_index_list$[ebp]
  001e6	8b 0c 90	 mov	 ecx, DWORD PTR [eax+edx*4]
  001e9	51		 push	 ecx
  001ea	6a 1f		 push	 31			; 0000001fH
  001ec	e8 00 00 00 00	 call	 ?create_local_entity@@YAPAUENTITY@@W4ENTITY_TYPES@@HZZ ; create_local_entity
  001f1	81 c4 a0 00 00
	00		 add	 esp, 160		; 000000a0H
  001f7	89 45 f0	 mov	 DWORD PTR _new_entity$[ebp], eax

; 629  : 		(
; 630  : 			ENTITY_TYPE_SMOKE_LIST,
; 631  : 			entity_index_list[ loop ],
; 632  : 			ENTITY_ATTR_PARENT (LIST_TYPE_SPECIAL_EFFECT, effect_list_parent),
; 633  : 			ENTITY_ATTR_INT_VALUE (INT_TYPE_ENTITY_SUB_TYPE, ENTITY_SUB_TYPE_EFFECT_SMOKE_LIST_EXPLOSION_TRAIL),
; 634  : 			ENTITY_ATTR_INT_VALUE (INT_TYPE_SMOKE_TYPE, trail_type),
; 635  : 			ENTITY_ATTR_FLOAT_VALUE (FLOAT_TYPE_GENERATOR_LIFETIME, explosion_component->generator_lifetime),
; 636  : 			ENTITY_ATTR_FLOAT_VALUE (FLOAT_TYPE_FREQUENCY, explosion_component->frequency),
; 637  : 			ENTITY_ATTR_FLOAT_VALUE (FLOAT_TYPE_SMOKE_LIFETIME, explosion_component->smoke_lifetime),
; 638  : //			ENTITY_ATTR_FLOAT_VALUE (FLOAT_TYPE_SCALE, explosion_component->scale),
; 639  : 			ENTITY_ATTR_VEC3D (VEC3D_TYPE_INITIAL_VELOCITY, iv->x, iv->y, iv->z),
; 640  : 			ENTITY_ATTR_VEC3D (VEC3D_TYPE_POSITION, position->x, position->y, position->z),
; 641  : 			ENTITY_ATTR_END
; 642  : 		);
; 643  : 
; 644  : 		entity_index_list[ loop ] = get_local_entity_index( new_entity );

  001fa	8b 45 f0	 mov	 eax, DWORD PTR _new_entity$[ebp]
  001fd	2b 05 00 00 00
	00		 sub	 eax, DWORD PTR ?entities@@3PAUENTITY@@A ; entities
  00203	c1 f8 04	 sar	 eax, 4
  00206	8b 4d fc	 mov	 ecx, DWORD PTR _loop$[ebp]
  00209	8b 55 14	 mov	 edx, DWORD PTR _entity_index_list$[ebp]
  0020c	89 04 8a	 mov	 DWORD PTR [edx+ecx*4], eax

; 645  : 	}

  0020f	e9 d6 fe ff ff	 jmp	 $LN2@create_met
$LN3@create_met:

; 646  : 
; 647  : 	return count;

  00214	8b 45 f8	 mov	 eax, DWORD PTR _count$[ebp]
$LN1@create_met:

; 648  : }

  00217	5f		 pop	 edi
  00218	5e		 pop	 esi
  00219	5b		 pop	 ebx
  0021a	8b e5		 mov	 esp, ebp
  0021c	5d		 pop	 ebp
  0021d	c2 10 00	 ret	 16			; 00000010H
?create_meta_explosion_smoke_trails@@YGHPAUMETA_EXPLOSION_COMPONENT@@PAUVEC3D@@PAUENTITY@@PAH@Z ENDP ; create_meta_explosion_smoke_trails
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\entity\special\effect\explosn\explosn.c
;	COMDAT ?create_meta_explosion_particles@@YGHPAUMETA_EXPLOSION_COMPONENT@@PAUVEC3D@@PAH@Z
_TEXT	SEGMENT
_new_entity$ = -20					; size = 4
_trail_type$ = -16					; size = 4
_count$ = -12						; size = 4
_loop$ = -8						; size = 4
_particle_entity$ = -4					; size = 4
_explosion_component$ = 8				; size = 4
_position$ = 12						; size = 4
_entity_index_list$ = 16				; size = 4
?create_meta_explosion_particles@@YGHPAUMETA_EXPLOSION_COMPONENT@@PAUVEC3D@@PAH@Z PROC ; create_meta_explosion_particles, COMDAT

; 487  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 54	 sub	 esp, 84			; 00000054H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 488  : 	entity
; 489  : 		*particle_entity;
; 490  : 
; 491  : 	int
; 492  : 		loop,
; 493  : 		count,
; 494  : 		trail_type;
; 495  : 
; 496  : 	entity
; 497  : 		*new_entity;
; 498  : 
; 499  : 
; 500  : 	count = explosion_component->particle_count;

  00009	8b 45 08	 mov	 eax, DWORD PTR _explosion_component$[ebp]
  0000c	8b 48 04	 mov	 ecx, DWORD PTR [eax+4]
  0000f	89 4d f4	 mov	 DWORD PTR _count$[ebp], ecx

; 501  : 
; 502  : 	if ( count < 1 )

  00012	83 7d f4 01	 cmp	 DWORD PTR _count$[ebp], 1
  00016	7d 07		 jge	 SHORT $LN5@create_met

; 503  : 	{
; 504  : 		return 0;

  00018	33 c0		 xor	 eax, eax
  0001a	e9 a7 01 00 00	 jmp	 $LN1@create_met
$LN5@create_met:

; 505  : 	}
; 506  : 
; 507  : 	//
; 508  : 	// create particle entity
; 509  : 	//
; 510  : 
; 511  : 	particle_entity = create_local_entity

  0001f	6a 00		 push	 0
  00021	8b 45 08	 mov	 eax, DWORD PTR _explosion_component$[ebp]
  00024	f3 0f 10 40 0c	 movss	 xmm0, DWORD PTR [eax+12]
  00029	f3 0f 5a c0	 cvtss2sd xmm0, xmm0
  0002d	83 ec 08	 sub	 esp, 8
  00030	f2 0f 11 04 24	 movsd	 QWORD PTR [esp], xmm0
  00035	6a 36		 push	 54			; 00000036H
  00037	6a 04		 push	 4
  00039	8b 4d 0c	 mov	 ecx, DWORD PTR _position$[ebp]
  0003c	f3 0f 10 41 08	 movss	 xmm0, DWORD PTR [ecx+8]
  00041	f3 0f 5a c0	 cvtss2sd xmm0, xmm0
  00045	83 ec 08	 sub	 esp, 8
  00048	f2 0f 11 04 24	 movsd	 QWORD PTR [esp], xmm0
  0004d	8b 55 0c	 mov	 edx, DWORD PTR _position$[ebp]
  00050	f3 0f 10 42 04	 movss	 xmm0, DWORD PTR [edx+4]
  00055	f3 0f 5a c0	 cvtss2sd xmm0, xmm0
  00059	83 ec 08	 sub	 esp, 8
  0005c	f2 0f 11 04 24	 movsd	 QWORD PTR [esp], xmm0
  00061	8b 45 0c	 mov	 eax, DWORD PTR _position$[ebp]
  00064	f3 0f 10 00	 movss	 xmm0, DWORD PTR [eax]
  00068	f3 0f 5a c0	 cvtss2sd xmm0, xmm0
  0006c	83 ec 08	 sub	 esp, 8
  0006f	f2 0f 11 04 24	 movsd	 QWORD PTR [esp], xmm0
  00074	6a 08		 push	 8
  00076	6a 09		 push	 9
  00078	8b 4d f4	 mov	 ecx, DWORD PTR _count$[ebp]
  0007b	51		 push	 ecx
  0007c	68 98 00 00 00	 push	 152			; 00000098H
  00081	6a 05		 push	 5
  00083	6a 00		 push	 0
  00085	6a 34		 push	 52			; 00000034H
  00087	6a 05		 push	 5
  00089	ba 04 00 00 00	 mov	 edx, 4
  0008e	6b c2 00	 imul	 eax, edx, 0
  00091	8b 4d 10	 mov	 ecx, DWORD PTR _entity_index_list$[ebp]
  00094	8b 14 01	 mov	 edx, DWORD PTR [ecx+eax]
  00097	52		 push	 edx
  00098	6a 12		 push	 18			; 00000012H
  0009a	e8 00 00 00 00	 call	 ?create_local_entity@@YAPAUENTITY@@W4ENTITY_TYPES@@HZZ ; create_local_entity
  0009f	83 c4 54	 add	 esp, 84			; 00000054H
  000a2	89 45 fc	 mov	 DWORD PTR _particle_entity$[ebp], eax

; 512  : 	(
; 513  : 		ENTITY_TYPE_PARTICLE,
; 514  : 		entity_index_list[ 0 ],
; 515  : 		ENTITY_ATTR_INT_VALUE (INT_TYPE_ENTITY_SUB_TYPE, ENTITY_SUB_TYPE_EFFECT_PARTICLE),
; 516  : 		ENTITY_ATTR_INT_VALUE (INT_TYPE_PARTICLE_COUNT, count),
; 517  : 		ENTITY_ATTR_VEC3D (VEC3D_TYPE_POSITION, position->x, position->y, position->z),
; 518  : 		ENTITY_ATTR_FLOAT_VALUE (FLOAT_TYPE_INITIAL_SPEED, explosion_component->initial_speed),
; 519  : 		ENTITY_ATTR_END
; 520  : 	);
; 521  : 
; 522  : 	entity_index_list[ 0 ] = get_local_entity_index( particle_entity );

  000a5	8b 45 fc	 mov	 eax, DWORD PTR _particle_entity$[ebp]
  000a8	2b 05 00 00 00
	00		 sub	 eax, DWORD PTR ?entities@@3PAUENTITY@@A ; entities
  000ae	c1 f8 04	 sar	 eax, 4
  000b1	b9 04 00 00 00	 mov	 ecx, 4
  000b6	6b d1 00	 imul	 edx, ecx, 0
  000b9	8b 4d 10	 mov	 ecx, DWORD PTR _entity_index_list$[ebp]
  000bc	89 04 11	 mov	 DWORD PTR [ecx+edx], eax

; 523  : 
; 524  : 	//
; 525  : 	// create and link smoke trails to the particle
; 526  : 	//
; 527  : 
; 528  : 	#if DEBUG_MODULE >= 2
; 529  : 
; 530  : 	debug_log("EXPLOSION : creating %d particles", count );
; 531  : 
; 532  : 	#endif
; 533  : 
; 534  : 	trail_type = explosion_component->trail_type;

  000bf	8b 45 08	 mov	 eax, DWORD PTR _explosion_component$[ebp]
  000c2	8b 48 08	 mov	 ecx, DWORD PTR [eax+8]
  000c5	89 4d f0	 mov	 DWORD PTR _trail_type$[ebp], ecx

; 535  : 
; 536  : 	for ( loop = 0 ; loop < count ; loop ++ )

  000c8	c7 45 f8 00 00
	00 00		 mov	 DWORD PTR _loop$[ebp], 0
  000cf	eb 09		 jmp	 SHORT $LN4@create_met
$LN2@create_met:
  000d1	8b 45 f8	 mov	 eax, DWORD PTR _loop$[ebp]
  000d4	83 c0 01	 add	 eax, 1
  000d7	89 45 f8	 mov	 DWORD PTR _loop$[ebp], eax
$LN4@create_met:
  000da	8b 45 f8	 mov	 eax, DWORD PTR _loop$[ebp]
  000dd	3b 45 f4	 cmp	 eax, DWORD PTR _count$[ebp]
  000e0	0f 8d da 00 00
	00		 jge	 $LN3@create_met

; 537  : 	{
; 538  : 		#if DEBUG_MODULE >= 2
; 539  : 
; 540  : 		debug_log( "index : %d", entity_index_list[ loop + 1 ] );
; 541  : 
; 542  : 		#endif
; 543  : 
; 544  : 		new_entity = create_local_entity

  000e6	6a 00		 push	 0
  000e8	8b 45 0c	 mov	 eax, DWORD PTR _position$[ebp]
  000eb	f3 0f 10 40 08	 movss	 xmm0, DWORD PTR [eax+8]
  000f0	f3 0f 5a c0	 cvtss2sd xmm0, xmm0
  000f4	83 ec 08	 sub	 esp, 8
  000f7	f2 0f 11 04 24	 movsd	 QWORD PTR [esp], xmm0
  000fc	8b 4d 0c	 mov	 ecx, DWORD PTR _position$[ebp]
  000ff	f3 0f 10 41 04	 movss	 xmm0, DWORD PTR [ecx+4]
  00104	f3 0f 5a c0	 cvtss2sd xmm0, xmm0
  00108	83 ec 08	 sub	 esp, 8
  0010b	f2 0f 11 04 24	 movsd	 QWORD PTR [esp], xmm0
  00110	8b 55 0c	 mov	 edx, DWORD PTR _position$[ebp]
  00113	f3 0f 10 02	 movss	 xmm0, DWORD PTR [edx]
  00117	f3 0f 5a c0	 cvtss2sd xmm0, xmm0
  0011b	83 ec 08	 sub	 esp, 8
  0011e	f2 0f 11 04 24	 movsd	 QWORD PTR [esp], xmm0
  00123	6a 08		 push	 8
  00125	6a 09		 push	 9
  00127	8b 45 08	 mov	 eax, DWORD PTR _explosion_component$[ebp]
  0012a	f3 0f 10 40 14	 movss	 xmm0, DWORD PTR [eax+20]
  0012f	f3 0f 5a c0	 cvtss2sd xmm0, xmm0
  00133	83 ec 08	 sub	 esp, 8
  00136	f2 0f 11 04 24	 movsd	 QWORD PTR [esp], xmm0
  0013b	6a 76		 push	 118			; 00000076H
  0013d	6a 04		 push	 4
  0013f	8b 4d 08	 mov	 ecx, DWORD PTR _explosion_component$[ebp]
  00142	f3 0f 10 41 10	 movss	 xmm0, DWORD PTR [ecx+16]
  00147	f3 0f 5a c0	 cvtss2sd xmm0, xmm0
  0014b	83 ec 08	 sub	 esp, 8
  0014e	f2 0f 11 04 24	 movsd	 QWORD PTR [esp], xmm0
  00153	6a 2d		 push	 45			; 0000002dH
  00155	6a 04		 push	 4
  00157	83 ec 08	 sub	 esp, 8
  0015a	f2 0f 10 05 00
	00 00 00	 movsd	 xmm0, QWORD PTR __real@3ff0000000000000
  00162	f2 0f 11 04 24	 movsd	 QWORD PTR [esp], xmm0
  00167	6a 32		 push	 50			; 00000032H
  00169	6a 04		 push	 4
  0016b	6a 01		 push	 1
  0016d	6a 66		 push	 102			; 00000066H
  0016f	6a 05		 push	 5
  00171	8b 55 f0	 mov	 edx, DWORD PTR _trail_type$[ebp]
  00174	52		 push	 edx
  00175	68 bd 00 00 00	 push	 189			; 000000bdH
  0017a	6a 05		 push	 5
  0017c	6a 02		 push	 2
  0017e	6a 34		 push	 52			; 00000034H
  00180	6a 05		 push	 5
  00182	8b 45 fc	 mov	 eax, DWORD PTR _particle_entity$[ebp]
  00185	50		 push	 eax
  00186	6a 24		 push	 36			; 00000024H
  00188	6a 06		 push	 6
  0018a	8b 4d f8	 mov	 ecx, DWORD PTR _loop$[ebp]
  0018d	8b 55 10	 mov	 edx, DWORD PTR _entity_index_list$[ebp]
  00190	8b 44 8a 04	 mov	 eax, DWORD PTR [edx+ecx*4+4]
  00194	50		 push	 eax
  00195	6a 1f		 push	 31			; 0000001fH
  00197	e8 00 00 00 00	 call	 ?create_local_entity@@YAPAUENTITY@@W4ENTITY_TYPES@@HZZ ; create_local_entity
  0019c	81 c4 8c 00 00
	00		 add	 esp, 140		; 0000008cH
  001a2	89 45 ec	 mov	 DWORD PTR _new_entity$[ebp], eax

; 545  : 		(
; 546  : 			ENTITY_TYPE_SMOKE_LIST,
; 547  : 			entity_index_list[ loop + 1 ],
; 548  : 			ENTITY_ATTR_PARENT (LIST_TYPE_SPECIAL_EFFECT, particle_entity),
; 549  : 			ENTITY_ATTR_INT_VALUE (INT_TYPE_ENTITY_SUB_TYPE, ENTITY_SUB_TYPE_EFFECT_SMOKE_LIST_EXPLOSION_PARTICLE),
; 550  : 			ENTITY_ATTR_INT_VALUE (INT_TYPE_SMOKE_TYPE, trail_type),
; 551  : 			ENTITY_ATTR_INT_VALUE (INT_TYPE_INFINITE_GENERATOR, TRUE),
; 552  : 			ENTITY_ATTR_FLOAT_VALUE (FLOAT_TYPE_GENERATOR_LIFETIME, INFINITE_SMOKE_ON),
; 553  : 			ENTITY_ATTR_FLOAT_VALUE (FLOAT_TYPE_FREQUENCY, explosion_component->frequency),
; 554  : 			ENTITY_ATTR_FLOAT_VALUE (FLOAT_TYPE_SMOKE_LIFETIME, explosion_component->smoke_lifetime),
; 555  : //			ENTITY_ATTR_FLOAT_VALUE (FLOAT_TYPE_SCALE, explosion_component->trail_scale),
; 556  : 			ENTITY_ATTR_VEC3D (VEC3D_TYPE_POSITION, position->x, position->y, position->z),
; 557  : 			ENTITY_ATTR_END
; 558  : 		);
; 559  : 
; 560  : 		entity_index_list[ loop + 1 ] = get_local_entity_index( new_entity );

  001a5	8b 45 ec	 mov	 eax, DWORD PTR _new_entity$[ebp]
  001a8	2b 05 00 00 00
	00		 sub	 eax, DWORD PTR ?entities@@3PAUENTITY@@A ; entities
  001ae	c1 f8 04	 sar	 eax, 4
  001b1	8b 4d f8	 mov	 ecx, DWORD PTR _loop$[ebp]
  001b4	8b 55 10	 mov	 edx, DWORD PTR _entity_index_list$[ebp]
  001b7	89 44 8a 04	 mov	 DWORD PTR [edx+ecx*4+4], eax

; 561  : 
; 562  : 	}

  001bb	e9 11 ff ff ff	 jmp	 $LN2@create_met
$LN3@create_met:

; 563  : 
; 564  : 	return ( count + 1 );

  001c0	8b 45 f4	 mov	 eax, DWORD PTR _count$[ebp]
  001c3	83 c0 01	 add	 eax, 1
$LN1@create_met:

; 565  : }

  001c6	5f		 pop	 edi
  001c7	5e		 pop	 esi
  001c8	5b		 pop	 ebx
  001c9	8b e5		 mov	 esp, ebp
  001cb	5d		 pop	 ebp
  001cc	c2 0c 00	 ret	 12			; 0000000cH
?create_meta_explosion_particles@@YGHPAUMETA_EXPLOSION_COMPONENT@@PAUVEC3D@@PAH@Z ENDP ; create_meta_explosion_particles
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\entity\special\effect\explosn\explosn.c
;	COMDAT ?create_meta_explosion_objects@@YGHPAUMETA_EXPLOSION_COMPONENT@@PAUVEC3D@@PAH@Z
_TEXT	SEGMENT
tv343 = -164						; size = 8
tv336 = -164						; size = 8
tv368 = -156						; size = 8
tv366 = -156						; size = 8
tv329 = -152						; size = 4
_new_entity$ = -84					; size = 4
_loop$ = -80						; size = 4
_count$ = -76						; size = 4
_pitch$ = -72						; size = 4
_heading$ = -68						; size = 4
_radius$ = -64						; size = 4
_scale_max$ = -60					; size = 4
_scale_min$ = -56					; size = 4
_scale$ = -52						; size = 4
_lifetime_max$ = -48					; size = 4
_lifetime_min$ = -44					; size = 4
_lifetime$ = -40					; size = 4
_state$ = -36						; size = 4
_delay$ = -32						; size = 4
_d$ = -28						; size = 4
_offset$ = -24						; size = 12
_pos$ = -12						; size = 12
_explosion_component$ = 8				; size = 4
_position$ = 12						; size = 4
_entity_index_list$ = 16				; size = 4
?create_meta_explosion_objects@@YGHPAUMETA_EXPLOSION_COMPONENT@@PAUVEC3D@@PAH@Z PROC ; create_meta_explosion_objects, COMDAT

; 356  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec a4 00 00
	00		 sub	 esp, 164		; 000000a4H
  00009	53		 push	 ebx
  0000a	56		 push	 esi
  0000b	57		 push	 edi

; 357  : 	vec3d
; 358  : 		pos,
; 359  : 		offset;
; 360  : 
; 361  : 	float
; 362  : 		d,
; 363  : 		delay,
; 364  : 		state,
; 365  : 		lifetime,
; 366  : 		lifetime_min,
; 367  : 		lifetime_max,
; 368  : 		scale,
; 369  : 		scale_min,
; 370  : 		scale_max,
; 371  : 		radius,
; 372  : 		heading,
; 373  : 		pitch;
; 374  : 
; 375  : 	int
; 376  : 		count,
; 377  : 		loop;
; 378  : 
; 379  : 	entity
; 380  : 		*new_entity;
; 381  : 
; 382  : 	//
; 383  : 	// determine constants
; 384  : 	//
; 385  : 
; 386  : 	count = explosion_component->object_count;

  0000c	8b 45 08	 mov	 eax, DWORD PTR _explosion_component$[ebp]
  0000f	8b 48 08	 mov	 ecx, DWORD PTR [eax+8]
  00012	89 4d b4	 mov	 DWORD PTR _count$[ebp], ecx

; 387  : 
; 388  : 	if ( count < 1 )

  00015	83 7d b4 01	 cmp	 DWORD PTR _count$[ebp], 1
  00019	7d 07		 jge	 SHORT $LN5@create_met

; 389  : 	{
; 390  : 		return 0;

  0001b	33 c0		 xor	 eax, eax
  0001d	e9 fd 03 00 00	 jmp	 $LN1@create_met
$LN5@create_met:

; 391  : 	}
; 392  : 
; 393  : 	scale_min = explosion_component->scale_min;

  00022	8b 45 08	 mov	 eax, DWORD PTR _explosion_component$[ebp]
  00025	f3 0f 10 40 20	 movss	 xmm0, DWORD PTR [eax+32]
  0002a	f3 0f 11 45 c8	 movss	 DWORD PTR _scale_min$[ebp], xmm0

; 394  : 	scale_max = explosion_component->scale_max;

  0002f	8b 45 08	 mov	 eax, DWORD PTR _explosion_component$[ebp]
  00032	f3 0f 10 40 24	 movss	 xmm0, DWORD PTR [eax+36]
  00037	f3 0f 11 45 c4	 movss	 DWORD PTR _scale_max$[ebp], xmm0

; 395  : 
; 396  : 	lifetime_min = explosion_component->lifetime_min;

  0003c	8b 45 08	 mov	 eax, DWORD PTR _explosion_component$[ebp]
  0003f	f3 0f 10 40 18	 movss	 xmm0, DWORD PTR [eax+24]
  00044	f3 0f 11 45 d4	 movss	 DWORD PTR _lifetime_min$[ebp], xmm0

; 397  : 	lifetime_max = explosion_component->lifetime_max;

  00049	8b 45 08	 mov	 eax, DWORD PTR _explosion_component$[ebp]
  0004c	f3 0f 10 40 1c	 movss	 xmm0, DWORD PTR [eax+28]
  00051	f3 0f 11 45 d0	 movss	 DWORD PTR _lifetime_max$[ebp], xmm0

; 398  : 
; 399  : 	#if DEBUG_MODULE >= 2
; 400  : 
; 401  : 	debug_log("EXPLOSION : creating %d objects", count );
; 402  : 
; 403  : 	#endif
; 404  : 
; 405  : 	for ( loop = 0 ; loop < count ; loop ++ )

  00056	c7 45 b0 00 00
	00 00		 mov	 DWORD PTR _loop$[ebp], 0
  0005d	eb 09		 jmp	 SHORT $LN4@create_met
$LN2@create_met:
  0005f	8b 45 b0	 mov	 eax, DWORD PTR _loop$[ebp]
  00062	83 c0 01	 add	 eax, 1
  00065	89 45 b0	 mov	 DWORD PTR _loop$[ebp], eax
$LN4@create_met:
  00068	8b 45 b0	 mov	 eax, DWORD PTR _loop$[ebp]
  0006b	3b 45 b4	 cmp	 eax, DWORD PTR _count$[ebp]
  0006e	0f 8d a8 03 00
	00		 jge	 $LN3@create_met

; 406  : 	{
; 407  : 		//
; 408  : 		// create each individual element
; 409  : 		//
; 410  : 
; 411  : 		#if DEBUG_MODULE >= 2
; 412  : 
; 413  : 		debug_log( "index : %d", entity_index_list[ loop ] );
; 414  : 
; 415  : 		#endif
; 416  : 
; 417  : 		if ( explosion_component->blast_radius > 0.0 )

  00074	8b 45 08	 mov	 eax, DWORD PTR _explosion_component$[ebp]
  00077	f3 0f 5a 40 28	 cvtss2sd xmm0, DWORD PTR [eax+40]
  0007c	66 0f 2f 05 00
	00 00 00	 comisd	 xmm0, QWORD PTR __real@0000000000000000
  00084	0f 86 8f 01 00
	00		 jbe	 $LN6@create_met

; 418  : 		{
; 419  : 			heading = ( PI * sfrand1() );

  0008a	69 05 00 00 00
	00 6d 4e c6 41	 imul	 eax, DWORD PTR ?random_number_seed@@3HA, 1103515245 ; random_number_seed
  00094	05 39 30 00 00	 add	 eax, 12345		; 00003039H
  00099	a3 00 00 00 00	 mov	 DWORD PTR ?random_number_seed@@3HA, eax ; random_number_seed
  0009e	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?random_number_seed@@3HA ; random_number_seed
  000a4	c1 f9 10	 sar	 ecx, 16			; 00000010H
  000a7	81 e1 ff 7f 00
	00		 and	 ecx, 32767		; 00007fffH
  000ad	81 e9 00 40 00
	00		 sub	 ecx, 16384		; 00004000H
  000b3	f2 0f 2a c1	 cvtsi2sd xmm0, ecx
  000b7	f2 0f 59 05 00
	00 00 00	 mulsd	 xmm0, QWORD PTR __real@3f10000000000000
  000bf	f2 0f 59 05 00
	00 00 00	 mulsd	 xmm0, QWORD PTR __real@400921fb60000000
  000c7	f2 0f 5a c0	 cvtsd2ss xmm0, xmm0
  000cb	f3 0f 11 45 bc	 movss	 DWORD PTR _heading$[ebp], xmm0

; 420  : 
; 421  : 			if ( explosion_component->blast_hemisphere_only )

  000d0	8b 45 08	 mov	 eax, DWORD PTR _explosion_component$[ebp]
  000d3	8a 48 10	 mov	 cl, BYTE PTR [eax+16]
  000d6	d0 e9		 shr	 cl, 1
  000d8	80 e1 01	 and	 cl, 1
  000db	0f b6 d1	 movzx	 edx, cl
  000de	85 d2		 test	 edx, edx
  000e0	74 42		 je	 SHORT $LN8@create_met

; 422  : 			{
; 423  : 				pitch = ( PI_OVER_TWO * frand1() );

  000e2	69 05 00 00 00
	00 6d 4e c6 41	 imul	 eax, DWORD PTR ?random_number_seed@@3HA, 1103515245 ; random_number_seed
  000ec	05 39 30 00 00	 add	 eax, 12345		; 00003039H
  000f1	a3 00 00 00 00	 mov	 DWORD PTR ?random_number_seed@@3HA, eax ; random_number_seed
  000f6	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?random_number_seed@@3HA ; random_number_seed
  000fc	c1 f9 10	 sar	 ecx, 16			; 00000010H
  000ff	81 e1 ff 7f 00
	00		 and	 ecx, 32767		; 00007fffH
  00105	f2 0f 2a c1	 cvtsi2sd xmm0, ecx
  00109	f2 0f 59 05 00
	00 00 00	 mulsd	 xmm0, QWORD PTR __real@3f00002000400080
  00111	f2 0f 59 05 00
	00 00 00	 mulsd	 xmm0, QWORD PTR __real@3ff921fb60000000
  00119	f2 0f 5a c0	 cvtsd2ss xmm0, xmm0
  0011d	f3 0f 11 45 b8	 movss	 DWORD PTR _pitch$[ebp], xmm0

; 424  : 			}
; 425  : 			else

  00122	eb 46		 jmp	 SHORT $LN9@create_met
$LN8@create_met:

; 426  : 			{
; 427  : 				pitch = ( PI_OVER_TWO * sfrand1() );

  00124	69 05 00 00 00
	00 6d 4e c6 41	 imul	 eax, DWORD PTR ?random_number_seed@@3HA, 1103515245 ; random_number_seed
  0012e	05 39 30 00 00	 add	 eax, 12345		; 00003039H
  00133	a3 00 00 00 00	 mov	 DWORD PTR ?random_number_seed@@3HA, eax ; random_number_seed
  00138	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?random_number_seed@@3HA ; random_number_seed
  0013e	c1 f9 10	 sar	 ecx, 16			; 00000010H
  00141	81 e1 ff 7f 00
	00		 and	 ecx, 32767		; 00007fffH
  00147	81 e9 00 40 00
	00		 sub	 ecx, 16384		; 00004000H
  0014d	f2 0f 2a c1	 cvtsi2sd xmm0, ecx
  00151	f2 0f 59 05 00
	00 00 00	 mulsd	 xmm0, QWORD PTR __real@3f10000000000000
  00159	f2 0f 59 05 00
	00 00 00	 mulsd	 xmm0, QWORD PTR __real@3ff921fb60000000
  00161	f2 0f 5a c0	 cvtsd2ss xmm0, xmm0
  00165	f3 0f 11 45 b8	 movss	 DWORD PTR _pitch$[ebp], xmm0
$LN9@create_met:

; 428  : 			}
; 429  : 
; 430  : 			get_3d_unit_vector_from_heading_and_pitch( &offset, heading, pitch );

  0016a	51		 push	 ecx
  0016b	f3 0f 10 45 b8	 movss	 xmm0, DWORD PTR _pitch$[ebp]
  00170	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00175	51		 push	 ecx
  00176	f3 0f 10 45 bc	 movss	 xmm0, DWORD PTR _heading$[ebp]
  0017b	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00180	8d 45 e8	 lea	 eax, DWORD PTR _offset$[ebp]
  00183	50		 push	 eax
  00184	e8 00 00 00 00	 call	 ?get_3d_unit_vector_from_heading_and_pitch@@YGXPAUVEC3D@@MM@Z ; get_3d_unit_vector_from_heading_and_pitch

; 431  : 
; 432  : 			d = frand1();

  00189	69 05 00 00 00
	00 6d 4e c6 41	 imul	 eax, DWORD PTR ?random_number_seed@@3HA, 1103515245 ; random_number_seed
  00193	05 39 30 00 00	 add	 eax, 12345		; 00003039H
  00198	a3 00 00 00 00	 mov	 DWORD PTR ?random_number_seed@@3HA, eax ; random_number_seed
  0019d	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?random_number_seed@@3HA ; random_number_seed
  001a3	c1 f9 10	 sar	 ecx, 16			; 00000010H
  001a6	81 e1 ff 7f 00
	00		 and	 ecx, 32767		; 00007fffH
  001ac	f2 0f 2a c1	 cvtsi2sd xmm0, ecx
  001b0	f2 0f 59 05 00
	00 00 00	 mulsd	 xmm0, QWORD PTR __real@3f00002000400080
  001b8	f2 0f 5a c0	 cvtsd2ss xmm0, xmm0
  001bc	f3 0f 11 45 e4	 movss	 DWORD PTR _d$[ebp], xmm0

; 433  : 
; 434  : 			radius = ( d * explosion_component->blast_radius );

  001c1	8b 45 08	 mov	 eax, DWORD PTR _explosion_component$[ebp]
  001c4	f3 0f 10 45 e4	 movss	 xmm0, DWORD PTR _d$[ebp]
  001c9	f3 0f 59 40 28	 mulss	 xmm0, DWORD PTR [eax+40]
  001ce	f3 0f 11 45 c0	 movss	 DWORD PTR _radius$[ebp], xmm0

; 435  : 
; 436  : 			pos.x = position->x + ( radius * offset.x );

  001d3	f3 0f 10 45 c0	 movss	 xmm0, DWORD PTR _radius$[ebp]
  001d8	f3 0f 59 45 e8	 mulss	 xmm0, DWORD PTR _offset$[ebp]
  001dd	8b 45 0c	 mov	 eax, DWORD PTR _position$[ebp]
  001e0	f3 0f 58 00	 addss	 xmm0, DWORD PTR [eax]
  001e4	f3 0f 11 45 f4	 movss	 DWORD PTR _pos$[ebp], xmm0

; 437  : 			pos.y = position->y + ( radius * offset.y );

  001e9	f3 0f 10 45 c0	 movss	 xmm0, DWORD PTR _radius$[ebp]
  001ee	f3 0f 59 45 ec	 mulss	 xmm0, DWORD PTR _offset$[ebp+4]
  001f3	8b 45 0c	 mov	 eax, DWORD PTR _position$[ebp]
  001f6	f3 0f 58 40 04	 addss	 xmm0, DWORD PTR [eax+4]
  001fb	f3 0f 11 45 f8	 movss	 DWORD PTR _pos$[ebp+4], xmm0

; 438  : 			pos.z = position->z + ( radius * offset.z );

  00200	f3 0f 10 45 c0	 movss	 xmm0, DWORD PTR _radius$[ebp]
  00205	f3 0f 59 45 f0	 mulss	 xmm0, DWORD PTR _offset$[ebp+8]
  0020a	8b 45 0c	 mov	 eax, DWORD PTR _position$[ebp]
  0020d	f3 0f 58 40 08	 addss	 xmm0, DWORD PTR [eax+8]
  00212	f3 0f 11 45 fc	 movss	 DWORD PTR _pos$[ebp+8], xmm0

; 439  : 		}
; 440  : 		else

  00217	eb 2e		 jmp	 SHORT $LN7@create_met
$LN6@create_met:

; 441  : 		{
; 442  : 			d = 0.0;

  00219	0f 57 c0	 xorps	 xmm0, xmm0
  0021c	f3 0f 11 45 e4	 movss	 DWORD PTR _d$[ebp], xmm0

; 443  : 
; 444  : 			pos.x = position->x;

  00221	8b 45 0c	 mov	 eax, DWORD PTR _position$[ebp]
  00224	f3 0f 10 00	 movss	 xmm0, DWORD PTR [eax]
  00228	f3 0f 11 45 f4	 movss	 DWORD PTR _pos$[ebp], xmm0

; 445  : 			pos.y = position->y;

  0022d	8b 45 0c	 mov	 eax, DWORD PTR _position$[ebp]
  00230	f3 0f 10 40 04	 movss	 xmm0, DWORD PTR [eax+4]
  00235	f3 0f 11 45 f8	 movss	 DWORD PTR _pos$[ebp+4], xmm0

; 446  : 			pos.z = position->z;

  0023a	8b 45 0c	 mov	 eax, DWORD PTR _position$[ebp]
  0023d	f3 0f 10 40 08	 movss	 xmm0, DWORD PTR [eax+8]
  00242	f3 0f 11 45 fc	 movss	 DWORD PTR _pos$[ebp+8], xmm0
$LN7@create_met:

; 447  : 		}
; 448  : 
; 449  : 		bound_position_to_map_volume( &pos );

  00247	8d 45 f4	 lea	 eax, DWORD PTR _pos$[ebp]
  0024a	50		 push	 eax
  0024b	e8 00 00 00 00	 call	 ?bound_position_to_map_volume@@YGHPAUVEC3D@@@Z ; bound_position_to_map_volume

; 450  : 
; 451  : 		// set delay so the explosion expands outwards
; 452  : 		delay = - fabs( explosion_component->delay_max );

  00250	8b 45 08	 mov	 eax, DWORD PTR _explosion_component$[ebp]
  00253	51		 push	 ecx
  00254	f3 0f 10 40 14	 movss	 xmm0, DWORD PTR [eax+20]
  00259	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  0025e	e8 00 00 00 00	 call	 ?fabs@@YGMM@Z		; fabs
  00263	d9 9d 68 ff ff
	ff		 fstp	 DWORD PTR tv329[ebp]
  00269	f3 0f 10 85 68
	ff ff ff	 movss	 xmm0, DWORD PTR tv329[ebp]
  00271	0f 57 05 00 00
	00 00		 xorps	 xmm0, DWORD PTR __xmm@80000000800000008000000080000000
  00278	f3 0f 11 45 e0	 movss	 DWORD PTR _delay$[ebp], xmm0

; 453  : 
; 454  : 		scale = scale_min + fabs( ( scale_max - scale_min ) * ( 1.0 - d ) );

  0027d	f3 0f 5a 45 c8	 cvtss2sd xmm0, DWORD PTR _scale_min$[ebp]
  00282	f3 0f 10 4d c4	 movss	 xmm1, DWORD PTR _scale_max$[ebp]
  00287	f3 0f 5c 4d c8	 subss	 xmm1, DWORD PTR _scale_min$[ebp]
  0028c	f3 0f 5a c9	 cvtss2sd xmm1, xmm1
  00290	f3 0f 5a 55 e4	 cvtss2sd xmm2, DWORD PTR _d$[ebp]
  00295	f2 0f 10 1d 00
	00 00 00	 movsd	 xmm3, QWORD PTR __real@3ff0000000000000
  0029d	f2 0f 5c da	 subsd	 xmm3, xmm2
  002a1	f2 0f 59 cb	 mulsd	 xmm1, xmm3
  002a5	83 ec 08	 sub	 esp, 8
  002a8	f2 0f 11 0c 24	 movsd	 QWORD PTR [esp], xmm1
  002ad	f2 0f 11 85 64
	ff ff ff	 movsd	 QWORD PTR tv366[ebp], xmm0
  002b5	e8 00 00 00 00	 call	 _fabs
  002ba	83 c4 08	 add	 esp, 8
  002bd	dd 9d 5c ff ff
	ff		 fstp	 QWORD PTR tv336[ebp]
  002c3	f2 0f 10 85 64
	ff ff ff	 movsd	 xmm0, QWORD PTR tv366[ebp]
  002cb	f2 0f 58 85 5c
	ff ff ff	 addsd	 xmm0, QWORD PTR tv336[ebp]
  002d3	f2 0f 5a c0	 cvtsd2ss xmm0, xmm0
  002d7	f3 0f 11 45 cc	 movss	 DWORD PTR _scale$[ebp], xmm0

; 455  : 
; 456  : 		lifetime = lifetime_min + fabs( ( lifetime_max - lifetime_min ) * ( 1.0 - d ) );

  002dc	f3 0f 5a 45 d4	 cvtss2sd xmm0, DWORD PTR _lifetime_min$[ebp]
  002e1	f3 0f 10 4d d0	 movss	 xmm1, DWORD PTR _lifetime_max$[ebp]
  002e6	f3 0f 5c 4d d4	 subss	 xmm1, DWORD PTR _lifetime_min$[ebp]
  002eb	f3 0f 5a c9	 cvtss2sd xmm1, xmm1
  002ef	f3 0f 5a 55 e4	 cvtss2sd xmm2, DWORD PTR _d$[ebp]
  002f4	f2 0f 10 1d 00
	00 00 00	 movsd	 xmm3, QWORD PTR __real@3ff0000000000000
  002fc	f2 0f 5c da	 subsd	 xmm3, xmm2
  00300	f2 0f 59 cb	 mulsd	 xmm1, xmm3
  00304	83 ec 08	 sub	 esp, 8
  00307	f2 0f 11 0c 24	 movsd	 QWORD PTR [esp], xmm1
  0030c	f2 0f 11 85 64
	ff ff ff	 movsd	 QWORD PTR tv368[ebp], xmm0
  00314	e8 00 00 00 00	 call	 _fabs
  00319	83 c4 08	 add	 esp, 8
  0031c	dd 9d 5c ff ff
	ff		 fstp	 QWORD PTR tv343[ebp]
  00322	f2 0f 10 85 64
	ff ff ff	 movsd	 xmm0, QWORD PTR tv368[ebp]
  0032a	f2 0f 58 85 5c
	ff ff ff	 addsd	 xmm0, QWORD PTR tv343[ebp]
  00332	f2 0f 5a c0	 cvtsd2ss xmm0, xmm0
  00336	f3 0f 11 45 d8	 movss	 DWORD PTR _lifetime$[ebp], xmm0

; 457  : 
; 458  : 		state = delay / lifetime;

  0033b	f3 0f 10 45 e0	 movss	 xmm0, DWORD PTR _delay$[ebp]
  00340	f3 0f 5e 45 d8	 divss	 xmm0, DWORD PTR _lifetime$[ebp]
  00345	f3 0f 11 45 dc	 movss	 DWORD PTR _state$[ebp], xmm0

; 459  : 
; 460  : 		new_entity = create_local_entity

  0034a	6a 00		 push	 0
  0034c	f3 0f 5a 45 fc	 cvtss2sd xmm0, DWORD PTR _pos$[ebp+8]
  00351	83 ec 08	 sub	 esp, 8
  00354	f2 0f 11 04 24	 movsd	 QWORD PTR [esp], xmm0
  00359	f3 0f 5a 45 f8	 cvtss2sd xmm0, DWORD PTR _pos$[ebp+4]
  0035e	83 ec 08	 sub	 esp, 8
  00361	f2 0f 11 04 24	 movsd	 QWORD PTR [esp], xmm0
  00366	f3 0f 5a 45 f4	 cvtss2sd xmm0, DWORD PTR _pos$[ebp]
  0036b	83 ec 08	 sub	 esp, 8
  0036e	f2 0f 11 04 24	 movsd	 QWORD PTR [esp], xmm0
  00373	6a 08		 push	 8
  00375	6a 09		 push	 9
  00377	f3 0f 5a 45 d8	 cvtss2sd xmm0, DWORD PTR _lifetime$[ebp]
  0037c	83 ec 08	 sub	 esp, 8
  0037f	f2 0f 11 04 24	 movsd	 QWORD PTR [esp], xmm0
  00384	6a 0b		 push	 11			; 0000000bH
  00386	6a 04		 push	 4
  00388	f3 0f 5a 45 dc	 cvtss2sd xmm0, DWORD PTR _state$[ebp]
  0038d	83 ec 08	 sub	 esp, 8
  00390	f2 0f 11 04 24	 movsd	 QWORD PTR [esp], xmm0
  00395	6a 26		 push	 38			; 00000026H
  00397	6a 04		 push	 4
  00399	f3 0f 5a 45 cc	 cvtss2sd xmm0, DWORD PTR _scale$[ebp]
  0039e	83 ec 08	 sub	 esp, 8
  003a1	f2 0f 11 04 24	 movsd	 QWORD PTR [esp], xmm0
  003a6	6a 73		 push	 115			; 00000073H
  003a8	6a 04		 push	 4
  003aa	8b 45 08	 mov	 eax, DWORD PTR _explosion_component$[ebp]
  003ad	0f b6 48 0f	 movzx	 ecx, BYTE PTR [eax+15]
  003b1	51		 push	 ecx
  003b2	6a 1d		 push	 29			; 0000001dH
  003b4	6a 05		 push	 5
  003b6	8b 55 08	 mov	 edx, DWORD PTR _explosion_component$[ebp]
  003b9	0f b6 42 0e	 movzx	 eax, BYTE PTR [edx+14]
  003bd	50		 push	 eax
  003be	6a 1e		 push	 30			; 0000001eH
  003c0	6a 05		 push	 5
  003c2	8b 4d 08	 mov	 ecx, DWORD PTR _explosion_component$[ebp]
  003c5	0f b6 51 0d	 movzx	 edx, BYTE PTR [ecx+13]
  003c9	52		 push	 edx
  003ca	6a 1f		 push	 31			; 0000001fH
  003cc	6a 05		 push	 5
  003ce	8b 45 08	 mov	 eax, DWORD PTR _explosion_component$[ebp]
  003d1	0f b6 48 0c	 movzx	 ecx, BYTE PTR [eax+12]
  003d5	51		 push	 ecx
  003d6	6a 20		 push	 32			; 00000020H
  003d8	6a 05		 push	 5
  003da	8b 55 08	 mov	 edx, DWORD PTR _explosion_component$[ebp]
  003dd	8b 42 04	 mov	 eax, DWORD PTR [edx+4]
  003e0	50		 push	 eax
  003e1	68 92 00 00 00	 push	 146			; 00000092H
  003e6	6a 05		 push	 5
  003e8	8b 4d b0	 mov	 ecx, DWORD PTR _loop$[ebp]
  003eb	8b 55 10	 mov	 edx, DWORD PTR _entity_index_list$[ebp]
  003ee	8b 04 8a	 mov	 eax, DWORD PTR [edx+ecx*4]
  003f1	50		 push	 eax
  003f2	6a 09		 push	 9
  003f4	e8 00 00 00 00	 call	 ?create_local_entity@@YAPAUENTITY@@W4ENTITY_TYPES@@HZZ ; create_local_entity
  003f9	81 c4 98 00 00
	00		 add	 esp, 152		; 00000098H
  003ff	89 45 ac	 mov	 DWORD PTR _new_entity$[ebp], eax

; 461  : 		(
; 462  : 			ENTITY_TYPE_EXPLOSION,
; 463  : 			entity_index_list[ loop ],
; 464  : 			ENTITY_ATTR_INT_VALUE (INT_TYPE_OBJECT_3D_SHAPE, explosion_component->object_3d_shape),
; 465  : 			ENTITY_ATTR_INT_VALUE (INT_TYPE_COLOUR_RED, explosion_component->red),
; 466  : 			ENTITY_ATTR_INT_VALUE (INT_TYPE_COLOUR_GREEN, explosion_component->green),
; 467  : 			ENTITY_ATTR_INT_VALUE (INT_TYPE_COLOUR_BLUE, explosion_component->blue),
; 468  : 			ENTITY_ATTR_INT_VALUE (INT_TYPE_COLOUR_ALPHA, explosion_component->alpha),
; 469  : 			ENTITY_ATTR_FLOAT_VALUE (FLOAT_TYPE_SCALE, scale),
; 470  : 			ENTITY_ATTR_FLOAT_VALUE (FLOAT_TYPE_EXPLOSION_STATE, state),
; 471  : 			ENTITY_ATTR_FLOAT_VALUE (FLOAT_TYPE_ANIMATION_FREQUENCY, lifetime),
; 472  : 			ENTITY_ATTR_VEC3D (VEC3D_TYPE_POSITION, pos.x, pos.y, pos.z),
; 473  : 			ENTITY_ATTR_END
; 474  : 		);
; 475  : 
; 476  : 		entity_index_list[ loop ] = get_local_entity_index( new_entity );

  00402	8b 45 ac	 mov	 eax, DWORD PTR _new_entity$[ebp]
  00405	2b 05 00 00 00
	00		 sub	 eax, DWORD PTR ?entities@@3PAUENTITY@@A ; entities
  0040b	c1 f8 04	 sar	 eax, 4
  0040e	8b 4d b0	 mov	 ecx, DWORD PTR _loop$[ebp]
  00411	8b 55 10	 mov	 edx, DWORD PTR _entity_index_list$[ebp]
  00414	89 04 8a	 mov	 DWORD PTR [edx+ecx*4], eax

; 477  : 	}

  00417	e9 43 fc ff ff	 jmp	 $LN2@create_met
$LN3@create_met:

; 478  : 
; 479  : 	return count;

  0041c	8b 45 b4	 mov	 eax, DWORD PTR _count$[ebp]
$LN1@create_met:

; 480  : }

  0041f	5f		 pop	 edi
  00420	5e		 pop	 esi
  00421	5b		 pop	 ebx
  00422	8b e5		 mov	 esp, ebp
  00424	5d		 pop	 ebp
  00425	c2 0c 00	 ret	 12			; 0000000cH
?create_meta_explosion_objects@@YGHPAUMETA_EXPLOSION_COMPONENT@@PAUVEC3D@@PAH@Z ENDP ; create_meta_explosion_objects
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\entity\special\effect\explosn\explosn.c
;	COMDAT ?create_meta_explosion_sprites@@YGHPAUMETA_EXPLOSION_COMPONENT@@PAUVEC3D@@PAUENTITY@@PAH@Z
_TEXT	SEGMENT
tv390 = -168						; size = 8
tv94 = -168						; size = 4
tv375 = -164						; size = 4
tv86 = -164						; size = 4
_d$1 = -96						; size = 12
_bounding_box$2 = -84					; size = 4
_new_entity$ = -80					; size = 4
_loop$ = -76						; size = 4
_count$ = -72						; size = 4
_texture$ = -68						; size = 4
_pitch$ = -64						; size = 4
_heading$ = -60						; size = 4
_blast_radius$ = -56					; size = 4
_radius$ = -52						; size = 4
_scale_max$ = -48					; size = 4
_scale_min$ = -44					; size = 4
_lifetime_max$ = -40					; size = 4
_lifetime_min$ = -36					; size = 4
_lifetime$ = -32					; size = 4
_delay$ = -28						; size = 4
_offset$ = -24						; size = 12
_pos$ = -12						; size = 12
_explosion_component$ = 8				; size = 4
_position$ = 12						; size = 4
_parent$ = 16						; size = 4
_entity_index_list$ = 20				; size = 4
?create_meta_explosion_sprites@@YGHPAUMETA_EXPLOSION_COMPONENT@@PAUVEC3D@@PAUENTITY@@PAH@Z PROC ; create_meta_explosion_sprites, COMDAT

; 196  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec a8 00 00
	00		 sub	 esp, 168		; 000000a8H
  00009	53		 push	 ebx
  0000a	56		 push	 esi
  0000b	57		 push	 edi

; 197  : 	vec3d
; 198  : 		pos,
; 199  : 		offset;
; 200  : 
; 201  : 	float
; 202  : 		delay,
; 203  : 		lifetime,
; 204  : 		lifetime_min,
; 205  : 		lifetime_max,
; 206  : //		scale,
; 207  : 		scale_min,
; 208  : 		scale_max,
; 209  : 		radius,
; 210  : 		blast_radius,
; 211  : 		heading,
; 212  : 		pitch;
; 213  : 
; 214  : 	texture_animation_indices
; 215  : 		texture;
; 216  : 
; 217  : 	int
; 218  : 		count,
; 219  : 		loop;
; 220  : 
; 221  : 	entity
; 222  : 		*new_entity;
; 223  : 
; 224  : 	//
; 225  : 	// determine constants
; 226  : 	//
; 227  : 
; 228  : 	texture = explosion_component->animated_texture;

  0000c	8b 45 08	 mov	 eax, DWORD PTR _explosion_component$[ebp]
  0000f	8b 48 04	 mov	 ecx, DWORD PTR [eax+4]
  00012	89 4d bc	 mov	 DWORD PTR _texture$[ebp], ecx

; 229  : 
; 230  : 	count = explosion_component->sprite_count;

  00015	8b 45 08	 mov	 eax, DWORD PTR _explosion_component$[ebp]
  00018	8b 48 08	 mov	 ecx, DWORD PTR [eax+8]
  0001b	89 4d b8	 mov	 DWORD PTR _count$[ebp], ecx

; 231  : 
; 232  : 	if ( count < 1 )

  0001e	83 7d b8 01	 cmp	 DWORD PTR _count$[ebp], 1
  00022	7d 07		 jge	 SHORT $LN5@create_met

; 233  : 	{
; 234  : 		return 0;

  00024	33 c0		 xor	 eax, eax
  00026	e9 0e 05 00 00	 jmp	 $LN1@create_met
$LN5@create_met:

; 235  : 	}
; 236  : 
; 237  : 	scale_min = explosion_component->scale_min;

  0002b	8b 45 08	 mov	 eax, DWORD PTR _explosion_component$[ebp]
  0002e	f3 0f 10 40 20	 movss	 xmm0, DWORD PTR [eax+32]
  00033	f3 0f 11 45 d4	 movss	 DWORD PTR _scale_min$[ebp], xmm0

; 238  : 	scale_max = explosion_component->scale_max;

  00038	8b 45 08	 mov	 eax, DWORD PTR _explosion_component$[ebp]
  0003b	f3 0f 10 40 24	 movss	 xmm0, DWORD PTR [eax+36]
  00040	f3 0f 11 45 d0	 movss	 DWORD PTR _scale_max$[ebp], xmm0

; 239  : 
; 240  : 	lifetime_min = explosion_component->lifetime_min;

  00045	8b 45 08	 mov	 eax, DWORD PTR _explosion_component$[ebp]
  00048	f3 0f 10 40 18	 movss	 xmm0, DWORD PTR [eax+24]
  0004d	f3 0f 11 45 dc	 movss	 DWORD PTR _lifetime_min$[ebp], xmm0

; 241  : 	lifetime_max = explosion_component->lifetime_max;

  00052	8b 45 08	 mov	 eax, DWORD PTR _explosion_component$[ebp]
  00055	f3 0f 10 40 1c	 movss	 xmm0, DWORD PTR [eax+28]
  0005a	f3 0f 11 45 d8	 movss	 DWORD PTR _lifetime_max$[ebp], xmm0

; 242  : 
; 243  : 	#if DEBUG_MODULE >= 2
; 244  : 
; 245  : 	debug_log("EXPLOSION : creating %d sprites", count );
; 246  : 
; 247  : 	#endif
; 248  : 
; 249  : 	if (explosion_component->blast_radius < 0.0)

  0005f	8b 45 08	 mov	 eax, DWORD PTR _explosion_component$[ebp]
  00062	f3 0f 5a 40 28	 cvtss2sd xmm0, DWORD PTR [eax+40]
  00067	0f 57 c9	 xorps	 xmm1, xmm1
  0006a	66 0f 2f c8	 comisd	 xmm1, xmm0
  0006e	0f 86 2b 01 00
	00		 jbe	 $LN6@create_met

; 250  : 	{
; 251  : 
; 252  : 		struct OBJECT_3D_BOUNDS
; 253  : 			*bounding_box;
; 254  : 
; 255  : 		vec3d
; 256  : 			d;
; 257  : 
; 258  : 		ASSERT (parent);

  00074	83 7d 10 00	 cmp	 DWORD PTR _parent$[ebp], 0
  00078	75 18		 jne	 SHORT $LN8@create_met
  0007a	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??create_meta_explosion_sprites@@YGHPAUMETA_EXPLOSION_COMPONENT@@PAUVEC3D@@PAUENTITY@@PAH@Z@4JA
  0007f	83 c0 3e	 add	 eax, 62			; 0000003eH
  00082	50		 push	 eax
  00083	68 00 00 00 00	 push	 OFFSET ??_C@_0FE@MFECPMIC@c?3?2users?2nhv90?2projects?2eech?2ap@
  00088	68 00 00 00 00	 push	 OFFSET ??_C@_06MLKDMCBD@parent@
  0008d	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN8@create_met:

; 259  : 
; 260  : 		bounding_box = get_object_3d_bounding_box (get_local_entity_int_value (parent, INT_TYPE_OBJECT_3D_SHAPE));

  00092	83 7d 10 00	 cmp	 DWORD PTR _parent$[ebp], 0
  00096	74 0d		 je	 SHORT $LN14@create_met
  00098	8b 45 10	 mov	 eax, DWORD PTR _parent$[ebp]
  0009b	8b 08		 mov	 ecx, DWORD PTR [eax]
  0009d	89 8d 5c ff ff
	ff		 mov	 DWORD PTR tv86[ebp], ecx
  000a3	eb 24		 jmp	 SHORT $LN15@create_met
$LN14@create_met:
  000a5	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??create_meta_explosion_sprites@@YGHPAUMETA_EXPLOSION_COMPONENT@@PAUVEC3D@@PAUENTITY@@PAH@Z@4JA
  000ab	83 c2 40	 add	 edx, 64			; 00000040H
  000ae	52		 push	 edx
  000af	68 00 00 00 00	 push	 OFFSET ??_C@_0FE@MFECPMIC@c?3?2users?2nhv90?2projects?2eech?2ap@
  000b4	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  000b9	50		 push	 eax
  000ba	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  000bf	c7 85 5c ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv86[ebp], 0
$LN15@create_met:
  000c9	b9 01 00 00 00	 mov	 ecx, 1
  000ce	85 c9		 test	 ecx, ecx
  000d0	74 0c		 je	 SHORT $LN16@create_met
  000d2	c7 85 58 ff ff
	ff 92 00 00 00	 mov	 DWORD PTR tv94[ebp], 146 ; 00000092H
  000dc	eb 24		 jmp	 SHORT $LN17@create_met
$LN16@create_met:
  000de	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??create_meta_explosion_sprites@@YGHPAUMETA_EXPLOSION_COMPONENT@@PAUVEC3D@@PAUENTITY@@PAH@Z@4JA
  000e4	83 c2 40	 add	 edx, 64			; 00000040H
  000e7	52		 push	 edx
  000e8	68 00 00 00 00	 push	 OFFSET ??_C@_0FE@MFECPMIC@c?3?2users?2nhv90?2projects?2eech?2ap@
  000ed	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_int_type_message@@3PBDB ; overload_invalid_int_type_message
  000f2	50		 push	 eax
  000f3	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  000f8	c7 85 58 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv94[ebp], 0
$LN17@create_met:
  00102	68 92 00 00 00	 push	 146			; 00000092H
  00107	8b 4d 10	 mov	 ecx, DWORD PTR _parent$[ebp]
  0010a	51		 push	 ecx
  0010b	69 95 5c ff ff
	ff 5c 04 00 00	 imul	 edx, DWORD PTR tv86[ebp], 1116
  00115	8b 85 58 ff ff
	ff		 mov	 eax, DWORD PTR tv94[ebp]
  0011b	8b 8c 82 00 00
	00 00		 mov	 ecx, DWORD PTR ?fn_get_local_entity_int_value@@3PAY0BBH@P6GHPAUENTITY@@W4INT_TYPES@@@ZA[edx+eax*4]
  00122	ff d1		 call	 ecx
  00124	50		 push	 eax
  00125	e8 00 00 00 00	 call	 ?get_object_3d_bounding_box@@YGPAUOBJECT_3D_BOUNDS@@H@Z ; get_object_3d_bounding_box
  0012a	89 45 ac	 mov	 DWORD PTR _bounding_box$2[ebp], eax

; 261  : 
; 262  : 		d.x = bounding_box->xmax - bounding_box->xmin;

  0012d	8b 45 ac	 mov	 eax, DWORD PTR _bounding_box$2[ebp]
  00130	8b 4d ac	 mov	 ecx, DWORD PTR _bounding_box$2[ebp]
  00133	f3 0f 10 40 04	 movss	 xmm0, DWORD PTR [eax+4]
  00138	f3 0f 5c 01	 subss	 xmm0, DWORD PTR [ecx]
  0013c	f3 0f 11 45 a0	 movss	 DWORD PTR _d$1[ebp], xmm0

; 263  : //		d.y = bounding_box->ymax - bounding_box->ymin;
; 264  : 		d.y = 0.0;

  00141	0f 57 c0	 xorps	 xmm0, xmm0
  00144	f3 0f 11 45 a4	 movss	 DWORD PTR _d$1[ebp+4], xmm0

; 265  : 		d.z = bounding_box->zmax - bounding_box->zmin;

  00149	8b 45 ac	 mov	 eax, DWORD PTR _bounding_box$2[ebp]
  0014c	8b 4d ac	 mov	 ecx, DWORD PTR _bounding_box$2[ebp]
  0014f	f3 0f 10 40 14	 movss	 xmm0, DWORD PTR [eax+20]
  00154	f3 0f 5c 41 10	 subss	 xmm0, DWORD PTR [ecx+16]
  00159	f3 0f 11 45 a8	 movss	 DWORD PTR _d$1[ebp+8], xmm0

; 266  : 
; 267  : 		blast_radius = get_3d_vector_magnitude (&d) * (-explosion_component->blast_radius) * 0.5;

  0015e	8d 45 a0	 lea	 eax, DWORD PTR _d$1[ebp]
  00161	50		 push	 eax
  00162	e8 00 00 00 00	 call	 ?get_3d_vector_magnitude@@YGMPBUVEC3D@@@Z ; get_3d_vector_magnitude
  00167	d9 9d 5c ff ff
	ff		 fstp	 DWORD PTR tv375[ebp]
  0016d	f3 0f 10 85 5c
	ff ff ff	 movss	 xmm0, DWORD PTR tv375[ebp]
  00175	8b 4d 08	 mov	 ecx, DWORD PTR _explosion_component$[ebp]
  00178	f3 0f 10 49 28	 movss	 xmm1, DWORD PTR [ecx+40]
  0017d	0f 57 0d 00 00
	00 00		 xorps	 xmm1, DWORD PTR __xmm@80000000800000008000000080000000
  00184	f3 0f 59 c1	 mulss	 xmm0, xmm1
  00188	f3 0f 5a c0	 cvtss2sd xmm0, xmm0
  0018c	f2 0f 59 05 00
	00 00 00	 mulsd	 xmm0, QWORD PTR __real@3fe0000000000000
  00194	f2 0f 5a c0	 cvtsd2ss xmm0, xmm0
  00198	f3 0f 11 45 c8	 movss	 DWORD PTR _blast_radius$[ebp], xmm0

; 268  : 	}
; 269  : 	else

  0019d	eb 0d		 jmp	 SHORT $LN7@create_met
$LN6@create_met:

; 270  : 	{
; 271  : 		blast_radius = explosion_component->blast_radius;

  0019f	8b 45 08	 mov	 eax, DWORD PTR _explosion_component$[ebp]
  001a2	f3 0f 10 40 28	 movss	 xmm0, DWORD PTR [eax+40]
  001a7	f3 0f 11 45 c8	 movss	 DWORD PTR _blast_radius$[ebp], xmm0
$LN7@create_met:

; 272  : 	}
; 273  : 
; 274  : 	for ( loop = 0 ; loop < count ; loop ++ )

  001ac	c7 45 b4 00 00
	00 00		 mov	 DWORD PTR _loop$[ebp], 0
  001b3	eb 09		 jmp	 SHORT $LN4@create_met
$LN2@create_met:
  001b5	8b 45 b4	 mov	 eax, DWORD PTR _loop$[ebp]
  001b8	83 c0 01	 add	 eax, 1
  001bb	89 45 b4	 mov	 DWORD PTR _loop$[ebp], eax
$LN4@create_met:
  001be	8b 45 b4	 mov	 eax, DWORD PTR _loop$[ebp]
  001c1	3b 45 b8	 cmp	 eax, DWORD PTR _count$[ebp]
  001c4	0f 8d 6c 03 00
	00		 jge	 $LN3@create_met

; 275  : 	{
; 276  : 		//
; 277  : 		// create each individual element
; 278  : 		//
; 279  : 
; 280  : 		#if DEBUG_MODULE >= 2
; 281  : 
; 282  : 		debug_log( "index : %d", entity_index_list[ loop ] );
; 283  : 
; 284  : 		#endif
; 285  : 
; 286  : 		delay = -( explosion_component->delay_max * frand1() );

  001ca	69 05 00 00 00
	00 6d 4e c6 41	 imul	 eax, DWORD PTR ?random_number_seed@@3HA, 1103515245 ; random_number_seed
  001d4	05 39 30 00 00	 add	 eax, 12345		; 00003039H
  001d9	a3 00 00 00 00	 mov	 DWORD PTR ?random_number_seed@@3HA, eax ; random_number_seed
  001de	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?random_number_seed@@3HA ; random_number_seed
  001e4	c1 f9 10	 sar	 ecx, 16			; 00000010H
  001e7	81 e1 ff 7f 00
	00		 and	 ecx, 32767		; 00007fffH
  001ed	f2 0f 2a c1	 cvtsi2sd xmm0, ecx
  001f1	f2 0f 59 05 00
	00 00 00	 mulsd	 xmm0, QWORD PTR __real@3f00002000400080
  001f9	8b 55 08	 mov	 edx, DWORD PTR _explosion_component$[ebp]
  001fc	f3 0f 5a 4a 14	 cvtss2sd xmm1, DWORD PTR [edx+20]
  00201	f2 0f 59 c8	 mulsd	 xmm1, xmm0
  00205	0f 57 0d 00 00
	00 00		 xorps	 xmm1, QWORD PTR __xmm@80000000000000008000000000000000
  0020c	f2 0f 5a c1	 cvtsd2ss xmm0, xmm1
  00210	f3 0f 11 45 e4	 movss	 DWORD PTR _delay$[ebp], xmm0

; 287  : //		delay = - explosion_component->delay_max;
; 288  : 
; 289  : //		scale = scale_min + fabs( ( scale_max - scale_min ) * sfrand1() );
; 290  : 
; 291  : 		lifetime = lifetime_min + fabs( ( lifetime_max - lifetime_min ) * sfrand1() );

  00215	69 05 00 00 00
	00 6d 4e c6 41	 imul	 eax, DWORD PTR ?random_number_seed@@3HA, 1103515245 ; random_number_seed
  0021f	05 39 30 00 00	 add	 eax, 12345		; 00003039H
  00224	a3 00 00 00 00	 mov	 DWORD PTR ?random_number_seed@@3HA, eax ; random_number_seed
  00229	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?random_number_seed@@3HA ; random_number_seed
  0022f	c1 f9 10	 sar	 ecx, 16			; 00000010H
  00232	81 e1 ff 7f 00
	00		 and	 ecx, 32767		; 00007fffH
  00238	81 e9 00 40 00
	00		 sub	 ecx, 16384		; 00004000H
  0023e	f2 0f 2a c1	 cvtsi2sd xmm0, ecx
  00242	f2 0f 59 05 00
	00 00 00	 mulsd	 xmm0, QWORD PTR __real@3f10000000000000
  0024a	f3 0f 10 4d d8	 movss	 xmm1, DWORD PTR _lifetime_max$[ebp]
  0024f	f3 0f 5c 4d dc	 subss	 xmm1, DWORD PTR _lifetime_min$[ebp]
  00254	f3 0f 5a c9	 cvtss2sd xmm1, xmm1
  00258	f2 0f 59 c8	 mulsd	 xmm1, xmm0
  0025c	83 ec 08	 sub	 esp, 8
  0025f	f2 0f 11 0c 24	 movsd	 QWORD PTR [esp], xmm1
  00264	e8 00 00 00 00	 call	 _fabs
  00269	83 c4 08	 add	 esp, 8
  0026c	dd 9d 58 ff ff
	ff		 fstp	 QWORD PTR tv390[ebp]
  00272	f3 0f 5a 45 dc	 cvtss2sd xmm0, DWORD PTR _lifetime_min$[ebp]
  00277	f2 0f 58 85 58
	ff ff ff	 addsd	 xmm0, QWORD PTR tv390[ebp]
  0027f	f2 0f 5a c0	 cvtsd2ss xmm0, xmm0
  00283	f3 0f 11 45 e0	 movss	 DWORD PTR _lifetime$[ebp], xmm0

; 292  : 
; 293  : 		if ( blast_radius > 0.0 )

  00288	f3 0f 5a 45 c8	 cvtss2sd xmm0, DWORD PTR _blast_radius$[ebp]
  0028d	66 0f 2f 05 00
	00 00 00	 comisd	 xmm0, QWORD PTR __real@0000000000000000
  00295	0f 86 4f 01 00
	00		 jbe	 $LN9@create_met

; 294  : 		{
; 295  : 			heading = ( PI * sfrand1() );

  0029b	69 05 00 00 00
	00 6d 4e c6 41	 imul	 eax, DWORD PTR ?random_number_seed@@3HA, 1103515245 ; random_number_seed
  002a5	05 39 30 00 00	 add	 eax, 12345		; 00003039H
  002aa	a3 00 00 00 00	 mov	 DWORD PTR ?random_number_seed@@3HA, eax ; random_number_seed
  002af	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?random_number_seed@@3HA ; random_number_seed
  002b5	c1 f9 10	 sar	 ecx, 16			; 00000010H
  002b8	81 e1 ff 7f 00
	00		 and	 ecx, 32767		; 00007fffH
  002be	81 e9 00 40 00
	00		 sub	 ecx, 16384		; 00004000H
  002c4	f2 0f 2a c1	 cvtsi2sd xmm0, ecx
  002c8	f2 0f 59 05 00
	00 00 00	 mulsd	 xmm0, QWORD PTR __real@3f10000000000000
  002d0	f2 0f 59 05 00
	00 00 00	 mulsd	 xmm0, QWORD PTR __real@400921fb60000000
  002d8	f2 0f 5a c0	 cvtsd2ss xmm0, xmm0
  002dc	f3 0f 11 45 c4	 movss	 DWORD PTR _heading$[ebp], xmm0

; 296  : 
; 297  : 			if ( explosion_component->blast_hemisphere_only )

  002e1	8b 45 08	 mov	 eax, DWORD PTR _explosion_component$[ebp]
  002e4	8a 48 10	 mov	 cl, BYTE PTR [eax+16]
  002e7	d0 e9		 shr	 cl, 1
  002e9	80 e1 01	 and	 cl, 1
  002ec	0f b6 d1	 movzx	 edx, cl
  002ef	85 d2		 test	 edx, edx
  002f1	74 42		 je	 SHORT $LN11@create_met

; 298  : 			{
; 299  : 				pitch = ( PI_OVER_TWO * frand1() );

  002f3	69 05 00 00 00
	00 6d 4e c6 41	 imul	 eax, DWORD PTR ?random_number_seed@@3HA, 1103515245 ; random_number_seed
  002fd	05 39 30 00 00	 add	 eax, 12345		; 00003039H
  00302	a3 00 00 00 00	 mov	 DWORD PTR ?random_number_seed@@3HA, eax ; random_number_seed
  00307	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?random_number_seed@@3HA ; random_number_seed
  0030d	c1 f9 10	 sar	 ecx, 16			; 00000010H
  00310	81 e1 ff 7f 00
	00		 and	 ecx, 32767		; 00007fffH
  00316	f2 0f 2a c1	 cvtsi2sd xmm0, ecx
  0031a	f2 0f 59 05 00
	00 00 00	 mulsd	 xmm0, QWORD PTR __real@3f00002000400080
  00322	f2 0f 59 05 00
	00 00 00	 mulsd	 xmm0, QWORD PTR __real@3ff921fb60000000
  0032a	f2 0f 5a c0	 cvtsd2ss xmm0, xmm0
  0032e	f3 0f 11 45 c0	 movss	 DWORD PTR _pitch$[ebp], xmm0

; 300  : 			}
; 301  : 			else

  00333	eb 46		 jmp	 SHORT $LN12@create_met
$LN11@create_met:

; 302  : 			{
; 303  : 				pitch = ( PI_OVER_TWO * sfrand1() );

  00335	69 05 00 00 00
	00 6d 4e c6 41	 imul	 eax, DWORD PTR ?random_number_seed@@3HA, 1103515245 ; random_number_seed
  0033f	05 39 30 00 00	 add	 eax, 12345		; 00003039H
  00344	a3 00 00 00 00	 mov	 DWORD PTR ?random_number_seed@@3HA, eax ; random_number_seed
  00349	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?random_number_seed@@3HA ; random_number_seed
  0034f	c1 f9 10	 sar	 ecx, 16			; 00000010H
  00352	81 e1 ff 7f 00
	00		 and	 ecx, 32767		; 00007fffH
  00358	81 e9 00 40 00
	00		 sub	 ecx, 16384		; 00004000H
  0035e	f2 0f 2a c1	 cvtsi2sd xmm0, ecx
  00362	f2 0f 59 05 00
	00 00 00	 mulsd	 xmm0, QWORD PTR __real@3f10000000000000
  0036a	f2 0f 59 05 00
	00 00 00	 mulsd	 xmm0, QWORD PTR __real@3ff921fb60000000
  00372	f2 0f 5a c0	 cvtsd2ss xmm0, xmm0
  00376	f3 0f 11 45 c0	 movss	 DWORD PTR _pitch$[ebp], xmm0
$LN12@create_met:

; 304  : 			}
; 305  : 
; 306  : 			get_3d_unit_vector_from_heading_and_pitch( &offset, heading, pitch );

  0037b	51		 push	 ecx
  0037c	f3 0f 10 45 c0	 movss	 xmm0, DWORD PTR _pitch$[ebp]
  00381	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00386	51		 push	 ecx
  00387	f3 0f 10 45 c4	 movss	 xmm0, DWORD PTR _heading$[ebp]
  0038c	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00391	8d 45 e8	 lea	 eax, DWORD PTR _offset$[ebp]
  00394	50		 push	 eax
  00395	e8 00 00 00 00	 call	 ?get_3d_unit_vector_from_heading_and_pitch@@YGXPAUVEC3D@@MM@Z ; get_3d_unit_vector_from_heading_and_pitch

; 307  : 
; 308  : //			radius = frand1() * blast_radius;
; 309  : 			radius = blast_radius;

  0039a	f3 0f 10 45 c8	 movss	 xmm0, DWORD PTR _blast_radius$[ebp]
  0039f	f3 0f 11 45 cc	 movss	 DWORD PTR _radius$[ebp], xmm0

; 310  : 
; 311  : 			pos.x = position->x + ( radius * offset.x );

  003a4	f3 0f 10 45 cc	 movss	 xmm0, DWORD PTR _radius$[ebp]
  003a9	f3 0f 59 45 e8	 mulss	 xmm0, DWORD PTR _offset$[ebp]
  003ae	8b 45 0c	 mov	 eax, DWORD PTR _position$[ebp]
  003b1	f3 0f 58 00	 addss	 xmm0, DWORD PTR [eax]
  003b5	f3 0f 11 45 f4	 movss	 DWORD PTR _pos$[ebp], xmm0

; 312  : 			pos.y = position->y + ( radius * offset.y );

  003ba	f3 0f 10 45 cc	 movss	 xmm0, DWORD PTR _radius$[ebp]
  003bf	f3 0f 59 45 ec	 mulss	 xmm0, DWORD PTR _offset$[ebp+4]
  003c4	8b 45 0c	 mov	 eax, DWORD PTR _position$[ebp]
  003c7	f3 0f 58 40 04	 addss	 xmm0, DWORD PTR [eax+4]
  003cc	f3 0f 11 45 f8	 movss	 DWORD PTR _pos$[ebp+4], xmm0

; 313  : 			pos.z = position->z + ( radius * offset.z );

  003d1	f3 0f 10 45 cc	 movss	 xmm0, DWORD PTR _radius$[ebp]
  003d6	f3 0f 59 45 f0	 mulss	 xmm0, DWORD PTR _offset$[ebp+8]
  003db	8b 45 0c	 mov	 eax, DWORD PTR _position$[ebp]
  003de	f3 0f 58 40 08	 addss	 xmm0, DWORD PTR [eax+8]
  003e3	f3 0f 11 45 fc	 movss	 DWORD PTR _pos$[ebp+8], xmm0

; 314  : 		}
; 315  : 		else

  003e8	eb 26		 jmp	 SHORT $LN10@create_met
$LN9@create_met:

; 316  : 		{
; 317  : 			pos.x = position->x;

  003ea	8b 45 0c	 mov	 eax, DWORD PTR _position$[ebp]
  003ed	f3 0f 10 00	 movss	 xmm0, DWORD PTR [eax]
  003f1	f3 0f 11 45 f4	 movss	 DWORD PTR _pos$[ebp], xmm0

; 318  : 			pos.y = position->y;

  003f6	8b 45 0c	 mov	 eax, DWORD PTR _position$[ebp]
  003f9	f3 0f 10 40 04	 movss	 xmm0, DWORD PTR [eax+4]
  003fe	f3 0f 11 45 f8	 movss	 DWORD PTR _pos$[ebp+4], xmm0

; 319  : 			pos.z = position->z;

  00403	8b 45 0c	 mov	 eax, DWORD PTR _position$[ebp]
  00406	f3 0f 10 40 08	 movss	 xmm0, DWORD PTR [eax+8]
  0040b	f3 0f 11 45 fc	 movss	 DWORD PTR _pos$[ebp+8], xmm0
$LN10@create_met:

; 320  : 		}
; 321  : 
; 322  : 		bound_position_to_map_volume( &pos );

  00410	8d 45 f4	 lea	 eax, DWORD PTR _pos$[ebp]
  00413	50		 push	 eax
  00414	e8 00 00 00 00	 call	 ?bound_position_to_map_volume@@YGHPAUVEC3D@@@Z ; bound_position_to_map_volume

; 323  : 
; 324  : 		new_entity = create_local_entity

  00419	6a 00		 push	 0
  0041b	f3 0f 5a 45 fc	 cvtss2sd xmm0, DWORD PTR _pos$[ebp+8]
  00420	83 ec 08	 sub	 esp, 8
  00423	f2 0f 11 04 24	 movsd	 QWORD PTR [esp], xmm0
  00428	f3 0f 5a 45 f8	 cvtss2sd xmm0, DWORD PTR _pos$[ebp+4]
  0042d	83 ec 08	 sub	 esp, 8
  00430	f2 0f 11 04 24	 movsd	 QWORD PTR [esp], xmm0
  00435	f3 0f 5a 45 f4	 cvtss2sd xmm0, DWORD PTR _pos$[ebp]
  0043a	83 ec 08	 sub	 esp, 8
  0043d	f2 0f 11 04 24	 movsd	 QWORD PTR [esp], xmm0
  00442	6a 08		 push	 8
  00444	6a 09		 push	 9
  00446	8b 45 08	 mov	 eax, DWORD PTR _explosion_component$[ebp]
  00449	f3 0f 10 40 2c	 movss	 xmm0, DWORD PTR [eax+44]
  0044e	f3 0f 5a c0	 cvtss2sd xmm0, xmm0
  00452	83 ec 08	 sub	 esp, 8
  00455	f2 0f 11 04 24	 movsd	 QWORD PTR [esp], xmm0
  0045a	6a 0b		 push	 11			; 0000000bH
  0045c	6a 04		 push	 4
  0045e	f3 0f 5a 45 e0	 cvtss2sd xmm0, DWORD PTR _lifetime$[ebp]
  00463	83 ec 08	 sub	 esp, 8
  00466	f2 0f 11 04 24	 movsd	 QWORD PTR [esp], xmm0
  0046b	6a 7b		 push	 123			; 0000007bH
  0046d	6a 04		 push	 4
  0046f	f3 0f 5a 45 e4	 cvtss2sd xmm0, DWORD PTR _delay$[ebp]
  00474	83 ec 08	 sub	 esp, 8
  00477	f2 0f 11 04 24	 movsd	 QWORD PTR [esp], xmm0
  0047c	6a 20		 push	 32			; 00000020H
  0047e	6a 04		 push	 4
  00480	f3 0f 5a 45 d0	 cvtss2sd xmm0, DWORD PTR _scale_max$[ebp]
  00485	83 ec 08	 sub	 esp, 8
  00488	f2 0f 11 04 24	 movsd	 QWORD PTR [esp], xmm0
  0048d	6a 24		 push	 36			; 00000024H
  0048f	6a 04		 push	 4
  00491	f3 0f 5a 45 d4	 cvtss2sd xmm0, DWORD PTR _scale_min$[ebp]
  00496	83 ec 08	 sub	 esp, 8
  00499	f2 0f 11 04 24	 movsd	 QWORD PTR [esp], xmm0
  0049e	6a 7c		 push	 124			; 0000007cH
  004a0	6a 04		 push	 4
  004a2	8b 4d 08	 mov	 ecx, DWORD PTR _explosion_component$[ebp]
  004a5	f3 0f 10 41 30	 movss	 xmm0, DWORD PTR [ecx+48]
  004aa	f3 0f 5a c0	 cvtss2sd xmm0, xmm0
  004ae	83 ec 08	 sub	 esp, 8
  004b1	f2 0f 11 04 24	 movsd	 QWORD PTR [esp], xmm0
  004b6	6a 4d		 push	 77			; 0000004dH
  004b8	6a 04		 push	 4
  004ba	8b 55 08	 mov	 edx, DWORD PTR _explosion_component$[ebp]
  004bd	8a 42 10	 mov	 al, BYTE PTR [edx+16]
  004c0	24 01		 and	 al, 1
  004c2	0f b6 c8	 movzx	 ecx, al
  004c5	51		 push	 ecx
  004c6	6a 00		 push	 0
  004c8	6a 05		 push	 5
  004ca	8b 55 08	 mov	 edx, DWORD PTR _explosion_component$[ebp]
  004cd	0f b6 42 0f	 movzx	 eax, BYTE PTR [edx+15]
  004d1	50		 push	 eax
  004d2	6a 1d		 push	 29			; 0000001dH
  004d4	6a 05		 push	 5
  004d6	8b 4d 08	 mov	 ecx, DWORD PTR _explosion_component$[ebp]
  004d9	0f b6 51 0e	 movzx	 edx, BYTE PTR [ecx+14]
  004dd	52		 push	 edx
  004de	6a 1e		 push	 30			; 0000001eH
  004e0	6a 05		 push	 5
  004e2	8b 45 08	 mov	 eax, DWORD PTR _explosion_component$[ebp]
  004e5	0f b6 48 0d	 movzx	 ecx, BYTE PTR [eax+13]
  004e9	51		 push	 ecx
  004ea	6a 1f		 push	 31			; 0000001fH
  004ec	6a 05		 push	 5
  004ee	8b 55 08	 mov	 edx, DWORD PTR _explosion_component$[ebp]
  004f1	0f b6 42 0c	 movzx	 eax, BYTE PTR [edx+12]
  004f5	50		 push	 eax
  004f6	6a 20		 push	 32			; 00000020H
  004f8	6a 05		 push	 5
  004fa	8b 4d bc	 mov	 ecx, DWORD PTR _texture$[ebp]
  004fd	51		 push	 ecx
  004fe	6a 08		 push	 8
  00500	6a 05		 push	 5
  00502	8b 55 b4	 mov	 edx, DWORD PTR _loop$[ebp]
  00505	8b 45 14	 mov	 eax, DWORD PTR _entity_index_list$[ebp]
  00508	8b 0c 90	 mov	 ecx, DWORD PTR [eax+edx*4]
  0050b	51		 push	 ecx
  0050c	6a 21		 push	 33			; 00000021H
  0050e	e8 00 00 00 00	 call	 ?create_local_entity@@YAPAUENTITY@@W4ENTITY_TYPES@@HZZ ; create_local_entity
  00513	81 c4 d4 00 00
	00		 add	 esp, 212		; 000000d4H
  00519	89 45 b0	 mov	 DWORD PTR _new_entity$[ebp], eax

; 325  : 		(
; 326  : 			ENTITY_TYPE_SPRITE,
; 327  : 			entity_index_list[ loop ],
; 328  : 			ENTITY_ATTR_INT_VALUE (INT_TYPE_ANIMATED_TEXTURE, texture),
; 329  : 			ENTITY_ATTR_INT_VALUE (INT_TYPE_COLOUR_RED, explosion_component->red),
; 330  : 			ENTITY_ATTR_INT_VALUE (INT_TYPE_COLOUR_GREEN, explosion_component->green),
; 331  : 			ENTITY_ATTR_INT_VALUE (INT_TYPE_COLOUR_BLUE, explosion_component->blue),
; 332  : 			ENTITY_ATTR_INT_VALUE (INT_TYPE_COLOUR_ALPHA, explosion_component->alpha),
; 333  : 			ENTITY_ATTR_INT_VALUE (INT_TYPE_ADDITIVE, explosion_component->additive),
; 334  : 			ENTITY_ATTR_FLOAT_VALUE (FLOAT_TYPE_MAX_TURN_RATE, explosion_component->rotation_rate),
; 335  : //			ENTITY_ATTR_FLOAT_VALUE (FLOAT_TYPE_SCALE, scale),
; 336  : 			ENTITY_ATTR_FLOAT_VALUE (FLOAT_TYPE_START_SCALE, scale_min),
; 337  : 			ENTITY_ATTR_FLOAT_VALUE (FLOAT_TYPE_END_SCALE, scale_max),
; 338  : 			ENTITY_ATTR_FLOAT_VALUE (FLOAT_TYPE_EFFECT_LIFETIME, delay),
; 339  : 			ENTITY_ATTR_FLOAT_VALUE (FLOAT_TYPE_SPRITE_LIFETIME, lifetime),
; 340  : 			ENTITY_ATTR_FLOAT_VALUE (FLOAT_TYPE_ANIMATION_FREQUENCY, explosion_component->animation_frequency),
; 341  : 			ENTITY_ATTR_VEC3D (VEC3D_TYPE_POSITION, pos.x, pos.y, pos.z),
; 342  : 			ENTITY_ATTR_END
; 343  : 		);
; 344  : 
; 345  : 		entity_index_list[ loop ] = get_local_entity_index( new_entity );

  0051c	8b 45 b0	 mov	 eax, DWORD PTR _new_entity$[ebp]
  0051f	2b 05 00 00 00
	00		 sub	 eax, DWORD PTR ?entities@@3PAUENTITY@@A ; entities
  00525	c1 f8 04	 sar	 eax, 4
  00528	8b 4d b4	 mov	 ecx, DWORD PTR _loop$[ebp]
  0052b	8b 55 14	 mov	 edx, DWORD PTR _entity_index_list$[ebp]
  0052e	89 04 8a	 mov	 DWORD PTR [edx+ecx*4], eax

; 346  : 	}

  00531	e9 7f fc ff ff	 jmp	 $LN2@create_met
$LN3@create_met:

; 347  : 
; 348  : 	return count;

  00536	8b 45 b8	 mov	 eax, DWORD PTR _count$[ebp]
$LN1@create_met:

; 349  : }

  00539	5f		 pop	 edi
  0053a	5e		 pop	 esi
  0053b	5b		 pop	 ebx
  0053c	8b e5		 mov	 esp, ebp
  0053e	5d		 pop	 ebp
  0053f	c2 10 00	 ret	 16			; 00000010H
?create_meta_explosion_sprites@@YGHPAUMETA_EXPLOSION_COMPONENT@@PAUVEC3D@@PAUENTITY@@PAH@Z ENDP ; create_meta_explosion_sprites
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\entity\special\effect\explosn\explosn.c
;	COMDAT ?create_client_server_object_hit_ground_explosion_effect@@YGXPAUENTITY@@H@Z
_TEXT	SEGMENT
tv88 = -88						; size = 4
tv80 = -84						; size = 4
_type$ = -16						; size = 4
_pos$ = -12						; size = 12
_en$ = 8						; size = 4
_terrain_type$ = 12					; size = 4
?create_client_server_object_hit_ground_explosion_effect@@YGXPAUENTITY@@H@Z PROC ; create_client_server_object_hit_ground_explosion_effect, COMDAT

; 1099 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 58	 sub	 esp, 88			; 00000058H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 1100 : 	vec3d
; 1101 : 		pos;
; 1102 : 
; 1103 : 	meta_explosion_types
; 1104 : 		type;
; 1105 : 
; 1106 : 	ASSERT (en);

  00009	83 7d 08 00	 cmp	 DWORD PTR _en$[ebp], 0
  0000d	75 18		 jne	 SHORT $LN2@create_cli
  0000f	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??create_client_server_object_hit_ground_explosion_effect@@YGXPAUENTITY@@H@Z@4JA
  00014	83 c0 07	 add	 eax, 7
  00017	50		 push	 eax
  00018	68 00 00 00 00	 push	 OFFSET ??_C@_0FE@MFECPMIC@c?3?2users?2nhv90?2projects?2eech?2ap@
  0001d	68 00 00 00 00	 push	 OFFSET ??_C@_02LFNMGJAP@en@
  00022	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN2@create_cli:

; 1107 : 
; 1108 : 	ASSERT (get_comms_model () == COMMS_MODEL_SERVER);

  00027	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?system_comms_model@@3W4COMMS_MODEL_TYPES@@A, 0 ; system_comms_model
  0002e	74 18		 je	 SHORT $LN3@create_cli
  00030	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??create_client_server_object_hit_ground_explosion_effect@@YGXPAUENTITY@@H@Z@4JA
  00035	83 c0 09	 add	 eax, 9
  00038	50		 push	 eax
  00039	68 00 00 00 00	 push	 OFFSET ??_C@_0FE@MFECPMIC@c?3?2users?2nhv90?2projects?2eech?2ap@
  0003e	68 00 00 00 00	 push	 OFFSET ??_C@_0CJ@DMBLBJBK@get_comms_model?5?$CI?$CJ?5?$DN?$DN?5COMMS_MOD@
  00043	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN3@create_cli:

; 1109 : 
; 1110 : 	get_local_entity_vec3d (en, VEC3D_TYPE_POSITION, &pos);

  00048	83 7d 08 00	 cmp	 DWORD PTR _en$[ebp], 0
  0004c	74 0a		 je	 SHORT $LN7@create_cli
  0004e	8b 45 08	 mov	 eax, DWORD PTR _en$[ebp]
  00051	8b 08		 mov	 ecx, DWORD PTR [eax]
  00053	89 4d ac	 mov	 DWORD PTR tv80[ebp], ecx
  00056	eb 21		 jmp	 SHORT $LN8@create_cli
$LN7@create_cli:
  00058	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??create_client_server_object_hit_ground_explosion_effect@@YGXPAUENTITY@@H@Z@4JA
  0005e	83 c2 0b	 add	 edx, 11			; 0000000bH
  00061	52		 push	 edx
  00062	68 00 00 00 00	 push	 OFFSET ??_C@_0FE@MFECPMIC@c?3?2users?2nhv90?2projects?2eech?2ap@
  00067	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  0006c	50		 push	 eax
  0006d	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00072	c7 45 ac 00 00
	00 00		 mov	 DWORD PTR tv80[ebp], 0
$LN8@create_cli:
  00079	b9 01 00 00 00	 mov	 ecx, 1
  0007e	85 c9		 test	 ecx, ecx
  00080	74 09		 je	 SHORT $LN9@create_cli
  00082	c7 45 a8 08 00
	00 00		 mov	 DWORD PTR tv88[ebp], 8
  00089	eb 21		 jmp	 SHORT $LN10@create_cli
$LN9@create_cli:
  0008b	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??create_client_server_object_hit_ground_explosion_effect@@YGXPAUENTITY@@H@Z@4JA
  00091	83 c2 0b	 add	 edx, 11			; 0000000bH
  00094	52		 push	 edx
  00095	68 00 00 00 00	 push	 OFFSET ??_C@_0FE@MFECPMIC@c?3?2users?2nhv90?2projects?2eech?2ap@
  0009a	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_vec3d_type_message@@3PBDB ; overload_invalid_vec3d_type_message
  0009f	50		 push	 eax
  000a0	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  000a5	c7 45 a8 00 00
	00 00		 mov	 DWORD PTR tv88[ebp], 0
$LN10@create_cli:
  000ac	8d 4d f4	 lea	 ecx, DWORD PTR _pos$[ebp]
  000af	51		 push	 ecx
  000b0	6a 08		 push	 8
  000b2	8b 55 08	 mov	 edx, DWORD PTR _en$[ebp]
  000b5	52		 push	 edx
  000b6	6b 45 ac 60	 imul	 eax, DWORD PTR tv80[ebp], 96
  000ba	8b 4d a8	 mov	 ecx, DWORD PTR tv88[ebp]
  000bd	8b 94 88 00 00
	00 00		 mov	 edx, DWORD PTR ?fn_get_local_entity_vec3d@@3PAY0BI@P6GXPAUENTITY@@W4VEC3D_TYPES@@PAUVEC3D@@@ZA[eax+ecx*4]
  000c4	ff d2		 call	 edx

; 1111 : 
; 1112 : 	if (get_terrain_type_class (terrain_type) == TERRAIN_CLASS_WATER)

  000c6	8b 45 0c	 mov	 eax, DWORD PTR _terrain_type$[ebp]
  000c9	50		 push	 eax
  000ca	e8 00 00 00 00	 call	 ?get_terrain_type_class@@YG?AW4TERRAIN_CLASSES@@H@Z ; get_terrain_type_class
  000cf	83 f8 01	 cmp	 eax, 1
  000d2	75 09		 jne	 SHORT $LN4@create_cli

; 1113 : 	{
; 1114 : 		type = MEDIUM_WATER_META_EXPLOSION;

  000d4	c7 45 f0 13 00
	00 00		 mov	 DWORD PTR _type$[ebp], 19 ; 00000013H

; 1115 : 	}
; 1116 : 	else

  000db	eb 07		 jmp	 SHORT $LN5@create_cli
$LN4@create_cli:

; 1117 : 	{
; 1118 : 		type = MEDIUM_EARTH_META_EXPLOSION;

  000dd	c7 45 f0 10 00
	00 00		 mov	 DWORD PTR _type$[ebp], 16 ; 00000010H
$LN5@create_cli:

; 1119 : 	}
; 1120 : 
; 1121 : 	#if DEBUG_MODULE
; 1122 : 
; 1123 : 	debug_log ("EXPLOSN : Creating Object Hit Ground effect, type %d, at %f, %f", type, pos.x, pos.z);
; 1124 : 
; 1125 : 	#endif
; 1126 : 
; 1127 : 	create_client_server_explosion_effect (type, &pos, NULL);

  000e4	6a 00		 push	 0
  000e6	8d 45 f4	 lea	 eax, DWORD PTR _pos$[ebp]
  000e9	50		 push	 eax
  000ea	8b 4d f0	 mov	 ecx, DWORD PTR _type$[ebp]
  000ed	51		 push	 ecx
  000ee	e8 00 00 00 00	 call	 ?create_client_server_explosion_effect@@YGXW4META_EXPLOSION_TYPES@@PAUVEC3D@@PAUENTITY@@@Z ; create_client_server_explosion_effect

; 1128 : }

  000f3	5f		 pop	 edi
  000f4	5e		 pop	 esi
  000f5	5b		 pop	 ebx
  000f6	8b e5		 mov	 esp, ebp
  000f8	5d		 pop	 ebp
  000f9	c2 08 00	 ret	 8
?create_client_server_object_hit_ground_explosion_effect@@YGXPAUENTITY@@H@Z ENDP ; create_client_server_object_hit_ground_explosion_effect
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\entity\special\effect\explosn\explosn.c
;	COMDAT ?create_client_server_object_killed_explosion_effect@@YGXPAUENTITY@@@Z
_TEXT	SEGMENT
tv161 = -92						; size = 4
tv140 = -92						; size = 4
tv88 = -92						; size = 4
tv153 = -88						; size = 4
tv132 = -88						; size = 4
tv80 = -88						; size = 4
_explosive_quality$ = -20				; size = 4
_explosive_power$ = -16					; size = 4
_pos$ = -12						; size = 12
_en$ = 8						; size = 4
?create_client_server_object_killed_explosion_effect@@YGXPAUENTITY@@@Z PROC ; create_client_server_object_killed_explosion_effect, COMDAT

; 1135 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 5c	 sub	 esp, 92			; 0000005cH
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 1136 : 	vec3d
; 1137 : 		pos;
; 1138 : 
; 1139 : 	int
; 1140 : 		explosive_power,
; 1141 : 		explosive_quality;
; 1142 : 
; 1143 : 	ASSERT (en);

  00009	83 7d 08 00	 cmp	 DWORD PTR _en$[ebp], 0
  0000d	75 18		 jne	 SHORT $LN2@create_cli
  0000f	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??create_client_server_object_killed_explosion_effect@@YGXPAUENTITY@@@Z@4JA
  00014	83 c0 08	 add	 eax, 8
  00017	50		 push	 eax
  00018	68 00 00 00 00	 push	 OFFSET ??_C@_0FE@MFECPMIC@c?3?2users?2nhv90?2projects?2eech?2ap@
  0001d	68 00 00 00 00	 push	 OFFSET ??_C@_02LFNMGJAP@en@
  00022	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN2@create_cli:

; 1144 : 
; 1145 : 	ASSERT (get_comms_model () == COMMS_MODEL_SERVER);

  00027	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?system_comms_model@@3W4COMMS_MODEL_TYPES@@A, 0 ; system_comms_model
  0002e	74 18		 je	 SHORT $LN3@create_cli
  00030	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??create_client_server_object_killed_explosion_effect@@YGXPAUENTITY@@@Z@4JA
  00035	83 c0 0a	 add	 eax, 10			; 0000000aH
  00038	50		 push	 eax
  00039	68 00 00 00 00	 push	 OFFSET ??_C@_0FE@MFECPMIC@c?3?2users?2nhv90?2projects?2eech?2ap@
  0003e	68 00 00 00 00	 push	 OFFSET ??_C@_0CJ@DMBLBJBK@get_comms_model?5?$CI?$CJ?5?$DN?$DN?5COMMS_MOD@
  00043	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN3@create_cli:

; 1146 : 
; 1147 : 	explosive_quality = get_local_entity_int_value (en, INT_TYPE_EXPLOSIVE_QUALITY);

  00048	83 7d 08 00	 cmp	 DWORD PTR _en$[ebp], 0
  0004c	74 0a		 je	 SHORT $LN9@create_cli
  0004e	8b 45 08	 mov	 eax, DWORD PTR _en$[ebp]
  00051	8b 08		 mov	 ecx, DWORD PTR [eax]
  00053	89 4d a8	 mov	 DWORD PTR tv80[ebp], ecx
  00056	eb 21		 jmp	 SHORT $LN10@create_cli
$LN9@create_cli:
  00058	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??create_client_server_object_killed_explosion_effect@@YGXPAUENTITY@@@Z@4JA
  0005e	83 c2 0c	 add	 edx, 12			; 0000000cH
  00061	52		 push	 edx
  00062	68 00 00 00 00	 push	 OFFSET ??_C@_0FE@MFECPMIC@c?3?2users?2nhv90?2projects?2eech?2ap@
  00067	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  0006c	50		 push	 eax
  0006d	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00072	c7 45 a8 00 00
	00 00		 mov	 DWORD PTR tv80[ebp], 0
$LN10@create_cli:
  00079	b9 01 00 00 00	 mov	 ecx, 1
  0007e	85 c9		 test	 ecx, ecx
  00080	74 09		 je	 SHORT $LN11@create_cli
  00082	c7 45 a4 37 00
	00 00		 mov	 DWORD PTR tv88[ebp], 55	; 00000037H
  00089	eb 21		 jmp	 SHORT $LN12@create_cli
$LN11@create_cli:
  0008b	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??create_client_server_object_killed_explosion_effect@@YGXPAUENTITY@@@Z@4JA
  00091	83 c2 0c	 add	 edx, 12			; 0000000cH
  00094	52		 push	 edx
  00095	68 00 00 00 00	 push	 OFFSET ??_C@_0FE@MFECPMIC@c?3?2users?2nhv90?2projects?2eech?2ap@
  0009a	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_int_type_message@@3PBDB ; overload_invalid_int_type_message
  0009f	50		 push	 eax
  000a0	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  000a5	c7 45 a4 00 00
	00 00		 mov	 DWORD PTR tv88[ebp], 0
$LN12@create_cli:
  000ac	6a 37		 push	 55			; 00000037H
  000ae	8b 4d 08	 mov	 ecx, DWORD PTR _en$[ebp]
  000b1	51		 push	 ecx
  000b2	69 55 a8 5c 04
	00 00		 imul	 edx, DWORD PTR tv80[ebp], 1116
  000b9	8b 45 a4	 mov	 eax, DWORD PTR tv88[ebp]
  000bc	8b 8c 82 00 00
	00 00		 mov	 ecx, DWORD PTR ?fn_get_local_entity_int_value@@3PAY0BBH@P6GHPAUENTITY@@W4INT_TYPES@@@ZA[edx+eax*4]
  000c3	ff d1		 call	 ecx
  000c5	89 45 ec	 mov	 DWORD PTR _explosive_quality$[ebp], eax

; 1148 : 
; 1149 : 	explosive_power = get_local_entity_int_value (en, INT_TYPE_EXPLOSIVE_POWER);

  000c8	83 7d 08 00	 cmp	 DWORD PTR _en$[ebp], 0
  000cc	74 0a		 je	 SHORT $LN13@create_cli
  000ce	8b 45 08	 mov	 eax, DWORD PTR _en$[ebp]
  000d1	8b 08		 mov	 ecx, DWORD PTR [eax]
  000d3	89 4d a8	 mov	 DWORD PTR tv132[ebp], ecx
  000d6	eb 21		 jmp	 SHORT $LN14@create_cli
$LN13@create_cli:
  000d8	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??create_client_server_object_killed_explosion_effect@@YGXPAUENTITY@@@Z@4JA
  000de	83 c2 0e	 add	 edx, 14			; 0000000eH
  000e1	52		 push	 edx
  000e2	68 00 00 00 00	 push	 OFFSET ??_C@_0FE@MFECPMIC@c?3?2users?2nhv90?2projects?2eech?2ap@
  000e7	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  000ec	50		 push	 eax
  000ed	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  000f2	c7 45 a8 00 00
	00 00		 mov	 DWORD PTR tv132[ebp], 0
$LN14@create_cli:
  000f9	b9 01 00 00 00	 mov	 ecx, 1
  000fe	85 c9		 test	 ecx, ecx
  00100	74 09		 je	 SHORT $LN15@create_cli
  00102	c7 45 a4 36 00
	00 00		 mov	 DWORD PTR tv140[ebp], 54 ; 00000036H
  00109	eb 21		 jmp	 SHORT $LN16@create_cli
$LN15@create_cli:
  0010b	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??create_client_server_object_killed_explosion_effect@@YGXPAUENTITY@@@Z@4JA
  00111	83 c2 0e	 add	 edx, 14			; 0000000eH
  00114	52		 push	 edx
  00115	68 00 00 00 00	 push	 OFFSET ??_C@_0FE@MFECPMIC@c?3?2users?2nhv90?2projects?2eech?2ap@
  0011a	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_int_type_message@@3PBDB ; overload_invalid_int_type_message
  0011f	50		 push	 eax
  00120	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00125	c7 45 a4 00 00
	00 00		 mov	 DWORD PTR tv140[ebp], 0
$LN16@create_cli:
  0012c	6a 36		 push	 54			; 00000036H
  0012e	8b 4d 08	 mov	 ecx, DWORD PTR _en$[ebp]
  00131	51		 push	 ecx
  00132	69 55 a8 5c 04
	00 00		 imul	 edx, DWORD PTR tv132[ebp], 1116
  00139	8b 45 a4	 mov	 eax, DWORD PTR tv140[ebp]
  0013c	8b 8c 82 00 00
	00 00		 mov	 ecx, DWORD PTR ?fn_get_local_entity_int_value@@3PAY0BBH@P6GHPAUENTITY@@W4INT_TYPES@@@ZA[edx+eax*4]
  00143	ff d1		 call	 ecx
  00145	89 45 f0	 mov	 DWORD PTR _explosive_power$[ebp], eax

; 1150 : 
; 1151 : 	if (explosive_power == EXPLOSIVE_POWER_NONE)

  00148	83 7d f0 00	 cmp	 DWORD PTR _explosive_power$[ebp], 0
  0014c	75 05		 jne	 SHORT $LN4@create_cli

; 1152 : 	{
; 1153 : 		return;

  0014e	e9 c9 00 00 00	 jmp	 $LN1@create_cli
$LN4@create_cli:

; 1154 : 	}
; 1155 : 
; 1156 : 	get_local_entity_vec3d (en, VEC3D_TYPE_POSITION, &pos);

  00153	83 7d 08 00	 cmp	 DWORD PTR _en$[ebp], 0
  00157	74 0a		 je	 SHORT $LN17@create_cli
  00159	8b 45 08	 mov	 eax, DWORD PTR _en$[ebp]
  0015c	8b 08		 mov	 ecx, DWORD PTR [eax]
  0015e	89 4d a8	 mov	 DWORD PTR tv153[ebp], ecx
  00161	eb 21		 jmp	 SHORT $LN18@create_cli
$LN17@create_cli:
  00163	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??create_client_server_object_killed_explosion_effect@@YGXPAUENTITY@@@Z@4JA
  00169	83 c2 15	 add	 edx, 21			; 00000015H
  0016c	52		 push	 edx
  0016d	68 00 00 00 00	 push	 OFFSET ??_C@_0FE@MFECPMIC@c?3?2users?2nhv90?2projects?2eech?2ap@
  00172	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  00177	50		 push	 eax
  00178	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  0017d	c7 45 a8 00 00
	00 00		 mov	 DWORD PTR tv153[ebp], 0
$LN18@create_cli:
  00184	b9 01 00 00 00	 mov	 ecx, 1
  00189	85 c9		 test	 ecx, ecx
  0018b	74 09		 je	 SHORT $LN19@create_cli
  0018d	c7 45 a4 08 00
	00 00		 mov	 DWORD PTR tv161[ebp], 8
  00194	eb 21		 jmp	 SHORT $LN20@create_cli
$LN19@create_cli:
  00196	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??create_client_server_object_killed_explosion_effect@@YGXPAUENTITY@@@Z@4JA
  0019c	83 c2 15	 add	 edx, 21			; 00000015H
  0019f	52		 push	 edx
  001a0	68 00 00 00 00	 push	 OFFSET ??_C@_0FE@MFECPMIC@c?3?2users?2nhv90?2projects?2eech?2ap@
  001a5	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_vec3d_type_message@@3PBDB ; overload_invalid_vec3d_type_message
  001aa	50		 push	 eax
  001ab	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  001b0	c7 45 a4 00 00
	00 00		 mov	 DWORD PTR tv161[ebp], 0
$LN20@create_cli:
  001b7	8d 4d f4	 lea	 ecx, DWORD PTR _pos$[ebp]
  001ba	51		 push	 ecx
  001bb	6a 08		 push	 8
  001bd	8b 55 08	 mov	 edx, DWORD PTR _en$[ebp]
  001c0	52		 push	 edx
  001c1	6b 45 a8 60	 imul	 eax, DWORD PTR tv153[ebp], 96
  001c5	8b 4d a4	 mov	 ecx, DWORD PTR tv161[ebp]
  001c8	8b 94 88 00 00
	00 00		 mov	 edx, DWORD PTR ?fn_get_local_entity_vec3d@@3PAY0BI@P6GXPAUENTITY@@W4VEC3D_TYPES@@PAUVEC3D@@@ZA[eax+ecx*4]
  001cf	ff d2		 call	 edx

; 1157 : 
; 1158 : 	if (explosive_quality & EXPLOSIVE_QUALITY_DUST)

  001d1	8b 45 ec	 mov	 eax, DWORD PTR _explosive_quality$[ebp]
  001d4	83 e0 01	 and	 eax, 1
  001d7	74 11		 je	 SHORT $LN5@create_cli

; 1159 : 	{
; 1160 : 		create_client_server_dust_object_explosion_effect (en, &pos, explosive_power);

  001d9	8b 45 f0	 mov	 eax, DWORD PTR _explosive_power$[ebp]
  001dc	50		 push	 eax
  001dd	8d 4d f4	 lea	 ecx, DWORD PTR _pos$[ebp]
  001e0	51		 push	 ecx
  001e1	8b 55 08	 mov	 edx, DWORD PTR _en$[ebp]
  001e4	52		 push	 edx
  001e5	e8 00 00 00 00	 call	 ?create_client_server_dust_object_explosion_effect@@YGXPAUENTITY@@PAUVEC3D@@H@Z ; create_client_server_dust_object_explosion_effect
$LN5@create_cli:

; 1161 : 	}
; 1162 : 
; 1163 : 	if (explosive_quality & EXPLOSIVE_QUALITY_EXPLOSIVE)

  001ea	8b 45 ec	 mov	 eax, DWORD PTR _explosive_quality$[ebp]
  001ed	83 e0 02	 and	 eax, 2
  001f0	74 11		 je	 SHORT $LN6@create_cli

; 1164 : 	{
; 1165 : 		create_client_server_explosive_object_explosion_effect (en, &pos, explosive_power);

  001f2	8b 45 f0	 mov	 eax, DWORD PTR _explosive_power$[ebp]
  001f5	50		 push	 eax
  001f6	8d 4d f4	 lea	 ecx, DWORD PTR _pos$[ebp]
  001f9	51		 push	 ecx
  001fa	8b 55 08	 mov	 edx, DWORD PTR _en$[ebp]
  001fd	52		 push	 edx
  001fe	e8 00 00 00 00	 call	 ?create_client_server_explosive_object_explosion_effect@@YGXPAUENTITY@@PAUVEC3D@@H@Z ; create_client_server_explosive_object_explosion_effect
$LN6@create_cli:

; 1166 : 	}
; 1167 : 
; 1168 : 	if (explosive_quality & EXPLOSIVE_QUALITY_FLAMMABLE)

  00203	8b 45 ec	 mov	 eax, DWORD PTR _explosive_quality$[ebp]
  00206	83 e0 04	 and	 eax, 4
  00209	74 11		 je	 SHORT $LN1@create_cli

; 1169 : 	{
; 1170 : 		create_client_server_flammable_object_explosion_effect (en, &pos, explosive_power);

  0020b	8b 45 f0	 mov	 eax, DWORD PTR _explosive_power$[ebp]
  0020e	50		 push	 eax
  0020f	8d 4d f4	 lea	 ecx, DWORD PTR _pos$[ebp]
  00212	51		 push	 ecx
  00213	8b 55 08	 mov	 edx, DWORD PTR _en$[ebp]
  00216	52		 push	 edx
  00217	e8 00 00 00 00	 call	 ?create_client_server_flammable_object_explosion_effect@@YGXPAUENTITY@@PAUVEC3D@@H@Z ; create_client_server_flammable_object_explosion_effect
$LN1@create_cli:

; 1171 : 	}
; 1172 : }

  0021c	5f		 pop	 edi
  0021d	5e		 pop	 esi
  0021e	5b		 pop	 ebx
  0021f	8b e5		 mov	 esp, ebp
  00221	5d		 pop	 ebp
  00222	c2 04 00	 ret	 4
?create_client_server_object_killed_explosion_effect@@YGXPAUENTITY@@@Z ENDP ; create_client_server_object_killed_explosion_effect
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\entity\special\effect\explosn\explosn.c
;	COMDAT ?create_client_server_weapon_killed_explosion_effect@@YGXPAUENTITY@@@Z
_TEXT	SEGMENT
tv245 = -148						; size = 4
tv220 = -148						; size = 4
tv201 = -148						; size = 4
tv160 = -148						; size = 4
tv140 = -148						; size = 4
tv88 = -148						; size = 4
tv238 = -144						; size = 4
tv213 = -144						; size = 4
tv193 = -144						; size = 4
tv170 = -144						; size = 4
tv152 = -144						; size = 4
tv132 = -144						; size = 4
tv80 = -144						; size = 4
_crater_pos$1 = -76					; size = 12
_target$2 = -64						; size = 4
_point_data$ = -60					; size = 44
_warhead_type$ = -16					; size = 4
_kill_code$ = -12					; size = 4
_type$ = -8						; size = 4
_pos$ = -4						; size = 4
_en$ = 8						; size = 4
?create_client_server_weapon_killed_explosion_effect@@YGXPAUENTITY@@@Z PROC ; create_client_server_weapon_killed_explosion_effect, COMDAT

; 798  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec 94 00 00
	00		 sub	 esp, 148		; 00000094H
  00009	53		 push	 ebx
  0000a	56		 push	 esi
  0000b	57		 push	 edi

; 799  : 	vec3d
; 800  : 		*pos;
; 801  : 
; 802  : 	meta_explosion_types
; 803  : 		type;
; 804  : 
; 805  : 	weapon_kill_codes
; 806  : 		kill_code;
; 807  : 
; 808  : 	weapon_warhead_types
; 809  : 		warhead_type;
; 810  : 
; 811  : 	terrain_3d_point_data
; 812  : 		point_data;
; 813  : 
; 814  : 	ASSERT (en);

  0000c	83 7d 08 00	 cmp	 DWORD PTR _en$[ebp], 0
  00010	75 18		 jne	 SHORT $LN4@create_cli
  00012	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??create_client_server_weapon_killed_explosion_effect@@YGXPAUENTITY@@@Z@4JA
  00017	83 c0 10	 add	 eax, 16			; 00000010H
  0001a	50		 push	 eax
  0001b	68 00 00 00 00	 push	 OFFSET ??_C@_0FE@MFECPMIC@c?3?2users?2nhv90?2projects?2eech?2ap@
  00020	68 00 00 00 00	 push	 OFFSET ??_C@_02LFNMGJAP@en@
  00025	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN4@create_cli:

; 815  : 
; 816  : 	ASSERT (get_comms_model () == COMMS_MODEL_SERVER);

  0002a	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?system_comms_model@@3W4COMMS_MODEL_TYPES@@A, 0 ; system_comms_model
  00031	74 18		 je	 SHORT $LN5@create_cli
  00033	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??create_client_server_weapon_killed_explosion_effect@@YGXPAUENTITY@@@Z@4JA
  00038	83 c0 12	 add	 eax, 18			; 00000012H
  0003b	50		 push	 eax
  0003c	68 00 00 00 00	 push	 OFFSET ??_C@_0FE@MFECPMIC@c?3?2users?2nhv90?2projects?2eech?2ap@
  00041	68 00 00 00 00	 push	 OFFSET ??_C@_0CJ@DMBLBJBK@get_comms_model?5?$CI?$CJ?5?$DN?$DN?5COMMS_MOD@
  00046	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN5@create_cli:

; 817  : 
; 818  : 	pos = get_local_entity_vec3d_ptr (en, VEC3D_TYPE_POSITION);

  0004b	83 7d 08 00	 cmp	 DWORD PTR _en$[ebp], 0
  0004f	74 0d		 je	 SHORT $LN20@create_cli
  00051	8b 45 08	 mov	 eax, DWORD PTR _en$[ebp]
  00054	8b 08		 mov	 ecx, DWORD PTR [eax]
  00056	89 8d 70 ff ff
	ff		 mov	 DWORD PTR tv80[ebp], ecx
  0005c	eb 24		 jmp	 SHORT $LN21@create_cli
$LN20@create_cli:
  0005e	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??create_client_server_weapon_killed_explosion_effect@@YGXPAUENTITY@@@Z@4JA
  00064	83 c2 14	 add	 edx, 20			; 00000014H
  00067	52		 push	 edx
  00068	68 00 00 00 00	 push	 OFFSET ??_C@_0FE@MFECPMIC@c?3?2users?2nhv90?2projects?2eech?2ap@
  0006d	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  00072	50		 push	 eax
  00073	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00078	c7 85 70 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv80[ebp], 0
$LN21@create_cli:
  00082	b9 01 00 00 00	 mov	 ecx, 1
  00087	85 c9		 test	 ecx, ecx
  00089	74 0c		 je	 SHORT $LN22@create_cli
  0008b	c7 85 6c ff ff
	ff 08 00 00 00	 mov	 DWORD PTR tv88[ebp], 8
  00095	eb 24		 jmp	 SHORT $LN23@create_cli
$LN22@create_cli:
  00097	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??create_client_server_weapon_killed_explosion_effect@@YGXPAUENTITY@@@Z@4JA
  0009d	83 c2 14	 add	 edx, 20			; 00000014H
  000a0	52		 push	 edx
  000a1	68 00 00 00 00	 push	 OFFSET ??_C@_0FE@MFECPMIC@c?3?2users?2nhv90?2projects?2eech?2ap@
  000a6	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_vec3d_type_message@@3PBDB ; overload_invalid_vec3d_type_message
  000ab	50		 push	 eax
  000ac	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  000b1	c7 85 6c ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv88[ebp], 0
$LN23@create_cli:
  000bb	6a 08		 push	 8
  000bd	8b 4d 08	 mov	 ecx, DWORD PTR _en$[ebp]
  000c0	51		 push	 ecx
  000c1	6b 95 70 ff ff
	ff 60		 imul	 edx, DWORD PTR tv80[ebp], 96
  000c8	8b 85 6c ff ff
	ff		 mov	 eax, DWORD PTR tv88[ebp]
  000ce	8b 8c 82 00 00
	00 00		 mov	 ecx, DWORD PTR ?fn_get_local_entity_vec3d_ptr@@3PAY0BI@P6GPAUVEC3D@@PAUENTITY@@W4VEC3D_TYPES@@@ZA[edx+eax*4]
  000d5	ff d1		 call	 ecx
  000d7	89 45 fc	 mov	 DWORD PTR _pos$[ebp], eax

; 819  : 
; 820  : 	kill_code = (weapon_kill_codes) get_local_entity_int_value (en, INT_TYPE_WEAPON_KILL_CODE);

  000da	83 7d 08 00	 cmp	 DWORD PTR _en$[ebp], 0
  000de	74 0d		 je	 SHORT $LN24@create_cli
  000e0	8b 45 08	 mov	 eax, DWORD PTR _en$[ebp]
  000e3	8b 08		 mov	 ecx, DWORD PTR [eax]
  000e5	89 8d 70 ff ff
	ff		 mov	 DWORD PTR tv132[ebp], ecx
  000eb	eb 24		 jmp	 SHORT $LN25@create_cli
$LN24@create_cli:
  000ed	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??create_client_server_weapon_killed_explosion_effect@@YGXPAUENTITY@@@Z@4JA
  000f3	83 c2 16	 add	 edx, 22			; 00000016H
  000f6	52		 push	 edx
  000f7	68 00 00 00 00	 push	 OFFSET ??_C@_0FE@MFECPMIC@c?3?2users?2nhv90?2projects?2eech?2ap@
  000fc	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  00101	50		 push	 eax
  00102	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00107	c7 85 70 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv132[ebp], 0
$LN25@create_cli:
  00111	b9 01 00 00 00	 mov	 ecx, 1
  00116	85 c9		 test	 ecx, ecx
  00118	74 0c		 je	 SHORT $LN26@create_cli
  0011a	c7 85 6c ff ff
	ff 08 01 00 00	 mov	 DWORD PTR tv140[ebp], 264 ; 00000108H
  00124	eb 24		 jmp	 SHORT $LN27@create_cli
$LN26@create_cli:
  00126	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??create_client_server_weapon_killed_explosion_effect@@YGXPAUENTITY@@@Z@4JA
  0012c	83 c2 16	 add	 edx, 22			; 00000016H
  0012f	52		 push	 edx
  00130	68 00 00 00 00	 push	 OFFSET ??_C@_0FE@MFECPMIC@c?3?2users?2nhv90?2projects?2eech?2ap@
  00135	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_int_type_message@@3PBDB ; overload_invalid_int_type_message
  0013a	50		 push	 eax
  0013b	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00140	c7 85 6c ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv140[ebp], 0
$LN27@create_cli:
  0014a	68 08 01 00 00	 push	 264			; 00000108H
  0014f	8b 4d 08	 mov	 ecx, DWORD PTR _en$[ebp]
  00152	51		 push	 ecx
  00153	69 95 70 ff ff
	ff 5c 04 00 00	 imul	 edx, DWORD PTR tv132[ebp], 1116
  0015d	8b 85 6c ff ff
	ff		 mov	 eax, DWORD PTR tv140[ebp]
  00163	8b 8c 82 00 00
	00 00		 mov	 ecx, DWORD PTR ?fn_get_local_entity_int_value@@3PAY0BBH@P6GHPAUENTITY@@W4INT_TYPES@@@ZA[edx+eax*4]
  0016a	ff d1		 call	 ecx
  0016c	89 45 f4	 mov	 DWORD PTR _kill_code$[ebp], eax

; 821  : 
; 822  : 	warhead_type = (weapon_warhead_types) get_local_entity_int_value (en, INT_TYPE_WEAPON_WARHEAD_TYPE);

  0016f	83 7d 08 00	 cmp	 DWORD PTR _en$[ebp], 0
  00173	74 0d		 je	 SHORT $LN28@create_cli
  00175	8b 45 08	 mov	 eax, DWORD PTR _en$[ebp]
  00178	8b 08		 mov	 ecx, DWORD PTR [eax]
  0017a	89 8d 70 ff ff
	ff		 mov	 DWORD PTR tv152[ebp], ecx
  00180	eb 24		 jmp	 SHORT $LN29@create_cli
$LN28@create_cli:
  00182	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??create_client_server_weapon_killed_explosion_effect@@YGXPAUENTITY@@@Z@4JA
  00188	83 c2 18	 add	 edx, 24			; 00000018H
  0018b	52		 push	 edx
  0018c	68 00 00 00 00	 push	 OFFSET ??_C@_0FE@MFECPMIC@c?3?2users?2nhv90?2projects?2eech?2ap@
  00191	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  00196	50		 push	 eax
  00197	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  0019c	c7 85 70 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv152[ebp], 0
$LN29@create_cli:
  001a6	b9 01 00 00 00	 mov	 ecx, 1
  001ab	85 c9		 test	 ecx, ecx
  001ad	74 0c		 je	 SHORT $LN30@create_cli
  001af	c7 85 6c ff ff
	ff 10 01 00 00	 mov	 DWORD PTR tv160[ebp], 272 ; 00000110H
  001b9	eb 24		 jmp	 SHORT $LN31@create_cli
$LN30@create_cli:
  001bb	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??create_client_server_weapon_killed_explosion_effect@@YGXPAUENTITY@@@Z@4JA
  001c1	83 c2 18	 add	 edx, 24			; 00000018H
  001c4	52		 push	 edx
  001c5	68 00 00 00 00	 push	 OFFSET ??_C@_0FE@MFECPMIC@c?3?2users?2nhv90?2projects?2eech?2ap@
  001ca	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_int_type_message@@3PBDB ; overload_invalid_int_type_message
  001cf	50		 push	 eax
  001d0	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  001d5	c7 85 6c ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv160[ebp], 0
$LN31@create_cli:
  001df	68 10 01 00 00	 push	 272			; 00000110H
  001e4	8b 4d 08	 mov	 ecx, DWORD PTR _en$[ebp]
  001e7	51		 push	 ecx
  001e8	69 95 70 ff ff
	ff 5c 04 00 00	 imul	 edx, DWORD PTR tv152[ebp], 1116
  001f2	8b 85 6c ff ff
	ff		 mov	 eax, DWORD PTR tv160[ebp]
  001f8	8b 8c 82 00 00
	00 00		 mov	 ecx, DWORD PTR ?fn_get_local_entity_int_value@@3PAY0BBH@P6GHPAUENTITY@@W4INT_TYPES@@@ZA[edx+eax*4]
  001ff	ff d1		 call	 ecx
  00201	89 45 f0	 mov	 DWORD PTR _warhead_type$[ebp], eax

; 823  : 
; 824  : 	//
; 825  : 	// calculate type of resulting explosion
; 826  : 	//
; 827  : 
; 828  : 	type = get_suitable_weapon_explosion_type (en, kill_code);

  00204	8b 45 f4	 mov	 eax, DWORD PTR _kill_code$[ebp]
  00207	50		 push	 eax
  00208	8b 4d 08	 mov	 ecx, DWORD PTR _en$[ebp]
  0020b	51		 push	 ecx
  0020c	e8 00 00 00 00	 call	 ?get_suitable_weapon_explosion_type@@YG?AW4META_EXPLOSION_TYPES@@PAUENTITY@@W4WEAPON_KILL_CODES@@@Z ; get_suitable_weapon_explosion_type
  00211	89 45 f8	 mov	 DWORD PTR _type$[ebp], eax

; 829  : 
; 830  : 	if (type == META_EXPLOSION_TYPE_NONE)

  00214	83 7d f8 00	 cmp	 DWORD PTR _type$[ebp], 0
  00218	75 05		 jne	 SHORT $LN6@create_cli

; 831  : 	{
; 832  : 		return;

  0021a	e9 1c 03 00 00	 jmp	 $LN1@create_cli
$LN6@create_cli:

; 833  : 	}
; 834  : 
; 835  : 	//
; 836  : 	// apply damage to surrounding objects and/or target
; 837  : 	//
; 838  : 
; 839  : 	switch (kill_code)

  0021f	8b 45 f4	 mov	 eax, DWORD PTR _kill_code$[ebp]
  00222	89 85 70 ff ff
	ff		 mov	 DWORD PTR tv170[ebp], eax
  00228	8b 8d 70 ff ff
	ff		 mov	 ecx, DWORD PTR tv170[ebp]
  0022e	83 e9 01	 sub	 ecx, 1
  00231	89 8d 70 ff ff
	ff		 mov	 DWORD PTR tv170[ebp], ecx
  00237	83 bd 70 ff ff
	ff 06		 cmp	 DWORD PTR tv170[ebp], 6
  0023e	0f 87 d7 02 00
	00		 ja	 $LN18@create_cli
  00244	8b 95 70 ff ff
	ff		 mov	 edx, DWORD PTR tv170[ebp]
  0024a	ff 24 95 00 00
	00 00		 jmp	 DWORD PTR $LN44@create_cli[edx*4]
$LN7@create_cli:

; 840  : 	{
; 841  : 		case WEAPON_KILL_CODE_EXHAUSTED:
; 842  : 		case WEAPON_KILL_CODE_OUT_OF_BOUNDS:
; 843  : 		case WEAPON_KILL_CODE_HIT_WATER:
; 844  : 		{
; 845  : 			//
; 846  : 			// do nothing
; 847  : 			//
; 848  : 
; 849  : 			break;

  00251	e9 d6 02 00 00	 jmp	 $LN2@create_cli
$LN8@create_cli:

; 850  : 		}
; 851  : 		case WEAPON_KILL_CODE_HIT_LAND:
; 852  : 		{
; 853  : 			//
; 854  : 			// create a crater
; 855  : 			//
; 856  : 
; 857  : 			memset (&point_data, 0, sizeof (terrain_3d_point_data));

  00256	6a 2c		 push	 44			; 0000002cH
  00258	6a 00		 push	 0
  0025a	8d 45 c4	 lea	 eax, DWORD PTR _point_data$[ebp]
  0025d	50		 push	 eax
  0025e	e8 00 00 00 00	 call	 _memset
  00263	83 c4 0c	 add	 esp, 12			; 0000000cH

; 858  : 
; 859  : 			get_3d_terrain_point_data (pos->x, pos->z, &point_data);

  00266	8d 45 c4	 lea	 eax, DWORD PTR _point_data$[ebp]
  00269	50		 push	 eax
  0026a	8b 4d fc	 mov	 ecx, DWORD PTR _pos$[ebp]
  0026d	51		 push	 ecx
  0026e	f3 0f 10 41 08	 movss	 xmm0, DWORD PTR [ecx+8]
  00273	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00278	8b 55 fc	 mov	 edx, DWORD PTR _pos$[ebp]
  0027b	51		 push	 ecx
  0027c	f3 0f 10 02	 movss	 xmm0, DWORD PTR [edx]
  00280	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00285	e8 00 00 00 00	 call	 ?get_3d_terrain_point_data@@YGMMMPAUTERRAIN_3D_POINT_DATA@@@Z ; get_3d_terrain_point_data
  0028a	dd d8		 fstp	 ST(0)

; 860  : 
; 861  : 			if (get_terrain_type_draw_crater (point_data.terrain_type))

  0028c	8b 45 e0	 mov	 eax, DWORD PTR _point_data$[ebp+28]
  0028f	50		 push	 eax
  00290	e8 00 00 00 00	 call	 ?get_terrain_type_draw_crater@@YGHH@Z ; get_terrain_type_draw_crater
  00295	85 c0		 test	 eax, eax
  00297	74 0d		 je	 SHORT $LN9@create_cli

; 862  : 			{
; 863  : 				create_client_server_weapon_hit_ground_crater (en, pos);

  00299	8b 45 fc	 mov	 eax, DWORD PTR _pos$[ebp]
  0029c	50		 push	 eax
  0029d	8b 4d 08	 mov	 ecx, DWORD PTR _en$[ebp]
  002a0	51		 push	 ecx
  002a1	e8 00 00 00 00	 call	 ?create_client_server_weapon_hit_ground_crater@@YGXPAUENTITY@@PAUVEC3D@@@Z ; create_client_server_weapon_hit_ground_crater
$LN9@create_cli:

; 864  : 			}
; 865  : 
; 866  : 			//
; 867  : 			// deliberate fall-through
; 868  : 			//
; 869  : 		}
; 870  : 		case WEAPON_KILL_CODE_OVERSHOT_TARGET:
; 871  : 		case WEAPON_KILL_CODE_SELF_DESTRUCT:
; 872  : 		{
; 873  : 			//
; 874  : 			// notify all objects within blast radius
; 875  : 			//
; 876  : 
; 877  : 			damage_objects_within_explosion_damage_radius (en, NULL, type);

  002a6	8b 45 f8	 mov	 eax, DWORD PTR _type$[ebp]
  002a9	50		 push	 eax
  002aa	6a 00		 push	 0
  002ac	8b 4d 08	 mov	 ecx, DWORD PTR _en$[ebp]
  002af	51		 push	 ecx
  002b0	e8 00 00 00 00	 call	 ?damage_objects_within_explosion_damage_radius@@YGXPAUENTITY@@0W4META_EXPLOSION_TYPES@@@Z ; damage_objects_within_explosion_damage_radius

; 878  : 
; 879  : 			break;

  002b5	e9 72 02 00 00	 jmp	 $LN2@create_cli
$LN11@create_cli:

; 880  : 		}
; 881  : 		case WEAPON_KILL_CODE_HIT_TARGET:
; 882  : 		{
; 883  : 			entity
; 884  : 				*target;
; 885  : 
; 886  : 			target = get_local_entity_parent (en, LIST_TYPE_TARGET);

  002ba	83 7d 08 00	 cmp	 DWORD PTR _en$[ebp], 0
  002be	74 0d		 je	 SHORT $LN32@create_cli
  002c0	8b 45 08	 mov	 eax, DWORD PTR _en$[ebp]
  002c3	8b 08		 mov	 ecx, DWORD PTR [eax]
  002c5	89 8d 70 ff ff
	ff		 mov	 DWORD PTR tv193[ebp], ecx
  002cb	eb 24		 jmp	 SHORT $LN33@create_cli
$LN32@create_cli:
  002cd	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??create_client_server_weapon_killed_explosion_effect@@YGXPAUENTITY@@@Z@4JA
  002d3	83 c2 58	 add	 edx, 88			; 00000058H
  002d6	52		 push	 edx
  002d7	68 00 00 00 00	 push	 OFFSET ??_C@_0FE@MFECPMIC@c?3?2users?2nhv90?2projects?2eech?2ap@
  002dc	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  002e1	50		 push	 eax
  002e2	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  002e7	c7 85 70 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv193[ebp], 0
$LN33@create_cli:
  002f1	b9 01 00 00 00	 mov	 ecx, 1
  002f6	85 c9		 test	 ecx, ecx
  002f8	74 0c		 je	 SHORT $LN34@create_cli
  002fa	c7 85 6c ff ff
	ff 26 00 00 00	 mov	 DWORD PTR tv201[ebp], 38 ; 00000026H
  00304	eb 24		 jmp	 SHORT $LN35@create_cli
$LN34@create_cli:
  00306	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??create_client_server_weapon_killed_explosion_effect@@YGXPAUENTITY@@@Z@4JA
  0030c	83 c2 58	 add	 edx, 88			; 00000058H
  0030f	52		 push	 edx
  00310	68 00 00 00 00	 push	 OFFSET ??_C@_0FE@MFECPMIC@c?3?2users?2nhv90?2projects?2eech?2ap@
  00315	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_list_type_message@@3PBDB ; overload_invalid_list_type_message
  0031a	50		 push	 eax
  0031b	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00320	c7 85 6c ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv201[ebp], 0
$LN35@create_cli:
  0032a	6a 26		 push	 38			; 00000026H
  0032c	8b 4d 08	 mov	 ecx, DWORD PTR _en$[ebp]
  0032f	51		 push	 ecx
  00330	69 95 70 ff ff
	ff b4 00 00 00	 imul	 edx, DWORD PTR tv193[ebp], 180
  0033a	8b 85 6c ff ff
	ff		 mov	 eax, DWORD PTR tv201[ebp]
  00340	8b 8c 82 00 00
	00 00		 mov	 ecx, DWORD PTR ?fn_get_local_entity_parent@@3PAY0CN@P6GPAUENTITY@@PAU1@W4LIST_TYPES@@@ZA[edx+eax*4]
  00347	ff d1		 call	 ecx
  00349	89 45 c0	 mov	 DWORD PTR _target$2[ebp], eax

; 887  : 
; 888  : 			//
; 889  : 			// notify the target of a direct hit
; 890  : 			//
; 891  : 
; 892  : 			if (target)

  0034c	83 7d c0 00	 cmp	 DWORD PTR _target$2[ebp], 0
  00350	0f 84 b2 01 00
	00		 je	 $LN17@create_cli

; 893  : 			{
; 894  : 				if (get_local_entity_int_value (target, INT_TYPE_ALIVE))

  00356	83 7d c0 00	 cmp	 DWORD PTR _target$2[ebp], 0
  0035a	74 0d		 je	 SHORT $LN36@create_cli
  0035c	8b 45 c0	 mov	 eax, DWORD PTR _target$2[ebp]
  0035f	8b 08		 mov	 ecx, DWORD PTR [eax]
  00361	89 8d 70 ff ff
	ff		 mov	 DWORD PTR tv213[ebp], ecx
  00367	eb 20		 jmp	 SHORT $LN37@create_cli
$LN36@create_cli:
  00369	68 7e 03 00 00	 push	 894			; 0000037eH
  0036e	68 00 00 00 00	 push	 OFFSET ??_C@_0FE@MFECPMIC@c?3?2users?2nhv90?2projects?2eech?2ap@
  00373	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  00379	52		 push	 edx
  0037a	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  0037f	c7 85 70 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv213[ebp], 0
$LN37@create_cli:
  00389	b8 01 00 00 00	 mov	 eax, 1
  0038e	85 c0		 test	 eax, eax
  00390	74 0c		 je	 SHORT $LN38@create_cli
  00392	c7 85 6c ff ff
	ff 07 00 00 00	 mov	 DWORD PTR tv220[ebp], 7
  0039c	eb 20		 jmp	 SHORT $LN39@create_cli
$LN38@create_cli:
  0039e	68 7e 03 00 00	 push	 894			; 0000037eH
  003a3	68 00 00 00 00	 push	 OFFSET ??_C@_0FE@MFECPMIC@c?3?2users?2nhv90?2projects?2eech?2ap@
  003a8	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?overload_invalid_int_type_message@@3PBDB ; overload_invalid_int_type_message
  003ae	51		 push	 ecx
  003af	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  003b4	c7 85 6c ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv220[ebp], 0
$LN39@create_cli:
  003be	6a 07		 push	 7
  003c0	8b 55 c0	 mov	 edx, DWORD PTR _target$2[ebp]
  003c3	52		 push	 edx
  003c4	69 85 70 ff ff
	ff 5c 04 00 00	 imul	 eax, DWORD PTR tv213[ebp], 1116
  003ce	8b 8d 6c ff ff
	ff		 mov	 ecx, DWORD PTR tv220[ebp]
  003d4	8b 94 88 00 00
	00 00		 mov	 edx, DWORD PTR ?fn_get_local_entity_int_value@@3PAY0BBH@P6GHPAUENTITY@@W4INT_TYPES@@@ZA[eax+ecx*4]
  003db	ff d2		 call	 edx
  003dd	85 c0		 test	 eax, eax
  003df	74 22		 je	 SHORT $LN13@create_cli

; 895  : 				{
; 896  : 					notify_local_entity (ENTITY_MESSAGE_COLLISION, target, en, 1.0);

  003e1	83 ec 08	 sub	 esp, 8
  003e4	f2 0f 10 05 00
	00 00 00	 movsd	 xmm0, QWORD PTR __real@3ff0000000000000
  003ec	f2 0f 11 04 24	 movsd	 QWORD PTR [esp], xmm0
  003f1	8b 45 08	 mov	 eax, DWORD PTR _en$[ebp]
  003f4	50		 push	 eax
  003f5	8b 4d c0	 mov	 ecx, DWORD PTR _target$2[ebp]
  003f8	51		 push	 ecx
  003f9	6a 07		 push	 7
  003fb	e8 00 00 00 00	 call	 ?notify_local_entity@@YAHW4ENTITY_MESSAGES@@PAUENTITY@@1ZZ ; notify_local_entity
  00400	83 c4 14	 add	 esp, 20			; 00000014H
$LN13@create_cli:

; 897  : 				}
; 898  : 
; 899  : 				if ((warhead_type == WEAPON_WARHEAD_TYPE_HIGH_EXPLOSIVE) ||

  00403	83 7d f0 02	 cmp	 DWORD PTR _warhead_type$[ebp], 2
  00407	74 0a		 je	 SHORT $LN15@create_cli
  00409	83 7d f0 04	 cmp	 DWORD PTR _warhead_type$[ebp], 4
  0040d	0f 85 f5 00 00
	00		 jne	 $LN17@create_cli
$LN15@create_cli:

; 900  : 						(warhead_type == WEAPON_WARHEAD_TYPE_HIGH_EXPLOSIVE_ANTI_TANK))
; 901  : 				{
; 902  : 					if (get_local_entity_int_value (target, INT_TYPE_IDENTIFY_VEHICLE))

  00413	83 7d c0 00	 cmp	 DWORD PTR _target$2[ebp], 0
  00417	74 0d		 je	 SHORT $LN40@create_cli
  00419	8b 45 c0	 mov	 eax, DWORD PTR _target$2[ebp]
  0041c	8b 08		 mov	 ecx, DWORD PTR [eax]
  0041e	89 8d 70 ff ff
	ff		 mov	 DWORD PTR tv238[ebp], ecx
  00424	eb 20		 jmp	 SHORT $LN41@create_cli
$LN40@create_cli:
  00426	68 86 03 00 00	 push	 902			; 00000386H
  0042b	68 00 00 00 00	 push	 OFFSET ??_C@_0FE@MFECPMIC@c?3?2users?2nhv90?2projects?2eech?2ap@
  00430	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  00436	52		 push	 edx
  00437	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  0043c	c7 85 70 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv238[ebp], 0
$LN41@create_cli:
  00446	b8 01 00 00 00	 mov	 eax, 1
  0044b	85 c0		 test	 eax, eax
  0044d	74 0c		 je	 SHORT $LN42@create_cli
  0044f	c7 85 6c ff ff
	ff 60 00 00 00	 mov	 DWORD PTR tv245[ebp], 96 ; 00000060H
  00459	eb 20		 jmp	 SHORT $LN43@create_cli
$LN42@create_cli:
  0045b	68 86 03 00 00	 push	 902			; 00000386H
  00460	68 00 00 00 00	 push	 OFFSET ??_C@_0FE@MFECPMIC@c?3?2users?2nhv90?2projects?2eech?2ap@
  00465	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?overload_invalid_int_type_message@@3PBDB ; overload_invalid_int_type_message
  0046b	51		 push	 ecx
  0046c	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00471	c7 85 6c ff ff
	ff 00 00 00 00	 mov	 DWORD PTR tv245[ebp], 0
$LN43@create_cli:
  0047b	6a 60		 push	 96			; 00000060H
  0047d	8b 55 c0	 mov	 edx, DWORD PTR _target$2[ebp]
  00480	52		 push	 edx
  00481	69 85 70 ff ff
	ff 5c 04 00 00	 imul	 eax, DWORD PTR tv238[ebp], 1116
  0048b	8b 8d 6c ff ff
	ff		 mov	 ecx, DWORD PTR tv245[ebp]
  00491	8b 94 88 00 00
	00 00		 mov	 edx, DWORD PTR ?fn_get_local_entity_int_value@@3PAY0BBH@P6GHPAUENTITY@@W4INT_TYPES@@@ZA[eax+ecx*4]
  00498	ff d2		 call	 edx
  0049a	85 c0		 test	 eax, eax
  0049c	74 6a		 je	 SHORT $LN17@create_cli

; 903  : 					{
; 904  : 						//
; 905  : 						// create a crater
; 906  : 						//
; 907  : 	
; 908  : 						vec3d
; 909  : 							crater_pos;
; 910  : 	
; 911  : 						memset (&point_data, 0, sizeof (terrain_3d_point_data));

  0049e	6a 2c		 push	 44			; 0000002cH
  004a0	6a 00		 push	 0
  004a2	8d 45 c4	 lea	 eax, DWORD PTR _point_data$[ebp]
  004a5	50		 push	 eax
  004a6	e8 00 00 00 00	 call	 _memset
  004ab	83 c4 0c	 add	 esp, 12			; 0000000cH

; 912  : 	
; 913  : 						crater_pos.x = pos->x;

  004ae	8b 45 fc	 mov	 eax, DWORD PTR _pos$[ebp]
  004b1	f3 0f 10 00	 movss	 xmm0, DWORD PTR [eax]
  004b5	f3 0f 11 45 b4	 movss	 DWORD PTR _crater_pos$1[ebp], xmm0

; 914  : 						crater_pos.z = pos->z;

  004ba	8b 45 fc	 mov	 eax, DWORD PTR _pos$[ebp]
  004bd	f3 0f 10 40 08	 movss	 xmm0, DWORD PTR [eax+8]
  004c2	f3 0f 11 45 bc	 movss	 DWORD PTR _crater_pos$1[ebp+8], xmm0

; 915  : 	
; 916  : 						crater_pos.y = get_3d_terrain_point_data (pos->x, pos->z, &point_data);

  004c7	8d 45 c4	 lea	 eax, DWORD PTR _point_data$[ebp]
  004ca	50		 push	 eax
  004cb	8b 4d fc	 mov	 ecx, DWORD PTR _pos$[ebp]
  004ce	51		 push	 ecx
  004cf	f3 0f 10 41 08	 movss	 xmm0, DWORD PTR [ecx+8]
  004d4	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  004d9	8b 55 fc	 mov	 edx, DWORD PTR _pos$[ebp]
  004dc	51		 push	 ecx
  004dd	f3 0f 10 02	 movss	 xmm0, DWORD PTR [edx]
  004e1	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  004e6	e8 00 00 00 00	 call	 ?get_3d_terrain_point_data@@YGMMMPAUTERRAIN_3D_POINT_DATA@@@Z ; get_3d_terrain_point_data
  004eb	d9 5d b8	 fstp	 DWORD PTR _crater_pos$1[ebp+4]

; 917  : 	
; 918  : 						if (get_terrain_type_draw_crater (point_data.terrain_type))

  004ee	8b 45 e0	 mov	 eax, DWORD PTR _point_data$[ebp+28]
  004f1	50		 push	 eax
  004f2	e8 00 00 00 00	 call	 ?get_terrain_type_draw_crater@@YGHH@Z ; get_terrain_type_draw_crater
  004f7	85 c0		 test	 eax, eax
  004f9	74 0d		 je	 SHORT $LN17@create_cli

; 919  : 						{
; 920  : 							create_client_server_weapon_hit_ground_crater (en, &crater_pos);

  004fb	8d 45 b4	 lea	 eax, DWORD PTR _crater_pos$1[ebp]
  004fe	50		 push	 eax
  004ff	8b 4d 08	 mov	 ecx, DWORD PTR _en$[ebp]
  00502	51		 push	 ecx
  00503	e8 00 00 00 00	 call	 ?create_client_server_weapon_hit_ground_crater@@YGXPAUENTITY@@PAUVEC3D@@@Z ; create_client_server_weapon_hit_ground_crater
$LN17@create_cli:

; 921  : 						}
; 922  : 					}
; 923  : 				}
; 924  : 			}
; 925  : 
; 926  : 			//
; 927  : 			// notify all objects within blast radius ( except the target )
; 928  : 			//
; 929  : 
; 930  : 			damage_objects_within_explosion_damage_radius (en, target, type);

  00508	8b 45 f8	 mov	 eax, DWORD PTR _type$[ebp]
  0050b	50		 push	 eax
  0050c	8b 4d c0	 mov	 ecx, DWORD PTR _target$2[ebp]
  0050f	51		 push	 ecx
  00510	8b 55 08	 mov	 edx, DWORD PTR _en$[ebp]
  00513	52		 push	 edx
  00514	e8 00 00 00 00	 call	 ?damage_objects_within_explosion_damage_radius@@YGXPAUENTITY@@0W4META_EXPLOSION_TYPES@@@Z ; damage_objects_within_explosion_damage_radius

; 931  : 
; 932  : 			break;

  00519	eb 11		 jmp	 SHORT $LN2@create_cli
$LN18@create_cli:

; 933  : 		}
; 934  : 		default:
; 935  : 		{
; 936  : 			debug_fatal ("EXPLOSN : Invalid weapon kill code ( %d )", kill_code);

  0051b	8b 45 f4	 mov	 eax, DWORD PTR _kill_code$[ebp]
  0051e	50		 push	 eax
  0051f	68 00 00 00 00	 push	 OFFSET ??_C@_0CK@ECMOGPAJ@EXPLOSN?5?3?5Invalid?5weapon?5kill?5c@
  00524	e8 00 00 00 00	 call	 ?debug_fatal@@YAXPBDZZ	; debug_fatal
  00529	83 c4 08	 add	 esp, 8
$LN2@create_cli:

; 937  : 		}
; 938  : 	}
; 939  : 
; 940  : 	#if DEBUG_MODULE
; 941  : 
; 942  : 	debug_log ("EXPLOSN : Creating Weapon Killed effect, type %d, at %f, %f", type, pos->x, pos->z);
; 943  : 
; 944  : 	#endif
; 945  : 
; 946  : 	create_client_server_explosion_effect (type, pos, NULL);

  0052c	6a 00		 push	 0
  0052e	8b 45 fc	 mov	 eax, DWORD PTR _pos$[ebp]
  00531	50		 push	 eax
  00532	8b 4d f8	 mov	 ecx, DWORD PTR _type$[ebp]
  00535	51		 push	 ecx
  00536	e8 00 00 00 00	 call	 ?create_client_server_explosion_effect@@YGXW4META_EXPLOSION_TYPES@@PAUVEC3D@@PAUENTITY@@@Z ; create_client_server_explosion_effect
$LN1@create_cli:

; 947  : }

  0053b	5f		 pop	 edi
  0053c	5e		 pop	 esi
  0053d	5b		 pop	 ebx
  0053e	8b e5		 mov	 esp, ebp
  00540	5d		 pop	 ebp
  00541	c2 04 00	 ret	 4
$LN44@create_cli:
  00544	00 00 00 00	 DD	 $LN7@create_cli
  00548	00 00 00 00	 DD	 $LN7@create_cli
  0054c	00 00 00 00	 DD	 $LN8@create_cli
  00550	00 00 00 00	 DD	 $LN7@create_cli
  00554	00 00 00 00	 DD	 $LN11@create_cli
  00558	00 00 00 00	 DD	 $LN9@create_cli
  0055c	00 00 00 00	 DD	 $LN9@create_cli
?create_client_server_weapon_killed_explosion_effect@@YGXPAUENTITY@@@Z ENDP ; create_client_server_weapon_killed_explosion_effect
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\entity\special\effect\explosn\explosn.c
;	COMDAT ?count_entities_in_meta_explosion@@YGHW4META_EXPLOSION_TYPES@@@Z
_TEXT	SEGMENT
tv90 = -84						; size = 4
_explosion_component$ = -16				; size = 4
_num_components$ = -12					; size = 4
_index_counter$ = -8					; size = 4
_comp$ = -4						; size = 4
_type$ = 8						; size = 4
?count_entities_in_meta_explosion@@YGHW4META_EXPLOSION_TYPES@@@Z PROC ; count_entities_in_meta_explosion, COMDAT

; 727  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 54	 sub	 esp, 84			; 00000054H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 728  : 	int
; 729  : 		comp,
; 730  : 		index_counter,
; 731  : 		num_components;
; 732  : 
; 733  : 	meta_explosion_component
; 734  : 		*explosion_component;
; 735  : 
; 736  : 	ASSERT (type >= 0);

  00009	83 7d 08 00	 cmp	 DWORD PTR _type$[ebp], 0
  0000d	7d 18		 jge	 SHORT $LN7@count_enti
  0000f	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??count_entities_in_meta_explosion@@YGHW4META_EXPLOSION_TYPES@@@Z@4JA
  00014	83 c0 09	 add	 eax, 9
  00017	50		 push	 eax
  00018	68 00 00 00 00	 push	 OFFSET ??_C@_0FE@MFECPMIC@c?3?2users?2nhv90?2projects?2eech?2ap@
  0001d	68 00 00 00 00	 push	 OFFSET ??_C@_09DGPOGGIJ@type?5?$DO?$DN?50@
  00022	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN7@count_enti:

; 737  : 
; 738  : 	ASSERT (type < NUM_META_EXPLOSION_TYPES);

  00027	83 7d 08 15	 cmp	 DWORD PTR _type$[ebp], 21 ; 00000015H
  0002b	7c 18		 jl	 SHORT $LN8@count_enti
  0002d	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??count_entities_in_meta_explosion@@YGHW4META_EXPLOSION_TYPES@@@Z@4JA
  00032	83 c0 0b	 add	 eax, 11			; 0000000bH
  00035	50		 push	 eax
  00036	68 00 00 00 00	 push	 OFFSET ??_C@_0FE@MFECPMIC@c?3?2users?2nhv90?2projects?2eech?2ap@
  0003b	68 00 00 00 00	 push	 OFFSET ??_C@_0CA@ENHOKOHL@type?5?$DM?5NUM_META_EXPLOSION_TYPES@
  00040	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN8@count_enti:

; 739  : 
; 740  : 	ASSERT (type != META_EXPLOSION_TYPE_NONE);

  00045	83 7d 08 00	 cmp	 DWORD PTR _type$[ebp], 0
  00049	75 18		 jne	 SHORT $LN9@count_enti
  0004b	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??count_entities_in_meta_explosion@@YGHW4META_EXPLOSION_TYPES@@@Z@4JA
  00050	83 c0 0d	 add	 eax, 13			; 0000000dH
  00053	50		 push	 eax
  00054	68 00 00 00 00	 push	 OFFSET ??_C@_0FE@MFECPMIC@c?3?2users?2nhv90?2projects?2eech?2ap@
  00059	68 00 00 00 00	 push	 OFFSET ??_C@_0CB@KOIJNGHI@type?5?$CB?$DN?5META_EXPLOSION_TYPE_NON@
  0005e	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN9@count_enti:

; 741  : 
; 742  : 	index_counter = 0;

  00063	c7 45 f8 00 00
	00 00		 mov	 DWORD PTR _index_counter$[ebp], 0

; 743  : 
; 744  : 	num_components = meta_explosion_database[ type ].number_of_components;

  0006a	8b 45 08	 mov	 eax, DWORD PTR _type$[ebp]
  0006d	c1 e0 04	 shl	 eax, 4
  00070	8b 88 00 00 00
	00		 mov	 ecx, DWORD PTR ?meta_explosion_database@@3PAUMETA_EXPLOSION_DATA@@A[eax]
  00076	89 4d f4	 mov	 DWORD PTR _num_components$[ebp], ecx

; 745  : 
; 746  : 	for ( comp = 0 ; comp < num_components ; comp ++ )

  00079	c7 45 fc 00 00
	00 00		 mov	 DWORD PTR _comp$[ebp], 0
  00080	eb 09		 jmp	 SHORT $LN4@count_enti
$LN2@count_enti:
  00082	8b 45 fc	 mov	 eax, DWORD PTR _comp$[ebp]
  00085	83 c0 01	 add	 eax, 1
  00088	89 45 fc	 mov	 DWORD PTR _comp$[ebp], eax
$LN4@count_enti:
  0008b	8b 45 fc	 mov	 eax, DWORD PTR _comp$[ebp]
  0008e	3b 45 f4	 cmp	 eax, DWORD PTR _num_components$[ebp]
  00091	0f 8d 8a 00 00
	00		 jge	 $LN3@count_enti

; 747  : 	{
; 748  : 
; 749  : 		explosion_component = &(meta_explosion_database[ type ].component[ comp ]);

  00097	8b 45 08	 mov	 eax, DWORD PTR _type$[ebp]
  0009a	c1 e0 04	 shl	 eax, 4
  0009d	6b 4d fc 34	 imul	 ecx, DWORD PTR _comp$[ebp], 52
  000a1	03 88 0c 00 00
	00		 add	 ecx, DWORD PTR ?meta_explosion_database@@3PAUMETA_EXPLOSION_DATA@@A[eax+12]
  000a7	89 4d f0	 mov	 DWORD PTR _explosion_component$[ebp], ecx

; 750  : 
; 751  : 		switch ( explosion_component->type )

  000aa	8b 45 f0	 mov	 eax, DWORD PTR _explosion_component$[ebp]
  000ad	8b 08		 mov	 ecx, DWORD PTR [eax]
  000af	89 4d ac	 mov	 DWORD PTR tv90[ebp], ecx
  000b2	83 7d ac 04	 cmp	 DWORD PTR tv90[ebp], 4
  000b6	77 51		 ja	 SHORT $LN15@count_enti
  000b8	8b 55 ac	 mov	 edx, DWORD PTR tv90[ebp]
  000bb	ff 24 95 00 00
	00 00		 jmp	 DWORD PTR $LN17@count_enti[edx*4]
$LN10@count_enti:

; 752  : 		{
; 753  : 			case EXPLOSION_SPRITES:
; 754  : 			{
; 755  : 				index_counter += explosion_component->sprite_count;

  000c2	8b 45 f0	 mov	 eax, DWORD PTR _explosion_component$[ebp]
  000c5	8b 4d f8	 mov	 ecx, DWORD PTR _index_counter$[ebp]
  000c8	03 48 08	 add	 ecx, DWORD PTR [eax+8]
  000cb	89 4d f8	 mov	 DWORD PTR _index_counter$[ebp], ecx

; 756  : 
; 757  : 				break;

  000ce	eb 4c		 jmp	 SHORT $LN5@count_enti
$LN11@count_enti:

; 758  : 			}
; 759  : 			case EXPLOSION_OBJECTS:
; 760  : 			{
; 761  : 				index_counter += explosion_component->object_count;

  000d0	8b 45 f0	 mov	 eax, DWORD PTR _explosion_component$[ebp]
  000d3	8b 4d f8	 mov	 ecx, DWORD PTR _index_counter$[ebp]
  000d6	03 48 08	 add	 ecx, DWORD PTR [eax+8]
  000d9	89 4d f8	 mov	 DWORD PTR _index_counter$[ebp], ecx

; 762  : 
; 763  : 				break;

  000dc	eb 3e		 jmp	 SHORT $LN5@count_enti
$LN12@count_enti:

; 764  : 			}
; 765  : 			case EXPLOSION_PARTICLES:
; 766  : 			{
; 767  : 				index_counter += ( explosion_component->particle_count + 1 );

  000de	8b 45 f0	 mov	 eax, DWORD PTR _explosion_component$[ebp]
  000e1	8b 48 04	 mov	 ecx, DWORD PTR [eax+4]
  000e4	8b 55 f8	 mov	 edx, DWORD PTR _index_counter$[ebp]
  000e7	8d 44 0a 01	 lea	 eax, DWORD PTR [edx+ecx+1]
  000eb	89 45 f8	 mov	 DWORD PTR _index_counter$[ebp], eax

; 768  : 
; 769  : 				break;

  000ee	eb 2c		 jmp	 SHORT $LN5@count_enti
$LN13@count_enti:

; 770  : 			}
; 771  : 			case EXPLOSION_SMOKE_TRAILS:
; 772  : 			{
; 773  : 				index_counter += explosion_component->trail_count;

  000f0	8b 45 f0	 mov	 eax, DWORD PTR _explosion_component$[ebp]
  000f3	8b 4d f8	 mov	 ecx, DWORD PTR _index_counter$[ebp]
  000f6	03 48 04	 add	 ecx, DWORD PTR [eax+4]
  000f9	89 4d f8	 mov	 DWORD PTR _index_counter$[ebp], ecx

; 774  : 
; 775  : 				break;

  000fc	eb 1e		 jmp	 SHORT $LN5@count_enti
$LN14@count_enti:

; 776  : 			}
; 777  : 			case EXPLOSION_SOUND_EFFECT:
; 778  : 			{
; 779  : 				index_counter += 1;

  000fe	8b 45 f8	 mov	 eax, DWORD PTR _index_counter$[ebp]
  00101	83 c0 01	 add	 eax, 1
  00104	89 45 f8	 mov	 DWORD PTR _index_counter$[ebp], eax

; 780  : 
; 781  : 				break;

  00107	eb 13		 jmp	 SHORT $LN5@count_enti
$LN15@count_enti:

; 782  : 			}
; 783  : 			default:
; 784  : 			{
; 785  : 				debug_fatal("EXPLOSION : Unknown component type %d", explosion_component->type );

  00109	8b 45 f0	 mov	 eax, DWORD PTR _explosion_component$[ebp]
  0010c	8b 08		 mov	 ecx, DWORD PTR [eax]
  0010e	51		 push	 ecx
  0010f	68 00 00 00 00	 push	 OFFSET ??_C@_0CG@OCMINFIH@EXPLOSION?5?3?5Unknown?5component?5t@
  00114	e8 00 00 00 00	 call	 ?debug_fatal@@YAXPBDZZ	; debug_fatal
  00119	83 c4 08	 add	 esp, 8
$LN5@count_enti:

; 786  : 			}
; 787  : 		}
; 788  : 	}

  0011c	e9 61 ff ff ff	 jmp	 $LN2@count_enti
$LN3@count_enti:

; 789  : 
; 790  : 	return index_counter;

  00121	8b 45 f8	 mov	 eax, DWORD PTR _index_counter$[ebp]

; 791  : }

  00124	5f		 pop	 edi
  00125	5e		 pop	 esi
  00126	5b		 pop	 ebx
  00127	8b e5		 mov	 esp, ebp
  00129	5d		 pop	 ebp
  0012a	c2 04 00	 ret	 4
  0012d	0f 1f 00	 npad	 3
$LN17@count_enti:
  00130	00 00 00 00	 DD	 $LN10@count_enti
  00134	00 00 00 00	 DD	 $LN11@count_enti
  00138	00 00 00 00	 DD	 $LN12@count_enti
  0013c	00 00 00 00	 DD	 $LN13@count_enti
  00140	00 00 00 00	 DD	 $LN14@count_enti
?count_entities_in_meta_explosion@@YGHW4META_EXPLOSION_TYPES@@@Z ENDP ; count_entities_in_meta_explosion
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\entity\special\effect\explosn\explosn.c
;	COMDAT ?create_meta_explosion@@YGHW4META_EXPLOSION_TYPES@@PAUVEC3D@@PAUENTITY@@PAH@Z
_TEXT	SEGMENT
tv91 = -88						; size = 4
_explosion_component$ = -20				; size = 4
_create_stack_attributes$ = -16				; size = 4
_num_components$ = -12					; size = 4
_index_counter$ = -8					; size = 4
_comp$ = -4						; size = 4
_type$ = 8						; size = 4
_position$ = 12						; size = 4
_parent$ = 16						; size = 4
_entity_index_list$ = 20				; size = 4
?create_meta_explosion@@YGHW4META_EXPLOSION_TYPES@@PAUVEC3D@@PAUENTITY@@PAH@Z PROC ; create_meta_explosion, COMDAT

; 104  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 58	 sub	 esp, 88			; 00000058H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 105  : 	int
; 106  : 		comp,
; 107  : 		index_counter,
; 108  : 		num_components;
; 109  : 
; 110  : 	int
; 111  : 		create_stack_attributes;
; 112  : 
; 113  : 	meta_explosion_component
; 114  : 		*explosion_component;
; 115  : 
; 116  : 	ASSERT (type >= 0);

  00009	83 7d 08 00	 cmp	 DWORD PTR _type$[ebp], 0
  0000d	7d 18		 jge	 SHORT $LN7@create_met
  0000f	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??create_meta_explosion@@YGHW4META_EXPLOSION_TYPES@@PAUVEC3D@@PAUENTITY@@PAH@Z@4JA
  00014	83 c0 0c	 add	 eax, 12			; 0000000cH
  00017	50		 push	 eax
  00018	68 00 00 00 00	 push	 OFFSET ??_C@_0FE@MFECPMIC@c?3?2users?2nhv90?2projects?2eech?2ap@
  0001d	68 00 00 00 00	 push	 OFFSET ??_C@_09DGPOGGIJ@type?5?$DO?$DN?50@
  00022	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN7@create_met:

; 117  : 
; 118  : 	ASSERT (type < NUM_META_EXPLOSION_TYPES);

  00027	83 7d 08 15	 cmp	 DWORD PTR _type$[ebp], 21 ; 00000015H
  0002b	7c 18		 jl	 SHORT $LN8@create_met
  0002d	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??create_meta_explosion@@YGHW4META_EXPLOSION_TYPES@@PAUVEC3D@@PAUENTITY@@PAH@Z@4JA
  00032	83 c0 0e	 add	 eax, 14			; 0000000eH
  00035	50		 push	 eax
  00036	68 00 00 00 00	 push	 OFFSET ??_C@_0FE@MFECPMIC@c?3?2users?2nhv90?2projects?2eech?2ap@
  0003b	68 00 00 00 00	 push	 OFFSET ??_C@_0CA@ENHOKOHL@type?5?$DM?5NUM_META_EXPLOSION_TYPES@
  00040	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN8@create_met:

; 119  : 
; 120  : 	ASSERT (type != META_EXPLOSION_TYPE_NONE);

  00045	83 7d 08 00	 cmp	 DWORD PTR _type$[ebp], 0
  00049	75 18		 jne	 SHORT $LN9@create_met
  0004b	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??create_meta_explosion@@YGHW4META_EXPLOSION_TYPES@@PAUVEC3D@@PAUENTITY@@PAH@Z@4JA
  00050	83 c0 10	 add	 eax, 16			; 00000010H
  00053	50		 push	 eax
  00054	68 00 00 00 00	 push	 OFFSET ??_C@_0FE@MFECPMIC@c?3?2users?2nhv90?2projects?2eech?2ap@
  00059	68 00 00 00 00	 push	 OFFSET ??_C@_0CB@KOIJNGHI@type?5?$CB?$DN?5META_EXPLOSION_TYPE_NON@
  0005e	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN9@create_met:

; 121  : 
; 122  : 	index_counter = 0;

  00063	c7 45 f8 00 00
	00 00		 mov	 DWORD PTR _index_counter$[ebp], 0

; 123  : 
; 124  : 	create_stack_attributes = force_local_entity_create_stack_attributes;

  0006a	a1 00 00 00 00	 mov	 eax, DWORD PTR ?force_local_entity_create_stack_attributes@@3HA ; force_local_entity_create_stack_attributes
  0006f	89 45 f0	 mov	 DWORD PTR _create_stack_attributes$[ebp], eax

; 125  : 
; 126  : 	if (get_comms_data_flow () == COMMS_DATA_FLOW_RX)

  00072	83 3d 00 00 00
	00 01		 cmp	 DWORD PTR ?system_comms_data_flow@@3W4COMMS_DATA_FLOW_TYPES@@A, 1 ; system_comms_data_flow
  00079	75 0a		 jne	 SHORT $LN10@create_met

; 127  : 	{
; 128  : 		set_force_local_entity_create_stack_attributes (TRUE);

  0007b	c7 05 00 00 00
	00 01 00 00 00	 mov	 DWORD PTR ?force_local_entity_create_stack_attributes@@3HA, 1 ; force_local_entity_create_stack_attributes
$LN10@create_met:

; 129  : 	}
; 130  : 
; 131  : 	num_components = meta_explosion_database[ type ].number_of_components;

  00085	8b 45 08	 mov	 eax, DWORD PTR _type$[ebp]
  00088	c1 e0 04	 shl	 eax, 4
  0008b	8b 88 00 00 00
	00		 mov	 ecx, DWORD PTR ?meta_explosion_database@@3PAUMETA_EXPLOSION_DATA@@A[eax]
  00091	89 4d f4	 mov	 DWORD PTR _num_components$[ebp], ecx

; 132  : 
; 133  : 	for ( comp = 0 ; comp < num_components ; comp ++ )

  00094	c7 45 fc 00 00
	00 00		 mov	 DWORD PTR _comp$[ebp], 0
  0009b	eb 09		 jmp	 SHORT $LN4@create_met
$LN2@create_met:
  0009d	8b 45 fc	 mov	 eax, DWORD PTR _comp$[ebp]
  000a0	83 c0 01	 add	 eax, 1
  000a3	89 45 fc	 mov	 DWORD PTR _comp$[ebp], eax
$LN4@create_met:
  000a6	8b 45 fc	 mov	 eax, DWORD PTR _comp$[ebp]
  000a9	3b 45 f4	 cmp	 eax, DWORD PTR _num_components$[ebp]
  000ac	0f 8d ed 00 00
	00		 jge	 $LN3@create_met

; 134  : 	{
; 135  : 
; 136  : 		explosion_component = &(meta_explosion_database[ type ].component[ comp ]);

  000b2	8b 45 08	 mov	 eax, DWORD PTR _type$[ebp]
  000b5	c1 e0 04	 shl	 eax, 4
  000b8	6b 4d fc 34	 imul	 ecx, DWORD PTR _comp$[ebp], 52
  000bc	03 88 0c 00 00
	00		 add	 ecx, DWORD PTR ?meta_explosion_database@@3PAUMETA_EXPLOSION_DATA@@A[eax+12]
  000c2	89 4d ec	 mov	 DWORD PTR _explosion_component$[ebp], ecx

; 137  : 
; 138  : 		switch ( explosion_component->type )

  000c5	8b 45 ec	 mov	 eax, DWORD PTR _explosion_component$[ebp]
  000c8	8b 08		 mov	 ecx, DWORD PTR [eax]
  000ca	89 4d a8	 mov	 DWORD PTR tv91[ebp], ecx
  000cd	83 7d a8 04	 cmp	 DWORD PTR tv91[ebp], 4
  000d1	0f 87 b0 00 00
	00		 ja	 $LN16@create_met
  000d7	8b 55 a8	 mov	 edx, DWORD PTR tv91[ebp]
  000da	ff 24 95 00 00
	00 00		 jmp	 DWORD PTR $LN19@create_met[edx*4]
$LN11@create_met:

; 139  : 		{
; 140  : 			case EXPLOSION_SPRITES:
; 141  : 			{
; 142  : 				index_counter += create_meta_explosion_sprites( explosion_component, position, parent, &entity_index_list[ index_counter ] );

  000e1	8b 45 f8	 mov	 eax, DWORD PTR _index_counter$[ebp]
  000e4	8b 4d 14	 mov	 ecx, DWORD PTR _entity_index_list$[ebp]
  000e7	8d 14 81	 lea	 edx, DWORD PTR [ecx+eax*4]
  000ea	52		 push	 edx
  000eb	8b 45 10	 mov	 eax, DWORD PTR _parent$[ebp]
  000ee	50		 push	 eax
  000ef	8b 4d 0c	 mov	 ecx, DWORD PTR _position$[ebp]
  000f2	51		 push	 ecx
  000f3	8b 55 ec	 mov	 edx, DWORD PTR _explosion_component$[ebp]
  000f6	52		 push	 edx
  000f7	e8 00 00 00 00	 call	 ?create_meta_explosion_sprites@@YGHPAUMETA_EXPLOSION_COMPONENT@@PAUVEC3D@@PAUENTITY@@PAH@Z ; create_meta_explosion_sprites
  000fc	03 45 f8	 add	 eax, DWORD PTR _index_counter$[ebp]
  000ff	89 45 f8	 mov	 DWORD PTR _index_counter$[ebp], eax

; 143  : 
; 144  : 				break;

  00102	e9 93 00 00 00	 jmp	 $LN5@create_met
$LN12@create_met:

; 145  : 			}
; 146  : 			case EXPLOSION_OBJECTS:
; 147  : 			{
; 148  : 				index_counter += create_meta_explosion_objects( explosion_component, position, &entity_index_list[ index_counter ] );

  00107	8b 45 f8	 mov	 eax, DWORD PTR _index_counter$[ebp]
  0010a	8b 4d 14	 mov	 ecx, DWORD PTR _entity_index_list$[ebp]
  0010d	8d 14 81	 lea	 edx, DWORD PTR [ecx+eax*4]
  00110	52		 push	 edx
  00111	8b 45 0c	 mov	 eax, DWORD PTR _position$[ebp]
  00114	50		 push	 eax
  00115	8b 4d ec	 mov	 ecx, DWORD PTR _explosion_component$[ebp]
  00118	51		 push	 ecx
  00119	e8 00 00 00 00	 call	 ?create_meta_explosion_objects@@YGHPAUMETA_EXPLOSION_COMPONENT@@PAUVEC3D@@PAH@Z ; create_meta_explosion_objects
  0011e	03 45 f8	 add	 eax, DWORD PTR _index_counter$[ebp]
  00121	89 45 f8	 mov	 DWORD PTR _index_counter$[ebp], eax

; 149  : 
; 150  : 				break;

  00124	eb 74		 jmp	 SHORT $LN5@create_met
$LN13@create_met:

; 151  : 			}
; 152  : 			case EXPLOSION_PARTICLES:
; 153  : 			{
; 154  : 				index_counter += create_meta_explosion_particles( explosion_component, position, &entity_index_list[ index_counter ] );

  00126	8b 45 f8	 mov	 eax, DWORD PTR _index_counter$[ebp]
  00129	8b 4d 14	 mov	 ecx, DWORD PTR _entity_index_list$[ebp]
  0012c	8d 14 81	 lea	 edx, DWORD PTR [ecx+eax*4]
  0012f	52		 push	 edx
  00130	8b 45 0c	 mov	 eax, DWORD PTR _position$[ebp]
  00133	50		 push	 eax
  00134	8b 4d ec	 mov	 ecx, DWORD PTR _explosion_component$[ebp]
  00137	51		 push	 ecx
  00138	e8 00 00 00 00	 call	 ?create_meta_explosion_particles@@YGHPAUMETA_EXPLOSION_COMPONENT@@PAUVEC3D@@PAH@Z ; create_meta_explosion_particles
  0013d	03 45 f8	 add	 eax, DWORD PTR _index_counter$[ebp]
  00140	89 45 f8	 mov	 DWORD PTR _index_counter$[ebp], eax

; 155  : 
; 156  : 				break;

  00143	eb 55		 jmp	 SHORT $LN5@create_met
$LN14@create_met:

; 157  : 			}
; 158  : 			case EXPLOSION_SMOKE_TRAILS:
; 159  : 			{
; 160  : 				index_counter += create_meta_explosion_smoke_trails( explosion_component, position, parent, &entity_index_list[ index_counter ] );

  00145	8b 45 f8	 mov	 eax, DWORD PTR _index_counter$[ebp]
  00148	8b 4d 14	 mov	 ecx, DWORD PTR _entity_index_list$[ebp]
  0014b	8d 14 81	 lea	 edx, DWORD PTR [ecx+eax*4]
  0014e	52		 push	 edx
  0014f	8b 45 10	 mov	 eax, DWORD PTR _parent$[ebp]
  00152	50		 push	 eax
  00153	8b 4d 0c	 mov	 ecx, DWORD PTR _position$[ebp]
  00156	51		 push	 ecx
  00157	8b 55 ec	 mov	 edx, DWORD PTR _explosion_component$[ebp]
  0015a	52		 push	 edx
  0015b	e8 00 00 00 00	 call	 ?create_meta_explosion_smoke_trails@@YGHPAUMETA_EXPLOSION_COMPONENT@@PAUVEC3D@@PAUENTITY@@PAH@Z ; create_meta_explosion_smoke_trails
  00160	03 45 f8	 add	 eax, DWORD PTR _index_counter$[ebp]
  00163	89 45 f8	 mov	 DWORD PTR _index_counter$[ebp], eax

; 161  : 
; 162  : 				break;

  00166	eb 32		 jmp	 SHORT $LN5@create_met
$LN15@create_met:

; 163  : 			}
; 164  : 			case EXPLOSION_SOUND_EFFECT:
; 165  : 			{
; 166  : 				index_counter += create_meta_explosion_sound_effect( explosion_component, position, &entity_index_list[ index_counter ] );

  00168	8b 45 f8	 mov	 eax, DWORD PTR _index_counter$[ebp]
  0016b	8b 4d 14	 mov	 ecx, DWORD PTR _entity_index_list$[ebp]
  0016e	8d 14 81	 lea	 edx, DWORD PTR [ecx+eax*4]
  00171	52		 push	 edx
  00172	8b 45 0c	 mov	 eax, DWORD PTR _position$[ebp]
  00175	50		 push	 eax
  00176	8b 4d ec	 mov	 ecx, DWORD PTR _explosion_component$[ebp]
  00179	51		 push	 ecx
  0017a	e8 00 00 00 00	 call	 ?create_meta_explosion_sound_effect@@YGHPAUMETA_EXPLOSION_COMPONENT@@PAUVEC3D@@PAH@Z ; create_meta_explosion_sound_effect
  0017f	03 45 f8	 add	 eax, DWORD PTR _index_counter$[ebp]
  00182	89 45 f8	 mov	 DWORD PTR _index_counter$[ebp], eax

; 167  : 
; 168  : 				break;

  00185	eb 13		 jmp	 SHORT $LN5@create_met
$LN16@create_met:

; 169  : 			}
; 170  : 			default:
; 171  : 			{
; 172  : 				debug_fatal("EXPLOSION : Unknown component type %d", explosion_component->type );

  00187	8b 45 ec	 mov	 eax, DWORD PTR _explosion_component$[ebp]
  0018a	8b 08		 mov	 ecx, DWORD PTR [eax]
  0018c	51		 push	 ecx
  0018d	68 00 00 00 00	 push	 OFFSET ??_C@_0CG@OCMINFIH@EXPLOSION?5?3?5Unknown?5component?5t@
  00192	e8 00 00 00 00	 call	 ?debug_fatal@@YAXPBDZZ	; debug_fatal
  00197	83 c4 08	 add	 esp, 8
$LN5@create_met:

; 173  : 			}
; 174  : 		}
; 175  : 	}

  0019a	e9 fe fe ff ff	 jmp	 $LN2@create_met
$LN3@create_met:

; 176  : 
; 177  : 	//
; 178  : 	// Draw little icon on map
; 179  : 	//
; 180  : 
; 181  : 	if (meta_explosion_database[ type ].show_on_map)

  0019f	8b 45 08	 mov	 eax, DWORD PTR _type$[ebp]
  001a2	c1 e0 04	 shl	 eax, 4
  001a5	83 b8 08 00 00
	00 00		 cmp	 DWORD PTR ?meta_explosion_database@@3PAUMETA_EXPLOSION_DATA@@A[eax+8], 0
  001ac	74 30		 je	 SHORT $LN17@create_met

; 182  : 	{
; 183  : 		add_map_event (MAP_EVENT_EXPLOSION, position->x, position->z, 1.5);

  001ae	51		 push	 ecx
  001af	f3 0f 10 05 00
	00 00 00	 movss	 xmm0, DWORD PTR __real@3fc00000
  001b7	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  001bc	8b 45 0c	 mov	 eax, DWORD PTR _position$[ebp]
  001bf	51		 push	 ecx
  001c0	f3 0f 10 40 08	 movss	 xmm0, DWORD PTR [eax+8]
  001c5	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  001ca	8b 4d 0c	 mov	 ecx, DWORD PTR _position$[ebp]
  001cd	51		 push	 ecx
  001ce	f3 0f 10 01	 movss	 xmm0, DWORD PTR [ecx]
  001d2	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  001d7	6a 01		 push	 1
  001d9	e8 00 00 00 00	 call	 ?add_map_event@@YGXHMMM@Z ; add_map_event
$LN17@create_met:

; 184  : 	}
; 185  : 
; 186  : 	set_force_local_entity_create_stack_attributes (create_stack_attributes);

  001de	8b 45 f0	 mov	 eax, DWORD PTR _create_stack_attributes$[ebp]
  001e1	a3 00 00 00 00	 mov	 DWORD PTR ?force_local_entity_create_stack_attributes@@3HA, eax ; force_local_entity_create_stack_attributes

; 187  : 
; 188  : 	return index_counter;

  001e6	8b 45 f8	 mov	 eax, DWORD PTR _index_counter$[ebp]

; 189  : }

  001e9	5f		 pop	 edi
  001ea	5e		 pop	 esi
  001eb	5b		 pop	 ebx
  001ec	8b e5		 mov	 esp, ebp
  001ee	5d		 pop	 ebp
  001ef	c2 10 00	 ret	 16			; 00000010H
  001f2	66 90		 npad	 2
$LN19@create_met:
  001f4	00 00 00 00	 DD	 $LN11@create_met
  001f8	00 00 00 00	 DD	 $LN12@create_met
  001fc	00 00 00 00	 DD	 $LN13@create_met
  00200	00 00 00 00	 DD	 $LN14@create_met
  00204	00 00 00 00	 DD	 $LN15@create_met
?create_meta_explosion@@YGHW4META_EXPLOSION_TYPES@@PAUVEC3D@@PAUENTITY@@PAH@Z ENDP ; create_meta_explosion
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\program files (x86)\microsoft visual studio\2017\community\vc\tools\msvc\14.16.27023\include\cmath
;	COMDAT ?fabs@@YGMM@Z
_TEXT	SEGMENT
__Xx$ = 8						; size = 4
?fabs@@YGMM@Z PROC					; fabs, COMDAT

; 112  : 	{

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 113  : 	return (_CSTD fabsf(_Xx));

  00009	51		 push	 ecx
  0000a	f3 0f 10 45 08	 movss	 xmm0, DWORD PTR __Xx$[ebp]
  0000f	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  00014	e8 00 00 00 00	 call	 _fabsf
  00019	83 c4 04	 add	 esp, 4

; 114  : 	}

  0001c	5f		 pop	 edi
  0001d	5e		 pop	 esi
  0001e	5b		 pop	 ebx
  0001f	8b e5		 mov	 esp, ebp
  00021	5d		 pop	 ebp
  00022	c2 04 00	 ret	 4
?fabs@@YGMM@Z ENDP					; fabs
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\program files (x86)\windows kits\10\include\10.0.18362.0\ucrt\corecrt_math.h
;	COMDAT _fabsf
_TEXT	SEGMENT
tv71 = -68						; size = 4
__X$ = 8						; size = 4
_fabsf	PROC						; COMDAT

; 671  :         {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 44	 sub	 esp, 68			; 00000044H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 672  :             return (float)fabs(_X);

  00009	f3 0f 5a 45 08	 cvtss2sd xmm0, DWORD PTR __X$[ebp]
  0000e	83 ec 08	 sub	 esp, 8
  00011	f2 0f 11 04 24	 movsd	 QWORD PTR [esp], xmm0
  00016	e8 00 00 00 00	 call	 _fabs
  0001b	83 c4 08	 add	 esp, 8
  0001e	d9 5d bc	 fstp	 DWORD PTR tv71[ebp]
  00021	d9 45 bc	 fld	 DWORD PTR tv71[ebp]

; 673  :         }

  00024	5f		 pop	 edi
  00025	5e		 pop	 esi
  00026	5b		 pop	 ebx
  00027	8b e5		 mov	 esp, ebp
  00029	5d		 pop	 ebp
  0002a	c3		 ret	 0
_fabsf	ENDP
_TEXT	ENDS
END
