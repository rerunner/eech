; Listing generated by Microsoft (R) Optimizing Compiler Version 19.16.27045.0 

	TITLE	C:\Users\nhv90\Projects\eech\modules\3d\terrain\terrcons.c
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB MSVCRTD
INCLUDELIB OLDNAMES

PUBLIC	?terrain_3d_copied_points@@3PAUVERTEX@@A	; terrain_3d_copied_points
_BSS	SEGMENT
?terrain_3d_copied_points@@3PAUVERTEX@@A DB 02000H DUP (?) ; terrain_3d_copied_points
_BSS	ENDS
PUBLIC	?outcode_3d_terrain_word_polygon@@YGHHPAUTERRAIN_3D_POINT_WORD_REFERENCE@@PAH@Z ; outcode_3d_terrain_word_polygon
PUBLIC	?outcode_3d_terrain_byte_polygon@@YGHHPAUTERRAIN_3D_POINT_BYTE_REFERENCE@@PAH@Z ; outcode_3d_terrain_byte_polygon
PUBLIC	?outcode_3d_terrain_triangle@@YGHPAH0@Z		; outcode_3d_terrain_triangle
PUBLIC	?terrain_alpha_visible_word@@YGHHPAUTERRAIN_3D_POINT_WORD_REFERENCE@@@Z ; terrain_alpha_visible_word
PUBLIC	?terrain_alpha_visible_byte@@YGHHPAUTERRAIN_3D_POINT_BYTE_REFERENCE@@@Z ; terrain_alpha_visible_byte
PUBLIC	?construct_3d_terrain_word_clipping_primitive@@YGXHPAUTERRAIN_3D_POINT_WORD_REFERENCE@@@Z ; construct_3d_terrain_word_clipping_primitive
PUBLIC	?construct_3d_terrain_byte_clipping_primitive@@YGXHPAUTERRAIN_3D_POINT_BYTE_REFERENCE@@@Z ; construct_3d_terrain_byte_clipping_primitive
PUBLIC	?construct_3d_terrain_triangle@@YGPAUVERTEX@@PAH@Z ; construct_3d_terrain_triangle
PUBLIC	?construct_3d_terrain_xy_triangle@@YGPAUVERTEX@@PAH@Z ; construct_3d_terrain_xy_triangle
PUBLIC	?construct_3d_terrain_zy_triangle@@YGPAUVERTEX@@PAH@Z ; construct_3d_terrain_zy_triangle
PUBLIC	?construct_3d_terrain_dual_texture_triangle@@YGPAUVERTEX@@PAH@Z ; construct_3d_terrain_dual_texture_triangle
PUBLIC	?construct_3d_terrain_dual_texture_xy_triangle@@YGPAUVERTEX@@PAH@Z ; construct_3d_terrain_dual_texture_xy_triangle
PUBLIC	?construct_3d_terrain_dual_texture_zy_triangle@@YGPAUVERTEX@@PAH@Z ; construct_3d_terrain_dual_texture_zy_triangle
EXTRN	?clipping_vertices@@3PAUVERTEX@@A:BYTE		; clipping_vertices
EXTRN	?polygon_3d_vertices@@3PAUVERTEX@@A:BYTE	; polygon_3d_vertices
EXTRN	?transformed_3d_point_outcodes@@3PAEA:BYTE	; transformed_3d_point_outcodes
EXTRN	?transformed_3d_3d_points@@3PAUOBJECT_TRANSFORMED_3D_POINT@@A:BYTE ; transformed_3d_3d_points
EXTRN	?transformed_3d_2d_points@@3PAUOBJECT_TRANSFORMED_2D_POINT@@A:BYTE ; transformed_3d_2d_points
EXTRN	?terrain_3d_map_minimum_height@@3MA:DWORD	; terrain_3d_map_minimum_height
EXTRN	?terrain_3d_map_scaled_height_difference@@3MA:DWORD ; terrain_3d_map_scaled_height_difference
EXTRN	?current_terrain_type_class@@3PAUTERRAIN_TYPE_INFO@@A:DWORD ; current_terrain_type_class
EXTRN	?current_terrain_points_xz@@3PAUTERRAIN_3D_POINT_XZ@@A:DWORD ; current_terrain_points_xz
EXTRN	?current_terrain_points_y@@3PAUTERRAIN_3D_POINT_Y@@A:DWORD ; current_terrain_points_y
EXTRN	?transformed_3d_point_colours@@3PAUTERRAIN_3D_TRANSFORMED_POINT_COLOUR@@A:BYTE ; transformed_3d_point_colours
EXTRN	?terrain_3d_transformed_point_normals@@3PAUTERRAIN_3D_TRANSFORMED_POINT_NORMAL@@A:BYTE ; terrain_3d_transformed_point_normals
EXTRN	?terrain_3d_faces_constructed@@3HA:DWORD	; terrain_3d_faces_constructed
EXTRN	__fltused:DWORD
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\modules\3d\terrain\terrcons.c
;	COMDAT ?construct_3d_terrain_dual_texture_zy_triangle@@YGPAUVERTEX@@PAH@Z
_TEXT	SEGMENT
_v2$ = -44						; size = 4
_v$ = -40						; size = 4
_u2$ = -36						; size = 4
_u$ = -32						; size = 4
_y$ = -28						; size = 4
_y_texture_scale2$ = -24				; size = 4
_y_texture_scale$ = -20					; size = 4
_xz_texture_scale2$ = -16				; size = 4
_xz_texture_scale$ = -12				; size = 4
_normal_index$ = -8					; size = 4
_this_point$ = -4					; size = 4
_reference_points$ = 8					; size = 4
?construct_3d_terrain_dual_texture_zy_triangle@@YGPAUVERTEX@@PAH@Z PROC ; construct_3d_terrain_dual_texture_zy_triangle, COMDAT

; 847  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 6c	 sub	 esp, 108		; 0000006cH
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 848  : 
; 849  : 	int
; 850  : 		this_point,
; 851  : 		normal_index;
; 852  : 
; 853  : 	float
; 854  : 		xz_texture_scale,
; 855  : 		xz_texture_scale2,
; 856  : 		y_texture_scale,
; 857  : 		y_texture_scale2,
; 858  : 		y,
; 859  : 		u,
; 860  : 		u2,
; 861  : 		v,
; 862  : 		v2;
; 863  : 
; 864  : 	terrain_3d_faces_constructed++;

  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ?terrain_3d_faces_constructed@@3HA ; terrain_3d_faces_constructed
  0000e	83 c0 01	 add	 eax, 1
  00011	a3 00 00 00 00	 mov	 DWORD PTR ?terrain_3d_faces_constructed@@3HA, eax ; terrain_3d_faces_constructed

; 865  : 
; 866  : 	xz_texture_scale = current_terrain_type_class->xz_texture_scale;

  00016	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_terrain_type_class@@3PAUTERRAIN_TYPE_INFO@@A ; current_terrain_type_class
  0001b	f3 0f 10 40 10	 movss	 xmm0, DWORD PTR [eax+16]
  00020	f3 0f 11 45 f4	 movss	 DWORD PTR _xz_texture_scale$[ebp], xmm0

; 867  : 	xz_texture_scale2 = current_terrain_type_class->xz_texture_scale2;

  00025	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_terrain_type_class@@3PAUTERRAIN_TYPE_INFO@@A ; current_terrain_type_class
  0002a	f3 0f 10 40 18	 movss	 xmm0, DWORD PTR [eax+24]
  0002f	f3 0f 11 45 f0	 movss	 DWORD PTR _xz_texture_scale2$[ebp], xmm0

; 868  : 	y_texture_scale = current_terrain_type_class->y_texture_scale;

  00034	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_terrain_type_class@@3PAUTERRAIN_TYPE_INFO@@A ; current_terrain_type_class
  00039	f3 0f 10 40 14	 movss	 xmm0, DWORD PTR [eax+20]
  0003e	f3 0f 11 45 ec	 movss	 DWORD PTR _y_texture_scale$[ebp], xmm0

; 869  : 	y_texture_scale2 = current_terrain_type_class->y_texture_scale2;

  00043	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_terrain_type_class@@3PAUTERRAIN_TYPE_INFO@@A ; current_terrain_type_class
  00048	f3 0f 10 40 1c	 movss	 xmm0, DWORD PTR [eax+28]
  0004d	f3 0f 11 45 e8	 movss	 DWORD PTR _y_texture_scale2$[ebp], xmm0

; 870  : 
; 871  : 	this_point = reference_points[0];

  00052	b8 04 00 00 00	 mov	 eax, 4
  00057	6b c8 00	 imul	 ecx, eax, 0
  0005a	8b 55 08	 mov	 edx, DWORD PTR _reference_points$[ebp]
  0005d	8b 04 0a	 mov	 eax, DWORD PTR [edx+ecx]
  00060	89 45 fc	 mov	 DWORD PTR _this_point$[ebp], eax

; 872  : 	normal_index = transformed_3d_point_colours[this_point].normal_index;

  00063	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  00066	0f b6 0c c5 05
	00 00 00	 movzx	 ecx, BYTE PTR ?transformed_3d_point_colours@@3PAUTERRAIN_3D_TRANSFORMED_POINT_COLOUR@@A[eax*8+5]
  0006e	89 4d f8	 mov	 DWORD PTR _normal_index$[ebp], ecx

; 873  : 	y = terrain_3d_map_minimum_height + ( ( ( float ) current_terrain_points_y[this_point].y ) * terrain_3d_map_scaled_height_difference );

  00071	b8 ff 7f 00 00	 mov	 eax, 32767		; 00007fffH
  00076	8b 4d fc	 mov	 ecx, DWORD PTR _this_point$[ebp]
  00079	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?current_terrain_points_y@@3PAUTERRAIN_3D_POINT_Y@@A ; current_terrain_points_y
  0007f	66 23 04 4a	 and	 ax, WORD PTR [edx+ecx*2]
  00083	0f b7 c0	 movzx	 eax, ax
  00086	f3 0f 2a c0	 cvtsi2ss xmm0, eax
  0008a	f3 0f 59 05 00
	00 00 00	 mulss	 xmm0, DWORD PTR ?terrain_3d_map_scaled_height_difference@@3MA
  00092	f3 0f 58 05 00
	00 00 00	 addss	 xmm0, DWORD PTR ?terrain_3d_map_minimum_height@@3MA
  0009a	f3 0f 11 45 e4	 movss	 DWORD PTR _y$[ebp], xmm0

; 874  : 	u = current_terrain_points_xz[this_point].z * xz_texture_scale;

  0009f	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  000a2	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_terrain_points_xz@@3PAUTERRAIN_3D_POINT_XZ@@A ; current_terrain_points_xz
  000a8	0f bf 54 81 02	 movsx	 edx, WORD PTR [ecx+eax*4+2]
  000ad	f3 0f 2a c2	 cvtsi2ss xmm0, edx
  000b1	f3 0f 59 45 f4	 mulss	 xmm0, DWORD PTR _xz_texture_scale$[ebp]
  000b6	f3 0f 11 45 e0	 movss	 DWORD PTR _u$[ebp], xmm0

; 875  : 	u2 = current_terrain_points_xz[this_point].z * xz_texture_scale2;

  000bb	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  000be	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_terrain_points_xz@@3PAUTERRAIN_3D_POINT_XZ@@A ; current_terrain_points_xz
  000c4	0f bf 54 81 02	 movsx	 edx, WORD PTR [ecx+eax*4+2]
  000c9	f3 0f 2a c2	 cvtsi2ss xmm0, edx
  000cd	f3 0f 59 45 f0	 mulss	 xmm0, DWORD PTR _xz_texture_scale2$[ebp]
  000d2	f3 0f 11 45 dc	 movss	 DWORD PTR _u2$[ebp], xmm0

; 876  : 	v = y * y_texture_scale;

  000d7	f3 0f 10 45 e4	 movss	 xmm0, DWORD PTR _y$[ebp]
  000dc	f3 0f 59 45 ec	 mulss	 xmm0, DWORD PTR _y_texture_scale$[ebp]
  000e1	f3 0f 11 45 d8	 movss	 DWORD PTR _v$[ebp], xmm0

; 877  : 	v2 = y * y_texture_scale2;

  000e6	f3 0f 10 45 e4	 movss	 xmm0, DWORD PTR _y$[ebp]
  000eb	f3 0f 59 45 e8	 mulss	 xmm0, DWORD PTR _y_texture_scale2$[ebp]
  000f0	f3 0f 11 45 d4	 movss	 DWORD PTR _v2$[ebp], xmm0

; 878  : 	*( ( int * ) &polygon_3d_vertices[0].x ) = *( ( int * ) &transformed_3d_3d_points[this_point].x );

  000f5	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  000fa	6b c8 00	 imul	 ecx, eax, 0
  000fd	8b 55 fc	 mov	 edx, DWORD PTR _this_point$[ebp]
  00100	8b 04 d5 00 00
	00 00		 mov	 eax, DWORD PTR ?transformed_3d_3d_points@@3PAUOBJECT_TRANSFORMED_3D_POINT@@A[edx*8]
  00107	89 81 00 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx], eax

; 879  : 	*( ( int * ) &polygon_3d_vertices[0].y ) = *( ( int * ) &transformed_3d_3d_points[this_point].y );

  0010d	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  00112	6b c8 00	 imul	 ecx, eax, 0
  00115	8b 55 fc	 mov	 edx, DWORD PTR _this_point$[ebp]
  00118	8b 04 d5 04 00
	00 00		 mov	 eax, DWORD PTR ?transformed_3d_3d_points@@3PAUOBJECT_TRANSFORMED_3D_POINT@@A[edx*8+4]
  0011f	89 81 04 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+4], eax

; 880  : 	*( ( int * ) &polygon_3d_vertices[0].z ) = *( ( int * ) &transformed_3d_2d_points[this_point].z );

  00125	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  00128	c1 e0 04	 shl	 eax, 4
  0012b	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  00130	6b d1 00	 imul	 edx, ecx, 0
  00133	8b 80 0c 00 00
	00		 mov	 eax, DWORD PTR ?transformed_3d_2d_points@@3PAUOBJECT_TRANSFORMED_2D_POINT@@A[eax+12]
  00139	89 82 08 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[edx+8], eax

; 881  : 	*( ( int * ) &polygon_3d_vertices[0].i ) = *( ( int * ) &transformed_3d_2d_points[this_point].i );

  0013f	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  00142	c1 e0 04	 shl	 eax, 4
  00145	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  0014a	6b d1 00	 imul	 edx, ecx, 0
  0014d	8b 80 00 00 00
	00		 mov	 eax, DWORD PTR ?transformed_3d_2d_points@@3PAUOBJECT_TRANSFORMED_2D_POINT@@A[eax]
  00153	89 82 10 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[edx+16], eax

; 882  : 	*( ( int * ) &polygon_3d_vertices[0].j ) = *( ( int * ) &transformed_3d_2d_points[this_point].j );

  00159	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  0015c	c1 e0 04	 shl	 eax, 4
  0015f	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  00164	6b d1 00	 imul	 edx, ecx, 0
  00167	8b 80 04 00 00
	00		 mov	 eax, DWORD PTR ?transformed_3d_2d_points@@3PAUOBJECT_TRANSFORMED_2D_POINT@@A[eax+4]
  0016d	89 82 14 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[edx+20], eax

; 883  : 	*( ( int * ) &polygon_3d_vertices[0].q ) = *( ( int * ) &transformed_3d_2d_points[this_point].q );

  00173	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  00176	c1 e0 04	 shl	 eax, 4
  00179	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  0017e	6b d1 00	 imul	 edx, ecx, 0
  00181	8b 80 08 00 00
	00		 mov	 eax, DWORD PTR ?transformed_3d_2d_points@@3PAUOBJECT_TRANSFORMED_2D_POINT@@A[eax+8]
  00187	89 82 0c 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[edx+12], eax

; 884  : 	polygon_3d_vertices[0].outcode = transformed_3d_point_outcodes[this_point];

  0018d	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  00192	6b c8 00	 imul	 ecx, eax, 0
  00195	8b 55 fc	 mov	 edx, DWORD PTR _this_point$[ebp]
  00198	8a 82 00 00 00
	00		 mov	 al, BYTE PTR ?transformed_3d_point_outcodes@@3PAEA[edx]
  0019e	88 81 2c 00 00
	00		 mov	 BYTE PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+44], al

; 885  : 	polygon_3d_vertices[0].colour = transformed_3d_point_colours[this_point].colour;

  001a4	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  001a9	6b c8 00	 imul	 ecx, eax, 0
  001ac	8b 55 fc	 mov	 edx, DWORD PTR _this_point$[ebp]
  001af	8b 04 d5 00 00
	00 00		 mov	 eax, DWORD PTR ?transformed_3d_point_colours@@3PAUTERRAIN_3D_TRANSFORMED_POINT_COLOUR@@A[edx*8]
  001b6	89 81 30 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+48], eax

; 886  : 	polygon_3d_vertices[0].fog = transformed_3d_point_colours[this_point].fog;

  001bc	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  001c1	6b c8 00	 imul	 ecx, eax, 0
  001c4	8b 55 fc	 mov	 edx, DWORD PTR _this_point$[ebp]
  001c7	8a 04 d5 04 00
	00 00		 mov	 al, BYTE PTR ?transformed_3d_point_colours@@3PAUTERRAIN_3D_TRANSFORMED_POINT_COLOUR@@A[edx*8+4]
  001ce	88 81 2e 00 00
	00		 mov	 BYTE PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+46], al

; 887  : 	polygon_3d_vertices[0].red2 = terrain_3d_transformed_point_normals[normal_index].colour.red;

  001d4	8b 45 f8	 mov	 eax, DWORD PTR _normal_index$[ebp]
  001d7	c1 e0 04	 shl	 eax, 4
  001da	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  001df	6b d1 00	 imul	 edx, ecx, 0
  001e2	8a 80 0e 00 00
	00		 mov	 al, BYTE PTR ?terrain_3d_transformed_point_normals@@3PAUTERRAIN_3D_TRANSFORMED_POINT_NORMAL@@A[eax+14]
  001e8	88 82 36 00 00
	00		 mov	 BYTE PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[edx+54], al

; 888  : 	polygon_3d_vertices[0].green2 = terrain_3d_transformed_point_normals[normal_index].colour.green;

  001ee	8b 45 f8	 mov	 eax, DWORD PTR _normal_index$[ebp]
  001f1	c1 e0 04	 shl	 eax, 4
  001f4	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  001f9	6b d1 00	 imul	 edx, ecx, 0
  001fc	8a 80 0d 00 00
	00		 mov	 al, BYTE PTR ?terrain_3d_transformed_point_normals@@3PAUTERRAIN_3D_TRANSFORMED_POINT_NORMAL@@A[eax+13]
  00202	88 82 35 00 00
	00		 mov	 BYTE PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[edx+53], al

; 889  : 	polygon_3d_vertices[0].blue2 = terrain_3d_transformed_point_normals[normal_index].colour.blue;

  00208	8b 45 f8	 mov	 eax, DWORD PTR _normal_index$[ebp]
  0020b	c1 e0 04	 shl	 eax, 4
  0020e	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  00213	6b d1 00	 imul	 edx, ecx, 0
  00216	8a 80 0c 00 00
	00		 mov	 al, BYTE PTR ?terrain_3d_transformed_point_normals@@3PAUTERRAIN_3D_TRANSFORMED_POINT_NORMAL@@A[eax+12]
  0021c	88 82 34 00 00
	00		 mov	 BYTE PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[edx+52], al

; 890  : 	polygon_3d_vertices[0].alpha2 = transformed_3d_point_colours[this_point].alpha;

  00222	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  00227	6b c8 00	 imul	 ecx, eax, 0
  0022a	8b 55 fc	 mov	 edx, DWORD PTR _this_point$[ebp]
  0022d	8a 04 d5 03 00
	00 00		 mov	 al, BYTE PTR ?transformed_3d_point_colours@@3PAUTERRAIN_3D_TRANSFORMED_POINT_COLOUR@@A[edx*8+3]
  00234	88 81 37 00 00
	00		 mov	 BYTE PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+55], al

; 891  : 	polygon_3d_vertices[0].u = u;

  0023a	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  0023f	6b c8 00	 imul	 ecx, eax, 0
  00242	f3 0f 10 45 e0	 movss	 xmm0, DWORD PTR _u$[ebp]
  00247	f3 0f 11 81 18
	00 00 00	 movss	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+24], xmm0

; 892  : 	polygon_3d_vertices[0].v = v;

  0024f	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  00254	6b c8 00	 imul	 ecx, eax, 0
  00257	f3 0f 10 45 d8	 movss	 xmm0, DWORD PTR _v$[ebp]
  0025c	f3 0f 11 81 1c
	00 00 00	 movss	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+28], xmm0

; 893  : 	polygon_3d_vertices[0].u2 = u2;

  00264	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  00269	6b c8 00	 imul	 ecx, eax, 0
  0026c	f3 0f 10 45 dc	 movss	 xmm0, DWORD PTR _u2$[ebp]
  00271	f3 0f 11 81 20
	00 00 00	 movss	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+32], xmm0

; 894  : 	polygon_3d_vertices[0].v2 = v2;

  00279	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  0027e	6b c8 00	 imul	 ecx, eax, 0
  00281	f3 0f 10 45 d4	 movss	 xmm0, DWORD PTR _v2$[ebp]
  00286	f3 0f 11 81 24
	00 00 00	 movss	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+36], xmm0

; 895  : 	polygon_3d_vertices[0].next_vertex = &polygon_3d_vertices[1];

  0028e	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  00293	c1 e0 00	 shl	 eax, 0
  00296	05 00 00 00 00	 add	 eax, OFFSET ?polygon_3d_vertices@@3PAUVERTEX@@A ; polygon_3d_vertices
  0029b	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  002a0	6b d1 00	 imul	 edx, ecx, 0
  002a3	89 82 28 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[edx+40], eax

; 896  : 
; 897  : 	this_point = reference_points[1];

  002a9	b8 04 00 00 00	 mov	 eax, 4
  002ae	c1 e0 00	 shl	 eax, 0
  002b1	8b 4d 08	 mov	 ecx, DWORD PTR _reference_points$[ebp]
  002b4	8b 14 01	 mov	 edx, DWORD PTR [ecx+eax]
  002b7	89 55 fc	 mov	 DWORD PTR _this_point$[ebp], edx

; 898  : 	normal_index = transformed_3d_point_colours[this_point].normal_index;

  002ba	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  002bd	0f b6 0c c5 05
	00 00 00	 movzx	 ecx, BYTE PTR ?transformed_3d_point_colours@@3PAUTERRAIN_3D_TRANSFORMED_POINT_COLOUR@@A[eax*8+5]
  002c5	89 4d f8	 mov	 DWORD PTR _normal_index$[ebp], ecx

; 899  : 	y = terrain_3d_map_minimum_height + ( ( ( float ) current_terrain_points_y[this_point].y ) * terrain_3d_map_scaled_height_difference );

  002c8	b8 ff 7f 00 00	 mov	 eax, 32767		; 00007fffH
  002cd	8b 4d fc	 mov	 ecx, DWORD PTR _this_point$[ebp]
  002d0	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?current_terrain_points_y@@3PAUTERRAIN_3D_POINT_Y@@A ; current_terrain_points_y
  002d6	66 23 04 4a	 and	 ax, WORD PTR [edx+ecx*2]
  002da	0f b7 c0	 movzx	 eax, ax
  002dd	f3 0f 2a c0	 cvtsi2ss xmm0, eax
  002e1	f3 0f 59 05 00
	00 00 00	 mulss	 xmm0, DWORD PTR ?terrain_3d_map_scaled_height_difference@@3MA
  002e9	f3 0f 58 05 00
	00 00 00	 addss	 xmm0, DWORD PTR ?terrain_3d_map_minimum_height@@3MA
  002f1	f3 0f 11 45 e4	 movss	 DWORD PTR _y$[ebp], xmm0

; 900  : 	u = current_terrain_points_xz[this_point].z * xz_texture_scale;

  002f6	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  002f9	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_terrain_points_xz@@3PAUTERRAIN_3D_POINT_XZ@@A ; current_terrain_points_xz
  002ff	0f bf 54 81 02	 movsx	 edx, WORD PTR [ecx+eax*4+2]
  00304	f3 0f 2a c2	 cvtsi2ss xmm0, edx
  00308	f3 0f 59 45 f4	 mulss	 xmm0, DWORD PTR _xz_texture_scale$[ebp]
  0030d	f3 0f 11 45 e0	 movss	 DWORD PTR _u$[ebp], xmm0

; 901  : 	u2 = current_terrain_points_xz[this_point].z * xz_texture_scale2;

  00312	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  00315	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_terrain_points_xz@@3PAUTERRAIN_3D_POINT_XZ@@A ; current_terrain_points_xz
  0031b	0f bf 54 81 02	 movsx	 edx, WORD PTR [ecx+eax*4+2]
  00320	f3 0f 2a c2	 cvtsi2ss xmm0, edx
  00324	f3 0f 59 45 f0	 mulss	 xmm0, DWORD PTR _xz_texture_scale2$[ebp]
  00329	f3 0f 11 45 dc	 movss	 DWORD PTR _u2$[ebp], xmm0

; 902  : 	v = y * y_texture_scale;

  0032e	f3 0f 10 45 e4	 movss	 xmm0, DWORD PTR _y$[ebp]
  00333	f3 0f 59 45 ec	 mulss	 xmm0, DWORD PTR _y_texture_scale$[ebp]
  00338	f3 0f 11 45 d8	 movss	 DWORD PTR _v$[ebp], xmm0

; 903  : 	v2 = y * y_texture_scale2;

  0033d	f3 0f 10 45 e4	 movss	 xmm0, DWORD PTR _y$[ebp]
  00342	f3 0f 59 45 e8	 mulss	 xmm0, DWORD PTR _y_texture_scale2$[ebp]
  00347	f3 0f 11 45 d4	 movss	 DWORD PTR _v2$[ebp], xmm0

; 904  : 	*( ( int * ) &polygon_3d_vertices[1].x ) = *( ( int * ) &transformed_3d_3d_points[this_point].x );

  0034c	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  00351	c1 e0 00	 shl	 eax, 0
  00354	8b 4d fc	 mov	 ecx, DWORD PTR _this_point$[ebp]
  00357	8b 14 cd 00 00
	00 00		 mov	 edx, DWORD PTR ?transformed_3d_3d_points@@3PAUOBJECT_TRANSFORMED_3D_POINT@@A[ecx*8]
  0035e	89 90 00 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax], edx

; 905  : 	*( ( int * ) &polygon_3d_vertices[1].y ) = *( ( int * ) &transformed_3d_3d_points[this_point].y );

  00364	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  00369	c1 e0 00	 shl	 eax, 0
  0036c	8b 4d fc	 mov	 ecx, DWORD PTR _this_point$[ebp]
  0036f	8b 14 cd 04 00
	00 00		 mov	 edx, DWORD PTR ?transformed_3d_3d_points@@3PAUOBJECT_TRANSFORMED_3D_POINT@@A[ecx*8+4]
  00376	89 90 04 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+4], edx

; 906  : 	*( ( int * ) &polygon_3d_vertices[1].z ) = *( ( int * ) &transformed_3d_2d_points[this_point].z );

  0037c	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  0037f	c1 e0 04	 shl	 eax, 4
  00382	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  00387	c1 e1 00	 shl	 ecx, 0
  0038a	8b 90 0c 00 00
	00		 mov	 edx, DWORD PTR ?transformed_3d_2d_points@@3PAUOBJECT_TRANSFORMED_2D_POINT@@A[eax+12]
  00390	89 91 08 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+8], edx

; 907  : 	*( ( int * ) &polygon_3d_vertices[1].i ) = *( ( int * ) &transformed_3d_2d_points[this_point].i );

  00396	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  00399	c1 e0 04	 shl	 eax, 4
  0039c	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  003a1	c1 e1 00	 shl	 ecx, 0
  003a4	8b 90 00 00 00
	00		 mov	 edx, DWORD PTR ?transformed_3d_2d_points@@3PAUOBJECT_TRANSFORMED_2D_POINT@@A[eax]
  003aa	89 91 10 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+16], edx

; 908  : 	*( ( int * ) &polygon_3d_vertices[1].j ) = *( ( int * ) &transformed_3d_2d_points[this_point].j );

  003b0	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  003b3	c1 e0 04	 shl	 eax, 4
  003b6	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  003bb	c1 e1 00	 shl	 ecx, 0
  003be	8b 90 04 00 00
	00		 mov	 edx, DWORD PTR ?transformed_3d_2d_points@@3PAUOBJECT_TRANSFORMED_2D_POINT@@A[eax+4]
  003c4	89 91 14 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+20], edx

; 909  : 	*( ( int * ) &polygon_3d_vertices[1].q ) = *( ( int * ) &transformed_3d_2d_points[this_point].q );

  003ca	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  003cd	c1 e0 04	 shl	 eax, 4
  003d0	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  003d5	c1 e1 00	 shl	 ecx, 0
  003d8	8b 90 08 00 00
	00		 mov	 edx, DWORD PTR ?transformed_3d_2d_points@@3PAUOBJECT_TRANSFORMED_2D_POINT@@A[eax+8]
  003de	89 91 0c 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+12], edx

; 910  : 	polygon_3d_vertices[1].outcode = transformed_3d_point_outcodes[this_point];

  003e4	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  003e9	c1 e0 00	 shl	 eax, 0
  003ec	8b 4d fc	 mov	 ecx, DWORD PTR _this_point$[ebp]
  003ef	8a 91 00 00 00
	00		 mov	 dl, BYTE PTR ?transformed_3d_point_outcodes@@3PAEA[ecx]
  003f5	88 90 2c 00 00
	00		 mov	 BYTE PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+44], dl

; 911  : 	polygon_3d_vertices[1].colour = transformed_3d_point_colours[this_point].colour;

  003fb	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  00400	c1 e0 00	 shl	 eax, 0
  00403	8b 4d fc	 mov	 ecx, DWORD PTR _this_point$[ebp]
  00406	8b 14 cd 00 00
	00 00		 mov	 edx, DWORD PTR ?transformed_3d_point_colours@@3PAUTERRAIN_3D_TRANSFORMED_POINT_COLOUR@@A[ecx*8]
  0040d	89 90 30 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+48], edx

; 912  : 	polygon_3d_vertices[1].fog = transformed_3d_point_colours[this_point].fog;

  00413	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  00418	c1 e0 00	 shl	 eax, 0
  0041b	8b 4d fc	 mov	 ecx, DWORD PTR _this_point$[ebp]
  0041e	8a 14 cd 04 00
	00 00		 mov	 dl, BYTE PTR ?transformed_3d_point_colours@@3PAUTERRAIN_3D_TRANSFORMED_POINT_COLOUR@@A[ecx*8+4]
  00425	88 90 2e 00 00
	00		 mov	 BYTE PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+46], dl

; 913  : 	polygon_3d_vertices[1].red2 = terrain_3d_transformed_point_normals[normal_index].colour.red;

  0042b	8b 45 f8	 mov	 eax, DWORD PTR _normal_index$[ebp]
  0042e	c1 e0 04	 shl	 eax, 4
  00431	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  00436	c1 e1 00	 shl	 ecx, 0
  00439	8a 90 0e 00 00
	00		 mov	 dl, BYTE PTR ?terrain_3d_transformed_point_normals@@3PAUTERRAIN_3D_TRANSFORMED_POINT_NORMAL@@A[eax+14]
  0043f	88 91 36 00 00
	00		 mov	 BYTE PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+54], dl

; 914  : 	polygon_3d_vertices[1].green2 = terrain_3d_transformed_point_normals[normal_index].colour.green;

  00445	8b 45 f8	 mov	 eax, DWORD PTR _normal_index$[ebp]
  00448	c1 e0 04	 shl	 eax, 4
  0044b	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  00450	c1 e1 00	 shl	 ecx, 0
  00453	8a 90 0d 00 00
	00		 mov	 dl, BYTE PTR ?terrain_3d_transformed_point_normals@@3PAUTERRAIN_3D_TRANSFORMED_POINT_NORMAL@@A[eax+13]
  00459	88 91 35 00 00
	00		 mov	 BYTE PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+53], dl

; 915  : 	polygon_3d_vertices[1].blue2 = terrain_3d_transformed_point_normals[normal_index].colour.blue;

  0045f	8b 45 f8	 mov	 eax, DWORD PTR _normal_index$[ebp]
  00462	c1 e0 04	 shl	 eax, 4
  00465	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  0046a	c1 e1 00	 shl	 ecx, 0
  0046d	8a 90 0c 00 00
	00		 mov	 dl, BYTE PTR ?terrain_3d_transformed_point_normals@@3PAUTERRAIN_3D_TRANSFORMED_POINT_NORMAL@@A[eax+12]
  00473	88 91 34 00 00
	00		 mov	 BYTE PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+52], dl

; 916  : 	polygon_3d_vertices[1].alpha2 = transformed_3d_point_colours[this_point].alpha;

  00479	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  0047e	c1 e0 00	 shl	 eax, 0
  00481	8b 4d fc	 mov	 ecx, DWORD PTR _this_point$[ebp]
  00484	8a 14 cd 03 00
	00 00		 mov	 dl, BYTE PTR ?transformed_3d_point_colours@@3PAUTERRAIN_3D_TRANSFORMED_POINT_COLOUR@@A[ecx*8+3]
  0048b	88 90 37 00 00
	00		 mov	 BYTE PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+55], dl

; 917  : 	polygon_3d_vertices[1].u = u;

  00491	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  00496	c1 e0 00	 shl	 eax, 0
  00499	f3 0f 10 45 e0	 movss	 xmm0, DWORD PTR _u$[ebp]
  0049e	f3 0f 11 80 18
	00 00 00	 movss	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+24], xmm0

; 918  : 	polygon_3d_vertices[1].v = v;

  004a6	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  004ab	c1 e0 00	 shl	 eax, 0
  004ae	f3 0f 10 45 d8	 movss	 xmm0, DWORD PTR _v$[ebp]
  004b3	f3 0f 11 80 1c
	00 00 00	 movss	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+28], xmm0

; 919  : 	polygon_3d_vertices[1].u2 = u2;

  004bb	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  004c0	c1 e0 00	 shl	 eax, 0
  004c3	f3 0f 10 45 dc	 movss	 xmm0, DWORD PTR _u2$[ebp]
  004c8	f3 0f 11 80 20
	00 00 00	 movss	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+32], xmm0

; 920  : 	polygon_3d_vertices[1].v2 = v2;

  004d0	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  004d5	c1 e0 00	 shl	 eax, 0
  004d8	f3 0f 10 45 d4	 movss	 xmm0, DWORD PTR _v2$[ebp]
  004dd	f3 0f 11 80 24
	00 00 00	 movss	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+36], xmm0

; 921  : 	polygon_3d_vertices[1].next_vertex = &polygon_3d_vertices[2];

  004e5	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  004ea	d1 e0		 shl	 eax, 1
  004ec	05 00 00 00 00	 add	 eax, OFFSET ?polygon_3d_vertices@@3PAUVERTEX@@A ; polygon_3d_vertices
  004f1	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  004f6	c1 e1 00	 shl	 ecx, 0
  004f9	89 81 28 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+40], eax

; 922  : 
; 923  : 	this_point = reference_points[2];

  004ff	b8 04 00 00 00	 mov	 eax, 4
  00504	d1 e0		 shl	 eax, 1
  00506	8b 4d 08	 mov	 ecx, DWORD PTR _reference_points$[ebp]
  00509	8b 14 01	 mov	 edx, DWORD PTR [ecx+eax]
  0050c	89 55 fc	 mov	 DWORD PTR _this_point$[ebp], edx

; 924  : 	normal_index = transformed_3d_point_colours[this_point].normal_index;

  0050f	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  00512	0f b6 0c c5 05
	00 00 00	 movzx	 ecx, BYTE PTR ?transformed_3d_point_colours@@3PAUTERRAIN_3D_TRANSFORMED_POINT_COLOUR@@A[eax*8+5]
  0051a	89 4d f8	 mov	 DWORD PTR _normal_index$[ebp], ecx

; 925  : 	y = terrain_3d_map_minimum_height + ( ( ( float ) current_terrain_points_y[this_point].y ) * terrain_3d_map_scaled_height_difference );

  0051d	b8 ff 7f 00 00	 mov	 eax, 32767		; 00007fffH
  00522	8b 4d fc	 mov	 ecx, DWORD PTR _this_point$[ebp]
  00525	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?current_terrain_points_y@@3PAUTERRAIN_3D_POINT_Y@@A ; current_terrain_points_y
  0052b	66 23 04 4a	 and	 ax, WORD PTR [edx+ecx*2]
  0052f	0f b7 c0	 movzx	 eax, ax
  00532	f3 0f 2a c0	 cvtsi2ss xmm0, eax
  00536	f3 0f 59 05 00
	00 00 00	 mulss	 xmm0, DWORD PTR ?terrain_3d_map_scaled_height_difference@@3MA
  0053e	f3 0f 58 05 00
	00 00 00	 addss	 xmm0, DWORD PTR ?terrain_3d_map_minimum_height@@3MA
  00546	f3 0f 11 45 e4	 movss	 DWORD PTR _y$[ebp], xmm0

; 926  : 	u = current_terrain_points_xz[this_point].z * xz_texture_scale;

  0054b	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  0054e	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_terrain_points_xz@@3PAUTERRAIN_3D_POINT_XZ@@A ; current_terrain_points_xz
  00554	0f bf 54 81 02	 movsx	 edx, WORD PTR [ecx+eax*4+2]
  00559	f3 0f 2a c2	 cvtsi2ss xmm0, edx
  0055d	f3 0f 59 45 f4	 mulss	 xmm0, DWORD PTR _xz_texture_scale$[ebp]
  00562	f3 0f 11 45 e0	 movss	 DWORD PTR _u$[ebp], xmm0

; 927  : 	u2 = current_terrain_points_xz[this_point].z * xz_texture_scale2;

  00567	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  0056a	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_terrain_points_xz@@3PAUTERRAIN_3D_POINT_XZ@@A ; current_terrain_points_xz
  00570	0f bf 54 81 02	 movsx	 edx, WORD PTR [ecx+eax*4+2]
  00575	f3 0f 2a c2	 cvtsi2ss xmm0, edx
  00579	f3 0f 59 45 f0	 mulss	 xmm0, DWORD PTR _xz_texture_scale2$[ebp]
  0057e	f3 0f 11 45 dc	 movss	 DWORD PTR _u2$[ebp], xmm0

; 928  : 	v = y * y_texture_scale;

  00583	f3 0f 10 45 e4	 movss	 xmm0, DWORD PTR _y$[ebp]
  00588	f3 0f 59 45 ec	 mulss	 xmm0, DWORD PTR _y_texture_scale$[ebp]
  0058d	f3 0f 11 45 d8	 movss	 DWORD PTR _v$[ebp], xmm0

; 929  : 	v2 = y * y_texture_scale2;

  00592	f3 0f 10 45 e4	 movss	 xmm0, DWORD PTR _y$[ebp]
  00597	f3 0f 59 45 e8	 mulss	 xmm0, DWORD PTR _y_texture_scale2$[ebp]
  0059c	f3 0f 11 45 d4	 movss	 DWORD PTR _v2$[ebp], xmm0

; 930  : 	*( ( int * ) &polygon_3d_vertices[2].x ) = *( ( int * ) &transformed_3d_3d_points[this_point].x );

  005a1	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  005a6	d1 e0		 shl	 eax, 1
  005a8	8b 4d fc	 mov	 ecx, DWORD PTR _this_point$[ebp]
  005ab	8b 14 cd 00 00
	00 00		 mov	 edx, DWORD PTR ?transformed_3d_3d_points@@3PAUOBJECT_TRANSFORMED_3D_POINT@@A[ecx*8]
  005b2	89 90 00 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax], edx

; 931  : 	*( ( int * ) &polygon_3d_vertices[2].y ) = *( ( int * ) &transformed_3d_3d_points[this_point].y );

  005b8	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  005bd	d1 e0		 shl	 eax, 1
  005bf	8b 4d fc	 mov	 ecx, DWORD PTR _this_point$[ebp]
  005c2	8b 14 cd 04 00
	00 00		 mov	 edx, DWORD PTR ?transformed_3d_3d_points@@3PAUOBJECT_TRANSFORMED_3D_POINT@@A[ecx*8+4]
  005c9	89 90 04 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+4], edx

; 932  : 	*( ( int * ) &polygon_3d_vertices[2].z ) = *( ( int * ) &transformed_3d_2d_points[this_point].z );

  005cf	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  005d2	c1 e0 04	 shl	 eax, 4
  005d5	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  005da	d1 e1		 shl	 ecx, 1
  005dc	8b 90 0c 00 00
	00		 mov	 edx, DWORD PTR ?transformed_3d_2d_points@@3PAUOBJECT_TRANSFORMED_2D_POINT@@A[eax+12]
  005e2	89 91 08 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+8], edx

; 933  : 	*( ( int * ) &polygon_3d_vertices[2].i ) = *( ( int * ) &transformed_3d_2d_points[this_point].i );

  005e8	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  005eb	c1 e0 04	 shl	 eax, 4
  005ee	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  005f3	d1 e1		 shl	 ecx, 1
  005f5	8b 90 00 00 00
	00		 mov	 edx, DWORD PTR ?transformed_3d_2d_points@@3PAUOBJECT_TRANSFORMED_2D_POINT@@A[eax]
  005fb	89 91 10 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+16], edx

; 934  : 	*( ( int * ) &polygon_3d_vertices[2].j ) = *( ( int * ) &transformed_3d_2d_points[this_point].j );

  00601	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  00604	c1 e0 04	 shl	 eax, 4
  00607	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  0060c	d1 e1		 shl	 ecx, 1
  0060e	8b 90 04 00 00
	00		 mov	 edx, DWORD PTR ?transformed_3d_2d_points@@3PAUOBJECT_TRANSFORMED_2D_POINT@@A[eax+4]
  00614	89 91 14 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+20], edx

; 935  : 	*( ( int * ) &polygon_3d_vertices[2].q ) = *( ( int * ) &transformed_3d_2d_points[this_point].q );

  0061a	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  0061d	c1 e0 04	 shl	 eax, 4
  00620	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  00625	d1 e1		 shl	 ecx, 1
  00627	8b 90 08 00 00
	00		 mov	 edx, DWORD PTR ?transformed_3d_2d_points@@3PAUOBJECT_TRANSFORMED_2D_POINT@@A[eax+8]
  0062d	89 91 0c 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+12], edx

; 936  : 	polygon_3d_vertices[2].outcode = transformed_3d_point_outcodes[this_point];

  00633	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  00638	d1 e0		 shl	 eax, 1
  0063a	8b 4d fc	 mov	 ecx, DWORD PTR _this_point$[ebp]
  0063d	8a 91 00 00 00
	00		 mov	 dl, BYTE PTR ?transformed_3d_point_outcodes@@3PAEA[ecx]
  00643	88 90 2c 00 00
	00		 mov	 BYTE PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+44], dl

; 937  : 	polygon_3d_vertices[2].colour = transformed_3d_point_colours[this_point].colour;

  00649	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  0064e	d1 e0		 shl	 eax, 1
  00650	8b 4d fc	 mov	 ecx, DWORD PTR _this_point$[ebp]
  00653	8b 14 cd 00 00
	00 00		 mov	 edx, DWORD PTR ?transformed_3d_point_colours@@3PAUTERRAIN_3D_TRANSFORMED_POINT_COLOUR@@A[ecx*8]
  0065a	89 90 30 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+48], edx

; 938  : 	polygon_3d_vertices[2].fog = transformed_3d_point_colours[this_point].fog;

  00660	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  00665	d1 e0		 shl	 eax, 1
  00667	8b 4d fc	 mov	 ecx, DWORD PTR _this_point$[ebp]
  0066a	8a 14 cd 04 00
	00 00		 mov	 dl, BYTE PTR ?transformed_3d_point_colours@@3PAUTERRAIN_3D_TRANSFORMED_POINT_COLOUR@@A[ecx*8+4]
  00671	88 90 2e 00 00
	00		 mov	 BYTE PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+46], dl

; 939  : 	polygon_3d_vertices[2].red2 = terrain_3d_transformed_point_normals[normal_index].colour.red;

  00677	8b 45 f8	 mov	 eax, DWORD PTR _normal_index$[ebp]
  0067a	c1 e0 04	 shl	 eax, 4
  0067d	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  00682	d1 e1		 shl	 ecx, 1
  00684	8a 90 0e 00 00
	00		 mov	 dl, BYTE PTR ?terrain_3d_transformed_point_normals@@3PAUTERRAIN_3D_TRANSFORMED_POINT_NORMAL@@A[eax+14]
  0068a	88 91 36 00 00
	00		 mov	 BYTE PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+54], dl

; 940  : 	polygon_3d_vertices[2].green2 = terrain_3d_transformed_point_normals[normal_index].colour.green;

  00690	8b 45 f8	 mov	 eax, DWORD PTR _normal_index$[ebp]
  00693	c1 e0 04	 shl	 eax, 4
  00696	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  0069b	d1 e1		 shl	 ecx, 1
  0069d	8a 90 0d 00 00
	00		 mov	 dl, BYTE PTR ?terrain_3d_transformed_point_normals@@3PAUTERRAIN_3D_TRANSFORMED_POINT_NORMAL@@A[eax+13]
  006a3	88 91 35 00 00
	00		 mov	 BYTE PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+53], dl

; 941  : 	polygon_3d_vertices[2].blue2 = terrain_3d_transformed_point_normals[normal_index].colour.blue;

  006a9	8b 45 f8	 mov	 eax, DWORD PTR _normal_index$[ebp]
  006ac	c1 e0 04	 shl	 eax, 4
  006af	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  006b4	d1 e1		 shl	 ecx, 1
  006b6	8a 90 0c 00 00
	00		 mov	 dl, BYTE PTR ?terrain_3d_transformed_point_normals@@3PAUTERRAIN_3D_TRANSFORMED_POINT_NORMAL@@A[eax+12]
  006bc	88 91 34 00 00
	00		 mov	 BYTE PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+52], dl

; 942  : 	polygon_3d_vertices[2].alpha2 = transformed_3d_point_colours[this_point].alpha;

  006c2	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  006c7	d1 e0		 shl	 eax, 1
  006c9	8b 4d fc	 mov	 ecx, DWORD PTR _this_point$[ebp]
  006cc	8a 14 cd 03 00
	00 00		 mov	 dl, BYTE PTR ?transformed_3d_point_colours@@3PAUTERRAIN_3D_TRANSFORMED_POINT_COLOUR@@A[ecx*8+3]
  006d3	88 90 37 00 00
	00		 mov	 BYTE PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+55], dl

; 943  : 	polygon_3d_vertices[2].u = u;

  006d9	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  006de	d1 e0		 shl	 eax, 1
  006e0	f3 0f 10 45 e0	 movss	 xmm0, DWORD PTR _u$[ebp]
  006e5	f3 0f 11 80 18
	00 00 00	 movss	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+24], xmm0

; 944  : 	polygon_3d_vertices[2].v = v;

  006ed	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  006f2	d1 e0		 shl	 eax, 1
  006f4	f3 0f 10 45 d8	 movss	 xmm0, DWORD PTR _v$[ebp]
  006f9	f3 0f 11 80 1c
	00 00 00	 movss	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+28], xmm0

; 945  : 	polygon_3d_vertices[2].u2 = u2;

  00701	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  00706	d1 e0		 shl	 eax, 1
  00708	f3 0f 10 45 dc	 movss	 xmm0, DWORD PTR _u2$[ebp]
  0070d	f3 0f 11 80 20
	00 00 00	 movss	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+32], xmm0

; 946  : 	polygon_3d_vertices[2].v2 = v2;

  00715	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  0071a	d1 e0		 shl	 eax, 1
  0071c	f3 0f 10 45 d4	 movss	 xmm0, DWORD PTR _v2$[ebp]
  00721	f3 0f 11 80 24
	00 00 00	 movss	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+36], xmm0

; 947  : 	polygon_3d_vertices[2].next_vertex = NULL;

  00729	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  0072e	d1 e0		 shl	 eax, 1
  00730	c7 80 28 00 00
	00 00 00 00 00	 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+40], 0

; 948  : 
; 949  : 	return ( polygon_3d_vertices );

  0073a	b8 00 00 00 00	 mov	 eax, OFFSET ?polygon_3d_vertices@@3PAUVERTEX@@A ; polygon_3d_vertices

; 950  : }

  0073f	5f		 pop	 edi
  00740	5e		 pop	 esi
  00741	5b		 pop	 ebx
  00742	8b e5		 mov	 esp, ebp
  00744	5d		 pop	 ebp
  00745	c2 04 00	 ret	 4
?construct_3d_terrain_dual_texture_zy_triangle@@YGPAUVERTEX@@PAH@Z ENDP ; construct_3d_terrain_dual_texture_zy_triangle
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\modules\3d\terrain\terrcons.c
;	COMDAT ?construct_3d_terrain_dual_texture_xy_triangle@@YGPAUVERTEX@@PAH@Z
_TEXT	SEGMENT
_v2$ = -44						; size = 4
_v$ = -40						; size = 4
_u2$ = -36						; size = 4
_u$ = -32						; size = 4
_y$ = -28						; size = 4
_y_texture_scale2$ = -24				; size = 4
_y_texture_scale$ = -20					; size = 4
_xz_texture_scale2$ = -16				; size = 4
_xz_texture_scale$ = -12				; size = 4
_normal_index$ = -8					; size = 4
_this_point$ = -4					; size = 4
_reference_points$ = 8					; size = 4
?construct_3d_terrain_dual_texture_xy_triangle@@YGPAUVERTEX@@PAH@Z PROC ; construct_3d_terrain_dual_texture_xy_triangle, COMDAT

; 736  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 6c	 sub	 esp, 108		; 0000006cH
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 737  : 
; 738  : 	int
; 739  : 		this_point,
; 740  : 		normal_index;
; 741  : 
; 742  : 	float
; 743  : 		xz_texture_scale,
; 744  : 		xz_texture_scale2,
; 745  : 		y_texture_scale,
; 746  : 		y_texture_scale2,
; 747  : 		y,
; 748  : 		u,
; 749  : 		u2,
; 750  : 		v,
; 751  : 		v2;
; 752  : 
; 753  : 	terrain_3d_faces_constructed++;

  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ?terrain_3d_faces_constructed@@3HA ; terrain_3d_faces_constructed
  0000e	83 c0 01	 add	 eax, 1
  00011	a3 00 00 00 00	 mov	 DWORD PTR ?terrain_3d_faces_constructed@@3HA, eax ; terrain_3d_faces_constructed

; 754  : 
; 755  : 	xz_texture_scale = current_terrain_type_class->xz_texture_scale;

  00016	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_terrain_type_class@@3PAUTERRAIN_TYPE_INFO@@A ; current_terrain_type_class
  0001b	f3 0f 10 40 10	 movss	 xmm0, DWORD PTR [eax+16]
  00020	f3 0f 11 45 f4	 movss	 DWORD PTR _xz_texture_scale$[ebp], xmm0

; 756  : 	xz_texture_scale2 = current_terrain_type_class->xz_texture_scale2;

  00025	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_terrain_type_class@@3PAUTERRAIN_TYPE_INFO@@A ; current_terrain_type_class
  0002a	f3 0f 10 40 18	 movss	 xmm0, DWORD PTR [eax+24]
  0002f	f3 0f 11 45 f0	 movss	 DWORD PTR _xz_texture_scale2$[ebp], xmm0

; 757  : 	y_texture_scale = current_terrain_type_class->y_texture_scale;

  00034	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_terrain_type_class@@3PAUTERRAIN_TYPE_INFO@@A ; current_terrain_type_class
  00039	f3 0f 10 40 14	 movss	 xmm0, DWORD PTR [eax+20]
  0003e	f3 0f 11 45 ec	 movss	 DWORD PTR _y_texture_scale$[ebp], xmm0

; 758  : 	y_texture_scale2 = current_terrain_type_class->y_texture_scale2;

  00043	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_terrain_type_class@@3PAUTERRAIN_TYPE_INFO@@A ; current_terrain_type_class
  00048	f3 0f 10 40 1c	 movss	 xmm0, DWORD PTR [eax+28]
  0004d	f3 0f 11 45 e8	 movss	 DWORD PTR _y_texture_scale2$[ebp], xmm0

; 759  : 
; 760  : 	this_point = reference_points[0];

  00052	b8 04 00 00 00	 mov	 eax, 4
  00057	6b c8 00	 imul	 ecx, eax, 0
  0005a	8b 55 08	 mov	 edx, DWORD PTR _reference_points$[ebp]
  0005d	8b 04 0a	 mov	 eax, DWORD PTR [edx+ecx]
  00060	89 45 fc	 mov	 DWORD PTR _this_point$[ebp], eax

; 761  : 	normal_index = transformed_3d_point_colours[this_point].normal_index;

  00063	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  00066	0f b6 0c c5 05
	00 00 00	 movzx	 ecx, BYTE PTR ?transformed_3d_point_colours@@3PAUTERRAIN_3D_TRANSFORMED_POINT_COLOUR@@A[eax*8+5]
  0006e	89 4d f8	 mov	 DWORD PTR _normal_index$[ebp], ecx

; 762  : 	y = terrain_3d_map_minimum_height + ( ( ( float ) current_terrain_points_y[this_point].y ) * terrain_3d_map_scaled_height_difference );

  00071	b8 ff 7f 00 00	 mov	 eax, 32767		; 00007fffH
  00076	8b 4d fc	 mov	 ecx, DWORD PTR _this_point$[ebp]
  00079	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?current_terrain_points_y@@3PAUTERRAIN_3D_POINT_Y@@A ; current_terrain_points_y
  0007f	66 23 04 4a	 and	 ax, WORD PTR [edx+ecx*2]
  00083	0f b7 c0	 movzx	 eax, ax
  00086	f3 0f 2a c0	 cvtsi2ss xmm0, eax
  0008a	f3 0f 59 05 00
	00 00 00	 mulss	 xmm0, DWORD PTR ?terrain_3d_map_scaled_height_difference@@3MA
  00092	f3 0f 58 05 00
	00 00 00	 addss	 xmm0, DWORD PTR ?terrain_3d_map_minimum_height@@3MA
  0009a	f3 0f 11 45 e4	 movss	 DWORD PTR _y$[ebp], xmm0

; 763  : 	u = current_terrain_points_xz[this_point].x * xz_texture_scale;

  0009f	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  000a2	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_terrain_points_xz@@3PAUTERRAIN_3D_POINT_XZ@@A ; current_terrain_points_xz
  000a8	0f bf 14 81	 movsx	 edx, WORD PTR [ecx+eax*4]
  000ac	f3 0f 2a c2	 cvtsi2ss xmm0, edx
  000b0	f3 0f 59 45 f4	 mulss	 xmm0, DWORD PTR _xz_texture_scale$[ebp]
  000b5	f3 0f 11 45 e0	 movss	 DWORD PTR _u$[ebp], xmm0

; 764  : 	u2 = current_terrain_points_xz[this_point].x * xz_texture_scale2;

  000ba	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  000bd	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_terrain_points_xz@@3PAUTERRAIN_3D_POINT_XZ@@A ; current_terrain_points_xz
  000c3	0f bf 14 81	 movsx	 edx, WORD PTR [ecx+eax*4]
  000c7	f3 0f 2a c2	 cvtsi2ss xmm0, edx
  000cb	f3 0f 59 45 f0	 mulss	 xmm0, DWORD PTR _xz_texture_scale2$[ebp]
  000d0	f3 0f 11 45 dc	 movss	 DWORD PTR _u2$[ebp], xmm0

; 765  : 	v = y * y_texture_scale;

  000d5	f3 0f 10 45 e4	 movss	 xmm0, DWORD PTR _y$[ebp]
  000da	f3 0f 59 45 ec	 mulss	 xmm0, DWORD PTR _y_texture_scale$[ebp]
  000df	f3 0f 11 45 d8	 movss	 DWORD PTR _v$[ebp], xmm0

; 766  : 	v2 = y * y_texture_scale2;

  000e4	f3 0f 10 45 e4	 movss	 xmm0, DWORD PTR _y$[ebp]
  000e9	f3 0f 59 45 e8	 mulss	 xmm0, DWORD PTR _y_texture_scale2$[ebp]
  000ee	f3 0f 11 45 d4	 movss	 DWORD PTR _v2$[ebp], xmm0

; 767  : 	*( ( int * ) &polygon_3d_vertices[0].x ) = *( ( int * ) &transformed_3d_3d_points[this_point].x );

  000f3	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  000f8	6b c8 00	 imul	 ecx, eax, 0
  000fb	8b 55 fc	 mov	 edx, DWORD PTR _this_point$[ebp]
  000fe	8b 04 d5 00 00
	00 00		 mov	 eax, DWORD PTR ?transformed_3d_3d_points@@3PAUOBJECT_TRANSFORMED_3D_POINT@@A[edx*8]
  00105	89 81 00 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx], eax

; 768  : 	*( ( int * ) &polygon_3d_vertices[0].y ) = *( ( int * ) &transformed_3d_3d_points[this_point].y );

  0010b	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  00110	6b c8 00	 imul	 ecx, eax, 0
  00113	8b 55 fc	 mov	 edx, DWORD PTR _this_point$[ebp]
  00116	8b 04 d5 04 00
	00 00		 mov	 eax, DWORD PTR ?transformed_3d_3d_points@@3PAUOBJECT_TRANSFORMED_3D_POINT@@A[edx*8+4]
  0011d	89 81 04 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+4], eax

; 769  : 	*( ( int * ) &polygon_3d_vertices[0].z ) = *( ( int * ) &transformed_3d_2d_points[this_point].z );

  00123	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  00126	c1 e0 04	 shl	 eax, 4
  00129	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  0012e	6b d1 00	 imul	 edx, ecx, 0
  00131	8b 80 0c 00 00
	00		 mov	 eax, DWORD PTR ?transformed_3d_2d_points@@3PAUOBJECT_TRANSFORMED_2D_POINT@@A[eax+12]
  00137	89 82 08 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[edx+8], eax

; 770  : 	*( ( int * ) &polygon_3d_vertices[0].i ) = *( ( int * ) &transformed_3d_2d_points[this_point].i );

  0013d	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  00140	c1 e0 04	 shl	 eax, 4
  00143	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  00148	6b d1 00	 imul	 edx, ecx, 0
  0014b	8b 80 00 00 00
	00		 mov	 eax, DWORD PTR ?transformed_3d_2d_points@@3PAUOBJECT_TRANSFORMED_2D_POINT@@A[eax]
  00151	89 82 10 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[edx+16], eax

; 771  : 	*( ( int * ) &polygon_3d_vertices[0].j ) = *( ( int * ) &transformed_3d_2d_points[this_point].j );

  00157	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  0015a	c1 e0 04	 shl	 eax, 4
  0015d	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  00162	6b d1 00	 imul	 edx, ecx, 0
  00165	8b 80 04 00 00
	00		 mov	 eax, DWORD PTR ?transformed_3d_2d_points@@3PAUOBJECT_TRANSFORMED_2D_POINT@@A[eax+4]
  0016b	89 82 14 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[edx+20], eax

; 772  : 	*( ( int * ) &polygon_3d_vertices[0].q ) = *( ( int * ) &transformed_3d_2d_points[this_point].q );

  00171	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  00174	c1 e0 04	 shl	 eax, 4
  00177	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  0017c	6b d1 00	 imul	 edx, ecx, 0
  0017f	8b 80 08 00 00
	00		 mov	 eax, DWORD PTR ?transformed_3d_2d_points@@3PAUOBJECT_TRANSFORMED_2D_POINT@@A[eax+8]
  00185	89 82 0c 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[edx+12], eax

; 773  : 	polygon_3d_vertices[0].outcode = transformed_3d_point_outcodes[this_point];

  0018b	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  00190	6b c8 00	 imul	 ecx, eax, 0
  00193	8b 55 fc	 mov	 edx, DWORD PTR _this_point$[ebp]
  00196	8a 82 00 00 00
	00		 mov	 al, BYTE PTR ?transformed_3d_point_outcodes@@3PAEA[edx]
  0019c	88 81 2c 00 00
	00		 mov	 BYTE PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+44], al

; 774  : 	polygon_3d_vertices[0].colour = transformed_3d_point_colours[this_point].colour;

  001a2	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  001a7	6b c8 00	 imul	 ecx, eax, 0
  001aa	8b 55 fc	 mov	 edx, DWORD PTR _this_point$[ebp]
  001ad	8b 04 d5 00 00
	00 00		 mov	 eax, DWORD PTR ?transformed_3d_point_colours@@3PAUTERRAIN_3D_TRANSFORMED_POINT_COLOUR@@A[edx*8]
  001b4	89 81 30 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+48], eax

; 775  : 	polygon_3d_vertices[0].fog = transformed_3d_point_colours[this_point].fog;

  001ba	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  001bf	6b c8 00	 imul	 ecx, eax, 0
  001c2	8b 55 fc	 mov	 edx, DWORD PTR _this_point$[ebp]
  001c5	8a 04 d5 04 00
	00 00		 mov	 al, BYTE PTR ?transformed_3d_point_colours@@3PAUTERRAIN_3D_TRANSFORMED_POINT_COLOUR@@A[edx*8+4]
  001cc	88 81 2e 00 00
	00		 mov	 BYTE PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+46], al

; 776  : 	polygon_3d_vertices[0].red2 = terrain_3d_transformed_point_normals[normal_index].colour.red;

  001d2	8b 45 f8	 mov	 eax, DWORD PTR _normal_index$[ebp]
  001d5	c1 e0 04	 shl	 eax, 4
  001d8	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  001dd	6b d1 00	 imul	 edx, ecx, 0
  001e0	8a 80 0e 00 00
	00		 mov	 al, BYTE PTR ?terrain_3d_transformed_point_normals@@3PAUTERRAIN_3D_TRANSFORMED_POINT_NORMAL@@A[eax+14]
  001e6	88 82 36 00 00
	00		 mov	 BYTE PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[edx+54], al

; 777  : 	polygon_3d_vertices[0].green2 = terrain_3d_transformed_point_normals[normal_index].colour.green;

  001ec	8b 45 f8	 mov	 eax, DWORD PTR _normal_index$[ebp]
  001ef	c1 e0 04	 shl	 eax, 4
  001f2	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  001f7	6b d1 00	 imul	 edx, ecx, 0
  001fa	8a 80 0d 00 00
	00		 mov	 al, BYTE PTR ?terrain_3d_transformed_point_normals@@3PAUTERRAIN_3D_TRANSFORMED_POINT_NORMAL@@A[eax+13]
  00200	88 82 35 00 00
	00		 mov	 BYTE PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[edx+53], al

; 778  : 	polygon_3d_vertices[0].blue2 = terrain_3d_transformed_point_normals[normal_index].colour.blue;

  00206	8b 45 f8	 mov	 eax, DWORD PTR _normal_index$[ebp]
  00209	c1 e0 04	 shl	 eax, 4
  0020c	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  00211	6b d1 00	 imul	 edx, ecx, 0
  00214	8a 80 0c 00 00
	00		 mov	 al, BYTE PTR ?terrain_3d_transformed_point_normals@@3PAUTERRAIN_3D_TRANSFORMED_POINT_NORMAL@@A[eax+12]
  0021a	88 82 34 00 00
	00		 mov	 BYTE PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[edx+52], al

; 779  : 	polygon_3d_vertices[0].alpha2 = transformed_3d_point_colours[this_point].alpha;

  00220	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  00225	6b c8 00	 imul	 ecx, eax, 0
  00228	8b 55 fc	 mov	 edx, DWORD PTR _this_point$[ebp]
  0022b	8a 04 d5 03 00
	00 00		 mov	 al, BYTE PTR ?transformed_3d_point_colours@@3PAUTERRAIN_3D_TRANSFORMED_POINT_COLOUR@@A[edx*8+3]
  00232	88 81 37 00 00
	00		 mov	 BYTE PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+55], al

; 780  : 	polygon_3d_vertices[0].u = u;

  00238	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  0023d	6b c8 00	 imul	 ecx, eax, 0
  00240	f3 0f 10 45 e0	 movss	 xmm0, DWORD PTR _u$[ebp]
  00245	f3 0f 11 81 18
	00 00 00	 movss	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+24], xmm0

; 781  : 	polygon_3d_vertices[0].v = v;

  0024d	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  00252	6b c8 00	 imul	 ecx, eax, 0
  00255	f3 0f 10 45 d8	 movss	 xmm0, DWORD PTR _v$[ebp]
  0025a	f3 0f 11 81 1c
	00 00 00	 movss	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+28], xmm0

; 782  : 	polygon_3d_vertices[0].u2 = u2;

  00262	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  00267	6b c8 00	 imul	 ecx, eax, 0
  0026a	f3 0f 10 45 dc	 movss	 xmm0, DWORD PTR _u2$[ebp]
  0026f	f3 0f 11 81 20
	00 00 00	 movss	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+32], xmm0

; 783  : 	polygon_3d_vertices[0].v2 = v2;

  00277	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  0027c	6b c8 00	 imul	 ecx, eax, 0
  0027f	f3 0f 10 45 d4	 movss	 xmm0, DWORD PTR _v2$[ebp]
  00284	f3 0f 11 81 24
	00 00 00	 movss	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+36], xmm0

; 784  : 	polygon_3d_vertices[0].next_vertex = &polygon_3d_vertices[1];

  0028c	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  00291	c1 e0 00	 shl	 eax, 0
  00294	05 00 00 00 00	 add	 eax, OFFSET ?polygon_3d_vertices@@3PAUVERTEX@@A ; polygon_3d_vertices
  00299	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  0029e	6b d1 00	 imul	 edx, ecx, 0
  002a1	89 82 28 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[edx+40], eax

; 785  : 
; 786  : 	this_point = reference_points[1];

  002a7	b8 04 00 00 00	 mov	 eax, 4
  002ac	c1 e0 00	 shl	 eax, 0
  002af	8b 4d 08	 mov	 ecx, DWORD PTR _reference_points$[ebp]
  002b2	8b 14 01	 mov	 edx, DWORD PTR [ecx+eax]
  002b5	89 55 fc	 mov	 DWORD PTR _this_point$[ebp], edx

; 787  : 	normal_index = transformed_3d_point_colours[this_point].normal_index;

  002b8	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  002bb	0f b6 0c c5 05
	00 00 00	 movzx	 ecx, BYTE PTR ?transformed_3d_point_colours@@3PAUTERRAIN_3D_TRANSFORMED_POINT_COLOUR@@A[eax*8+5]
  002c3	89 4d f8	 mov	 DWORD PTR _normal_index$[ebp], ecx

; 788  : 	y = terrain_3d_map_minimum_height + ( ( ( float ) current_terrain_points_y[this_point].y ) * terrain_3d_map_scaled_height_difference );

  002c6	b8 ff 7f 00 00	 mov	 eax, 32767		; 00007fffH
  002cb	8b 4d fc	 mov	 ecx, DWORD PTR _this_point$[ebp]
  002ce	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?current_terrain_points_y@@3PAUTERRAIN_3D_POINT_Y@@A ; current_terrain_points_y
  002d4	66 23 04 4a	 and	 ax, WORD PTR [edx+ecx*2]
  002d8	0f b7 c0	 movzx	 eax, ax
  002db	f3 0f 2a c0	 cvtsi2ss xmm0, eax
  002df	f3 0f 59 05 00
	00 00 00	 mulss	 xmm0, DWORD PTR ?terrain_3d_map_scaled_height_difference@@3MA
  002e7	f3 0f 58 05 00
	00 00 00	 addss	 xmm0, DWORD PTR ?terrain_3d_map_minimum_height@@3MA
  002ef	f3 0f 11 45 e4	 movss	 DWORD PTR _y$[ebp], xmm0

; 789  : 	u = current_terrain_points_xz[this_point].x * xz_texture_scale;

  002f4	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  002f7	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_terrain_points_xz@@3PAUTERRAIN_3D_POINT_XZ@@A ; current_terrain_points_xz
  002fd	0f bf 14 81	 movsx	 edx, WORD PTR [ecx+eax*4]
  00301	f3 0f 2a c2	 cvtsi2ss xmm0, edx
  00305	f3 0f 59 45 f4	 mulss	 xmm0, DWORD PTR _xz_texture_scale$[ebp]
  0030a	f3 0f 11 45 e0	 movss	 DWORD PTR _u$[ebp], xmm0

; 790  : 	u2 = current_terrain_points_xz[this_point].x * xz_texture_scale2;

  0030f	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  00312	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_terrain_points_xz@@3PAUTERRAIN_3D_POINT_XZ@@A ; current_terrain_points_xz
  00318	0f bf 14 81	 movsx	 edx, WORD PTR [ecx+eax*4]
  0031c	f3 0f 2a c2	 cvtsi2ss xmm0, edx
  00320	f3 0f 59 45 f0	 mulss	 xmm0, DWORD PTR _xz_texture_scale2$[ebp]
  00325	f3 0f 11 45 dc	 movss	 DWORD PTR _u2$[ebp], xmm0

; 791  : 	v = y * y_texture_scale;

  0032a	f3 0f 10 45 e4	 movss	 xmm0, DWORD PTR _y$[ebp]
  0032f	f3 0f 59 45 ec	 mulss	 xmm0, DWORD PTR _y_texture_scale$[ebp]
  00334	f3 0f 11 45 d8	 movss	 DWORD PTR _v$[ebp], xmm0

; 792  : 	v2 = y * y_texture_scale2;

  00339	f3 0f 10 45 e4	 movss	 xmm0, DWORD PTR _y$[ebp]
  0033e	f3 0f 59 45 e8	 mulss	 xmm0, DWORD PTR _y_texture_scale2$[ebp]
  00343	f3 0f 11 45 d4	 movss	 DWORD PTR _v2$[ebp], xmm0

; 793  : 	*( ( int * ) &polygon_3d_vertices[1].x ) = *( ( int * ) &transformed_3d_3d_points[this_point].x );

  00348	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  0034d	c1 e0 00	 shl	 eax, 0
  00350	8b 4d fc	 mov	 ecx, DWORD PTR _this_point$[ebp]
  00353	8b 14 cd 00 00
	00 00		 mov	 edx, DWORD PTR ?transformed_3d_3d_points@@3PAUOBJECT_TRANSFORMED_3D_POINT@@A[ecx*8]
  0035a	89 90 00 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax], edx

; 794  : 	*( ( int * ) &polygon_3d_vertices[1].y ) = *( ( int * ) &transformed_3d_3d_points[this_point].y );

  00360	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  00365	c1 e0 00	 shl	 eax, 0
  00368	8b 4d fc	 mov	 ecx, DWORD PTR _this_point$[ebp]
  0036b	8b 14 cd 04 00
	00 00		 mov	 edx, DWORD PTR ?transformed_3d_3d_points@@3PAUOBJECT_TRANSFORMED_3D_POINT@@A[ecx*8+4]
  00372	89 90 04 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+4], edx

; 795  : 	*( ( int * ) &polygon_3d_vertices[1].z ) = *( ( int * ) &transformed_3d_2d_points[this_point].z );

  00378	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  0037b	c1 e0 04	 shl	 eax, 4
  0037e	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  00383	c1 e1 00	 shl	 ecx, 0
  00386	8b 90 0c 00 00
	00		 mov	 edx, DWORD PTR ?transformed_3d_2d_points@@3PAUOBJECT_TRANSFORMED_2D_POINT@@A[eax+12]
  0038c	89 91 08 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+8], edx

; 796  : 	*( ( int * ) &polygon_3d_vertices[1].i ) = *( ( int * ) &transformed_3d_2d_points[this_point].i );

  00392	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  00395	c1 e0 04	 shl	 eax, 4
  00398	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  0039d	c1 e1 00	 shl	 ecx, 0
  003a0	8b 90 00 00 00
	00		 mov	 edx, DWORD PTR ?transformed_3d_2d_points@@3PAUOBJECT_TRANSFORMED_2D_POINT@@A[eax]
  003a6	89 91 10 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+16], edx

; 797  : 	*( ( int * ) &polygon_3d_vertices[1].j ) = *( ( int * ) &transformed_3d_2d_points[this_point].j );

  003ac	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  003af	c1 e0 04	 shl	 eax, 4
  003b2	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  003b7	c1 e1 00	 shl	 ecx, 0
  003ba	8b 90 04 00 00
	00		 mov	 edx, DWORD PTR ?transformed_3d_2d_points@@3PAUOBJECT_TRANSFORMED_2D_POINT@@A[eax+4]
  003c0	89 91 14 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+20], edx

; 798  : 	*( ( int * ) &polygon_3d_vertices[1].q ) = *( ( int * ) &transformed_3d_2d_points[this_point].q );

  003c6	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  003c9	c1 e0 04	 shl	 eax, 4
  003cc	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  003d1	c1 e1 00	 shl	 ecx, 0
  003d4	8b 90 08 00 00
	00		 mov	 edx, DWORD PTR ?transformed_3d_2d_points@@3PAUOBJECT_TRANSFORMED_2D_POINT@@A[eax+8]
  003da	89 91 0c 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+12], edx

; 799  : 	polygon_3d_vertices[1].outcode = transformed_3d_point_outcodes[this_point];

  003e0	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  003e5	c1 e0 00	 shl	 eax, 0
  003e8	8b 4d fc	 mov	 ecx, DWORD PTR _this_point$[ebp]
  003eb	8a 91 00 00 00
	00		 mov	 dl, BYTE PTR ?transformed_3d_point_outcodes@@3PAEA[ecx]
  003f1	88 90 2c 00 00
	00		 mov	 BYTE PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+44], dl

; 800  : 	polygon_3d_vertices[1].colour = transformed_3d_point_colours[this_point].colour;

  003f7	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  003fc	c1 e0 00	 shl	 eax, 0
  003ff	8b 4d fc	 mov	 ecx, DWORD PTR _this_point$[ebp]
  00402	8b 14 cd 00 00
	00 00		 mov	 edx, DWORD PTR ?transformed_3d_point_colours@@3PAUTERRAIN_3D_TRANSFORMED_POINT_COLOUR@@A[ecx*8]
  00409	89 90 30 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+48], edx

; 801  : 	polygon_3d_vertices[1].fog = transformed_3d_point_colours[this_point].fog;

  0040f	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  00414	c1 e0 00	 shl	 eax, 0
  00417	8b 4d fc	 mov	 ecx, DWORD PTR _this_point$[ebp]
  0041a	8a 14 cd 04 00
	00 00		 mov	 dl, BYTE PTR ?transformed_3d_point_colours@@3PAUTERRAIN_3D_TRANSFORMED_POINT_COLOUR@@A[ecx*8+4]
  00421	88 90 2e 00 00
	00		 mov	 BYTE PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+46], dl

; 802  : 	polygon_3d_vertices[1].red2 = terrain_3d_transformed_point_normals[normal_index].colour.red;

  00427	8b 45 f8	 mov	 eax, DWORD PTR _normal_index$[ebp]
  0042a	c1 e0 04	 shl	 eax, 4
  0042d	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  00432	c1 e1 00	 shl	 ecx, 0
  00435	8a 90 0e 00 00
	00		 mov	 dl, BYTE PTR ?terrain_3d_transformed_point_normals@@3PAUTERRAIN_3D_TRANSFORMED_POINT_NORMAL@@A[eax+14]
  0043b	88 91 36 00 00
	00		 mov	 BYTE PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+54], dl

; 803  : 	polygon_3d_vertices[1].green2 = terrain_3d_transformed_point_normals[normal_index].colour.green;

  00441	8b 45 f8	 mov	 eax, DWORD PTR _normal_index$[ebp]
  00444	c1 e0 04	 shl	 eax, 4
  00447	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  0044c	c1 e1 00	 shl	 ecx, 0
  0044f	8a 90 0d 00 00
	00		 mov	 dl, BYTE PTR ?terrain_3d_transformed_point_normals@@3PAUTERRAIN_3D_TRANSFORMED_POINT_NORMAL@@A[eax+13]
  00455	88 91 35 00 00
	00		 mov	 BYTE PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+53], dl

; 804  : 	polygon_3d_vertices[1].blue2 = terrain_3d_transformed_point_normals[normal_index].colour.blue;

  0045b	8b 45 f8	 mov	 eax, DWORD PTR _normal_index$[ebp]
  0045e	c1 e0 04	 shl	 eax, 4
  00461	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  00466	c1 e1 00	 shl	 ecx, 0
  00469	8a 90 0c 00 00
	00		 mov	 dl, BYTE PTR ?terrain_3d_transformed_point_normals@@3PAUTERRAIN_3D_TRANSFORMED_POINT_NORMAL@@A[eax+12]
  0046f	88 91 34 00 00
	00		 mov	 BYTE PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+52], dl

; 805  : 	polygon_3d_vertices[1].alpha2 = transformed_3d_point_colours[this_point].alpha;

  00475	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  0047a	c1 e0 00	 shl	 eax, 0
  0047d	8b 4d fc	 mov	 ecx, DWORD PTR _this_point$[ebp]
  00480	8a 14 cd 03 00
	00 00		 mov	 dl, BYTE PTR ?transformed_3d_point_colours@@3PAUTERRAIN_3D_TRANSFORMED_POINT_COLOUR@@A[ecx*8+3]
  00487	88 90 37 00 00
	00		 mov	 BYTE PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+55], dl

; 806  : 	polygon_3d_vertices[1].u = u;

  0048d	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  00492	c1 e0 00	 shl	 eax, 0
  00495	f3 0f 10 45 e0	 movss	 xmm0, DWORD PTR _u$[ebp]
  0049a	f3 0f 11 80 18
	00 00 00	 movss	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+24], xmm0

; 807  : 	polygon_3d_vertices[1].v = v;

  004a2	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  004a7	c1 e0 00	 shl	 eax, 0
  004aa	f3 0f 10 45 d8	 movss	 xmm0, DWORD PTR _v$[ebp]
  004af	f3 0f 11 80 1c
	00 00 00	 movss	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+28], xmm0

; 808  : 	polygon_3d_vertices[1].u2 = u2;

  004b7	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  004bc	c1 e0 00	 shl	 eax, 0
  004bf	f3 0f 10 45 dc	 movss	 xmm0, DWORD PTR _u2$[ebp]
  004c4	f3 0f 11 80 20
	00 00 00	 movss	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+32], xmm0

; 809  : 	polygon_3d_vertices[1].v2 = v2;

  004cc	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  004d1	c1 e0 00	 shl	 eax, 0
  004d4	f3 0f 10 45 d4	 movss	 xmm0, DWORD PTR _v2$[ebp]
  004d9	f3 0f 11 80 24
	00 00 00	 movss	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+36], xmm0

; 810  : 	polygon_3d_vertices[1].next_vertex = &polygon_3d_vertices[2];

  004e1	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  004e6	d1 e0		 shl	 eax, 1
  004e8	05 00 00 00 00	 add	 eax, OFFSET ?polygon_3d_vertices@@3PAUVERTEX@@A ; polygon_3d_vertices
  004ed	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  004f2	c1 e1 00	 shl	 ecx, 0
  004f5	89 81 28 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+40], eax

; 811  : 
; 812  : 	this_point = reference_points[2];

  004fb	b8 04 00 00 00	 mov	 eax, 4
  00500	d1 e0		 shl	 eax, 1
  00502	8b 4d 08	 mov	 ecx, DWORD PTR _reference_points$[ebp]
  00505	8b 14 01	 mov	 edx, DWORD PTR [ecx+eax]
  00508	89 55 fc	 mov	 DWORD PTR _this_point$[ebp], edx

; 813  : 	normal_index = transformed_3d_point_colours[this_point].normal_index;

  0050b	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  0050e	0f b6 0c c5 05
	00 00 00	 movzx	 ecx, BYTE PTR ?transformed_3d_point_colours@@3PAUTERRAIN_3D_TRANSFORMED_POINT_COLOUR@@A[eax*8+5]
  00516	89 4d f8	 mov	 DWORD PTR _normal_index$[ebp], ecx

; 814  : 	y = terrain_3d_map_minimum_height + ( ( ( float ) current_terrain_points_y[this_point].y ) * terrain_3d_map_scaled_height_difference );

  00519	b8 ff 7f 00 00	 mov	 eax, 32767		; 00007fffH
  0051e	8b 4d fc	 mov	 ecx, DWORD PTR _this_point$[ebp]
  00521	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?current_terrain_points_y@@3PAUTERRAIN_3D_POINT_Y@@A ; current_terrain_points_y
  00527	66 23 04 4a	 and	 ax, WORD PTR [edx+ecx*2]
  0052b	0f b7 c0	 movzx	 eax, ax
  0052e	f3 0f 2a c0	 cvtsi2ss xmm0, eax
  00532	f3 0f 59 05 00
	00 00 00	 mulss	 xmm0, DWORD PTR ?terrain_3d_map_scaled_height_difference@@3MA
  0053a	f3 0f 58 05 00
	00 00 00	 addss	 xmm0, DWORD PTR ?terrain_3d_map_minimum_height@@3MA
  00542	f3 0f 11 45 e4	 movss	 DWORD PTR _y$[ebp], xmm0

; 815  : 	u = current_terrain_points_xz[this_point].x * xz_texture_scale;

  00547	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  0054a	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_terrain_points_xz@@3PAUTERRAIN_3D_POINT_XZ@@A ; current_terrain_points_xz
  00550	0f bf 14 81	 movsx	 edx, WORD PTR [ecx+eax*4]
  00554	f3 0f 2a c2	 cvtsi2ss xmm0, edx
  00558	f3 0f 59 45 f4	 mulss	 xmm0, DWORD PTR _xz_texture_scale$[ebp]
  0055d	f3 0f 11 45 e0	 movss	 DWORD PTR _u$[ebp], xmm0

; 816  : 	u2 = current_terrain_points_xz[this_point].x * xz_texture_scale2;

  00562	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  00565	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_terrain_points_xz@@3PAUTERRAIN_3D_POINT_XZ@@A ; current_terrain_points_xz
  0056b	0f bf 14 81	 movsx	 edx, WORD PTR [ecx+eax*4]
  0056f	f3 0f 2a c2	 cvtsi2ss xmm0, edx
  00573	f3 0f 59 45 f0	 mulss	 xmm0, DWORD PTR _xz_texture_scale2$[ebp]
  00578	f3 0f 11 45 dc	 movss	 DWORD PTR _u2$[ebp], xmm0

; 817  : 	v = y * y_texture_scale;

  0057d	f3 0f 10 45 e4	 movss	 xmm0, DWORD PTR _y$[ebp]
  00582	f3 0f 59 45 ec	 mulss	 xmm0, DWORD PTR _y_texture_scale$[ebp]
  00587	f3 0f 11 45 d8	 movss	 DWORD PTR _v$[ebp], xmm0

; 818  : 	v2 = y * y_texture_scale2;

  0058c	f3 0f 10 45 e4	 movss	 xmm0, DWORD PTR _y$[ebp]
  00591	f3 0f 59 45 e8	 mulss	 xmm0, DWORD PTR _y_texture_scale2$[ebp]
  00596	f3 0f 11 45 d4	 movss	 DWORD PTR _v2$[ebp], xmm0

; 819  : 	*( ( int * ) &polygon_3d_vertices[2].x ) = *( ( int * ) &transformed_3d_3d_points[this_point].x );

  0059b	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  005a0	d1 e0		 shl	 eax, 1
  005a2	8b 4d fc	 mov	 ecx, DWORD PTR _this_point$[ebp]
  005a5	8b 14 cd 00 00
	00 00		 mov	 edx, DWORD PTR ?transformed_3d_3d_points@@3PAUOBJECT_TRANSFORMED_3D_POINT@@A[ecx*8]
  005ac	89 90 00 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax], edx

; 820  : 	*( ( int * ) &polygon_3d_vertices[2].y ) = *( ( int * ) &transformed_3d_3d_points[this_point].y );

  005b2	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  005b7	d1 e0		 shl	 eax, 1
  005b9	8b 4d fc	 mov	 ecx, DWORD PTR _this_point$[ebp]
  005bc	8b 14 cd 04 00
	00 00		 mov	 edx, DWORD PTR ?transformed_3d_3d_points@@3PAUOBJECT_TRANSFORMED_3D_POINT@@A[ecx*8+4]
  005c3	89 90 04 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+4], edx

; 821  : 	*( ( int * ) &polygon_3d_vertices[2].z ) = *( ( int * ) &transformed_3d_2d_points[this_point].z );

  005c9	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  005cc	c1 e0 04	 shl	 eax, 4
  005cf	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  005d4	d1 e1		 shl	 ecx, 1
  005d6	8b 90 0c 00 00
	00		 mov	 edx, DWORD PTR ?transformed_3d_2d_points@@3PAUOBJECT_TRANSFORMED_2D_POINT@@A[eax+12]
  005dc	89 91 08 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+8], edx

; 822  : 	*( ( int * ) &polygon_3d_vertices[2].i ) = *( ( int * ) &transformed_3d_2d_points[this_point].i );

  005e2	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  005e5	c1 e0 04	 shl	 eax, 4
  005e8	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  005ed	d1 e1		 shl	 ecx, 1
  005ef	8b 90 00 00 00
	00		 mov	 edx, DWORD PTR ?transformed_3d_2d_points@@3PAUOBJECT_TRANSFORMED_2D_POINT@@A[eax]
  005f5	89 91 10 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+16], edx

; 823  : 	*( ( int * ) &polygon_3d_vertices[2].j ) = *( ( int * ) &transformed_3d_2d_points[this_point].j );

  005fb	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  005fe	c1 e0 04	 shl	 eax, 4
  00601	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  00606	d1 e1		 shl	 ecx, 1
  00608	8b 90 04 00 00
	00		 mov	 edx, DWORD PTR ?transformed_3d_2d_points@@3PAUOBJECT_TRANSFORMED_2D_POINT@@A[eax+4]
  0060e	89 91 14 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+20], edx

; 824  : 	*( ( int * ) &polygon_3d_vertices[2].q ) = *( ( int * ) &transformed_3d_2d_points[this_point].q );

  00614	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  00617	c1 e0 04	 shl	 eax, 4
  0061a	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  0061f	d1 e1		 shl	 ecx, 1
  00621	8b 90 08 00 00
	00		 mov	 edx, DWORD PTR ?transformed_3d_2d_points@@3PAUOBJECT_TRANSFORMED_2D_POINT@@A[eax+8]
  00627	89 91 0c 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+12], edx

; 825  : 	polygon_3d_vertices[2].outcode = transformed_3d_point_outcodes[this_point];

  0062d	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  00632	d1 e0		 shl	 eax, 1
  00634	8b 4d fc	 mov	 ecx, DWORD PTR _this_point$[ebp]
  00637	8a 91 00 00 00
	00		 mov	 dl, BYTE PTR ?transformed_3d_point_outcodes@@3PAEA[ecx]
  0063d	88 90 2c 00 00
	00		 mov	 BYTE PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+44], dl

; 826  : 	polygon_3d_vertices[2].colour = transformed_3d_point_colours[this_point].colour;

  00643	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  00648	d1 e0		 shl	 eax, 1
  0064a	8b 4d fc	 mov	 ecx, DWORD PTR _this_point$[ebp]
  0064d	8b 14 cd 00 00
	00 00		 mov	 edx, DWORD PTR ?transformed_3d_point_colours@@3PAUTERRAIN_3D_TRANSFORMED_POINT_COLOUR@@A[ecx*8]
  00654	89 90 30 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+48], edx

; 827  : 	polygon_3d_vertices[2].fog = transformed_3d_point_colours[this_point].fog;

  0065a	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  0065f	d1 e0		 shl	 eax, 1
  00661	8b 4d fc	 mov	 ecx, DWORD PTR _this_point$[ebp]
  00664	8a 14 cd 04 00
	00 00		 mov	 dl, BYTE PTR ?transformed_3d_point_colours@@3PAUTERRAIN_3D_TRANSFORMED_POINT_COLOUR@@A[ecx*8+4]
  0066b	88 90 2e 00 00
	00		 mov	 BYTE PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+46], dl

; 828  : 	polygon_3d_vertices[2].red2 = terrain_3d_transformed_point_normals[normal_index].colour.red;

  00671	8b 45 f8	 mov	 eax, DWORD PTR _normal_index$[ebp]
  00674	c1 e0 04	 shl	 eax, 4
  00677	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  0067c	d1 e1		 shl	 ecx, 1
  0067e	8a 90 0e 00 00
	00		 mov	 dl, BYTE PTR ?terrain_3d_transformed_point_normals@@3PAUTERRAIN_3D_TRANSFORMED_POINT_NORMAL@@A[eax+14]
  00684	88 91 36 00 00
	00		 mov	 BYTE PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+54], dl

; 829  : 	polygon_3d_vertices[2].green2 = terrain_3d_transformed_point_normals[normal_index].colour.green;

  0068a	8b 45 f8	 mov	 eax, DWORD PTR _normal_index$[ebp]
  0068d	c1 e0 04	 shl	 eax, 4
  00690	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  00695	d1 e1		 shl	 ecx, 1
  00697	8a 90 0d 00 00
	00		 mov	 dl, BYTE PTR ?terrain_3d_transformed_point_normals@@3PAUTERRAIN_3D_TRANSFORMED_POINT_NORMAL@@A[eax+13]
  0069d	88 91 35 00 00
	00		 mov	 BYTE PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+53], dl

; 830  : 	polygon_3d_vertices[2].blue2 = terrain_3d_transformed_point_normals[normal_index].colour.blue;

  006a3	8b 45 f8	 mov	 eax, DWORD PTR _normal_index$[ebp]
  006a6	c1 e0 04	 shl	 eax, 4
  006a9	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  006ae	d1 e1		 shl	 ecx, 1
  006b0	8a 90 0c 00 00
	00		 mov	 dl, BYTE PTR ?terrain_3d_transformed_point_normals@@3PAUTERRAIN_3D_TRANSFORMED_POINT_NORMAL@@A[eax+12]
  006b6	88 91 34 00 00
	00		 mov	 BYTE PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+52], dl

; 831  : 	polygon_3d_vertices[2].alpha2 = transformed_3d_point_colours[this_point].alpha;

  006bc	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  006c1	d1 e0		 shl	 eax, 1
  006c3	8b 4d fc	 mov	 ecx, DWORD PTR _this_point$[ebp]
  006c6	8a 14 cd 03 00
	00 00		 mov	 dl, BYTE PTR ?transformed_3d_point_colours@@3PAUTERRAIN_3D_TRANSFORMED_POINT_COLOUR@@A[ecx*8+3]
  006cd	88 90 37 00 00
	00		 mov	 BYTE PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+55], dl

; 832  : 	polygon_3d_vertices[2].u = u;

  006d3	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  006d8	d1 e0		 shl	 eax, 1
  006da	f3 0f 10 45 e0	 movss	 xmm0, DWORD PTR _u$[ebp]
  006df	f3 0f 11 80 18
	00 00 00	 movss	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+24], xmm0

; 833  : 	polygon_3d_vertices[2].v = v;

  006e7	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  006ec	d1 e0		 shl	 eax, 1
  006ee	f3 0f 10 45 d8	 movss	 xmm0, DWORD PTR _v$[ebp]
  006f3	f3 0f 11 80 1c
	00 00 00	 movss	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+28], xmm0

; 834  : 	polygon_3d_vertices[2].u2 = u2;

  006fb	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  00700	d1 e0		 shl	 eax, 1
  00702	f3 0f 10 45 dc	 movss	 xmm0, DWORD PTR _u2$[ebp]
  00707	f3 0f 11 80 20
	00 00 00	 movss	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+32], xmm0

; 835  : 	polygon_3d_vertices[2].v2 = v2;

  0070f	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  00714	d1 e0		 shl	 eax, 1
  00716	f3 0f 10 45 d4	 movss	 xmm0, DWORD PTR _v2$[ebp]
  0071b	f3 0f 11 80 24
	00 00 00	 movss	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+36], xmm0

; 836  : 	polygon_3d_vertices[2].next_vertex = NULL;

  00723	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  00728	d1 e0		 shl	 eax, 1
  0072a	c7 80 28 00 00
	00 00 00 00 00	 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+40], 0

; 837  : 
; 838  : 	return ( polygon_3d_vertices );

  00734	b8 00 00 00 00	 mov	 eax, OFFSET ?polygon_3d_vertices@@3PAUVERTEX@@A ; polygon_3d_vertices

; 839  : }

  00739	5f		 pop	 edi
  0073a	5e		 pop	 esi
  0073b	5b		 pop	 ebx
  0073c	8b e5		 mov	 esp, ebp
  0073e	5d		 pop	 ebp
  0073f	c2 04 00	 ret	 4
?construct_3d_terrain_dual_texture_xy_triangle@@YGPAUVERTEX@@PAH@Z ENDP ; construct_3d_terrain_dual_texture_xy_triangle
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\modules\3d\terrain\terrcons.c
;	COMDAT ?construct_3d_terrain_dual_texture_triangle@@YGPAUVERTEX@@PAH@Z
_TEXT	SEGMENT
_texture_scale2$ = -16					; size = 4
_texture_scale$ = -12					; size = 4
_normal_index$ = -8					; size = 4
_this_point$ = -4					; size = 4
_reference_points$ = 8					; size = 4
?construct_3d_terrain_dual_texture_triangle@@YGPAUVERTEX@@PAH@Z PROC ; construct_3d_terrain_dual_texture_triangle, COMDAT

; 647  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 50	 sub	 esp, 80			; 00000050H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 648  : 
; 649  : 	int
; 650  : 		this_point,
; 651  : 		normal_index;
; 652  : 
; 653  : 	float
; 654  : 		texture_scale,
; 655  : 		texture_scale2;
; 656  : 
; 657  : 	terrain_3d_faces_constructed++;

  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ?terrain_3d_faces_constructed@@3HA ; terrain_3d_faces_constructed
  0000e	83 c0 01	 add	 eax, 1
  00011	a3 00 00 00 00	 mov	 DWORD PTR ?terrain_3d_faces_constructed@@3HA, eax ; terrain_3d_faces_constructed

; 658  : 
; 659  : 	texture_scale = current_terrain_type_class->xz_texture_scale;

  00016	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_terrain_type_class@@3PAUTERRAIN_TYPE_INFO@@A ; current_terrain_type_class
  0001b	f3 0f 10 40 10	 movss	 xmm0, DWORD PTR [eax+16]
  00020	f3 0f 11 45 f4	 movss	 DWORD PTR _texture_scale$[ebp], xmm0

; 660  : 	texture_scale2 = current_terrain_type_class->xz_texture_scale2;

  00025	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_terrain_type_class@@3PAUTERRAIN_TYPE_INFO@@A ; current_terrain_type_class
  0002a	f3 0f 10 40 18	 movss	 xmm0, DWORD PTR [eax+24]
  0002f	f3 0f 11 45 f0	 movss	 DWORD PTR _texture_scale2$[ebp], xmm0

; 661  : 
; 662  : 	this_point = reference_points[0];

  00034	b8 04 00 00 00	 mov	 eax, 4
  00039	6b c8 00	 imul	 ecx, eax, 0
  0003c	8b 55 08	 mov	 edx, DWORD PTR _reference_points$[ebp]
  0003f	8b 04 0a	 mov	 eax, DWORD PTR [edx+ecx]
  00042	89 45 fc	 mov	 DWORD PTR _this_point$[ebp], eax

; 663  : 	normal_index = transformed_3d_point_colours[this_point].normal_index;

  00045	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  00048	0f b6 0c c5 05
	00 00 00	 movzx	 ecx, BYTE PTR ?transformed_3d_point_colours@@3PAUTERRAIN_3D_TRANSFORMED_POINT_COLOUR@@A[eax*8+5]
  00050	89 4d f8	 mov	 DWORD PTR _normal_index$[ebp], ecx

; 664  : 	*( ( int * ) &polygon_3d_vertices[0].x ) = *( ( int * ) &transformed_3d_3d_points[this_point].x );

  00053	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  00058	6b c8 00	 imul	 ecx, eax, 0
  0005b	8b 55 fc	 mov	 edx, DWORD PTR _this_point$[ebp]
  0005e	8b 04 d5 00 00
	00 00		 mov	 eax, DWORD PTR ?transformed_3d_3d_points@@3PAUOBJECT_TRANSFORMED_3D_POINT@@A[edx*8]
  00065	89 81 00 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx], eax

; 665  : 	*( ( int * ) &polygon_3d_vertices[0].y ) = *( ( int * ) &transformed_3d_3d_points[this_point].y );

  0006b	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  00070	6b c8 00	 imul	 ecx, eax, 0
  00073	8b 55 fc	 mov	 edx, DWORD PTR _this_point$[ebp]
  00076	8b 04 d5 04 00
	00 00		 mov	 eax, DWORD PTR ?transformed_3d_3d_points@@3PAUOBJECT_TRANSFORMED_3D_POINT@@A[edx*8+4]
  0007d	89 81 04 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+4], eax

; 666  : 	*( ( int * ) &polygon_3d_vertices[0].z ) = *( ( int * ) &transformed_3d_2d_points[this_point].z );

  00083	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  00086	c1 e0 04	 shl	 eax, 4
  00089	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  0008e	6b d1 00	 imul	 edx, ecx, 0
  00091	8b 80 0c 00 00
	00		 mov	 eax, DWORD PTR ?transformed_3d_2d_points@@3PAUOBJECT_TRANSFORMED_2D_POINT@@A[eax+12]
  00097	89 82 08 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[edx+8], eax

; 667  : 	*( ( int * ) &polygon_3d_vertices[0].i ) = *( ( int * ) &transformed_3d_2d_points[this_point].i );

  0009d	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  000a0	c1 e0 04	 shl	 eax, 4
  000a3	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  000a8	6b d1 00	 imul	 edx, ecx, 0
  000ab	8b 80 00 00 00
	00		 mov	 eax, DWORD PTR ?transformed_3d_2d_points@@3PAUOBJECT_TRANSFORMED_2D_POINT@@A[eax]
  000b1	89 82 10 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[edx+16], eax

; 668  : 	*( ( int * ) &polygon_3d_vertices[0].j ) = *( ( int * ) &transformed_3d_2d_points[this_point].j );

  000b7	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  000ba	c1 e0 04	 shl	 eax, 4
  000bd	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  000c2	6b d1 00	 imul	 edx, ecx, 0
  000c5	8b 80 04 00 00
	00		 mov	 eax, DWORD PTR ?transformed_3d_2d_points@@3PAUOBJECT_TRANSFORMED_2D_POINT@@A[eax+4]
  000cb	89 82 14 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[edx+20], eax

; 669  : 	*( ( int * ) &polygon_3d_vertices[0].q ) = *( ( int * ) &transformed_3d_2d_points[this_point].q );

  000d1	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  000d4	c1 e0 04	 shl	 eax, 4
  000d7	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  000dc	6b d1 00	 imul	 edx, ecx, 0
  000df	8b 80 08 00 00
	00		 mov	 eax, DWORD PTR ?transformed_3d_2d_points@@3PAUOBJECT_TRANSFORMED_2D_POINT@@A[eax+8]
  000e5	89 82 0c 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[edx+12], eax

; 670  : 	polygon_3d_vertices[0].outcode = transformed_3d_point_outcodes[this_point];

  000eb	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  000f0	6b c8 00	 imul	 ecx, eax, 0
  000f3	8b 55 fc	 mov	 edx, DWORD PTR _this_point$[ebp]
  000f6	8a 82 00 00 00
	00		 mov	 al, BYTE PTR ?transformed_3d_point_outcodes@@3PAEA[edx]
  000fc	88 81 2c 00 00
	00		 mov	 BYTE PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+44], al

; 671  : 	polygon_3d_vertices[0].colour = transformed_3d_point_colours[this_point].colour;

  00102	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  00107	6b c8 00	 imul	 ecx, eax, 0
  0010a	8b 55 fc	 mov	 edx, DWORD PTR _this_point$[ebp]
  0010d	8b 04 d5 00 00
	00 00		 mov	 eax, DWORD PTR ?transformed_3d_point_colours@@3PAUTERRAIN_3D_TRANSFORMED_POINT_COLOUR@@A[edx*8]
  00114	89 81 30 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+48], eax

; 672  : 	polygon_3d_vertices[0].fog = transformed_3d_point_colours[this_point].fog;

  0011a	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  0011f	6b c8 00	 imul	 ecx, eax, 0
  00122	8b 55 fc	 mov	 edx, DWORD PTR _this_point$[ebp]
  00125	8a 04 d5 04 00
	00 00		 mov	 al, BYTE PTR ?transformed_3d_point_colours@@3PAUTERRAIN_3D_TRANSFORMED_POINT_COLOUR@@A[edx*8+4]
  0012c	88 81 2e 00 00
	00		 mov	 BYTE PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+46], al

; 673  : 	polygon_3d_vertices[0].red2 = terrain_3d_transformed_point_normals[normal_index].colour.red;

  00132	8b 45 f8	 mov	 eax, DWORD PTR _normal_index$[ebp]
  00135	c1 e0 04	 shl	 eax, 4
  00138	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  0013d	6b d1 00	 imul	 edx, ecx, 0
  00140	8a 80 0e 00 00
	00		 mov	 al, BYTE PTR ?terrain_3d_transformed_point_normals@@3PAUTERRAIN_3D_TRANSFORMED_POINT_NORMAL@@A[eax+14]
  00146	88 82 36 00 00
	00		 mov	 BYTE PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[edx+54], al

; 674  : 	polygon_3d_vertices[0].green2 = terrain_3d_transformed_point_normals[normal_index].colour.green;

  0014c	8b 45 f8	 mov	 eax, DWORD PTR _normal_index$[ebp]
  0014f	c1 e0 04	 shl	 eax, 4
  00152	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  00157	6b d1 00	 imul	 edx, ecx, 0
  0015a	8a 80 0d 00 00
	00		 mov	 al, BYTE PTR ?terrain_3d_transformed_point_normals@@3PAUTERRAIN_3D_TRANSFORMED_POINT_NORMAL@@A[eax+13]
  00160	88 82 35 00 00
	00		 mov	 BYTE PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[edx+53], al

; 675  : 	polygon_3d_vertices[0].blue2 = terrain_3d_transformed_point_normals[normal_index].colour.blue;

  00166	8b 45 f8	 mov	 eax, DWORD PTR _normal_index$[ebp]
  00169	c1 e0 04	 shl	 eax, 4
  0016c	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  00171	6b d1 00	 imul	 edx, ecx, 0
  00174	8a 80 0c 00 00
	00		 mov	 al, BYTE PTR ?terrain_3d_transformed_point_normals@@3PAUTERRAIN_3D_TRANSFORMED_POINT_NORMAL@@A[eax+12]
  0017a	88 82 34 00 00
	00		 mov	 BYTE PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[edx+52], al

; 676  : 	polygon_3d_vertices[0].alpha2 = transformed_3d_point_colours[this_point].alpha;

  00180	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  00185	6b c8 00	 imul	 ecx, eax, 0
  00188	8b 55 fc	 mov	 edx, DWORD PTR _this_point$[ebp]
  0018b	8a 04 d5 03 00
	00 00		 mov	 al, BYTE PTR ?transformed_3d_point_colours@@3PAUTERRAIN_3D_TRANSFORMED_POINT_COLOUR@@A[edx*8+3]
  00192	88 81 37 00 00
	00		 mov	 BYTE PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+55], al

; 677  : 	polygon_3d_vertices[0].u = current_terrain_points_xz[this_point].x * texture_scale;

  00198	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  0019b	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_terrain_points_xz@@3PAUTERRAIN_3D_POINT_XZ@@A ; current_terrain_points_xz
  001a1	0f bf 14 81	 movsx	 edx, WORD PTR [ecx+eax*4]
  001a5	f3 0f 2a c2	 cvtsi2ss xmm0, edx
  001a9	f3 0f 59 45 f4	 mulss	 xmm0, DWORD PTR _texture_scale$[ebp]
  001ae	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  001b3	6b c8 00	 imul	 ecx, eax, 0
  001b6	f3 0f 11 81 18
	00 00 00	 movss	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+24], xmm0

; 678  : 	polygon_3d_vertices[0].v = current_terrain_points_xz[this_point].z * texture_scale;

  001be	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  001c1	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_terrain_points_xz@@3PAUTERRAIN_3D_POINT_XZ@@A ; current_terrain_points_xz
  001c7	0f bf 54 81 02	 movsx	 edx, WORD PTR [ecx+eax*4+2]
  001cc	f3 0f 2a c2	 cvtsi2ss xmm0, edx
  001d0	f3 0f 59 45 f4	 mulss	 xmm0, DWORD PTR _texture_scale$[ebp]
  001d5	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  001da	6b c8 00	 imul	 ecx, eax, 0
  001dd	f3 0f 11 81 1c
	00 00 00	 movss	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+28], xmm0

; 679  : 	polygon_3d_vertices[0].u2 = current_terrain_points_xz[this_point].x * texture_scale2;

  001e5	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  001e8	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_terrain_points_xz@@3PAUTERRAIN_3D_POINT_XZ@@A ; current_terrain_points_xz
  001ee	0f bf 14 81	 movsx	 edx, WORD PTR [ecx+eax*4]
  001f2	f3 0f 2a c2	 cvtsi2ss xmm0, edx
  001f6	f3 0f 59 45 f0	 mulss	 xmm0, DWORD PTR _texture_scale2$[ebp]
  001fb	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  00200	6b c8 00	 imul	 ecx, eax, 0
  00203	f3 0f 11 81 20
	00 00 00	 movss	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+32], xmm0

; 680  : 	polygon_3d_vertices[0].v2 = current_terrain_points_xz[this_point].z * texture_scale2;

  0020b	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  0020e	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_terrain_points_xz@@3PAUTERRAIN_3D_POINT_XZ@@A ; current_terrain_points_xz
  00214	0f bf 54 81 02	 movsx	 edx, WORD PTR [ecx+eax*4+2]
  00219	f3 0f 2a c2	 cvtsi2ss xmm0, edx
  0021d	f3 0f 59 45 f0	 mulss	 xmm0, DWORD PTR _texture_scale2$[ebp]
  00222	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  00227	6b c8 00	 imul	 ecx, eax, 0
  0022a	f3 0f 11 81 24
	00 00 00	 movss	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+36], xmm0

; 681  : 	polygon_3d_vertices[0].normal_index = normal_index;

  00232	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  00237	6b c8 00	 imul	 ecx, eax, 0
  0023a	8a 55 f8	 mov	 dl, BYTE PTR _normal_index$[ebp]
  0023d	88 91 2f 00 00
	00		 mov	 BYTE PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+47], dl

; 682  : 	polygon_3d_vertices[0].next_vertex = &polygon_3d_vertices[1];

  00243	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  00248	c1 e0 00	 shl	 eax, 0
  0024b	05 00 00 00 00	 add	 eax, OFFSET ?polygon_3d_vertices@@3PAUVERTEX@@A ; polygon_3d_vertices
  00250	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  00255	6b d1 00	 imul	 edx, ecx, 0
  00258	89 82 28 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[edx+40], eax

; 683  : 
; 684  : 	this_point = reference_points[1];

  0025e	b8 04 00 00 00	 mov	 eax, 4
  00263	c1 e0 00	 shl	 eax, 0
  00266	8b 4d 08	 mov	 ecx, DWORD PTR _reference_points$[ebp]
  00269	8b 14 01	 mov	 edx, DWORD PTR [ecx+eax]
  0026c	89 55 fc	 mov	 DWORD PTR _this_point$[ebp], edx

; 685  : 	normal_index = transformed_3d_point_colours[this_point].normal_index;

  0026f	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  00272	0f b6 0c c5 05
	00 00 00	 movzx	 ecx, BYTE PTR ?transformed_3d_point_colours@@3PAUTERRAIN_3D_TRANSFORMED_POINT_COLOUR@@A[eax*8+5]
  0027a	89 4d f8	 mov	 DWORD PTR _normal_index$[ebp], ecx

; 686  : 	*( ( int * ) &polygon_3d_vertices[1].x ) = *( ( int * ) &transformed_3d_3d_points[this_point].x );

  0027d	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  00282	c1 e0 00	 shl	 eax, 0
  00285	8b 4d fc	 mov	 ecx, DWORD PTR _this_point$[ebp]
  00288	8b 14 cd 00 00
	00 00		 mov	 edx, DWORD PTR ?transformed_3d_3d_points@@3PAUOBJECT_TRANSFORMED_3D_POINT@@A[ecx*8]
  0028f	89 90 00 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax], edx

; 687  : 	*( ( int * ) &polygon_3d_vertices[1].y ) = *( ( int * ) &transformed_3d_3d_points[this_point].y );

  00295	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  0029a	c1 e0 00	 shl	 eax, 0
  0029d	8b 4d fc	 mov	 ecx, DWORD PTR _this_point$[ebp]
  002a0	8b 14 cd 04 00
	00 00		 mov	 edx, DWORD PTR ?transformed_3d_3d_points@@3PAUOBJECT_TRANSFORMED_3D_POINT@@A[ecx*8+4]
  002a7	89 90 04 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+4], edx

; 688  : 	*( ( int * ) &polygon_3d_vertices[1].z ) = *( ( int * ) &transformed_3d_2d_points[this_point].z );

  002ad	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  002b0	c1 e0 04	 shl	 eax, 4
  002b3	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  002b8	c1 e1 00	 shl	 ecx, 0
  002bb	8b 90 0c 00 00
	00		 mov	 edx, DWORD PTR ?transformed_3d_2d_points@@3PAUOBJECT_TRANSFORMED_2D_POINT@@A[eax+12]
  002c1	89 91 08 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+8], edx

; 689  : 	*( ( int * ) &polygon_3d_vertices[1].i ) = *( ( int * ) &transformed_3d_2d_points[this_point].i );

  002c7	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  002ca	c1 e0 04	 shl	 eax, 4
  002cd	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  002d2	c1 e1 00	 shl	 ecx, 0
  002d5	8b 90 00 00 00
	00		 mov	 edx, DWORD PTR ?transformed_3d_2d_points@@3PAUOBJECT_TRANSFORMED_2D_POINT@@A[eax]
  002db	89 91 10 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+16], edx

; 690  : 	*( ( int * ) &polygon_3d_vertices[1].j ) = *( ( int * ) &transformed_3d_2d_points[this_point].j );

  002e1	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  002e4	c1 e0 04	 shl	 eax, 4
  002e7	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  002ec	c1 e1 00	 shl	 ecx, 0
  002ef	8b 90 04 00 00
	00		 mov	 edx, DWORD PTR ?transformed_3d_2d_points@@3PAUOBJECT_TRANSFORMED_2D_POINT@@A[eax+4]
  002f5	89 91 14 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+20], edx

; 691  : 	*( ( int * ) &polygon_3d_vertices[1].q ) = *( ( int * ) &transformed_3d_2d_points[this_point].q );

  002fb	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  002fe	c1 e0 04	 shl	 eax, 4
  00301	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  00306	c1 e1 00	 shl	 ecx, 0
  00309	8b 90 08 00 00
	00		 mov	 edx, DWORD PTR ?transformed_3d_2d_points@@3PAUOBJECT_TRANSFORMED_2D_POINT@@A[eax+8]
  0030f	89 91 0c 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+12], edx

; 692  : 	polygon_3d_vertices[1].outcode = transformed_3d_point_outcodes[this_point];

  00315	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  0031a	c1 e0 00	 shl	 eax, 0
  0031d	8b 4d fc	 mov	 ecx, DWORD PTR _this_point$[ebp]
  00320	8a 91 00 00 00
	00		 mov	 dl, BYTE PTR ?transformed_3d_point_outcodes@@3PAEA[ecx]
  00326	88 90 2c 00 00
	00		 mov	 BYTE PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+44], dl

; 693  : 	polygon_3d_vertices[1].colour = transformed_3d_point_colours[this_point].colour;

  0032c	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  00331	c1 e0 00	 shl	 eax, 0
  00334	8b 4d fc	 mov	 ecx, DWORD PTR _this_point$[ebp]
  00337	8b 14 cd 00 00
	00 00		 mov	 edx, DWORD PTR ?transformed_3d_point_colours@@3PAUTERRAIN_3D_TRANSFORMED_POINT_COLOUR@@A[ecx*8]
  0033e	89 90 30 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+48], edx

; 694  : 	polygon_3d_vertices[1].fog = transformed_3d_point_colours[this_point].fog;

  00344	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  00349	c1 e0 00	 shl	 eax, 0
  0034c	8b 4d fc	 mov	 ecx, DWORD PTR _this_point$[ebp]
  0034f	8a 14 cd 04 00
	00 00		 mov	 dl, BYTE PTR ?transformed_3d_point_colours@@3PAUTERRAIN_3D_TRANSFORMED_POINT_COLOUR@@A[ecx*8+4]
  00356	88 90 2e 00 00
	00		 mov	 BYTE PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+46], dl

; 695  : 	polygon_3d_vertices[1].red2 = terrain_3d_transformed_point_normals[normal_index].colour.red;

  0035c	8b 45 f8	 mov	 eax, DWORD PTR _normal_index$[ebp]
  0035f	c1 e0 04	 shl	 eax, 4
  00362	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  00367	c1 e1 00	 shl	 ecx, 0
  0036a	8a 90 0e 00 00
	00		 mov	 dl, BYTE PTR ?terrain_3d_transformed_point_normals@@3PAUTERRAIN_3D_TRANSFORMED_POINT_NORMAL@@A[eax+14]
  00370	88 91 36 00 00
	00		 mov	 BYTE PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+54], dl

; 696  : 	polygon_3d_vertices[1].green2 = terrain_3d_transformed_point_normals[normal_index].colour.green;

  00376	8b 45 f8	 mov	 eax, DWORD PTR _normal_index$[ebp]
  00379	c1 e0 04	 shl	 eax, 4
  0037c	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  00381	c1 e1 00	 shl	 ecx, 0
  00384	8a 90 0d 00 00
	00		 mov	 dl, BYTE PTR ?terrain_3d_transformed_point_normals@@3PAUTERRAIN_3D_TRANSFORMED_POINT_NORMAL@@A[eax+13]
  0038a	88 91 35 00 00
	00		 mov	 BYTE PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+53], dl

; 697  : 	polygon_3d_vertices[1].blue2 = terrain_3d_transformed_point_normals[normal_index].colour.blue;

  00390	8b 45 f8	 mov	 eax, DWORD PTR _normal_index$[ebp]
  00393	c1 e0 04	 shl	 eax, 4
  00396	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  0039b	c1 e1 00	 shl	 ecx, 0
  0039e	8a 90 0c 00 00
	00		 mov	 dl, BYTE PTR ?terrain_3d_transformed_point_normals@@3PAUTERRAIN_3D_TRANSFORMED_POINT_NORMAL@@A[eax+12]
  003a4	88 91 34 00 00
	00		 mov	 BYTE PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+52], dl

; 698  : 	polygon_3d_vertices[1].alpha2 = transformed_3d_point_colours[this_point].alpha;

  003aa	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  003af	c1 e0 00	 shl	 eax, 0
  003b2	8b 4d fc	 mov	 ecx, DWORD PTR _this_point$[ebp]
  003b5	8a 14 cd 03 00
	00 00		 mov	 dl, BYTE PTR ?transformed_3d_point_colours@@3PAUTERRAIN_3D_TRANSFORMED_POINT_COLOUR@@A[ecx*8+3]
  003bc	88 90 37 00 00
	00		 mov	 BYTE PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+55], dl

; 699  : 	polygon_3d_vertices[1].u = current_terrain_points_xz[this_point].x * texture_scale;

  003c2	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  003c5	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_terrain_points_xz@@3PAUTERRAIN_3D_POINT_XZ@@A ; current_terrain_points_xz
  003cb	0f bf 14 81	 movsx	 edx, WORD PTR [ecx+eax*4]
  003cf	f3 0f 2a c2	 cvtsi2ss xmm0, edx
  003d3	f3 0f 59 45 f4	 mulss	 xmm0, DWORD PTR _texture_scale$[ebp]
  003d8	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  003dd	c1 e0 00	 shl	 eax, 0
  003e0	f3 0f 11 80 18
	00 00 00	 movss	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+24], xmm0

; 700  : 	polygon_3d_vertices[1].v = current_terrain_points_xz[this_point].z * texture_scale;

  003e8	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  003eb	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_terrain_points_xz@@3PAUTERRAIN_3D_POINT_XZ@@A ; current_terrain_points_xz
  003f1	0f bf 54 81 02	 movsx	 edx, WORD PTR [ecx+eax*4+2]
  003f6	f3 0f 2a c2	 cvtsi2ss xmm0, edx
  003fa	f3 0f 59 45 f4	 mulss	 xmm0, DWORD PTR _texture_scale$[ebp]
  003ff	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  00404	c1 e0 00	 shl	 eax, 0
  00407	f3 0f 11 80 1c
	00 00 00	 movss	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+28], xmm0

; 701  : 	polygon_3d_vertices[1].u2 = current_terrain_points_xz[this_point].x * texture_scale2;

  0040f	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  00412	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_terrain_points_xz@@3PAUTERRAIN_3D_POINT_XZ@@A ; current_terrain_points_xz
  00418	0f bf 14 81	 movsx	 edx, WORD PTR [ecx+eax*4]
  0041c	f3 0f 2a c2	 cvtsi2ss xmm0, edx
  00420	f3 0f 59 45 f0	 mulss	 xmm0, DWORD PTR _texture_scale2$[ebp]
  00425	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  0042a	c1 e0 00	 shl	 eax, 0
  0042d	f3 0f 11 80 20
	00 00 00	 movss	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+32], xmm0

; 702  : 	polygon_3d_vertices[1].v2 = current_terrain_points_xz[this_point].z * texture_scale2;

  00435	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  00438	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_terrain_points_xz@@3PAUTERRAIN_3D_POINT_XZ@@A ; current_terrain_points_xz
  0043e	0f bf 54 81 02	 movsx	 edx, WORD PTR [ecx+eax*4+2]
  00443	f3 0f 2a c2	 cvtsi2ss xmm0, edx
  00447	f3 0f 59 45 f0	 mulss	 xmm0, DWORD PTR _texture_scale2$[ebp]
  0044c	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  00451	c1 e0 00	 shl	 eax, 0
  00454	f3 0f 11 80 24
	00 00 00	 movss	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+36], xmm0

; 703  : 	polygon_3d_vertices[1].normal_index = normal_index;

  0045c	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  00461	c1 e0 00	 shl	 eax, 0
  00464	8a 4d f8	 mov	 cl, BYTE PTR _normal_index$[ebp]
  00467	88 88 2f 00 00
	00		 mov	 BYTE PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+47], cl

; 704  : 	polygon_3d_vertices[1].next_vertex = &polygon_3d_vertices[2];

  0046d	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  00472	d1 e0		 shl	 eax, 1
  00474	05 00 00 00 00	 add	 eax, OFFSET ?polygon_3d_vertices@@3PAUVERTEX@@A ; polygon_3d_vertices
  00479	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  0047e	c1 e1 00	 shl	 ecx, 0
  00481	89 81 28 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+40], eax

; 705  : 
; 706  : 	this_point = reference_points[2];

  00487	b8 04 00 00 00	 mov	 eax, 4
  0048c	d1 e0		 shl	 eax, 1
  0048e	8b 4d 08	 mov	 ecx, DWORD PTR _reference_points$[ebp]
  00491	8b 14 01	 mov	 edx, DWORD PTR [ecx+eax]
  00494	89 55 fc	 mov	 DWORD PTR _this_point$[ebp], edx

; 707  : 	normal_index = transformed_3d_point_colours[this_point].normal_index;

  00497	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  0049a	0f b6 0c c5 05
	00 00 00	 movzx	 ecx, BYTE PTR ?transformed_3d_point_colours@@3PAUTERRAIN_3D_TRANSFORMED_POINT_COLOUR@@A[eax*8+5]
  004a2	89 4d f8	 mov	 DWORD PTR _normal_index$[ebp], ecx

; 708  : 	*( ( int * ) &polygon_3d_vertices[2].x ) = *( ( int * ) &transformed_3d_3d_points[this_point].x );

  004a5	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  004aa	d1 e0		 shl	 eax, 1
  004ac	8b 4d fc	 mov	 ecx, DWORD PTR _this_point$[ebp]
  004af	8b 14 cd 00 00
	00 00		 mov	 edx, DWORD PTR ?transformed_3d_3d_points@@3PAUOBJECT_TRANSFORMED_3D_POINT@@A[ecx*8]
  004b6	89 90 00 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax], edx

; 709  : 	*( ( int * ) &polygon_3d_vertices[2].y ) = *( ( int * ) &transformed_3d_3d_points[this_point].y );

  004bc	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  004c1	d1 e0		 shl	 eax, 1
  004c3	8b 4d fc	 mov	 ecx, DWORD PTR _this_point$[ebp]
  004c6	8b 14 cd 04 00
	00 00		 mov	 edx, DWORD PTR ?transformed_3d_3d_points@@3PAUOBJECT_TRANSFORMED_3D_POINT@@A[ecx*8+4]
  004cd	89 90 04 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+4], edx

; 710  : 	*( ( int * ) &polygon_3d_vertices[2].z ) = *( ( int * ) &transformed_3d_2d_points[this_point].z );

  004d3	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  004d6	c1 e0 04	 shl	 eax, 4
  004d9	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  004de	d1 e1		 shl	 ecx, 1
  004e0	8b 90 0c 00 00
	00		 mov	 edx, DWORD PTR ?transformed_3d_2d_points@@3PAUOBJECT_TRANSFORMED_2D_POINT@@A[eax+12]
  004e6	89 91 08 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+8], edx

; 711  : 	*( ( int * ) &polygon_3d_vertices[2].i ) = *( ( int * ) &transformed_3d_2d_points[this_point].i );

  004ec	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  004ef	c1 e0 04	 shl	 eax, 4
  004f2	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  004f7	d1 e1		 shl	 ecx, 1
  004f9	8b 90 00 00 00
	00		 mov	 edx, DWORD PTR ?transformed_3d_2d_points@@3PAUOBJECT_TRANSFORMED_2D_POINT@@A[eax]
  004ff	89 91 10 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+16], edx

; 712  : 	*( ( int * ) &polygon_3d_vertices[2].j ) = *( ( int * ) &transformed_3d_2d_points[this_point].j );

  00505	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  00508	c1 e0 04	 shl	 eax, 4
  0050b	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  00510	d1 e1		 shl	 ecx, 1
  00512	8b 90 04 00 00
	00		 mov	 edx, DWORD PTR ?transformed_3d_2d_points@@3PAUOBJECT_TRANSFORMED_2D_POINT@@A[eax+4]
  00518	89 91 14 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+20], edx

; 713  : 	*( ( int * ) &polygon_3d_vertices[2].q ) = *( ( int * ) &transformed_3d_2d_points[this_point].q );

  0051e	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  00521	c1 e0 04	 shl	 eax, 4
  00524	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  00529	d1 e1		 shl	 ecx, 1
  0052b	8b 90 08 00 00
	00		 mov	 edx, DWORD PTR ?transformed_3d_2d_points@@3PAUOBJECT_TRANSFORMED_2D_POINT@@A[eax+8]
  00531	89 91 0c 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+12], edx

; 714  : 	polygon_3d_vertices[2].outcode = transformed_3d_point_outcodes[this_point];

  00537	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  0053c	d1 e0		 shl	 eax, 1
  0053e	8b 4d fc	 mov	 ecx, DWORD PTR _this_point$[ebp]
  00541	8a 91 00 00 00
	00		 mov	 dl, BYTE PTR ?transformed_3d_point_outcodes@@3PAEA[ecx]
  00547	88 90 2c 00 00
	00		 mov	 BYTE PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+44], dl

; 715  : 	polygon_3d_vertices[2].colour = transformed_3d_point_colours[this_point].colour;

  0054d	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  00552	d1 e0		 shl	 eax, 1
  00554	8b 4d fc	 mov	 ecx, DWORD PTR _this_point$[ebp]
  00557	8b 14 cd 00 00
	00 00		 mov	 edx, DWORD PTR ?transformed_3d_point_colours@@3PAUTERRAIN_3D_TRANSFORMED_POINT_COLOUR@@A[ecx*8]
  0055e	89 90 30 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+48], edx

; 716  : 	polygon_3d_vertices[2].fog = transformed_3d_point_colours[this_point].fog;

  00564	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  00569	d1 e0		 shl	 eax, 1
  0056b	8b 4d fc	 mov	 ecx, DWORD PTR _this_point$[ebp]
  0056e	8a 14 cd 04 00
	00 00		 mov	 dl, BYTE PTR ?transformed_3d_point_colours@@3PAUTERRAIN_3D_TRANSFORMED_POINT_COLOUR@@A[ecx*8+4]
  00575	88 90 2e 00 00
	00		 mov	 BYTE PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+46], dl

; 717  : 	polygon_3d_vertices[2].red2 = terrain_3d_transformed_point_normals[normal_index].colour.red;

  0057b	8b 45 f8	 mov	 eax, DWORD PTR _normal_index$[ebp]
  0057e	c1 e0 04	 shl	 eax, 4
  00581	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  00586	d1 e1		 shl	 ecx, 1
  00588	8a 90 0e 00 00
	00		 mov	 dl, BYTE PTR ?terrain_3d_transformed_point_normals@@3PAUTERRAIN_3D_TRANSFORMED_POINT_NORMAL@@A[eax+14]
  0058e	88 91 36 00 00
	00		 mov	 BYTE PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+54], dl

; 718  : 	polygon_3d_vertices[2].green2 = terrain_3d_transformed_point_normals[normal_index].colour.green;

  00594	8b 45 f8	 mov	 eax, DWORD PTR _normal_index$[ebp]
  00597	c1 e0 04	 shl	 eax, 4
  0059a	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  0059f	d1 e1		 shl	 ecx, 1
  005a1	8a 90 0d 00 00
	00		 mov	 dl, BYTE PTR ?terrain_3d_transformed_point_normals@@3PAUTERRAIN_3D_TRANSFORMED_POINT_NORMAL@@A[eax+13]
  005a7	88 91 35 00 00
	00		 mov	 BYTE PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+53], dl

; 719  : 	polygon_3d_vertices[2].blue2 = terrain_3d_transformed_point_normals[normal_index].colour.blue;

  005ad	8b 45 f8	 mov	 eax, DWORD PTR _normal_index$[ebp]
  005b0	c1 e0 04	 shl	 eax, 4
  005b3	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  005b8	d1 e1		 shl	 ecx, 1
  005ba	8a 90 0c 00 00
	00		 mov	 dl, BYTE PTR ?terrain_3d_transformed_point_normals@@3PAUTERRAIN_3D_TRANSFORMED_POINT_NORMAL@@A[eax+12]
  005c0	88 91 34 00 00
	00		 mov	 BYTE PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+52], dl

; 720  : 	polygon_3d_vertices[2].alpha2 = transformed_3d_point_colours[this_point].alpha;

  005c6	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  005cb	d1 e0		 shl	 eax, 1
  005cd	8b 4d fc	 mov	 ecx, DWORD PTR _this_point$[ebp]
  005d0	8a 14 cd 03 00
	00 00		 mov	 dl, BYTE PTR ?transformed_3d_point_colours@@3PAUTERRAIN_3D_TRANSFORMED_POINT_COLOUR@@A[ecx*8+3]
  005d7	88 90 37 00 00
	00		 mov	 BYTE PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+55], dl

; 721  : 	polygon_3d_vertices[2].u = current_terrain_points_xz[this_point].x * texture_scale;

  005dd	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  005e0	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_terrain_points_xz@@3PAUTERRAIN_3D_POINT_XZ@@A ; current_terrain_points_xz
  005e6	0f bf 14 81	 movsx	 edx, WORD PTR [ecx+eax*4]
  005ea	f3 0f 2a c2	 cvtsi2ss xmm0, edx
  005ee	f3 0f 59 45 f4	 mulss	 xmm0, DWORD PTR _texture_scale$[ebp]
  005f3	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  005f8	d1 e0		 shl	 eax, 1
  005fa	f3 0f 11 80 18
	00 00 00	 movss	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+24], xmm0

; 722  : 	polygon_3d_vertices[2].v = current_terrain_points_xz[this_point].z * texture_scale;

  00602	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  00605	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_terrain_points_xz@@3PAUTERRAIN_3D_POINT_XZ@@A ; current_terrain_points_xz
  0060b	0f bf 54 81 02	 movsx	 edx, WORD PTR [ecx+eax*4+2]
  00610	f3 0f 2a c2	 cvtsi2ss xmm0, edx
  00614	f3 0f 59 45 f4	 mulss	 xmm0, DWORD PTR _texture_scale$[ebp]
  00619	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  0061e	d1 e0		 shl	 eax, 1
  00620	f3 0f 11 80 1c
	00 00 00	 movss	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+28], xmm0

; 723  : 	polygon_3d_vertices[2].u2 = current_terrain_points_xz[this_point].x * texture_scale2;

  00628	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  0062b	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_terrain_points_xz@@3PAUTERRAIN_3D_POINT_XZ@@A ; current_terrain_points_xz
  00631	0f bf 14 81	 movsx	 edx, WORD PTR [ecx+eax*4]
  00635	f3 0f 2a c2	 cvtsi2ss xmm0, edx
  00639	f3 0f 59 45 f0	 mulss	 xmm0, DWORD PTR _texture_scale2$[ebp]
  0063e	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  00643	d1 e0		 shl	 eax, 1
  00645	f3 0f 11 80 20
	00 00 00	 movss	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+32], xmm0

; 724  : 	polygon_3d_vertices[2].v2 = current_terrain_points_xz[this_point].z * texture_scale2;

  0064d	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  00650	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_terrain_points_xz@@3PAUTERRAIN_3D_POINT_XZ@@A ; current_terrain_points_xz
  00656	0f bf 54 81 02	 movsx	 edx, WORD PTR [ecx+eax*4+2]
  0065b	f3 0f 2a c2	 cvtsi2ss xmm0, edx
  0065f	f3 0f 59 45 f0	 mulss	 xmm0, DWORD PTR _texture_scale2$[ebp]
  00664	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  00669	d1 e0		 shl	 eax, 1
  0066b	f3 0f 11 80 24
	00 00 00	 movss	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+36], xmm0

; 725  : 	polygon_3d_vertices[2].normal_index = normal_index;

  00673	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  00678	d1 e0		 shl	 eax, 1
  0067a	8a 4d f8	 mov	 cl, BYTE PTR _normal_index$[ebp]
  0067d	88 88 2f 00 00
	00		 mov	 BYTE PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+47], cl

; 726  : 	polygon_3d_vertices[2].next_vertex = NULL;

  00683	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  00688	d1 e0		 shl	 eax, 1
  0068a	c7 80 28 00 00
	00 00 00 00 00	 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+40], 0

; 727  : 
; 728  : 	return ( polygon_3d_vertices );

  00694	b8 00 00 00 00	 mov	 eax, OFFSET ?polygon_3d_vertices@@3PAUVERTEX@@A ; polygon_3d_vertices

; 729  : }

  00699	5f		 pop	 edi
  0069a	5e		 pop	 esi
  0069b	5b		 pop	 ebx
  0069c	8b e5		 mov	 esp, ebp
  0069e	5d		 pop	 ebp
  0069f	c2 04 00	 ret	 4
?construct_3d_terrain_dual_texture_triangle@@YGPAUVERTEX@@PAH@Z ENDP ; construct_3d_terrain_dual_texture_triangle
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\modules\3d\terrain\terrcons.c
;	COMDAT ?construct_3d_terrain_zy_triangle@@YGPAUVERTEX@@PAH@Z
_TEXT	SEGMENT
_v$ = -28						; size = 4
_u$ = -24						; size = 4
_y$ = -20						; size = 4
_y_texture_scale$ = -16					; size = 4
_xz_texture_scale$ = -12				; size = 4
_normal_index$ = -8					; size = 4
_this_point$ = -4					; size = 4
_reference_points$ = 8					; size = 4
?construct_3d_terrain_zy_triangle@@YGPAUVERTEX@@PAH@Z PROC ; construct_3d_terrain_zy_triangle, COMDAT

; 564  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 5c	 sub	 esp, 92			; 0000005cH
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 565  : 
; 566  : 	int
; 567  : 		this_point,
; 568  : 		normal_index;
; 569  : 
; 570  : 	float
; 571  : 		xz_texture_scale,
; 572  : 		y_texture_scale,
; 573  : 		y,
; 574  : 		u,
; 575  : 		v;
; 576  : 
; 577  : 	terrain_3d_faces_constructed++;

  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ?terrain_3d_faces_constructed@@3HA ; terrain_3d_faces_constructed
  0000e	83 c0 01	 add	 eax, 1
  00011	a3 00 00 00 00	 mov	 DWORD PTR ?terrain_3d_faces_constructed@@3HA, eax ; terrain_3d_faces_constructed

; 578  : 
; 579  : 	xz_texture_scale = current_terrain_type_class->xz_texture_scale;

  00016	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_terrain_type_class@@3PAUTERRAIN_TYPE_INFO@@A ; current_terrain_type_class
  0001b	f3 0f 10 40 10	 movss	 xmm0, DWORD PTR [eax+16]
  00020	f3 0f 11 45 f4	 movss	 DWORD PTR _xz_texture_scale$[ebp], xmm0

; 580  : 	y_texture_scale = current_terrain_type_class->y_texture_scale;

  00025	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_terrain_type_class@@3PAUTERRAIN_TYPE_INFO@@A ; current_terrain_type_class
  0002a	f3 0f 10 40 14	 movss	 xmm0, DWORD PTR [eax+20]
  0002f	f3 0f 11 45 f0	 movss	 DWORD PTR _y_texture_scale$[ebp], xmm0

; 581  : 
; 582  : 	this_point = reference_points[0];

  00034	b8 04 00 00 00	 mov	 eax, 4
  00039	6b c8 00	 imul	 ecx, eax, 0
  0003c	8b 55 08	 mov	 edx, DWORD PTR _reference_points$[ebp]
  0003f	8b 04 0a	 mov	 eax, DWORD PTR [edx+ecx]
  00042	89 45 fc	 mov	 DWORD PTR _this_point$[ebp], eax

; 583  : 	normal_index = transformed_3d_point_colours[this_point].normal_index;

  00045	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  00048	0f b6 0c c5 05
	00 00 00	 movzx	 ecx, BYTE PTR ?transformed_3d_point_colours@@3PAUTERRAIN_3D_TRANSFORMED_POINT_COLOUR@@A[eax*8+5]
  00050	89 4d f8	 mov	 DWORD PTR _normal_index$[ebp], ecx

; 584  : 	y = terrain_3d_map_minimum_height + ( ( ( float ) current_terrain_points_y[this_point].y ) * terrain_3d_map_scaled_height_difference );

  00053	b8 ff 7f 00 00	 mov	 eax, 32767		; 00007fffH
  00058	8b 4d fc	 mov	 ecx, DWORD PTR _this_point$[ebp]
  0005b	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?current_terrain_points_y@@3PAUTERRAIN_3D_POINT_Y@@A ; current_terrain_points_y
  00061	66 23 04 4a	 and	 ax, WORD PTR [edx+ecx*2]
  00065	0f b7 c0	 movzx	 eax, ax
  00068	f3 0f 2a c0	 cvtsi2ss xmm0, eax
  0006c	f3 0f 59 05 00
	00 00 00	 mulss	 xmm0, DWORD PTR ?terrain_3d_map_scaled_height_difference@@3MA
  00074	f3 0f 58 05 00
	00 00 00	 addss	 xmm0, DWORD PTR ?terrain_3d_map_minimum_height@@3MA
  0007c	f3 0f 11 45 ec	 movss	 DWORD PTR _y$[ebp], xmm0

; 585  : 	u = current_terrain_points_xz[this_point].z * xz_texture_scale;

  00081	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  00084	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_terrain_points_xz@@3PAUTERRAIN_3D_POINT_XZ@@A ; current_terrain_points_xz
  0008a	0f bf 54 81 02	 movsx	 edx, WORD PTR [ecx+eax*4+2]
  0008f	f3 0f 2a c2	 cvtsi2ss xmm0, edx
  00093	f3 0f 59 45 f4	 mulss	 xmm0, DWORD PTR _xz_texture_scale$[ebp]
  00098	f3 0f 11 45 e8	 movss	 DWORD PTR _u$[ebp], xmm0

; 586  : 	v = y * y_texture_scale;

  0009d	f3 0f 10 45 ec	 movss	 xmm0, DWORD PTR _y$[ebp]
  000a2	f3 0f 59 45 f0	 mulss	 xmm0, DWORD PTR _y_texture_scale$[ebp]
  000a7	f3 0f 11 45 e4	 movss	 DWORD PTR _v$[ebp], xmm0

; 587  : 	polygon_3d_vertices[0].x = transformed_3d_3d_points[this_point].x;

  000ac	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  000b1	6b c8 00	 imul	 ecx, eax, 0
  000b4	8b 55 fc	 mov	 edx, DWORD PTR _this_point$[ebp]
  000b7	8b 04 d5 00 00
	00 00		 mov	 eax, DWORD PTR ?transformed_3d_3d_points@@3PAUOBJECT_TRANSFORMED_3D_POINT@@A[edx*8]
  000be	89 81 00 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx], eax

; 588  : 	polygon_3d_vertices[0].y = transformed_3d_3d_points[this_point].y;

  000c4	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  000c9	6b c8 00	 imul	 ecx, eax, 0
  000cc	8b 55 fc	 mov	 edx, DWORD PTR _this_point$[ebp]
  000cf	8b 04 d5 04 00
	00 00		 mov	 eax, DWORD PTR ?transformed_3d_3d_points@@3PAUOBJECT_TRANSFORMED_3D_POINT@@A[edx*8+4]
  000d6	89 81 04 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+4], eax

; 589  : 	polygon_3d_vertices[0].z = transformed_3d_2d_points[this_point].z;

  000dc	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  000df	c1 e0 04	 shl	 eax, 4
  000e2	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  000e7	6b d1 00	 imul	 edx, ecx, 0
  000ea	8b 80 0c 00 00
	00		 mov	 eax, DWORD PTR ?transformed_3d_2d_points@@3PAUOBJECT_TRANSFORMED_2D_POINT@@A[eax+12]
  000f0	89 82 08 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[edx+8], eax

; 590  : 	polygon_3d_vertices[0].i = transformed_3d_2d_points[this_point].i;

  000f6	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  000f9	c1 e0 04	 shl	 eax, 4
  000fc	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  00101	6b d1 00	 imul	 edx, ecx, 0
  00104	8b 80 00 00 00
	00		 mov	 eax, DWORD PTR ?transformed_3d_2d_points@@3PAUOBJECT_TRANSFORMED_2D_POINT@@A[eax]
  0010a	89 82 10 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[edx+16], eax

; 591  : 	polygon_3d_vertices[0].j = transformed_3d_2d_points[this_point].j;

  00110	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  00113	c1 e0 04	 shl	 eax, 4
  00116	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  0011b	6b d1 00	 imul	 edx, ecx, 0
  0011e	8b 80 04 00 00
	00		 mov	 eax, DWORD PTR ?transformed_3d_2d_points@@3PAUOBJECT_TRANSFORMED_2D_POINT@@A[eax+4]
  00124	89 82 14 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[edx+20], eax

; 592  : 	polygon_3d_vertices[0].q = transformed_3d_2d_points[this_point].q;

  0012a	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  0012d	c1 e0 04	 shl	 eax, 4
  00130	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  00135	6b d1 00	 imul	 edx, ecx, 0
  00138	8b 80 08 00 00
	00		 mov	 eax, DWORD PTR ?transformed_3d_2d_points@@3PAUOBJECT_TRANSFORMED_2D_POINT@@A[eax+8]
  0013e	89 82 0c 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[edx+12], eax

; 593  : 	polygon_3d_vertices[0].outcode = transformed_3d_point_outcodes[this_point];

  00144	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  00149	6b c8 00	 imul	 ecx, eax, 0
  0014c	8b 55 fc	 mov	 edx, DWORD PTR _this_point$[ebp]
  0014f	8a 82 00 00 00
	00		 mov	 al, BYTE PTR ?transformed_3d_point_outcodes@@3PAEA[edx]
  00155	88 81 2c 00 00
	00		 mov	 BYTE PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+44], al

; 594  : 	polygon_3d_vertices[0].colour = transformed_3d_point_colours[this_point].colour;

  0015b	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  00160	6b c8 00	 imul	 ecx, eax, 0
  00163	8b 55 fc	 mov	 edx, DWORD PTR _this_point$[ebp]
  00166	8b 04 d5 00 00
	00 00		 mov	 eax, DWORD PTR ?transformed_3d_point_colours@@3PAUTERRAIN_3D_TRANSFORMED_POINT_COLOUR@@A[edx*8]
  0016d	89 81 30 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+48], eax

; 595  : 	polygon_3d_vertices[0].fog = transformed_3d_point_colours[this_point].fog;

  00173	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  00178	6b c8 00	 imul	 ecx, eax, 0
  0017b	8b 55 fc	 mov	 edx, DWORD PTR _this_point$[ebp]
  0017e	8a 04 d5 04 00
	00 00		 mov	 al, BYTE PTR ?transformed_3d_point_colours@@3PAUTERRAIN_3D_TRANSFORMED_POINT_COLOUR@@A[edx*8+4]
  00185	88 81 2e 00 00
	00		 mov	 BYTE PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+46], al

; 596  : 	polygon_3d_vertices[0].u = u;

  0018b	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  00190	6b c8 00	 imul	 ecx, eax, 0
  00193	f3 0f 10 45 e8	 movss	 xmm0, DWORD PTR _u$[ebp]
  00198	f3 0f 11 81 18
	00 00 00	 movss	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+24], xmm0

; 597  : 	polygon_3d_vertices[0].v = v;

  001a0	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  001a5	6b c8 00	 imul	 ecx, eax, 0
  001a8	f3 0f 10 45 e4	 movss	 xmm0, DWORD PTR _v$[ebp]
  001ad	f3 0f 11 81 1c
	00 00 00	 movss	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+28], xmm0

; 598  : 	polygon_3d_vertices[0].normal_index = normal_index;

  001b5	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  001ba	6b c8 00	 imul	 ecx, eax, 0
  001bd	8a 55 f8	 mov	 dl, BYTE PTR _normal_index$[ebp]
  001c0	88 91 2f 00 00
	00		 mov	 BYTE PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+47], dl

; 599  : 	polygon_3d_vertices[0].next_vertex = &polygon_3d_vertices[1];

  001c6	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  001cb	c1 e0 00	 shl	 eax, 0
  001ce	05 00 00 00 00	 add	 eax, OFFSET ?polygon_3d_vertices@@3PAUVERTEX@@A ; polygon_3d_vertices
  001d3	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  001d8	6b d1 00	 imul	 edx, ecx, 0
  001db	89 82 28 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[edx+40], eax

; 600  : 
; 601  : 	this_point = reference_points[1];

  001e1	b8 04 00 00 00	 mov	 eax, 4
  001e6	c1 e0 00	 shl	 eax, 0
  001e9	8b 4d 08	 mov	 ecx, DWORD PTR _reference_points$[ebp]
  001ec	8b 14 01	 mov	 edx, DWORD PTR [ecx+eax]
  001ef	89 55 fc	 mov	 DWORD PTR _this_point$[ebp], edx

; 602  : 	normal_index = transformed_3d_point_colours[this_point].normal_index;

  001f2	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  001f5	0f b6 0c c5 05
	00 00 00	 movzx	 ecx, BYTE PTR ?transformed_3d_point_colours@@3PAUTERRAIN_3D_TRANSFORMED_POINT_COLOUR@@A[eax*8+5]
  001fd	89 4d f8	 mov	 DWORD PTR _normal_index$[ebp], ecx

; 603  : 	y = terrain_3d_map_minimum_height + ( ( ( float ) current_terrain_points_y[this_point].y ) * terrain_3d_map_scaled_height_difference );

  00200	b8 ff 7f 00 00	 mov	 eax, 32767		; 00007fffH
  00205	8b 4d fc	 mov	 ecx, DWORD PTR _this_point$[ebp]
  00208	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?current_terrain_points_y@@3PAUTERRAIN_3D_POINT_Y@@A ; current_terrain_points_y
  0020e	66 23 04 4a	 and	 ax, WORD PTR [edx+ecx*2]
  00212	0f b7 c0	 movzx	 eax, ax
  00215	f3 0f 2a c0	 cvtsi2ss xmm0, eax
  00219	f3 0f 59 05 00
	00 00 00	 mulss	 xmm0, DWORD PTR ?terrain_3d_map_scaled_height_difference@@3MA
  00221	f3 0f 58 05 00
	00 00 00	 addss	 xmm0, DWORD PTR ?terrain_3d_map_minimum_height@@3MA
  00229	f3 0f 11 45 ec	 movss	 DWORD PTR _y$[ebp], xmm0

; 604  : 	u = current_terrain_points_xz[this_point].z * xz_texture_scale;

  0022e	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  00231	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_terrain_points_xz@@3PAUTERRAIN_3D_POINT_XZ@@A ; current_terrain_points_xz
  00237	0f bf 54 81 02	 movsx	 edx, WORD PTR [ecx+eax*4+2]
  0023c	f3 0f 2a c2	 cvtsi2ss xmm0, edx
  00240	f3 0f 59 45 f4	 mulss	 xmm0, DWORD PTR _xz_texture_scale$[ebp]
  00245	f3 0f 11 45 e8	 movss	 DWORD PTR _u$[ebp], xmm0

; 605  : 	v = y * y_texture_scale;

  0024a	f3 0f 10 45 ec	 movss	 xmm0, DWORD PTR _y$[ebp]
  0024f	f3 0f 59 45 f0	 mulss	 xmm0, DWORD PTR _y_texture_scale$[ebp]
  00254	f3 0f 11 45 e4	 movss	 DWORD PTR _v$[ebp], xmm0

; 606  : 	polygon_3d_vertices[1].x = transformed_3d_3d_points[this_point].x;

  00259	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  0025e	c1 e0 00	 shl	 eax, 0
  00261	8b 4d fc	 mov	 ecx, DWORD PTR _this_point$[ebp]
  00264	8b 14 cd 00 00
	00 00		 mov	 edx, DWORD PTR ?transformed_3d_3d_points@@3PAUOBJECT_TRANSFORMED_3D_POINT@@A[ecx*8]
  0026b	89 90 00 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax], edx

; 607  : 	polygon_3d_vertices[1].y = transformed_3d_3d_points[this_point].y;

  00271	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  00276	c1 e0 00	 shl	 eax, 0
  00279	8b 4d fc	 mov	 ecx, DWORD PTR _this_point$[ebp]
  0027c	8b 14 cd 04 00
	00 00		 mov	 edx, DWORD PTR ?transformed_3d_3d_points@@3PAUOBJECT_TRANSFORMED_3D_POINT@@A[ecx*8+4]
  00283	89 90 04 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+4], edx

; 608  : 	polygon_3d_vertices[1].z = transformed_3d_2d_points[this_point].z;

  00289	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  0028c	c1 e0 04	 shl	 eax, 4
  0028f	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  00294	c1 e1 00	 shl	 ecx, 0
  00297	8b 90 0c 00 00
	00		 mov	 edx, DWORD PTR ?transformed_3d_2d_points@@3PAUOBJECT_TRANSFORMED_2D_POINT@@A[eax+12]
  0029d	89 91 08 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+8], edx

; 609  : 	polygon_3d_vertices[1].i = transformed_3d_2d_points[this_point].i;

  002a3	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  002a6	c1 e0 04	 shl	 eax, 4
  002a9	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  002ae	c1 e1 00	 shl	 ecx, 0
  002b1	8b 90 00 00 00
	00		 mov	 edx, DWORD PTR ?transformed_3d_2d_points@@3PAUOBJECT_TRANSFORMED_2D_POINT@@A[eax]
  002b7	89 91 10 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+16], edx

; 610  : 	polygon_3d_vertices[1].j = transformed_3d_2d_points[this_point].j;

  002bd	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  002c0	c1 e0 04	 shl	 eax, 4
  002c3	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  002c8	c1 e1 00	 shl	 ecx, 0
  002cb	8b 90 04 00 00
	00		 mov	 edx, DWORD PTR ?transformed_3d_2d_points@@3PAUOBJECT_TRANSFORMED_2D_POINT@@A[eax+4]
  002d1	89 91 14 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+20], edx

; 611  : 	polygon_3d_vertices[1].q = transformed_3d_2d_points[this_point].q;

  002d7	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  002da	c1 e0 04	 shl	 eax, 4
  002dd	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  002e2	c1 e1 00	 shl	 ecx, 0
  002e5	8b 90 08 00 00
	00		 mov	 edx, DWORD PTR ?transformed_3d_2d_points@@3PAUOBJECT_TRANSFORMED_2D_POINT@@A[eax+8]
  002eb	89 91 0c 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+12], edx

; 612  : 	polygon_3d_vertices[1].outcode = transformed_3d_point_outcodes[this_point];

  002f1	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  002f6	c1 e0 00	 shl	 eax, 0
  002f9	8b 4d fc	 mov	 ecx, DWORD PTR _this_point$[ebp]
  002fc	8a 91 00 00 00
	00		 mov	 dl, BYTE PTR ?transformed_3d_point_outcodes@@3PAEA[ecx]
  00302	88 90 2c 00 00
	00		 mov	 BYTE PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+44], dl

; 613  : 	polygon_3d_vertices[1].colour = transformed_3d_point_colours[this_point].colour;

  00308	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  0030d	c1 e0 00	 shl	 eax, 0
  00310	8b 4d fc	 mov	 ecx, DWORD PTR _this_point$[ebp]
  00313	8b 14 cd 00 00
	00 00		 mov	 edx, DWORD PTR ?transformed_3d_point_colours@@3PAUTERRAIN_3D_TRANSFORMED_POINT_COLOUR@@A[ecx*8]
  0031a	89 90 30 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+48], edx

; 614  : 	polygon_3d_vertices[1].fog = transformed_3d_point_colours[this_point].fog;

  00320	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  00325	c1 e0 00	 shl	 eax, 0
  00328	8b 4d fc	 mov	 ecx, DWORD PTR _this_point$[ebp]
  0032b	8a 14 cd 04 00
	00 00		 mov	 dl, BYTE PTR ?transformed_3d_point_colours@@3PAUTERRAIN_3D_TRANSFORMED_POINT_COLOUR@@A[ecx*8+4]
  00332	88 90 2e 00 00
	00		 mov	 BYTE PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+46], dl

; 615  : 	polygon_3d_vertices[1].u = u;

  00338	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  0033d	c1 e0 00	 shl	 eax, 0
  00340	f3 0f 10 45 e8	 movss	 xmm0, DWORD PTR _u$[ebp]
  00345	f3 0f 11 80 18
	00 00 00	 movss	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+24], xmm0

; 616  : 	polygon_3d_vertices[1].v = v;

  0034d	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  00352	c1 e0 00	 shl	 eax, 0
  00355	f3 0f 10 45 e4	 movss	 xmm0, DWORD PTR _v$[ebp]
  0035a	f3 0f 11 80 1c
	00 00 00	 movss	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+28], xmm0

; 617  : 	polygon_3d_vertices[1].normal_index = normal_index;

  00362	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  00367	c1 e0 00	 shl	 eax, 0
  0036a	8a 4d f8	 mov	 cl, BYTE PTR _normal_index$[ebp]
  0036d	88 88 2f 00 00
	00		 mov	 BYTE PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+47], cl

; 618  : 	polygon_3d_vertices[1].next_vertex = &polygon_3d_vertices[2];

  00373	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  00378	d1 e0		 shl	 eax, 1
  0037a	05 00 00 00 00	 add	 eax, OFFSET ?polygon_3d_vertices@@3PAUVERTEX@@A ; polygon_3d_vertices
  0037f	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  00384	c1 e1 00	 shl	 ecx, 0
  00387	89 81 28 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+40], eax

; 619  : 
; 620  : 	this_point = reference_points[2];

  0038d	b8 04 00 00 00	 mov	 eax, 4
  00392	d1 e0		 shl	 eax, 1
  00394	8b 4d 08	 mov	 ecx, DWORD PTR _reference_points$[ebp]
  00397	8b 14 01	 mov	 edx, DWORD PTR [ecx+eax]
  0039a	89 55 fc	 mov	 DWORD PTR _this_point$[ebp], edx

; 621  : 	normal_index = transformed_3d_point_colours[this_point].normal_index;

  0039d	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  003a0	0f b6 0c c5 05
	00 00 00	 movzx	 ecx, BYTE PTR ?transformed_3d_point_colours@@3PAUTERRAIN_3D_TRANSFORMED_POINT_COLOUR@@A[eax*8+5]
  003a8	89 4d f8	 mov	 DWORD PTR _normal_index$[ebp], ecx

; 622  : 	y = terrain_3d_map_minimum_height + ( ( ( float ) current_terrain_points_y[this_point].y ) * terrain_3d_map_scaled_height_difference );

  003ab	b8 ff 7f 00 00	 mov	 eax, 32767		; 00007fffH
  003b0	8b 4d fc	 mov	 ecx, DWORD PTR _this_point$[ebp]
  003b3	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?current_terrain_points_y@@3PAUTERRAIN_3D_POINT_Y@@A ; current_terrain_points_y
  003b9	66 23 04 4a	 and	 ax, WORD PTR [edx+ecx*2]
  003bd	0f b7 c0	 movzx	 eax, ax
  003c0	f3 0f 2a c0	 cvtsi2ss xmm0, eax
  003c4	f3 0f 59 05 00
	00 00 00	 mulss	 xmm0, DWORD PTR ?terrain_3d_map_scaled_height_difference@@3MA
  003cc	f3 0f 58 05 00
	00 00 00	 addss	 xmm0, DWORD PTR ?terrain_3d_map_minimum_height@@3MA
  003d4	f3 0f 11 45 ec	 movss	 DWORD PTR _y$[ebp], xmm0

; 623  : 	u = current_terrain_points_xz[this_point].z * xz_texture_scale;

  003d9	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  003dc	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_terrain_points_xz@@3PAUTERRAIN_3D_POINT_XZ@@A ; current_terrain_points_xz
  003e2	0f bf 54 81 02	 movsx	 edx, WORD PTR [ecx+eax*4+2]
  003e7	f3 0f 2a c2	 cvtsi2ss xmm0, edx
  003eb	f3 0f 59 45 f4	 mulss	 xmm0, DWORD PTR _xz_texture_scale$[ebp]
  003f0	f3 0f 11 45 e8	 movss	 DWORD PTR _u$[ebp], xmm0

; 624  : 	v = y * y_texture_scale;

  003f5	f3 0f 10 45 ec	 movss	 xmm0, DWORD PTR _y$[ebp]
  003fa	f3 0f 59 45 f0	 mulss	 xmm0, DWORD PTR _y_texture_scale$[ebp]
  003ff	f3 0f 11 45 e4	 movss	 DWORD PTR _v$[ebp], xmm0

; 625  : 	polygon_3d_vertices[2].x = transformed_3d_3d_points[this_point].x;

  00404	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  00409	d1 e0		 shl	 eax, 1
  0040b	8b 4d fc	 mov	 ecx, DWORD PTR _this_point$[ebp]
  0040e	8b 14 cd 00 00
	00 00		 mov	 edx, DWORD PTR ?transformed_3d_3d_points@@3PAUOBJECT_TRANSFORMED_3D_POINT@@A[ecx*8]
  00415	89 90 00 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax], edx

; 626  : 	polygon_3d_vertices[2].y = transformed_3d_3d_points[this_point].y;

  0041b	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  00420	d1 e0		 shl	 eax, 1
  00422	8b 4d fc	 mov	 ecx, DWORD PTR _this_point$[ebp]
  00425	8b 14 cd 04 00
	00 00		 mov	 edx, DWORD PTR ?transformed_3d_3d_points@@3PAUOBJECT_TRANSFORMED_3D_POINT@@A[ecx*8+4]
  0042c	89 90 04 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+4], edx

; 627  : 	polygon_3d_vertices[2].z = transformed_3d_2d_points[this_point].z;

  00432	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  00435	c1 e0 04	 shl	 eax, 4
  00438	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  0043d	d1 e1		 shl	 ecx, 1
  0043f	8b 90 0c 00 00
	00		 mov	 edx, DWORD PTR ?transformed_3d_2d_points@@3PAUOBJECT_TRANSFORMED_2D_POINT@@A[eax+12]
  00445	89 91 08 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+8], edx

; 628  : 	polygon_3d_vertices[2].i = transformed_3d_2d_points[this_point].i;

  0044b	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  0044e	c1 e0 04	 shl	 eax, 4
  00451	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  00456	d1 e1		 shl	 ecx, 1
  00458	8b 90 00 00 00
	00		 mov	 edx, DWORD PTR ?transformed_3d_2d_points@@3PAUOBJECT_TRANSFORMED_2D_POINT@@A[eax]
  0045e	89 91 10 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+16], edx

; 629  : 	polygon_3d_vertices[2].j = transformed_3d_2d_points[this_point].j;

  00464	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  00467	c1 e0 04	 shl	 eax, 4
  0046a	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  0046f	d1 e1		 shl	 ecx, 1
  00471	8b 90 04 00 00
	00		 mov	 edx, DWORD PTR ?transformed_3d_2d_points@@3PAUOBJECT_TRANSFORMED_2D_POINT@@A[eax+4]
  00477	89 91 14 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+20], edx

; 630  : 	polygon_3d_vertices[2].q = transformed_3d_2d_points[this_point].q;

  0047d	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  00480	c1 e0 04	 shl	 eax, 4
  00483	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  00488	d1 e1		 shl	 ecx, 1
  0048a	8b 90 08 00 00
	00		 mov	 edx, DWORD PTR ?transformed_3d_2d_points@@3PAUOBJECT_TRANSFORMED_2D_POINT@@A[eax+8]
  00490	89 91 0c 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+12], edx

; 631  : 	polygon_3d_vertices[2].outcode = transformed_3d_point_outcodes[this_point];

  00496	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  0049b	d1 e0		 shl	 eax, 1
  0049d	8b 4d fc	 mov	 ecx, DWORD PTR _this_point$[ebp]
  004a0	8a 91 00 00 00
	00		 mov	 dl, BYTE PTR ?transformed_3d_point_outcodes@@3PAEA[ecx]
  004a6	88 90 2c 00 00
	00		 mov	 BYTE PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+44], dl

; 632  : 	polygon_3d_vertices[2].colour = transformed_3d_point_colours[this_point].colour;

  004ac	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  004b1	d1 e0		 shl	 eax, 1
  004b3	8b 4d fc	 mov	 ecx, DWORD PTR _this_point$[ebp]
  004b6	8b 14 cd 00 00
	00 00		 mov	 edx, DWORD PTR ?transformed_3d_point_colours@@3PAUTERRAIN_3D_TRANSFORMED_POINT_COLOUR@@A[ecx*8]
  004bd	89 90 30 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+48], edx

; 633  : 	polygon_3d_vertices[2].fog = transformed_3d_point_colours[this_point].fog;

  004c3	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  004c8	d1 e0		 shl	 eax, 1
  004ca	8b 4d fc	 mov	 ecx, DWORD PTR _this_point$[ebp]
  004cd	8a 14 cd 04 00
	00 00		 mov	 dl, BYTE PTR ?transformed_3d_point_colours@@3PAUTERRAIN_3D_TRANSFORMED_POINT_COLOUR@@A[ecx*8+4]
  004d4	88 90 2e 00 00
	00		 mov	 BYTE PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+46], dl

; 634  : 	polygon_3d_vertices[2].u = u;

  004da	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  004df	d1 e0		 shl	 eax, 1
  004e1	f3 0f 10 45 e8	 movss	 xmm0, DWORD PTR _u$[ebp]
  004e6	f3 0f 11 80 18
	00 00 00	 movss	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+24], xmm0

; 635  : 	polygon_3d_vertices[2].v = v;

  004ee	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  004f3	d1 e0		 shl	 eax, 1
  004f5	f3 0f 10 45 e4	 movss	 xmm0, DWORD PTR _v$[ebp]
  004fa	f3 0f 11 80 1c
	00 00 00	 movss	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+28], xmm0

; 636  : 	polygon_3d_vertices[2].normal_index = normal_index;

  00502	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  00507	d1 e0		 shl	 eax, 1
  00509	8a 4d f8	 mov	 cl, BYTE PTR _normal_index$[ebp]
  0050c	88 88 2f 00 00
	00		 mov	 BYTE PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+47], cl

; 637  : 	polygon_3d_vertices[2].next_vertex = NULL;

  00512	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  00517	d1 e0		 shl	 eax, 1
  00519	c7 80 28 00 00
	00 00 00 00 00	 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+40], 0

; 638  : 
; 639  : 	return ( polygon_3d_vertices );

  00523	b8 00 00 00 00	 mov	 eax, OFFSET ?polygon_3d_vertices@@3PAUVERTEX@@A ; polygon_3d_vertices

; 640  : }

  00528	5f		 pop	 edi
  00529	5e		 pop	 esi
  0052a	5b		 pop	 ebx
  0052b	8b e5		 mov	 esp, ebp
  0052d	5d		 pop	 ebp
  0052e	c2 04 00	 ret	 4
?construct_3d_terrain_zy_triangle@@YGPAUVERTEX@@PAH@Z ENDP ; construct_3d_terrain_zy_triangle
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\modules\3d\terrain\terrcons.c
;	COMDAT ?construct_3d_terrain_xy_triangle@@YGPAUVERTEX@@PAH@Z
_TEXT	SEGMENT
_v$ = -28						; size = 4
_u$ = -24						; size = 4
_y$ = -20						; size = 4
_y_texture_scale$ = -16					; size = 4
_xz_texture_scale$ = -12				; size = 4
_normal_index$ = -8					; size = 4
_this_point$ = -4					; size = 4
_reference_points$ = 8					; size = 4
?construct_3d_terrain_xy_triangle@@YGPAUVERTEX@@PAH@Z PROC ; construct_3d_terrain_xy_triangle, COMDAT

; 481  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 5c	 sub	 esp, 92			; 0000005cH
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 482  : 
; 483  : 	int
; 484  : 		this_point,
; 485  : 		normal_index;
; 486  : 
; 487  : 	float
; 488  : 		xz_texture_scale,
; 489  : 		y_texture_scale,
; 490  : 		y,
; 491  : 		u,
; 492  : 		v;
; 493  : 
; 494  : 	terrain_3d_faces_constructed++;

  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ?terrain_3d_faces_constructed@@3HA ; terrain_3d_faces_constructed
  0000e	83 c0 01	 add	 eax, 1
  00011	a3 00 00 00 00	 mov	 DWORD PTR ?terrain_3d_faces_constructed@@3HA, eax ; terrain_3d_faces_constructed

; 495  : 
; 496  : 	xz_texture_scale = current_terrain_type_class->xz_texture_scale;

  00016	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_terrain_type_class@@3PAUTERRAIN_TYPE_INFO@@A ; current_terrain_type_class
  0001b	f3 0f 10 40 10	 movss	 xmm0, DWORD PTR [eax+16]
  00020	f3 0f 11 45 f4	 movss	 DWORD PTR _xz_texture_scale$[ebp], xmm0

; 497  : 	y_texture_scale = current_terrain_type_class->y_texture_scale;

  00025	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_terrain_type_class@@3PAUTERRAIN_TYPE_INFO@@A ; current_terrain_type_class
  0002a	f3 0f 10 40 14	 movss	 xmm0, DWORD PTR [eax+20]
  0002f	f3 0f 11 45 f0	 movss	 DWORD PTR _y_texture_scale$[ebp], xmm0

; 498  : 
; 499  : 	this_point = reference_points[0];

  00034	b8 04 00 00 00	 mov	 eax, 4
  00039	6b c8 00	 imul	 ecx, eax, 0
  0003c	8b 55 08	 mov	 edx, DWORD PTR _reference_points$[ebp]
  0003f	8b 04 0a	 mov	 eax, DWORD PTR [edx+ecx]
  00042	89 45 fc	 mov	 DWORD PTR _this_point$[ebp], eax

; 500  : 	normal_index = transformed_3d_point_colours[this_point].normal_index;

  00045	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  00048	0f b6 0c c5 05
	00 00 00	 movzx	 ecx, BYTE PTR ?transformed_3d_point_colours@@3PAUTERRAIN_3D_TRANSFORMED_POINT_COLOUR@@A[eax*8+5]
  00050	89 4d f8	 mov	 DWORD PTR _normal_index$[ebp], ecx

; 501  : 	y = terrain_3d_map_minimum_height + ( ( ( float ) current_terrain_points_y[this_point].y ) * terrain_3d_map_scaled_height_difference );

  00053	b8 ff 7f 00 00	 mov	 eax, 32767		; 00007fffH
  00058	8b 4d fc	 mov	 ecx, DWORD PTR _this_point$[ebp]
  0005b	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?current_terrain_points_y@@3PAUTERRAIN_3D_POINT_Y@@A ; current_terrain_points_y
  00061	66 23 04 4a	 and	 ax, WORD PTR [edx+ecx*2]
  00065	0f b7 c0	 movzx	 eax, ax
  00068	f3 0f 2a c0	 cvtsi2ss xmm0, eax
  0006c	f3 0f 59 05 00
	00 00 00	 mulss	 xmm0, DWORD PTR ?terrain_3d_map_scaled_height_difference@@3MA
  00074	f3 0f 58 05 00
	00 00 00	 addss	 xmm0, DWORD PTR ?terrain_3d_map_minimum_height@@3MA
  0007c	f3 0f 11 45 ec	 movss	 DWORD PTR _y$[ebp], xmm0

; 502  : 	u = current_terrain_points_xz[this_point].x * xz_texture_scale;

  00081	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  00084	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_terrain_points_xz@@3PAUTERRAIN_3D_POINT_XZ@@A ; current_terrain_points_xz
  0008a	0f bf 14 81	 movsx	 edx, WORD PTR [ecx+eax*4]
  0008e	f3 0f 2a c2	 cvtsi2ss xmm0, edx
  00092	f3 0f 59 45 f4	 mulss	 xmm0, DWORD PTR _xz_texture_scale$[ebp]
  00097	f3 0f 11 45 e8	 movss	 DWORD PTR _u$[ebp], xmm0

; 503  : 	v = y * y_texture_scale;

  0009c	f3 0f 10 45 ec	 movss	 xmm0, DWORD PTR _y$[ebp]
  000a1	f3 0f 59 45 f0	 mulss	 xmm0, DWORD PTR _y_texture_scale$[ebp]
  000a6	f3 0f 11 45 e4	 movss	 DWORD PTR _v$[ebp], xmm0

; 504  : 	polygon_3d_vertices[0].x = transformed_3d_3d_points[this_point].x;

  000ab	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  000b0	6b c8 00	 imul	 ecx, eax, 0
  000b3	8b 55 fc	 mov	 edx, DWORD PTR _this_point$[ebp]
  000b6	8b 04 d5 00 00
	00 00		 mov	 eax, DWORD PTR ?transformed_3d_3d_points@@3PAUOBJECT_TRANSFORMED_3D_POINT@@A[edx*8]
  000bd	89 81 00 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx], eax

; 505  : 	polygon_3d_vertices[0].y = transformed_3d_3d_points[this_point].y;

  000c3	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  000c8	6b c8 00	 imul	 ecx, eax, 0
  000cb	8b 55 fc	 mov	 edx, DWORD PTR _this_point$[ebp]
  000ce	8b 04 d5 04 00
	00 00		 mov	 eax, DWORD PTR ?transformed_3d_3d_points@@3PAUOBJECT_TRANSFORMED_3D_POINT@@A[edx*8+4]
  000d5	89 81 04 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+4], eax

; 506  : 	polygon_3d_vertices[0].z = transformed_3d_2d_points[this_point].z;

  000db	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  000de	c1 e0 04	 shl	 eax, 4
  000e1	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  000e6	6b d1 00	 imul	 edx, ecx, 0
  000e9	8b 80 0c 00 00
	00		 mov	 eax, DWORD PTR ?transformed_3d_2d_points@@3PAUOBJECT_TRANSFORMED_2D_POINT@@A[eax+12]
  000ef	89 82 08 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[edx+8], eax

; 507  : 	polygon_3d_vertices[0].i = transformed_3d_2d_points[this_point].i;

  000f5	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  000f8	c1 e0 04	 shl	 eax, 4
  000fb	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  00100	6b d1 00	 imul	 edx, ecx, 0
  00103	8b 80 00 00 00
	00		 mov	 eax, DWORD PTR ?transformed_3d_2d_points@@3PAUOBJECT_TRANSFORMED_2D_POINT@@A[eax]
  00109	89 82 10 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[edx+16], eax

; 508  : 	polygon_3d_vertices[0].j = transformed_3d_2d_points[this_point].j;

  0010f	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  00112	c1 e0 04	 shl	 eax, 4
  00115	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  0011a	6b d1 00	 imul	 edx, ecx, 0
  0011d	8b 80 04 00 00
	00		 mov	 eax, DWORD PTR ?transformed_3d_2d_points@@3PAUOBJECT_TRANSFORMED_2D_POINT@@A[eax+4]
  00123	89 82 14 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[edx+20], eax

; 509  : 	polygon_3d_vertices[0].q = transformed_3d_2d_points[this_point].q;

  00129	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  0012c	c1 e0 04	 shl	 eax, 4
  0012f	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  00134	6b d1 00	 imul	 edx, ecx, 0
  00137	8b 80 08 00 00
	00		 mov	 eax, DWORD PTR ?transformed_3d_2d_points@@3PAUOBJECT_TRANSFORMED_2D_POINT@@A[eax+8]
  0013d	89 82 0c 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[edx+12], eax

; 510  : 	polygon_3d_vertices[0].outcode = transformed_3d_point_outcodes[this_point];

  00143	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  00148	6b c8 00	 imul	 ecx, eax, 0
  0014b	8b 55 fc	 mov	 edx, DWORD PTR _this_point$[ebp]
  0014e	8a 82 00 00 00
	00		 mov	 al, BYTE PTR ?transformed_3d_point_outcodes@@3PAEA[edx]
  00154	88 81 2c 00 00
	00		 mov	 BYTE PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+44], al

; 511  : 	polygon_3d_vertices[0].colour = transformed_3d_point_colours[this_point].colour;

  0015a	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  0015f	6b c8 00	 imul	 ecx, eax, 0
  00162	8b 55 fc	 mov	 edx, DWORD PTR _this_point$[ebp]
  00165	8b 04 d5 00 00
	00 00		 mov	 eax, DWORD PTR ?transformed_3d_point_colours@@3PAUTERRAIN_3D_TRANSFORMED_POINT_COLOUR@@A[edx*8]
  0016c	89 81 30 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+48], eax

; 512  : 	polygon_3d_vertices[0].fog = transformed_3d_point_colours[this_point].fog;

  00172	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  00177	6b c8 00	 imul	 ecx, eax, 0
  0017a	8b 55 fc	 mov	 edx, DWORD PTR _this_point$[ebp]
  0017d	8a 04 d5 04 00
	00 00		 mov	 al, BYTE PTR ?transformed_3d_point_colours@@3PAUTERRAIN_3D_TRANSFORMED_POINT_COLOUR@@A[edx*8+4]
  00184	88 81 2e 00 00
	00		 mov	 BYTE PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+46], al

; 513  : 	polygon_3d_vertices[0].u = u;

  0018a	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  0018f	6b c8 00	 imul	 ecx, eax, 0
  00192	f3 0f 10 45 e8	 movss	 xmm0, DWORD PTR _u$[ebp]
  00197	f3 0f 11 81 18
	00 00 00	 movss	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+24], xmm0

; 514  : 	polygon_3d_vertices[0].v = v;

  0019f	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  001a4	6b c8 00	 imul	 ecx, eax, 0
  001a7	f3 0f 10 45 e4	 movss	 xmm0, DWORD PTR _v$[ebp]
  001ac	f3 0f 11 81 1c
	00 00 00	 movss	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+28], xmm0

; 515  : 	polygon_3d_vertices[0].normal_index = normal_index;

  001b4	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  001b9	6b c8 00	 imul	 ecx, eax, 0
  001bc	8a 55 f8	 mov	 dl, BYTE PTR _normal_index$[ebp]
  001bf	88 91 2f 00 00
	00		 mov	 BYTE PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+47], dl

; 516  : 	polygon_3d_vertices[0].next_vertex = &polygon_3d_vertices[1];

  001c5	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  001ca	c1 e0 00	 shl	 eax, 0
  001cd	05 00 00 00 00	 add	 eax, OFFSET ?polygon_3d_vertices@@3PAUVERTEX@@A ; polygon_3d_vertices
  001d2	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  001d7	6b d1 00	 imul	 edx, ecx, 0
  001da	89 82 28 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[edx+40], eax

; 517  : 
; 518  : 	this_point = reference_points[1];

  001e0	b8 04 00 00 00	 mov	 eax, 4
  001e5	c1 e0 00	 shl	 eax, 0
  001e8	8b 4d 08	 mov	 ecx, DWORD PTR _reference_points$[ebp]
  001eb	8b 14 01	 mov	 edx, DWORD PTR [ecx+eax]
  001ee	89 55 fc	 mov	 DWORD PTR _this_point$[ebp], edx

; 519  : 	normal_index = transformed_3d_point_colours[this_point].normal_index;

  001f1	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  001f4	0f b6 0c c5 05
	00 00 00	 movzx	 ecx, BYTE PTR ?transformed_3d_point_colours@@3PAUTERRAIN_3D_TRANSFORMED_POINT_COLOUR@@A[eax*8+5]
  001fc	89 4d f8	 mov	 DWORD PTR _normal_index$[ebp], ecx

; 520  : 	y = terrain_3d_map_minimum_height + ( ( ( float ) current_terrain_points_y[this_point].y ) * terrain_3d_map_scaled_height_difference );

  001ff	b8 ff 7f 00 00	 mov	 eax, 32767		; 00007fffH
  00204	8b 4d fc	 mov	 ecx, DWORD PTR _this_point$[ebp]
  00207	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?current_terrain_points_y@@3PAUTERRAIN_3D_POINT_Y@@A ; current_terrain_points_y
  0020d	66 23 04 4a	 and	 ax, WORD PTR [edx+ecx*2]
  00211	0f b7 c0	 movzx	 eax, ax
  00214	f3 0f 2a c0	 cvtsi2ss xmm0, eax
  00218	f3 0f 59 05 00
	00 00 00	 mulss	 xmm0, DWORD PTR ?terrain_3d_map_scaled_height_difference@@3MA
  00220	f3 0f 58 05 00
	00 00 00	 addss	 xmm0, DWORD PTR ?terrain_3d_map_minimum_height@@3MA
  00228	f3 0f 11 45 ec	 movss	 DWORD PTR _y$[ebp], xmm0

; 521  : 	u = current_terrain_points_xz[this_point].x * xz_texture_scale;

  0022d	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  00230	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_terrain_points_xz@@3PAUTERRAIN_3D_POINT_XZ@@A ; current_terrain_points_xz
  00236	0f bf 14 81	 movsx	 edx, WORD PTR [ecx+eax*4]
  0023a	f3 0f 2a c2	 cvtsi2ss xmm0, edx
  0023e	f3 0f 59 45 f4	 mulss	 xmm0, DWORD PTR _xz_texture_scale$[ebp]
  00243	f3 0f 11 45 e8	 movss	 DWORD PTR _u$[ebp], xmm0

; 522  : 	v = y * y_texture_scale;

  00248	f3 0f 10 45 ec	 movss	 xmm0, DWORD PTR _y$[ebp]
  0024d	f3 0f 59 45 f0	 mulss	 xmm0, DWORD PTR _y_texture_scale$[ebp]
  00252	f3 0f 11 45 e4	 movss	 DWORD PTR _v$[ebp], xmm0

; 523  : 	polygon_3d_vertices[1].x = transformed_3d_3d_points[this_point].x;

  00257	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  0025c	c1 e0 00	 shl	 eax, 0
  0025f	8b 4d fc	 mov	 ecx, DWORD PTR _this_point$[ebp]
  00262	8b 14 cd 00 00
	00 00		 mov	 edx, DWORD PTR ?transformed_3d_3d_points@@3PAUOBJECT_TRANSFORMED_3D_POINT@@A[ecx*8]
  00269	89 90 00 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax], edx

; 524  : 	polygon_3d_vertices[1].y = transformed_3d_3d_points[this_point].y;

  0026f	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  00274	c1 e0 00	 shl	 eax, 0
  00277	8b 4d fc	 mov	 ecx, DWORD PTR _this_point$[ebp]
  0027a	8b 14 cd 04 00
	00 00		 mov	 edx, DWORD PTR ?transformed_3d_3d_points@@3PAUOBJECT_TRANSFORMED_3D_POINT@@A[ecx*8+4]
  00281	89 90 04 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+4], edx

; 525  : 	polygon_3d_vertices[1].z = transformed_3d_2d_points[this_point].z;

  00287	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  0028a	c1 e0 04	 shl	 eax, 4
  0028d	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  00292	c1 e1 00	 shl	 ecx, 0
  00295	8b 90 0c 00 00
	00		 mov	 edx, DWORD PTR ?transformed_3d_2d_points@@3PAUOBJECT_TRANSFORMED_2D_POINT@@A[eax+12]
  0029b	89 91 08 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+8], edx

; 526  : 	polygon_3d_vertices[1].i = transformed_3d_2d_points[this_point].i;

  002a1	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  002a4	c1 e0 04	 shl	 eax, 4
  002a7	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  002ac	c1 e1 00	 shl	 ecx, 0
  002af	8b 90 00 00 00
	00		 mov	 edx, DWORD PTR ?transformed_3d_2d_points@@3PAUOBJECT_TRANSFORMED_2D_POINT@@A[eax]
  002b5	89 91 10 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+16], edx

; 527  : 	polygon_3d_vertices[1].j = transformed_3d_2d_points[this_point].j;

  002bb	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  002be	c1 e0 04	 shl	 eax, 4
  002c1	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  002c6	c1 e1 00	 shl	 ecx, 0
  002c9	8b 90 04 00 00
	00		 mov	 edx, DWORD PTR ?transformed_3d_2d_points@@3PAUOBJECT_TRANSFORMED_2D_POINT@@A[eax+4]
  002cf	89 91 14 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+20], edx

; 528  : 	polygon_3d_vertices[1].q = transformed_3d_2d_points[this_point].q;

  002d5	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  002d8	c1 e0 04	 shl	 eax, 4
  002db	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  002e0	c1 e1 00	 shl	 ecx, 0
  002e3	8b 90 08 00 00
	00		 mov	 edx, DWORD PTR ?transformed_3d_2d_points@@3PAUOBJECT_TRANSFORMED_2D_POINT@@A[eax+8]
  002e9	89 91 0c 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+12], edx

; 529  : 	polygon_3d_vertices[1].outcode = transformed_3d_point_outcodes[this_point];

  002ef	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  002f4	c1 e0 00	 shl	 eax, 0
  002f7	8b 4d fc	 mov	 ecx, DWORD PTR _this_point$[ebp]
  002fa	8a 91 00 00 00
	00		 mov	 dl, BYTE PTR ?transformed_3d_point_outcodes@@3PAEA[ecx]
  00300	88 90 2c 00 00
	00		 mov	 BYTE PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+44], dl

; 530  : 	polygon_3d_vertices[1].colour = transformed_3d_point_colours[this_point].colour;

  00306	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  0030b	c1 e0 00	 shl	 eax, 0
  0030e	8b 4d fc	 mov	 ecx, DWORD PTR _this_point$[ebp]
  00311	8b 14 cd 00 00
	00 00		 mov	 edx, DWORD PTR ?transformed_3d_point_colours@@3PAUTERRAIN_3D_TRANSFORMED_POINT_COLOUR@@A[ecx*8]
  00318	89 90 30 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+48], edx

; 531  : 	polygon_3d_vertices[1].fog = transformed_3d_point_colours[this_point].fog;

  0031e	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  00323	c1 e0 00	 shl	 eax, 0
  00326	8b 4d fc	 mov	 ecx, DWORD PTR _this_point$[ebp]
  00329	8a 14 cd 04 00
	00 00		 mov	 dl, BYTE PTR ?transformed_3d_point_colours@@3PAUTERRAIN_3D_TRANSFORMED_POINT_COLOUR@@A[ecx*8+4]
  00330	88 90 2e 00 00
	00		 mov	 BYTE PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+46], dl

; 532  : 	polygon_3d_vertices[1].u = u;

  00336	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  0033b	c1 e0 00	 shl	 eax, 0
  0033e	f3 0f 10 45 e8	 movss	 xmm0, DWORD PTR _u$[ebp]
  00343	f3 0f 11 80 18
	00 00 00	 movss	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+24], xmm0

; 533  : 	polygon_3d_vertices[1].v = v;

  0034b	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  00350	c1 e0 00	 shl	 eax, 0
  00353	f3 0f 10 45 e4	 movss	 xmm0, DWORD PTR _v$[ebp]
  00358	f3 0f 11 80 1c
	00 00 00	 movss	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+28], xmm0

; 534  : 	polygon_3d_vertices[1].normal_index = normal_index;

  00360	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  00365	c1 e0 00	 shl	 eax, 0
  00368	8a 4d f8	 mov	 cl, BYTE PTR _normal_index$[ebp]
  0036b	88 88 2f 00 00
	00		 mov	 BYTE PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+47], cl

; 535  : 	polygon_3d_vertices[1].next_vertex = &polygon_3d_vertices[2];

  00371	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  00376	d1 e0		 shl	 eax, 1
  00378	05 00 00 00 00	 add	 eax, OFFSET ?polygon_3d_vertices@@3PAUVERTEX@@A ; polygon_3d_vertices
  0037d	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  00382	c1 e1 00	 shl	 ecx, 0
  00385	89 81 28 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+40], eax

; 536  : 
; 537  : 	this_point = reference_points[2];

  0038b	b8 04 00 00 00	 mov	 eax, 4
  00390	d1 e0		 shl	 eax, 1
  00392	8b 4d 08	 mov	 ecx, DWORD PTR _reference_points$[ebp]
  00395	8b 14 01	 mov	 edx, DWORD PTR [ecx+eax]
  00398	89 55 fc	 mov	 DWORD PTR _this_point$[ebp], edx

; 538  : 	normal_index = transformed_3d_point_colours[this_point].normal_index;

  0039b	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  0039e	0f b6 0c c5 05
	00 00 00	 movzx	 ecx, BYTE PTR ?transformed_3d_point_colours@@3PAUTERRAIN_3D_TRANSFORMED_POINT_COLOUR@@A[eax*8+5]
  003a6	89 4d f8	 mov	 DWORD PTR _normal_index$[ebp], ecx

; 539  : 	y = terrain_3d_map_minimum_height + ( ( ( float ) current_terrain_points_y[this_point].y ) * terrain_3d_map_scaled_height_difference );

  003a9	b8 ff 7f 00 00	 mov	 eax, 32767		; 00007fffH
  003ae	8b 4d fc	 mov	 ecx, DWORD PTR _this_point$[ebp]
  003b1	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?current_terrain_points_y@@3PAUTERRAIN_3D_POINT_Y@@A ; current_terrain_points_y
  003b7	66 23 04 4a	 and	 ax, WORD PTR [edx+ecx*2]
  003bb	0f b7 c0	 movzx	 eax, ax
  003be	f3 0f 2a c0	 cvtsi2ss xmm0, eax
  003c2	f3 0f 59 05 00
	00 00 00	 mulss	 xmm0, DWORD PTR ?terrain_3d_map_scaled_height_difference@@3MA
  003ca	f3 0f 58 05 00
	00 00 00	 addss	 xmm0, DWORD PTR ?terrain_3d_map_minimum_height@@3MA
  003d2	f3 0f 11 45 ec	 movss	 DWORD PTR _y$[ebp], xmm0

; 540  : 	u = current_terrain_points_xz[this_point].x * xz_texture_scale;

  003d7	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  003da	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_terrain_points_xz@@3PAUTERRAIN_3D_POINT_XZ@@A ; current_terrain_points_xz
  003e0	0f bf 14 81	 movsx	 edx, WORD PTR [ecx+eax*4]
  003e4	f3 0f 2a c2	 cvtsi2ss xmm0, edx
  003e8	f3 0f 59 45 f4	 mulss	 xmm0, DWORD PTR _xz_texture_scale$[ebp]
  003ed	f3 0f 11 45 e8	 movss	 DWORD PTR _u$[ebp], xmm0

; 541  : 	v = y * y_texture_scale;

  003f2	f3 0f 10 45 ec	 movss	 xmm0, DWORD PTR _y$[ebp]
  003f7	f3 0f 59 45 f0	 mulss	 xmm0, DWORD PTR _y_texture_scale$[ebp]
  003fc	f3 0f 11 45 e4	 movss	 DWORD PTR _v$[ebp], xmm0

; 542  : 	polygon_3d_vertices[2].x = transformed_3d_3d_points[this_point].x;

  00401	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  00406	d1 e0		 shl	 eax, 1
  00408	8b 4d fc	 mov	 ecx, DWORD PTR _this_point$[ebp]
  0040b	8b 14 cd 00 00
	00 00		 mov	 edx, DWORD PTR ?transformed_3d_3d_points@@3PAUOBJECT_TRANSFORMED_3D_POINT@@A[ecx*8]
  00412	89 90 00 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax], edx

; 543  : 	polygon_3d_vertices[2].y = transformed_3d_3d_points[this_point].y;

  00418	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  0041d	d1 e0		 shl	 eax, 1
  0041f	8b 4d fc	 mov	 ecx, DWORD PTR _this_point$[ebp]
  00422	8b 14 cd 04 00
	00 00		 mov	 edx, DWORD PTR ?transformed_3d_3d_points@@3PAUOBJECT_TRANSFORMED_3D_POINT@@A[ecx*8+4]
  00429	89 90 04 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+4], edx

; 544  : 	polygon_3d_vertices[2].z = transformed_3d_2d_points[this_point].z;

  0042f	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  00432	c1 e0 04	 shl	 eax, 4
  00435	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  0043a	d1 e1		 shl	 ecx, 1
  0043c	8b 90 0c 00 00
	00		 mov	 edx, DWORD PTR ?transformed_3d_2d_points@@3PAUOBJECT_TRANSFORMED_2D_POINT@@A[eax+12]
  00442	89 91 08 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+8], edx

; 545  : 	polygon_3d_vertices[2].i = transformed_3d_2d_points[this_point].i;

  00448	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  0044b	c1 e0 04	 shl	 eax, 4
  0044e	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  00453	d1 e1		 shl	 ecx, 1
  00455	8b 90 00 00 00
	00		 mov	 edx, DWORD PTR ?transformed_3d_2d_points@@3PAUOBJECT_TRANSFORMED_2D_POINT@@A[eax]
  0045b	89 91 10 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+16], edx

; 546  : 	polygon_3d_vertices[2].j = transformed_3d_2d_points[this_point].j;

  00461	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  00464	c1 e0 04	 shl	 eax, 4
  00467	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  0046c	d1 e1		 shl	 ecx, 1
  0046e	8b 90 04 00 00
	00		 mov	 edx, DWORD PTR ?transformed_3d_2d_points@@3PAUOBJECT_TRANSFORMED_2D_POINT@@A[eax+4]
  00474	89 91 14 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+20], edx

; 547  : 	polygon_3d_vertices[2].q = transformed_3d_2d_points[this_point].q;

  0047a	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  0047d	c1 e0 04	 shl	 eax, 4
  00480	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  00485	d1 e1		 shl	 ecx, 1
  00487	8b 90 08 00 00
	00		 mov	 edx, DWORD PTR ?transformed_3d_2d_points@@3PAUOBJECT_TRANSFORMED_2D_POINT@@A[eax+8]
  0048d	89 91 0c 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+12], edx

; 548  : 	polygon_3d_vertices[2].outcode = transformed_3d_point_outcodes[this_point];

  00493	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  00498	d1 e0		 shl	 eax, 1
  0049a	8b 4d fc	 mov	 ecx, DWORD PTR _this_point$[ebp]
  0049d	8a 91 00 00 00
	00		 mov	 dl, BYTE PTR ?transformed_3d_point_outcodes@@3PAEA[ecx]
  004a3	88 90 2c 00 00
	00		 mov	 BYTE PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+44], dl

; 549  : 	polygon_3d_vertices[2].colour = transformed_3d_point_colours[this_point].colour;

  004a9	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  004ae	d1 e0		 shl	 eax, 1
  004b0	8b 4d fc	 mov	 ecx, DWORD PTR _this_point$[ebp]
  004b3	8b 14 cd 00 00
	00 00		 mov	 edx, DWORD PTR ?transformed_3d_point_colours@@3PAUTERRAIN_3D_TRANSFORMED_POINT_COLOUR@@A[ecx*8]
  004ba	89 90 30 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+48], edx

; 550  : 	polygon_3d_vertices[2].fog = transformed_3d_point_colours[this_point].fog;

  004c0	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  004c5	d1 e0		 shl	 eax, 1
  004c7	8b 4d fc	 mov	 ecx, DWORD PTR _this_point$[ebp]
  004ca	8a 14 cd 04 00
	00 00		 mov	 dl, BYTE PTR ?transformed_3d_point_colours@@3PAUTERRAIN_3D_TRANSFORMED_POINT_COLOUR@@A[ecx*8+4]
  004d1	88 90 2e 00 00
	00		 mov	 BYTE PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+46], dl

; 551  : 	polygon_3d_vertices[2].u = u;

  004d7	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  004dc	d1 e0		 shl	 eax, 1
  004de	f3 0f 10 45 e8	 movss	 xmm0, DWORD PTR _u$[ebp]
  004e3	f3 0f 11 80 18
	00 00 00	 movss	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+24], xmm0

; 552  : 	polygon_3d_vertices[2].v = v;

  004eb	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  004f0	d1 e0		 shl	 eax, 1
  004f2	f3 0f 10 45 e4	 movss	 xmm0, DWORD PTR _v$[ebp]
  004f7	f3 0f 11 80 1c
	00 00 00	 movss	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+28], xmm0

; 553  : 	polygon_3d_vertices[2].normal_index = normal_index;

  004ff	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  00504	d1 e0		 shl	 eax, 1
  00506	8a 4d f8	 mov	 cl, BYTE PTR _normal_index$[ebp]
  00509	88 88 2f 00 00
	00		 mov	 BYTE PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+47], cl

; 554  : 	polygon_3d_vertices[2].next_vertex = NULL;

  0050f	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  00514	d1 e0		 shl	 eax, 1
  00516	c7 80 28 00 00
	00 00 00 00 00	 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+40], 0

; 555  : 
; 556  : 	return ( polygon_3d_vertices );

  00520	b8 00 00 00 00	 mov	 eax, OFFSET ?polygon_3d_vertices@@3PAUVERTEX@@A ; polygon_3d_vertices

; 557  : }

  00525	5f		 pop	 edi
  00526	5e		 pop	 esi
  00527	5b		 pop	 ebx
  00528	8b e5		 mov	 esp, ebp
  0052a	5d		 pop	 ebp
  0052b	c2 04 00	 ret	 4
?construct_3d_terrain_xy_triangle@@YGPAUVERTEX@@PAH@Z ENDP ; construct_3d_terrain_xy_triangle
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\modules\3d\terrain\terrcons.c
;	COMDAT ?construct_3d_terrain_triangle@@YGPAUVERTEX@@PAH@Z
_TEXT	SEGMENT
_texture_scale$ = -8					; size = 4
_this_point$ = -4					; size = 4
_reference_points$ = 8					; size = 4
?construct_3d_terrain_triangle@@YGPAUVERTEX@@PAH@Z PROC	; construct_3d_terrain_triangle, COMDAT

; 416  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 48	 sub	 esp, 72			; 00000048H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 417  : 
; 418  : 	int
; 419  : 		this_point;
; 420  : 
; 421  : 	float
; 422  : 		texture_scale;
; 423  : 
; 424  : 	terrain_3d_faces_constructed++;

  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ?terrain_3d_faces_constructed@@3HA ; terrain_3d_faces_constructed
  0000e	83 c0 01	 add	 eax, 1
  00011	a3 00 00 00 00	 mov	 DWORD PTR ?terrain_3d_faces_constructed@@3HA, eax ; terrain_3d_faces_constructed

; 425  : 
; 426  : 	texture_scale = current_terrain_type_class->xz_texture_scale;

  00016	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_terrain_type_class@@3PAUTERRAIN_TYPE_INFO@@A ; current_terrain_type_class
  0001b	f3 0f 10 40 10	 movss	 xmm0, DWORD PTR [eax+16]
  00020	f3 0f 11 45 f8	 movss	 DWORD PTR _texture_scale$[ebp], xmm0

; 427  : 
; 428  : 	this_point = reference_points[0];

  00025	b8 04 00 00 00	 mov	 eax, 4
  0002a	6b c8 00	 imul	 ecx, eax, 0
  0002d	8b 55 08	 mov	 edx, DWORD PTR _reference_points$[ebp]
  00030	8b 04 0a	 mov	 eax, DWORD PTR [edx+ecx]
  00033	89 45 fc	 mov	 DWORD PTR _this_point$[ebp], eax

; 429  : 	*( ( int * ) &polygon_3d_vertices[0].x ) = *( ( int * ) &transformed_3d_3d_points[this_point].x );

  00036	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  0003b	6b c8 00	 imul	 ecx, eax, 0
  0003e	8b 55 fc	 mov	 edx, DWORD PTR _this_point$[ebp]
  00041	8b 04 d5 00 00
	00 00		 mov	 eax, DWORD PTR ?transformed_3d_3d_points@@3PAUOBJECT_TRANSFORMED_3D_POINT@@A[edx*8]
  00048	89 81 00 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx], eax

; 430  : 	*( ( int * ) &polygon_3d_vertices[0].y ) = *( ( int * ) &transformed_3d_3d_points[this_point].y );

  0004e	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  00053	6b c8 00	 imul	 ecx, eax, 0
  00056	8b 55 fc	 mov	 edx, DWORD PTR _this_point$[ebp]
  00059	8b 04 d5 04 00
	00 00		 mov	 eax, DWORD PTR ?transformed_3d_3d_points@@3PAUOBJECT_TRANSFORMED_3D_POINT@@A[edx*8+4]
  00060	89 81 04 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+4], eax

; 431  : 	*( ( int * ) &polygon_3d_vertices[0].z ) = *( ( int * ) &transformed_3d_2d_points[this_point].z );

  00066	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  00069	c1 e0 04	 shl	 eax, 4
  0006c	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  00071	6b d1 00	 imul	 edx, ecx, 0
  00074	8b 80 0c 00 00
	00		 mov	 eax, DWORD PTR ?transformed_3d_2d_points@@3PAUOBJECT_TRANSFORMED_2D_POINT@@A[eax+12]
  0007a	89 82 08 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[edx+8], eax

; 432  : 	*( ( int * ) &polygon_3d_vertices[0].i ) = *( ( int * ) &transformed_3d_2d_points[this_point].i );

  00080	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  00083	c1 e0 04	 shl	 eax, 4
  00086	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  0008b	6b d1 00	 imul	 edx, ecx, 0
  0008e	8b 80 00 00 00
	00		 mov	 eax, DWORD PTR ?transformed_3d_2d_points@@3PAUOBJECT_TRANSFORMED_2D_POINT@@A[eax]
  00094	89 82 10 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[edx+16], eax

; 433  : 	*( ( int * ) &polygon_3d_vertices[0].j ) = *( ( int * ) &transformed_3d_2d_points[this_point].j );

  0009a	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  0009d	c1 e0 04	 shl	 eax, 4
  000a0	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  000a5	6b d1 00	 imul	 edx, ecx, 0
  000a8	8b 80 04 00 00
	00		 mov	 eax, DWORD PTR ?transformed_3d_2d_points@@3PAUOBJECT_TRANSFORMED_2D_POINT@@A[eax+4]
  000ae	89 82 14 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[edx+20], eax

; 434  : 	*( ( int * ) &polygon_3d_vertices[0].q ) = *( ( int * ) &transformed_3d_2d_points[this_point].q );

  000b4	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  000b7	c1 e0 04	 shl	 eax, 4
  000ba	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  000bf	6b d1 00	 imul	 edx, ecx, 0
  000c2	8b 80 08 00 00
	00		 mov	 eax, DWORD PTR ?transformed_3d_2d_points@@3PAUOBJECT_TRANSFORMED_2D_POINT@@A[eax+8]
  000c8	89 82 0c 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[edx+12], eax

; 435  : 	polygon_3d_vertices[0].outcode = transformed_3d_point_outcodes[this_point];

  000ce	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  000d3	6b c8 00	 imul	 ecx, eax, 0
  000d6	8b 55 fc	 mov	 edx, DWORD PTR _this_point$[ebp]
  000d9	8a 82 00 00 00
	00		 mov	 al, BYTE PTR ?transformed_3d_point_outcodes@@3PAEA[edx]
  000df	88 81 2c 00 00
	00		 mov	 BYTE PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+44], al

; 436  : 	polygon_3d_vertices[0].colour = transformed_3d_point_colours[this_point].colour;

  000e5	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  000ea	6b c8 00	 imul	 ecx, eax, 0
  000ed	8b 55 fc	 mov	 edx, DWORD PTR _this_point$[ebp]
  000f0	8b 04 d5 00 00
	00 00		 mov	 eax, DWORD PTR ?transformed_3d_point_colours@@3PAUTERRAIN_3D_TRANSFORMED_POINT_COLOUR@@A[edx*8]
  000f7	89 81 30 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+48], eax

; 437  : 	polygon_3d_vertices[0].fog = transformed_3d_point_colours[this_point].fog;

  000fd	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  00102	6b c8 00	 imul	 ecx, eax, 0
  00105	8b 55 fc	 mov	 edx, DWORD PTR _this_point$[ebp]
  00108	8a 04 d5 04 00
	00 00		 mov	 al, BYTE PTR ?transformed_3d_point_colours@@3PAUTERRAIN_3D_TRANSFORMED_POINT_COLOUR@@A[edx*8+4]
  0010f	88 81 2e 00 00
	00		 mov	 BYTE PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+46], al

; 438  : 	polygon_3d_vertices[0].u = current_terrain_points_xz[this_point].x * texture_scale;

  00115	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  00118	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_terrain_points_xz@@3PAUTERRAIN_3D_POINT_XZ@@A ; current_terrain_points_xz
  0011e	0f bf 14 81	 movsx	 edx, WORD PTR [ecx+eax*4]
  00122	f3 0f 2a c2	 cvtsi2ss xmm0, edx
  00126	f3 0f 59 45 f8	 mulss	 xmm0, DWORD PTR _texture_scale$[ebp]
  0012b	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  00130	6b c8 00	 imul	 ecx, eax, 0
  00133	f3 0f 11 81 18
	00 00 00	 movss	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+24], xmm0

; 439  : 	polygon_3d_vertices[0].v = current_terrain_points_xz[this_point].z * texture_scale;

  0013b	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  0013e	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_terrain_points_xz@@3PAUTERRAIN_3D_POINT_XZ@@A ; current_terrain_points_xz
  00144	0f bf 54 81 02	 movsx	 edx, WORD PTR [ecx+eax*4+2]
  00149	f3 0f 2a c2	 cvtsi2ss xmm0, edx
  0014d	f3 0f 59 45 f8	 mulss	 xmm0, DWORD PTR _texture_scale$[ebp]
  00152	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  00157	6b c8 00	 imul	 ecx, eax, 0
  0015a	f3 0f 11 81 1c
	00 00 00	 movss	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+28], xmm0

; 440  : 	polygon_3d_vertices[0].normal_index = transformed_3d_point_colours[this_point].normal_index;

  00162	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  00167	6b c8 00	 imul	 ecx, eax, 0
  0016a	8b 55 fc	 mov	 edx, DWORD PTR _this_point$[ebp]
  0016d	8a 04 d5 05 00
	00 00		 mov	 al, BYTE PTR ?transformed_3d_point_colours@@3PAUTERRAIN_3D_TRANSFORMED_POINT_COLOUR@@A[edx*8+5]
  00174	88 81 2f 00 00
	00		 mov	 BYTE PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+47], al

; 441  : 	polygon_3d_vertices[0].next_vertex = &polygon_3d_vertices[1];

  0017a	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  0017f	c1 e0 00	 shl	 eax, 0
  00182	05 00 00 00 00	 add	 eax, OFFSET ?polygon_3d_vertices@@3PAUVERTEX@@A ; polygon_3d_vertices
  00187	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  0018c	6b d1 00	 imul	 edx, ecx, 0
  0018f	89 82 28 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[edx+40], eax

; 442  : 
; 443  : 	this_point = reference_points[1];

  00195	b8 04 00 00 00	 mov	 eax, 4
  0019a	c1 e0 00	 shl	 eax, 0
  0019d	8b 4d 08	 mov	 ecx, DWORD PTR _reference_points$[ebp]
  001a0	8b 14 01	 mov	 edx, DWORD PTR [ecx+eax]
  001a3	89 55 fc	 mov	 DWORD PTR _this_point$[ebp], edx

; 444  : 	*( ( int * ) &polygon_3d_vertices[1].x ) = *( ( int * ) &transformed_3d_3d_points[this_point].x );

  001a6	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  001ab	c1 e0 00	 shl	 eax, 0
  001ae	8b 4d fc	 mov	 ecx, DWORD PTR _this_point$[ebp]
  001b1	8b 14 cd 00 00
	00 00		 mov	 edx, DWORD PTR ?transformed_3d_3d_points@@3PAUOBJECT_TRANSFORMED_3D_POINT@@A[ecx*8]
  001b8	89 90 00 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax], edx

; 445  : 	*( ( int * ) &polygon_3d_vertices[1].y ) = *( ( int * ) &transformed_3d_3d_points[this_point].y );

  001be	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  001c3	c1 e0 00	 shl	 eax, 0
  001c6	8b 4d fc	 mov	 ecx, DWORD PTR _this_point$[ebp]
  001c9	8b 14 cd 04 00
	00 00		 mov	 edx, DWORD PTR ?transformed_3d_3d_points@@3PAUOBJECT_TRANSFORMED_3D_POINT@@A[ecx*8+4]
  001d0	89 90 04 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+4], edx

; 446  : 	*( ( int * ) &polygon_3d_vertices[1].z ) = *( ( int * ) &transformed_3d_2d_points[this_point].z );

  001d6	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  001d9	c1 e0 04	 shl	 eax, 4
  001dc	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  001e1	c1 e1 00	 shl	 ecx, 0
  001e4	8b 90 0c 00 00
	00		 mov	 edx, DWORD PTR ?transformed_3d_2d_points@@3PAUOBJECT_TRANSFORMED_2D_POINT@@A[eax+12]
  001ea	89 91 08 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+8], edx

; 447  : 	*( ( int * ) &polygon_3d_vertices[1].i ) = *( ( int * ) &transformed_3d_2d_points[this_point].i );

  001f0	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  001f3	c1 e0 04	 shl	 eax, 4
  001f6	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  001fb	c1 e1 00	 shl	 ecx, 0
  001fe	8b 90 00 00 00
	00		 mov	 edx, DWORD PTR ?transformed_3d_2d_points@@3PAUOBJECT_TRANSFORMED_2D_POINT@@A[eax]
  00204	89 91 10 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+16], edx

; 448  : 	*( ( int * ) &polygon_3d_vertices[1].j ) = *( ( int * ) &transformed_3d_2d_points[this_point].j );

  0020a	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  0020d	c1 e0 04	 shl	 eax, 4
  00210	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  00215	c1 e1 00	 shl	 ecx, 0
  00218	8b 90 04 00 00
	00		 mov	 edx, DWORD PTR ?transformed_3d_2d_points@@3PAUOBJECT_TRANSFORMED_2D_POINT@@A[eax+4]
  0021e	89 91 14 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+20], edx

; 449  : 	*( ( int * ) &polygon_3d_vertices[1].q ) = *( ( int * ) &transformed_3d_2d_points[this_point].q );

  00224	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  00227	c1 e0 04	 shl	 eax, 4
  0022a	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  0022f	c1 e1 00	 shl	 ecx, 0
  00232	8b 90 08 00 00
	00		 mov	 edx, DWORD PTR ?transformed_3d_2d_points@@3PAUOBJECT_TRANSFORMED_2D_POINT@@A[eax+8]
  00238	89 91 0c 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+12], edx

; 450  : 	polygon_3d_vertices[1].outcode = transformed_3d_point_outcodes[this_point];

  0023e	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  00243	c1 e0 00	 shl	 eax, 0
  00246	8b 4d fc	 mov	 ecx, DWORD PTR _this_point$[ebp]
  00249	8a 91 00 00 00
	00		 mov	 dl, BYTE PTR ?transformed_3d_point_outcodes@@3PAEA[ecx]
  0024f	88 90 2c 00 00
	00		 mov	 BYTE PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+44], dl

; 451  : 	polygon_3d_vertices[1].colour = transformed_3d_point_colours[this_point].colour;

  00255	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  0025a	c1 e0 00	 shl	 eax, 0
  0025d	8b 4d fc	 mov	 ecx, DWORD PTR _this_point$[ebp]
  00260	8b 14 cd 00 00
	00 00		 mov	 edx, DWORD PTR ?transformed_3d_point_colours@@3PAUTERRAIN_3D_TRANSFORMED_POINT_COLOUR@@A[ecx*8]
  00267	89 90 30 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+48], edx

; 452  : 	polygon_3d_vertices[1].fog = transformed_3d_point_colours[this_point].fog;

  0026d	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  00272	c1 e0 00	 shl	 eax, 0
  00275	8b 4d fc	 mov	 ecx, DWORD PTR _this_point$[ebp]
  00278	8a 14 cd 04 00
	00 00		 mov	 dl, BYTE PTR ?transformed_3d_point_colours@@3PAUTERRAIN_3D_TRANSFORMED_POINT_COLOUR@@A[ecx*8+4]
  0027f	88 90 2e 00 00
	00		 mov	 BYTE PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+46], dl

; 453  : 	polygon_3d_vertices[1].u = current_terrain_points_xz[this_point].x * texture_scale;

  00285	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  00288	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_terrain_points_xz@@3PAUTERRAIN_3D_POINT_XZ@@A ; current_terrain_points_xz
  0028e	0f bf 14 81	 movsx	 edx, WORD PTR [ecx+eax*4]
  00292	f3 0f 2a c2	 cvtsi2ss xmm0, edx
  00296	f3 0f 59 45 f8	 mulss	 xmm0, DWORD PTR _texture_scale$[ebp]
  0029b	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  002a0	c1 e0 00	 shl	 eax, 0
  002a3	f3 0f 11 80 18
	00 00 00	 movss	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+24], xmm0

; 454  : 	polygon_3d_vertices[1].v = current_terrain_points_xz[this_point].z * texture_scale;

  002ab	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  002ae	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_terrain_points_xz@@3PAUTERRAIN_3D_POINT_XZ@@A ; current_terrain_points_xz
  002b4	0f bf 54 81 02	 movsx	 edx, WORD PTR [ecx+eax*4+2]
  002b9	f3 0f 2a c2	 cvtsi2ss xmm0, edx
  002bd	f3 0f 59 45 f8	 mulss	 xmm0, DWORD PTR _texture_scale$[ebp]
  002c2	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  002c7	c1 e0 00	 shl	 eax, 0
  002ca	f3 0f 11 80 1c
	00 00 00	 movss	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+28], xmm0

; 455  : 	polygon_3d_vertices[1].normal_index = transformed_3d_point_colours[this_point].normal_index;

  002d2	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  002d7	c1 e0 00	 shl	 eax, 0
  002da	8b 4d fc	 mov	 ecx, DWORD PTR _this_point$[ebp]
  002dd	8a 14 cd 05 00
	00 00		 mov	 dl, BYTE PTR ?transformed_3d_point_colours@@3PAUTERRAIN_3D_TRANSFORMED_POINT_COLOUR@@A[ecx*8+5]
  002e4	88 90 2f 00 00
	00		 mov	 BYTE PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+47], dl

; 456  : 	polygon_3d_vertices[1].next_vertex = &polygon_3d_vertices[2];

  002ea	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  002ef	d1 e0		 shl	 eax, 1
  002f1	05 00 00 00 00	 add	 eax, OFFSET ?polygon_3d_vertices@@3PAUVERTEX@@A ; polygon_3d_vertices
  002f6	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  002fb	c1 e1 00	 shl	 ecx, 0
  002fe	89 81 28 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+40], eax

; 457  : 
; 458  : 	this_point = reference_points[2];

  00304	b8 04 00 00 00	 mov	 eax, 4
  00309	d1 e0		 shl	 eax, 1
  0030b	8b 4d 08	 mov	 ecx, DWORD PTR _reference_points$[ebp]
  0030e	8b 14 01	 mov	 edx, DWORD PTR [ecx+eax]
  00311	89 55 fc	 mov	 DWORD PTR _this_point$[ebp], edx

; 459  : 	*( ( int * ) &polygon_3d_vertices[2].x ) = *( ( int * ) &transformed_3d_3d_points[this_point].x );

  00314	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  00319	d1 e0		 shl	 eax, 1
  0031b	8b 4d fc	 mov	 ecx, DWORD PTR _this_point$[ebp]
  0031e	8b 14 cd 00 00
	00 00		 mov	 edx, DWORD PTR ?transformed_3d_3d_points@@3PAUOBJECT_TRANSFORMED_3D_POINT@@A[ecx*8]
  00325	89 90 00 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax], edx

; 460  : 	*( ( int * ) &polygon_3d_vertices[2].y ) = *( ( int * ) &transformed_3d_3d_points[this_point].y );

  0032b	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  00330	d1 e0		 shl	 eax, 1
  00332	8b 4d fc	 mov	 ecx, DWORD PTR _this_point$[ebp]
  00335	8b 14 cd 04 00
	00 00		 mov	 edx, DWORD PTR ?transformed_3d_3d_points@@3PAUOBJECT_TRANSFORMED_3D_POINT@@A[ecx*8+4]
  0033c	89 90 04 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+4], edx

; 461  : 	*( ( int * ) &polygon_3d_vertices[2].z ) = *( ( int * ) &transformed_3d_2d_points[this_point].z );

  00342	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  00345	c1 e0 04	 shl	 eax, 4
  00348	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  0034d	d1 e1		 shl	 ecx, 1
  0034f	8b 90 0c 00 00
	00		 mov	 edx, DWORD PTR ?transformed_3d_2d_points@@3PAUOBJECT_TRANSFORMED_2D_POINT@@A[eax+12]
  00355	89 91 08 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+8], edx

; 462  : 	*( ( int * ) &polygon_3d_vertices[2].i ) = *( ( int * ) &transformed_3d_2d_points[this_point].i );

  0035b	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  0035e	c1 e0 04	 shl	 eax, 4
  00361	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  00366	d1 e1		 shl	 ecx, 1
  00368	8b 90 00 00 00
	00		 mov	 edx, DWORD PTR ?transformed_3d_2d_points@@3PAUOBJECT_TRANSFORMED_2D_POINT@@A[eax]
  0036e	89 91 10 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+16], edx

; 463  : 	*( ( int * ) &polygon_3d_vertices[2].j ) = *( ( int * ) &transformed_3d_2d_points[this_point].j );

  00374	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  00377	c1 e0 04	 shl	 eax, 4
  0037a	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  0037f	d1 e1		 shl	 ecx, 1
  00381	8b 90 04 00 00
	00		 mov	 edx, DWORD PTR ?transformed_3d_2d_points@@3PAUOBJECT_TRANSFORMED_2D_POINT@@A[eax+4]
  00387	89 91 14 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+20], edx

; 464  : 	*( ( int * ) &polygon_3d_vertices[2].q ) = *( ( int * ) &transformed_3d_2d_points[this_point].q );

  0038d	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  00390	c1 e0 04	 shl	 eax, 4
  00393	b9 40 00 00 00	 mov	 ecx, 64			; 00000040H
  00398	d1 e1		 shl	 ecx, 1
  0039a	8b 90 08 00 00
	00		 mov	 edx, DWORD PTR ?transformed_3d_2d_points@@3PAUOBJECT_TRANSFORMED_2D_POINT@@A[eax+8]
  003a0	89 91 0c 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[ecx+12], edx

; 465  : 	polygon_3d_vertices[2].outcode = transformed_3d_point_outcodes[this_point];

  003a6	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  003ab	d1 e0		 shl	 eax, 1
  003ad	8b 4d fc	 mov	 ecx, DWORD PTR _this_point$[ebp]
  003b0	8a 91 00 00 00
	00		 mov	 dl, BYTE PTR ?transformed_3d_point_outcodes@@3PAEA[ecx]
  003b6	88 90 2c 00 00
	00		 mov	 BYTE PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+44], dl

; 466  : 	polygon_3d_vertices[2].colour = transformed_3d_point_colours[this_point].colour;

  003bc	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  003c1	d1 e0		 shl	 eax, 1
  003c3	8b 4d fc	 mov	 ecx, DWORD PTR _this_point$[ebp]
  003c6	8b 14 cd 00 00
	00 00		 mov	 edx, DWORD PTR ?transformed_3d_point_colours@@3PAUTERRAIN_3D_TRANSFORMED_POINT_COLOUR@@A[ecx*8]
  003cd	89 90 30 00 00
	00		 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+48], edx

; 467  : 	polygon_3d_vertices[2].fog = transformed_3d_point_colours[this_point].fog;

  003d3	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  003d8	d1 e0		 shl	 eax, 1
  003da	8b 4d fc	 mov	 ecx, DWORD PTR _this_point$[ebp]
  003dd	8a 14 cd 04 00
	00 00		 mov	 dl, BYTE PTR ?transformed_3d_point_colours@@3PAUTERRAIN_3D_TRANSFORMED_POINT_COLOUR@@A[ecx*8+4]
  003e4	88 90 2e 00 00
	00		 mov	 BYTE PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+46], dl

; 468  : 	polygon_3d_vertices[2].u = current_terrain_points_xz[this_point].x * texture_scale;

  003ea	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  003ed	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_terrain_points_xz@@3PAUTERRAIN_3D_POINT_XZ@@A ; current_terrain_points_xz
  003f3	0f bf 14 81	 movsx	 edx, WORD PTR [ecx+eax*4]
  003f7	f3 0f 2a c2	 cvtsi2ss xmm0, edx
  003fb	f3 0f 59 45 f8	 mulss	 xmm0, DWORD PTR _texture_scale$[ebp]
  00400	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  00405	d1 e0		 shl	 eax, 1
  00407	f3 0f 11 80 18
	00 00 00	 movss	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+24], xmm0

; 469  : 	polygon_3d_vertices[2].v = current_terrain_points_xz[this_point].z * texture_scale;

  0040f	8b 45 fc	 mov	 eax, DWORD PTR _this_point$[ebp]
  00412	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_terrain_points_xz@@3PAUTERRAIN_3D_POINT_XZ@@A ; current_terrain_points_xz
  00418	0f bf 54 81 02	 movsx	 edx, WORD PTR [ecx+eax*4+2]
  0041d	f3 0f 2a c2	 cvtsi2ss xmm0, edx
  00421	f3 0f 59 45 f8	 mulss	 xmm0, DWORD PTR _texture_scale$[ebp]
  00426	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  0042b	d1 e0		 shl	 eax, 1
  0042d	f3 0f 11 80 1c
	00 00 00	 movss	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+28], xmm0

; 470  : 	polygon_3d_vertices[2].normal_index = transformed_3d_point_colours[this_point].normal_index;

  00435	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  0043a	d1 e0		 shl	 eax, 1
  0043c	8b 4d fc	 mov	 ecx, DWORD PTR _this_point$[ebp]
  0043f	8a 14 cd 05 00
	00 00		 mov	 dl, BYTE PTR ?transformed_3d_point_colours@@3PAUTERRAIN_3D_TRANSFORMED_POINT_COLOUR@@A[ecx*8+5]
  00446	88 90 2f 00 00
	00		 mov	 BYTE PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+47], dl

; 471  : 	polygon_3d_vertices[2].next_vertex = NULL;

  0044c	b8 40 00 00 00	 mov	 eax, 64			; 00000040H
  00451	d1 e0		 shl	 eax, 1
  00453	c7 80 28 00 00
	00 00 00 00 00	 mov	 DWORD PTR ?polygon_3d_vertices@@3PAUVERTEX@@A[eax+40], 0

; 472  : 
; 473  : 	return ( polygon_3d_vertices );

  0045d	b8 00 00 00 00	 mov	 eax, OFFSET ?polygon_3d_vertices@@3PAUVERTEX@@A ; polygon_3d_vertices

; 474  : }

  00462	5f		 pop	 edi
  00463	5e		 pop	 esi
  00464	5b		 pop	 ebx
  00465	8b e5		 mov	 esp, ebp
  00467	5d		 pop	 ebp
  00468	c2 04 00	 ret	 4
?construct_3d_terrain_triangle@@YGPAUVERTEX@@PAH@Z ENDP	; construct_3d_terrain_triangle
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\modules\3d\terrain\terrcons.c
;	COMDAT ?construct_3d_terrain_byte_clipping_primitive@@YGXHPAUTERRAIN_3D_POINT_BYTE_REFERENCE@@@Z
_TEXT	SEGMENT
_texture_scale$ = -12					; size = 4
_this_point$ = -8					; size = 4
_count$ = -4						; size = 4
_number_of_points$ = 8					; size = 4
_reference_points$ = 12					; size = 4
?construct_3d_terrain_byte_clipping_primitive@@YGXHPAUTERRAIN_3D_POINT_BYTE_REFERENCE@@@Z PROC ; construct_3d_terrain_byte_clipping_primitive, COMDAT

; 380  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 4c	 sub	 esp, 76			; 0000004cH
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 381  : 
; 382  : 	int
; 383  : 		count,
; 384  : 		this_point;
; 385  : 
; 386  : 	float
; 387  : 		texture_scale;
; 388  : 
; 389  : 	terrain_3d_faces_constructed++;

  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ?terrain_3d_faces_constructed@@3HA ; terrain_3d_faces_constructed
  0000e	83 c0 01	 add	 eax, 1
  00011	a3 00 00 00 00	 mov	 DWORD PTR ?terrain_3d_faces_constructed@@3HA, eax ; terrain_3d_faces_constructed

; 390  : 
; 391  : 	texture_scale = current_terrain_type_class->xz_texture_scale;

  00016	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_terrain_type_class@@3PAUTERRAIN_TYPE_INFO@@A ; current_terrain_type_class
  0001b	f3 0f 10 40 10	 movss	 xmm0, DWORD PTR [eax+16]
  00020	f3 0f 11 45 f4	 movss	 DWORD PTR _texture_scale$[ebp], xmm0

; 392  : 
; 393  : 	for ( count = 0; count < number_of_points; count++ )

  00025	c7 45 fc 00 00
	00 00		 mov	 DWORD PTR _count$[ebp], 0
  0002c	eb 09		 jmp	 SHORT $LN4@construct_
$LN2@construct_:
  0002e	8b 45 fc	 mov	 eax, DWORD PTR _count$[ebp]
  00031	83 c0 01	 add	 eax, 1
  00034	89 45 fc	 mov	 DWORD PTR _count$[ebp], eax
$LN4@construct_:
  00037	8b 45 fc	 mov	 eax, DWORD PTR _count$[ebp]
  0003a	3b 45 08	 cmp	 eax, DWORD PTR _number_of_points$[ebp]
  0003d	0f 8d 27 01 00
	00		 jge	 $LN3@construct_

; 394  : 	{
; 395  : 	
; 396  : 		this_point = reference_points[count].point;

  00043	8b 45 0c	 mov	 eax, DWORD PTR _reference_points$[ebp]
  00046	03 45 fc	 add	 eax, DWORD PTR _count$[ebp]
  00049	0f b6 08	 movzx	 ecx, BYTE PTR [eax]
  0004c	89 4d f8	 mov	 DWORD PTR _this_point$[ebp], ecx

; 397  : 		*( ( int * ) &clipping_vertices[count].x ) = *( ( int * ) &transformed_3d_3d_points[this_point].x );

  0004f	8b 45 fc	 mov	 eax, DWORD PTR _count$[ebp]
  00052	c1 e0 06	 shl	 eax, 6
  00055	8b 4d f8	 mov	 ecx, DWORD PTR _this_point$[ebp]
  00058	8b 14 cd 00 00
	00 00		 mov	 edx, DWORD PTR ?transformed_3d_3d_points@@3PAUOBJECT_TRANSFORMED_3D_POINT@@A[ecx*8]
  0005f	89 90 00 00 00
	00		 mov	 DWORD PTR ?clipping_vertices@@3PAUVERTEX@@A[eax], edx

; 398  : 		*( ( int * ) &clipping_vertices[count].y ) = *( ( int * ) &transformed_3d_3d_points[this_point].y );

  00065	8b 45 fc	 mov	 eax, DWORD PTR _count$[ebp]
  00068	c1 e0 06	 shl	 eax, 6
  0006b	8b 4d f8	 mov	 ecx, DWORD PTR _this_point$[ebp]
  0006e	8b 14 cd 04 00
	00 00		 mov	 edx, DWORD PTR ?transformed_3d_3d_points@@3PAUOBJECT_TRANSFORMED_3D_POINT@@A[ecx*8+4]
  00075	89 90 04 00 00
	00		 mov	 DWORD PTR ?clipping_vertices@@3PAUVERTEX@@A[eax+4], edx

; 399  : 		*( ( int * ) &clipping_vertices[count].z ) = *( ( int * ) &transformed_3d_2d_points[this_point].z );

  0007b	8b 45 f8	 mov	 eax, DWORD PTR _this_point$[ebp]
  0007e	c1 e0 04	 shl	 eax, 4
  00081	8b 4d fc	 mov	 ecx, DWORD PTR _count$[ebp]
  00084	c1 e1 06	 shl	 ecx, 6
  00087	8b 90 0c 00 00
	00		 mov	 edx, DWORD PTR ?transformed_3d_2d_points@@3PAUOBJECT_TRANSFORMED_2D_POINT@@A[eax+12]
  0008d	89 91 08 00 00
	00		 mov	 DWORD PTR ?clipping_vertices@@3PAUVERTEX@@A[ecx+8], edx

; 400  : 		*( ( int * ) &clipping_vertices[count].i ) = *( ( int * ) &transformed_3d_2d_points[this_point].i );

  00093	8b 45 f8	 mov	 eax, DWORD PTR _this_point$[ebp]
  00096	c1 e0 04	 shl	 eax, 4
  00099	8b 4d fc	 mov	 ecx, DWORD PTR _count$[ebp]
  0009c	c1 e1 06	 shl	 ecx, 6
  0009f	8b 90 00 00 00
	00		 mov	 edx, DWORD PTR ?transformed_3d_2d_points@@3PAUOBJECT_TRANSFORMED_2D_POINT@@A[eax]
  000a5	89 91 10 00 00
	00		 mov	 DWORD PTR ?clipping_vertices@@3PAUVERTEX@@A[ecx+16], edx

; 401  : 		*( ( int * ) &clipping_vertices[count].j ) = *( ( int * ) &transformed_3d_2d_points[this_point].j );

  000ab	8b 45 f8	 mov	 eax, DWORD PTR _this_point$[ebp]
  000ae	c1 e0 04	 shl	 eax, 4
  000b1	8b 4d fc	 mov	 ecx, DWORD PTR _count$[ebp]
  000b4	c1 e1 06	 shl	 ecx, 6
  000b7	8b 90 04 00 00
	00		 mov	 edx, DWORD PTR ?transformed_3d_2d_points@@3PAUOBJECT_TRANSFORMED_2D_POINT@@A[eax+4]
  000bd	89 91 14 00 00
	00		 mov	 DWORD PTR ?clipping_vertices@@3PAUVERTEX@@A[ecx+20], edx

; 402  : 		*( ( int * ) &clipping_vertices[count].q ) = *( ( int * ) &transformed_3d_2d_points[this_point].q );

  000c3	8b 45 f8	 mov	 eax, DWORD PTR _this_point$[ebp]
  000c6	c1 e0 04	 shl	 eax, 4
  000c9	8b 4d fc	 mov	 ecx, DWORD PTR _count$[ebp]
  000cc	c1 e1 06	 shl	 ecx, 6
  000cf	8b 90 08 00 00
	00		 mov	 edx, DWORD PTR ?transformed_3d_2d_points@@3PAUOBJECT_TRANSFORMED_2D_POINT@@A[eax+8]
  000d5	89 91 0c 00 00
	00		 mov	 DWORD PTR ?clipping_vertices@@3PAUVERTEX@@A[ecx+12], edx

; 403  : 		clipping_vertices[count].outcode = transformed_3d_point_outcodes[this_point];

  000db	8b 45 fc	 mov	 eax, DWORD PTR _count$[ebp]
  000de	c1 e0 06	 shl	 eax, 6
  000e1	8b 4d f8	 mov	 ecx, DWORD PTR _this_point$[ebp]
  000e4	8a 91 00 00 00
	00		 mov	 dl, BYTE PTR ?transformed_3d_point_outcodes@@3PAEA[ecx]
  000ea	88 90 2c 00 00
	00		 mov	 BYTE PTR ?clipping_vertices@@3PAUVERTEX@@A[eax+44], dl

; 404  : 		clipping_vertices[count].colour = transformed_3d_point_colours[this_point].colour;

  000f0	8b 45 fc	 mov	 eax, DWORD PTR _count$[ebp]
  000f3	c1 e0 06	 shl	 eax, 6
  000f6	8b 4d f8	 mov	 ecx, DWORD PTR _this_point$[ebp]
  000f9	8b 14 cd 00 00
	00 00		 mov	 edx, DWORD PTR ?transformed_3d_point_colours@@3PAUTERRAIN_3D_TRANSFORMED_POINT_COLOUR@@A[ecx*8]
  00100	89 90 30 00 00
	00		 mov	 DWORD PTR ?clipping_vertices@@3PAUVERTEX@@A[eax+48], edx

; 405  : 		clipping_vertices[count].fog = transformed_3d_point_colours[this_point].fog;

  00106	8b 45 fc	 mov	 eax, DWORD PTR _count$[ebp]
  00109	c1 e0 06	 shl	 eax, 6
  0010c	8b 4d f8	 mov	 ecx, DWORD PTR _this_point$[ebp]
  0010f	8a 14 cd 04 00
	00 00		 mov	 dl, BYTE PTR ?transformed_3d_point_colours@@3PAUTERRAIN_3D_TRANSFORMED_POINT_COLOUR@@A[ecx*8+4]
  00116	88 90 2e 00 00
	00		 mov	 BYTE PTR ?clipping_vertices@@3PAUVERTEX@@A[eax+46], dl

; 406  : 		clipping_vertices[count].u = current_terrain_points_xz[this_point].x * texture_scale;

  0011c	8b 45 f8	 mov	 eax, DWORD PTR _this_point$[ebp]
  0011f	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_terrain_points_xz@@3PAUTERRAIN_3D_POINT_XZ@@A ; current_terrain_points_xz
  00125	0f bf 14 81	 movsx	 edx, WORD PTR [ecx+eax*4]
  00129	f3 0f 2a c2	 cvtsi2ss xmm0, edx
  0012d	f3 0f 59 45 f4	 mulss	 xmm0, DWORD PTR _texture_scale$[ebp]
  00132	8b 45 fc	 mov	 eax, DWORD PTR _count$[ebp]
  00135	c1 e0 06	 shl	 eax, 6
  00138	f3 0f 11 80 18
	00 00 00	 movss	 DWORD PTR ?clipping_vertices@@3PAUVERTEX@@A[eax+24], xmm0

; 407  : 		clipping_vertices[count].v = current_terrain_points_xz[this_point].z * texture_scale;

  00140	8b 45 f8	 mov	 eax, DWORD PTR _this_point$[ebp]
  00143	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_terrain_points_xz@@3PAUTERRAIN_3D_POINT_XZ@@A ; current_terrain_points_xz
  00149	0f bf 54 81 02	 movsx	 edx, WORD PTR [ecx+eax*4+2]
  0014e	f3 0f 2a c2	 cvtsi2ss xmm0, edx
  00152	f3 0f 59 45 f4	 mulss	 xmm0, DWORD PTR _texture_scale$[ebp]
  00157	8b 45 fc	 mov	 eax, DWORD PTR _count$[ebp]
  0015a	c1 e0 06	 shl	 eax, 6
  0015d	f3 0f 11 80 1c
	00 00 00	 movss	 DWORD PTR ?clipping_vertices@@3PAUVERTEX@@A[eax+28], xmm0

; 408  : 	}

  00165	e9 c4 fe ff ff	 jmp	 $LN2@construct_
$LN3@construct_:

; 409  : }

  0016a	5f		 pop	 edi
  0016b	5e		 pop	 esi
  0016c	5b		 pop	 ebx
  0016d	8b e5		 mov	 esp, ebp
  0016f	5d		 pop	 ebp
  00170	c2 08 00	 ret	 8
?construct_3d_terrain_byte_clipping_primitive@@YGXHPAUTERRAIN_3D_POINT_BYTE_REFERENCE@@@Z ENDP ; construct_3d_terrain_byte_clipping_primitive
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\modules\3d\terrain\terrcons.c
;	COMDAT ?construct_3d_terrain_word_clipping_primitive@@YGXHPAUTERRAIN_3D_POINT_WORD_REFERENCE@@@Z
_TEXT	SEGMENT
_texture_scale$ = -12					; size = 4
_this_point$ = -8					; size = 4
_count$ = -4						; size = 4
_number_of_points$ = 8					; size = 4
_reference_points$ = 12					; size = 4
?construct_3d_terrain_word_clipping_primitive@@YGXHPAUTERRAIN_3D_POINT_WORD_REFERENCE@@@Z PROC ; construct_3d_terrain_word_clipping_primitive, COMDAT

; 344  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 4c	 sub	 esp, 76			; 0000004cH
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 345  : 
; 346  : 	int
; 347  : 		count,
; 348  : 		this_point;
; 349  : 
; 350  : 	float
; 351  : 		texture_scale;
; 352  : 
; 353  : 	terrain_3d_faces_constructed++;

  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ?terrain_3d_faces_constructed@@3HA ; terrain_3d_faces_constructed
  0000e	83 c0 01	 add	 eax, 1
  00011	a3 00 00 00 00	 mov	 DWORD PTR ?terrain_3d_faces_constructed@@3HA, eax ; terrain_3d_faces_constructed

; 354  : 
; 355  : 	texture_scale = current_terrain_type_class->xz_texture_scale;

  00016	a1 00 00 00 00	 mov	 eax, DWORD PTR ?current_terrain_type_class@@3PAUTERRAIN_TYPE_INFO@@A ; current_terrain_type_class
  0001b	f3 0f 10 40 10	 movss	 xmm0, DWORD PTR [eax+16]
  00020	f3 0f 11 45 f4	 movss	 DWORD PTR _texture_scale$[ebp], xmm0

; 356  : 
; 357  : 	for ( count = 0; count < number_of_points; count++ )

  00025	c7 45 fc 00 00
	00 00		 mov	 DWORD PTR _count$[ebp], 0
  0002c	eb 09		 jmp	 SHORT $LN4@construct_
$LN2@construct_:
  0002e	8b 45 fc	 mov	 eax, DWORD PTR _count$[ebp]
  00031	83 c0 01	 add	 eax, 1
  00034	89 45 fc	 mov	 DWORD PTR _count$[ebp], eax
$LN4@construct_:
  00037	8b 45 fc	 mov	 eax, DWORD PTR _count$[ebp]
  0003a	3b 45 08	 cmp	 eax, DWORD PTR _number_of_points$[ebp]
  0003d	0f 8d 28 01 00
	00		 jge	 $LN3@construct_

; 358  : 	{
; 359  : 	
; 360  : 		this_point = reference_points[count].point;

  00043	8b 45 fc	 mov	 eax, DWORD PTR _count$[ebp]
  00046	8b 4d 0c	 mov	 ecx, DWORD PTR _reference_points$[ebp]
  00049	0f b7 14 41	 movzx	 edx, WORD PTR [ecx+eax*2]
  0004d	89 55 f8	 mov	 DWORD PTR _this_point$[ebp], edx

; 361  : 		*( ( int * ) &clipping_vertices[count].x ) = *( ( int * ) &transformed_3d_3d_points[this_point].x );

  00050	8b 45 fc	 mov	 eax, DWORD PTR _count$[ebp]
  00053	c1 e0 06	 shl	 eax, 6
  00056	8b 4d f8	 mov	 ecx, DWORD PTR _this_point$[ebp]
  00059	8b 14 cd 00 00
	00 00		 mov	 edx, DWORD PTR ?transformed_3d_3d_points@@3PAUOBJECT_TRANSFORMED_3D_POINT@@A[ecx*8]
  00060	89 90 00 00 00
	00		 mov	 DWORD PTR ?clipping_vertices@@3PAUVERTEX@@A[eax], edx

; 362  : 		*( ( int * ) &clipping_vertices[count].y ) = *( ( int * ) &transformed_3d_3d_points[this_point].y );

  00066	8b 45 fc	 mov	 eax, DWORD PTR _count$[ebp]
  00069	c1 e0 06	 shl	 eax, 6
  0006c	8b 4d f8	 mov	 ecx, DWORD PTR _this_point$[ebp]
  0006f	8b 14 cd 04 00
	00 00		 mov	 edx, DWORD PTR ?transformed_3d_3d_points@@3PAUOBJECT_TRANSFORMED_3D_POINT@@A[ecx*8+4]
  00076	89 90 04 00 00
	00		 mov	 DWORD PTR ?clipping_vertices@@3PAUVERTEX@@A[eax+4], edx

; 363  : 		*( ( int * ) &clipping_vertices[count].z ) = *( ( int * ) &transformed_3d_2d_points[this_point].z );

  0007c	8b 45 f8	 mov	 eax, DWORD PTR _this_point$[ebp]
  0007f	c1 e0 04	 shl	 eax, 4
  00082	8b 4d fc	 mov	 ecx, DWORD PTR _count$[ebp]
  00085	c1 e1 06	 shl	 ecx, 6
  00088	8b 90 0c 00 00
	00		 mov	 edx, DWORD PTR ?transformed_3d_2d_points@@3PAUOBJECT_TRANSFORMED_2D_POINT@@A[eax+12]
  0008e	89 91 08 00 00
	00		 mov	 DWORD PTR ?clipping_vertices@@3PAUVERTEX@@A[ecx+8], edx

; 364  : 		*( ( int * ) &clipping_vertices[count].i ) = *( ( int * ) &transformed_3d_2d_points[this_point].i );

  00094	8b 45 f8	 mov	 eax, DWORD PTR _this_point$[ebp]
  00097	c1 e0 04	 shl	 eax, 4
  0009a	8b 4d fc	 mov	 ecx, DWORD PTR _count$[ebp]
  0009d	c1 e1 06	 shl	 ecx, 6
  000a0	8b 90 00 00 00
	00		 mov	 edx, DWORD PTR ?transformed_3d_2d_points@@3PAUOBJECT_TRANSFORMED_2D_POINT@@A[eax]
  000a6	89 91 10 00 00
	00		 mov	 DWORD PTR ?clipping_vertices@@3PAUVERTEX@@A[ecx+16], edx

; 365  : 		*( ( int * ) &clipping_vertices[count].j ) = *( ( int * ) &transformed_3d_2d_points[this_point].j );

  000ac	8b 45 f8	 mov	 eax, DWORD PTR _this_point$[ebp]
  000af	c1 e0 04	 shl	 eax, 4
  000b2	8b 4d fc	 mov	 ecx, DWORD PTR _count$[ebp]
  000b5	c1 e1 06	 shl	 ecx, 6
  000b8	8b 90 04 00 00
	00		 mov	 edx, DWORD PTR ?transformed_3d_2d_points@@3PAUOBJECT_TRANSFORMED_2D_POINT@@A[eax+4]
  000be	89 91 14 00 00
	00		 mov	 DWORD PTR ?clipping_vertices@@3PAUVERTEX@@A[ecx+20], edx

; 366  : 		*( ( int * ) &clipping_vertices[count].q ) = *( ( int * ) &transformed_3d_2d_points[this_point].q );

  000c4	8b 45 f8	 mov	 eax, DWORD PTR _this_point$[ebp]
  000c7	c1 e0 04	 shl	 eax, 4
  000ca	8b 4d fc	 mov	 ecx, DWORD PTR _count$[ebp]
  000cd	c1 e1 06	 shl	 ecx, 6
  000d0	8b 90 08 00 00
	00		 mov	 edx, DWORD PTR ?transformed_3d_2d_points@@3PAUOBJECT_TRANSFORMED_2D_POINT@@A[eax+8]
  000d6	89 91 0c 00 00
	00		 mov	 DWORD PTR ?clipping_vertices@@3PAUVERTEX@@A[ecx+12], edx

; 367  : 		clipping_vertices[count].outcode = transformed_3d_point_outcodes[this_point];

  000dc	8b 45 fc	 mov	 eax, DWORD PTR _count$[ebp]
  000df	c1 e0 06	 shl	 eax, 6
  000e2	8b 4d f8	 mov	 ecx, DWORD PTR _this_point$[ebp]
  000e5	8a 91 00 00 00
	00		 mov	 dl, BYTE PTR ?transformed_3d_point_outcodes@@3PAEA[ecx]
  000eb	88 90 2c 00 00
	00		 mov	 BYTE PTR ?clipping_vertices@@3PAUVERTEX@@A[eax+44], dl

; 368  : 		clipping_vertices[count].colour = transformed_3d_point_colours[this_point].colour;

  000f1	8b 45 fc	 mov	 eax, DWORD PTR _count$[ebp]
  000f4	c1 e0 06	 shl	 eax, 6
  000f7	8b 4d f8	 mov	 ecx, DWORD PTR _this_point$[ebp]
  000fa	8b 14 cd 00 00
	00 00		 mov	 edx, DWORD PTR ?transformed_3d_point_colours@@3PAUTERRAIN_3D_TRANSFORMED_POINT_COLOUR@@A[ecx*8]
  00101	89 90 30 00 00
	00		 mov	 DWORD PTR ?clipping_vertices@@3PAUVERTEX@@A[eax+48], edx

; 369  : 		clipping_vertices[count].fog = transformed_3d_point_colours[this_point].fog;

  00107	8b 45 fc	 mov	 eax, DWORD PTR _count$[ebp]
  0010a	c1 e0 06	 shl	 eax, 6
  0010d	8b 4d f8	 mov	 ecx, DWORD PTR _this_point$[ebp]
  00110	8a 14 cd 04 00
	00 00		 mov	 dl, BYTE PTR ?transformed_3d_point_colours@@3PAUTERRAIN_3D_TRANSFORMED_POINT_COLOUR@@A[ecx*8+4]
  00117	88 90 2e 00 00
	00		 mov	 BYTE PTR ?clipping_vertices@@3PAUVERTEX@@A[eax+46], dl

; 370  : 		clipping_vertices[count].u = current_terrain_points_xz[this_point].x * texture_scale;

  0011d	8b 45 f8	 mov	 eax, DWORD PTR _this_point$[ebp]
  00120	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_terrain_points_xz@@3PAUTERRAIN_3D_POINT_XZ@@A ; current_terrain_points_xz
  00126	0f bf 14 81	 movsx	 edx, WORD PTR [ecx+eax*4]
  0012a	f3 0f 2a c2	 cvtsi2ss xmm0, edx
  0012e	f3 0f 59 45 f4	 mulss	 xmm0, DWORD PTR _texture_scale$[ebp]
  00133	8b 45 fc	 mov	 eax, DWORD PTR _count$[ebp]
  00136	c1 e0 06	 shl	 eax, 6
  00139	f3 0f 11 80 18
	00 00 00	 movss	 DWORD PTR ?clipping_vertices@@3PAUVERTEX@@A[eax+24], xmm0

; 371  : 		clipping_vertices[count].v = current_terrain_points_xz[this_point].z * texture_scale;

  00141	8b 45 f8	 mov	 eax, DWORD PTR _this_point$[ebp]
  00144	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?current_terrain_points_xz@@3PAUTERRAIN_3D_POINT_XZ@@A ; current_terrain_points_xz
  0014a	0f bf 54 81 02	 movsx	 edx, WORD PTR [ecx+eax*4+2]
  0014f	f3 0f 2a c2	 cvtsi2ss xmm0, edx
  00153	f3 0f 59 45 f4	 mulss	 xmm0, DWORD PTR _texture_scale$[ebp]
  00158	8b 45 fc	 mov	 eax, DWORD PTR _count$[ebp]
  0015b	c1 e0 06	 shl	 eax, 6
  0015e	f3 0f 11 80 1c
	00 00 00	 movss	 DWORD PTR ?clipping_vertices@@3PAUVERTEX@@A[eax+28], xmm0

; 372  : 	}

  00166	e9 c3 fe ff ff	 jmp	 $LN2@construct_
$LN3@construct_:

; 373  : }

  0016b	5f		 pop	 edi
  0016c	5e		 pop	 esi
  0016d	5b		 pop	 ebx
  0016e	8b e5		 mov	 esp, ebp
  00170	5d		 pop	 ebp
  00171	c2 08 00	 ret	 8
?construct_3d_terrain_word_clipping_primitive@@YGXHPAUTERRAIN_3D_POINT_WORD_REFERENCE@@@Z ENDP ; construct_3d_terrain_word_clipping_primitive
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\modules\3d\terrain\terrcons.c
;	COMDAT ?terrain_alpha_visible_byte@@YGHHPAUTERRAIN_3D_POINT_BYTE_REFERENCE@@@Z
_TEXT	SEGMENT
_alpha$ = -5						; size = 1
_count$ = -4						; size = 4
_number_of_points$ = 8					; size = 4
_reference_points$ = 12					; size = 4
?terrain_alpha_visible_byte@@YGHHPAUTERRAIN_3D_POINT_BYTE_REFERENCE@@@Z PROC ; terrain_alpha_visible_byte, COMDAT

; 320  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 48	 sub	 esp, 72			; 00000048H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 321  : 
; 322  : 	int
; 323  : 		count;
; 324  : 
; 325  : 	unsigned char
; 326  : 		alpha;
; 327  : 
; 328  : 	alpha = 0;

  00009	c6 45 fb 00	 mov	 BYTE PTR _alpha$[ebp], 0

; 329  : 
; 330  : 	for ( count = 0; count < number_of_points; count++ )

  0000d	c7 45 fc 00 00
	00 00		 mov	 DWORD PTR _count$[ebp], 0
  00014	eb 09		 jmp	 SHORT $LN4@terrain_al
$LN2@terrain_al:
  00016	8b 45 fc	 mov	 eax, DWORD PTR _count$[ebp]
  00019	83 c0 01	 add	 eax, 1
  0001c	89 45 fc	 mov	 DWORD PTR _count$[ebp], eax
$LN4@terrain_al:
  0001f	8b 45 fc	 mov	 eax, DWORD PTR _count$[ebp]
  00022	3b 45 08	 cmp	 eax, DWORD PTR _number_of_points$[ebp]
  00025	7d 1c		 jge	 SHORT $LN3@terrain_al

; 331  : 	{
; 332  : 
; 333  : 		alpha |= transformed_3d_point_colours[ reference_points[count].point ].alpha;

  00027	8b 45 0c	 mov	 eax, DWORD PTR _reference_points$[ebp]
  0002a	03 45 fc	 add	 eax, DWORD PTR _count$[ebp]
  0002d	0f b6 08	 movzx	 ecx, BYTE PTR [eax]
  00030	0f b6 14 cd 03
	00 00 00	 movzx	 edx, BYTE PTR ?transformed_3d_point_colours@@3PAUTERRAIN_3D_TRANSFORMED_POINT_COLOUR@@A[ecx*8+3]
  00038	0f b6 45 fb	 movzx	 eax, BYTE PTR _alpha$[ebp]
  0003c	0b c2		 or	 eax, edx
  0003e	88 45 fb	 mov	 BYTE PTR _alpha$[ebp], al

; 334  : 	}

  00041	eb d3		 jmp	 SHORT $LN2@terrain_al
$LN3@terrain_al:

; 335  : 
; 336  : 	return ( alpha );

  00043	0f b6 45 fb	 movzx	 eax, BYTE PTR _alpha$[ebp]

; 337  : }

  00047	5f		 pop	 edi
  00048	5e		 pop	 esi
  00049	5b		 pop	 ebx
  0004a	8b e5		 mov	 esp, ebp
  0004c	5d		 pop	 ebp
  0004d	c2 08 00	 ret	 8
?terrain_alpha_visible_byte@@YGHHPAUTERRAIN_3D_POINT_BYTE_REFERENCE@@@Z ENDP ; terrain_alpha_visible_byte
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\modules\3d\terrain\terrcons.c
;	COMDAT ?terrain_alpha_visible_word@@YGHHPAUTERRAIN_3D_POINT_WORD_REFERENCE@@@Z
_TEXT	SEGMENT
_alpha$ = -5						; size = 1
_count$ = -4						; size = 4
_number_of_points$ = 8					; size = 4
_reference_points$ = 12					; size = 4
?terrain_alpha_visible_word@@YGHHPAUTERRAIN_3D_POINT_WORD_REFERENCE@@@Z PROC ; terrain_alpha_visible_word, COMDAT

; 296  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 48	 sub	 esp, 72			; 00000048H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 297  : 
; 298  : 	int
; 299  : 		count;
; 300  : 
; 301  : 	unsigned char
; 302  : 		alpha;
; 303  : 
; 304  : 	alpha = 0;

  00009	c6 45 fb 00	 mov	 BYTE PTR _alpha$[ebp], 0

; 305  : 
; 306  : 	for ( count = 0; count < number_of_points; count++ )

  0000d	c7 45 fc 00 00
	00 00		 mov	 DWORD PTR _count$[ebp], 0
  00014	eb 09		 jmp	 SHORT $LN4@terrain_al
$LN2@terrain_al:
  00016	8b 45 fc	 mov	 eax, DWORD PTR _count$[ebp]
  00019	83 c0 01	 add	 eax, 1
  0001c	89 45 fc	 mov	 DWORD PTR _count$[ebp], eax
$LN4@terrain_al:
  0001f	8b 45 fc	 mov	 eax, DWORD PTR _count$[ebp]
  00022	3b 45 08	 cmp	 eax, DWORD PTR _number_of_points$[ebp]
  00025	7d 1d		 jge	 SHORT $LN3@terrain_al

; 307  : 	{
; 308  : 
; 309  : 		alpha |= transformed_3d_point_colours[ reference_points[count].point ].alpha;

  00027	8b 45 fc	 mov	 eax, DWORD PTR _count$[ebp]
  0002a	8b 4d 0c	 mov	 ecx, DWORD PTR _reference_points$[ebp]
  0002d	0f b7 14 41	 movzx	 edx, WORD PTR [ecx+eax*2]
  00031	0f b6 04 d5 03
	00 00 00	 movzx	 eax, BYTE PTR ?transformed_3d_point_colours@@3PAUTERRAIN_3D_TRANSFORMED_POINT_COLOUR@@A[edx*8+3]
  00039	0f b6 4d fb	 movzx	 ecx, BYTE PTR _alpha$[ebp]
  0003d	0b c8		 or	 ecx, eax
  0003f	88 4d fb	 mov	 BYTE PTR _alpha$[ebp], cl

; 310  : 	}

  00042	eb d2		 jmp	 SHORT $LN2@terrain_al
$LN3@terrain_al:

; 311  : 
; 312  : 	return ( alpha );

  00044	0f b6 45 fb	 movzx	 eax, BYTE PTR _alpha$[ebp]

; 313  : }

  00048	5f		 pop	 edi
  00049	5e		 pop	 esi
  0004a	5b		 pop	 ebx
  0004b	8b e5		 mov	 esp, ebp
  0004d	5d		 pop	 ebp
  0004e	c2 08 00	 ret	 8
?terrain_alpha_visible_word@@YGHHPAUTERRAIN_3D_POINT_WORD_REFERENCE@@@Z ENDP ; terrain_alpha_visible_word
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\modules\3d\terrain\terrcons.c
;	COMDAT ?outcode_3d_terrain_triangle@@YGHPAH0@Z
_TEXT	SEGMENT
_outcode2$ = -2						; size = 1
_outcode$ = -1						; size = 1
_reference_points$ = 8					; size = 4
_polygon_outcode$ = 12					; size = 4
?outcode_3d_terrain_triangle@@YGHPAH0@Z PROC		; outcode_3d_terrain_triangle, COMDAT

; 262  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 44	 sub	 esp, 68			; 00000044H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 263  : 
; 264  : 	unsigned char
; 265  : 		outcode,
; 266  : 		outcode2;
; 267  : 
; 268  : 	outcode = transformed_3d_point_outcodes[ reference_points[0] ];

  00009	b8 04 00 00 00	 mov	 eax, 4
  0000e	6b c8 00	 imul	 ecx, eax, 0
  00011	8b 55 08	 mov	 edx, DWORD PTR _reference_points$[ebp]
  00014	8b 04 0a	 mov	 eax, DWORD PTR [edx+ecx]
  00017	8a 88 00 00 00
	00		 mov	 cl, BYTE PTR ?transformed_3d_point_outcodes@@3PAEA[eax]
  0001d	88 4d ff	 mov	 BYTE PTR _outcode$[ebp], cl

; 269  : 	outcode2 = transformed_3d_point_outcodes[ reference_points[0] ];

  00020	b8 04 00 00 00	 mov	 eax, 4
  00025	6b c8 00	 imul	 ecx, eax, 0
  00028	8b 55 08	 mov	 edx, DWORD PTR _reference_points$[ebp]
  0002b	8b 04 0a	 mov	 eax, DWORD PTR [edx+ecx]
  0002e	8a 88 00 00 00
	00		 mov	 cl, BYTE PTR ?transformed_3d_point_outcodes@@3PAEA[eax]
  00034	88 4d fe	 mov	 BYTE PTR _outcode2$[ebp], cl

; 270  : 
; 271  : 	outcode |= transformed_3d_point_outcodes[ reference_points[1] ];

  00037	b8 04 00 00 00	 mov	 eax, 4
  0003c	c1 e0 00	 shl	 eax, 0
  0003f	8b 4d 08	 mov	 ecx, DWORD PTR _reference_points$[ebp]
  00042	8b 14 01	 mov	 edx, DWORD PTR [ecx+eax]
  00045	0f b6 82 00 00
	00 00		 movzx	 eax, BYTE PTR ?transformed_3d_point_outcodes@@3PAEA[edx]
  0004c	0f b6 4d ff	 movzx	 ecx, BYTE PTR _outcode$[ebp]
  00050	0b c8		 or	 ecx, eax
  00052	88 4d ff	 mov	 BYTE PTR _outcode$[ebp], cl

; 272  : 	outcode2 &= transformed_3d_point_outcodes[ reference_points[1] ];

  00055	b8 04 00 00 00	 mov	 eax, 4
  0005a	c1 e0 00	 shl	 eax, 0
  0005d	8b 4d 08	 mov	 ecx, DWORD PTR _reference_points$[ebp]
  00060	8b 14 01	 mov	 edx, DWORD PTR [ecx+eax]
  00063	0f b6 82 00 00
	00 00		 movzx	 eax, BYTE PTR ?transformed_3d_point_outcodes@@3PAEA[edx]
  0006a	0f b6 4d fe	 movzx	 ecx, BYTE PTR _outcode2$[ebp]
  0006e	23 c8		 and	 ecx, eax
  00070	88 4d fe	 mov	 BYTE PTR _outcode2$[ebp], cl

; 273  : 
; 274  : 	outcode |= transformed_3d_point_outcodes[ reference_points[2] ];

  00073	b8 04 00 00 00	 mov	 eax, 4
  00078	d1 e0		 shl	 eax, 1
  0007a	8b 4d 08	 mov	 ecx, DWORD PTR _reference_points$[ebp]
  0007d	8b 14 01	 mov	 edx, DWORD PTR [ecx+eax]
  00080	0f b6 82 00 00
	00 00		 movzx	 eax, BYTE PTR ?transformed_3d_point_outcodes@@3PAEA[edx]
  00087	0f b6 4d ff	 movzx	 ecx, BYTE PTR _outcode$[ebp]
  0008b	0b c8		 or	 ecx, eax
  0008d	88 4d ff	 mov	 BYTE PTR _outcode$[ebp], cl

; 275  : 	outcode2 &= transformed_3d_point_outcodes[ reference_points[2] ];

  00090	b8 04 00 00 00	 mov	 eax, 4
  00095	d1 e0		 shl	 eax, 1
  00097	8b 4d 08	 mov	 ecx, DWORD PTR _reference_points$[ebp]
  0009a	8b 14 01	 mov	 edx, DWORD PTR [ecx+eax]
  0009d	0f b6 82 00 00
	00 00		 movzx	 eax, BYTE PTR ?transformed_3d_point_outcodes@@3PAEA[edx]
  000a4	0f b6 4d fe	 movzx	 ecx, BYTE PTR _outcode2$[ebp]
  000a8	23 c8		 and	 ecx, eax
  000aa	88 4d fe	 mov	 BYTE PTR _outcode2$[ebp], cl

; 276  : 
; 277  : 	if ( outcode2 )

  000ad	0f b6 45 fe	 movzx	 eax, BYTE PTR _outcode2$[ebp]
  000b1	85 c0		 test	 eax, eax
  000b3	74 06		 je	 SHORT $LN2@outcode_3d

; 278  : 	{
; 279  : 
; 280  : 		return ( FALSE );

  000b5	33 c0		 xor	 eax, eax
  000b7	eb 10		 jmp	 SHORT $LN1@outcode_3d

; 281  : 	}
; 282  : 	else

  000b9	eb 0e		 jmp	 SHORT $LN1@outcode_3d
$LN2@outcode_3d:

; 283  : 	{
; 284  : 
; 285  : 		*polygon_outcode = outcode;

  000bb	0f b6 45 ff	 movzx	 eax, BYTE PTR _outcode$[ebp]
  000bf	8b 4d 0c	 mov	 ecx, DWORD PTR _polygon_outcode$[ebp]
  000c2	89 01		 mov	 DWORD PTR [ecx], eax

; 286  : 	
; 287  : 		return ( TRUE );

  000c4	b8 01 00 00 00	 mov	 eax, 1
$LN1@outcode_3d:

; 288  : 	}
; 289  : }

  000c9	5f		 pop	 edi
  000ca	5e		 pop	 esi
  000cb	5b		 pop	 ebx
  000cc	8b e5		 mov	 esp, ebp
  000ce	5d		 pop	 ebp
  000cf	c2 08 00	 ret	 8
?outcode_3d_terrain_triangle@@YGHPAH0@Z ENDP		; outcode_3d_terrain_triangle
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\modules\3d\terrain\terrcons.c
;	COMDAT ?outcode_3d_terrain_byte_polygon@@YGHHPAUTERRAIN_3D_POINT_BYTE_REFERENCE@@PAH@Z
_TEXT	SEGMENT
_outcode2$ = -6						; size = 1
_outcode$ = -5						; size = 1
_count$ = -4						; size = 4
_num_points$ = 8					; size = 4
_reference_points$ = 12					; size = 4
_polygon_outcode$ = 16					; size = 4
?outcode_3d_terrain_byte_polygon@@YGHHPAUTERRAIN_3D_POINT_BYTE_REFERENCE@@PAH@Z PROC ; outcode_3d_terrain_byte_polygon, COMDAT

; 202  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 48	 sub	 esp, 72			; 00000048H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 203  : 
; 204  : 	int
; 205  : 		count;
; 206  : 
; 207  : 	unsigned char
; 208  : 		outcode,
; 209  : 		outcode2;
; 210  : 
; 211  : 	//
; 212  : 	// Always do 3 points in a face, cos they're guaranteed
; 213  : 	//
; 214  : 
; 215  : 	outcode = transformed_3d_point_outcodes[ reference_points->point ];

  00009	8b 45 0c	 mov	 eax, DWORD PTR _reference_points$[ebp]
  0000c	0f b6 08	 movzx	 ecx, BYTE PTR [eax]
  0000f	8a 91 00 00 00
	00		 mov	 dl, BYTE PTR ?transformed_3d_point_outcodes@@3PAEA[ecx]
  00015	88 55 fb	 mov	 BYTE PTR _outcode$[ebp], dl

; 216  : 	outcode2 = transformed_3d_point_outcodes[ reference_points->point ];

  00018	8b 45 0c	 mov	 eax, DWORD PTR _reference_points$[ebp]
  0001b	0f b6 08	 movzx	 ecx, BYTE PTR [eax]
  0001e	8a 91 00 00 00
	00		 mov	 dl, BYTE PTR ?transformed_3d_point_outcodes@@3PAEA[ecx]
  00024	88 55 fa	 mov	 BYTE PTR _outcode2$[ebp], dl

; 217  : 	reference_points++;

  00027	8b 45 0c	 mov	 eax, DWORD PTR _reference_points$[ebp]
  0002a	83 c0 01	 add	 eax, 1
  0002d	89 45 0c	 mov	 DWORD PTR _reference_points$[ebp], eax

; 218  : 
; 219  : 	outcode |= transformed_3d_point_outcodes[ reference_points->point ];

  00030	8b 45 0c	 mov	 eax, DWORD PTR _reference_points$[ebp]
  00033	0f b6 08	 movzx	 ecx, BYTE PTR [eax]
  00036	0f b6 91 00 00
	00 00		 movzx	 edx, BYTE PTR ?transformed_3d_point_outcodes@@3PAEA[ecx]
  0003d	0f b6 45 fb	 movzx	 eax, BYTE PTR _outcode$[ebp]
  00041	0b c2		 or	 eax, edx
  00043	88 45 fb	 mov	 BYTE PTR _outcode$[ebp], al

; 220  : 	outcode2 &= transformed_3d_point_outcodes[ reference_points->point ];

  00046	8b 45 0c	 mov	 eax, DWORD PTR _reference_points$[ebp]
  00049	0f b6 08	 movzx	 ecx, BYTE PTR [eax]
  0004c	0f b6 91 00 00
	00 00		 movzx	 edx, BYTE PTR ?transformed_3d_point_outcodes@@3PAEA[ecx]
  00053	0f b6 45 fa	 movzx	 eax, BYTE PTR _outcode2$[ebp]
  00057	23 c2		 and	 eax, edx
  00059	88 45 fa	 mov	 BYTE PTR _outcode2$[ebp], al

; 221  : 	reference_points++;

  0005c	8b 45 0c	 mov	 eax, DWORD PTR _reference_points$[ebp]
  0005f	83 c0 01	 add	 eax, 1
  00062	89 45 0c	 mov	 DWORD PTR _reference_points$[ebp], eax

; 222  : 
; 223  : 	outcode |= transformed_3d_point_outcodes[ reference_points->point ];

  00065	8b 45 0c	 mov	 eax, DWORD PTR _reference_points$[ebp]
  00068	0f b6 08	 movzx	 ecx, BYTE PTR [eax]
  0006b	0f b6 91 00 00
	00 00		 movzx	 edx, BYTE PTR ?transformed_3d_point_outcodes@@3PAEA[ecx]
  00072	0f b6 45 fb	 movzx	 eax, BYTE PTR _outcode$[ebp]
  00076	0b c2		 or	 eax, edx
  00078	88 45 fb	 mov	 BYTE PTR _outcode$[ebp], al

; 224  : 	outcode2 &= transformed_3d_point_outcodes[ reference_points->point ];

  0007b	8b 45 0c	 mov	 eax, DWORD PTR _reference_points$[ebp]
  0007e	0f b6 08	 movzx	 ecx, BYTE PTR [eax]
  00081	0f b6 91 00 00
	00 00		 movzx	 edx, BYTE PTR ?transformed_3d_point_outcodes@@3PAEA[ecx]
  00088	0f b6 45 fa	 movzx	 eax, BYTE PTR _outcode2$[ebp]
  0008c	23 c2		 and	 eax, edx
  0008e	88 45 fa	 mov	 BYTE PTR _outcode2$[ebp], al

; 225  : 	reference_points++;

  00091	8b 45 0c	 mov	 eax, DWORD PTR _reference_points$[ebp]
  00094	83 c0 01	 add	 eax, 1
  00097	89 45 0c	 mov	 DWORD PTR _reference_points$[ebp], eax

; 226  : 
; 227  : 	for ( count = ( num_points - 1 ); count > 2; count-- )

  0009a	8b 45 08	 mov	 eax, DWORD PTR _num_points$[ebp]
  0009d	83 e8 01	 sub	 eax, 1
  000a0	89 45 fc	 mov	 DWORD PTR _count$[ebp], eax
  000a3	eb 09		 jmp	 SHORT $LN4@outcode_3d
$LN2@outcode_3d:
  000a5	8b 45 fc	 mov	 eax, DWORD PTR _count$[ebp]
  000a8	83 e8 01	 sub	 eax, 1
  000ab	89 45 fc	 mov	 DWORD PTR _count$[ebp], eax
$LN4@outcode_3d:
  000ae	83 7d fc 02	 cmp	 DWORD PTR _count$[ebp], 2
  000b2	7e 37		 jle	 SHORT $LN3@outcode_3d

; 228  : 	{
; 229  : 
; 230  : 		outcode |= transformed_3d_point_outcodes[ reference_points->point ];

  000b4	8b 45 0c	 mov	 eax, DWORD PTR _reference_points$[ebp]
  000b7	0f b6 08	 movzx	 ecx, BYTE PTR [eax]
  000ba	0f b6 91 00 00
	00 00		 movzx	 edx, BYTE PTR ?transformed_3d_point_outcodes@@3PAEA[ecx]
  000c1	0f b6 45 fb	 movzx	 eax, BYTE PTR _outcode$[ebp]
  000c5	0b c2		 or	 eax, edx
  000c7	88 45 fb	 mov	 BYTE PTR _outcode$[ebp], al

; 231  : 		outcode2 &= transformed_3d_point_outcodes[ reference_points->point ];

  000ca	8b 45 0c	 mov	 eax, DWORD PTR _reference_points$[ebp]
  000cd	0f b6 08	 movzx	 ecx, BYTE PTR [eax]
  000d0	0f b6 91 00 00
	00 00		 movzx	 edx, BYTE PTR ?transformed_3d_point_outcodes@@3PAEA[ecx]
  000d7	0f b6 45 fa	 movzx	 eax, BYTE PTR _outcode2$[ebp]
  000db	23 c2		 and	 eax, edx
  000dd	88 45 fa	 mov	 BYTE PTR _outcode2$[ebp], al

; 232  : 		reference_points++;

  000e0	8b 45 0c	 mov	 eax, DWORD PTR _reference_points$[ebp]
  000e3	83 c0 01	 add	 eax, 1
  000e6	89 45 0c	 mov	 DWORD PTR _reference_points$[ebp], eax

; 233  : 	}

  000e9	eb ba		 jmp	 SHORT $LN2@outcode_3d
$LN3@outcode_3d:

; 234  : 
; 235  : 	if ( outcode2 )

  000eb	0f b6 45 fa	 movzx	 eax, BYTE PTR _outcode2$[ebp]
  000ef	85 c0		 test	 eax, eax
  000f1	74 06		 je	 SHORT $LN5@outcode_3d

; 236  : 	{
; 237  : 
; 238  : 		//
; 239  : 		// The polygon is totally off the screen!
; 240  : 		//
; 241  : 
; 242  : 		return ( FALSE );

  000f3	33 c0		 xor	 eax, eax
  000f5	eb 10		 jmp	 SHORT $LN1@outcode_3d

; 243  : 	}
; 244  : 	else

  000f7	eb 0e		 jmp	 SHORT $LN1@outcode_3d
$LN5@outcode_3d:

; 245  : 	{
; 246  : 
; 247  : 		//
; 248  : 		// Some part of the polygon is visible, check for fogging
; 249  : 		//
; 250  : 
; 251  : 		*polygon_outcode = outcode;

  000f9	0f b6 45 fb	 movzx	 eax, BYTE PTR _outcode$[ebp]
  000fd	8b 4d 10	 mov	 ecx, DWORD PTR _polygon_outcode$[ebp]
  00100	89 01		 mov	 DWORD PTR [ecx], eax

; 252  : 	
; 253  : 		return ( TRUE );

  00102	b8 01 00 00 00	 mov	 eax, 1
$LN1@outcode_3d:

; 254  : 	}
; 255  : }

  00107	5f		 pop	 edi
  00108	5e		 pop	 esi
  00109	5b		 pop	 ebx
  0010a	8b e5		 mov	 esp, ebp
  0010c	5d		 pop	 ebp
  0010d	c2 0c 00	 ret	 12			; 0000000cH
?outcode_3d_terrain_byte_polygon@@YGHHPAUTERRAIN_3D_POINT_BYTE_REFERENCE@@PAH@Z ENDP ; outcode_3d_terrain_byte_polygon
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\modules\3d\terrain\terrcons.c
;	COMDAT ?outcode_3d_terrain_word_polygon@@YGHHPAUTERRAIN_3D_POINT_WORD_REFERENCE@@PAH@Z
_TEXT	SEGMENT
_outcode2$ = -12					; size = 4
_outcode$ = -8						; size = 4
_count$ = -4						; size = 4
_num_points$ = 8					; size = 4
_reference_points$ = 12					; size = 4
_polygon_outcode$ = 16					; size = 4
?outcode_3d_terrain_word_polygon@@YGHHPAUTERRAIN_3D_POINT_WORD_REFERENCE@@PAH@Z PROC ; outcode_3d_terrain_word_polygon, COMDAT

; 148  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 4c	 sub	 esp, 76			; 0000004cH
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 149  : 
; 150  : 	int
; 151  : 		count,
; 152  : 		outcode,
; 153  : 		outcode2;
; 154  : 
; 155  : 	//
; 156  : 	// Always do 3 points in a face, cos they're guaranteed
; 157  : 	//
; 158  : 
; 159  : 	outcode = transformed_3d_point_outcodes[ reference_points[0].point ];

  00009	b8 02 00 00 00	 mov	 eax, 2
  0000e	6b c8 00	 imul	 ecx, eax, 0
  00011	8b 55 0c	 mov	 edx, DWORD PTR _reference_points$[ebp]
  00014	0f b7 04 0a	 movzx	 eax, WORD PTR [edx+ecx]
  00018	0f b6 88 00 00
	00 00		 movzx	 ecx, BYTE PTR ?transformed_3d_point_outcodes@@3PAEA[eax]
  0001f	89 4d f8	 mov	 DWORD PTR _outcode$[ebp], ecx

; 160  : 	outcode2 = transformed_3d_point_outcodes[ reference_points[0].point ];

  00022	b8 02 00 00 00	 mov	 eax, 2
  00027	6b c8 00	 imul	 ecx, eax, 0
  0002a	8b 55 0c	 mov	 edx, DWORD PTR _reference_points$[ebp]
  0002d	0f b7 04 0a	 movzx	 eax, WORD PTR [edx+ecx]
  00031	0f b6 88 00 00
	00 00		 movzx	 ecx, BYTE PTR ?transformed_3d_point_outcodes@@3PAEA[eax]
  00038	89 4d f4	 mov	 DWORD PTR _outcode2$[ebp], ecx

; 161  : 
; 162  : 	outcode |= transformed_3d_point_outcodes[ reference_points[1].point ];

  0003b	b8 02 00 00 00	 mov	 eax, 2
  00040	c1 e0 00	 shl	 eax, 0
  00043	8b 4d 0c	 mov	 ecx, DWORD PTR _reference_points$[ebp]
  00046	0f b7 14 01	 movzx	 edx, WORD PTR [ecx+eax]
  0004a	0f b6 82 00 00
	00 00		 movzx	 eax, BYTE PTR ?transformed_3d_point_outcodes@@3PAEA[edx]
  00051	0b 45 f8	 or	 eax, DWORD PTR _outcode$[ebp]
  00054	89 45 f8	 mov	 DWORD PTR _outcode$[ebp], eax

; 163  : 	outcode2 &= transformed_3d_point_outcodes[ reference_points[1].point ];

  00057	b8 02 00 00 00	 mov	 eax, 2
  0005c	c1 e0 00	 shl	 eax, 0
  0005f	8b 4d 0c	 mov	 ecx, DWORD PTR _reference_points$[ebp]
  00062	0f b7 14 01	 movzx	 edx, WORD PTR [ecx+eax]
  00066	0f b6 82 00 00
	00 00		 movzx	 eax, BYTE PTR ?transformed_3d_point_outcodes@@3PAEA[edx]
  0006d	23 45 f4	 and	 eax, DWORD PTR _outcode2$[ebp]
  00070	89 45 f4	 mov	 DWORD PTR _outcode2$[ebp], eax

; 164  : 
; 165  : 	outcode |= transformed_3d_point_outcodes[ reference_points[2].point ];

  00073	b8 02 00 00 00	 mov	 eax, 2
  00078	d1 e0		 shl	 eax, 1
  0007a	8b 4d 0c	 mov	 ecx, DWORD PTR _reference_points$[ebp]
  0007d	0f b7 14 01	 movzx	 edx, WORD PTR [ecx+eax]
  00081	0f b6 82 00 00
	00 00		 movzx	 eax, BYTE PTR ?transformed_3d_point_outcodes@@3PAEA[edx]
  00088	0b 45 f8	 or	 eax, DWORD PTR _outcode$[ebp]
  0008b	89 45 f8	 mov	 DWORD PTR _outcode$[ebp], eax

; 166  : 	outcode2 &= transformed_3d_point_outcodes[ reference_points[2].point ];

  0008e	b8 02 00 00 00	 mov	 eax, 2
  00093	d1 e0		 shl	 eax, 1
  00095	8b 4d 0c	 mov	 ecx, DWORD PTR _reference_points$[ebp]
  00098	0f b7 14 01	 movzx	 edx, WORD PTR [ecx+eax]
  0009c	0f b6 82 00 00
	00 00		 movzx	 eax, BYTE PTR ?transformed_3d_point_outcodes@@3PAEA[edx]
  000a3	23 45 f4	 and	 eax, DWORD PTR _outcode2$[ebp]
  000a6	89 45 f4	 mov	 DWORD PTR _outcode2$[ebp], eax

; 167  : 
; 168  : 	for ( count = 3; count < num_points; count++ )

  000a9	c7 45 fc 03 00
	00 00		 mov	 DWORD PTR _count$[ebp], 3
  000b0	eb 09		 jmp	 SHORT $LN4@outcode_3d
$LN2@outcode_3d:
  000b2	8b 45 fc	 mov	 eax, DWORD PTR _count$[ebp]
  000b5	83 c0 01	 add	 eax, 1
  000b8	89 45 fc	 mov	 DWORD PTR _count$[ebp], eax
$LN4@outcode_3d:
  000bb	8b 45 fc	 mov	 eax, DWORD PTR _count$[ebp]
  000be	3b 45 08	 cmp	 eax, DWORD PTR _num_points$[ebp]
  000c1	7d 30		 jge	 SHORT $LN3@outcode_3d

; 169  : 	{
; 170  : 
; 171  : 		outcode |= transformed_3d_point_outcodes[ reference_points[count].point ];

  000c3	8b 45 fc	 mov	 eax, DWORD PTR _count$[ebp]
  000c6	8b 4d 0c	 mov	 ecx, DWORD PTR _reference_points$[ebp]
  000c9	0f b7 14 41	 movzx	 edx, WORD PTR [ecx+eax*2]
  000cd	0f b6 82 00 00
	00 00		 movzx	 eax, BYTE PTR ?transformed_3d_point_outcodes@@3PAEA[edx]
  000d4	0b 45 f8	 or	 eax, DWORD PTR _outcode$[ebp]
  000d7	89 45 f8	 mov	 DWORD PTR _outcode$[ebp], eax

; 172  : 		outcode2 &= transformed_3d_point_outcodes[ reference_points[count].point ];

  000da	8b 45 fc	 mov	 eax, DWORD PTR _count$[ebp]
  000dd	8b 4d 0c	 mov	 ecx, DWORD PTR _reference_points$[ebp]
  000e0	0f b7 14 41	 movzx	 edx, WORD PTR [ecx+eax*2]
  000e4	0f b6 82 00 00
	00 00		 movzx	 eax, BYTE PTR ?transformed_3d_point_outcodes@@3PAEA[edx]
  000eb	23 45 f4	 and	 eax, DWORD PTR _outcode2$[ebp]
  000ee	89 45 f4	 mov	 DWORD PTR _outcode2$[ebp], eax

; 173  : 	}

  000f1	eb bf		 jmp	 SHORT $LN2@outcode_3d
$LN3@outcode_3d:

; 174  : 
; 175  : 	if ( outcode2 )

  000f3	83 7d f4 00	 cmp	 DWORD PTR _outcode2$[ebp], 0
  000f7	74 06		 je	 SHORT $LN5@outcode_3d

; 176  : 	{
; 177  : 
; 178  : 		//
; 179  : 		// The polygon is totally off the screen!
; 180  : 		//
; 181  : 
; 182  : 		return ( FALSE );

  000f9	33 c0		 xor	 eax, eax
  000fb	eb 0f		 jmp	 SHORT $LN1@outcode_3d

; 183  : 	}
; 184  : 	else

  000fd	eb 0d		 jmp	 SHORT $LN1@outcode_3d
$LN5@outcode_3d:

; 185  : 	{
; 186  : 
; 187  : 		//
; 188  : 		// Some part of the polygon is visible, check for fogging
; 189  : 		//
; 190  : 
; 191  : 		*polygon_outcode = outcode;

  000ff	8b 45 10	 mov	 eax, DWORD PTR _polygon_outcode$[ebp]
  00102	8b 4d f8	 mov	 ecx, DWORD PTR _outcode$[ebp]
  00105	89 08		 mov	 DWORD PTR [eax], ecx

; 192  : 	
; 193  : 		return ( TRUE );

  00107	b8 01 00 00 00	 mov	 eax, 1
$LN1@outcode_3d:

; 194  : 	}
; 195  : }

  0010c	5f		 pop	 edi
  0010d	5e		 pop	 esi
  0010e	5b		 pop	 ebx
  0010f	8b e5		 mov	 esp, ebp
  00111	5d		 pop	 ebp
  00112	c2 0c 00	 ret	 12			; 0000000cH
?outcode_3d_terrain_word_polygon@@YGHHPAUTERRAIN_3D_POINT_WORD_REFERENCE@@PAH@Z ENDP ; outcode_3d_terrain_word_polygon
_TEXT	ENDS
END
