; Listing generated by Microsoft (R) Optimizing Compiler Version 19.16.27045.0 

	TITLE	C:\Users\nhv90\Projects\eech\aphavoc\source\gunships\avionics\ka50\hm_tgt.c
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB MSVCRTD
INCLUDELIB OLDNAMES

PUBLIC	?initialise_ka50_target_acquisition_systems@@YGXXZ ; initialise_ka50_target_acquisition_systems
PUBLIC	?deinitialise_ka50_target_acquisition_systems@@YGXXZ ; deinitialise_ka50_target_acquisition_systems
PUBLIC	?select_ka50_target_acquisition_system@@YGXW4TARGET_ACQUISITION_SYSTEMS@@@Z ; select_ka50_target_acquisition_system
PUBLIC	?update_ka50_target_acquisition_system@@YGXXZ	; update_ka50_target_acquisition_system
PUBLIC	?centre_ka50_target_acquisition_system@@YGXXZ	; centre_ka50_target_acquisition_system
PUBLIC	?toggle_ka50_lock_target@@YGXXZ			; toggle_ka50_lock_target
PUBLIC	?set_ka50_lock_target@@YGXH@Z			; set_ka50_lock_target
PUBLIC	??_C@_0CH@DDKDNBNH@Invalid?5target?5acquisition?5syst@ ; `string'
PUBLIC	?__LINE__Var@?0??update_ka50_target_acquisition_system@@YGXXZ@4JA ; `update_ka50_target_acquisition_system'::`1'::__LINE__Var
PUBLIC	??_C@_0EM@EHNNLLHO@c?3?2users?2nhv90?2projects?2eech?2ap@ ; `string'
EXTRN	?process_assert@@YGXPBD0H@Z:PROC		; process_assert
EXTRN	?debug_fatal@@YAXPBDZZ:PROC			; debug_fatal
EXTRN	?query_TIR_active@@YAHXZ:PROC			; query_TIR_active
EXTRN	?set_view_mode@@YGHW4VIEW_MODES@@@Z:PROC	; set_view_mode
EXTRN	?select_padlock_view_event@@YGXW4PADLOCK_MODES@@@Z:PROC ; select_padlock_view_event
EXTRN	?reset_common_target_acquisition_system_keys@@YGXXZ:PROC ; reset_common_target_acquisition_system_keys
EXTRN	?set_gunship_target@@YGXPAUENTITY@@@Z:PROC	; set_gunship_target
EXTRN	?play_common_cpg_target_acquisition_system_speech@@YGXW4TARGET_ACQUISITION_SYSTEMS@@0H@Z:PROC ; play_common_cpg_target_acquisition_system_speech
EXTRN	?update_common_eo@@YGXXZ:PROC			; update_common_eo
EXTRN	?activate_common_eo@@YGXXZ:PROC			; activate_common_eo
EXTRN	?deactivate_common_eo@@YGXXZ:PROC		; deactivate_common_eo
EXTRN	?slave_common_eo_to_current_target@@YGXXZ:PROC	; slave_common_eo_to_current_target
EXTRN	?laser_is_active@@YGHXZ:PROC			; laser_is_active
EXTRN	?set_laser_is_active@@YGXH@Z:PROC		; set_laser_is_active
EXTRN	?toggle_eo_lock@@YGXXZ:PROC			; toggle_eo_lock
EXTRN	?set_eo_lock@@YGXH@Z:PROC			; set_eo_lock
EXTRN	?update_common_hms@@YGXXZ:PROC			; update_common_hms
EXTRN	?activate_common_hms@@YGXXZ:PROC		; activate_common_hms
EXTRN	?deactivate_common_hms@@YGXXZ:PROC		; deactivate_common_hms
EXTRN	?update_common_ground_radar@@YGXH@Z:PROC	; update_common_ground_radar
EXTRN	?ground_radar_is_active@@YGHXZ:PROC		; ground_radar_is_active
EXTRN	?update_common_air_radar@@YGXXZ:PROC		; update_common_air_radar
EXTRN	?air_radar_is_active@@YGHXZ:PROC		; air_radar_is_active
EXTRN	?update_weapon_lock_type@@YGXW4TARGET_ACQUISITION_SYSTEMS@@@Z:PROC ; update_weapon_lock_type
EXTRN	?initialise_ka50_eo@@YGXXZ:PROC			; initialise_ka50_eo
EXTRN	?deinitialise_ka50_eo@@YGXXZ:PROC		; deinitialise_ka50_eo
EXTRN	?update_ka50_eo@@YGXPAUEO_PARAMS_DYNAMIC_MOVE@@@Z:PROC ; update_ka50_eo
EXTRN	?centre_ka50_eo@@YGXXZ:PROC			; centre_ka50_eo
EXTRN	?slave_ka50_eo_to_current_target@@YGXXZ:PROC	; slave_ka50_eo_to_current_target
EXTRN	?initialise_ka50_hms@@YGXXZ:PROC		; initialise_ka50_hms
EXTRN	?deinitialise_ka50_hms@@YGXXZ:PROC		; deinitialise_ka50_hms
EXTRN	?update_ka50_hms@@YGXXZ:PROC			; update_ka50_hms
EXTRN	?select_ka50_eo_mfd@@YGXXZ:PROC			; select_ka50_eo_mfd
EXTRN	?command_line_manual_laser_radar@@3HA:DWORD	; command_line_manual_laser_radar
EXTRN	?command_line_targeting_system_auto_page@@3HA:DWORD ; command_line_targeting_system_auto_page
EXTRN	?null_entity_pointer_message@@3PBDB:DWORD	; null_entity_pointer_message
EXTRN	?system_comms_model@@3W4COMMS_MODEL_TYPES@@A:DWORD ; system_comms_model
EXTRN	?overload_invalid_list_type_message@@3PBDB:DWORD ; overload_invalid_list_type_message
EXTRN	?fn_get_local_entity_parent@@3PAY0CN@P6GPAUENTITY@@PAU1@W4LIST_TYPES@@@ZA:BYTE ; fn_get_local_entity_parent
EXTRN	?overload_invalid_int_type_message@@3PBDB:DWORD	; overload_invalid_int_type_message
EXTRN	?fn_set_client_server_entity_int_value@@3PAY1BBH@1P6GXPAUENTITY@@W4INT_TYPES@@H@ZA:BYTE ; fn_set_client_server_entity_int_value
EXTRN	?fn_get_local_entity_int_value@@3PAY0BBH@P6GHPAUENTITY@@W4INT_TYPES@@@ZA:BYTE ; fn_get_local_entity_int_value
EXTRN	?gunship_entity@@3PAUENTITY@@A:DWORD		; gunship_entity
EXTRN	?view_mode@@3W4VIEW_MODES@@A:DWORD		; view_mode
EXTRN	?in_cockpit@@3HA:DWORD				; in_cockpit
EXTRN	?target_acquisition_system@@3W4TARGET_ACQUISITION_SYSTEMS@@A:DWORD ; target_acquisition_system
EXTRN	?target_locked@@3HA:DWORD			; target_locked
EXTRN	?hms_target_locked@@3HA:DWORD			; hms_target_locked
EXTRN	?hud_mode@@3W4HUD_MODES@@A:DWORD		; hud_mode
EXTRN	?comanche_damage@@3TCOMANCHE_DAMAGE_FLAGS@@A:DWORD ; comanche_damage
EXTRN	?ka50_damage@@3TKA50_DAMAGE_FLAGS@@A:DWORD	; ka50_damage
EXTRN	?ka50_flir@@3UEO_PARAMS_DYNAMIC_MOVE@@A:BYTE	; ka50_flir
;	COMDAT ??_C@_0EM@EHNNLLHO@c?3?2users?2nhv90?2projects?2eech?2ap@
CONST	SEGMENT
??_C@_0EM@EHNNLLHO@c?3?2users?2nhv90?2projects?2eech?2ap@ DB 'c:\users\nh'
	DB	'v90\projects\eech\aphavoc\source\gunships\avionics\ka50\hm_tg'
	DB	't.c', 00H					; `string'
CONST	ENDS
;	COMDAT ?__LINE__Var@?0??update_ka50_target_acquisition_system@@YGXXZ@4JA
_DATA	SEGMENT
?__LINE__Var@?0??update_ka50_target_acquisition_system@@YGXXZ@4JA DD 0eaH ; `update_ka50_target_acquisition_system'::`1'::__LINE__Var
_DATA	ENDS
;	COMDAT ??_C@_0CH@DDKDNBNH@Invalid?5target?5acquisition?5syst@
CONST	SEGMENT
??_C@_0CH@DDKDNBNH@Invalid?5target?5acquisition?5syst@ DB 'Invalid target'
	DB	' acquisition system = %d', 00H		; `string'
CONST	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\gunships\avionics\ka50\hm_tgt.c
;	COMDAT ?deselect_ka50_target_acquisition_system@@YGXW4TARGET_ACQUISITION_SYSTEMS@@@Z
_TEXT	SEGMENT
tv64 = -68						; size = 4
_system$ = 8						; size = 4
?deselect_ka50_target_acquisition_system@@YGXW4TARGET_ACQUISITION_SYSTEMS@@@Z PROC ; deselect_ka50_target_acquisition_system, COMDAT

; 102  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 44	 sub	 esp, 68			; 00000044H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 103  : 	switch (system)

  00009	8b 45 08	 mov	 eax, DWORD PTR _system$[ebp]
  0000c	89 45 bc	 mov	 DWORD PTR tv64[ebp], eax
  0000f	83 7d bc 00	 cmp	 DWORD PTR tv64[ebp], 0
  00013	74 0e		 je	 SHORT $LN4@deselect_k
  00015	83 7d bc 03	 cmp	 DWORD PTR tv64[ebp], 3
  00019	74 1a		 je	 SHORT $LN6@deselect_k
  0001b	83 7d bc 0a	 cmp	 DWORD PTR tv64[ebp], 10	; 0000000aH
  0001f	74 1b		 je	 SHORT $LN7@deselect_k
  00021	eb 20		 jmp	 SHORT $LN8@deselect_k
$LN4@deselect_k:

; 104  : 	{
; 105  : 		////////////////////////////////////////
; 106  : 		case TARGET_ACQUISITION_SYSTEM_OFF:
; 107  : 		////////////////////////////////////////
; 108  : 		{
; 109  : 			// laser is on in all modes but OFF in automatic mode
; 110  : 			if (!command_line_manual_laser_radar)

  00023	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?command_line_manual_laser_radar@@3HA, 0 ; command_line_manual_laser_radar
  0002a	75 07		 jne	 SHORT $LN5@deselect_k

; 111  : 				set_laser_is_active(TRUE);

  0002c	6a 01		 push	 1
  0002e	e8 00 00 00 00	 call	 ?set_laser_is_active@@YGXH@Z ; set_laser_is_active
$LN5@deselect_k:

; 112  : 
; 113  : 			break;

  00033	eb 1f		 jmp	 SHORT $LN1@deselect_k
$LN6@deselect_k:

; 114  : 		}
; 115  : 		////////////////////////////////////////
; 116  : 		case TARGET_ACQUISITION_SYSTEM_FLIR:
; 117  : 		////////////////////////////////////////
; 118  : 		{
; 119  : 			deactivate_common_eo ();

  00035	e8 00 00 00 00	 call	 ?deactivate_common_eo@@YGXXZ ; deactivate_common_eo

; 120  : 
; 121  : 			break;

  0003a	eb 18		 jmp	 SHORT $LN1@deselect_k
$LN7@deselect_k:

; 122  : 		}
; 123  : 		////////////////////////////////////////
; 124  : 		case TARGET_ACQUISITION_SYSTEM_HMS:
; 125  : 		////////////////////////////////////////
; 126  : 		{
; 127  : 			deactivate_common_hms ();

  0003c	e8 00 00 00 00	 call	 ?deactivate_common_hms@@YGXXZ ; deactivate_common_hms

; 128  : 
; 129  : 			break;

  00041	eb 11		 jmp	 SHORT $LN1@deselect_k
$LN8@deselect_k:

; 130  : 		}
; 131  : 		////////////////////////////////////////
; 132  : 		default:
; 133  : 		////////////////////////////////////////
; 134  : 		{
; 135  : 			debug_fatal ("Invalid target acquisition system = %d", system);

  00043	8b 45 08	 mov	 eax, DWORD PTR _system$[ebp]
  00046	50		 push	 eax
  00047	68 00 00 00 00	 push	 OFFSET ??_C@_0CH@DDKDNBNH@Invalid?5target?5acquisition?5syst@
  0004c	e8 00 00 00 00	 call	 ?debug_fatal@@YAXPBDZZ	; debug_fatal
  00051	83 c4 08	 add	 esp, 8
$LN1@deselect_k:

; 136  : 
; 137  : 			break;
; 138  : 		}
; 139  : 	}
; 140  : }

  00054	5f		 pop	 edi
  00055	5e		 pop	 esi
  00056	5b		 pop	 ebx
  00057	8b e5		 mov	 esp, ebp
  00059	5d		 pop	 ebp
  0005a	c2 04 00	 ret	 4
?deselect_ka50_target_acquisition_system@@YGXW4TARGET_ACQUISITION_SYSTEMS@@@Z ENDP ; deselect_ka50_target_acquisition_system
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\gunships\avionics\ka50\hm_tgt.c
;	COMDAT ?set_ka50_lock_target@@YGXH@Z
_TEXT	SEGMENT
tv64 = -68						; size = 4
_lock$ = 8						; size = 4
?set_ka50_lock_target@@YGXH@Z PROC			; set_ka50_lock_target, COMDAT

; 449  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 44	 sub	 esp, 68			; 00000044H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 450  : 	switch (target_acquisition_system)

  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ?target_acquisition_system@@3W4TARGET_ACQUISITION_SYSTEMS@@A ; target_acquisition_system
  0000e	89 45 bc	 mov	 DWORD PTR tv64[ebp], eax
  00011	83 7d bc 03	 cmp	 DWORD PTR tv64[ebp], 3
  00015	74 0a		 je	 SHORT $LN5@set_ka50_l
  00017	83 7d bc 0a	 cmp	 DWORD PTR tv64[ebp], 10	; 0000000aH
  0001b	74 0f		 je	 SHORT $LN6@set_ka50_l
  0001d	eb 15		 jmp	 SHORT $LN1@set_ka50_l

; 451  : 	{
; 452  : 		////////////////////////////////////////
; 453  : 		case TARGET_ACQUISITION_SYSTEM_OFF:
; 454  : 		////////////////////////////////////////
; 455  : 		{
; 456  : 			break;

  0001f	eb 13		 jmp	 SHORT $LN1@set_ka50_l
$LN5@set_ka50_l:

; 457  : 		}
; 458  : 		////////////////////////////////////////
; 459  : 		case TARGET_ACQUISITION_SYSTEM_FLIR:
; 460  : 		////////////////////////////////////////
; 461  : 		{
; 462  : 			set_eo_lock(lock);

  00021	8b 45 08	 mov	 eax, DWORD PTR _lock$[ebp]
  00024	50		 push	 eax
  00025	e8 00 00 00 00	 call	 ?set_eo_lock@@YGXH@Z	; set_eo_lock

; 463  : 
; 464  : 			break;

  0002a	eb 08		 jmp	 SHORT $LN1@set_ka50_l
$LN6@set_ka50_l:

; 465  : 		}
; 466  : 		////////////////////////////////////////
; 467  : 		case TARGET_ACQUISITION_SYSTEM_HMS:
; 468  : 		////////////////////////////////////////
; 469  : 		{
; 470  : 			hms_target_locked = lock;

  0002c	8b 45 08	 mov	 eax, DWORD PTR _lock$[ebp]
  0002f	a3 00 00 00 00	 mov	 DWORD PTR ?hms_target_locked@@3HA, eax ; hms_target_locked
$LN1@set_ka50_l:

; 471  : 
; 472  : 			break;
; 473  : 		}
; 474  : 	}
; 475  : }

  00034	5f		 pop	 edi
  00035	5e		 pop	 esi
  00036	5b		 pop	 ebx
  00037	8b e5		 mov	 esp, ebp
  00039	5d		 pop	 ebp
  0003a	c2 04 00	 ret	 4
?set_ka50_lock_target@@YGXH@Z ENDP			; set_ka50_lock_target
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\gunships\avionics\ka50\hm_tgt.c
;	COMDAT ?toggle_ka50_lock_target@@YGXXZ
_TEXT	SEGMENT
tv64 = -68						; size = 4
?toggle_ka50_lock_target@@YGXXZ PROC			; toggle_ka50_lock_target, COMDAT

; 401  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 44	 sub	 esp, 68			; 00000044H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 402  : 	switch (target_acquisition_system)

  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ?target_acquisition_system@@3W4TARGET_ACQUISITION_SYSTEMS@@A ; target_acquisition_system
  0000e	89 45 bc	 mov	 DWORD PTR tv64[ebp], eax
  00011	83 7d bc 03	 cmp	 DWORD PTR tv64[ebp], 3
  00015	74 0a		 je	 SHORT $LN5@toggle_ka5
  00017	83 7d bc 0a	 cmp	 DWORD PTR tv64[ebp], 10	; 0000000aH
  0001b	74 0b		 je	 SHORT $LN6@toggle_ka5
  0001d	eb 43		 jmp	 SHORT $LN1@toggle_ka5

; 403  : 	{
; 404  : 		////////////////////////////////////////
; 405  : 		case TARGET_ACQUISITION_SYSTEM_OFF:
; 406  : 		////////////////////////////////////////
; 407  : 		{
; 408  : 			break;

  0001f	eb 41		 jmp	 SHORT $LN1@toggle_ka5
$LN5@toggle_ka5:

; 409  : 		}
; 410  : 		////////////////////////////////////////
; 411  : 		case TARGET_ACQUISITION_SYSTEM_FLIR:
; 412  : 		////////////////////////////////////////
; 413  : 		{
; 414  : 			toggle_eo_lock();

  00021	e8 00 00 00 00	 call	 ?toggle_eo_lock@@YGXXZ	; toggle_eo_lock

; 415  : 
; 416  : 			break;

  00026	eb 3a		 jmp	 SHORT $LN1@toggle_ka5
$LN6@toggle_ka5:

; 417  : 		}
; 418  : 		////////////////////////////////////////
; 419  : 		case TARGET_ACQUISITION_SYSTEM_HMS:
; 420  : 		////////////////////////////////////////
; 421  : 		{
; 422  : 			hms_target_locked ^= 1;

  00028	a1 00 00 00 00	 mov	 eax, DWORD PTR ?hms_target_locked@@3HA ; hms_target_locked
  0002d	83 f0 01	 xor	 eax, 1
  00030	a3 00 00 00 00	 mov	 DWORD PTR ?hms_target_locked@@3HA, eax ; hms_target_locked

; 423  : 
; 424  : 			if (hms_target_locked)

  00035	74 1b		 je	 SHORT $LN7@toggle_ka5

; 425  : 			{
; 426  : 				if (in_cockpit && !query_TIR_active())

  00037	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?in_cockpit@@3HA, 0 ; in_cockpit
  0003e	74 10		 je	 SHORT $LN9@toggle_ka5
  00040	e8 00 00 00 00	 call	 ?query_TIR_active@@YAHXZ ; query_TIR_active
  00045	85 c0		 test	 eax, eax
  00047	75 07		 jne	 SHORT $LN9@toggle_ka5

; 427  : 				{
; 428  : 					set_view_mode (VIEW_MODE_VIRTUAL_COCKPIT_TRACK_TARGET);

  00049	6a 22		 push	 34			; 00000022H
  0004b	e8 00 00 00 00	 call	 ?set_view_mode@@YGHW4VIEW_MODES@@@Z ; set_view_mode
$LN9@toggle_ka5:

; 429  : 				}
; 430  : 			}
; 431  : 			else

  00050	eb 10		 jmp	 SHORT $LN1@toggle_ka5
$LN7@toggle_ka5:

; 432  : 			{
; 433  : 				if (get_view_mode () == VIEW_MODE_VIRTUAL_COCKPIT_TRACK_TARGET)

  00052	83 3d 00 00 00
	00 22		 cmp	 DWORD PTR ?view_mode@@3W4VIEW_MODES@@A, 34 ; view_mode, 00000022H
  00059	75 07		 jne	 SHORT $LN1@toggle_ka5

; 434  : 				{
; 435  : 					select_padlock_view_event (PADLOCK_MODE_NONE);

  0005b	6a 00		 push	 0
  0005d	e8 00 00 00 00	 call	 ?select_padlock_view_event@@YGXW4PADLOCK_MODES@@@Z ; select_padlock_view_event
$LN1@toggle_ka5:

; 436  : 				}
; 437  : 			}
; 438  : 
; 439  : 			break;
; 440  : 		}
; 441  : 	}
; 442  : }

  00062	5f		 pop	 edi
  00063	5e		 pop	 esi
  00064	5b		 pop	 ebx
  00065	8b e5		 mov	 esp, ebp
  00067	5d		 pop	 ebp
  00068	c3		 ret	 0
?toggle_ka50_lock_target@@YGXXZ ENDP			; toggle_ka50_lock_target
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\gunships\avionics\ka50\hm_tgt.c
;	COMDAT ?centre_ka50_target_acquisition_system@@YGXXZ
_TEXT	SEGMENT
tv64 = -68						; size = 4
?centre_ka50_target_acquisition_system@@YGXXZ PROC	; centre_ka50_target_acquisition_system, COMDAT

; 370  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 44	 sub	 esp, 68			; 00000044H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 371  : 	switch (target_acquisition_system)

  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ?target_acquisition_system@@3W4TARGET_ACQUISITION_SYSTEMS@@A ; target_acquisition_system
  0000e	89 45 bc	 mov	 DWORD PTR tv64[ebp], eax
  00011	83 7d bc 03	 cmp	 DWORD PTR tv64[ebp], 3
  00015	74 04		 je	 SHORT $LN5@centre_ka5
  00017	eb 07		 jmp	 SHORT $LN1@centre_ka5

; 372  : 	{
; 373  : 		////////////////////////////////////////
; 374  : 		case TARGET_ACQUISITION_SYSTEM_OFF:
; 375  : 		////////////////////////////////////////
; 376  : 		{
; 377  : 			break;

  00019	eb 05		 jmp	 SHORT $LN1@centre_ka5
$LN5@centre_ka5:

; 378  : 		}
; 379  : 		////////////////////////////////////////
; 380  : 		case TARGET_ACQUISITION_SYSTEM_FLIR:
; 381  : 		////////////////////////////////////////
; 382  : 		{
; 383  : 			centre_ka50_eo ();

  0001b	e8 00 00 00 00	 call	 ?centre_ka50_eo@@YGXXZ	; centre_ka50_eo
$LN1@centre_ka5:

; 384  : 
; 385  : 			break;
; 386  : 		}
; 387  : 		////////////////////////////////////////
; 388  : 		case TARGET_ACQUISITION_SYSTEM_HMS:
; 389  : 		////////////////////////////////////////
; 390  : 		{
; 391  : 			break;
; 392  : 		}
; 393  : 	}
; 394  : }

  00020	5f		 pop	 edi
  00021	5e		 pop	 esi
  00022	5b		 pop	 ebx
  00023	8b e5		 mov	 esp, ebp
  00025	5d		 pop	 ebp
  00026	c3		 ret	 0
?centre_ka50_target_acquisition_system@@YGXXZ ENDP	; centre_ka50_target_acquisition_system
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\gunships\avionics\ka50\hm_tgt.c
;	COMDAT ?update_ka50_target_acquisition_system@@YGXXZ
_TEXT	SEGMENT
tv218 = -88						; size = 4
tv197 = -88						; size = 4
tv172 = -88						; size = 4
tv151 = -88						; size = 4
tv95 = -88						; size = 4
tv210 = -84						; size = 4
tv190 = -84						; size = 4
tv181 = -84						; size = 4
tv164 = -84						; size = 4
tv144 = -84						; size = 4
tv138 = -84						; size = 4
tv87 = -84						; size = 4
tv73 = -84						; size = 4
_los_to_target$1 = -16					; size = 4
_laser_on$2 = -12					; size = 4
_target$3 = -8						; size = 4
_source$4 = -4						; size = 4
?update_ka50_target_acquisition_system@@YGXXZ PROC	; update_ka50_target_acquisition_system, COMDAT

; 234  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 58	 sub	 esp, 88			; 00000058H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 235  : 	if (ka50_damage.helmet_mounted_sight)

  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ?ka50_damage@@3TKA50_DAMAGE_FLAGS@@A ; ka50_damage
  0000e	c1 e8 08	 shr	 eax, 8
  00011	83 e0 01	 and	 eax, 1
  00014	74 13		 je	 SHORT $LN6@update_ka5

; 236  : 	{
; 237  : 		if (hud_mode == HUD_MODE_WEAPON)

  00016	83 3d 00 00 00
	00 02		 cmp	 DWORD PTR ?hud_mode@@3W4HUD_MODES@@A, 2 ; hud_mode
  0001d	75 0a		 jne	 SHORT $LN6@update_ka5

; 238  : 		{
; 239  : 			hud_mode = HUD_MODE_NAVIGATION;

  0001f	c7 05 00 00 00
	00 00 00 00 00	 mov	 DWORD PTR ?hud_mode@@3W4HUD_MODES@@A, 0 ; hud_mode
$LN6@update_ka5:

; 240  : 		}
; 241  : 	}
; 242  : 
; 243  : 	if (ground_radar_is_active())

  00029	e8 00 00 00 00	 call	 ?ground_radar_is_active@@YGHXZ ; ground_radar_is_active
  0002e	85 c0		 test	 eax, eax
  00030	74 09		 je	 SHORT $LN8@update_ka5

; 244  : 		update_common_ground_radar(FALSE);

  00032	6a 00		 push	 0
  00034	e8 00 00 00 00	 call	 ?update_common_ground_radar@@YGXH@Z ; update_common_ground_radar
  00039	eb 0e		 jmp	 SHORT $LN9@update_ka5
$LN8@update_ka5:

; 245  : 	else if (air_radar_is_active())

  0003b	e8 00 00 00 00	 call	 ?air_radar_is_active@@YGHXZ ; air_radar_is_active
  00040	85 c0		 test	 eax, eax
  00042	74 05		 je	 SHORT $LN9@update_ka5

; 246  : 		update_common_air_radar();

  00044	e8 00 00 00 00	 call	 ?update_common_air_radar@@YGXXZ ; update_common_air_radar
$LN9@update_ka5:

; 247  : 
; 248  : 	switch (target_acquisition_system)

  00049	a1 00 00 00 00	 mov	 eax, DWORD PTR ?target_acquisition_system@@3W4TARGET_ACQUISITION_SYSTEMS@@A ; target_acquisition_system
  0004e	89 45 ac	 mov	 DWORD PTR tv73[ebp], eax
  00051	83 7d ac 00	 cmp	 DWORD PTR tv73[ebp], 0
  00055	74 0e		 je	 SHORT $LN11@update_ka5
  00057	83 7d ac 03	 cmp	 DWORD PTR tv73[ebp], 3
  0005b	74 25		 je	 SHORT $LN12@update_ka5
  0005d	83 7d ac 0a	 cmp	 DWORD PTR tv73[ebp], 10	; 0000000aH
  00061	74 37		 je	 SHORT $LN13@update_ka5
  00063	eb 50		 jmp	 SHORT $LN2@update_ka5
$LN11@update_ka5:

; 249  : 	{
; 250  : 		////////////////////////////////////////
; 251  : 		case TARGET_ACQUISITION_SYSTEM_OFF:
; 252  : 		////////////////////////////////////////
; 253  : 		{
; 254  : 			target_locked = FALSE;

  00065	c7 05 00 00 00
	00 00 00 00 00	 mov	 DWORD PTR ?target_locked@@3HA, 0 ; target_locked

; 255  : 
; 256  : 			update_weapon_lock_type (TARGET_ACQUISITION_SYSTEM_OFF);

  0006f	6a 00		 push	 0
  00071	e8 00 00 00 00	 call	 ?update_weapon_lock_type@@YGXW4TARGET_ACQUISITION_SYSTEMS@@@Z ; update_weapon_lock_type

; 257  : 
; 258  : 			slave_common_eo_to_current_target ();

  00076	e8 00 00 00 00	 call	 ?slave_common_eo_to_current_target@@YGXXZ ; slave_common_eo_to_current_target

; 259  : 
; 260  : 			slave_ka50_eo_to_current_target ();

  0007b	e8 00 00 00 00	 call	 ?slave_ka50_eo_to_current_target@@YGXXZ ; slave_ka50_eo_to_current_target

; 261  : 
; 262  : 			break;

  00080	eb 33		 jmp	 SHORT $LN2@update_ka5
$LN12@update_ka5:

; 263  : 		}
; 264  : 		////////////////////////////////////////
; 265  : 		case TARGET_ACQUISITION_SYSTEM_FLIR:
; 266  : 		////////////////////////////////////////
; 267  : 		{
; 268  : 			update_ka50_eo (&ka50_flir);

  00082	68 00 00 00 00	 push	 OFFSET ?ka50_flir@@3UEO_PARAMS_DYNAMIC_MOVE@@A ; ka50_flir
  00087	e8 00 00 00 00	 call	 ?update_ka50_eo@@YGXPAUEO_PARAMS_DYNAMIC_MOVE@@@Z ; update_ka50_eo

; 269  : 
; 270  : 			update_common_eo ();

  0008c	e8 00 00 00 00	 call	 ?update_common_eo@@YGXXZ ; update_common_eo

; 271  : 
; 272  : 			update_weapon_lock_type (TARGET_ACQUISITION_SYSTEM_FLIR);

  00091	6a 03		 push	 3
  00093	e8 00 00 00 00	 call	 ?update_weapon_lock_type@@YGXW4TARGET_ACQUISITION_SYSTEMS@@@Z ; update_weapon_lock_type

; 273  : 
; 274  : 			break;

  00098	eb 1b		 jmp	 SHORT $LN2@update_ka5
$LN13@update_ka5:

; 275  : 		}
; 276  : 		////////////////////////////////////////
; 277  : 		case TARGET_ACQUISITION_SYSTEM_HMS:
; 278  : 		////////////////////////////////////////
; 279  : 		{
; 280  : 			update_ka50_hms ();

  0009a	e8 00 00 00 00	 call	 ?update_ka50_hms@@YGXXZ	; update_ka50_hms

; 281  : 
; 282  : 			update_common_hms ();

  0009f	e8 00 00 00 00	 call	 ?update_common_hms@@YGXXZ ; update_common_hms

; 283  : 
; 284  : 			update_weapon_lock_type (TARGET_ACQUISITION_SYSTEM_HMS);

  000a4	6a 0a		 push	 10			; 0000000aH
  000a6	e8 00 00 00 00	 call	 ?update_weapon_lock_type@@YGXW4TARGET_ACQUISITION_SYSTEMS@@@Z ; update_weapon_lock_type

; 285  : 
; 286  : 			slave_common_eo_to_current_target ();

  000ab	e8 00 00 00 00	 call	 ?slave_common_eo_to_current_target@@YGXXZ ; slave_common_eo_to_current_target

; 287  : 
; 288  : 			slave_ka50_eo_to_current_target ();

  000b0	e8 00 00 00 00	 call	 ?slave_ka50_eo_to_current_target@@YGXXZ ; slave_ka50_eo_to_current_target
$LN2@update_ka5:

; 289  : 
; 290  : 			break;
; 291  : 		}
; 292  : 	}
; 293  : 
; 294  : 	////////////////////////////////////////
; 295  : 	//
; 296  : 	// radar / laser / los to target
; 297  : 	//
; 298  : 	////////////////////////////////////////
; 299  : 
; 300  : 	{
; 301  : 		entity
; 302  : 			*source,
; 303  : 			*target;
; 304  : 
; 305  : 		int
; 306  : 			laser_on,
; 307  : 			los_to_target;
; 308  : 
; 309  : 		source = get_gunship_entity ();

  000b5	a1 00 00 00 00	 mov	 eax, DWORD PTR ?gunship_entity@@3PAUENTITY@@A ; gunship_entity
  000ba	89 45 fc	 mov	 DWORD PTR _source$4[ebp], eax

; 310  : 
; 311  : 		target = get_local_entity_parent (source, LIST_TYPE_TARGET);

  000bd	83 7d fc 00	 cmp	 DWORD PTR _source$4[ebp], 0
  000c1	74 0a		 je	 SHORT $LN22@update_ka5
  000c3	8b 45 fc	 mov	 eax, DWORD PTR _source$4[ebp]
  000c6	8b 08		 mov	 ecx, DWORD PTR [eax]
  000c8	89 4d ac	 mov	 DWORD PTR tv87[ebp], ecx
  000cb	eb 21		 jmp	 SHORT $LN23@update_ka5
$LN22@update_ka5:
  000cd	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??update_ka50_target_acquisition_system@@YGXXZ@4JA
  000d3	83 c2 4d	 add	 edx, 77			; 0000004dH
  000d6	52		 push	 edx
  000d7	68 00 00 00 00	 push	 OFFSET ??_C@_0EM@EHNNLLHO@c?3?2users?2nhv90?2projects?2eech?2ap@
  000dc	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  000e1	50		 push	 eax
  000e2	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  000e7	c7 45 ac 00 00
	00 00		 mov	 DWORD PTR tv87[ebp], 0
$LN23@update_ka5:
  000ee	b9 01 00 00 00	 mov	 ecx, 1
  000f3	85 c9		 test	 ecx, ecx
  000f5	74 09		 je	 SHORT $LN24@update_ka5
  000f7	c7 45 a8 26 00
	00 00		 mov	 DWORD PTR tv95[ebp], 38	; 00000026H
  000fe	eb 21		 jmp	 SHORT $LN25@update_ka5
$LN24@update_ka5:
  00100	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??update_ka50_target_acquisition_system@@YGXXZ@4JA
  00106	83 c2 4d	 add	 edx, 77			; 0000004dH
  00109	52		 push	 edx
  0010a	68 00 00 00 00	 push	 OFFSET ??_C@_0EM@EHNNLLHO@c?3?2users?2nhv90?2projects?2eech?2ap@
  0010f	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_list_type_message@@3PBDB ; overload_invalid_list_type_message
  00114	50		 push	 eax
  00115	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  0011a	c7 45 a8 00 00
	00 00		 mov	 DWORD PTR tv95[ebp], 0
$LN25@update_ka5:
  00121	6a 26		 push	 38			; 00000026H
  00123	8b 4d fc	 mov	 ecx, DWORD PTR _source$4[ebp]
  00126	51		 push	 ecx
  00127	69 55 ac b4 00
	00 00		 imul	 edx, DWORD PTR tv87[ebp], 180
  0012e	8b 45 a8	 mov	 eax, DWORD PTR tv95[ebp]
  00131	8b 8c 82 00 00
	00 00		 mov	 ecx, DWORD PTR ?fn_get_local_entity_parent@@3PAY0CN@P6GPAUENTITY@@PAU1@W4LIST_TYPES@@@ZA[edx+eax*4]
  00138	ff d1		 call	 ecx
  0013a	89 45 f8	 mov	 DWORD PTR _target$3[ebp], eax

; 312  : 
; 313  : 		//
; 314  : 		// laser on/off
; 315  : 		//
; 316  : 
; 317  : 		laser_on = laser_is_active() && !comanche_damage.laser_designator;

  0013d	e8 00 00 00 00	 call	 ?laser_is_active@@YGHXZ	; laser_is_active
  00142	85 c0		 test	 eax, eax
  00144	74 16		 je	 SHORT $LN26@update_ka5
  00146	a1 00 00 00 00	 mov	 eax, DWORD PTR ?comanche_damage@@3TCOMANCHE_DAMAGE_FLAGS@@A ; comanche_damage
  0014b	c1 e8 04	 shr	 eax, 4
  0014e	83 e0 01	 and	 eax, 1
  00151	75 09		 jne	 SHORT $LN26@update_ka5
  00153	c7 45 ac 01 00
	00 00		 mov	 DWORD PTR tv138[ebp], 1
  0015a	eb 07		 jmp	 SHORT $LN27@update_ka5
$LN26@update_ka5:
  0015c	c7 45 ac 00 00
	00 00		 mov	 DWORD PTR tv138[ebp], 0
$LN27@update_ka5:
  00163	8b 4d ac	 mov	 ecx, DWORD PTR tv138[ebp]
  00166	89 4d f4	 mov	 DWORD PTR _laser_on$2[ebp], ecx

; 318  : 
; 319  : 		if (laser_on != get_local_entity_int_value (source, INT_TYPE_LASER_ON))

  00169	83 7d fc 00	 cmp	 DWORD PTR _source$4[ebp], 0
  0016d	74 0a		 je	 SHORT $LN28@update_ka5
  0016f	8b 45 fc	 mov	 eax, DWORD PTR _source$4[ebp]
  00172	8b 08		 mov	 ecx, DWORD PTR [eax]
  00174	89 4d ac	 mov	 DWORD PTR tv144[ebp], ecx
  00177	eb 1d		 jmp	 SHORT $LN29@update_ka5
$LN28@update_ka5:
  00179	68 3f 01 00 00	 push	 319			; 0000013fH
  0017e	68 00 00 00 00	 push	 OFFSET ??_C@_0EM@EHNNLLHO@c?3?2users?2nhv90?2projects?2eech?2ap@
  00183	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  00189	52		 push	 edx
  0018a	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  0018f	c7 45 ac 00 00
	00 00		 mov	 DWORD PTR tv144[ebp], 0
$LN29@update_ka5:
  00196	b8 01 00 00 00	 mov	 eax, 1
  0019b	85 c0		 test	 eax, eax
  0019d	74 09		 je	 SHORT $LN30@update_ka5
  0019f	c7 45 a8 78 00
	00 00		 mov	 DWORD PTR tv151[ebp], 120 ; 00000078H
  001a6	eb 1d		 jmp	 SHORT $LN31@update_ka5
$LN30@update_ka5:
  001a8	68 3f 01 00 00	 push	 319			; 0000013fH
  001ad	68 00 00 00 00	 push	 OFFSET ??_C@_0EM@EHNNLLHO@c?3?2users?2nhv90?2projects?2eech?2ap@
  001b2	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?overload_invalid_int_type_message@@3PBDB ; overload_invalid_int_type_message
  001b8	51		 push	 ecx
  001b9	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  001be	c7 45 a8 00 00
	00 00		 mov	 DWORD PTR tv151[ebp], 0
$LN31@update_ka5:
  001c5	6a 78		 push	 120			; 00000078H
  001c7	8b 55 fc	 mov	 edx, DWORD PTR _source$4[ebp]
  001ca	52		 push	 edx
  001cb	69 45 ac 5c 04
	00 00		 imul	 eax, DWORD PTR tv144[ebp], 1116
  001d2	8b 4d a8	 mov	 ecx, DWORD PTR tv151[ebp]
  001d5	8b 94 88 00 00
	00 00		 mov	 edx, DWORD PTR ?fn_get_local_entity_int_value@@3PAY0BBH@P6GHPAUENTITY@@W4INT_TYPES@@@ZA[eax+ecx*4]
  001dc	ff d2		 call	 edx
  001de	39 45 f4	 cmp	 DWORD PTR _laser_on$2[ebp], eax
  001e1	0f 84 89 00 00
	00		 je	 $LN14@update_ka5

; 320  : 		{
; 321  : 			set_client_server_entity_int_value (source, INT_TYPE_LASER_ON, laser_on);

  001e7	83 7d fc 00	 cmp	 DWORD PTR _source$4[ebp], 0
  001eb	74 0a		 je	 SHORT $LN32@update_ka5
  001ed	8b 45 fc	 mov	 eax, DWORD PTR _source$4[ebp]
  001f0	8b 08		 mov	 ecx, DWORD PTR [eax]
  001f2	89 4d ac	 mov	 DWORD PTR tv164[ebp], ecx
  001f5	eb 21		 jmp	 SHORT $LN33@update_ka5
$LN32@update_ka5:
  001f7	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??update_ka50_target_acquisition_system@@YGXXZ@4JA
  001fd	83 c2 57	 add	 edx, 87			; 00000057H
  00200	52		 push	 edx
  00201	68 00 00 00 00	 push	 OFFSET ??_C@_0EM@EHNNLLHO@c?3?2users?2nhv90?2projects?2eech?2ap@
  00206	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  0020b	50		 push	 eax
  0020c	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00211	c7 45 ac 00 00
	00 00		 mov	 DWORD PTR tv164[ebp], 0
$LN33@update_ka5:
  00218	b9 01 00 00 00	 mov	 ecx, 1
  0021d	85 c9		 test	 ecx, ecx
  0021f	74 09		 je	 SHORT $LN34@update_ka5
  00221	c7 45 a8 78 00
	00 00		 mov	 DWORD PTR tv172[ebp], 120 ; 00000078H
  00228	eb 21		 jmp	 SHORT $LN35@update_ka5
$LN34@update_ka5:
  0022a	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??update_ka50_target_acquisition_system@@YGXXZ@4JA
  00230	83 c2 57	 add	 edx, 87			; 00000057H
  00233	52		 push	 edx
  00234	68 00 00 00 00	 push	 OFFSET ??_C@_0EM@EHNNLLHO@c?3?2users?2nhv90?2projects?2eech?2ap@
  00239	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_int_type_message@@3PBDB ; overload_invalid_int_type_message
  0023e	50		 push	 eax
  0023f	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00244	c7 45 a8 00 00
	00 00		 mov	 DWORD PTR tv172[ebp], 0
$LN35@update_ka5:
  0024b	8b 4d f4	 mov	 ecx, DWORD PTR _laser_on$2[ebp]
  0024e	51		 push	 ecx
  0024f	6a 78		 push	 120			; 00000078H
  00251	8b 55 fc	 mov	 edx, DWORD PTR _source$4[ebp]
  00254	52		 push	 edx
  00255	69 45 ac b8 08
	00 00		 imul	 eax, DWORD PTR tv164[ebp], 2232
  0025c	8b 4d a8	 mov	 ecx, DWORD PTR tv172[ebp]
  0025f	8d 94 c8 00 00
	00 00		 lea	 edx, DWORD PTR ?fn_set_client_server_entity_int_value@@3PAY1BBH@1P6GXPAUENTITY@@W4INT_TYPES@@H@ZA[eax+ecx*8]
  00266	a1 00 00 00 00	 mov	 eax, DWORD PTR ?system_comms_model@@3W4COMMS_MODEL_TYPES@@A ; system_comms_model
  0026b	8b 0c 82	 mov	 ecx, DWORD PTR [edx+eax*4]
  0026e	ff d1		 call	 ecx
$LN14@update_ka5:

; 322  : 		}
; 323  : 
; 324  : 
; 325  : 		//
; 326  : 		// line of sight to target
; 327  : 		//
; 328  : 
; 329  : 		if (target)

  00270	83 7d f8 00	 cmp	 DWORD PTR _target$3[ebp], 0
  00274	74 37		 je	 SHORT $LN15@update_ka5

; 330  : 		{
; 331  : 			switch (target_acquisition_system)

  00276	a1 00 00 00 00	 mov	 eax, DWORD PTR ?target_acquisition_system@@3W4TARGET_ACQUISITION_SYSTEMS@@A ; target_acquisition_system
  0027b	89 45 ac	 mov	 DWORD PTR tv181[ebp], eax
  0027e	83 7d ac 00	 cmp	 DWORD PTR tv181[ebp], 0
  00282	74 0e		 je	 SHORT $LN17@update_ka5
  00284	83 7d ac 03	 cmp	 DWORD PTR tv181[ebp], 3
  00288	74 11		 je	 SHORT $LN18@update_ka5
  0028a	83 7d ac 0a	 cmp	 DWORD PTR tv181[ebp], 10 ; 0000000aH
  0028e	74 14		 je	 SHORT $LN19@update_ka5
  00290	eb 19		 jmp	 SHORT $LN4@update_ka5
$LN17@update_ka5:

; 332  : 			{
; 333  : 				case TARGET_ACQUISITION_SYSTEM_OFF:
; 334  : 				{
; 335  : 					los_to_target = FALSE;

  00292	c7 45 f0 00 00
	00 00		 mov	 DWORD PTR _los_to_target$1[ebp], 0

; 336  : 
; 337  : 					break;

  00299	eb 10		 jmp	 SHORT $LN4@update_ka5
$LN18@update_ka5:

; 338  : 				}
; 339  : 				case TARGET_ACQUISITION_SYSTEM_FLIR:
; 340  : 				{
; 341  : 					los_to_target = TRUE;

  0029b	c7 45 f0 01 00
	00 00		 mov	 DWORD PTR _los_to_target$1[ebp], 1

; 342  : 
; 343  : 					break;

  002a2	eb 07		 jmp	 SHORT $LN4@update_ka5
$LN19@update_ka5:

; 344  : 				}
; 345  : 				case TARGET_ACQUISITION_SYSTEM_HMS:
; 346  : 				{
; 347  : 					los_to_target = TRUE;

  002a4	c7 45 f0 01 00
	00 00		 mov	 DWORD PTR _los_to_target$1[ebp], 1
$LN4@update_ka5:

; 348  : 
; 349  : 					break;
; 350  : 				}
; 351  : 			}
; 352  : 		}
; 353  : 		else

  002ab	eb 07		 jmp	 SHORT $LN16@update_ka5
$LN15@update_ka5:

; 354  : 		{
; 355  : 			los_to_target = FALSE;

  002ad	c7 45 f0 00 00
	00 00		 mov	 DWORD PTR _los_to_target$1[ebp], 0
$LN16@update_ka5:

; 356  : 		}
; 357  : 
; 358  : 		if (los_to_target != get_local_entity_int_value (source, INT_TYPE_LOS_TO_TARGET))

  002b4	83 7d fc 00	 cmp	 DWORD PTR _source$4[ebp], 0
  002b8	74 0a		 je	 SHORT $LN36@update_ka5
  002ba	8b 45 fc	 mov	 eax, DWORD PTR _source$4[ebp]
  002bd	8b 08		 mov	 ecx, DWORD PTR [eax]
  002bf	89 4d ac	 mov	 DWORD PTR tv190[ebp], ecx
  002c2	eb 1d		 jmp	 SHORT $LN37@update_ka5
$LN36@update_ka5:
  002c4	68 66 01 00 00	 push	 358			; 00000166H
  002c9	68 00 00 00 00	 push	 OFFSET ??_C@_0EM@EHNNLLHO@c?3?2users?2nhv90?2projects?2eech?2ap@
  002ce	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  002d4	52		 push	 edx
  002d5	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  002da	c7 45 ac 00 00
	00 00		 mov	 DWORD PTR tv190[ebp], 0
$LN37@update_ka5:
  002e1	b8 01 00 00 00	 mov	 eax, 1
  002e6	85 c0		 test	 eax, eax
  002e8	74 09		 je	 SHORT $LN38@update_ka5
  002ea	c7 45 a8 80 00
	00 00		 mov	 DWORD PTR tv197[ebp], 128 ; 00000080H
  002f1	eb 1d		 jmp	 SHORT $LN39@update_ka5
$LN38@update_ka5:
  002f3	68 66 01 00 00	 push	 358			; 00000166H
  002f8	68 00 00 00 00	 push	 OFFSET ??_C@_0EM@EHNNLLHO@c?3?2users?2nhv90?2projects?2eech?2ap@
  002fd	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?overload_invalid_int_type_message@@3PBDB ; overload_invalid_int_type_message
  00303	51		 push	 ecx
  00304	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00309	c7 45 a8 00 00
	00 00		 mov	 DWORD PTR tv197[ebp], 0
$LN39@update_ka5:
  00310	68 80 00 00 00	 push	 128			; 00000080H
  00315	8b 55 fc	 mov	 edx, DWORD PTR _source$4[ebp]
  00318	52		 push	 edx
  00319	69 45 ac 5c 04
	00 00		 imul	 eax, DWORD PTR tv190[ebp], 1116
  00320	8b 4d a8	 mov	 ecx, DWORD PTR tv197[ebp]
  00323	8b 94 88 00 00
	00 00		 mov	 edx, DWORD PTR ?fn_get_local_entity_int_value@@3PAY0BBH@P6GHPAUENTITY@@W4INT_TYPES@@@ZA[eax+ecx*4]
  0032a	ff d2		 call	 edx
  0032c	39 45 f0	 cmp	 DWORD PTR _los_to_target$1[ebp], eax
  0032f	0f 84 8c 00 00
	00		 je	 $LN1@update_ka5

; 359  : 		{
; 360  : 			set_client_server_entity_int_value (source, INT_TYPE_LOS_TO_TARGET, los_to_target);

  00335	83 7d fc 00	 cmp	 DWORD PTR _source$4[ebp], 0
  00339	74 0a		 je	 SHORT $LN40@update_ka5
  0033b	8b 45 fc	 mov	 eax, DWORD PTR _source$4[ebp]
  0033e	8b 08		 mov	 ecx, DWORD PTR [eax]
  00340	89 4d ac	 mov	 DWORD PTR tv210[ebp], ecx
  00343	eb 21		 jmp	 SHORT $LN41@update_ka5
$LN40@update_ka5:
  00345	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??update_ka50_target_acquisition_system@@YGXXZ@4JA
  0034b	83 c2 7e	 add	 edx, 126		; 0000007eH
  0034e	52		 push	 edx
  0034f	68 00 00 00 00	 push	 OFFSET ??_C@_0EM@EHNNLLHO@c?3?2users?2nhv90?2projects?2eech?2ap@
  00354	a1 00 00 00 00	 mov	 eax, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  00359	50		 push	 eax
  0035a	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  0035f	c7 45 ac 00 00
	00 00		 mov	 DWORD PTR tv210[ebp], 0
$LN41@update_ka5:
  00366	b9 01 00 00 00	 mov	 ecx, 1
  0036b	85 c9		 test	 ecx, ecx
  0036d	74 09		 je	 SHORT $LN42@update_ka5
  0036f	c7 45 a8 80 00
	00 00		 mov	 DWORD PTR tv218[ebp], 128 ; 00000080H
  00376	eb 21		 jmp	 SHORT $LN43@update_ka5
$LN42@update_ka5:
  00378	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?__LINE__Var@?0??update_ka50_target_acquisition_system@@YGXXZ@4JA
  0037e	83 c2 7e	 add	 edx, 126		; 0000007eH
  00381	52		 push	 edx
  00382	68 00 00 00 00	 push	 OFFSET ??_C@_0EM@EHNNLLHO@c?3?2users?2nhv90?2projects?2eech?2ap@
  00387	a1 00 00 00 00	 mov	 eax, DWORD PTR ?overload_invalid_int_type_message@@3PBDB ; overload_invalid_int_type_message
  0038c	50		 push	 eax
  0038d	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  00392	c7 45 a8 00 00
	00 00		 mov	 DWORD PTR tv218[ebp], 0
$LN43@update_ka5:
  00399	8b 4d f0	 mov	 ecx, DWORD PTR _los_to_target$1[ebp]
  0039c	51		 push	 ecx
  0039d	68 80 00 00 00	 push	 128			; 00000080H
  003a2	8b 55 fc	 mov	 edx, DWORD PTR _source$4[ebp]
  003a5	52		 push	 edx
  003a6	69 45 ac b8 08
	00 00		 imul	 eax, DWORD PTR tv210[ebp], 2232
  003ad	8b 4d a8	 mov	 ecx, DWORD PTR tv218[ebp]
  003b0	8d 94 c8 00 00
	00 00		 lea	 edx, DWORD PTR ?fn_set_client_server_entity_int_value@@3PAY1BBH@1P6GXPAUENTITY@@W4INT_TYPES@@H@ZA[eax+ecx*8]
  003b7	a1 00 00 00 00	 mov	 eax, DWORD PTR ?system_comms_model@@3W4COMMS_MODEL_TYPES@@A ; system_comms_model
  003bc	8b 0c 82	 mov	 ecx, DWORD PTR [edx+eax*4]
  003bf	ff d1		 call	 ecx
$LN1@update_ka5:

; 361  : 		}
; 362  : 	}
; 363  : }

  003c1	5f		 pop	 edi
  003c2	5e		 pop	 esi
  003c3	5b		 pop	 ebx
  003c4	8b e5		 mov	 esp, ebp
  003c6	5d		 pop	 ebp
  003c7	c3		 ret	 0
?update_ka50_target_acquisition_system@@YGXXZ ENDP	; update_ka50_target_acquisition_system
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\gunships\avionics\ka50\hm_tgt.c
;	COMDAT ?select_ka50_target_acquisition_system@@YGXW4TARGET_ACQUISITION_SYSTEMS@@@Z
_TEXT	SEGMENT
tv65 = -80						; size = 4
_damaged$ = -12						; size = 4
_old_system$ = -8					; size = 4
_new_system$ = -4					; size = 4
_system$ = 8						; size = 4
?select_ka50_target_acquisition_system@@YGXW4TARGET_ACQUISITION_SYSTEMS@@@Z PROC ; select_ka50_target_acquisition_system, COMDAT

; 147  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 50	 sub	 esp, 80			; 00000050H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 148  : 	target_acquisition_systems
; 149  : 		new_system,
; 150  : 		old_system;
; 151  : 
; 152  : 	int
; 153  : 		damaged;
; 154  : 
; 155  : 	new_system = system;

  00009	8b 45 08	 mov	 eax, DWORD PTR _system$[ebp]
  0000c	89 45 fc	 mov	 DWORD PTR _new_system$[ebp], eax

; 156  : 	old_system = target_acquisition_system;

  0000f	a1 00 00 00 00	 mov	 eax, DWORD PTR ?target_acquisition_system@@3W4TARGET_ACQUISITION_SYSTEMS@@A ; target_acquisition_system
  00014	89 45 f8	 mov	 DWORD PTR _old_system$[ebp], eax

; 157  : 
; 158  : 	damaged = FALSE;

  00017	c7 45 f4 00 00
	00 00		 mov	 DWORD PTR _damaged$[ebp], 0

; 159  : 
; 160  : 	reset_common_target_acquisition_system_keys ();

  0001e	e8 00 00 00 00	 call	 ?reset_common_target_acquisition_system_keys@@YGXXZ ; reset_common_target_acquisition_system_keys

; 161  : 
; 162  : 	deselect_ka50_target_acquisition_system (target_acquisition_system);

  00023	a1 00 00 00 00	 mov	 eax, DWORD PTR ?target_acquisition_system@@3W4TARGET_ACQUISITION_SYSTEMS@@A ; target_acquisition_system
  00028	50		 push	 eax
  00029	e8 00 00 00 00	 call	 ?deselect_ka50_target_acquisition_system@@YGXW4TARGET_ACQUISITION_SYSTEMS@@@Z ; deselect_ka50_target_acquisition_system

; 163  : 
; 164  : 	switch (system)

  0002e	8b 45 08	 mov	 eax, DWORD PTR _system$[ebp]
  00031	89 45 b0	 mov	 DWORD PTR tv65[ebp], eax
  00034	83 7d b0 00	 cmp	 DWORD PTR tv65[ebp], 0
  00038	74 11		 je	 SHORT $LN4@select_ka5
  0003a	83 7d b0 03	 cmp	 DWORD PTR tv65[ebp], 3
  0003e	74 2f		 je	 SHORT $LN6@select_ka5
  00040	83 7d b0 0a	 cmp	 DWORD PTR tv65[ebp], 10	; 0000000aH
  00044	74 65		 je	 SHORT $LN9@select_ka5
  00046	e9 94 00 00 00	 jmp	 $LN11@select_ka5
$LN4@select_ka5:

; 165  : 	{
; 166  : 		////////////////////////////////////////
; 167  : 		case TARGET_ACQUISITION_SYSTEM_OFF:
; 168  : 		////////////////////////////////////////
; 169  : 		{
; 170  : 			target_acquisition_system = system;

  0004b	8b 45 08	 mov	 eax, DWORD PTR _system$[ebp]
  0004e	a3 00 00 00 00	 mov	 DWORD PTR ?target_acquisition_system@@3W4TARGET_ACQUISITION_SYSTEMS@@A, eax ; target_acquisition_system

; 171  : 
; 172  : 			set_gunship_target (NULL);

  00053	6a 00		 push	 0
  00055	e8 00 00 00 00	 call	 ?set_gunship_target@@YGXPAUENTITY@@@Z ; set_gunship_target

; 173  : 
; 174  : 			if (!command_line_manual_laser_radar)

  0005a	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?command_line_manual_laser_radar@@3HA, 0 ; command_line_manual_laser_radar
  00061	75 07		 jne	 SHORT $LN5@select_ka5

; 175  : 				set_laser_is_active(FALSE);

  00063	6a 00		 push	 0
  00065	e8 00 00 00 00	 call	 ?set_laser_is_active@@YGXH@Z ; set_laser_is_active
$LN5@select_ka5:

; 176  : 
; 177  : 			break;

  0006a	e9 81 00 00 00	 jmp	 $LN2@select_ka5
$LN6@select_ka5:

; 178  : 		}
; 179  : 		////////////////////////////////////////
; 180  : 		case TARGET_ACQUISITION_SYSTEM_FLIR:
; 181  : 		////////////////////////////////////////
; 182  : 		{
; 183  : 			if (!ka50_damage.flir)

  0006f	a1 00 00 00 00	 mov	 eax, DWORD PTR ?ka50_damage@@3TKA50_DAMAGE_FLAGS@@A ; ka50_damage
  00074	83 e0 01	 and	 eax, 1
  00077	75 25		 jne	 SHORT $LN7@select_ka5

; 184  : 			{
; 185  : 				target_acquisition_system = system;

  00079	8b 45 08	 mov	 eax, DWORD PTR _system$[ebp]
  0007c	a3 00 00 00 00	 mov	 DWORD PTR ?target_acquisition_system@@3W4TARGET_ACQUISITION_SYSTEMS@@A, eax ; target_acquisition_system

; 186  : 
; 187  : 				activate_common_eo ();

  00081	e8 00 00 00 00	 call	 ?activate_common_eo@@YGXXZ ; activate_common_eo

; 188  : 
; 189  : 				if (command_line_targeting_system_auto_page)

  00086	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?command_line_targeting_system_auto_page@@3HA, 0 ; command_line_targeting_system_auto_page
  0008d	74 05		 je	 SHORT $LN8@select_ka5

; 190  : 					select_ka50_eo_mfd ();

  0008f	e8 00 00 00 00	 call	 ?select_ka50_eo_mfd@@YGXXZ ; select_ka50_eo_mfd
$LN8@select_ka5:

; 191  : 
; 192  : 				hud_mode = HUD_MODE_WEAPON;

  00094	c7 05 00 00 00
	00 02 00 00 00	 mov	 DWORD PTR ?hud_mode@@3W4HUD_MODES@@A, 2 ; hud_mode
$LN7@select_ka5:

; 193  : 			}
; 194  : 
; 195  : 			damaged = ka50_damage.flir;

  0009e	a1 00 00 00 00	 mov	 eax, DWORD PTR ?ka50_damage@@3TKA50_DAMAGE_FLAGS@@A ; ka50_damage
  000a3	83 e0 01	 and	 eax, 1
  000a6	89 45 f4	 mov	 DWORD PTR _damaged$[ebp], eax

; 196  : 
; 197  : 			break;

  000a9	eb 45		 jmp	 SHORT $LN2@select_ka5
$LN9@select_ka5:

; 198  : 		}
; 199  : 		////////////////////////////////////////
; 200  : 		case TARGET_ACQUISITION_SYSTEM_HMS:
; 201  : 		////////////////////////////////////////
; 202  : 		{
; 203  : 			if (!ka50_damage.helmet_mounted_sight)

  000ab	a1 00 00 00 00	 mov	 eax, DWORD PTR ?ka50_damage@@3TKA50_DAMAGE_FLAGS@@A ; ka50_damage
  000b0	c1 e8 08	 shr	 eax, 8
  000b3	83 e0 01	 and	 eax, 1
  000b6	75 17		 jne	 SHORT $LN10@select_ka5

; 204  : 			{
; 205  : 				target_acquisition_system = system;

  000b8	8b 45 08	 mov	 eax, DWORD PTR _system$[ebp]
  000bb	a3 00 00 00 00	 mov	 DWORD PTR ?target_acquisition_system@@3W4TARGET_ACQUISITION_SYSTEMS@@A, eax ; target_acquisition_system

; 206  : 
; 207  : 				activate_common_hms ();

  000c0	e8 00 00 00 00	 call	 ?activate_common_hms@@YGXXZ ; activate_common_hms

; 208  : 
; 209  : 				hud_mode = HUD_MODE_WEAPON;

  000c5	c7 05 00 00 00
	00 02 00 00 00	 mov	 DWORD PTR ?hud_mode@@3W4HUD_MODES@@A, 2 ; hud_mode
$LN10@select_ka5:

; 210  : 			}
; 211  : 
; 212  : 			damaged = ka50_damage.helmet_mounted_sight;

  000cf	a1 00 00 00 00	 mov	 eax, DWORD PTR ?ka50_damage@@3TKA50_DAMAGE_FLAGS@@A ; ka50_damage
  000d4	c1 e8 08	 shr	 eax, 8
  000d7	83 e0 01	 and	 eax, 1
  000da	89 45 f4	 mov	 DWORD PTR _damaged$[ebp], eax

; 213  : 
; 214  : 			break;

  000dd	eb 11		 jmp	 SHORT $LN2@select_ka5
$LN11@select_ka5:

; 215  : 		}
; 216  : 		////////////////////////////////////////
; 217  : 		default:
; 218  : 		////////////////////////////////////////
; 219  : 		{
; 220  : 			debug_fatal ("Invalid target acquisition system = %d", system);

  000df	8b 45 08	 mov	 eax, DWORD PTR _system$[ebp]
  000e2	50		 push	 eax
  000e3	68 00 00 00 00	 push	 OFFSET ??_C@_0CH@DDKDNBNH@Invalid?5target?5acquisition?5syst@
  000e8	e8 00 00 00 00	 call	 ?debug_fatal@@YAXPBDZZ	; debug_fatal
  000ed	83 c4 08	 add	 esp, 8
$LN2@select_ka5:

; 221  : 
; 222  : 			break;
; 223  : 		}
; 224  : 	}
; 225  : 
; 226  : 	play_common_cpg_target_acquisition_system_speech (new_system, old_system, damaged);

  000f0	8b 45 f4	 mov	 eax, DWORD PTR _damaged$[ebp]
  000f3	50		 push	 eax
  000f4	8b 4d f8	 mov	 ecx, DWORD PTR _old_system$[ebp]
  000f7	51		 push	 ecx
  000f8	8b 55 fc	 mov	 edx, DWORD PTR _new_system$[ebp]
  000fb	52		 push	 edx
  000fc	e8 00 00 00 00	 call	 ?play_common_cpg_target_acquisition_system_speech@@YGXW4TARGET_ACQUISITION_SYSTEMS@@0H@Z ; play_common_cpg_target_acquisition_system_speech

; 227  : }

  00101	5f		 pop	 edi
  00102	5e		 pop	 esi
  00103	5b		 pop	 ebx
  00104	8b e5		 mov	 esp, ebp
  00106	5d		 pop	 ebp
  00107	c2 04 00	 ret	 4
?select_ka50_target_acquisition_system@@YGXW4TARGET_ACQUISITION_SYSTEMS@@@Z ENDP ; select_ka50_target_acquisition_system
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\gunships\avionics\ka50\hm_tgt.c
;	COMDAT ?deinitialise_ka50_target_acquisition_systems@@YGXXZ
_TEXT	SEGMENT
?deinitialise_ka50_target_acquisition_systems@@YGXXZ PROC ; deinitialise_ka50_target_acquisition_systems, COMDAT

; 91   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 92   : 	deinitialise_ka50_eo ();

  00009	e8 00 00 00 00	 call	 ?deinitialise_ka50_eo@@YGXXZ ; deinitialise_ka50_eo

; 93   : 
; 94   : 	deinitialise_ka50_hms ();

  0000e	e8 00 00 00 00	 call	 ?deinitialise_ka50_hms@@YGXXZ ; deinitialise_ka50_hms

; 95   : }

  00013	5f		 pop	 edi
  00014	5e		 pop	 esi
  00015	5b		 pop	 ebx
  00016	8b e5		 mov	 esp, ebp
  00018	5d		 pop	 ebp
  00019	c3		 ret	 0
?deinitialise_ka50_target_acquisition_systems@@YGXXZ ENDP ; deinitialise_ka50_target_acquisition_systems
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\gunships\avionics\ka50\hm_tgt.c
;	COMDAT ?initialise_ka50_target_acquisition_systems@@YGXXZ
_TEXT	SEGMENT
?initialise_ka50_target_acquisition_systems@@YGXXZ PROC	; initialise_ka50_target_acquisition_systems, COMDAT

; 80   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 81   : 	initialise_ka50_eo ();

  00009	e8 00 00 00 00	 call	 ?initialise_ka50_eo@@YGXXZ ; initialise_ka50_eo

; 82   : 
; 83   : 	initialise_ka50_hms ();

  0000e	e8 00 00 00 00	 call	 ?initialise_ka50_hms@@YGXXZ ; initialise_ka50_hms

; 84   : }

  00013	5f		 pop	 edi
  00014	5e		 pop	 esi
  00015	5b		 pop	 ebx
  00016	8b e5		 mov	 esp, ebp
  00018	5d		 pop	 ebp
  00019	c3		 ret	 0
?initialise_ka50_target_acquisition_systems@@YGXXZ ENDP	; initialise_ka50_target_acquisition_systems
_TEXT	ENDS
END
