; Listing generated by Microsoft (R) Optimizing Compiler Version 19.16.27045.0 

	TITLE	C:\Users\nhv90\Projects\eech\aphavoc\source\entity\special\camera\cm_dstry.c
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB MSVCRTD
INCLUDELIB OLDNAMES

PUBLIC	?overload_camera_destroy_functions@@YGXXZ	; overload_camera_destroy_functions
PUBLIC	?destroy_local_camera_entity@@YGXXZ		; destroy_local_camera_entity
PUBLIC	?__LINE__Var@?0??destroy_local_camera_entity@@YGXXZ@4JA ; `destroy_local_camera_entity'::`1'::__LINE__Var
PUBLIC	??_C@_0EN@BPJLLKA@c?3?2users?2nhv90?2projects?2eech?2ap@ ; `string'
PUBLIC	??_C@_0BN@GKKOBHEC@get_camera_entity?5?$CI?$CJ?5?$DN?$DN?5NULL@ ; `string'
EXTRN	?process_assert@@YGXPBD0H@Z:PROC		; process_assert
EXTRN	?free_mem@@YGXPAX@Z:PROC			; free_mem
EXTRN	?delete_local_entity_from_parents_child_list@@YGXPAUENTITY@@W4LIST_TYPES@@@Z:PROC ; delete_local_entity_from_parents_child_list
EXTRN	?unlink_local_entity_children@@YGXPAUENTITY@@W4LIST_TYPES@@@Z:PROC ; unlink_local_entity_children
EXTRN	?set_free_entity@@YGXPAUENTITY@@@Z:PROC		; set_free_entity
EXTRN	?set_camera_entity@@YGXPAUENTITY@@@Z:PROC	; set_camera_entity
EXTRN	?fn_destroy_local_entity@@3PAP6GXPAUENTITY@@@ZA:BYTE ; fn_destroy_local_entity
EXTRN	?fn_destroy_local_entity_family@@3PAP6GXPAUENTITY@@@ZA:BYTE ; fn_destroy_local_entity_family
EXTRN	?fn_kill_local_entity@@3PAP6GXPAUENTITY@@@ZA:BYTE ; fn_kill_local_entity
EXTRN	?camera_entity@@3PAUENTITY@@A:DWORD		; camera_entity
;	COMDAT ??_C@_0BN@GKKOBHEC@get_camera_entity?5?$CI?$CJ?5?$DN?$DN?5NULL@
CONST	SEGMENT
??_C@_0BN@GKKOBHEC@get_camera_entity?5?$CI?$CJ?5?$DN?$DN?5NULL@ DB 'get_c'
	DB	'amera_entity () == NULL', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_0EN@BPJLLKA@c?3?2users?2nhv90?2projects?2eech?2ap@
CONST	SEGMENT
??_C@_0EN@BPJLLKA@c?3?2users?2nhv90?2projects?2eech?2ap@ DB 'c:\users\nhv'
	DB	'90\projects\eech\aphavoc\source\entity\special\camera\cm_dstr'
	DB	'y.c', 00H					; `string'
CONST	ENDS
;	COMDAT ?__LINE__Var@?0??destroy_local_camera_entity@@YGXXZ@4JA
_DATA	SEGMENT
?__LINE__Var@?0??destroy_local_camera_entity@@YGXXZ@4JA DD 097H ; `destroy_local_camera_entity'::`1'::__LINE__Var
_DATA	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\entity\special\camera\cm_dstry.c
;	COMDAT ?destroy_local@@YGXPAUENTITY@@@Z
_TEXT	SEGMENT
_raw$ = -4						; size = 4
_en$ = 8						; size = 4
?destroy_local@@YGXPAUENTITY@@@Z PROC			; destroy_local, COMDAT

; 80   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 44	 sub	 esp, 68			; 00000044H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 81   : 	camera
; 82   : 		*raw;
; 83   : 
; 84   : 	////////////////////////////////////////
; 85   : 	//
; 86   : 	// PRE-AMBLE
; 87   : 	//
; 88   : 	////////////////////////////////////////
; 89   : 
; 90   : 	#if DEBUG_MODULE
; 91   : 
; 92   : 	debug_log_entity_args (ENTITY_DEBUG_LOCAL, ENTITY_DEBUG_DESTROY, en);
; 93   : 
; 94   : 	#endif
; 95   : 
; 96   : 	raw = (camera *) get_local_entity_data (en);

  00009	8b 45 08	 mov	 eax, DWORD PTR _en$[ebp]
  0000c	8b 48 04	 mov	 ecx, DWORD PTR [eax+4]
  0000f	89 4d fc	 mov	 DWORD PTR _raw$[ebp], ecx

; 97   : 
; 98   : 	////////////////////////////////////////
; 99   : 	//
; 100  : 	// VALIDATE
; 101  : 	//
; 102  : 	////////////////////////////////////////
; 103  : 
; 104  : 	////////////////////////////////////////
; 105  : 	//
; 106  : 	// DESTROY COMPONENTS
; 107  : 	//
; 108  : 	////////////////////////////////////////
; 109  : 
; 110  : 	////////////////////////////////////////
; 111  : 	//
; 112  : 	// UNLINK FROM SYSTEM
; 113  : 	//
; 114  : 	////////////////////////////////////////
; 115  : 
; 116  : 	unlink_local_entity_children (en, LIST_TYPE_VIEW);

  00012	6a 2a		 push	 42			; 0000002aH
  00014	8b 45 08	 mov	 eax, DWORD PTR _en$[ebp]
  00017	50		 push	 eax
  00018	e8 00 00 00 00	 call	 ?unlink_local_entity_children@@YGXPAUENTITY@@W4LIST_TYPES@@@Z ; unlink_local_entity_children

; 117  : 
; 118  : 	delete_local_entity_from_parents_child_list (en, LIST_TYPE_UPDATE);

  0001d	6a 29		 push	 41			; 00000029H
  0001f	8b 45 08	 mov	 eax, DWORD PTR _en$[ebp]
  00022	50		 push	 eax
  00023	e8 00 00 00 00	 call	 ?delete_local_entity_from_parents_child_list@@YGXPAUENTITY@@W4LIST_TYPES@@@Z ; delete_local_entity_from_parents_child_list

; 119  : 
; 120  : 	set_camera_entity (NULL);

  00028	6a 00		 push	 0
  0002a	e8 00 00 00 00	 call	 ?set_camera_entity@@YGXPAUENTITY@@@Z ; set_camera_entity

; 121  : 
; 122  : 	////////////////////////////////////////
; 123  : 	//
; 124  : 	// FREE ENTITY DATA
; 125  : 	//
; 126  : 	////////////////////////////////////////
; 127  : 
; 128  : 	free_mem (raw);

  0002f	8b 45 fc	 mov	 eax, DWORD PTR _raw$[ebp]
  00032	50		 push	 eax
  00033	e8 00 00 00 00	 call	 ?free_mem@@YGXPAX@Z	; free_mem

; 129  : 
; 130  : 	set_free_entity (en);

  00038	8b 45 08	 mov	 eax, DWORD PTR _en$[ebp]
  0003b	50		 push	 eax
  0003c	e8 00 00 00 00	 call	 ?set_free_entity@@YGXPAUENTITY@@@Z ; set_free_entity

; 131  : }

  00041	5f		 pop	 edi
  00042	5e		 pop	 esi
  00043	5b		 pop	 ebx
  00044	8b e5		 mov	 esp, ebp
  00046	5d		 pop	 ebp
  00047	c2 04 00	 ret	 4
?destroy_local@@YGXPAUENTITY@@@Z ENDP			; destroy_local
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\entity\special\camera\cm_dstry.c
;	COMDAT ?destroy_local_camera_entity@@YGXXZ
_TEXT	SEGMENT
?destroy_local_camera_entity@@YGXXZ PROC		; destroy_local_camera_entity, COMDAT

; 151  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 152  : 	//
; 153  : 	// should be destroyed by destroy_local_entity_family
; 154  : 	//
; 155  : 
; 156  : 	ASSERT (get_camera_entity () == NULL);

  00009	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?camera_entity@@3PAUENTITY@@A, 0 ; camera_entity
  00010	74 18		 je	 SHORT $LN1@destroy_lo
  00012	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??destroy_local_camera_entity@@YGXXZ@4JA
  00017	83 c0 05	 add	 eax, 5
  0001a	50		 push	 eax
  0001b	68 00 00 00 00	 push	 OFFSET ??_C@_0EN@BPJLLKA@c?3?2users?2nhv90?2projects?2eech?2ap@
  00020	68 00 00 00 00	 push	 OFFSET ??_C@_0BN@GKKOBHEC@get_camera_entity?5?$CI?$CJ?5?$DN?$DN?5NULL@
  00025	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN1@destroy_lo:

; 157  : }

  0002a	5f		 pop	 edi
  0002b	5e		 pop	 esi
  0002c	5b		 pop	 ebx
  0002d	8b e5		 mov	 esp, ebp
  0002f	5d		 pop	 ebp
  00030	c3		 ret	 0
?destroy_local_camera_entity@@YGXXZ ENDP		; destroy_local_camera_entity
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\entity\special\camera\cm_dstry.c
;	COMDAT ?overload_camera_destroy_functions@@YGXXZ
_TEXT	SEGMENT
?overload_camera_destroy_functions@@YGXXZ PROC		; overload_camera_destroy_functions, COMDAT

; 138  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 139  : 	fn_destroy_local_entity				[ENTITY_TYPE_CAMERA]	= destroy_local;

  00009	b8 04 00 00 00	 mov	 eax, 4
  0000e	6b c8 03	 imul	 ecx, eax, 3
  00011	c7 81 00 00 00
	00 00 00 00 00	 mov	 DWORD PTR ?fn_destroy_local_entity@@3PAP6GXPAUENTITY@@@ZA[ecx], OFFSET ?destroy_local@@YGXPAUENTITY@@@Z ; destroy_local

; 140  : 
; 141  : 	fn_destroy_local_entity_family	[ENTITY_TYPE_CAMERA]	= destroy_local;

  0001b	b8 04 00 00 00	 mov	 eax, 4
  00020	6b c8 03	 imul	 ecx, eax, 3
  00023	c7 81 00 00 00
	00 00 00 00 00	 mov	 DWORD PTR ?fn_destroy_local_entity_family@@3PAP6GXPAUENTITY@@@ZA[ecx], OFFSET ?destroy_local@@YGXPAUENTITY@@@Z ; destroy_local

; 142  : 
; 143  : 	fn_kill_local_entity	 				[ENTITY_TYPE_CAMERA]	= destroy_local;

  0002d	b8 04 00 00 00	 mov	 eax, 4
  00032	6b c8 03	 imul	 ecx, eax, 3
  00035	c7 81 00 00 00
	00 00 00 00 00	 mov	 DWORD PTR ?fn_kill_local_entity@@3PAP6GXPAUENTITY@@@ZA[ecx], OFFSET ?destroy_local@@YGXPAUENTITY@@@Z ; destroy_local

; 144  : }

  0003f	5f		 pop	 edi
  00040	5e		 pop	 esi
  00041	5b		 pop	 ebx
  00042	8b e5		 mov	 esp, ebp
  00044	5d		 pop	 ebp
  00045	c3		 ret	 0
?overload_camera_destroy_functions@@YGXXZ ENDP		; overload_camera_destroy_functions
_TEXT	ENDS
END
