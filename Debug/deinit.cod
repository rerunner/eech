; Listing generated by Microsoft (R) Optimizing Compiler Version 19.16.27045.0 

	TITLE	C:\Users\nhv90\Projects\eech\aphavoc\source\deinit.c
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB MSVCRTD
INCLUDELIB OLDNAMES

PUBLIC	?deinitialise_game@@YGXXZ			; deinitialise_game
EXTRN	?release_cd_audio_device@@YGXXZ:PROC		; release_cd_audio_device
EXTRN	?ExitTrackIR@@YAXXZ:PROC			; ExitTrackIR
EXTRN	?query_TIR_active@@YAHXZ:PROC			; query_TIR_active
EXTRN	?deinitialise_event_stack@@YGXXZ:PROC		; deinitialise_event_stack
EXTRN	?check_safe_memory_counter@@YGXXZ:PROC		; check_safe_memory_counter
EXTRN	?check_safe_memory_mapped_file_counter@@YGXXZ:PROC ; check_safe_memory_mapped_file_counter
EXTRN	?deinitialise_memory_block_system@@YGXXZ:PROC	; deinitialise_memory_block_system
EXTRN	?display_memory_block_system_statistics@@YGXXZ:PROC ; display_memory_block_system_statistics
EXTRN	?deinitialise_file_tag_system@@YGXXZ:PROC	; deinitialise_file_tag_system
EXTRN	?deinitialise_ui_font@@YGXXZ:PROC		; deinitialise_ui_font
EXTRN	?deinitialise_ui_system@@YGXXZ:PROC		; deinitialise_ui_system
EXTRN	?deinitialise_ui_objects@@YGXXZ:PROC		; deinitialise_ui_objects
EXTRN	?mclose_all_graphics_files@@YGXXZ:PROC		; mclose_all_graphics_files
EXTRN	?save_global_options_data@@YGXXZ:PROC		; save_global_options_data
EXTRN	?deinitialise_update_function_list@@YGXXZ:PROC	; deinitialise_update_function_list
EXTRN	?deinitialise_application_sound_system@@YGXXZ:PROC ; deinitialise_application_sound_system
EXTRN	?deinitialise_comms@@YGXXZ:PROC			; deinitialise_comms
EXTRN	?deinitialise_comms_manager@@YGXXZ:PROC		; deinitialise_comms_manager
EXTRN	?net_uninit_heartbeat@@YGXXZ:PROC		; net_uninit_heartbeat
EXTRN	?deinitialise_entity_system@@YGXXZ:PROC		; deinitialise_entity_system
EXTRN	?delete_ballistics_tables@@YGXXZ:PROC		; delete_ballistics_tables
EXTRN	?deinitialise_ai_system@@YGXXZ:PROC		; deinitialise_ai_system
EXTRN	?deinitialise_application_3d_system@@YGXXZ:PROC	; deinitialise_application_3d_system
EXTRN	?deinitialise_language_database@@YGXXZ:PROC	; deinitialise_language_database
EXTRN	?save_player_list@@YGXXZ:PROC			; save_player_list
EXTRN	?deinitialise_session_list@@YGXXZ:PROC		; deinitialise_session_list
EXTRN	?DeInitialise_Shared_Memory@@YGXXZ:PROC		; DeInitialise_Shared_Memory
EXTRN	?ShutdownAxisInformation@@YGXXZ:PROC		; ShutdownAxisInformation
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\deinit.c
;	COMDAT ?deinitialise_game@@YGXXZ
_TEXT	SEGMENT
?deinitialise_game@@YGXXZ PROC				; deinitialise_game, COMDAT

; 81   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 82   : 	////////////////////////////////////////
; 83   : 	//
; 84   : 	// WARNING!	DEINITIALISATION ORDER IS CRITICAL.
; 85   : 	//
; 86   : 	// NOTE : 	MEMORY BLOCK SYSTEM CONSTRAINTS;
; 87   : 	//				DONT NOT USE REGISTER_EXIT_FUNCTION
; 88   : 	//				FOR DEINITIALISATION.
; 89   : 	//
; 90   : 	////////////////////////////////////////
; 91   : 
; 92   : 	////////////////////////////////////////
; 93   : 	//
; 94   : 	// UPDATE FUNCTION LIST
; 95   : 	//
; 96   : 	////////////////////////////////////////
; 97   : 
; 98   : 	deinitialise_update_function_list ();

  00009	e8 00 00 00 00	 call	 ?deinitialise_update_function_list@@YGXXZ ; deinitialise_update_function_list

; 99   : 
; 100  : 	////////////////////////////////////////
; 101  : 	//
; 102  : 	// SAVE GAME OPTIONS FIRST
; 103  : 	//
; 104  : 	////////////////////////////////////////
; 105  : 
; 106  : 	save_global_options_data ();

  0000e	e8 00 00 00 00	 call	 ?save_global_options_data@@YGXXZ ; save_global_options_data

; 107  : 
; 108  : 	////////////////////////////////////////
; 109  : 	//
; 110  : 	// SAVE PLAYER LIST
; 111  : 	//
; 112  : 	////////////////////////////////////////
; 113  : 
; 114  : 	save_player_list ();

  00013	e8 00 00 00 00	 call	 ?save_player_list@@YGXXZ ; save_player_list

; 115  : 
; 116  : 	////////////////////////////////////////
; 117  : 	//
; 118  : 	// DEINITIALISE MISSIONS
; 119  : 	//
; 120  : 	////////////////////////////////////////
; 121  : 
; 122  : 	deinitialise_session_list ();

  00018	e8 00 00 00 00	 call	 ?deinitialise_session_list@@YGXXZ ; deinitialise_session_list

; 123  : 
; 124  : 	////////////////////////////////////////
; 125  : 	//
; 126  : 	// DEINITIALISE AI SYSTEM
; 127  : 	//
; 128  : 	////////////////////////////////////////
; 129  : 
; 130  : 	deinitialise_file_tag_system ();

  0001d	e8 00 00 00 00	 call	 ?deinitialise_file_tag_system@@YGXXZ ; deinitialise_file_tag_system

; 131  : 
; 132  : 	deinitialise_ai_system ();

  00022	e8 00 00 00 00	 call	 ?deinitialise_ai_system@@YGXXZ ; deinitialise_ai_system

; 133  : 
; 134  : 	////////////////////////////////////////
; 135  : 	//
; 136  : 	// DEINITIALISE COMMS MANAGER
; 137  : 	//
; 138  : 	////////////////////////////////////////
; 139  : 
; 140  : 	deinitialise_comms_manager ();

  00027	e8 00 00 00 00	 call	 ?deinitialise_comms_manager@@YGXXZ ; deinitialise_comms_manager

; 141  : 
; 142  :    deinitialise_comms ();

  0002c	e8 00 00 00 00	 call	 ?deinitialise_comms@@YGXXZ ; deinitialise_comms

; 143  : 
; 144  : 	//Werewolf
; 145  : 	net_uninit_heartbeat();

  00031	e8 00 00 00 00	 call	 ?net_uninit_heartbeat@@YGXXZ ; net_uninit_heartbeat

; 146  : 
; 147  : 	////////////////////////////////////////
; 148  : 	//
; 149  : 	// INITIALISE LANGUAGE DATABASE
; 150  : 	//
; 151  : 	////////////////////////////////////////
; 152  : 
; 153  : 	deinitialise_language_database ();

  00036	e8 00 00 00 00	 call	 ?deinitialise_language_database@@YGXXZ ; deinitialise_language_database

; 154  : 
; 155  : 	////////////////////////////////////////
; 156  : 	//
; 157  : 	// DEINITIALISE 3D SYSTEM
; 158  : 	//
; 159  : 	////////////////////////////////////////
; 160  : 
; 161  : 	deinitialise_application_3d_system ();

  0003b	e8 00 00 00 00	 call	 ?deinitialise_application_3d_system@@YGXXZ ; deinitialise_application_3d_system

; 162  : 
; 163  : 	////////////////////////////////////////
; 164  : 	//
; 165  : 	// DEINITIALISE SOUND SYSTEM
; 166  : 	//
; 167  : 	////////////////////////////////////////
; 168  : 
; 169  : 	deinitialise_application_sound_system ();

  00040	e8 00 00 00 00	 call	 ?deinitialise_application_sound_system@@YGXXZ ; deinitialise_application_sound_system

; 170  : 
; 171  : 	////////////////////////////////////////
; 172  : 	//
; 173  : 	// DEINITIALISE EVENT STACK
; 174  : 	//
; 175  : 	////////////////////////////////////////
; 176  : 
; 177  : 	deinitialise_event_stack ();

  00045	e8 00 00 00 00	 call	 ?deinitialise_event_stack@@YGXXZ ; deinitialise_event_stack

; 178  : 
; 179  : 	////////////////////////////////////////
; 180  : 	//
; 181  : 	// DEINITIALISE USER-INTERFACE
; 182  : 	//
; 183  : 	////////////////////////////////////////
; 184  : 
; 185  : 	deinitialise_ui_system ();

  0004a	e8 00 00 00 00	 call	 ?deinitialise_ui_system@@YGXXZ ; deinitialise_ui_system

; 186  : 
; 187  : 	deinitialise_ui_font ();

  0004f	e8 00 00 00 00	 call	 ?deinitialise_ui_font@@YGXXZ ; deinitialise_ui_font

; 188  : 
; 189  : 	deinitialise_ui_objects ();

  00054	e8 00 00 00 00	 call	 ?deinitialise_ui_objects@@YGXXZ ; deinitialise_ui_objects

; 190  : 
; 191  : 	////////////////////////////////////////
; 192  : 	//
; 193  : 	// DEINITIALISE CD PLAYER
; 194  : 	//
; 195  : 	////////////////////////////////////////
; 196  : 
; 197  : 	release_cd_audio_device ();

  00059	e8 00 00 00 00	 call	 ?release_cd_audio_device@@YGXXZ ; release_cd_audio_device

; 198  : 	
; 199  : 	////////////////////////////////////////
; 200  : 	//
; 201  : 	// DEINITIALISE GRAPHICS FILES
; 202  : 	//
; 203  : 	////////////////////////////////////////
; 204  : 
; 205  : 	mclose_all_graphics_files ();

  0005e	e8 00 00 00 00	 call	 ?mclose_all_graphics_files@@YGXXZ ; mclose_all_graphics_files

; 206  : 
; 207  : 	////////////////////////////////////////
; 208  : 	//
; 209  : 	// DEINITIALISE ENTITY SYSTEM
; 210  : 	//
; 211  : 	////////////////////////////////////////
; 212  : 
; 213  : 	deinitialise_entity_system ();

  00063	e8 00 00 00 00	 call	 ?deinitialise_entity_system@@YGXXZ ; deinitialise_entity_system

; 214  : 
; 215  : 
; 216  : 	////////////////////////////////////////
; 217  : 	//
; 218  : 	// Retro 12Nov2004
; 219  : 	// TRACKIR, USERKEYMAPPING, CONTROLLERS
; 220  : 	//
; 221  : 	// hopefully the final resting place for that code..
; 222  : 	////////////////////////////////////////
; 223  : 
; 224  : 	// By Retro.. 030318
; 225  : 	// ..if TrackIR is active, tell it to stop transmitting before closing down..
; 226  : 	if (query_TIR_active() == TRUE)

  00068	e8 00 00 00 00	 call	 ?query_TIR_active@@YAHXZ ; query_TIR_active
  0006d	83 f8 01	 cmp	 eax, 1
  00070	75 05		 jne	 SHORT $LN2@deinitiali

; 227  : 		ExitTrackIR();

  00072	e8 00 00 00 00	 call	 ?ExitTrackIR@@YAXXZ	; ExitTrackIR
$LN2@deinitiali:

; 228  : 
; 229  : 	ShutdownAxisInformation();

  00077	e8 00 00 00 00	 call	 ?ShutdownAxisInformation@@YGXXZ ; ShutdownAxisInformation

; 230  : 
; 231  : 	////////////////////////////////////////
; 232  : 	//
; 233  : 	// INIT SHARED MEM 
; 234  : 	//
; 235  : 	////////////////////////////////////////
; 236  : 	// Retro 8Mar2005 - 14Aug2006
; 237  : 
; 238  : 	DeInitialise_Shared_Memory(); // we do this in any case, even if it was not set up..

  0007c	e8 00 00 00 00	 call	 ?DeInitialise_Shared_Memory@@YGXXZ ; DeInitialise_Shared_Memory

; 239  : 
; 240  : 	// arneh - delete the ballistics tables
; 241  : 	delete_ballistics_tables();

  00081	e8 00 00 00 00	 call	 ?delete_ballistics_tables@@YGXXZ ; delete_ballistics_tables

; 242  : 
; 243  : 	////////////////////////////////////////
; 244  : 	//
; 245  : 	// DEINITIALISE MEMORY BLOCK SYSTEM
; 246  : 	//
; 247  : 	////////////////////////////////////////
; 248  : 
; 249  : 	display_memory_block_system_statistics ();

  00086	e8 00 00 00 00	 call	 ?display_memory_block_system_statistics@@YGXXZ ; display_memory_block_system_statistics

; 250  : 
; 251  : 	deinitialise_memory_block_system ();

  0008b	e8 00 00 00 00	 call	 ?deinitialise_memory_block_system@@YGXXZ ; deinitialise_memory_block_system

; 252  : 
; 253  : 	check_safe_memory_counter ();

  00090	e8 00 00 00 00	 call	 ?check_safe_memory_counter@@YGXXZ ; check_safe_memory_counter

; 254  : 
; 255  : 	check_safe_memory_mapped_file_counter ();

  00095	e8 00 00 00 00	 call	 ?check_safe_memory_mapped_file_counter@@YGXXZ ; check_safe_memory_mapped_file_counter

; 256  : }

  0009a	5f		 pop	 edi
  0009b	5e		 pop	 esi
  0009c	5b		 pop	 ebx
  0009d	8b e5		 mov	 esp, ebp
  0009f	5d		 pop	 ebp
  000a0	c3		 ret	 0
?deinitialise_game@@YGXXZ ENDP				; deinitialise_game
_TEXT	ENDS
END
