; Listing generated by Microsoft (R) Optimizing Compiler Version 19.16.27045.0 

	TITLE	C:\Users\nhv90\Projects\eech\aphavoc\source\entity\fixed\pylon\py_pack.c
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB MSVCRTD
INCLUDELIB OLDNAMES

PUBLIC	?overload_pylon_pack_functions@@YGXXZ		; overload_pylon_pack_functions
PUBLIC	?pack_local_pylon_data@@YGXW4PACK_MODES@@@Z	; pack_local_pylon_data
PUBLIC	?unpack_local_pylon_data@@YGXW4PACK_MODES@@@Z	; unpack_local_pylon_data
PUBLIC	?__LINE__Var@?0??pack_local_data@@YGXPAUENTITY@@W4PACK_MODES@@@Z@4JA ; `pack_local_data'::`1'::__LINE__Var
PUBLIC	??_C@_0EJ@FJEFPLMF@c?3?2users?2nhv90?2projects?2eech?2ap@ ; `string'
PUBLIC	??_C@_0CH@MMFDPOBJ@?$CImode?5?$DO?$DN?50?$CJ?5?$CG?$CG?5?$CImode?5?$DM?5NUM_PACK@ ; `string'
PUBLIC	?__LINE__Var@?0??unpack_local_data@@YGXPAUENTITY@@W4ENTITY_TYPES@@W4PACK_MODES@@@Z@4JA ; `unpack_local_data'::`1'::__LINE__Var
PUBLIC	?__LINE__Var@?0??pack_local_pylon_data@@YGXW4PACK_MODES@@@Z@4JA ; `pack_local_pylon_data'::`1'::__LINE__Var
PUBLIC	??_C@_0CA@GHGJAHIH@mode?5?$CB?$DN?5PACK_MODE_UPDATE_ENTITY@ ; `string'
PUBLIC	??_C@_09MKIBCOEE@RLE?5PYLON@			; `string'
PUBLIC	?__LINE__Var@?0??unpack_local_pylon_data@@YGXW4PACK_MODES@@@Z@4JA ; `unpack_local_pylon_data'::`1'::__LINE__Var
PUBLIC	??_C@_02LFNMGJAP@en@				; `string'
EXTRN	?process_assert@@YGXPBD0H@Z:PROC		; process_assert
EXTRN	?debug_log@@YAXPBDZZ:PROC			; debug_log
EXTRN	?pack_int_value@@YGXPAUENTITY@@W4INT_TYPES@@H@Z:PROC ; pack_int_value
EXTRN	?unpack_int_value@@YGHPAUENTITY@@W4INT_TYPES@@@Z:PROC ; unpack_int_value
EXTRN	?get_3d_object_destroyed_object_index@@YGHH@Z:PROC ; get_3d_object_destroyed_object_index
EXTRN	?null_entity_pointer_message@@3PBDB:DWORD	; null_entity_pointer_message
EXTRN	?fn_pack_local_entity_data@@3PAP6GXPAUENTITY@@W4PACK_MODES@@@ZA:BYTE ; fn_pack_local_entity_data
EXTRN	?fn_unpack_local_entity_data@@3PAP6GXPAUENTITY@@W4ENTITY_TYPES@@W4PACK_MODES@@@ZA:BYTE ; fn_unpack_local_entity_data
EXTRN	?first_used_entity@@3PAUENTITY@@A:DWORD		; first_used_entity
;	COMDAT ??_C@_02LFNMGJAP@en@
CONST	SEGMENT
??_C@_02LFNMGJAP@en@ DB 'en', 00H			; `string'
CONST	ENDS
;	COMDAT ?__LINE__Var@?0??unpack_local_pylon_data@@YGXW4PACK_MODES@@@Z@4JA
_DATA	SEGMENT
?__LINE__Var@?0??unpack_local_pylon_data@@YGXW4PACK_MODES@@@Z@4JA DD 0100H ; `unpack_local_pylon_data'::`1'::__LINE__Var
_DATA	ENDS
;	COMDAT ??_C@_09MKIBCOEE@RLE?5PYLON@
CONST	SEGMENT
??_C@_09MKIBCOEE@RLE?5PYLON@ DB 'RLE PYLON', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_0CA@GHGJAHIH@mode?5?$CB?$DN?5PACK_MODE_UPDATE_ENTITY@
CONST	SEGMENT
??_C@_0CA@GHGJAHIH@mode?5?$CB?$DN?5PACK_MODE_UPDATE_ENTITY@ DB 'mode != P'
	DB	'ACK_MODE_UPDATE_ENTITY', 00H		; `string'
CONST	ENDS
;	COMDAT ?__LINE__Var@?0??pack_local_pylon_data@@YGXW4PACK_MODES@@@Z@4JA
_DATA	SEGMENT
?__LINE__Var@?0??pack_local_pylon_data@@YGXW4PACK_MODES@@@Z@4JA DD 0a1H ; `pack_local_pylon_data'::`1'::__LINE__Var
_DATA	ENDS
;	COMDAT ?__LINE__Var@?0??unpack_local_data@@YGXPAUENTITY@@W4ENTITY_TYPES@@W4PACK_MODES@@@Z@4JA
_DATA	SEGMENT
?__LINE__Var@?0??unpack_local_data@@YGXPAUENTITY@@W4ENTITY_TYPES@@W4PACK_MODES@@@Z@4JA DD 071H ; `unpack_local_data'::`1'::__LINE__Var
_DATA	ENDS
;	COMDAT ??_C@_0CH@MMFDPOBJ@?$CImode?5?$DO?$DN?50?$CJ?5?$CG?$CG?5?$CImode?5?$DM?5NUM_PACK@
CONST	SEGMENT
??_C@_0CH@MMFDPOBJ@?$CImode?5?$DO?$DN?50?$CJ?5?$CG?$CG?5?$CImode?5?$DM?5NUM_PACK@ DB '('
	DB	'mode >= 0) && (mode < NUM_PACK_MODES)', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_0EJ@FJEFPLMF@c?3?2users?2nhv90?2projects?2eech?2ap@
CONST	SEGMENT
??_C@_0EJ@FJEFPLMF@c?3?2users?2nhv90?2projects?2eech?2ap@ DB 'c:\users\nh'
	DB	'v90\projects\eech\aphavoc\source\entity\fixed\pylon\py_pack.c'
	DB	00H						; `string'
CONST	ENDS
;	COMDAT ?__LINE__Var@?0??pack_local_data@@YGXPAUENTITY@@W4PACK_MODES@@@Z@4JA
_DATA	SEGMENT
?__LINE__Var@?0??pack_local_data@@YGXPAUENTITY@@W4PACK_MODES@@@Z@4JA DD 050H ; `pack_local_data'::`1'::__LINE__Var
_DATA	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\entity\fixed\pylon\py_pack.c
;	COMDAT ?unpack_local_data@@YGXPAUENTITY@@W4ENTITY_TYPES@@W4PACK_MODES@@@Z
_TEXT	SEGMENT
tv70 = -68						; size = 4
_en$ = 8						; size = 4
_type$ = 12						; size = 4
_mode$ = 16						; size = 4
?unpack_local_data@@YGXPAUENTITY@@W4ENTITY_TYPES@@W4PACK_MODES@@@Z PROC ; unpack_local_data, COMDAT

; 113  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 44	 sub	 esp, 68			; 00000044H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 114  : 
; 115  :    ASSERT ((mode >= 0) && (mode < NUM_PACK_MODES));

  00009	83 7d 10 00	 cmp	 DWORD PTR _mode$[ebp], 0
  0000d	7c 06		 jl	 SHORT $LN5@unpack_loc
  0000f	83 7d 10 04	 cmp	 DWORD PTR _mode$[ebp], 4
  00013	7c 18		 jl	 SHORT $LN4@unpack_loc
$LN5@unpack_loc:
  00015	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??unpack_local_data@@YGXPAUENTITY@@W4ENTITY_TYPES@@W4PACK_MODES@@@Z@4JA
  0001a	83 c0 02	 add	 eax, 2
  0001d	50		 push	 eax
  0001e	68 00 00 00 00	 push	 OFFSET ??_C@_0EJ@FJEFPLMF@c?3?2users?2nhv90?2projects?2eech?2ap@
  00023	68 00 00 00 00	 push	 OFFSET ??_C@_0CH@MMFDPOBJ@?$CImode?5?$DO?$DN?50?$CJ?5?$CG?$CG?5?$CImode?5?$DM?5NUM_PACK@
  00028	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN4@unpack_loc:

; 116  : 
; 117  :    switch (mode)

  0002d	8b 45 10	 mov	 eax, DWORD PTR _mode$[ebp]
  00030	89 45 bc	 mov	 DWORD PTR tv70[ebp], eax

; 118  :    {
; 119  :       ////////////////////////////////////////
; 120  :       case PACK_MODE_SERVER_SESSION:
; 121  :       case PACK_MODE_CLIENT_SESSION:
; 122  :       ////////////////////////////////////////
; 123  :       {
; 124  :          break;
; 125  :       }
; 126  :       ////////////////////////////////////////
; 127  :       case PACK_MODE_BROWSE_SESSION:
; 128  :       ////////////////////////////////////////
; 129  :       {
; 130  :          break;
; 131  :       }
; 132  :       ////////////////////////////////////////
; 133  :       case PACK_MODE_UPDATE_ENTITY:
; 134  :       ////////////////////////////////////////
; 135  :       {
; 136  :          //
; 137  :          // always use access functions to set the data
; 138  :          //
; 139  : 
; 140  :          break;
; 141  :       }
; 142  :    }
; 143  : }

  00033	5f		 pop	 edi
  00034	5e		 pop	 esi
  00035	5b		 pop	 ebx
  00036	8b e5		 mov	 esp, ebp
  00038	5d		 pop	 ebp
  00039	c2 0c 00	 ret	 12			; 0000000cH
?unpack_local_data@@YGXPAUENTITY@@W4ENTITY_TYPES@@W4PACK_MODES@@@Z ENDP ; unpack_local_data
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\entity\fixed\pylon\py_pack.c
;	COMDAT ?pack_local_data@@YGXPAUENTITY@@W4PACK_MODES@@@Z
_TEXT	SEGMENT
tv70 = -68						; size = 4
_en$ = 8						; size = 4
_mode$ = 12						; size = 4
?pack_local_data@@YGXPAUENTITY@@W4PACK_MODES@@@Z PROC	; pack_local_data, COMDAT

; 80   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 44	 sub	 esp, 68			; 00000044H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 81   : 
; 82   :    ASSERT ((mode >= 0) && (mode < NUM_PACK_MODES));

  00009	83 7d 0c 00	 cmp	 DWORD PTR _mode$[ebp], 0
  0000d	7c 06		 jl	 SHORT $LN5@pack_local
  0000f	83 7d 0c 04	 cmp	 DWORD PTR _mode$[ebp], 4
  00013	7c 18		 jl	 SHORT $LN4@pack_local
$LN5@pack_local:
  00015	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??pack_local_data@@YGXPAUENTITY@@W4PACK_MODES@@@Z@4JA
  0001a	83 c0 02	 add	 eax, 2
  0001d	50		 push	 eax
  0001e	68 00 00 00 00	 push	 OFFSET ??_C@_0EJ@FJEFPLMF@c?3?2users?2nhv90?2projects?2eech?2ap@
  00023	68 00 00 00 00	 push	 OFFSET ??_C@_0CH@MMFDPOBJ@?$CImode?5?$DO?$DN?50?$CJ?5?$CG?$CG?5?$CImode?5?$DM?5NUM_PACK@
  00028	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN4@pack_local:

; 83   : 
; 84   :    switch (mode)

  0002d	8b 45 0c	 mov	 eax, DWORD PTR _mode$[ebp]
  00030	89 45 bc	 mov	 DWORD PTR tv70[ebp], eax

; 85   :    {
; 86   :       ////////////////////////////////////////
; 87   :       case PACK_MODE_SERVER_SESSION:
; 88   :       case PACK_MODE_CLIENT_SESSION:
; 89   :       ////////////////////////////////////////
; 90   :       {
; 91   :          break;
; 92   :       }
; 93   :       ////////////////////////////////////////
; 94   :       case PACK_MODE_BROWSE_SESSION:
; 95   :       ////////////////////////////////////////
; 96   :       {
; 97   :          break;
; 98   :       }
; 99   :       ////////////////////////////////////////
; 100  :       case PACK_MODE_UPDATE_ENTITY:
; 101  :       ////////////////////////////////////////
; 102  :       {
; 103  :          break;
; 104  :       }
; 105  :    }
; 106  : }

  00033	5f		 pop	 edi
  00034	5e		 pop	 esi
  00035	5b		 pop	 ebx
  00036	8b e5		 mov	 esp, ebp
  00038	5d		 pop	 ebp
  00039	c2 08 00	 ret	 8
?pack_local_data@@YGXPAUENTITY@@W4PACK_MODES@@@Z ENDP	; pack_local_data
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\entity\fixed\pylon\py_pack.c
;	COMDAT ?unpack_local_pylon_data@@YGXW4PACK_MODES@@@Z
_TEXT	SEGMENT
tv149 = -88						; size = 4
tv89 = -88						; size = 4
_count$ = -20						; size = 4
_alive$ = -16						; size = 4
_raw$ = -12						; size = 4
_en$ = -8						; size = 4
_destroy_en$ = -4					; size = 4
_mode$ = 8						; size = 4
?unpack_local_pylon_data@@YGXW4PACK_MODES@@@Z PROC	; unpack_local_pylon_data, COMDAT

; 256  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 58	 sub	 esp, 88			; 00000058H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 257  :    entity
; 258  : 		*destroy_en,
; 259  :       *en;
; 260  : 
; 261  :    pylon
; 262  :       *raw;
; 263  : 
; 264  : 	int
; 265  : 		alive,
; 266  : 		count;
; 267  : 
; 268  :    ASSERT (mode != PACK_MODE_UPDATE_ENTITY);

  00009	83 7d 08 03	 cmp	 DWORD PTR _mode$[ebp], 3
  0000d	75 18		 jne	 SHORT $LN4@unpack_loc
  0000f	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??unpack_local_pylon_data@@YGXW4PACK_MODES@@@Z@4JA
  00014	83 c0 0c	 add	 eax, 12			; 0000000cH
  00017	50		 push	 eax
  00018	68 00 00 00 00	 push	 OFFSET ??_C@_0EJ@FJEFPLMF@c?3?2users?2nhv90?2projects?2eech?2ap@
  0001d	68 00 00 00 00	 push	 OFFSET ??_C@_0CA@GHGJAHIH@mode?5?$CB?$DN?5PACK_MODE_UPDATE_ENTITY@
  00022	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN4@unpack_loc:

; 269  : 
; 270  :    if (mode == PACK_MODE_BROWSE_SESSION)

  00027	83 7d 08 02	 cmp	 DWORD PTR _mode$[ebp], 2
  0002b	75 05		 jne	 SHORT $LN5@unpack_loc

; 271  :    {
; 272  :       return;

  0002d	e9 2b 01 00 00	 jmp	 $LN1@unpack_loc
$LN5@unpack_loc:

; 273  :    }
; 274  : 
; 275  : 	//
; 276  : 	// RLE encoded
; 277  : 	//
; 278  : 
; 279  : 	debug_log ("RLE PYLON");

  00032	68 00 00 00 00	 push	 OFFSET ??_C@_09MKIBCOEE@RLE?5PYLON@
  00037	e8 00 00 00 00	 call	 ?debug_log@@YAXPBDZZ	; debug_log
  0003c	83 c4 04	 add	 esp, 4

; 280  : 
; 281  : 	count = unpack_int_value (NULL, INT_TYPE_LENGTH);

  0003f	6a 79		 push	 121			; 00000079H
  00041	6a 00		 push	 0
  00043	e8 00 00 00 00	 call	 ?unpack_int_value@@YGHPAUENTITY@@W4INT_TYPES@@@Z ; unpack_int_value
  00048	89 45 ec	 mov	 DWORD PTR _count$[ebp], eax

; 282  : 
; 283  : 	alive = unpack_int_value (NULL, INT_TYPE_ALIVE);

  0004b	6a 07		 push	 7
  0004d	6a 00		 push	 0
  0004f	e8 00 00 00 00	 call	 ?unpack_int_value@@YGHPAUENTITY@@W4INT_TYPES@@@Z ; unpack_int_value
  00054	89 45 f0	 mov	 DWORD PTR _alive$[ebp], eax

; 284  : 
; 285  : 	#if DEBUG_MODULE
; 286  : 
; 287  : 	debug_log ("PY_PACK: unpacking count %d, alive %d", count, alive);
; 288  : 
; 289  : 	#endif
; 290  : 
; 291  : 	en = get_local_entity_list ();

  00057	a1 00 00 00 00	 mov	 eax, DWORD PTR ?first_used_entity@@3PAUENTITY@@A ; first_used_entity
  0005c	89 45 f8	 mov	 DWORD PTR _en$[ebp], eax

; 292  : 
; 293  : 	ASSERT (en);

  0005f	83 7d f8 00	 cmp	 DWORD PTR _en$[ebp], 0
  00063	75 18		 jne	 SHORT $LN2@unpack_loc
  00065	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??unpack_local_pylon_data@@YGXW4PACK_MODES@@@Z@4JA
  0006a	83 c0 25	 add	 eax, 37			; 00000025H
  0006d	50		 push	 eax
  0006e	68 00 00 00 00	 push	 OFFSET ??_C@_0EJ@FJEFPLMF@c?3?2users?2nhv90?2projects?2eech?2ap@
  00073	68 00 00 00 00	 push	 OFFSET ??_C@_02LFNMGJAP@en@
  00078	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN2@unpack_loc:

; 294  : 
; 295  : 	while (en)

  0007d	83 7d f8 00	 cmp	 DWORD PTR _en$[ebp], 0
  00081	0f 84 d6 00 00
	00		 je	 $LN1@unpack_loc

; 296  : 	{
; 297  : 
; 298  : 		destroy_en = en;

  00087	8b 45 f8	 mov	 eax, DWORD PTR _en$[ebp]
  0008a	89 45 fc	 mov	 DWORD PTR _destroy_en$[ebp], eax

; 299  : 
; 300  : 		en = get_local_entity_succ (en);

  0008d	8b 45 f8	 mov	 eax, DWORD PTR _en$[ebp]
  00090	8b 48 08	 mov	 ecx, DWORD PTR [eax+8]
  00093	89 4d f8	 mov	 DWORD PTR _en$[ebp], ecx

; 301  : 
; 302  : 		if (get_local_entity_type (destroy_en) == ENTITY_TYPE_PYLON)

  00096	83 7d fc 00	 cmp	 DWORD PTR _destroy_en$[ebp], 0
  0009a	74 0a		 je	 SHORT $LN11@unpack_loc
  0009c	8b 45 fc	 mov	 eax, DWORD PTR _destroy_en$[ebp]
  0009f	8b 08		 mov	 ecx, DWORD PTR [eax]
  000a1	89 4d a8	 mov	 DWORD PTR tv89[ebp], ecx
  000a4	eb 1d		 jmp	 SHORT $LN12@unpack_loc
$LN11@unpack_loc:
  000a6	68 2e 01 00 00	 push	 302			; 0000012eH
  000ab	68 00 00 00 00	 push	 OFFSET ??_C@_0EJ@FJEFPLMF@c?3?2users?2nhv90?2projects?2eech?2ap@
  000b0	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?null_entity_pointer_message@@3PBDB ; null_entity_pointer_message
  000b6	52		 push	 edx
  000b7	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
  000bc	c7 45 a8 00 00
	00 00		 mov	 DWORD PTR tv89[ebp], 0
$LN12@unpack_loc:
  000c3	83 7d a8 15	 cmp	 DWORD PTR tv89[ebp], 21	; 00000015H
  000c7	0f 85 8b 00 00
	00		 jne	 $LN7@unpack_loc

; 303  : 		{
; 304  : 
; 305  : 			if (count == 0)

  000cd	83 7d ec 00	 cmp	 DWORD PTR _count$[ebp], 0
  000d1	75 18		 jne	 SHORT $LN8@unpack_loc

; 306  : 			{
; 307  : 
; 308  : 				count = unpack_int_value (NULL, INT_TYPE_LENGTH);

  000d3	6a 79		 push	 121			; 00000079H
  000d5	6a 00		 push	 0
  000d7	e8 00 00 00 00	 call	 ?unpack_int_value@@YGHPAUENTITY@@W4INT_TYPES@@@Z ; unpack_int_value
  000dc	89 45 ec	 mov	 DWORD PTR _count$[ebp], eax

; 309  : 
; 310  : 				alive = unpack_int_value (NULL, INT_TYPE_ALIVE);

  000df	6a 07		 push	 7
  000e1	6a 00		 push	 0
  000e3	e8 00 00 00 00	 call	 ?unpack_int_value@@YGHPAUENTITY@@W4INT_TYPES@@@Z ; unpack_int_value
  000e8	89 45 f0	 mov	 DWORD PTR _alive$[ebp], eax
$LN8@unpack_loc:

; 311  : 
; 312  : 				#if DEBUG_MODULE
; 313  : 			
; 314  : 				debug_log ("PY_PACK: unpacking count %d, alive %d", count, alive);
; 315  : 			
; 316  : 				#endif
; 317  : 			}
; 318  : 
; 319  : 			count --;

  000eb	8b 45 ec	 mov	 eax, DWORD PTR _count$[ebp]
  000ee	83 e8 01	 sub	 eax, 1
  000f1	89 45 ec	 mov	 DWORD PTR _count$[ebp], eax

; 320  : 
; 321  : 			raw = (pylon *) get_local_entity_data (destroy_en);

  000f4	8b 45 fc	 mov	 eax, DWORD PTR _destroy_en$[ebp]
  000f7	8b 48 04	 mov	 ecx, DWORD PTR [eax+4]
  000fa	89 4d f4	 mov	 DWORD PTR _raw$[ebp], ecx

; 322  : 
; 323  : 			raw->fix.alive = alive;

  000fd	8b 45 f0	 mov	 eax, DWORD PTR _alive$[ebp]
  00100	83 e0 01	 and	 eax, 1
  00103	c1 e0 14	 shl	 eax, 20			; 00000014H
  00106	8b 4d f4	 mov	 ecx, DWORD PTR _raw$[ebp]
  00109	8b 51 38	 mov	 edx, DWORD PTR [ecx+56]
  0010c	81 e2 ff ff ef
	ff		 and	 edx, -1048577		; ffefffffH
  00112	0b d0		 or	 edx, eax
  00114	8b 45 f4	 mov	 eax, DWORD PTR _raw$[ebp]
  00117	89 50 38	 mov	 DWORD PTR [eax+56], edx

; 324  : 
; 325  : 			if (!alive)

  0011a	83 7d f0 00	 cmp	 DWORD PTR _alive$[ebp], 0
  0011e	75 38		 jne	 SHORT $LN7@unpack_loc

; 326  : 			{
; 327  : 				raw->fix.object_3d_shape = get_3d_object_destroyed_object_index (raw->fix.object_3d_shape);

  00120	8b 45 f4	 mov	 eax, DWORD PTR _raw$[ebp]
  00123	8b 48 38	 mov	 ecx, DWORD PTR [eax+56]
  00126	c1 e9 08	 shr	 ecx, 8
  00129	81 e1 ff 0f 00
	00		 and	 ecx, 4095		; 00000fffH
  0012f	51		 push	 ecx
  00130	e8 00 00 00 00	 call	 ?get_3d_object_destroyed_object_index@@YGHH@Z ; get_3d_object_destroyed_object_index
  00135	89 45 a8	 mov	 DWORD PTR tv149[ebp], eax
  00138	8b 55 a8	 mov	 edx, DWORD PTR tv149[ebp]
  0013b	81 e2 ff 0f 00
	00		 and	 edx, 4095		; 00000fffH
  00141	c1 e2 08	 shl	 edx, 8
  00144	8b 45 f4	 mov	 eax, DWORD PTR _raw$[ebp]
  00147	8b 48 38	 mov	 ecx, DWORD PTR [eax+56]
  0014a	81 e1 ff 00 f0
	ff		 and	 ecx, -1048321		; fff000ffH
  00150	0b ca		 or	 ecx, edx
  00152	8b 55 f4	 mov	 edx, DWORD PTR _raw$[ebp]
  00155	89 4a 38	 mov	 DWORD PTR [edx+56], ecx
$LN7@unpack_loc:

; 328  : 			}
; 329  : 		}
; 330  : 	}

  00158	e9 20 ff ff ff	 jmp	 $LN2@unpack_loc
$LN1@unpack_loc:

; 331  : }

  0015d	5f		 pop	 edi
  0015e	5e		 pop	 esi
  0015f	5b		 pop	 ebx
  00160	8b e5		 mov	 esp, ebp
  00162	5d		 pop	 ebp
  00163	c2 04 00	 ret	 4
?unpack_local_pylon_data@@YGXW4PACK_MODES@@@Z ENDP	; unpack_local_pylon_data
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\entity\fixed\pylon\py_pack.c
;	COMDAT ?pack_local_pylon_data@@YGXW4PACK_MODES@@@Z
_TEXT	SEGMENT
_alive$ = -24						; size = 4
_count$ = -20						; size = 4
_pack_size$ = -16					; size = 4
_total$ = -12						; size = 4
_raw$ = -8						; size = 4
_en$ = -4						; size = 4
_mode$ = 8						; size = 4
?pack_local_pylon_data@@YGXW4PACK_MODES@@@Z PROC	; pack_local_pylon_data, COMDAT

; 161  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 58	 sub	 esp, 88			; 00000058H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 162  :    entity
; 163  :       *en;
; 164  : 
; 165  :    pylon
; 166  :       *raw;
; 167  : 
; 168  : 	int
; 169  : 		total,
; 170  : 		pack_size,
; 171  : 		count,
; 172  : 		alive;
; 173  : 
; 174  :    ASSERT (mode != PACK_MODE_UPDATE_ENTITY);

  00009	83 7d 08 03	 cmp	 DWORD PTR _mode$[ebp], 3
  0000d	75 18		 jne	 SHORT $LN4@pack_local
  0000f	a1 00 00 00 00	 mov	 eax, DWORD PTR ?__LINE__Var@?0??pack_local_pylon_data@@YGXW4PACK_MODES@@@Z@4JA
  00014	83 c0 0d	 add	 eax, 13			; 0000000dH
  00017	50		 push	 eax
  00018	68 00 00 00 00	 push	 OFFSET ??_C@_0EJ@FJEFPLMF@c?3?2users?2nhv90?2projects?2eech?2ap@
  0001d	68 00 00 00 00	 push	 OFFSET ??_C@_0CA@GHGJAHIH@mode?5?$CB?$DN?5PACK_MODE_UPDATE_ENTITY@
  00022	e8 00 00 00 00	 call	 ?process_assert@@YGXPBD0H@Z ; process_assert
$LN4@pack_local:

; 175  : 
; 176  :    if (mode == PACK_MODE_BROWSE_SESSION)

  00027	83 7d 08 02	 cmp	 DWORD PTR _mode$[ebp], 2
  0002b	75 05		 jne	 SHORT $LN5@pack_local

; 177  :    {
; 178  :       return;

  0002d	e9 ed 00 00 00	 jmp	 $LN1@pack_local
$LN5@pack_local:

; 179  :    }
; 180  : 
; 181  : 	//
; 182  : 	// RLE encoded
; 183  : 	//
; 184  : 
; 185  : 	debug_log ("RLE PYLON");

  00032	68 00 00 00 00	 push	 OFFSET ??_C@_09MKIBCOEE@RLE?5PYLON@
  00037	e8 00 00 00 00	 call	 ?debug_log@@YAXPBDZZ	; debug_log
  0003c	83 c4 04	 add	 esp, 4

; 186  : 
; 187  : 	pack_size = 0;

  0003f	c7 45 f0 00 00
	00 00		 mov	 DWORD PTR _pack_size$[ebp], 0

; 188  : 
; 189  : 	count = 0;

  00046	c7 45 ec 00 00
	00 00		 mov	 DWORD PTR _count$[ebp], 0

; 190  : 
; 191  : 	alive = TRUE;

  0004d	c7 45 e8 01 00
	00 00		 mov	 DWORD PTR _alive$[ebp], 1

; 192  : 
; 193  : 	total = 0;

  00054	c7 45 f4 00 00
	00 00		 mov	 DWORD PTR _total$[ebp], 0

; 194  : 
; 195  : 	en = get_local_entity_list ();

  0005b	a1 00 00 00 00	 mov	 eax, DWORD PTR ?first_used_entity@@3PAUENTITY@@A ; first_used_entity
  00060	89 45 fc	 mov	 DWORD PTR _en$[ebp], eax
$LN2@pack_local:

; 196  : 
; 197  : 	while (en)

  00063	83 7d fc 00	 cmp	 DWORD PTR _en$[ebp], 0
  00067	0f 84 86 00 00
	00		 je	 $LN3@pack_local

; 198  : 	{
; 199  : 
; 200  : 		if (en->type == ENTITY_TYPE_PYLON)

  0006d	8b 45 fc	 mov	 eax, DWORD PTR _en$[ebp]
  00070	83 38 15	 cmp	 DWORD PTR [eax], 21	; 00000015H
  00073	75 70		 jne	 SHORT $LN6@pack_local

; 201  : 		{
; 202  : 
; 203  : 			total ++;

  00075	8b 45 f4	 mov	 eax, DWORD PTR _total$[ebp]
  00078	83 c0 01	 add	 eax, 1
  0007b	89 45 f4	 mov	 DWORD PTR _total$[ebp], eax

; 204  : 
; 205  : 			raw = (pylon *) get_local_entity_data (en);

  0007e	8b 45 fc	 mov	 eax, DWORD PTR _en$[ebp]
  00081	8b 48 04	 mov	 ecx, DWORD PTR [eax+4]
  00084	89 4d f8	 mov	 DWORD PTR _raw$[ebp], ecx

; 206  : 
; 207  : 			if (alive == raw->fix.alive)

  00087	8b 45 f8	 mov	 eax, DWORD PTR _raw$[ebp]
  0008a	8b 48 38	 mov	 ecx, DWORD PTR [eax+56]
  0008d	c1 e9 14	 shr	 ecx, 20			; 00000014H
  00090	83 e1 01	 and	 ecx, 1
  00093	39 4d e8	 cmp	 DWORD PTR _alive$[ebp], ecx
  00096	75 0b		 jne	 SHORT $LN7@pack_local

; 208  : 			{
; 209  : 
; 210  : 				count ++;

  00098	8b 45 ec	 mov	 eax, DWORD PTR _count$[ebp]
  0009b	83 c0 01	 add	 eax, 1
  0009e	89 45 ec	 mov	 DWORD PTR _count$[ebp], eax

; 211  : 			}
; 212  : 			else

  000a1	eb 42		 jmp	 SHORT $LN6@pack_local
$LN7@pack_local:

; 213  : 			{
; 214  : 
; 215  : 				pack_int_value (NULL, INT_TYPE_LENGTH, count);

  000a3	8b 45 ec	 mov	 eax, DWORD PTR _count$[ebp]
  000a6	50		 push	 eax
  000a7	6a 79		 push	 121			; 00000079H
  000a9	6a 00		 push	 0
  000ab	e8 00 00 00 00	 call	 ?pack_int_value@@YGXPAUENTITY@@W4INT_TYPES@@H@Z ; pack_int_value

; 216  : 				pack_size += NUM_LENGTH_BITS;

  000b0	8b 45 f0	 mov	 eax, DWORD PTR _pack_size$[ebp]
  000b3	83 c0 10	 add	 eax, 16			; 00000010H
  000b6	89 45 f0	 mov	 DWORD PTR _pack_size$[ebp], eax

; 217  : 
; 218  : 				pack_int_value (NULL, INT_TYPE_ALIVE, alive);

  000b9	8b 45 e8	 mov	 eax, DWORD PTR _alive$[ebp]
  000bc	50		 push	 eax
  000bd	6a 07		 push	 7
  000bf	6a 00		 push	 0
  000c1	e8 00 00 00 00	 call	 ?pack_int_value@@YGXPAUENTITY@@W4INT_TYPES@@H@Z ; pack_int_value

; 219  : 				pack_size += NUM_ALIVE_BITS;

  000c6	8b 45 f0	 mov	 eax, DWORD PTR _pack_size$[ebp]
  000c9	83 c0 01	 add	 eax, 1
  000cc	89 45 f0	 mov	 DWORD PTR _pack_size$[ebp], eax

; 220  : 
; 221  : 				#if DEBUG_MODULE
; 222  : 
; 223  : 				debug_log ("PY_PACK: packing count %d, alive %d", count, alive);
; 224  : 
; 225  : 				#endif
; 226  : 
; 227  : 				alive = raw->fix.alive;

  000cf	8b 45 f8	 mov	 eax, DWORD PTR _raw$[ebp]
  000d2	8b 48 38	 mov	 ecx, DWORD PTR [eax+56]
  000d5	c1 e9 14	 shr	 ecx, 20			; 00000014H
  000d8	83 e1 01	 and	 ecx, 1
  000db	89 4d e8	 mov	 DWORD PTR _alive$[ebp], ecx

; 228  : 
; 229  : 				count = 1;

  000de	c7 45 ec 01 00
	00 00		 mov	 DWORD PTR _count$[ebp], 1
$LN6@pack_local:

; 230  : 			}
; 231  : 		}
; 232  : 
; 233  : 		en = get_local_entity_succ (en);

  000e5	8b 45 fc	 mov	 eax, DWORD PTR _en$[ebp]
  000e8	8b 48 08	 mov	 ecx, DWORD PTR [eax+8]
  000eb	89 4d fc	 mov	 DWORD PTR _en$[ebp], ecx

; 234  : 	}

  000ee	e9 70 ff ff ff	 jmp	 $LN2@pack_local
$LN3@pack_local:

; 235  : 
; 236  : 	pack_int_value (NULL, INT_TYPE_LENGTH, count);

  000f3	8b 45 ec	 mov	 eax, DWORD PTR _count$[ebp]
  000f6	50		 push	 eax
  000f7	6a 79		 push	 121			; 00000079H
  000f9	6a 00		 push	 0
  000fb	e8 00 00 00 00	 call	 ?pack_int_value@@YGXPAUENTITY@@W4INT_TYPES@@H@Z ; pack_int_value

; 237  : 	pack_size += NUM_LENGTH_BITS;

  00100	8b 45 f0	 mov	 eax, DWORD PTR _pack_size$[ebp]
  00103	83 c0 10	 add	 eax, 16			; 00000010H
  00106	89 45 f0	 mov	 DWORD PTR _pack_size$[ebp], eax

; 238  : 
; 239  : 	pack_int_value (NULL, INT_TYPE_ALIVE, alive);

  00109	8b 45 e8	 mov	 eax, DWORD PTR _alive$[ebp]
  0010c	50		 push	 eax
  0010d	6a 07		 push	 7
  0010f	6a 00		 push	 0
  00111	e8 00 00 00 00	 call	 ?pack_int_value@@YGXPAUENTITY@@W4INT_TYPES@@H@Z ; pack_int_value

; 240  : 	pack_size += NUM_ALIVE_BITS;

  00116	8b 45 f0	 mov	 eax, DWORD PTR _pack_size$[ebp]
  00119	83 c0 01	 add	 eax, 1
  0011c	89 45 f0	 mov	 DWORD PTR _pack_size$[ebp], eax
$LN1@pack_local:

; 241  : 
; 242  : 	#if DEBUG_MODULE
; 243  : 
; 244  : 	debug_log ("PY_PACK: packing count %d, alive %d", count, alive);
; 245  : 
; 246  : 	#endif
; 247  : 
; 248  : 	//debug_log ("PY_PACK: packing %d pylons took %d bytes (%d bits)", total, pack_size / 8, pack_size);
; 249  : }

  0011f	5f		 pop	 edi
  00120	5e		 pop	 esi
  00121	5b		 pop	 ebx
  00122	8b e5		 mov	 esp, ebp
  00124	5d		 pop	 ebp
  00125	c2 04 00	 ret	 4
?pack_local_pylon_data@@YGXW4PACK_MODES@@@Z ENDP	; pack_local_pylon_data
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\aphavoc\source\entity\fixed\pylon\py_pack.c
;	COMDAT ?overload_pylon_pack_functions@@YGXXZ
_TEXT	SEGMENT
?overload_pylon_pack_functions@@YGXXZ PROC		; overload_pylon_pack_functions, COMDAT

; 150  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 151  :    fn_pack_local_entity_data[ENTITY_TYPE_PYLON]    = pack_local_data;

  00009	b8 04 00 00 00	 mov	 eax, 4
  0000e	6b c8 15	 imul	 ecx, eax, 21
  00011	c7 81 00 00 00
	00 00 00 00 00	 mov	 DWORD PTR ?fn_pack_local_entity_data@@3PAP6GXPAUENTITY@@W4PACK_MODES@@@ZA[ecx], OFFSET ?pack_local_data@@YGXPAUENTITY@@W4PACK_MODES@@@Z ; pack_local_data

; 152  : 
; 153  :    fn_unpack_local_entity_data[ENTITY_TYPE_PYLON]  = unpack_local_data;

  0001b	b8 04 00 00 00	 mov	 eax, 4
  00020	6b c8 15	 imul	 ecx, eax, 21
  00023	c7 81 00 00 00
	00 00 00 00 00	 mov	 DWORD PTR ?fn_unpack_local_entity_data@@3PAP6GXPAUENTITY@@W4ENTITY_TYPES@@W4PACK_MODES@@@ZA[ecx], OFFSET ?unpack_local_data@@YGXPAUENTITY@@W4ENTITY_TYPES@@W4PACK_MODES@@@Z ; unpack_local_data

; 154  : }

  0002d	5f		 pop	 edi
  0002e	5e		 pop	 esi
  0002f	5b		 pop	 ebx
  00030	8b e5		 mov	 esp, ebp
  00032	5d		 pop	 ebp
  00033	c3		 ret	 0
?overload_pylon_pack_functions@@YGXXZ ENDP		; overload_pylon_pack_functions
_TEXT	ENDS
END
