; Listing generated by Microsoft (R) Optimizing Compiler Version 19.16.27045.0 

	TITLE	C:\Users\nhv90\Projects\eech\modules\maths\tevent.c
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB MSVCRTD
INCLUDELIB OLDNAMES

PUBLIC	?timed_event_has_finished@@YGHMMMPAM@Z		; timed_event_has_finished
PUBLIC	__real@47a8c000
EXTRN	__fltused:DWORD
;	COMDAT __real@47a8c000
CONST	SEGMENT
__real@47a8c000 DD 047a8c000r			; 86400
CONST	ENDS
; Function compile flags: /Odtp /ZI
; File c:\users\nhv90\projects\eech\modules\maths\tevent.c
;	COMDAT ?timed_event_has_finished@@YGHMMMPAM@Z
_TEXT	SEGMENT
_start_time$ = 8					; size = 4
_length$ = 12						; size = 4
_current_time$ = 16					; size = 4
_distance$ = 20						; size = 4
?timed_event_has_finished@@YGHMMMPAM@Z PROC		; timed_event_has_finished, COMDAT

; 74   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 40	 sub	 esp, 64			; 00000040H
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 75   : 
; 76   : 	//
; 77   : 	// This calculates whether an event has passed or not, and if not, how far through the event it is ( 0..1 )
; 78   : 	//
; 79   : 
; 80   : 	if ( start_time > current_time )

  00009	f3 0f 10 45 08	 movss	 xmm0, DWORD PTR _start_time$[ebp]
  0000e	0f 2f 45 10	 comiss	 xmm0, DWORD PTR _current_time$[ebp]
  00012	76 12		 jbe	 SHORT $LN2@timed_even

; 81   : 	{
; 82   : 
; 83   : 		//
; 84   : 		// Either the event is well past finishing, or the current time has wrapped around to 0.
; 85   : 		//
; 86   : 
; 87   : 		current_time += ONE_DAY;

  00014	f3 0f 10 45 10	 movss	 xmm0, DWORD PTR _current_time$[ebp]
  00019	f3 0f 58 05 00
	00 00 00	 addss	 xmm0, DWORD PTR __real@47a8c000
  00021	f3 0f 11 45 10	 movss	 DWORD PTR _current_time$[ebp], xmm0
$LN2@timed_even:

; 88   : 	}
; 89   : 
; 90   : 	if ( ( start_time + length ) <= current_time )

  00026	f3 0f 10 45 08	 movss	 xmm0, DWORD PTR _start_time$[ebp]
  0002b	f3 0f 58 45 0c	 addss	 xmm0, DWORD PTR _length$[ebp]
  00030	f3 0f 10 4d 10	 movss	 xmm1, DWORD PTR _current_time$[ebp]
  00035	0f 2f c8	 comiss	 xmm1, xmm0
  00038	72 09		 jb	 SHORT $LN3@timed_even

; 91   : 	{
; 92   : 
; 93   : 		return ( TRUE );

  0003a	b8 01 00 00 00	 mov	 eax, 1
  0003f	eb 1a		 jmp	 SHORT $LN4@timed_even

; 94   : 	}
; 95   : 	else

  00041	eb 18		 jmp	 SHORT $LN4@timed_even
$LN3@timed_even:

; 96   : 	{
; 97   : 
; 98   : 		*distance = ( ( current_time -  start_time ) / length );

  00043	f3 0f 10 45 10	 movss	 xmm0, DWORD PTR _current_time$[ebp]
  00048	f3 0f 5c 45 08	 subss	 xmm0, DWORD PTR _start_time$[ebp]
  0004d	f3 0f 5e 45 0c	 divss	 xmm0, DWORD PTR _length$[ebp]
  00052	8b 45 14	 mov	 eax, DWORD PTR _distance$[ebp]
  00055	f3 0f 11 00	 movss	 DWORD PTR [eax], xmm0

; 99   : 
; 100  : 		return ( FALSE );

  00059	33 c0		 xor	 eax, eax
$LN4@timed_even:

; 101  : 	}
; 102  : }

  0005b	5f		 pop	 edi
  0005c	5e		 pop	 esi
  0005d	5b		 pop	 ebx
  0005e	8b e5		 mov	 esp, ebp
  00060	5d		 pop	 ebp
  00061	c2 10 00	 ret	 16			; 00000010H
?timed_event_has_finished@@YGHMMMPAM@Z ENDP		; timed_event_has_finished
_TEXT	ENDS
END
